{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":""},{"location":"#son-blog","title":"SON BLOG","text":"<p>AI \uac1c\ubc1c\uc790 \uc190\uc131\uc900\uc758 \uae30\uc220 \ube14\ub85c\uadf8</p>"},{"location":"#_1","title":"\uce74\ud14c\uace0\ub9ac","text":"<ul> <li>\ud83c\udfaf Portfolio \u2014 \ud504\ub85c\uc81d\ud2b8 \ud3ec\ud2b8\ud3f4\ub9ac\uc624</li> <li>\ud83e\uddea PoC \u2014 Proof of Concept</li> <li>\ud83d\udc0d Python \u2014 \ud30c\uc774\uc36c \uae30\ucd08 &amp; \ube44\ub3d9\uae30</li> <li>\ud83e\udd16 AI \u2014 BERT, GPT, Model Serving</li> <li>\ud83d\udd0d Search Engine \u2014 OpenSearch, Qdrant, RAG</li> <li>\ud83d\ude80 XGEN \u2014 XGEN \ud50c\ub7ab\ud3fc \uae30\uc220 \ubb38\uc11c</li> <li>\ud83c\udfd7\ufe0f Infra \u2014 K8s, Docker, CI/CD, DevOps</li> <li>\ud83d\udcdd Etc \u2014 \uae30\ud0c0</li> </ul>"},{"location":"ai/Code-Assistant-%EA%B0%9C%EB%B0%9C%EA%B8%B0/","title":"Code Assistant \uac1c\ubc1c\uae30 - AI \uae30\ubc18 \uac1c\ubc1c \ub3c4\uc6b0\ubbf8 \uc2dc\uc2a4\ud15c \uad6c\ucd95","text":""},{"location":"ai/Code-Assistant-%EA%B0%9C%EB%B0%9C%EA%B8%B0/#code-assistant-ai","title":"Code Assistant \uac1c\ubc1c\uae30 - AI \uae30\ubc18 \uac1c\ubc1c \ub3c4\uc6b0\ubbf8 \uc2dc\uc2a4\ud15c \uad6c\ucd95","text":"<p>2024\ub144 8\uc6d4\ubd80\ud130 10\uc6d4\uae4c\uc9c0 \uc9c4\ud589\ud55c AI \uae30\ubc18 \ucf54\ub4dc \uc5b4\uc2dc\uc2a4\ud134\ud2b8 \uac1c\ubc1c \uacfc\uc815\uc744 \uc815\ub9ac\ud55c\ub2e4. OpenAI API\uc640 \ub85c\uceec \ubaa8\ub378\uc744 \uacb0\ud569\ud558\uc5ec \uac1c\ubc1c\uc790\uc758 \uc0dd\uc0b0\uc131\uc744 \ub192\uc774\ub294 \uc2dc\uc2a4\ud15c\uc744 \uad6c\ucd95\ud55c \uacbd\ud5d8\ub2f4\uc774\ub2e4.</p>"},{"location":"ai/Code-Assistant-%EA%B0%9C%EB%B0%9C%EA%B8%B0/#_1","title":"\ud504\ub85c\uc81d\ud2b8 \ubc30\uacbd","text":"<p>\uac1c\ubc1c\ud300 \ub0b4\ubd80\uc5d0\uc11c \ubc18\ubcf5\uc801\uc778 \ucf54\ub4dc \uc791\uc131\uacfc \ub9ac\ubdf0 \uacfc\uc815\uc5d0 \ub9ce\uc740 \uc2dc\uac04\uc744 \uc18c\ubaa8\ud558\uace0 \uc788\uc5c8\ub2e4. \ud2b9\ud788 \ub2e4\uc74c\uacfc \uac19\uc740 \uc791\uc5c5\ub4e4\uc774 \ube44\ud6a8\uc728\uc801\uc774\uc5c8\ub2e4:</p> <ul> <li>API \ubb38\uc11c \uc0dd\uc131: \uc218\ub3d9\uc73c\ub85c \uc2a4\uc6e8\uac70 \ubb38\uc11c \uc791\uc131</li> <li>\ucf54\ub4dc \ub9ac\ubdf0: \ub2e8\uc21c\ud55c \uc2a4\ud0c0\uc77c \uac00\uc774\ub4dc \uccb4\ud06c</li> <li>\ud14c\uc2a4\ud2b8 \ucf00\uc774\uc2a4 \uc0dd\uc131: \ubcf4\uc77c\ub7ec\ud50c\ub808\uc774\ud2b8 \ucf54\ub4dc \ubc18\ubcf5</li> <li>\ubc84\uadf8 \ubd84\uc11d: \uc5d0\ub7ec \ub85c\uadf8 \ud328\ud134 \ubd84\uc11d</li> </ul> <p>\uc774\ub7f0 \ubc18\ubcf5 \uc791\uc5c5\uc744 \uc790\ub3d9\ud654\ud558\uace0 \uac1c\ubc1c\uc790\uac00 \ud575\uc2ec \ub85c\uc9c1\uc5d0 \uc9d1\uc911\ud560 \uc218 \uc788\ub3c4\ub85d AI \uc5b4\uc2dc\uc2a4\ud134\ud2b8\ub97c \uac1c\ubc1c\ud558\uae30\ub85c \ud588\ub2e4.</p>"},{"location":"ai/Code-Assistant-%EA%B0%9C%EB%B0%9C%EA%B8%B0/#_2","title":"\uc2dc\uc2a4\ud15c \uc544\ud0a4\ud14d\ucc98","text":""},{"location":"ai/Code-Assistant-%EA%B0%9C%EB%B0%9C%EA%B8%B0/#1-ai","title":"1. \ud558\uc774\ube0c\ub9ac\ub4dc AI \ubaa8\ub378 \uad6c\uc870","text":"<p>\ube44\uc6a9\uacfc \uc131\ub2a5\uc744 \ubaa8\ub450 \uace0\ub824\ud558\uc5ec OpenAI GPT-4\uc640 \ub85c\uceec \ubaa8\ub378\uc744 \uc801\uc808\ud788 \uc870\ud569\ud55c \ud558\uc774\ube0c\ub9ac\ub4dc \uad6c\uc870\ub97c \ucc44\ud0dd\ud588\ub2e4.</p> <pre><code>class CodeAssistant:\n    def __init__(self):\n        self.openai_client = OpenAIClient()\n        self.local_models = {\n            'category': CategoryClassifier(),\n            'complexity': ComplexityAnalyzer(),\n            'style': CodeStyleChecker()\n        }\n\n    def analyze_code(self, code, task_type):\n        \"\"\"\n        \ucf54\ub4dc \ubd84\uc11d \uba54\uc778 \ub85c\uc9c1\n        - \ub2e8\uc21c\ud55c \ubd84\ub958/\uccb4\ud06c \u2192 \ub85c\uceec \ubaa8\ub378\n        - \ubcf5\uc7a1\ud55c \uc0dd\uc131/\ucd94\ub860 \u2192 OpenAI API\n        \"\"\"\n        # 1. \uc791\uc5c5 \uc720\ud615 \ubd84\ub958 (\ub85c\uceec)\n        category = self.local_models['category'].predict(code)\n\n        # 2. \ubcf5\uc7a1\ub3c4 \ubd84\uc11d (\ub85c\uceec)  \n        complexity = self.local_models['complexity'].analyze(code)\n\n        # 3. \uc801\uc808\ud55c \ubaa8\ub378 \uc120\ud0dd\n        if complexity &lt; 0.7 and category in ['style_check', 'simple_refactor']:\n            return self.process_locally(code, task_type)\n        else:\n            return self.process_with_openai(code, task_type)\n</code></pre>"},{"location":"ai/Code-Assistant-%EA%B0%9C%EB%B0%9C%EA%B8%B0/#2-openai","title":"2. OpenAI \uc5f0\ub3d9 \ucd5c\uc801\ud654","text":"<p>OpenAI API \uc0ac\uc6a9 \ube44\uc6a9\uc744 \uc904\uc774\uba74\uc11c\ub3c4 \ud488\uc9c8\uc744 \uc720\uc9c0\ud558\uae30 \uc704\ud55c \ub2e4\uc591\ud55c \ucd5c\uc801\ud654 \uae30\ubc95\uc744 \uc801\uc6a9\ud588\ub2e4.</p> <pre><code># openai \uc124\uc815 \ucd5c\uc801\ud654\nclass OpenAIOptimizer:\n    def __init__(self):\n        self.cache = RedisCache()\n        self.token_limiter = TokenLimiter()\n\n    def optimize_prompt(self, code, task):\n        \"\"\"\n        \ud504\ub86c\ud504\ud2b8 \ucd5c\uc801\ud654\n        - \ubd88\ud544\uc694\ud55c \uacf5\ubc31/\uc8fc\uc11d \uc81c\uac70\n        - \ucee8\ud14d\uc2a4\ud2b8 \uae38\uc774 \ucd5c\uc801\ud654\n        - \ud15c\ud50c\ub9bf \uae30\ubc18 \ud504\ub86c\ud504\ud2b8 \uad6c\uc131\n        \"\"\"\n        # \ucf54\ub4dc \uc804\ucc98\ub9ac\n        cleaned_code = self.clean_code(code)\n\n        # \ud1a0\ud070 \uc218 \uccb4\ud06c\n        if self.count_tokens(cleaned_code) &gt; 3000:\n            cleaned_code = self.summarize_code(cleaned_code)\n\n        # \uc791\uc5c5\ubcc4 \ud504\ub86c\ud504\ud2b8 \ud15c\ud50c\ub9bf\n        prompt = self.get_prompt_template(task).format(\n            code=cleaned_code,\n            guidelines=self.get_guidelines(task)\n        )\n\n        return prompt\n\n    def call_openai_with_cache(self, prompt, task_id):\n        \"\"\"\n        \uce90\uc2dc\ub97c \ud65c\uc6a9\ud55c API \ud638\ucd9c\n        - \ub3d9\uc77c\ud55c \ucf54\ub4dc\ub294 \uce90\uc2dc\uc5d0\uc11c \ubc18\ud658\n        - API \ud638\ucd9c \ud69f\uc218 \uc81c\ud55c\n        \"\"\"\n        cache_key = hashlib.md5(prompt.encode()).hexdigest()\n\n        cached_result = self.cache.get(cache_key)\n        if cached_result:\n            return cached_result\n\n        # Rate limiting\n        self.token_limiter.wait_if_needed()\n\n        try:\n            response = openai.ChatCompletion.create(\n                model=\"gpt-4-0613\",\n                messages=[{\"role\": \"user\", \"content\": prompt}],\n                temperature=0.3,\n                max_tokens=2000\n            )\n\n            result = response.choices[0].message.content\n\n            # \uacb0\uacfc \uce90\uc2f1 (24\uc2dc\uac04)\n            self.cache.set(cache_key, result, expire=86400)\n\n            return result\n\n        except openai.error.RateLimitError:\n            time.sleep(60)  # 1\ubd84 \ub300\uae30 \ud6c4 \uc7ac\uc2dc\ub3c4\n            return self.call_openai_with_cache(prompt, task_id)\n</code></pre>"},{"location":"ai/Code-Assistant-%EA%B0%9C%EB%B0%9C%EA%B8%B0/#3","title":"3. \uce74\ud14c\uace0\ub9ac \ubd84\ub958 \uc2dc\uc2a4\ud15c","text":"<p>\ucf54\ub4dc\uc758 \uc720\ud615\uacfc \uc791\uc5c5 \uc885\ub958\ub97c \uc790\ub3d9\uc73c\ub85c \ubd84\ub958\ud558\ub294 \uc2dc\uc2a4\ud15c\uc744 \uad6c\ucd95\ud588\ub2e4. \uc774\ub97c \ud1b5\ud574 \uc801\uc808\ud55c \ucc98\ub9ac \ud30c\uc774\ud504\ub77c\uc778\uc744 \uc120\ud0dd\ud560 \uc218 \uc788\ub2e4.</p> <pre><code># cls_model \uad6c\ud604\nclass CodeCategoryClassifier:\n    def __init__(self, model_path):\n        self.model = self.load_model(model_path)\n        self.tokenizer = AutoTokenizer.from_pretrained('microsoft/codebert-base')\n\n        self.categories = {\n            'api_endpoint': '\uc6f9 API \uc5d4\ub4dc\ud3ec\uc778\ud2b8 \ucf54\ub4dc',\n            'database_query': '\ub370\uc774\ud130\ubca0\uc774\uc2a4 \ucffc\ub9ac \uad00\ub828',\n            'business_logic': '\ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1 \uad6c\ud604',\n            'util_function': '\uc720\ud2f8\ub9ac\ud2f0 \ud568\uc218',\n            'test_code': '\ud14c\uc2a4\ud2b8 \ucf00\uc774\uc2a4 \ucf54\ub4dc',\n            'config_file': '\uc124\uc815 \ud30c\uc77c',\n            'frontend_component': '\ud504\ub860\ud2b8\uc5d4\ub4dc \ucef4\ud3ec\ub10c\ud2b8'\n        }\n\n    def predict(self, code):\n        \"\"\"\n        \ucf54\ub4dc \uce74\ud14c\uace0\ub9ac \uc608\uce21\n        - CodeBERT \uae30\ubc18 \uc784\ubca0\ub529\n        - \ubd84\ub958 \uc815\ud655\ub3c4 85% \uc774\uc0c1\n        \"\"\"\n        # \ud1a0\ud070\ud654\n        inputs = self.tokenizer(\n            code, \n            truncation=True, \n            padding=True, \n            max_length=512,\n            return_tensors='pt'\n        )\n\n        # \uc608\uce21\n        with torch.no_grad():\n            outputs = self.model(**inputs)\n            predictions = torch.softmax(outputs.logits, dim=-1)\n\n        predicted_class = torch.argmax(predictions, dim=1).item()\n        confidence = torch.max(predictions, dim=1)[0].item()\n\n        return {\n            'category': list(self.categories.keys())[predicted_class],\n            'confidence': confidence,\n            'description': list(self.categories.values())[predicted_class]\n        }\n</code></pre>"},{"location":"ai/Code-Assistant-%EA%B0%9C%EB%B0%9C%EA%B8%B0/#_3","title":"\ud575\uc2ec \uae30\ub2a5 \uad6c\ud604","text":""},{"location":"ai/Code-Assistant-%EA%B0%9C%EB%B0%9C%EA%B8%B0/#1","title":"1. \uc790\ub3d9 \ubb38\uc11c \uc0dd\uc131","text":"<p>\ucf54\ub4dc\ub97c \ubd84\uc11d\ud558\uc5ec API \ubb38\uc11c\ub97c \uc790\ub3d9\uc73c\ub85c \uc0dd\uc131\ud558\ub294 \uae30\ub2a5\uc744 \uad6c\ud604\ud588\ub2e4.</p> <pre><code>def generate_api_documentation(self, code):\n    \"\"\"\n    API \ubb38\uc11c \uc790\ub3d9 \uc0dd\uc131\n    - FastAPI/Flask \uc5d4\ub4dc\ud3ec\uc778\ud2b8 \ubd84\uc11d\n    - \ud30c\ub77c\ubbf8\ud130, \uc751\ub2f5 \ud615\uc2dd \ucd94\ucd9c\n    - \uc2a4\uc6e8\uac70 \ubb38\uc11c \uc0dd\uc131\n    \"\"\"\n    # \ucf54\ub4dc AST \ubd84\uc11d\n    ast_tree = ast.parse(code)\n    endpoints = self.extract_endpoints(ast_tree)\n\n    docs = []\n    for endpoint in endpoints:\n        # GPT-4\ub85c \uc0c1\uc138 \uc124\uba85 \uc0dd\uc131\n        description = self.openai_client.generate_description(\n            endpoint['code'],\n            endpoint['method'],\n            endpoint['path']\n        )\n\n        doc = {\n            'path': endpoint['path'],\n            'method': endpoint['method'],\n            'description': description,\n            'parameters': self.extract_parameters(endpoint),\n            'responses': self.extract_responses(endpoint)\n        }\n        docs.append(doc)\n\n    return self.format_swagger_docs(docs)\n</code></pre>"},{"location":"ai/Code-Assistant-%EA%B0%9C%EB%B0%9C%EA%B8%B0/#2","title":"2. \ucf54\ub4dc \ud488\uc9c8 \ubd84\uc11d","text":"<p>\uc815\uc801 \ubd84\uc11d\uacfc AI \ubd84\uc11d\uc744 \uacb0\ud569\ud55c \ucf54\ub4dc \ud488\uc9c8 \uac80\uc0ac \uc2dc\uc2a4\ud15c\uc744 \uad6c\ucd95\ud588\ub2e4.</p> <pre><code>def analyze_code_quality(self, code):\n    \"\"\"\n    \ucf54\ub4dc \ud488\uc9c8 \ubd84\uc11d\n    - \uc815\uc801 \ubd84\uc11d: pylint, flake8\n    - AI \ubd84\uc11d: \ub85c\uc9c1 \ubcf5\uc7a1\ub3c4, \uac00\ub3c5\uc131\n    - \uac1c\uc120 \uc81c\uc548: GPT-4 \uae30\ubc18\n    \"\"\"\n    # \uc815\uc801 \ubd84\uc11d\n    static_issues = self.run_static_analysis(code)\n\n    # AI \uae30\ubc18 \ubd84\uc11d\n    complexity_score = self.analyze_complexity(code)\n    readability_score = self.analyze_readability(code)\n\n    # \uc885\ud569 \uc810\uc218 \uacc4\uc0b0\n    quality_score = self.calculate_quality_score(\n        static_issues, \n        complexity_score, \n        readability_score\n    )\n\n    # \uac1c\uc120 \uc81c\uc548 \uc0dd\uc131\n    if quality_score &lt; 70:\n        suggestions = self.generate_improvement_suggestions(code)\n\n    return {\n        'score': quality_score,\n        'issues': static_issues,\n        'suggestions': suggestions,\n        'metrics': {\n            'complexity': complexity_score,\n            'readability': readability_score\n        }\n    }\n</code></pre>"},{"location":"ai/Code-Assistant-%EA%B0%9C%EB%B0%9C%EA%B8%B0/#3_1","title":"3. \ud14c\uc2a4\ud2b8 \ucf00\uc774\uc2a4 \uc0dd\uc131","text":"<p>\ud568\uc218 \uc2dc\uadf8\ub2c8\ucc98\ub97c \ubd84\uc11d\ud558\uc5ec \ud14c\uc2a4\ud2b8 \ucf00\uc774\uc2a4\ub97c \uc790\ub3d9\uc73c\ub85c \uc0dd\uc131\ud558\ub294 \uae30\ub2a5\uc774\ub2e4.</p> <pre><code>def generate_test_cases(self, function_code):\n    \"\"\"\n    \ud14c\uc2a4\ud2b8 \ucf00\uc774\uc2a4 \uc790\ub3d9 \uc0dd\uc131\n    - \ud568\uc218 \uc2dc\uadf8\ub2c8\ucc98 \ubd84\uc11d\n    - Edge case \uc2dd\ubcc4\n    - pytest \ucf54\ub4dc \uc0dd\uc131\n    \"\"\"\n    # \ud568\uc218 \ubd84\uc11d\n    func_info = self.analyze_function(function_code)\n\n    # GPT-4\ub85c \ud14c\uc2a4\ud2b8 \ucf00\uc774\uc2a4 \uc0dd\uc131\n    test_prompt = f\"\"\"\n    \ub2e4\uc74c \ud568\uc218\uc5d0 \ub300\ud55c pytest \ud14c\uc2a4\ud2b8 \ucf00\uc774\uc2a4\ub97c \uc0dd\uc131\ud574\uc8fc\uc138\uc694:\n\n    \ud568\uc218: {func_info['name']}\n    \ud30c\ub77c\ubbf8\ud130: {func_info['parameters']}\n    \ubc18\ud658 \ud0c0\uc785: {func_info['return_type']}\n\n    \ub2e4\uc74c\uc744 \ud3ec\ud568\ud574\uc8fc\uc138\uc694:\n    - \uc815\uc0c1 \ucf00\uc774\uc2a4 3\uac1c\n    - Edge case 2\uac1c\n    - \uc5d0\ub7ec \ucf00\uc774\uc2a4 1\uac1c\n    \"\"\"\n\n    test_code = self.openai_client.generate_code(test_prompt)\n\n    # \ubb38\ubc95 \uac80\uc0ac \ubc0f \uc218\uc815\n    validated_code = self.validate_and_fix_syntax(test_code)\n\n    return validated_code\n</code></pre>"},{"location":"ai/Code-Assistant-%EA%B0%9C%EB%B0%9C%EA%B8%B0/#_4","title":"\ud2b8\ub7ec\ube14\uc288\ud305\uacfc \ucd5c\uc801\ud654","text":""},{"location":"ai/Code-Assistant-%EA%B0%9C%EB%B0%9C%EA%B8%B0/#1-api","title":"1. API \ube44\uc6a9 \ucd5c\uc801\ud654","text":"<p>\ucd08\uae30\uc5d0\ub294 OpenAI API \ube44\uc6a9\uc774 \ud55c \ub2ec\uc5d0 500\ub2ec\ub7ec\uae4c\uc9c0 \uc62c\ub77c\uac00\ub294 \ubb38\uc81c\uac00 \uc788\uc5c8\ub2e4.</p> <p>\ucd5c\uc801\ud654 \ubc29\ubc95: </p><pre><code># \ube44\uc6a9 \uc808\uac10 \uc804\ub7b5\n1. \uce90\uc2f1 \uc2dc\uc2a4\ud15c \ub3c4\uc785: 40% \ube44\uc6a9 \uc808\uac10\n2. \ud504\ub86c\ud504\ud2b8 \uc555\ucd95: 20% \ube44\uc6a9 \uc808\uac10\n3. \ub85c\uceec \ubaa8\ub378 \ud65c\uc6a9: 30% \ube44\uc6a9 \uc808\uac10\n4. \ubc30\uce58 \ucc98\ub9ac: 10% \ube44\uc6a9 \uc808\uac10\n\n# \uacb0\uacfc: \uc6d4 500\ub2ec\ub7ec \u2192 150\ub2ec\ub7ec (70% \uc808\uac10)\n</code></pre><p></p>"},{"location":"ai/Code-Assistant-%EA%B0%9C%EB%B0%9C%EA%B8%B0/#2_1","title":"2. \uc751\ub2f5 \uc2dc\uac04 \ucd5c\uc801\ud654","text":"<p>\uc0ac\uc6a9\uc790 \uacbd\ud5d8\uc744 \uc704\ud574 \uc751\ub2f5 \uc2dc\uac04\uc744 3\ucd08 \uc774\ub0b4\ub85c \uc904\uc5ec\uc57c \ud588\ub2e4.</p> <pre><code>async def process_code_async(self, code, task):\n    \"\"\"\n    \ube44\ub3d9\uae30 \ucc98\ub9ac\ub85c \uc751\ub2f5 \uc2dc\uac04 \ub2e8\ucd95\n    - \ubcd1\ub82c \ucc98\ub9ac: \ub85c\uceec \ubd84\uc11d + OpenAI \ud638\ucd9c\n    - \uc2a4\ud2b8\ub9ac\ubc0d \uc751\ub2f5: \uacb0\uacfc\uac00 \ub098\uc624\ub294 \ub300\ub85c \uc804\uc1a1\n    \"\"\"\n    # \ubcd1\ub82c \uc791\uc5c5 \uc2dc\uc791\n    local_task = asyncio.create_task(\n        self.analyze_locally(code)\n    )\n\n    if self.needs_openai_analysis(code):\n        openai_task = asyncio.create_task(\n            self.analyze_with_openai(code)\n        )\n\n        # \uc2a4\ud2b8\ub9ac\ubc0d \uc751\ub2f5 \uc2dc\uc791\n        yield {\"status\": \"analyzing\", \"progress\": 30}\n\n        # \uacb0\uacfc \uc218\uc9d1\n        local_result = await local_task\n        openai_result = await openai_task\n\n        yield {\"status\": \"complete\", \"result\": {\n            \"local\": local_result,\n            \"ai\": openai_result\n        }}\n    else:\n        result = await local_task\n        yield {\"status\": \"complete\", \"result\": result}\n</code></pre>"},{"location":"ai/Code-Assistant-%EA%B0%9C%EB%B0%9C%EA%B8%B0/#3_2","title":"3. \ubaa8\ub378 \ub85c\ub529 \uc548\uc815\uc131","text":"<p>\uc11c\ubc84 \uc7ac\uc2dc\uc791 \uc2dc \ubaa8\ub378 \ub85c\ub529 \uc2e4\ud328 \ubb38\uc81c\ub97c \ud574\uacb0\ud588\ub2e4.</p> <pre><code>def load_models_with_fallback(self):\n    \"\"\"\n    \ud3f4\ubc31 \uba54\ucee4\ub2c8\uc998\uc744 \uac16\ucd98 \ubaa8\ub378 \ub85c\ub529\n    - \uae30\ubcf8 \ubaa8\ub378 \ub85c\ub529 \uc2e4\ud328 \uc2dc \uacbd\ub7c9 \ubaa8\ub378\ub85c \ub300\uccb4\n    - \ud5ec\uc2a4\uccb4\ud06c\ub85c \ubaa8\ub378 \uc0c1\ud0dc \ubaa8\ub2c8\ud130\ub9c1\n    \"\"\"\n    models_to_load = [\n        ('category', 'models/category_classifier.pth'),\n        ('complexity', 'models/complexity_analyzer.pth'),\n        ('style', 'models/style_checker.pth')\n    ]\n\n    for name, path in models_to_load:\n        try:\n            model = torch.load(path, map_location=self.device)\n            self.models[name] = model\n            logger.info(f\"{name} model loaded successfully\")\n        except Exception as e:\n            logger.warning(f\"Failed to load {name} model: {e}\")\n\n            # \ud3f4\ubc31 \ubaa8\ub378 \ub85c\ub529\n            fallback_path = f\"models/fallback_{name}.pth\"\n            if os.path.exists(fallback_path):\n                self.models[name] = torch.load(fallback_path)\n                logger.info(f\"Loaded fallback {name} model\")\n</code></pre>"},{"location":"ai/Code-Assistant-%EA%B0%9C%EB%B0%9C%EA%B8%B0/#_5","title":"\uc131\ub2a5 \uc9c0\ud45c\uc640 \uacb0\uacfc","text":"<p>\uac1c\ubc1c \uc0dd\uc0b0\uc131 \ud5a5\uc0c1: - API \ubb38\uc11c \uc791\uc131 \uc2dc\uac04: 2\uc2dc\uac04 \u2192 15\ubd84 (87% \ub2e8\ucd95) - \ucf54\ub4dc \ub9ac\ubdf0 \uc2dc\uac04: 1\uc2dc\uac04 \u2192 20\ubd84 (67% \ub2e8\ucd95) - \ud14c\uc2a4\ud2b8 \ucf00\uc774\uc2a4 \uc791\uc131: 30\ubd84 \u2192 5\ubd84 (83% \ub2e8\ucd95)</p> <p>\uc2dc\uc2a4\ud15c \uc131\ub2a5: - \ud3c9\uade0 \uc751\ub2f5 \uc2dc\uac04: 2.3\ucd08 - \ucf54\ub4dc \ubd84\ub958 \uc815\ud655\ub3c4: 89% - \ubb38\uc11c \uc0dd\uc131 \ud488\uc9c8: 4.2/5\uc810 (\uac1c\ubc1c\uc790 \ud3c9\uac00)</p> <p>\ube44\uc6a9 \ud6a8\uc728\uc131: - OpenAI API \ube44\uc6a9: 70% \uc808\uac10 - \uac1c\ubc1c \uc2dc\uac04 \uc808\uc57d: \uc8fc\ub2f9 15\uc2dc\uac04 - ROI: 350% (3\uac1c\uc6d4 \uae30\uc900)</p>"},{"location":"ai/Code-Assistant-%EA%B0%9C%EB%B0%9C%EA%B8%B0/#_6","title":"\ud5a5\ud6c4 \uac1c\uc120 \uacc4\ud68d","text":"<ol> <li>\ub2e4\uad6d\uc5b4 \uc9c0\uc6d0: \ub2e4\uc591\ud55c \ud504\ub85c\uadf8\ub798\ubc0d \uc5b8\uc5b4 \uc9c0\uc6d0 \ud655\ub300</li> <li>\uc2e4\uc2dc\uac04 \ucf54\ub4dc \ubd84\uc11d: IDE \ud50c\ub7ec\uadf8\uc778 \uac1c\ubc1c</li> <li>\ud300 \ud611\uc5c5 \uae30\ub2a5: \ucf54\ub4dc \ub9ac\ubdf0 \uc790\ub3d9\ud654</li> <li>\uc131\ub2a5 \ubaa8\ub2c8\ud130\ub9c1: \ucf54\ub4dc \ud488\uc9c8 \ubcc0\ud654 \ucd94\uc801</li> </ol> <p>Code Assistant \uac1c\ubc1c\uc744 \ud1b5\ud574 AI\ub97c \uc2e4\uc81c \uac1c\ubc1c \uc6cc\ud06c\ud50c\ub85c\uc6b0\uc5d0 \ud1b5\ud569\ud558\ub294 \uacfc\uc815\uc758 \ubcf5\uc7a1\uc131\uacfc \uac00\ub2a5\uc131\uc744 \ub3d9\uc2dc\uc5d0 \uacbd\ud5d8\ud560 \uc218 \uc788\uc5c8\ub2e4. \ub2e8\uc21c\ud55c \uc790\ub3d9\ud654\ub97c \ub118\uc5b4 \uac1c\ubc1c\uc790\uc758 \ucc3d\uc758\uc131\uc744 \uc9c0\uc6d0\ud558\ub294 \ub3c4\uad6c\ub85c\uc11c\uc758 AI\uc758 \uc7a0\uc7ac\ub825\uc744 \ud655\uc778\ud588\ub2e4.</p>"},{"location":"ai/Dropout/","title":"Dropout","text":""},{"location":"ai/Dropout/#dropout","title":"\ub525\ub7ec\ub2dd\uc5d0\uc11c Dropout\uc774\ub780? \uacfc\uc801\ud569\uc744 \uc7a1\ub294 \ub611\ub611\ud55c \ubc29\ubc95","text":"<p>\ub525\ub7ec\ub2dd \ubaa8\ub378\uc744 \ub9cc\ub4e4\ub2e4 \ubcf4\uba74 \ud55c \ubc88\ucbe4\uc740 \uc774\ub7f0 \uace0\ubbfc\uc744 \ud558\uac8c \ub41c\ub2e4. \"\ud6c8\ub828 \ub370\uc774\ud130\uc5d0\uc120 \uc131\ub2a5\uc774 \uc88b\uc740\ub370, \ud14c\uc2a4\ud2b8 \ub370\uc774\ud130\uc5d0\uc120 \uc65c \uc774\ub7ec\uc9c0...?\"</p> <p>\ubc14\ub85c \uacfc\uc801\ud569(Overfitting) \ubb38\uc81c\ub2e4.</p> <p>\uc774\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud55c \ub2e4\uc591\ud55c \ubc29\ubc95 \uc911 \ud558\ub098\uac00 \ubc14\ub85c \uc624\ub298\uc758 \uc8fc\uc81c, Dropout(\ub4dc\ub86d\uc544\uc6c3)\uc774\ub2e4.</p>"},{"location":"ai/Dropout/#1-dropout","title":"1. Dropout\uc774\ub780?","text":"<p>Dropout\uc740 \ubaa8\ub378\uc774 \ud559\uc2b5\ud558\ub294 \ub3d9\uc548 \uc77c\ubd80 \ub274\ub7f0\uc744 \ubb34\uc791\uc704\ub85c \uaebc\ubc84\ub9ac\ub294 \ubc29\ubc95\uc774\ub2e4. \ub9d0 \uadf8\ub300\ub85c \"\ub5a8\uc5b4\ub728\ub9b0\ub2e4(drop out)\"\ub294 \ub73b\uc774\ub2e4.</p> <p>\ud55c\ub9c8\ub514\ub85c, \uc2e0\uacbd\ub9dd\uc5d0 \uc77c\ubd80\ub7ec \uad6c\uba4d\uc744 \ub0b8\ub2e4\uace0 \uc0dd\uac01\ud558\uba74 \ub41c\ub2e4. \ub9e4\ubc88 \ud559\uc2b5\ud560 \ub54c\ub9c8\ub2e4 \uc2e0\uacbd\ub9dd\uc758 \uc77c\ubd80 \uc5f0\uacb0\uc744 \ub79c\ub364\ud558\uac8c \ub04a\uc5b4\uc11c, \ubaa8\ub378\uc774 \ud2b9\uc815\ud55c \ub274\ub7f0 \ud558\ub098\uc5d0 \ub108\ubb34 \uc758\uc874\ud558\uc9c0 \uc54a\uac8c \ub9cc\ub4dc\ub294 \uac83\uc774\ub2e4.</p>"},{"location":"ai/Dropout/#2","title":"2. \uc65c \uc774\ub7f0 \uc774\uc0c1\ud55c(?) \uc9d3\uc744 \ud560\uae4c?","text":"<p>\uc774\ub97c \uc774\ud574\ud558\ub824\uba74 \uacfc\uc801\ud569\uc774\ub77c\ub294 \ubb38\uc81c\ubd80\ud130 \uc9da\uace0 \uac00\uc57c \ud55c\ub2e4.</p> <p>\uacfc\uc801\ud569\uc740 \ubaa8\ub378\uc774 \ud6c8\ub828 \ub370\uc774\ud130\uc5d0 \ub108\ubb34 \ub9de\ucdb0\uc838\uc11c, \uc0c8\ub86d\uace0 \ub0af\uc120 \ub370\uc774\ud130\uc5d0\ub294 \uc798 \ub300\uc751\ud558\uc9c0 \ubabb\ud558\ub294 \uc0c1\ud0dc\ub97c \ub9d0\ud55c\ub2e4. \ub108\ubb34 \uc678\uc6b4 \uac83\uc774\ub2e4. \ub9c8\uce58 \uc2dc\ud5d8 \uc804\uc5d0 \uae30\ucd9c\ubb38\uc81c\ub9cc 100\ubc88 \ud480\uace0, \uc815\uc791 \uc9c4\uc9dc \uc2dc\ud5d8\uc740 \ubabb \ud478\ub294 \ud559\uc0dd\ucc98\ub7fc \ub9d0\uc774\ub2e4.</p> <p>Dropout\uc740 \uc774\ub7f0 \"\uc554\uae30\ud615 \ud559\uc2b5\"\uc744 \ubc29\uc9c0\ud558\uae30 \uc704\ud574, \ud559\uc2b5 \ub3c4\uc911\uc5d0 \ubb34\uc791\uc704\ub85c \uc815\ubcf4\ub97c \uc77c\ubd80\ub7ec \ub204\ub77d\uc2dc\ud0a8\ub2e4. \uc774\ub807\uac8c \ud558\uba74 \ubaa8\ub378\uc740 \uc804\uccb4\uc801\uc73c\ub85c \ub354 \ud2bc\ud2bc\ud55c \ud328\ud134\uc744 \ubc30\uc6b0\uac8c \ub41c\ub2e4.</p>"},{"location":"ai/Dropout/#3","title":"3. \uc5b4\ub5bb\uac8c \uc791\ub3d9\ud560\uae4c?","text":"<p>\uc608\ub97c \ub4e4\uc5b4 \uc5b4\ub5a4 \uc740\ub2c9\uce35\uc5d0 \ub274\ub7f0\uc774 6\uac1c \uc788\ub2e4\uace0 \uac00\uc815\ud574\ubcf4\uc790.</p> <ul> <li>\ud3c9\uc18c\uc5d0\ub294: <code>[o o o o o o]</code> (\ubaa8\ub4e0 \ub274\ub7f0 \uc0ac\uc6a9)</li> <li>Dropout \uc801\uc6a9 \uc2dc (rate=0.5): <code>[o x o x o o]</code> (3\uac1c\ub294 \ube44\ud65c\uc131\ud654)</li> </ul> <p>\uc774\ub807\uac8c \ub274\ub7f0 \uc808\ubc18\uc744 \ub79c\ub364\ud558\uac8c \uaebc\ub193\uace0 \ud559\uc2b5\ud55c\ub2e4. \uadf8\ub7ec\uba74 \ub9e4\ubc88 \ub2e4\ub974\uac8c \uc0dd\uae34 '\uc791\uc740 \uc2e0\uacbd\ub9dd'\uc744 \ud559\uc2b5\ud558\ub294 \uc148\uc774\ub2e4. \uacb0\uad6d \uc5ec\ub7ec \ubaa8\ub378\uc744 \uc559\uc0c1\ube14\ud55c \uac83\ucc98\ub7fc \uac15\uac74\ud55c \ubaa8\ub378\uc774 \ub9cc\ub4e4\uc5b4\uc9c4\ub2e4.</p>"},{"location":"ai/Dropout/#4-vs","title":"4. \ud559\uc2b5 \uc2dc vs \uc608\uce21 \uc2dc","text":"<ul> <li>\ud559\uc2b5\ud560 \ub54c\ub294 Dropout\uc744 \ucf1c\uc11c \ub274\ub7f0\uc744 \ub79c\ub364\ud558\uac8c \ub048\ub2e4.</li> <li>\uc608\uce21\ud560 \ub54c\ub294 Dropout\uc744 \ub044\uace0 \ubaa8\ub4e0 \ub274\ub7f0\uc744 \uc0ac\uc6a9\ud55c\ub2e4.   \ub300\uc2e0, \ud559\uc2b5 \uc2dc \uaebc\uc84c\ub358 \ube44\uc728\ub9cc\ud07c \uac00\uc911\uce58\ub97c \uc870\uc815\ud574\uc11c \uc608\uce21\uc774 \uc65c\uace1\ub418\uc9c0 \uc54a\uac8c \ud55c\ub2e4.</li> </ul>"},{"location":"ai/Dropout/#5-pytorch","title":"5. \uc2e4\uc81c \ucf54\ub4dc\ub85c \ubcf4\uba74? (PyTorch \uc608\uc2dc)","text":"<pre><code>import torch.nn as nn\n\n# \uac04\ub2e8\ud55c \uc2e0\uacbd\ub9dd\uc5d0 Dropout \uc801\uc6a9\nmodel = nn.Sequential(\n    nn.Linear(128, 64),    # \uc785\ub825\uce35 -&gt; \uc740\ub2c9\uce35\n    nn.ReLU(),             # \ud65c\uc131\ud654 \ud568\uc218\n    nn.Dropout(p=0.5),     # 50% \ud655\ub960\ub85c \ub274\ub7f0 \ube44\ud65c\uc131\ud654\n    nn.Linear(64, 10)      # \uc740\ub2c9\uce35 -&gt; \ucd9c\ub825\uce35\n)\n\n# \ud559\uc2b5 \ubaa8\ub4dc \uc124\uc815 (Dropout \ud65c\uc131\ud654)\nmodel.train()\n\n# \ud3c9\uac00 \ubaa8\ub4dc \uc124\uc815 (Dropout \ube44\ud65c\uc131\ud654)  \nmodel.eval()\n</code></pre> <p>\ub2e8 \ud55c \uc904\ub9cc\uc73c\ub85c Dropout\uc744 \uc801\uc6a9\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"ai/Dropout/#_1","title":"\uc694\uc57d","text":"\ud56d\ubaa9 \uc124\uba85 \ubaa9\uc801 \uacfc\uc801\ud569 \ubc29\uc9c0 \ubc29\uc2dd \ud559\uc2b5 \uc911 \uc77c\ubd80 \ub274\ub7f0\uc744 \ub79c\ub364\ud558\uac8c \ube44\ud65c\uc131\ud654 \ud6a8\uacfc \ubaa8\ub378\uc758 \uc77c\ubc18\ud654 \uc131\ub2a5 \ud5a5\uc0c1 \uc8fc\uc758\uc810 \uc608\uce21 \uc2dc\uc5d0\ub294 Dropout\uc744 \uaebc\uc57c \ud568"},{"location":"ai/GPT%20%EB%AA%A8%EB%8D%B8%20%EB%A7%8C%EB%93%A4%EA%B8%B0%281%29/","title":"GPT \ubaa8\ub378 \ub9cc\ub4e4\uae30 (1) - \ub370\uc774\ud130 \uc804\ucc98\ub9ac\uc640 \uae30\ubcf8 \ubaa8\ub378 \uad6c\uc870","text":""},{"location":"ai/GPT%20%EB%AA%A8%EB%8D%B8%20%EB%A7%8C%EB%93%A4%EA%B8%B0%281%29/#gpt-1-","title":"GPT \ubaa8\ub378 \ub9cc\ub4e4\uae30 (1) - \ub370\uc774\ud130 \uc804\ucc98\ub9ac\uc640 \uae30\ubcf8 \ubaa8\ub378 \uad6c\uc870","text":""},{"location":"ai/GPT%20%EB%AA%A8%EB%8D%B8%20%EB%A7%8C%EB%93%A4%EA%B8%B0%281%29/#1","title":"1. \ud14d\uc2a4\ud2b8 \ub370\uc774\ud130 \uc804\ucc98\ub9ac","text":"<p>\ud14d\uc2a4\ud2b8 \ub370\uc774\ud130\uac00 \ud544\uc694\ud558\ub2e4.</p> <p>data \ub515\uc154\ub108\ub9ac\uc758 train \ud0a4\uc5d0\uc11c document \uac12\uc744 \uac00\uc838\uc640 \ubaa8\ub4e0 \ubb38\uc11c\ub97c \ud558\ub098\uc758 \ubb38\uc790\uc5f4\ub85c \ud569\uce5c\ub2e4. \uc774\ub807\uac8c \ub9cc\ub4e4\uc5b4\uc9c4 \uc804\uccb4 \ud14d\uc2a4\ud2b8\uc5d0\uc11c \uc911\ubcf5\uc744 \uc81c\uac70\ud558\uace0 \uc815\ub82c\ub41c \uace0\uc720\ud55c \ubb38\uc790 \ubaa9\ub85d\uc744 \uc0dd\uc131\ud55c\ub2e4.</p> <p>\uc774 \uacfc\uc815\uc744 \ud1b5\ud574 \ub370\uc774\ud130\uc14b\uc5d0 \uc874\uc7ac\ud558\ub294 \ubaa8\ub4e0 \uace0\uc720\ud55c \ud55c\uad6d\uc5b4 \ubb38\uc790\ub97c \ud30c\uc545\ud560 \uc218 \uc788\ub2e4.</p> <p>\uadf8 \ub2e4\uc74c, \uc774 \uace0\uc720 \ubb38\uc790 \ubaa9\ub85d\uc758 \uae38\uc774\ub97c \uacc4\uc0b0\ud574 \uc804\uccb4 \uc5b4\ud718 \ud06c\uae30\ub97c \uad6c\ud558\uace0, \ucd1d \uae00\uc790 \uc218\ub97c \ucd9c\ub825\ud574 \ub370\uc774\ud130\uc14b\uc758 \uc5b4\ud718 \ub2e4\uc591\uc131\uc744 \ud655\uc778\ud55c\ub2e4.</p> <p>\ub2e4\uc74c\uc73c\ub85c, \ubb38\uc790\uc640 \uc778\ub371\uc2a4\ub97c \ub9e4\ud551\ud558\ub294 \ub515\uc154\ub108\ub9ac\ub97c \uc0dd\uc131\ud55c\ub2e4. \uc774\ub7ec\ud55c \ub9e4\ud551\uc740 \ud14d\uc2a4\ud2b8 \ub370\uc774\ud130\ub97c \uc22b\uc790\ub85c \ubcc0\ud658\ud558\uace0 \ub2e4\uc2dc \ud14d\uc2a4\ud2b8\ub85c \ubcf5\uc6d0\ud558\ub294 \ub370 \uc0ac\uc6a9\ub41c\ub2e4.</p> <p>\ub370\uc774\ud130\ub97c \ud150\uc11c\ub85c \ubcc0\ud658\ud558\uace0 \ub370\uc774\ud130 \ud0c0\uc785\uc744 long\uc73c\ub85c \uc9c0\uc815\ud558\ub294 \uacfc\uc815\uc740 \ub525\ub7ec\ub2dd \ubaa8\ub378\uc758 \ud6a8\uc728\uc801\uc778 \ud559\uc2b5\uacfc \ucc98\ub9ac\ub97c \uc704\ud574\uc11c \uc911\uc694\ud558\ub2e4. \ud150\uc11c\ub294 \ub525\ub7ec\ub2dd\uc5d0\uc11c \ub370\uc774\ud130\ub97c \ud45c\ud604\ud558\ub294 \uae30\ubcf8 \ub2e8\uc704\ub85c, \ub2e4\ucc28\uc6d0 \ubc30\uc5f4 \ud615\ud0dc\ub85c \ub370\uc774\ud130\ub97c \uc800\uc7a5\ud558\uace0 \ucc98\ub9ac\ud55c\ub2e4. \ubb38\uc790\uc5f4\uc744 \uc22b\uc790\ub85c \uc778\ucf54\ub529\ud558\uace0 \uc774\ub97c \ud150\uc11c\ub85c \ubcc0\ud658\ud558\ub294 \uacfc\uc815\uc740 \ubaa8\ub378\uc774 \ud14d\uc2a4\ud2b8 \ub370\uc774\ud130\ub97c \uc774\ud574\ud558\uace0 \ud559\uc2b5\ud560 \uc218 \uc788\ub3c4\ub85d \ud558\ub294 \ud544\uc218\uc801\uc778 \uc804\ucc98\ub9ac \ub2e8\uacc4\uc774\ub2e4.</p> <p>\ub370\uc774\ud130 \ud0c0\uc785\uc744 long\uc73c\ub85c \uc9c0\uc815\ud558\ub294 \uc774\uc720\ub294 \uc8fc\ub85c \ud14d\uc2a4\ud2b8 \ub370\uc774\ud130\uc758 \ud2b9\uc131\uacfc \uad00\ub828\uc774 \uc788\ub2e4. \ud14d\uc2a4\ud2b8 \ub370\uc774\ud130\ub97c \uc22b\uc790\ub85c \uc778\ucf54\ub529\ud560 \ub54c \uac01 \ub2e8\uc5b4\ub098 \ud1a0\ud070\uc5d0 \ud574\ub2f9\ud558\ub294 \uc815\uc218 \uac12\uc774 \ud070 \ubc94\uc704\ub97c \uac00\uc9c8 \uc218 \uc788\uae30 \ub54c\ubb38\uc774\ub2e4. long \ud0c0\uc785\uc740 32\ube44\ud2b8 \uc815\uc218\ud615\ubcf4\ub2e4 \ub354 \ud070 \ubc94\uc704\uc758 \uc815\uc218\ub97c \ud45c\ud604\ud560 \uc218 \uc788\uc5b4 \ud070 \uc5b4\ud718 \uc0ac\uc804\uc744 \ub2e4\ub8f0 \ub54c \uc720\uc6a9\ud558\ub2e4. \ub610\ud55c, \ud30c\uc774\ud1a0\uce58\uc758 \ub9ce\uc740 \ud568\uc218\ub4e4\uc774 \uae30\ubcf8\uc801\uc73c\ub85c long \ud0c0\uc785\uc758 \uc778\ub371\uc2a4\ub97c \uae30\ub300\ud558\uae30 \ub54c\ubb38\uc5d0 \uc774\ub97c \uc0ac\uc6a9\ud558\uba74 \ucd94\ud6c4 \ucc98\ub9ac \uacfc\uc815\uc5d0\uc11c\uc758 \ud638\ud658\uc131\uc744 \ubcf4\uc7a5\ud560 \uc218 \uc788\ub2e4.</p> <p>\uc774\ub7ec\ud55c \ud150\uc11c \ubcc0\ud658\uacfc \ub370\uc774\ud130 \ud0c0\uc785 \uc9c0\uc815\uc740 \ubaa8\ub378\uc774 \ub370\uc774\ud130\ub97c \ud6a8\uc728\uc801\uc73c\ub85c \ucc98\ub9ac\ud558\uace0 GPU\ub97c \ud1b5\ud55c \ube60\ub978 \uc5f0\uc0b0\uc744 \uac00\ub2a5\ud558\uac8c \ud568\uc73c\ub85c\uc368 \ubaa8\ub378\uc758 \uc131\ub2a5\uacfc \ud559\uc2b5 \uc18d\ub3c4\uc5d0 \uc9c1\uc811\uc801\uc778 \uc601\ud5a5\uc744 \uc900\ub2e4.`</p> <p>\ub370\uc774\ud130\uc758 \ud0c0\uc785\uc744 \ubaa8\ub450 \ubcc0\uacbd\ud55c \ud6c4, \ub2e4\uc74c \ub2e8\uacc4\ub85c train \ub370\uc774\ud130\uc14b\uacfc test \ub370\uc774\ud130\uc14b\uc73c\ub85c \ub098\ub204\ub294 \uc791\uc5c5\uc744 \uc218\ud589\ud55c\ub2e4. \uc774 \uacfc\uc815\uc740 \uba38\uc2e0\ub7ec\ub2dd \ubaa8\ub378\uc758 \ud559\uc2b5\uacfc \ud3c9\uac00\ub97c \uc704\ud574 \ub9e4\uc6b0 \uc911\uc694\ud558\ub2e4.</p> <p>\ub370\uc774\ud130\ub97c \ud6c8\ub828\uc6a9\uacfc \uac80\uc99d\uc6a9\uc73c\ub85c \ubd84\ub9ac\ud568\uc73c\ub85c\uc368 \ubaa8\ub378\uc758 \uc131\ub2a5\uc744 \uac1d\uad00\uc801\uc73c\ub85c \ud3c9\uac00\ud558\uace0 \uacfc\uc801\ud569\uc744 \ubc29\uc9c0\ud560 \uc218 \uc788\ub2e4. \ud6c8\ub828 \ub370\uc774\ud130\ub294 \ubaa8\ub378\uc744 \ud559\uc2b5\ud558\ub294 \ub370 \uc0ac\uc6a9\ub418\uba70, \uac80\uc99d \ub370\uc774\ud130\ub294 \ud559\uc2b5\ub41c \ubaa8\ub378\uc758 \uc131\ub2a5\uc744 \ud14c\uc2a4\ud2b8\ud558\ub294 \ub370 \ud65c\uc6a9\ub41c\ub2e4.</p> <p>\uc774\ub7ec\ud55c \ubd84\ub9ac \uc791\uc5c5\uc744 \ud1b5\ud574 \ubaa8\ub378\uc774 \uc0c8\ub85c\uc6b4, \ubcf4\uc9c0 \ubabb\ud55c \ub370\uc774\ud130\uc5d0 \ub300\ud574 \uc5bc\ub9c8\ub098 \uc798 \uc77c\ubc18\ud654\ub418\ub294\uc9c0 \ud655\uc778\ud560 \uc218 \uc788\ub2e4. \ub370\uc774\ud130 \ubd84\ud560 \ube44\uc728\uc740 \uc77c\ubc18\uc801\uc73c\ub85c \ud504\ub85c\uc81d\ud2b8\uc758 \ud2b9\uc131\uacfc \ub370\uc774\ud130\uc758 \uc591\uc5d0 \ub530\ub77c \uacb0\uc815\ub418\uc9c0\ub9cc, \ubcf4\ud1b5 8:2 \ub610\ub294 9:1\ub4f1\uc758 \ube44\uc728\ub85c \ud6c8\ub828 \ub370\uc774\ud130\uacfc \uac80\uc99d \ub370\uc774\ud130\ub97c \ub098\ub204\uae30\ub3c4 \ud55c\ub2e4.</p> <p>\ub370\uc774\ud130\ub97c \ubd84\ud560 \ub54c \ub370\uc774\ud130\ub97c \ucc98\uc74c\ubd80\ud130 \ub9c8\uc9c0\ub9c9\uae4c\uc9c0 \uc21c\ucc28\uc801\uc73c\ub85c \ud6c8\ub828\ud55c\ub2e4\uace0 \uc0dd\uac01\ud560 \uc218 \uc788\uc9c0\ub9cc, \uc2e4\uc81c \ud559\uc2b5 \uacfc\uc815\uc740 \uadf8\ub807\uc9c0 \uc54a\ub2e4. \ud6c8\ub828 \ub370\uc774\ud130\ub294 block_size\uc5d0 \uc124\uc815\ub41c \ud06c\uae30\ub9cc\ud07c\uc758 \uccad\ud06c(chunk) \ub2e8\uc704\ub85c \ubb34\uc791\uc704 \uc0d8\ud50c\ub9c1\ud574 \ud559\uc2b5\uc744 \uc9c4\ud589\ud55c\ub2e4. \ub370\uc774\ud130 \ube14\ub85d(block) \ub2e8\uc704\ub85c \ub098\ub204\ub294 \uac83\uc740 GPT\uc640 \uac19\uc740 \ud2b8\ub79c\uc2a4\ud3ec\uba38 \uae30\ubc18 \ubaa8\ub378\uc744 \ud559\uc2b5\ud560 \ub54c \uc790\uc8fc \uc0ac\uc6a9\ud558\ub294 \ubc29\ubc95\uc774\ub2e4.</p> <p>\uc5ec\uae30\uc11c <code>block_size</code> \ub294 \ud55c \ubc88\uc5d0 \ubaa8\ub378\uc774 \ucc98\ub9ac\ud560 \uc218 \uc788\ub294 \uae00\uc790\uc758 \uc218\ub97c \uc815\uc758\ud55c\ub2e4. \uc608\ub97c \ub4e4\uc5b4 <code>block_size</code>  \ub97c 8\ub85c \uc124\uc815\ud558\uba74 \ubaa8\ub378\uc740 \ub370\uc774\ud130\uc758 \uc5f0\uc18d\ub41c 8\uac1c\uc758 \uae00\uc790\ub97c \ud558\ub098\uc758 \ud559\uc2b5 \ub2e8\uc704\ub85c \uc774\uc6a9\ud55c\ub2e4. </p> <p>\uc774\ub7ec\ud55c \ubc29\uc2dd\uc73c\ub85c \ub370\uc774\ud130\ub97c \ucc98\ub9ac\ud568\uc73c\ub85c\uc368 \ubaa8\ub378\uc740 \ub2e4\uc591\ud55c \ubb38\ub9e5\uc5d0\uc11c \uc5b8\uc5b4\ub97c \uc774\ud574\ud558\uace0 \uc0dd\uc131\ud558\ub294 \ub2a5\ub825\uc744 \ud0a4\uc6b8 \uc218 \uc788\ub2e4. </p> <p>\ub610\ud55c \ubb34\uc791\uc704 \uc0d8\ud50c\ub9c1\uc744 \ud1b5\ud574 \ubaa8\ub378\uc774 \ub370\uc774\ud130\uc758 \ud2b9\uc815 \ubd80\ubd84\uc5d0 \uacfc\uc801\ud569\ub418\ub294 \uac83\uc744 \ubc29\uc9c0\ud558\uace0, \uc804\uccb4 \ub370\uc774\ud130\uc14b\uc5d0 \ub300\ud574 \uace0\ub974\uac8c \ud559\uc2b5\ud560 \uc218 \uc788\ub3c4\ub85d \ud55c\ub2e4.</p> <p><code>block_size</code> \ub97c 8\ub85c \uc124\uc815\ud558\uace0 \ub370\uc774\ud130\uac00 \ud558\ub098\uc529 \uc5b8\uc5b4 \ubaa8\ub378\uc758 \uc785\ub825\uc73c\ub85c \uc5b4\ub5bb\uac8c \uc804\ub2ec\ub418\ub294\uc9c0 \uc0b4\ud3b4\ubcf4\uaca0\ub2e4. \ud754\ud788 <code>block_size</code> \ub97c \ucee8\ud14d\uc2a4\ud2b8 \uae38\uc774(context length)\ub77c\uace0 \ubd80\ub978\ub2e4. \uc989, \ubaa8\ub378\uc774 \ud55c \ubc88\uc5d0 \ucc98\ub9ac\ud560 \uc218 \uc788\ub294 \ud1a0\ud070\uc758 \ucd5c\ub300 \uae38\uc774\ub97c \uc758\ubbf8\ud558\uba70, \uc774\ub294 \ubaa8\ub378\uc758 \uc131\ub2a5\uacfc \ud6a8\uc728\uc131\uc5d0 \ud070 \uc601\ud5a5\uc744 \ubbf8\uce5c\ub2e4. \uc774 \uac12\uc744 \uc801\uc808\ud788 \uc124\uc815\ud558\ub294 \uac83\uc740 \ubaa8\ub378\uc758 \ud559\uc2b5\uacfc \ucd94\ub860 \uacfc\uc815\uc5d0\uc11c \ub9e4\uc6b0 \uc911\uc694\ud558\ub2e4. \ud070 <code>block_size</code> \ub294 \ubaa8\ub378\uc774 \ub354 \uae34 \ubb38\ub9e5\uc744 \uc774\ud574\ud560 \uc218 \uc788\uac8c \ud574\uc8fc\uc9c0\ub9cc, \ub3d9\uc2dc\uc5d0 \ub354 \ub9ce\uc740 \uacc4\uc0b0 \uc790\uc6d0\uc744 \ud544\uc694\ub85c \ud55c\ub2e4. \ubc18\uba74 \uc791\uc740 <code>block_size</code> \ub294 \uacc4\uc0b0 \b\ud6a8\uc728\uc131\uc740 \ub192\uc77c \uc218 \uc788\uc9c0\ub9cc, \ubaa8\ub378\uc758 \ubb38\ub9e5 \uc774\ud574 \ub2a5\ub825\uc744 \uc81c\ud55c\ud560 \uc218 \uc788\ub2e4. \ub530\ub77c\uc11c \uc8fc\uc5b4\uc9c4 \uc0ac\uc6a9 \uac00\ub2a5\ud55c \uc790\uc6d0\uc744 \uace0\ub824\ud574 \uc801\uc808\ud55c <code>block_size</code> \ub97c \uc120\ud0dd\ud558\ub294 \uac83\uc774 \uc911\uc694\ud558\ub2e4.</p> <p>train_dataset[:block_size] \uc774\ub7f0 \uc2dd\uc73c\ub85c \ud6c8\ub828 \ub370\uc774\ud130\uc14b\uc758 \ucc98\uc74c 8\uac1c \uae00\uc790\ub97c \ud150\uc11c \ud615\ud0dc\ub85c \ubcf4\uc5ec\uc904 \uc218 \uc788\ub2e4. \uc774 \ud150\uc11c\ub294 \uc22b\uc790 \ubc30\uc5f4\uc774\uba70 \uac01 \uc22b\uc790\ub294 \ud2b9\uc815 \uae00\uc790\ub97c \ub098\ud0c0\ub0b8\ub2e4. \ud559\uc2b5 \uacfc\uc815\uc5d0 \uc774\ub7f0 \ube14\ub85d\uc740 \ud2b8\ub79c\uc2a4\ud3ec\uba38 \ubaa8\ub378\uc774 \uac01 \uae00\uc790 \ub4a4\uc5d0 \ub098\ud0c0\ub0a0 \uae00\uc790\ub97c \uc608\uce21\ud558\ub3c4\ub85d \ub3d5\ub2c8\ub2e4. \ubaa8\ub378\uc740 \uac01 \uc704\uce58\uc5d0\uc11c \uae00\uc790\ub97c \uc608\uce21\ud558\uba70, \uc774 \uacfc\uc815\uc744 \ud1b5\ud574 \ubb38\uc7a5 \uad6c\uc870\uc640 \uc5b8\uc5b4 \ud328\ud134\uc744 \ud559\uc2b5\ud55c\ub2e4. \uc608\ub97c \ub4e4\uc5b4 \ubaa8\ub378\uc5d0 1928\uc774\ub77c\uace0 \uc778\ucf54\ub529\ub41c \ud14d\uc2a4\ud2b8 \uc815\ubcf4\ub97c \uc785\ub825\ud588\ub2e4\uace0 \uac00\uc815\ud574\ubcf4\uc790, \ubaa8\ub378\uc740 1928\uc774\ub77c\ub294 \uc22b\uc790\ub85c \uc778\ucf54\ub529\ub41c \ud14d\uc2a4\ud2b8\ub97c \ubd24\ub2e4\uba74 \ub2e4\uc74c \uae00\uc790 2315\ub97c \uc608\uce21\ud560 \ub54c 1928\uc744 \uc0ac\uc6a9\ud558\uace0, \uadf8 \ub2e4\uc74c \uae00\uc790\uc778 0\uc744 \uc608\uce21\ud560 \ub54c\ub294 1928\uacfc 2315\ub97c \ud568\uaed8 \uc0ac\uc6a9\ud574 \uc608\uce21\ud558\ub3c4\ub85d \ud6c8\ub828\ud55c\ub2e4.</p> <pre><code>x = train_dataset[:block_size]\ny = train_dataset[1:block_size+1]\n\nfor time in range(block_size):\n    context = x[:time+1]\n    target = y[time]\n\n    print(f\"\uc785\ub825 \ud150\uc11c : {context}\")\n    print(f\"\ud0c0\uae43 \ud150\uc11c : {target}\")\n</code></pre> <p>\uc778\uacf5\uc9c0\ub2a5 \ubaa8\ub378 \ud6c8\ub828 \uc2dc\uc5d0\ub294 \ub2e8\uc77c \uae00\uc790 \ud150\uc11c\ub9cc \uc785\ub825\uc73c\ub85c \uc8fc\uc5b4\uc9c0\uc9c0 \uc54a\ub294\ub2e4. \uc5ec\ub7ec \uac1c\uc758 \ud150\uc11c\uac00 \ud568\uaed8 \ubb36\uc5ec \uc785\ub825\uc73c\ub85c \uc81c\uacf5\ub41c\ub2e4. \uc774\ub97c <code>\ubc30\uce58(batch)</code> \ub77c\uace0 \ud55c\ub2e4.</p> <p>\uc774\uc81c <code>block_size</code> \uc640 <code>batch_size</code> \ub97c \ud65c\uc6a9\ud574 \ub370\uc774\ud130\uac00 \uc5b4\ub5bb\uac8c \uc785\ub825\ub418\ub294\uc9c0 \uc790\uc138\ud788 \uc0b4\ud3b4\ubcf4\uaca0\ub2e4. \ubc30\uce58 \ucc98\ub9ac\ub294 \ubaa8\ub378\uc758 \ud559\uc2b5 \ud6a8\uc728\uc744 \ub192\uc774\ub294 \uc911\uc694\ud55c \uae30\ubc95\uc73c\ub85c, \uc5ec\ub7ec \ub370\uc774\ud130 \uc0d8\ud50c\uc744 \ub3d9\uc2dc\uc5d0 \ucc98\ub9ac\ud568\uc73c\ub85c\uc368 \uacc4\uc0b0 \uc18d\ub3c4\ub97c \ud5a5\uc0c1\uc2dc\ud0a4\uace0 \ubaa8\ub378\uc758 \uc77c\ubc18\ud654 \ub2a5\ub825\uc744 \uac1c\uc120\ud55c\ub2e4.</p> <p><code>block_size</code> \ub294 \uac01 \ud150\uc11c\uc758 \uae38\uc774\ub97c \uacb0\uc815\ud558\uace0, <code>batch_size</code> \ub294 \ud55c \ubc88\uc5d0 \ucc98\ub9ac\ud560 \ud150\uc11c\uc758 \uac1c\uc218\ub97c \uc124\uc815\ud55c\ub2e4. \uc774 \ub450 \ub9e4\uac1c\ubcc0\uc218\ub97c \uc801\uc808\ud788 \uc870\uc808\ud558\uba74 \ubaa8\ub378\uc758 \ud559\uc2b5 \uc18d\ub3c4\uc640 \uc131\ub2a5\uc744 \ucd5c\uc801\ud654\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"ai/GPT%20%EB%AA%A8%EB%8D%B8%20%EB%A7%8C%EB%93%A4%EA%B8%B0%281%29/#pytorch","title":"PyTorch \uc5b8\uc5b4 \ubaa8\ub378 \ud559\uc2b5\uc744 \uc704\ud55c \ubc30\uce58 \uc0dd\uc131 \uc608\uc81c","text":"<pre><code>torch.manual_seed(1234)\n\nbatch_size = 4  # \ud55c \ubc88\uc5d0 \ucc98\ub9ac\ud560 \uc2dc\ud000\uc2a4 \uac1c\uc218\nblock_size = 8  # \uac01 \uc2dc\ud000\uc2a4\uc758 \uae38\uc774 (\ucee8\ud14d\uc2a4\ud2b8 \uae38\uc774)\n\ndef batch_function(mode):\n    dataset = train_dataset if mode == \"train\" else test_dataset\n    idx = torch.randint(len(dataset) - block_size, (batch_size,))\n    x = torch.stack([dataset[index:index+block_size] for index in idx])\n    y = torch.stack([dataset[index+1:index+block_size+1] for index in idx])\n    return x, y\n\nexample_x, example_y = batch_function(\"train\")\n\nfor size in range(batch_size):\n    for t in range(block_size):\n        context = example_x[size, :t+1]\n        target = example_y[size, t]\n        print(f\"input : {context}, target : {target}\")\n</code></pre> <p>\uc774 \ucf54\ub4dc\ub294 PyTorch\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc5b8\uc5b4 \ubaa8\ub378 \ud559\uc2b5\uc744 \uc704\ud55c \ubbf8\ub2c8 \ubc30\uce58(batch) \ub97c \uc0dd\uc131\ud558\uace0, \uadf8 \ubc30\uce58\uc5d0\uc11c \uac01 \ud0c0\uc784\uc2a4\ud15d\uc758 \uc785\ub825(context) \uacfc \ud0c0\uae43(target) \uc744 \ucd9c\ub825\ud558\ub294 \uc608\uc81c\uc774\ub2e4.</p> <p><code>torch.manual_seed(1234)</code> \ub294 PyTorch\uc758 \ub09c\uc218 \uc0dd\uc131 \uc2dc\ub4dc\ub97c \uace0\uc815\ud558\uc5ec \uc7ac\ud604 \uac00\ub2a5\ud55c \uacb0\uacfc\ub97c \ub9cc\ub4e0\ub2e4.</p> <p><code>batch_size = 4</code>, <code>block_size = 8</code> - batch_size: \ud559\uc2b5\uc5d0 \uc0ac\uc6a9\ud560 \ubb38\uc7a5 \ub610\ub294 \uc2dc\ud000\uc2a4\uc758 \uac1c\uc218 (\ud55c \ubc88\uc5d0 \ucc98\ub9ac\ud560 \ub370\uc774\ud130 \uc218) - block_size: \uac01 \uc2dc\ud000\uc2a4(\ubb38\uc7a5)\uc758 \uae38\uc774. \uc989, \uc2dc\ud000\uc2a4 \ud558\ub098\ub294 8\uac1c\uc758 \ud1a0\ud070\uc73c\ub85c \uad6c\uc131\ub428</p>"},{"location":"ai/GPT%20%EB%AA%A8%EB%8D%B8%20%EB%A7%8C%EB%93%A4%EA%B8%B0%281%29/#1-batch_functionmode","title":"1. batch_function(mode)","text":"<p><code>train_dataset</code> \ub610\ub294 <code>test_dataset</code> \uc911 \ud558\ub098\uc5d0\uc11c \ud559\uc2b5 \ubc30\uce58\ub97c \ub9cc\ub4dc\ub294 \ud568\uc218\uc774\ub2e4.</p> <pre><code>dataset = train_dataset if mode == \"train\" else test_dataset\n</code></pre> <ul> <li><code>mode</code>\uc5d0 \ub530\ub77c \uc0ac\uc6a9\ud560 \ub370\uc774\ud130\uc14b\uc744 \uc120\ud0dd\ud55c\ub2e4.</li> </ul> <pre><code>idx = torch.randint(len(dataset) - block_size, (batch_size))\n</code></pre> <ul> <li>\ub370\uc774\ud130\uc14b\uc5d0\uc11c block_size\ub9cc\ud07c\uc758 \uc5f0\uc18d\ub41c \uad6c\uac04\uc744 \ucd94\ucd9c\ud560 \uc2dc\uc791 \uc778\ub371\uc2a4\ub97c \ubb34\uc791\uc704\ub85c <code>batch_size</code>\uac1c \ub9cc\ud07c \uc120\ud0dd\ud55c\ub2e4.</li> </ul> <pre><code>x = torch.stack([dataset[index:index+block_size] for index in idx])\ny = torch.stack([dataset[index+1:index+block_size+1] for index in idx])\n</code></pre> <ul> <li><code>x</code>: <code>[index : index + block_size]</code> \ubc94\uc704 \u2192 \uc785\ub825 \uc2dc\ud000\uc2a4</li> <li><code>y</code>: <code>[index+1 : index + block_size + 1]</code> \ubc94\uc704 \u2192 \ud0c0\uae43 \uc2dc\ud000\uc2a4 (\ud55c \uce78 \uc624\ub978\ucabd\uc73c\ub85c shift\ub41c \uac12)</li> </ul> <p>\uc608\uc2dc - x: <code>[1, 2, 3, 4, 5, 6, 7, 8]</code> - y: <code>[2, 3, 4, 5, 6, 7, 8, 9]</code>     \u2192 \uc5b8\uc5b4 \ubaa8\ub378\uc5d0\uc11c\ub294 \uc8fc\uc5b4\uc9c4 context\ub85c \ub2e4\uc74c \ub2e8\uc5b4\ub97c \uc608\uce21\ud558\ubbc0\ub85c \uc774\ub807\uac8c \ud55c \uce78\uc529 \uc774\ub3d9\uc2dc\ud0a8\ub2e4.</p> <p><code>example_x, example_y = batch_function(\"train\")</code></p> <ul> <li>\ud559\uc2b5\uc6a9 \ubbf8\ub2c8 \ubc30\uce58\ub97c \ud558\ub098 \uc0dd\uc131\ud55c\ub2e4.</li> </ul>"},{"location":"ai/GPT%20%EB%AA%A8%EB%8D%B8%20%EB%A7%8C%EB%93%A4%EA%B8%B0%281%29/#2-context-target","title":"2. context\uc640 target\uc744 \ud558\ub098\uc529 \ucd9c\ub825","text":"<pre><code>for size in range(batch_size):\n    for t in range(block_size):\n        context = example_x[size, :t+1]\n        target = example_y[size, t]\n        print(f\"input : {context}, target : {target}\")\n</code></pre> <p>\uc608\uc2dc</p> <ul> <li><code>example_x[size] = [10, 20, 30, 40, 50, 60, 70, 80]</code></li> <li><code>example_y[size] = [20, 30, 40, 50, 60, 70, 80, 90]</code></li> </ul> <p>\ucd9c\ub825\uc740 \ub2e4\uc74c\uacfc \uac19\uc774 \ub428</p> <pre><code>input : tensor([10]), target : 20\ninput : tensor([10, 20]), target : 30\ninput : tensor([10, 20, 30]), target : 40\n...\ninput : tensor([10, 20, 30, 40, 50, 60, 70, 80]), target : 90\n</code></pre> <p>\uc774 \uad6c\uc870\ub294 GPT \uacc4\uc5f4\uc758 \uc624\ud1a0\ub9ac\uadf8\ub808\uc2dc\ube0c \ubaa8\ub378\uc5d0\uc11c \ud559\uc2b5 \uc2dc \uc8fc\uc5b4\uc9c4 <code>context</code>\ub85c \ub2e4\uc74c \ud1a0\ud070\uc744 \uc608\uce21\ud558\ub294 \ubc29\uc2dd\uacfc \uac19\uc2b5\ub2c8\ub2e4. </p> <p>\uc694\uc57d\ud558\uc790\uba74, \uc774 \ucf54\ub4dc\ub294 \uc5b8\uc5b4 \ubaa8\ub378 \ud559\uc2b5\uc744 \uc704\ud574 - \uc785\ub825 \uc2dc\ud000\uc2a4\uc640 \ud0c0\uae43 \uc2dc\ud000\uc2a4\ub97c \uc790\ub3d9 \uc0dd\uc131\ud558\uace0 - \uac01 \ud0c0\uc784\uc2a4\ud15d\uc5d0\uc11c <code>context \u2192 target</code> \uad00\uacc4\ub97c \ucd9c\ub825\ud558\ub294 \ub370, \uc774 \uacfc\uc815\uc5d0\uc11c \uac01 \ubc30\uce58\uc640 \ube14\ub85d\uc5d0 \ub300\ud55c \uc785\ub825(\ucee8\ud14d\uc2a4\ud2b8)\uacfc \ud574\ub2f9 \ud0c0\ud0b7(\ubaa9\ud45c \uae00\uc790)\uc774 \ucd9c\ub825\ud558\ub294 \uac83\uc744 \uc758\ubbf8\ud55c\ub2e4. - \uc774\ub97c \ud1b5\ud574 \uc8fc\uc5b4\uc9c4 \ucee8\ud14d\uc2a4\ud2b8\ub97c \ubc14\ud0d5\uc73c\ub85c \ub2e4\uc74c \uae00\uc790\ub97c \uc608\uce21\ud558\ub294 \ubc29\uc2dd\uc73c\ub85c \ud559\uc2b5\ud55c\ub2e4. - \ucf54\ub4dc \uc2e4\ud589 \uacb0\uacfc\ub294 \ubaa8\ub378\uc774 \uac01 \ubc30\uce58 \uc2dc\ud000\uc2a4\ub97c \ucc98\ub9ac\ud558\uba70 \ud14d\uc2a4\ud2b8 \uad6c\uc870\uc640 \uc5b8\uc5b4 \ud328\ud134\uc744 \ud559\uc2b5\ud558\ub294 \uacfc\uc815\uc744 \ubcf4\uc5ec\uc900\ub2e4.</p> <p>\uc9c0\uae08\uae4c\uc9c0 \ub370\uc774\ud130\uac00 \ubaa8\ub378\uc5d0 \uc5b4\ub5a4 \ubc29\uc2dd\uc73c\ub85c \uc804\ub2ec\ub418\ub294\uc9c0 \uc0b4\ud3b4\ubd24\ub2e4.</p> <p>\uc774\uc81c \uac04\ub2e8\ud55c \uc5b8\uc5b4 \ubaa8\ub378\uc744 \uc9c1\uc811 \ub9cc\ub4e4\uace0 \uc2e4\ud5d8\ud558\uba74\uc11c \uc778\uacf5\uc9c0\ub2a5\uc774 \uc5b4\ub5bb\uac8c \uc5b8\uc5b4\ub97c \ud559\uc2b5\ud558\ub294\uc9c0 \ub2e8\uacc4\ubcc4\ub85c \uc0b4\ud3b4\ubcf4\uc790. \ub9c8\uce58 \ub808\uace0\ub97c \uc870\ub9bd\ud558\ub4ef\uc774 \uc778\uacf5\uc9c0\ub2a5 \uae30\ub2a5\uc744 \uc21c\ucc28\uc801\uc73c\ub85c \ucd94\uac00\ud558\uace0 \ud6c8\ub828\ud558\uba74\uc11c \uac01 \ubaa8\ub378\uc758 \uc131\ub2a5\uc774 \uc5b4\ub5bb\uac8c \uac1c\uc120\ub418\ub294\uc9c0 \uad00\ucc30\ud560 \uc608\uc815\uc774\ub2e4.</p> <p>\uc774 \uacfc\uc815\uc744 \ud1b5\ud574 \uc5b8\uc5b4 \ubaa8\ub378\uc758 \uae30\ubcf8 \uad6c\uc870\ub97c \uc774\ud574\ud558\uace0, \uac01 \uad6c\uc131 \uc694\uc18c\uac00 \ubaa8\ub378\uc758 \uc131\ub2a5\uc5d0 \uc5b4\ub5a4 \uc601\ud5a5\uc744 \ubbf8\uce58\ub294\uc9c0 \uc9c1\uc811 \ud655\uc778\ud560 \uc218 \uc788\ub2e4. \uba3c\uc800 \uac00\uc7a5 \uae30\ubcf8\uc801\uc778 \ud615\ud0dc\uc758 \uc5b8\uc5b4 \ubaa8\ub378\uc744 \uc124\uc815\ud558\uace0, \uc810\uc9c4\uc801\uc73c\ub85c \ubcf5\uc7a1\ud55c \uae30\ub2a5\uc744 \ucd94\uac00\ud558\uba74\uc11c \uadf8 \ubcc0\ud654\ub97c \uad00\ucc30\ud574\ubcf4\uc790. \uc774\ub7ec\ud55c \ub2e8\uacc4\ubcc4 \uc811\uadfc \ubc29\uc2dd\uc740 \ubcf5\uc7a1\ud55c \uc778\uacf5\uc9c0\ub2a5 \uc2dc\uc2a4\ud15c\uc758 \uc791\ub3d9 \uc6d0\ub9ac\ub97c \ub354 \uc27d\uac8c \uc774\ud574\ud560 \uc218 \uc788\uac8c \ud574\uc900\ub2e4.</p> <p>\uac01 \ub2e8\uacc4\uc5d0\uc11c \ubaa8\ub378 \uc131\ub2a5\uc744 \ud3c9\uac00\ud558\uace0 \ubd84\uc11d\ud574, \uc5b8\uc5b4 \ubaa8\ub378\uc758 \ubc1c\uc804 \uacfc\uc815\uacfc \uac01 \uc694\uc18c\uc758 \uc911\uc694\uc131\uc744 \uae4a\uc774 \uc788\uac8c \ud30c\uc545\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"ai/GPT%20%EB%AA%A8%EB%8D%B8%20%EB%A7%8C%EB%93%A4%EA%B8%B0%281%29/#_1","title":"\uc5b8\uc5b4 \ubaa8\ub378 \ub9cc\ub4e4\uae30","text":"<p>semiGPT \ud074\ub798\uc2a4\ub97c \ub9cc\ub4dc\ub294 \uacfc\uc815\uc740 \uac1d\uccb4 \uc9c0\ud5a5 \ud504\ub85c\uadf8\ub798\ubc0d\uc758 \uae30\ubcf8 \uc6d0\uce59\uc744 \ub530\ub978\ub2e4.  - \uccab \ubc88\uc9f8\ub294 <code>__init__</code> \uba54\uc11c\ub4dc\ub85c, \ud074\ub798\uc2a4\uc758 \ucd08\uae30\ud654\ub97c \ub2f4\ub2f9 - \ub450 \ubc88\uc9f8\ub294 <code>forward</code> \uba54\uc11c\ub4dc\ub85c, \ubaa8\ub378 \uc2e4\uc81c \uc5f0\uc0b0\uc744 \uc218\ud589\ud55c\ub2e4. <code>__init__</code> \uba54\uc11c\ub4dc\uc5d0\uc11c\ub294 \ubaa8\ub378\uc758 \uad6c\uc870\uc640 \ucd08\uae30 \ud30c\ub77c\ubbf8\ud130\ub97c \uc124\uc815\ud558\uace0, <code>forward</code> \uba54\uc11c\ub4dc\uc5d0\uc11c\ub294 \uc785\ub825 \ub370\uc774\ud130\ub97c \ubc1b\uc544 \ubaa8\ub378\uc744 \ud1b5\uacfc\uc2dc\ucf1c \ucd9c\ub825\uc744 \uc0dd\uc131\ud55c\ub2e4.</p> <p>\uc774\ub7ec\ud55c \uad6c\uc870\ub294 \ud30c\uc774\ud1a0\uce58\uc640 \uac19\uc740 \ub525\ub7ec\ub2dd \ud504\ub808\uc784\uc6cc\ud06c\uc5d0\uc11c \uc77c\ubc18\uc801\uc73c\ub85c \uc0ac\uc6a9\ub418\ub294 \ubc29\uc2dd\uc73c\ub85c, \ubaa8\ub378\uc758 \uad6c\uc870\ub97c \uba85\ud655\ud558\uac8c \uc815\uc758\ud558\uace0 \uc0ac\uc6a9\ud558\uae30 \uc27d\uac8c \ub9cc\ub4e0\ub2e4. \uc774\ub807\uac8c \uc124\uacc4\ub41c semiGPT \ud074\ub798\uc2a4\ub294 \ub2e4\uc591\ud55c \uc5b8\uc5b4 \ubaa8\ub378\ub9c1 \uc791\uc5c5\uc5d0 \ud65c\uc6a9\ub420 \uc218 \uc788\uc73c\uba70, \ud544\uc694\uc5d0 \ub530\ub77c \uc27d\uac8c \ud655\uc7a5\ud558\uac70\ub098 \uc218\uc815\uc774 \uac00\ub2a5\ud558\ub2e4.</p> <pre><code>import torch\nimport torch.nn as nn\nfrom torch.nn import functional as F\n\nclass semiGPT(nn.Module):\n    def __init__(self, vocab_length):\n        super().__init__()\n        # \ud1a0\ud070 \uc784\ubca0\ub529 \ud14c\uc774\ube14: vocab_length x vocab_length \ud06c\uae30\uc758 \ud589\ub82c\n        self.embedding_token_table = nn.Embedding(vocab_length, vocab_length)\n\n    def forward(self, inputs, targets=None):\n        # \uc785\ub825 \ud1a0\ud070\uc744 \uc784\ubca0\ub529 \ubca1\ud130\ub85c \ubcc0\ud658\n        logits = self.embedding_token_table(inputs)\n        return logits\n\nmodel = semiGPT(ko_vocab_size)\noutput = model(example_x, example_y)\nprint(output.shape)\n</code></pre> <p>\uacb0\uacfc: torch.Size([4,8,2701])</p> <p>\uba3c\uc800, \ud070 \ud750\ub984\uc744 \uc0b4\ud3b4\ubcf4\uace0 \ucf54\ub4dc\ub97c \uc0b4\ud3b4\ubcf4\uaca0\ub2e4. semiGPT\ub294 <code>__init__</code> \ud568\uc218\uc5d0\uc11c <code>vocab_length</code> \ub97c (\ub9e4\uac1c)\ubcc0\uc218\ub85c \ubc1b\uc544 \ud1a0\ud070 \uc784\ubca0\ub529(embedding) \ud14c\uc774\ube14\uc744 \ub9cc\ub4e0\ub2e4. \uc5ec\uae30\uc11c <code>vocab_length</code>\ub294 \ubaa8\ub378\uc774 \ub2e4\ub8f0 \uc218 \uc788\ub294 \ub2e8\uc5b4\uc758 \ucd1d \uac1c\uc218\uc774\ubbc0\ub85c 2701\uac1c\uac00 \ub41c\ub2e4.</p> <p>\uc784\ubca0\ub529 \ud14c\uc774\ube14\uc740 \uac01 \ub2e8\uc5b4\ub97c \uace0\uc720\ud55c \uc22b\uc790 \ubca1\ud130\ub85c \ubcc0\ud658\ud558\ub294 \uc5ed\ud560\uc744 \ud55c\ub2e4. \uc774\ub97c \ucf54\ub4dc\ub85c \uad6c\ud604\ud55c \ubd80\ubd84\uc774  <code>self.token_embedding_table = nn.Embedding(vocab_length, vocab_length)</code> \uc774\ub2e4.</p> <p>\uc774 \ucf54\ub4dc\ub97c \ub354 \uc790\uc138\ud788 \uc0b4\ud3b4\ubcf4\uba74 <code>nn.Embedding</code>\uc740 \ud30c\uc774\ud1a0\uce58\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 \uae30\ub2a5\uc73c\ub85c,  \ub2e8\uc5b4\ub97c \ubca1\ud130\ub85c \ubcc0\ud658\ud558\ub294 \ud14c\uc774\ube14\uc744 \ub9cc\ub4e0\ub2e4. </p> <p>\uccab \ubc88\uc9f8 <code>vocab_length</code>\ub294 \ucd1d \ub2e8\uc5b4\uc758 \uc218\ub97c \uc758\ubbf8\ud558\uace0,  \ub450 \ubc88\uc9f8 <code>vocab_length</code>\ub294 \uac01 \ub2e8\uc5b4\ub97c \ud45c\ud604\ud560 \ubca1\ud130\uc758 \ud06c\uae30\ub97c \ub098\ud0c0\ub0b8\ub2e4.</p> <p>\uc608\ub97c \ub4e4\uc5b4, \uc804\uccb4 \ub2e8\uc5b4\uac00 1,000\uac1c\uc774\uace0 \uac01 \ub2e8\uc5b4\ub97c 100\ucc28\uc6d0\uc758 \ubca1\ud130\ub85c \ud45c\ud604\ud558\uace0 \uc2f6\ub2e4\uba74 <code>nn.Embedding(1000, 100)</code> \uacfc \uac19\uc774 \uc124\uc815\ub41c\ub2e4. \uc774\ub807\uac8c \ud558\uba74 \uac01 \ub2e8\uc5b4\ub9c8\ub2e4 100\uac1c\uc758 \uc22b\uc790\ub85c \uc774\ub904\uc9c4 \uace0\uc720\ud55c \ubca1\ud130\uac00 \ud560\ub2f9\ub41c\ub2e4.</p> <p>\uc774 \uc784\ubca0\ub529 \ud14c\uc774\ube14\uc744 \ud1b5\ud574 \ud14d\uc2a4\ud2b8 \ub370\uc774\ud130\ub97c \ucef4\ud4e8\ud130\uac00 \uc774\ud574\ud558\uace0 \ucc98\ub9ac\ud560 \uc218 \uc788\ub294 \ud615\ud0dc\ub85c \ubcc0\ud658\ud560 \uc218 \uc788\ub2e4. \uc774\ub7ec\ud55c \uacfc\uc815\uc744 \uac70\uccd0 \ucef4\ud4e8\ud130\ub294 \ud14d\uc2a4\ud2b8 \ub370\uc774\ud130\ub97c \ud6a8\uacfc\uc801\uc73c\ub85c \ubd84\uc11d\ud558\uace0 \ucc98\ub9ac\ud560 \uc218 \uc788\uac8c \ub41c\ub2e4.</p> <p>\uc774\ub7ec\ud55c \uc784\ubca0\ub529 \uacfc\uc815\uc774 \uc911\uc694\ud55c \uc774\uc720\ub294 \ub2e4\uc74c\uacfc \uac19\ub2e4.</p> <ol> <li> <p>\ucef4\ud4e8\ud130\ub294 \uc6d0\ub798 \uc22b\uc790\ub9cc\uc744 \uc774\ud574\ud558\uace0 \ucc98\ub9ac\ud560 \uc218 \uc788\uc5b4 \uc784\ubca0\ub529\uc744 \ud1b5\ud574 \ub2e8\uc5b4\ub97c \uc22b\uc790 \ubca1\ud130\ub85c \ubcc0\ud658\ud558\uba74 \ucef4\ud4e8\ud130\uac00 \uc774\ud574\ud560 \uc218 \uc788\ub294 \ud615\ud0dc\uac00 \ub41c\ub2e4.</p> </li> <li> <p>\ubca1\ud130 \ud45c\ud604\uc740 \ub2e8\uc5b4 \uac04\uc758 \uc758\ubbf8\uc801 \uad00\uacc4\ub97c \uc218\ud559\uc801\uc73c\ub85c \ud45c\ud604\ud560 \uc218 \uc788\uac8c \ud574 \ucef4\ud4e8\ud130\uac00 \ub2e8\uc5b4\uac04\uc758 \uc720\uc0ac\uc131\uc744 \uacc4\uc0b0\ud558\uace0 \uc774\ud574\ud560 \uc218 \uc788\uac8c \ub41c\ub2e4.</p> </li> <li> <p>\uc774\ub7ec\ud55c \ubca1\ud130 \ud45c\ud604\uc740 \ub2e4\uc591\ud55c \uc218\ud559\uc801 \uc5f0\uc0b0\uc744 \uac00\ub2a5\ud558\uac8c \ud574 \ubcf5\uc7a1\ud55c \uc5b8\uc5b4 \ubaa8\ub378\ub9c1\uacfc \uc790\uc5f0\uc5b4 \ucc98\ub9ac \uc791\uc5c5\uc5d0 \uc720\uc6a9\ud558\ub2e4.</p> </li> <li> <p>\uace0\ucc28\uc6d0 \ubca1\ud130\ub85c\uc758 \ubcc0\ud658\uc740 \ub2e8\uc5b4\uc758 \ub2e4\uc591\ud55c \ud2b9\uc131\uc744 \ud45c\ud604\ud560 \uc218 \uc788\uc5b4 \ub2e8\uc5b4\uc758 \ubcf5\uc7a1\ud55c \uc758\ubbf8\uc640 \ub258\uc559\uc2a4\ub97c \ub354 \uc815\ud655\ud788 \ub098\ud0c0\ub0a0 \uc218 \uc788\ub2e4.</p> </li> </ol> <p>\ubaa8\ub378\uc758 <code>forward</code> \uba54\uc11c\ub4dc\ub294 \uc2e4\uc81c\ub85c \ub370\uc774\ud130\uac00 \ubaa8\ub378\uc744 \ud1b5\uacfc\ud558\ub294 \uacfc\uc815\uc774\ub2e4. \uc774 \uba54\uc11c\ub4dc\uc5d0\uc11c\ub294 \uc785\ub825 \ud1a0\ud070\uc5d0 \ub300\ud55c \uc784\ubca0\ub529\uc744 \uc870\ud68c\ud55c\ub2e4. \uadf8 \uacb0\uacfc\ub85c <code>\ub85c\uc9d3(logit)</code>\uc744 \ubc18\ud658\ud558\ub294\ub370, \ub85c\uc9d3\uc740 \ud655\ub960\ub85c \ubcc0\ud658\ub418\uae30 \uc804\uc758 \uc6d0\uc2dc \uc810\uc218 \uac12\uc774\ub2e4. \uc774 \ub85c\uc9d3\uc740 \uac01 \uac00\ub2a5\ud55c \ucd9c\ub825 \ud074\ub798\uc2a4\uc5d0 \ub300\ud55c \uc0c1\ub300\uc801\uc778 \uc810\uc218\ub97c \ub098\ud0c0\ub0b4\uba70, \uc77c\ubc18\uc801\uc73c\ub85c \uc18c\ud504\ud2b8\ub9e5\uc2a4 \ud568\uc218\ub97c \ud1b5\ud574 \ud655\ub960\ub85c \ubcc0\ud658\ub41c\ub2e4.</p> <p><code>Torch\uc640 torch.nn</code> :  \ud30c\uc774\ud1a0\uce58\uc758 \ud575\uc2ec \ub77c\uc774\ube0c\ub7ec\ub9ac\uc778 torch\ub294 \ud150\uc11c \uc5f0\uc0b0\uacfc \uc790\ub3d9 \ubbf8\ubd84 \uae30\ub2a5 \ub4f1\uc744 \uc81c\uacf5\ud574 \ub525\ub7ec\ub2dd \ubaa8\ub378 \uad6c\ud604\uc5d0 \ud544\uc218\uc801\uc778 \uae30\ub2a5\uc744 \uc81c\uacf5\ud55c\ub2e4. \uc2e0\uacbd\ub9dd \uad6c\ucd95\uc5d0 \ud544\uc694\ud55c \ub2e4\uc591\ud55c \ub808\uc774\uc5b4\uc640 \ub9e4\uac1c\ubcc0\uc218 \uad00\ub9ac \uae30\ub2a5\uc740 <code>torch.nn</code> \ubaa8\ub4c8\uc5d0\uc11c \uc81c\uacf5\ud55c\ub2e4. \uc774\ub97c \ud1b5\ud574 \ubaa8\ub378 \uc544\ud0a4\ud14d\ucc98\ub97c \uc815\uc758\ud558\uace0 \ub9e4\uac1c\ubcc0\uc218\ub97c \ucd08\uae30\ud654\ud558\uba70, \uc21c\uc804\ud30c(forward pass) \ub97c \uad6c\ud604\ud560 \uc218 \uc788\ub2e4.</p> <p><code>torch.nn.functional</code> : \uc8fc\ub85c \uc0c1\ud0dc\uac00 \uc5c6\ub294(stateless) \ud568\uc218\ub4e4\uc744 \uc81c\uacf5\ud55c\ub2e4. \uc5ec\uae30\uc5d0\ub294 \ud65c\uc131\ud654 \ud568\uc218(ReLU, Sigmoid \ub4f1)\uc640 \uc190\uc2e4 \ud568\uc218(Cross Entropy Loss \ub4f1)\uac00 \ud3ec\ud568\ub41c\ub2e4. \uc774 \ubaa8\ub4c8\uc740 \ud568\uc218\uc801 \uc778\ud130\ud398\uc774\uc2a4\ub97c \ud1b5\ud574 \ub808\uc774\uc5b4\uc758 \uc791\ub3d9\uc744 \uad6c\ud604\ud560 \ub54c \ud65c\uc6a9\ud55c\ub2e4.</p> <p>\uc704 \ucf54\ub4dc\ub85c\ub294 \ubaa8\ub378\uc774 \ud559\uc2b5\ub420 \uc218 \uc5c6\ub2e4. \uc911\uc694\ud55c \uc694\uc18c\uac00 \ud558\ub098 \ube60\uc84c\ub294\ub370, \ubc14\ub85c \uc190\uc2e4 \uacc4\uc0b0\uc774\ub2e4. \uc774\uc81c \uc190\uc2e4\uc744 \uad6c\ud558\ub294 \ucf54\ub4dc\ub97c \ucd94\uac00\ud574 \ubcf4\uaca0\ub2e4.</p> <p>Loss\ub97c \uc0ac\uc6a9\ud560 \ub54c 2\uac00\uc9c0 \uc911\uc694\ud55c \uac00\uc815\uc774 \uc788\ub2e4.</p> <p>\uac00\uc8151: \uc804\uccb4 \uc190\uc2e4\uc740 \uac1c\ubcc4 \uc0d8\ud50c \uc190\uc2e4\uc758 \ud569\uacfc \uac19\ub2e4. \uac00\uc8152: \uac01 \uc0d8\ud50c\uc758 \uc190\uc2e4\uc744 \uacc4\uc0b0\ud560 \ub54c \uc2e0\uacbd\ub9dd\uc758 \ucd5c\uc885 \ucd9c\ub825\uac12\uacfc \uc785\ub825\uac12\ub9cc \uc0ac\uc6a9\ud55c\ub2e4.</p> <p>\uc0ac\uc6a9\ud560 \uc190\uc2e4 \ud568\uc218\ub294 \uc774\ub7ec\ud55c \uac00\uc815\uc744 \ucda9\uc871\ud558\ub294 \ud30c\uc774\ud1a0\uce58\uc758 \ud06c\ub85c\uc2a4 \uc5d4\ud2b8\ub85c\ud53c(cross_entropy)\uc774\ub2e4. \ud06c\ub85c\uc2a4 \uc5d4\ud2b8\ub85c\ud53c \ud568\uc218\ub294 \ubd84\ub958 \ubb38\uc81c\uc5d0\uc11c \ubaa8\ub378 \uc131\ub2a5\uc744 \uce21\uc815\ud558\ub294 \ub370 \uc790\uc8fc \uc0ac\uc6a9\ub41c\ub2e4. \uc774 \ud568\uc218\ub294 \ubaa8\ub378\uc774 \uc608\uce21\ud55c \ud655\ub960 \ubd84\ud3ec(\uc784\ubca0\ub529)\uc640 \uc2e4\uc81c \ub808\uc774\ube14(target) \ubd84\ud3ec \uac04\uc758 \ucc28\uc774\ub97c \uacc4\uc0b0\ud55c\ub2e4.</p> <p>\uc190\uc2e4\uc774 \ub0ae\uc744\uc218\ub85d \ubaa8\ub378\uc758 \uc608\uce21\uc774 \uc2e4\uc81c \ub808\uc774\ube14\uc5d0 \ub354 \uac00\uae5d\ub2e4\ub294 \uac83\uc744 \uc758\ubbf8\ud55c\ub2e4. \uc774\ub7ec\ud55c \uc190\uc2e4 \uacc4\uc0b0\uc740 \ubaa8\ub378\uc774 \ud559\uc2b5 \uacfc\uc815\uc5d0\uc11c \uc790\uc2e0\uc758 \uc131\ub2a5\uc744 \ud3c9\uac00\ud558\uace0 \uac1c\uc120\ud560 \uc218 \uc788\uac8c \ud574\uc8fc\ub294 \uc911\uc694\ud55c \uc9c0\ud45c\uac00 \ub41c\ub2e4. \uc190\uc2e4 \ud568\uc218\ub97c \ud1b5\ud574 \ubaa8\ub378\uc740 \uc790\uc2e0\uc758 \uc608\uce21\uacfc \uc2e4\uc81c \uc815\ub2f5 \uc0ac\uc774\uc758 \uc624\ucc28\ub97c \uc778\uc2dd\ud558\uace0, \uc774\ub97c \ucd5c\uc18c\ud654\ud558\ub294 \ubc29\ud5a5\uc73c\ub85c \ud30c\ub77c\ubbf8\ud130\ub97c \uc870\uc815\ud560 \uc218 \uc788\ub2e4.</p> <p>\uc190\uc2e4 \ud568\uc218\ub97c \uc124\uc815\ud558\uace0 \ub2e4\uc2dc \ud55c\ubc88 \ucf54\ub4dc\ub97c \uc2e4\ud589\ud574\ubcf4\uaca0\ub2e4.</p> <pre><code>import torch\nimport torch.nn as nn\nfrom torch.nn import functional as F\n\nclass semiGPT(nn.Module):\n    def __init__(self, vocab_length):\n        super().__init__()\n        self.embedding_token_table = nn.Embedding(vocab_length, vocab_length)\n\n    def forward(self, inputs, targets=None):\n        logits = self.embedding_token_table(inputs)\n\n        # \uc190\uc2e4 \uacc4\uc0b0 (targets\uac00 \uc81c\uacf5\ub41c \uacbd\uc6b0\uc5d0\ub9cc)\n        if targets is not None:\n            loss = F.cross_entropy(logits, targets)\n            return logits, loss\n        else:\n            return logits\n\nmodel = semiGPT(ko_vocab_size)\noutput, loss = model(example_x, example_y)\nprint(f\"Output shape: {output.shape}, Loss: {loss}\")\n</code></pre> <p>\ucf54\ub4dc\ub97c \uc2e4\ud589\ud558\uba74 \uc5d0\ub7ec\ub97c \ubc1c\uc0dd\ud558\ub294 \uac83\uc774 \uc815\uc0c1\uc774\ub2e4. \uc774\ub294 <code>shape</code> \uac00 \ub9de\uc9c0 \uc54a\uae30 \ub54c\ubb38\uc774\ub2e4. \uc774 \ub610\ud55c \ub2e4\uc591\ud55c \uc5f0\uad6c\ub97c \ud558\ub2e4 \ubcf4\uba74 \uc790\uc8fc \ub9cc\ub098\ub294 \uc624\ub958\uc5ec\uc11c \uc608\uc81c\ub85c \uac00\uc838\uc654\ub2e4.</p> <p>RuntimeError: Expected target size [4, 2701], got[4, 8]</p> <p>\uc624\ub958\uac00 \ubc1c\uc0dd\ud558\ub294 \uc774\uc720\ub97c \ub2e4\uc2dc \uc0b4\ud3b4\ubcf4\uaca0\ub2e4. \uc624\ub958 \uba54\uc2dc\uc9c0\uc5d0\uc11c \ubcfc \uc218 \uc788\ub4ef\uc774, \ubaa8\ub378\uc740 target size[4, 2701]\uc744 \uae30\ub300\ud558\uc9c0\ub9cc, \uc2e4\uc81c targets shape\uc73c\ub85c\ub294 [4, 8]\uc744 \ubc1b\uc558\ub2e4\ub294 \uc5d0\ub7ec\uc774\ub2e4. \uc774\ub294 vacab_length\uac00 2701\uc784\uc744 \ub098\ud0c0\ub0b8\ub2e4.</p> <p>example_x, example_y\ub294 \uac01\uac01 [4, 8] \ud06c\uae30\uc774\ubbc0\ub85c \ubaa8\ub378\uc5d0\uc11c \ud06c\ub85c\uc2a4\uc5d4\ud2b8\ub85c\ud53c \uc190\uc2e4 \ud568\uc218\uac00 \uc62c\ubc14\ub974\uac8c \uc791\ub3d9\ud558\ub824\uba74 \uc608\uce21\ud55c \uac83(logits)\uacfc \uc2e4\uc81c \uac12(targets)\uc758 \ucc28\uc774\ub97c \uacc4\uc0b0\ud558\uae30 \uc804\uc5d0 shape \uc744 \uc870\uc815\ud574\uc57c \ud55c\ub2e4.</p> <ul> <li>logits\uc758 shape [4, 8, 2701]\uc5d0\uc11c [32 2701]\ub85c \ubcc0\uacbd\ud55c\ub2e4. (4x8 = 32)</li> <li>targets\uc758 shape\uc744 [4, 8]\uc5d0\uc11c [32]\ub85c \ubcc0\uacbd\ud55c\ub2e4.</li> </ul> <p>\uc774\ub807\uac8c shape\uc744 \ubcc0\uacbd\ud568\uc73c\ub85c\uc368 \uac01 \ud1a0\ud070\uc5d0 \ub300\ud55c \uc608\uce21\uacfc \uc2e4\uc81c \uac12\uc744 \uc77c\ub300\uc77c\ub85c \ube44\uad50\ud560 \uc218 \uc788\uac8c \ub41c\ub2e4.</p> <p>\uc218\uc815\ub41c \ucf54\ub4dc\ub294 \ub2e4\uc74c\uacfc \uac19\ub2e4.</p> <pre><code>import torch\nimport torch.nn as nn\nfrom torch.nn import functional as F\n\nclass semiGPT(nn.Module):\n    def __init__(self, vocab_length):\n        super().__init__()\n        self.embedding_token_table = nn.Embedding(vocab_length, vocab_length)\n\n    def forward(self, inputs, targets=None):\n        # \uc785\ub825\uc744 \uc784\ubca0\ub529\uc73c\ub85c \ubcc0\ud658\n        logits = self.embedding_token_table(inputs)\n\n        if targets is not None:\n            # \uc190\uc2e4 \uacc4\uc0b0\uc744 \uc704\ud574 shape \uc870\uc815\n            batch, seq_length, vocab_length = logits.shape\n            logits_reshaped = logits.view(batch * seq_length, vocab_length)\n            targets_reshaped = targets.view(batch * seq_length)\n            loss = F.cross_entropy(logits_reshaped, targets_reshaped)\n            return logits, loss\n        else:\n            return logits\n\nmodel = semiGPT(ko_vocab_size)\noutput, loss = model(example_x, example_y)\nprint(f\"Loss: {loss}\")\n</code></pre> <p>\uc2e4\ud589 \uacb0\uacfc tensor(8.2693, grad_fn=NllLossBackward0)</p> <p>\uccab \ubc88\uc9f8\ub85c logits\uc758 shape\ub97c \ubcc0\uacbd\ud588\ub2e4. <code>logits = logits.view(batch * seq_length, vocab)</code></p> <p>\uc774 \ucf54\ub4dc\ub294 \uc6d0\ub798 [4, 8, 2701] \ud615\ud0dc\uc758 logits\ub97c [32, 2701] \ud615\ud0dc\ub85c \ubcc0\uacbd\ud55c\ub2e4. \uc5ec\uae30\uc11c 32\ub294 4(batch) * 8(seq_length)\uc774\ub2e4. view \ud568\uc218\ub294 \ud150\uc11c\uc758 \ubaa8\uc591\uc744 \ubcc0\uacbd\ud558\ub294 \ud30c\uc774\ud1a0\uce58 \uba54\uc11c\ub4dc\ub85c \uc774\ub294 \ub9c8\uce58 \uac19\uc740 \ub370\uc774\ud130\ub97c \ub2e4\ub978 \ubc29\uc2dd\uc73c\ub85c \ubcf4\ub294 \uac83\ucc98\ub7fc \ub9cc\ub4dc\ub294 \ud6a8\uacfc\uac00 \uc788\ub2e4.</p> <p>\ub450 \ubc88\uc9f8\ub85c targets\uc758 shape\ub97c \ubcc0\uacbd\ud574 logits\uc640 \uc5f0\uc0b0\ub420 \uc218 \uc788\ub3c4\ub85d \ub9cc\ub4e0\ub2e4. <code>targets = targets.view(batch*seq_length)</code></p> <p>\uc774 \ucf54\ub4dc\ub294 \uc6d0\ub798 [4, 8] \ud615\ud0dc\uc758 targets\ub97c [32] \ud615\ud0dc\ub85c \ubcc0\uacbd\ud55c\ub2e4. \uc774\ub807\uac8c \uc218\uc815\ud558\uba74 \uc774\uc804\uc5d0 \ubc1c\uc0dd\ud588\ub358 shape \ubd88\uc77c\uce58 \uc5d0\ub7ec\uac00 \ud574\uacb0\ub418\uace0, \ubaa8\ub378\uc774 \uc815\uc0c1\uc801\uc73c\ub85c \uc190\uc2e4\uc744 \uacc4\uc0b0\ud560 \uc218 \uc788\uac8c \ub41c\ub2e4.</p> <p>\ud55c \uac00\uc9c0 \uad81\uae08\ud55c \uc810\uc740 \uc190\uc2e4\uac12\uc774 8.2693\uc73c\ub85c \ub098\uc628 \uc774\uc720\uc774\ub2e4. \uc774\ub97c \uc774\ud574\ud558\ub824\uba74 \uba3c\uc800 \uc815\ubcf4 \uc774\ub860\uc5d0 \ub300\ud55c \uae30\ubcf8\uc801\uc778 \uc774\ud574\uac00 \ud544\uc694\ud558\ub2e4. \uc815\ubcf4 \uc774\ub860\uc758 \ud575\uc2ec \uac1c\ub150 \uc911 \ud558\ub098\ub294 \uc815\ubcf4 \uc5d4\ud2b8\ub85c\ud53c\ub85c, \uc774\ub294 \uba54\uc2dc\uc9c0\uc5d0 \ud3ec\ud568\ub41c \uc815\ubcf4\uc758 \uc591\uc744 \uce21\uc815\ud55c\ub2e4. \uc774\ub7f0\ud55c \uc815\ubcf4 \uc774\ub860\uc5d0 \ub530\ub974\uba74, \uc774\ubca4\ud2b8\uc758 \uc815\ubcf4\ub7c9\uc740 \ud574\ub2f9 \uc774\ubca4\ud2b8 \ud655\ub960\uc758 \uc74c\uc758 \ub85c\uadf8\uac12\uc73c\ub85c \uc815\uc758\ub418\uace0, \uc774\ub294 \uc774\ubca4\ud2b8\uac00 \ubc1c\uc0dd \uac00\ub2a5\uc131\uc774 \ub0ae\uc744\uc218\ub85d \ub354 \ub9ce\uc740 \uc815\ubcf4\ub97c \ub2f4\uace0 \uc788\ub2e4\ub294 \uac1c\ub150\uc744 \ubc18\uc601\ud55c\ub2e4. \uc774\ubc88 \uc2e4\ud5d8\uc758 \uacbd\uc6b0, 2701\uac1c\uc758 \uac00\ub2a5\ud55c \uc5b4\ud718 \uc694\uc18c \uc911 \ud558\ub098\ub97c \uc815\ud655\ud788 \uc608\uce21\ud574\uc57c \ud558\ub294 \uc0c1\ud669\uc5d0\uc11c \uac01 \uc608\uce21\uc758 \ud655\ub960\uc740 1/2701\uc774\ub2e4.</p> <p>\ub530\ub77c\uc11c -ln(1/2701) = 7.901\uc774\ub77c\ub294 \uac12\uc740 \uc644\ubcbd\ud55c \uc608\uce21\uc744 \uc704\ud574 \ud544\uc694\ud55c \ucd5c\uc18c \uc815\ubcf4\ub7c9\uc744 \ub098\ud0c0\ub0b8\ub2e4. \uc2e4\uc81c \uc190\uc2e4\uac12 8.2693\uc774 \uc774 \uc774\ub860\uc801 \ucd5c\uc19f\uac12\ubcf4\ub2e4 \ub192\ub2e4\ub294 \uac83\uc740 \ubaa8\ub378\uc774 \uc644\ubcbd\ud558\uc9c0 \uc54a\uc73c\uba70, \uc77c\ubd80 \uc798\ubabb\ub41c \uc608\uce21\uc744 \ud55c\ub2e4\ub294 \uac83\uc744 \uc758\ubbf8\ud55c\ub2e4. \uc774 \ucc28\uc774\ub294 \ubaa8\ub378\uc758 \ud604\uc7ac \uc131\ub2a5\uacfc \uc774\uc0c1\uc801\uc778 \uc131\ub2a5 \uc0ac\uc774\uc758 \uaca9\ucc28\ub97c \ubcf4\uc5ec\uc8fc\uba70, \ucd94\uac00\uc801\uc778 \ud6c8\ub828\uc774\ub098 \uc870\uc815\uc744 \ud1b5\ud574 \uc131\ub2a5\uc744 \uac1c\uc120\ud560 \uc5ec\uc9c0\uac00 \uc788\uc74c\uc744 \uc54c\ub824\uc900\ub2e4.</p> <p>\uc774\ucc98\ub7fc \uc815\ubcf4 \uc774\ub860\uc758 \uac1c\ub150\uc744 \uc801\uc6a9\ud558\uba74 \ubaa8\ub378\uc774 \uc815\ubcf4\ub97c \ud559\uc2b5\ud558\uace0 \uc608\uce21 \ud6a8\uacfc\ub97c \uc218\ud559\uc801\uc73c\ub85c \ubd84\uc11d\ud560 \uc218 \uc788\ub2e4. \uadf8\ub7ec\ub098 \uc815\ubcf4 \uc774\ub860\uc5d0 \uadfc\uac70\ud574 \ud559\uc2b5\uc744 \uc218\ud589\ud558\ub354\ub77c\ub3c4 \uc6d0\ud558\ub294 \uc131\ub2a5\uc774 \ub098\uc624\uc9c0 \uc54a\uc744 \uc218 \uc788\ub2e4. \uc774\ub294 \uc778\uacf5\uc9c0\ub2a5\uc774 \ub2e8\uc21c\ud788 \uc815\ubcf4 \ucc98\ub9ac\uc758 \ubb38\uc81c\ub9cc\uc774 \uc544\ub2c8\ub77c \ubcf5\uc7a1\ud55c \uc694\uc18c\ub4e4\uc774 \uc0c1\ud638\uc791\uc6a9\ud558\ub294 \ub2e4\uce35\uc801 \ud559\ubb38\uc774\uae30 \ub54c\ubb38\uc774\ub2e4.</p>"},{"location":"ai/GPT%20%EB%AA%A8%EB%8D%B8%20%EB%A7%8C%EB%93%A4%EA%B8%B0%281%29/#generate","title":"generate \uba54\uc11c\ub4dc","text":"<p>\ub2e4\uc74c\uc73c\ub85c \ud559\uc2b5\ud55c \ubaa8\ub378\uc774 \uc608\uce21\ud55c \uae00\uc790\ub97c \uc0dd\uc131\ud558\uae30 \uc704\ud574 <code>generate</code> \uba54\uc11c\ub4dc\ub97c \ucd94\uac00\ud55c\ub2e4. \uc774 \uba54\uc11c\ub4dc\ub294 \ubaa8\ub378\uc774 \ud559\uc2b5\ud55c \ud328\ud134\uc744 \ubc14\ud0d5\uc73c\ub85c \uc0c8\ub85c\uc6b4 \ud14d\uc2a4\ud2b8\ub97c \uc0dd\uc131\ud55c\ub2e4. <code>generate</code> \uba54\uc11c\ub4dc\ub294 \uc785\ub825\ub41c \uc2dc\uc791 \ubb38\uc790\uc5f4\uc5d0 \uae30\ubc18\ud574 \uc5f0\uc18d\uc73c\ub85c \ub2e4\uc74c \uae00\uc790\ub97c \uc608\uce21\ud558\uace0 \ud14d\uc2a4\ud2b8\ub97c \uc0dd\uc131\ud55c\ub2e4.</p> <pre><code>import torch\nimport torch.nn\nfrom torch.nn import functional as F\n\nclass semiGPT(nn.Moudle):\n    def __init__(self, vocab_length):\n        super().__init__()\n        self.embedding_token_table == nn.Embedding(vocab_lengthm vocab_length)\n\n    def forward(self, inputs, targets):\n        logits = self.embedding_token_table(inputs)\n        batch, seq_length, vecab_length = logits.shape\n        logits = logits.view(batch * seq_length, vocab_length)\n        targets = targets.view(batch*seq_length)\n        loss = F.cross_entropy(logits, targets)\n        return logits, loss\n\n    def generate(self, inputs, max_new_tokens):\n        for _ in range(max_new_tokens):\n            logits, loss = self.forward(inputs)\n            logits = logits[:, -1, :]\n            print(logits.shape)\n            probs = F.softmax(logits, dim-1)\n            next_inputs = torch.multionmial(probs, num_samples=1)\n        return inputs\n\nmodel = semiGPT(ko_vocab_size)\noutputm loss = model(example_x, example_y)\n\ntoken_decode(model.generate(torch.zeros((1,1),\n                            dtype=torch.long),\n                            max_new_tokens=10)[0].tolist())\n</code></pre> <p>\uc2e4\ud589\uacb0\uacfc: \uc5ff\uc785\ube64\uc329\uc29d\ucc2e\ucc21\ud3ad</p> <p>\uba3c\uc800, <code>max_new_tokens</code> \ud69f\uc218\ub9cc\ud07c \ubc18\ubcf5\ubb38\uc744 \uc2e4\ud589\ud55c\ub2e4. \uac01 \ubc18\ubcf5\uc5d0\uc11c \ud604\uc7ac\uc758 <code>inputs</code> \ub97c forward\ub97c \ud1b5\uacfc\uc2dc\ucf1c logits\uc640 loss\ub97c \uc5bb\ub294\ub2e4. logits[:, -1, :]\uc744 \ud1b5\ud574 \uac00\uc7a5 \ucd5c\uadfc\uc5d0 \uc0dd\uc131\ub41c \ud1a0\ud070\uc5d0 \ub300\ud55c \ub85c\uc9d3\ub9cc\uc744 \uc120\ud0dd\ud55c\ub2e4.</p> <pre><code>import torch\n\nlogits = torch.tensor(\n    [\n        [\n            [0.1, 0.2, 0.3, 0.4],\n            [0.2, 0.3, 0.4, 0.1],\n            [0.3, 0.4, 0.1, 0.2]\n        ]\n    ]\n)\n\nresult = logits[:,-1,:]\nprint(\"\uc120\ud0dd\ub418\ub294 \uac12 : \", result)\nprint(\"\uacb0\uacfc\uc5d0 \ub300\ud55c size\uac12 : \", result.size())\n</code></pre> <p>\uc2e4\ud589\uacb0\uacfc:  \uc120\ud0dd\ub418\ub294 \uac12 : tensor(0.3000, 0.4000, 0.1000, 0.2000) \uacb0\uacfc\uc5d0 \ub300\ud55c size \uac12: torch.Size([1,4])</p> <p>\uc608\ub97c \ub4e4\uc5b4 \uc544\ub798\uc640 \uac19\uc740 <code>logits</code> \ud150\uc11c\uac00 \uc788\ub2e4\uace0 \ud569\uc2dc\ub2e4.</p> <pre><code>logits.shape = (batch_size=1, seq_len=3, vocab_size=4)\n</code></pre> <p>\uc774\uac74 \uc544\ub798\uc640 \uac19\uc740 \uc758\ubbf8\uc785\ub2c8\ub2e4.</p> <ul> <li> <p><code>batch_size=1</code>: \ud55c \ubc88\uc5d0 \ud558\ub098\uc758 \ubb38\uc7a5\uc744 \uc0dd\uc131 \uc911</p> </li> <li> <p><code>seq_len=3</code>: \uc9c0\uae08\uae4c\uc9c0 \ucd1d 3\uac1c\uc758 \ud1a0\ud070\uc744 \uc608\uce21\ud568</p> </li> <li> <p><code>vocab_size=4</code>: \uc804\uccb4 \uc5b4\ud718(\ub2e8\uc5b4 \ud639\uc740 \ubb38\uc790)\uac00 4\uac1c\uc774\uace0, \uac01\uac01\uc758 \ud1a0\ud070\uc5d0 \ub300\ud574 4\uac1c\uc758 \ub85c\uc9d3 \uac12(\ub2e4\uc74c \ub2e8\uc5b4\uc77c \ud655\ub960 \uc810\uc218 \ud6c4\ubcf4)\uc774 \uc788\uc74c</p> </li> </ul> <p>\uadf8\ub798\uc11c logits[:, -1, :] \uc740 \ubb34\uc5c7\uc778\uac00?</p> <pre><code>logits[:, -1, :]\n</code></pre> <p>\uc774 \uc758\ubbf8\ub294 \"\uac01 \ubc30\uce58\uc758 \ub9c8\uc9c0\ub9c9 \ud1a0\ud070\uc5d0 \ub300\ud55c \uc608\uce21 \ub85c\uc9d3\ub9cc \ubf51\uaca0\ub2e4\" \ub294 \ub73b\uc774\ub2e4.</p> <ul> <li> <p><code>:</code>: \ubaa8\ub4e0 \ubc30\uce58 \uc120\ud0dd (\uc5ec\uae30\uc120 \ud558\ub098\ub2c8\uae4c 0\ubc88\uc9f8 \ubc30\uce58)</p> </li> <li> <p><code>-1</code>: \uc2dc\ud000\uc2a4(\ubb38\uc7a5) \uc911 \ub9c8\uc9c0\ub9c9 \ud1a0\ud070 \uc120\ud0dd</p> </li> <li> <p><code>:</code>: \uadf8 \ud1a0\ud070\uc5d0 \ub300\ud55c \uc804\uccb4 \ub85c\uc9d3 (\uc5b4\ud718 \uac1c\uc218\ub9cc\ud07c) \uc120\ud0dd</p> </li> </ul> <p>\uc989, \uac00\uc7a5 \ub9c8\uc9c0\ub9c9 \ud1a0\ud070 \uc704\uce58\uc5d0\uc11c, \ub2e4\uc74c \ud1a0\ud070\uc774 \ubb34\uc5c7\uc77c\uc9c0\uc5d0 \ub300\ud55c \uc608\uce21 \ud655\ub960\uc744 \ubcf4\uace0 \uc2f6\uc5b4\uc11c \uc774 \ubd80\ubd84\uc744 \ubf51\ub294 \uac83\uc774\ub2e4.</p> <p>\uc65c \ub9c8\uc9c0\ub9c9 \ud1a0\ud070\ub9cc \uc4f0\ub294 \uac78\uae4c?</p> <p><code>generate()</code> \ud568\uc218\ub294 \ud604\uc7ac\uae4c\uc9c0 \uc785\ub825\ub41c \ubb38\uc7a5\uc744 \uae30\ubc18\uc73c\ub85c \ub2e4\uc74c \uae00\uc790 \ud558\ub098\ub97c \uc0dd\uc131\ud558\ub294 \uacfc\uc815\uc774\ub2e4.</p> <pre><code>\uc785\ub825 = \"\uc548\ub155\"\n</code></pre> <p>\uc608\ub97c \ub4e4\uc5b4,  <code>\uc548</code>, <code>\ub155</code> \uac01\uac01\uc758 \uc704\uce58\uc5d0 \ub300\ud574 \ub2e4\uc74c \uae00\uc790\ub97c \uc608\uce21\ud558\uc9c0\ub9cc, \uc6b0\ub9ac\ub294 \ub9c8\uc9c0\ub9c9 \uae00\uc790\uc778 <code>\"\ub155\"</code> \ub4a4\uc5d0 \uc5b4\ub5a4 \uae00\uc790\uac00 \ub098\uc62c\uc9c0\ub97c \uc54c\uace0 \uc2f6\ub2e4.</p> <p>\uadf8\ub798\uc11c \uc804\uccb4 \ub85c\uc9d3 \uc911 \ub9c8\uc9c0\ub9c9 \uae00\uc790\uc758 \ub85c\uc9d3\ub9cc \ucd94\ucd9c\ud574\uc11c</p> <pre><code>logits = logits[:, -1, :]  # =&gt; (batch, vocab_size)\n</code></pre> <p>\uc774\uac78 softmax \ud6c4 multinomial sampling\uc744 \ud1b5\ud574 \ub2e4\uc74c \uae00\uc790 \ud558\ub098\ub97c \uc0d8\ud50c\ub9c1\ud569\ub2c8\ub2e4.</p> <p>\uc694\uc57d\ud558\uc790\uba74 <code>logits[:, -1, :]</code>\ub294 \uc9c0\uae08\uae4c\uc9c0 \uc0dd\uc131\ub41c \ubb38\uc7a5 \uc911 \ub9c8\uc9c0\ub9c9 \uae00\uc790 \uc704\uce58\uc5d0\uc11c, \ub2e4\uc74c\uc5d0 \uc5b4\ub5a4 \uae00\uc790\uac00 \ub098\uc62c\uc9c0 \uc608\uce21\ud55c \ud655\ub960 \uac12(logits)\uc744 \ubf51\uae30 \uc704\ud55c \uc5f0\uc0b0\uc785\ub2c8\ub2e4.</p> <p>\ud544\uc694\ud558\ub2e4\uba74 \uc774\uac78 \uae30\ubc18\uc73c\ub85c softmax \u2192 \uc0d8\ud50c\ub9c1 \u2192 \uc0c8 \ud1a0\ud070 \uc0dd\uc131 \u2192 \uc774\uc5b4 \ubd99\uc774\uae30\ub97c \ubc18\ubcf5\ud569\ub2c8\ub2e4.</p>"},{"location":"ai/GPT%20%EB%AA%A8%EB%8D%B8%20%EB%A7%8C%EB%93%A4%EA%B8%B0%281%29/#optimizer","title":"Optimizer \ucd94\uac00\ud558\uae30","text":"<p>\ubaa8\ub378 \ud6c8\ub828 \uc2dc \uc190\uc2e4 \ud568\uc218\ub97c \uc774\uc6a9\ud574 \ubaa8\ub378\uc758 \uc608\uce21 \uac12\uacfc \uc2e4\uc81c \uc815\ub2f5 \ub370\uc774\ud130 \uc0ac\uc774\uc758 \ucc28\uc774(\uc190\uc2e4)\ub97c \uacc4\uc0b0\ud558\uace0, \uc774 \uc190\uc2e4\uc744 \ucd5c\uc18c\ud654\ud558\uae30 \uc704\ud574 \ubaa8\ub378\uc758 \ub9e4\uac1c\ubcc0\uc218\ub97c \uc801\uc808\ud558\uac8c \uc870\uc815\ud55c\ub2e4. \uc635\ud2f0\ub9c8\uc774\uc800\ub294 \uc774 \ub9e4\uac1c\ubcc0\uc218 \uc870\uc815 \uacfc\uc815\uc744 \ub2f4\ub2f9\ud574 \ubaa8\ub378\uc774 \ub354 \uc815\ud655\ud55c \uc608\uce21\uc744 \ud560 \uc218 \uc788\ub3c4\ub85d \ub0b4\ubd80 \uad6c\uc870\ub97c \uc9c0\uc18d\uc801\uc73c\ub85c \uac1c\uc120\ud55c\ub2e4. \uc774\ub7ec\ud55c \uacfc\uc815\uc744 \ud1b5\ud574 \ubaa8\ub378\uc740 \uc8fc\uc5b4\uc9c4 \ub370\uc774\ud130\uc5d0 \ub300\ud574 \ub354 \ub098\uc740 \uc131\ub2a5\uc744 \ubcf4\uc774\uac8c \ub41c\ub2e4.</p> <pre><code>learning_rate = 1e-2\nmodel = semiGPT(ko_vocab_size)\noptimizer = torch.optim.AdamW(model.parameter(), lr=learning_rate)\n</code></pre> <p>\ubaa8\ub378\uc758 \ud559\uc2b5\uc744 \uc704\ud574 \ud559\uc2b5\ub960\uc740 1e-2\ub85c \uc815\ud558\uace0, \uc635\ud2f0\ub9c8\uc774\uc800\ub85c AdamW\ub97c \uc0ac\uc6a9\ud55c\ub2e4. AdamW\ub294 Adam\uc774\ub77c\ub294 \uae30\uc874 \uc635\ud2f0\ub9c8\uc774\uc800\ub97c \uac1c\uc120\ud55c \ubc84\uc804\uc774\ub2e4. \uc774 \uc635\ud2f0\ub9c8\uc774\uc800\uc758 \uc8fc\uc694 \ud2b9\uc9d5\uc740 \uac00\uc911\uce58 \uac10\uc1e0\ub77c\ub294 \uae30\ubc95\uc744 \ub354 \ud6a8\uacfc\uc801\uc73c\ub85c \uc0ac\uc6a9\ud55c\ub2e4\ub294 \uc810\uc774\ub2e4. \uac00\uc911\uce58 \uac10\uc1e0\ub294 \ubaa8\ub378\uc774 \ud6c8\ub828 \ub370\uc774\ud130\uc5d0 \uacfc\ub3c4\ud558\uac8c \ub9de\ucdb0\uc9c0\ub294 \uac83\uc744 \ubc29\uc9c0\ud558\uace0, \uc77c\ubc18\ud654 \ub2a5\ub825\uc744 \ud5a5\uc0c1\uc2dc\ud0a4\ub294 \ub370 \ub3c4\uc6c0\uc744 \uc900\ub2e4.</p> <p><code>torch.optim.AdamW(model.parameter(), lr=learning_rate)</code> \ucf54\ub4dc\ub294 \ud30c\uc774\ud1a0\uce58\uc5d0\uc11c AdamW \uc635\ud2f0\ub9c8\uc774\uc800\ub97c \uc0dd\uc131\ud558\ub294 \ubd80\ubd84\uc774\ub2e4.</p> <ul> <li>torch.optim\uc740 \ud30c\uc774\ud1a0\uce58\uc758 \ucd5c\uc801\ud654 \uc54c\uace0\ub9ac\uc998 \ubaa8\ub4c8\uc774\ub2e4. \uc774 \ubaa8\ub4c8\uc5d0\ub294 \ub2e4\uc591\ud55c \uc635\ud2f0\ub9c8\uc774\uc800\uac00 \ud3ec\ud568\ub418\uc5b4 \uc788\ub2e4.</li> <li>AdamW\ub294 Adam \uc635\ud2f0\ub9c8\uc774\uc800\uc758 \ubcc0\ud615\uc73c\ub85c, \uac00\uc911\uce58 \uac10\uc1e0(weghit decay)\ub97c \ub354 \ud6a8\uacfc\uc801\uc73c\ub85c \ucc98\ub9ac\ud55c\ub2e4. Adam\uc740 \uc801\uc751\ud615 \ud559\uc2b5\ub960\uc744 \uc0ac\uc6a9\ud558\ub294 \ucd5c\uc801\ud654 \uc54c\uace0\ub9ac\uc998\uc774\ub2e4.</li> <li><code>model.parameters()</code> \ub294 \ucd5c\uc801\ud654\ud560 \ubaa8\ub378\uc758 \ub9e4\uac1c\ubcc0\uc218\ub97c \uc9c0\uc815\ud55c\ub2e4. \uc774 \uba54\uc11c\ub4dc\ub294 \ubaa8\ub378\uc758 \ubaa8\ub4e0 \ud559\uc2b5 \uac00\ub2a5\ud55c \ub9e4\uac1c\ubcc0\uc218\ub97c \ubc18\ud658\ud558\ub2e4.</li> <li><code>lr=learning_rate</code> \ub294 \ud559\uc2b5\ub960\uc744 \uc124\uc815\ud55c\ub2e4. \ud559\uc2b5\ub960\uc740 \uac01 \ubc18\ubcf5\uc5d0\uc11c \ub9e4\uac1c\ubcc0\uc218\ub97c \uc5bc\ub9c8\ub098 \ud06c\uae30 \uc5c5\ub370\uc774\ud2b8\ud560\uc9c0 \uacb0\uc815\ud558\ub294 \uc911\uc694\ud55c \ud558\uc774\ud37c\ud30c\ub77c\ubbf8\ud130\uc774\ub2e4.</li> </ul> <p>\ud574\ub2f9 \ucf54\ub4dc\ub97c \uc2e4\ud589\ud558\uba74, \ud559\uc2b5 \uacfc\uc815\uc5d0\uc11c \uc774 \uc635\ud2f0\ub9c8\uc774\uc800\ub97c \uc0ac\uc6a9\ud574 \ubaa8\ub378\uc758 \uac00\uc911\uce58\ub97c \uc5c5\ub370\uc774\ud2b8\ud558\uace0 \uc190\uc2e4\uc744 \ucd5c\uc18c\ud654\ud558\ub294 \ubc29\ud5a5\uc73c\ub85c \ud559\uc2b5\uc744 \uc9c4\ud589\ud55c\ub2e4.</p> <pre><code>from tqdm.auto import tqdm\n\nbatch_size = 32\n\nfor steps in tqdm(range(10000)):\n    example_x, example_y = batch_function(\"train\")\n    logits, loss = model(example_x, example_y)\n    # \uc635\ud2f0\ub9c8\uc774\uc800 \ucd08\uae30\ud654\n    optimizer.zero_grad(set_to_none=True)\n    # \uc5ed\uc804\ud30c \uacc4\uc0b0\n    loss.backward()\n    # \uac00\uc911\uce58 \uc5c5\ub370\uc774\ud2b8\n    optimizer.step()\n\nprint(loss.item())\n</code></pre> <p>\uc2e4\ud589\uacb0\uacfc: 3.477691411972046</p> <p>\uba3c\uc800 \ubc30\uce58 \ud06c\uae30\ub97c 32\ub85c \uc124\uc815\ud55c\ub2e4. \uadf8 \ub2e4\uc74c \uac01 \ubc18\ubcf5\ub9c8\ub2e4 \ud559\uc2b5 \ub370\uc774\ud130\uc5d0\uc11c \ubc30\uce58\ub97c \uac00\uc838\uc640 \ubaa8\ub378\uc5d0 \uc785\ub825\ud55c\ub2e4. \ubaa8\ub378\uc740 \uc774 \uc785\ub825\uc744 \ucc98\ub9ac\ud574 \uc608\uce21\uac12(logits)\uacfc \uc190\uc2e4\uac12(loss)\uc744 \uacc4\uc0b0\ud55c\ub2e4.</p> <p>\uc635\ud2f0\ub9c8\uc774\uc800\uac00 \uc815\ud574\uc9c0\uba74 \uac00\uc911\uce58\ub97c \uc5c5\ub370\uc774\ud2b8\ud558\uae30 \uc704\ud574 \uc138 \uac00\uc9c0 \uc911\uc694\ud55c \ub2e8\uacc4\ub97c \uac70\uce5c\ub2e4.</p> <ul> <li>\uc635\ud2f0\ub9c8\uc774\uc800 \ucd08\uae30\ud654: <code>optimizer.zero_grad(set_to_none=True)</code> \ub97c \uc0ac\uc6a9\ud574 \uc635\ud2f0\ub9c8\uc774\uc800\uc758 \uadf8\ub808\uc774\ub514\uc5b8\ud2b8 \ubc84\ud37c\ub97c \ucd08\uae30\ud654\ud55c\ub2e4. \uc774\ub294 \uc0c8\ub85c\uc6b4 \ubc30\uce58 \ucc98\ub9ac \uc804 \uc774\uc804 \uadf8\ub808\uc774\ub514\uc5b8\ud2b8\uc758 \uc601\ud5a5\uc744 \uc81c\uac70\ud558\uae30 \uc704\ud568\uc774\ub2e4.</li> <li>\uc5ed\uc804\ud30c \uacc4\uc0b0: <code>loss_backward()</code> \ub97c \ud1b5\ud574 \uc190\uc2e4 \ud568\uc218\uc758 \uadf8\ub808\uc774\ub514\uc5b8\ud2b8\ub97c \uacc4\uc0b0\ud55c\ub2e4. \uc774 \uacfc\uc815\uc5d0\uc11c \ubaa8\ub378\uc758 \uac01 \uac00\uc911\uce58\uc5d0 \ub300\ud55c \uc190\uc2e4 \ud568\uc218\uc758 \ubcc0\ud654\uc728\uc744 \uad6c\ud55c\ub2e4.</li> <li>\uac00\uc911\uce58 \uc5c5\ub370\uc774\ud2b8: <code>optimizer.step()</code>\uc744 \uc0ac\uc6a9\ud574 \uacc4\uc0b0\ub41c \uadf8\ub808\uc774\ub514\uc5b8\ud2b8\ub97c \ubc14\ud0d5\uc73c\ub85c \ubaa8\ub378\uc758 \uac00\uc911\uce58\ub97c \uc2e4\uc81c\ub85c \uc5c5\ub370\uc774\ud2b8\ud55c\ub2e4.</li> </ul> <p>\ub9c8\uc9c0\ub9c9\uc73c\ub85c, \ud604\uc7ac \ubc18\ubcf5\uc5d0\uc11c\uc758 \uc190\uc2e4\uac12\uc744 \ucd9c\ub825\ud55c\ub2e4. \uc774 \uacfc\uc815\uc744 \ud1b5\ud574 \ubaa8\ub378\uc740 \uc810\uc9c4\uc801\uc73c\ub85c \ud559\uc2b5 \ub370\uc774\ud130\uc5d0 \ub9de\ucdb0 \uac1c\uc120\ub418\uba70, \ud2b9\uc815 \uc791\uc5c5\uc774\ub098 \ub3c4\uba54\uc778\uc5d0 \ub354\uc6b1 \uc801\ud569\ud55c \uc131\ub2a5\uc744 \ubcf4\uc774\uac8c \ub41c\ub2e4.</p> <p>\uc635\ud2f0\ub9c8\uc774\uc800 \ucd94\uac00 \uc804 \uc0dd\uc131 \uacb0\uacfc: \uc5ff\uc785\ube64\uc329\uc29d\ucc2e\ucc21\ud3ad</p> <p>\uc635\ud2f0\ub9c8\uc774\uc800 \ucd94\uac00 \ud6c4 \uc0dd\uc131 \uacb0\uacfc: \ud611\ub825\uc5d0 \uc624\ub97c \uac83\uc774</p> <p>\uc635\ud2f0\ub9c8\uc774\uc800\ub97c \ucd94\uac00\ud55c \ud6c4 \uc0dd\uc131\ub41c \uacb0\uacfc\ub294 \"\ud611\ub825\uc5d0 \uc624\ub97c \uac83\uc774\"\ub77c\ub294 \ud55c\uad6d\uc5b4 \ubb38\uc7a5\uc758 \uc77c\ubd80\ubd84\uc774 \uc0dd\uc131\ub418\uc5c8\ub2e4. \uc774\ub294 \uc635\ud2f0\ub9c8\uc774\uc800\uac00 \ubaa8\ub378\uc758 \ud559\uc2b5 \uacfc\uc815\uc744 \ud6a8\uacfc\uc801\uc73c\ub85c \uac1c\uc120\ud574 \ub354 \uc790\uc5f0\uc2a4\ub7ec\uc6b4 \ud14d\uc2a4\ud2b8\ub97c \uc0dd\uc131\ud560 \uc218 \uc788\uac8c \ub9cc\ub4e4\uc5c8\uc74c\uc744 \ubcf4\uc5ec\uc900\ub2e4.</p>"},{"location":"ai/GPT%20%EB%AA%A8%EB%8D%B8%20%EB%A7%8C%EB%93%A4%EA%B8%B0%281%29/#gpu","title":"\ub370\uc774\ud130\ub97c GPU\ub85c \uc804\ub2ec\ud558\uae30","text":"<p>\uc9c0\uae08\uae4c\uc9c0\ub294 CPU\ub85c \ud559\uc2b5\ud588\ub294\ub370, \uc774\uc81c GPU\ub97c \uc774\uc6a9\ud574 \ud559\uc2b5\ud574 \ubcf4\uaca0\ub2e4. GPU\ub97c \uc774\uc6a9\ud574 \ud559\uc2b5\ud558\ub824\uba74 \ub370\uc774\ud130\uc640 \ubaa8\ub378\uc744 \ubc18\ub4dc\uc2dc GPU\ub85c \uc804\uc1a1\ud574\uc57c \ud55c\ub2e4. \uc774\ub97c \uc704\ud574 \ud30c\uc774\ud1a0\uce58\uc5d0\uc11c\ub294 <code>to</code> \uba54\uc11c\ub4dc\ub97c \uc81c\uacf5\ud55c\ub2e4. <code>to(device)</code> \uba85\ub839\uc5b4\ub97c \uc0ac\uc6a9\ud558\uba74 \ub370\uc774\ud130\uc640 \ubaa8\ub378\uc744 \uac04\ud3b8\ud558\uac8c GPU\ub85c \uc804\uc1a1\ud574 GPU \uc5f0\uc0b0\uc744 \uc218\ud589\ud560 \uc218 \uc788\ub2e4. \uba3c\uc800 \ub2e4\uc74c\uc740 <code>device</code> \ubcc0\uc218\ub97c \uc124\uc815\ud558\uace0, \uc774\ub97c \ud1b5\ud574 \ub370\uc774\ud130\uc640 \ubaa8\ub378\uc744 GPU\ub85c \uc774\ub3d9\ud558\ub294 \uacfc\uc815\uc774\ub2e4.</p> <pre><code>device = \"cuda\" if torch.cuda.is_available() else \"cpu\"\n</code></pre> <p><code>torch.cuda.is_available()</code> \ud568\uc218\ub97c \uc0ac\uc6a9\ud574 \ud604\uc7ac \uc2e4\ud589 \ud658\uacbd\uc5d0\uc11c CUDA \uc0ac\uc6a9 \uac00\ub2a5 \uc5ec\ubd80\ub97c \ud655\uc778\ud55c\ub2e4. CUDA\ub294 \uc5d4\ube44\ub514\uc544\uc758 GPU\ub97c \ud65c\uc6a9\ud574 \ub525\ub7ec\ub2dd \uc5f0\uc0b0\uc744 \uac00\uc18d\ud654\ud558\ub294 \ud234\ud0b7(toolkit)\uc774\ub2e4. \uc774 \uae30\ub2a5\uc744 \ud1b5\ud574 GPU\uc758 \uac15\ub825\ud55c \ubcd1\ub82c \ucc98\ub9ac \ub2a5\ub825\uc744 \ud65c\uc6a9\ud574 \ub525\ub7ec\ub2dd \ubaa8\ub378\uc758 \ud559\uc2b5 \uc18d\ub3c4\ub97c \ud06c\uac8c \ud5a5\uc0c1 \uc2dc\ud0ac \uc218 \uc788\ub2e4.</p> <pre><code>def batch_function(mode):\n    dataset = train_dataset if mode == \"train\" else test_dataset\n    idx = torch.randint(len(dataset) - block_size, (batch_size,))\n    x = torch.stack([dataset[index:index+block_size] for index in idx])\n    y = torch.stack([dataset[index+1:index+block_size+1] for index in idx])\n    x, y = x.to(device), y.to(device)\n    return x, y\n</code></pre> <p>\uc55e\uc11c \uc900\ube44\ud55c <code>batch_function</code> \ud568\uc218\uc5d0 CUDA\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \ud658\uacbd\uc5d0\uc11c GPU\ub97c \ud65c\uc6a9\ud574 \uc5f0\uc0b0\uc744 \uc218\ud589\ud558\ub3c4\ub85d \uc218\uc815\ud55c\ub2e4. \uc774\ub97c \uc704\ud574 \uc785\ub825 \ub370\uc774\ud130 (x)\uc640 \ubaa9\ud45c \ub370\uc774\ud130 (y)\ub97c \ub3d9\uc2dc\uc5d0 <code>device</code>\ub85c \uc774\ub3d9\ud55c\ub2e4. CUDA \ud658\uacbd\uc774 \uc900\ube44\ub3fc \uc788\ub2e4\uba74 \uc774\ub7ec\ud55c \ubc29\uc2dd\uc73c\ub85c \ub370\uc774\ud130\ub97c GPU\ub85c \uc804\uc1a1\ud574 \ucc98\ub9ac \uc18d\ub3c4\ub97c \ud06c\uac8c \ud5a5\uc0c1\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"ai/GPT%20%EB%AA%A8%EB%8D%B8%20%EB%A7%8C%EB%93%A4%EA%B8%B0%281%29/#loss","title":"Loss \ud568\uc218 \ub9cc\ub4e4\uae30","text":"<p>\ub2e4\uc74c\uc740 <code>calculate_loss</code> \ud568\uc218\uc774\ub2e4. \ubaa8\ub378\uc774 \uc81c\ub300\ub85c \ud559\uc2b5\ud558\uace0 \uc788\ub294\uc9c0 \ud655\uc778\ud558\uae30 \uc704\ud574 \uc774 \ud568\uc218\ub97c \ub9cc\ub4e4\uc5b4 \uc911\uac04\uc911\uac04 \ud3c9\uac00\ud574 \ubcf4\uaca0\ub2e4.</p> <pre><code>@torch.no_grad()\ndef compute_loss_metrics():\n    out = {}\n    model.eval()\n    for mode in [\"train\", \"eval\"]:\n        losses = torch.zeros(eval_iteration)\n        for k in range(eval_iteration):\n            inputs, targets = batch_function(mode)\n            logits, loss = model(inputs, targets)\n            losses[k] = loss.item()\n        out[mode] = losses.mean()\n    model.train()\n    return out\n</code></pre> <p><code>@torch.no_grad()</code> \ub370\ucf54\ub808\uc774\ud130\ub294 \ud30c\uc774\ud1a0\uce58\uc5d0\uc11c \uc911\uc694\ud55c \uae30\ub2a5\uc744 \uc218\ud589\ud55c\ub2e4. \uc774 \ub370\ucf54\ub808\uc774\ud130\ub97c \ud568\uc218 \uc704\uc5d0 \ubd99\uc774\uba74 \ud574\ub2f9 \ud568\uc218 \ub0b4\uc5d0\uc11c \uc774\ub904\uc9c0\ub294 \ubaa8\ub4e0 \uc5f0\uc0b0\uc5d0 \ub300\ud574 \uadf8\ub808\uc774\ub514\uc5b8\ud2b8 \uacc4\uc0b0\uc744 \uc790\ub3d9\uc73c\ub85c \ube44\ud65c\uc131\ud654\ud55c\ub2e4.</p> <p>\uc77c\ubc18\uc801\uc73c\ub85c \ub525\ub7ec\ub2dd \ubaa8\ub378\uc744 \ud559\uc2b5\ud560 \ub54c\ub294 \uc5ed\uc804\ud30c(backpropagation)\ub97c \ud1b5\ud574 \uadf8\ub808\uc774\ub514\uc5b8\ud2b8\ub97c \uacc4\uc0b0\ud558\uace0, \uc774\ub97c \ubc14\ud0d5\uc73c\ub85c \ubaa8\ub378\uc758 \uac00\uc911\uce58\ub97c \uc5c5\ub370\uc774\ud2b8\ud55c\ub2e4. \ud558\uc9c0\ub9cc \ubaa8\ub378\uc744 \ud3c9\uac00\ud558\ub294 \ub2e8\uacc4\uc5d0\uc11c\ub294 \uc774\ub7ec\ud55c \uadf8\ub808\uc774\ub514\uc5b8\ud2b8 \uacc4\uc0b0\uacfc \uac00\uc911\uce58 \uc5c5\ub370\uc774\ud2b8\uac00 \ud544\uc694\ud558\uc9c0 \uc54a\ub294\ub2e4.</p> <p>\uadf8\ub808\uc774\ub514\uc5b8\ud2b8 \uacc4\uc0b0\uc744 \ube44\ud65c\uc131\ud654\ud558\uba74,  1. \uadf8\ub808\uc774\ub514\uc5b8\ud2b8 \uc815\ubcf4\ub97c \uc800\uc7a5\ud560 \ud544\uc694\uac00 \uc5c6\uc5b4 \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9\uc774 \uc904\uc5b4\ub4e0\ub2e4. 2. \uadf8\ub808\uc774\ub514\uc5b8\ud2b8 \uacc4\uc0b0 \uacfc\uc815\uc774 \uc0dd\ub7b5\ub418\ubbc0\ub85c \uc804\uccb4\uc801\uc73c\ub85c \uacc4\uc0b0 \uc18d\ub3c4\uac00 \ube68\ub77c\uc9c4\ub2e4.</p> <p>\uadf8 \ub2e4\uc74c <code>model.eval()</code> \uba85\ub839\uc740 \uc2e0\uacbd\ub9dd \ubaa8\ub378\uc744 \ud3c9\uac00 \ubaa8\ub4dc\ub85c \uc804\ud658\ud558\ub294 \uc911\uc694\ud55c \ub2e8\uacc4\uc774\ub2e4. \uc774 \uc124\uc815\uc740 \ubaa8\ub378\uc758 \ud2b9\uc815 \ub808\uc774\uc5b4\ub4e4\uc774 \ud559\uc2b5 \uacfc\uc815\uacfc \ud3c9\uac00 \uacfc\uc815\uc5d0\uc11c \ub2e4\ub974\uac8c \uc791\ub3d9\ud574\uc57c \ud560 \ub54c \ud544\uc218\uc801\uc774\ub2e4.</p> <p>\uc608\ub97c \ub4e4\uc5b4, \ub4dc\ub86d\uc544\uc6c3(Dropout) \ub808\uc774\uc5b4\ub294 \ud559\uc2b5 \uc911\uc5d0\ub294 \ubb34\uc791\uc704\ub85c \uc77c\ubd80 \ub274\ub7f0\uc744 \ube44\ud65c\uc131\ud654\ud574 \uacfc\uc801\ud569\uc744 \ubc29\uc9c0\ud55c\ub2e4. \ud558\uc9c0\ub9cc \ud3c9\uac00 \uc2dc\uc5d0\ub294 \ubaa8\ub4e0 \ub274\ub7f0\uc744 \uc0ac\uc6a9\ud574\uc57c \ub354 \uc548\uc815\uc801\uc778 \uc608\uce21\uc774 \uac00\ub2a5\ud558\ub2e4. <code>eval()</code> \ubaa8\ub4dc\uc5d0\uc11c\ub294 \ub4dc\ub86d\uc544\uc6c3\uc774 \uc790\ub3d9\uc73c\ub85c \ube44\ud65c\uc131\ud654\ub41c\ub2e4.</p> <p>\ub610\ud55c, <code>model.eval()</code> \uc740 \ubc30\uce58 \uc815\uaddc\ud654 \ub808\uc774\uc5b4\ub3c4 \ud559\uc2b5\uacfc \ud3c9\uac00 \uc2dc \ub2e4\ub974\uac8c \uc791\ub3d9\ud574\uc57c \ud55c\ub2e4. \ud559\uc2b5 \uc911\uc5d0\ub294 \ud1b5\uacc4\ub97c \uc0ac\uc6a9\ud558\uc9c0\ub9cc, \ud3c9\uac00 \uc2dc\uc5d0\ub294 \uc804\uccb4 \ub370\uc774\ud130\uc14b\uc5d0\uc11c \uacc4\uc0b0\ub41c \ub204\uc801 \ud1b5\uacc4\ub97c \uc0ac\uc6a9\ud55c\ub2e4. <code>eval()</code> \ubaa8\ub4dc\ub294 \uc774\ub7ec\ud55c \uc804\ud658\uc744 \uc790\ub3d9\uc73c\ub85c \ucc98\ub9ac \ud55c\ub2e4.</p> <p>\uadf8 \ub2e4\uc74c, train\uacfc eval \ub450 \uac00\uc9c0 \ubaa8\ub4dc\uc5d0 \ub300\ud574 \ubc18\ubcf5\ud55c\ub2e4. \uac01 \ubaa8\ub4dc\uc5d0\uc11c eval_iteration \ud69f\uc218\ub9cc\ud07c \ubc18\ubcf5\ud558\uba70 \uc190\uc2e4\uc744 \uacc4\uc0b0\ud55c\ub2e4. <code>batch_function(mode)</code> \ud568\uc218\ub85c \ub370\uc774\ud130 \ubc30\uce58\ub97c \uac00\uc838\uc624\uace0, <code>model(inputs, targets)</code> \ub85c \ub85c\uc9d3\uacfc \uc190\uc2e4\uc744 \uacc4\uc0b0\ud55c\ub2e4. \uacc4\uc0b0\ub41c \uc190\uc2e4\uc740 losses \ud150\uc11c\uc5d0 \uc800\uc7a5\ud55c\ub2e4. \uac01 \ubaa8\ub4dc\uc5d0\uc11c \uacc4\uc0b0\ub41c \uc190\uc2e4\ub4e4\uc758 \ud3c9\uade0\uc744 \uad6c\ud574 <code>out</code> \ub515\uc154\ub7ec\ub9ac\uc5d0 \uc800\uc7a5\ud55c\ub2e4. \uc774 \ud3c9\uade0 \uc190\uc2e4\uc740 \uac01 \ubaa8\ub4dc\uc5d0\uc11c \ubaa8\ub378 \uc131\ub2a5\uc744 \ub098\ud0c0\ub0b4\ub294 \uc9c0\ud45c\ub85c \uc0ac\uc6a9\ub41c\ub2e4.</p> <p>\ud559\uc2b5 \uc911\uac04\uc911\uac04 \uc2e4\ud589\ub418\ub294 <code>comput_loss_metrics</code> \ud568\uc218\uc758 \uc2e4\ud589\uc774 \ub05d\ub098\uba74 <code>model.train()</code> \uc73c\ub85c \ubaa8\ub378\uc744 \ub2e4\uc2dc \ud6c8\ub828 \ubaa8\ub4dc\ub85c \uc804\ud658\ud574 \uc774\ud6c4 \ubaa8\ub378\uc744 \uacc4\uc18d \ud6c8\ub828\ud560 \uc218 \uc788\ub3c4\ub85d \uc124\uc815\ud55c\ub2e4. \ub9c8\uc9c0\ub9c9\uc73c\ub85c, train\uacfc eval \ubaa8\ub4dc\uc758 \ud3c9\uade0 \uc190\uc2e4\uac12\uc744 \ud3ec\ud568\ud55c out \ub515\uc154\ub7ec\ub9ac\ub97c \ubc18\ud658\ud55c\ub2e4. \uc774 \ub515\uc154\ub108\ub9ac\ub294 \ubaa8\ub378\uc758 \ud604\uc7ac \ud559\uc2b5 \uc0c1\ud0dc\ub97c \ud3c9\uac00\ud558\ub294 \ub370 \uc0ac\uc6a9\ub418\uba70, \ud6c8\ub828\uacfc \ud3c9\uac00 \ub370\uc774\ud130 \ubaa8\ub450\uc5d0 \ub300\ud55c \ubaa8\ub378\uc758 \uc131\ub2a5\uc744 \ud55c\ub208\uc5d0 \ubcfc \uc218 \uc788\uac8c \ud574\uc900\ub2e4.</p> <pre><code>for step in range(max_iteration):\n    if step % eval_interval == 0:\n        losses = compute_loss_metrics()\n        print(f'step : {step}, train loss : {losses[\"train\"]: .4f}, val loss : {losses[\"eval\"]: .4f}')\n\n    example_x, example_y = batch_function(\"train\")\n    logits, loss = model(example_x, example_y)\n    optimizer.zero_grad(set_to_none=True)\n    loss.backward()\n    optimizer.step()\n\n\ninputs = torch.zeros((1,1), dtype=toch.long, device=device)\nprint(token_decode(model.generate(inputs, max_new_tokens=100)[0].tolist()))\n</code></pre> <p>\uc2e4\ud589\uacb0\uacfc: step: 49500, train loss : 3.3963, val loss : 3.4179 step: 49800, train loss : 3.3909, val loss : 3.4089 \ub4f1 \uc628 \ucc28\ub4f1 \uc77c\ubd80\ud68c\uc0ac\uc5c5\uc774\ub2e4. 9%\ub85c\ub098 \uccab \uad6d\ubbfc \uc11c \ubc31 \uad50\uc12d5\uc6d4\ub9d0\ud588\ub358 \uce74\uce74\ud398\uc774\ub2e4\ub9ac</p> <p>\uc704 \ucf54\ub4dc\ub97c \uc2e4\ud589\ud558\uba74 \ubaa8\ub378\uc774 \uc77c\uc815 \uac04\uaca9\uc73c\ub85c \ud559\uc2b5 \uc190\uc2e4\uacfc \uac80\uc99d \uc190\uc2e4\uc744 \uacc4\uc0b0\ud558\uace0 \ucd9c\ub825\ud558\ub294 \uacfc\uc815\uc744 \ubc18\ubcf5\ud55c\ub2e4. <code>max_iteration</code> \uc740 \ubaa8\ub378\uc774 \uc218\ud589\ud560 \ucd5c\ub300 \ubc18\ubcf5 \ud69f\uc218\ub97c \uc758\ubbf8\ud558\uba70, <code>eval_interval</code> \uc740 \ud3c9\uac00\ub97c \uc218\ud589\ud560 \uac04\uaca9\uc744 \ub098\ud0c0\ub0b8\ub2e4.</p> <ul> <li> <p><code>max_iteration</code> \ub9cc\ud07c \ubc18\ubcf5\uc744 \uc218\ud589\ud558\ub294 for \ub8e8\ud504\ub97c \ud1b5\ud574 \ubaa8\ub378 \ud559\uc2b5\uc744 \uc9c4\ud589\ud55c\ub2e4.</p> </li> <li> <p>\uac01 \ubc18\ubcf5\uc5d0\uc11c <code>step</code> \ubcc0\uc218\ub294 \ud604\uc7ac \ubc18\ubcf5\uc758 \ubc88\ud638\ub97c \ub098\ud0c0\ub0b8\ub2e4. <code>step % eval_interval == 0</code> \uc870\uac74\ubb38\uc740 \ud604\uc7ac \ubc18\ubcf5 \ubc88\ud638\uac00 eval_interval \ub85c \uc815\ud655\ud788 \ub098\ub220\ub5a8\uc5b4\uc9c8 \ub54c, \uc989 \uc9c0\uc815\ub41c \ud3c9\uac00 \uac04\uaca9\ub9c8\ub2e4 \ucc38\uc774 \ub41c\ub2e4. \uc774\ub54c <code>compute_loss_metrics()</code> \ud568\uc218\ub97c \ud638\ucd9c\ud574 \ud604\uc7ac \ubaa8\ub378\uc758 \ud559\uc2b5 \uc190\uc2e4\uacfc \uac80\uc99d \uc190\uc2e4\uc744 \uacc4\uc0b0\ud55c\ub2e4. \uc774 \ud568\uc218\ub294 \ud559\uc2b5 \ub370\uc774\ud130\uc640 \uac80\uc99d \ub370\uc774\ud130\uc5d0 \ub300\ud574 \ubaa8\ub378\uc744 \ud3c9\uac00\ud558\uace0 \uac01 \ud3c9\uade0 \uc190\uc2e4\uac12\uc744 \uacc4\uc0b0\ud574 \ubc18\ud658\ud55c\ub2e4.</p> </li> <li> <p>losses \ub515\uc154\ub108\ub9ac\uc5d0\ub294 train\uacfc eval \ud0a4\ub97c \ud1b5\ud574 \uc811\uadfc\ud560 \uc218 \uc788\ub294 \ud559\uc2b5 \uc190\uc2e4\uacfc \uac80\uc99d \uc190\uc2e4 \uac12\uc744 \uc800\uc7a5\ud55c\ub2e4. \uc774\ud6c4 print \ud568\uc218\ub85c \ud604\uc7ac \ub2e8\uacc4(step), \ud559\uc2b5 \uc190\uc2e4(losses[\"train\"]), \uadf8\ub9ac\uace0 \uac80\uc99d \uc190\uc2e4(losses[\"eval\"])\uc744 \ucd9c\ub825\ud55c\ub2e4. \uc774\ub97c \ud1b5\ud574 \ud559\uc2b5 \uacfc\uc815 \uc9c4\ud589 \uc0c1\ud669\uc744 \ubaa8\ub2c8\ud130\ub9c1\ud558\uace0 \ubaa8\ub378\uc774 \ud559\uc2b5 \ub370\uc774\ud130\uc640 \uac80\uc99d \ub370\uc774\ud130\uc5d0 \ub300\ud574 \uc5bc\ub9c8\ub098 \uc798 \uc791\ub3d9\ud558\ub294 \uc9c0 \ud3c9\uac00\ud560 \uc218 \uc788\ub2e4.</p> </li> <li> <p><code>batch_function</code> \ud568\uc218\ub97c \uc0ac\uc6a9\ud574 \ud559\uc2b5 \ub370\uc774\ud130\uc5d0\uc11c \ubbf8\ub2c8\ubc30\uce58\ub97c \ucd94\ucd9c\ud55c\ub2e4. \ubaa8\ub378\uc5d0 \uc785\ub825 \ub370\uc774\ud130(example_x)\uc640 \uc815\ub2f5 \ub370\uc774\ud130(example_y)\ub97c \uc804\ub2ec\ud574 \uc608\uce21\uac12\uacfc \uc190\uc2e4\uac12\uc744 \uacc4\uc0b0\ud55c\ub2e4. \uadf8 \ub2e4\uc74c \uc5ed\uc804\ud30c\ub97c \uc218\ud589\ud558\uace0 \uc635\ud2f0\ub9c8\uc774\uc800\ub97c \uc0ac\uc6a9\ud574 \ubaa8\ub378\uc758 \ud30c\ub77c\ubbf8\ud130\ub97c \uc5c5\ub370\uc774\ud2b8\ud55c\ub2e4.</p> </li> <li> <p>\ud559\uc2b5\uc774 \uc644\ub8cc\ub41c \ud6c4, \ubaa8\ub378\uc744 \uc0ac\uc6a9\ud574 \uc0c8\ub85c\uc6b4 \ud14d\uc2a4\ud2b8\ub97c \uc0dd\uc131\ud55c\ub2e4. \uc785\ub825\uc73c\ub85c 0\uc73c\ub85c \ucc44\uc6cc\uc9c4 \ud150\uc11c\ub97c \uc0ac\uc6a9\ud558\uace0, \ubaa8\ub378\uc758 <code>generate</code> \uba54\uc11c\ub4dc\ub97c \ud638\ucd9c\ud574 \ucd5c\ub300 100\uac1c\uc758 \uc0c8\ub85c\uc6b4 \ud1a0\ud070\uc744 \uc0dd\uc131\ud55c\ub2e4. \uc0dd\uc131\ub41c \ud1a0\ud070\uc740 <code>token_decode</code> \ud568\uc218\ub97c \uc0ac\uc6a9\ud574 \ud14d\uc2a4\ud2b8\ub85c \ubcc0\ud658\ub418\uc5b4 \ucd9c\ub825\ub41c\ub2e4.</p> </li> <li> <p>\uc774 \ucf54\ub4dc\ub97c \ubaa8\ub450 \uc885\ud569\ud574 <code>optimizer</code> \ub97c \uc801\uc6a9\ud55c \uc804\uccb4 \ucf54\ub4dc\uc774\ub2e4. \uc624\ub958\uac00 \ubc1c\uc0dd\ud558\uac70\ub098 \uc911\uac04\uc5d0 \ubb38\uc81c\uac00 \uc0dd\uacbc\uc744 \ub54c\ub294 \uc138\uc158\uc744 \ucd08\uae30\ud654\ud558\uace0 \ucf54\ub4dc\ub97c \ub2e4\uc2dc \uc2e4\ud589\ud558\uba74 \uc77c\uad04\uc801\uc73c\ub85c \uc791\ub3d9\ud558\ub3c4\ub85d \uad6c\uc131\ud588\ub2e4.</p> </li> </ul> <p>\uc774 \uc2e4\uc2b5 \uacb0\uacfc\uc5d0\uc11c\ub3c4 \ub4dc\ub7ec\ub098\ub4ef, \ucd08\ucc3d\uae30 \uc5b8\uc5b4 \ubaa8\ub378\uc740 \ubb38\ub9e5 \uc774\ud574\uc640 \uc758\ubbf8 \uc788\ub294 \ub2e8\uc5b4 \uc0dd\uc131\uc5d0 \uc5b4\ub824\uc6c0\uc744 \uacaa\uc5c8\ub2e4. \uc5f0\uad6c\uc790\ub4e4\uc740 \uc774\ub7ec\ud55c \ubb38\uc81c\ub97c \ud574\uacb0\ud558\ub824\uace0 \ub2e8\uc5b4 \uac04 \uc5f0\uad00\uc131\uc744 \ud559\uc2b5\ud558\ub294 RNN, GRU, LSTM \ub4f1 \ub2e4\uc591\ud55c \uc2e0\uacbd\ub9dd \uad6c\uc870\ub97c \uc5f0\uad6c\ud588\ub2e4. </p> <p>\uad6c\uae00 \uac1c\ubc1c\uc790\ub4e4\uc740 RNN\uacfc LSTM\uc774 \uac00\uc9c4 \uc7a5\uae30 \uc758\uc874\uc131 \ubb38\uc81c, \uc21c\ucc28\uc801 \ucc98\ub9ac\ub85c \uc778\ud55c \ubcd1\ub82c \ucc98\ub9ac\uc758 \uc5b4\ub824\uc6c0, \uadf8\ub9ac\uace0 \uae34 \uc2dc\ud000\uc2a4\ub97c \ucc98\ub9ac\ud560 \ub54c \ubc1c\uc0dd\ud558\ub294 \uadf8\ub808\uc774\ub514\uc5b8\ud2b8 \uc18c\uc2e4 \ub610\ub294 \ud3ed\ubc1c \ubb38\uc81c\ub85c \uc778\ud55c \uc5f0\uc0b0 \ube44\uc6a9 \uc99d\uac00\uc640 \uac19\uc740 \uae30\uc874 \uc21c\ucc28 \ucc98\ub9ac \ubc29\uc2dd\uc758 \ud55c\uacc4\ub97c \uadf9\ubcf5\ud558\uace0\uc790, \uc5b4\ud150\uc158 \uba54\ucee4\ub2c8\uc998\uc744 \uc911\uc2ec\uc73c\ub85c \ud55c \uc0c8\ub85c\uc6b4 \ubaa8\ub378 \uc544\ud0a4\ud14d\ucc98\uc778 \ud2b8\ub79c\uc2a4\ud3ec\uba38\ub97c \uc81c\uc548\ud588\ub2e4.</p> <p>\ud2b8\ub79c\uc2a4\ud3ec\uba38\ub294 \uc774\ub7ec\ud55c \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574 \uc624\uc9c1 \uc5b4\ud150\uc158 \uba54\ucee4\ub2c8\uc998\ub9cc\uc744 \uc0ac\uc6a9\ud574 \ubaa8\ub378\uc744 \uad6c\uc131\ud55c\ub2e4. \ub17c\ubb38\uc5d0 \uc18c\uac1c\ub41c \uc544\uc774\ub514\uc5b4\ub294 cross attention, masked self attention, self attention \uba54\ucee4\ub2c8\uc998\uc744 \ud575\uc2ec\uc73c\ub85c \ud55c\ub2e4. \uc774 \uba54\ucee4\ub2c8\uc998\uc740 \uc785\ub825 \uc2dc\ud000\uc2a4\uc758 \uac01 \uc694\uc18c\uac00 \ub2e4\ub978 \ubaa8\ub4e0 \uc694\uc18c\uc640 \uc5b4\ub5bb\uac8c \uad00\ub828\ub418\ub294\uc9c0 \ubcd1\ub82c\ub85c \uacc4\uc0b0\ud55c\ub2e4. \ub530\ub77c\uc11c \uc785\ub825 \uc2dc\ud000\uc2a4 \ub0b4 \ubaa8\ub4e0 \uc704\uce58 \uac04\uc758 \uad00\uacc4\ub97c \ud6a8\uc728\uc801\uc73c\ub85c \ubaa8\ub378\ub9c1\ud560 \uc218 \uc788\uac8c \ub41c\ub2e4. \uc774\ub97c \ud1b5\ud574 \ud2b8\ub79c\uc2a4\ud3ec\uba38\ub294 \ub370\uc774\ud130\uc758 \uae34 \ubc94\uc704 \uc758\uc874\uc131\uc744 \ub354 \ud6a8\uacfc\uc801\uc73c\ub85c \ud559\uc2b5\ud558\uace0, \ubcd1\ub82c \ucc98\ub9ac\ub85c \uc778\ud574 \ube60\ub978 \ud559\uc2b5\uacfc  \ucd94\ub860 \uc18d\ub3c4\ub97c \ub2ec\uc131\ud55c\ub2e4.</p> <p>\uacb0\uacfc\uc801\uc73c\ub85c \ud2b8\ub79c\uc2a4\ud3ec\uba38\ub294 \uc790\uc5f0\uc5b4 \ucc98\ub9ac(NLP) \ubd84\uc57c\uc5d0\uc11c \ud601\uc2e0\uc801\uc778 \ubc1c\uc804\uc73c\ub85c \uc778\uc815\ubc1b\uc73c\uba70, BERT, GPT \ub4f1 \ub2e4\uc591\ud55c \ubcc0\ud615 \ubaa8\ub378\uc758 \uae30\ubc18\uc774 \ub41c\ub2e4. \ub610\ud55c \ud14d\uc2a4\ud2b8 \uc774\ud574\uc640 \uc0dd\uc131 \uc791\uc5c5\uc5d0\uc11c \ub6f0\uc5b4\ub09c \uc131\ub2a5\uc744 \ubcf4\uc5ec \uc9c0\uae08\ub3c4 \ub110\ub9ac \uc0ac\uc6a9\ub41c\ub2e4.</p> <p>GPT \ubaa8\ub378\uc5d0\ub294 \uc5ec\ub7ec \uac00\uc9c0 \uc911\uc694\ud55c \uae30\uc220\uc774 \uc801\uc6a9\ub41c\ub2e4. masked attention, multi head attention, positional Encoding, \uc804\ucc28 \uc5f0\uacb0, \ub808\uc774\uc5b4 \uc815\uaddc\ud654, dropopt \ub4f1\uc774 \uc788\ub2e4. \uc774\uc81c \uc774\ub7ec\ud55c \uae30\ubc95\ub4e4\uc744 \ubaa8\ub378\uc5d0 \ub2e8\uacc4\uc801\uc73c\ub85c \uc801\uc6a9\ud558\uba70 \ud559\uc2b5\uc5d0 \uc5b4\ub5a4 \uc601\ud5a5\uc744 \uc8fc\ub294\uc9c0 \uc0b4\ud3b4\ubcf4\uaca0\ub2e4.</p>"},{"location":"ai/GPT%20%EB%AA%A8%EB%8D%B8%20%EB%A7%8C%EB%93%A4%EA%B8%B0%282%29/","title":"GPT \ubaa8\ub378 \ub9cc\ub4e4\uae30 (2) - \uc140\ud504 \uc5b4\ud150\uc158 \uba54\ucee4\ub2c8\uc998","text":""},{"location":"ai/GPT%20%EB%AA%A8%EB%8D%B8%20%EB%A7%8C%EB%93%A4%EA%B8%B0%282%29/#gpt-2-","title":"GPT \ubaa8\ub378 \ub9cc\ub4e4\uae30 (2) - \uc140\ud504 \uc5b4\ud150\uc158 \uba54\ucee4\ub2c8\uc998","text":""},{"location":"ai/GPT%20%EB%AA%A8%EB%8D%B8%20%EB%A7%8C%EB%93%A4%EA%B8%B0%282%29/#_1","title":"\uc140\ud504 \uc5b4\ud150\uc158 \ucd94\uac00\ud558\uae30","text":"<p>\uc5b4\ud150\uc158 \uba54\ucee4\ub2c8\uc998\uc740 \uac04\ub2e8\ud788 \ub9d0\ud574 \ubb38\uc790\ub098 \ub2e8\uc5b4 \uc0ac\uc774\uc758 \uad00\uacc4\ub97c \ud30c\uc545\ud558\uace0, \ud2b9\uc815 \uc815\ubcf4\uc758 \uc911\uc694\uc131\uc744 \uc778\uc2dd\ud558\ub294 \uba54\ucee4\ub2c8\uc998\uc774\ub2e4. \uc774 \uba54\ucee4\ub2c8\uc998\uc744 \uc774\ud574\ud558\ub824\uba74 \ub450 \uac00\uc9c0 \ud575\uc2ec \uc9c8\ubb38\uc744 \uace0\ubbfc\ud574\uc57c \ud55c\ub2e4.</p> <ol> <li>\uc5b4\ub5bb\uac8c \ub2e8\uc5b4 \uc0ac\uc774\uc758 \uad00\uacc4\ub97c \ud30c\uc545\ud560 \uc218 \uc788\uc744\uae4c?</li> <li>\uc5b4\ub5bb\uac8c \ud2b9\uc815 \uc815\ubcf4\uc758 \uc911\uc694\uc131\uc744 \ubaa8\ub378\uc5d0 \uc804\ub2ec\ud560 \uc218 \uc788\uc744\uae4c?</li> </ol> <p>\uc774\ub7ec\ud55c \uace0\ubbfc\uc744 \uc2e4\uc81c \ucf54\ub4dc\ub85c \uad6c\ud604\ud574 \ubcf4\uba74 \uc5b4\ud150\uc158 \uba54\ucee4\ub2c8\uc998\uc758 \uc791\ub3d9 \uc6d0\ub9ac\ub97c \ub354 \uae4a\uc774 \uc774\ud574\ud560 \uc218 \uc788\ub2e4. \ucf54\ub4dc\ub97c \ud1b5\ud574 \uc774\ub860\uc801 \uac1c\ub150\uc744 \uc2e4\uc81c\ub85c \uc801\uc6a9\ud574 \ubcf4\uba74\uc11c \uc5b4\ud150\uc158 \uba54\ucee4\ub2c8\uc998\uc774 \uc5b4\ub5bb\uac8c \uc791\ub3d9\ud558\ub294\uc9c0 \ub354 \uba85\ud655\ud558\uac8c \ud30c\uc545\ud560 \uc218 \uc788\ub2e4. </p> <p>\uba3c\uc800 \ubb38\uc790\ub4e4 \uac04\uc758 \uc815\ubcf4\ub97c \uc8fc\uace0\ubc1b\ub294 \ubc29\ubc95\uc744 \uc0dd\uac01\ud574\ubcf4\uaca0\ub2e4.</p>"},{"location":"ai/GPT%20%EB%AA%A8%EB%8D%B8%20%EB%A7%8C%EB%93%A4%EA%B8%B0%282%29/#_2","title":"\ubb38\uc790\ub4e4 \uac04\uc5d0 \uc815\ubcf4\ub97c \uc8fc\uace0\ubc1b\ub294 \ubc29\uc2dd(\ud3c9\uade0 \ubc29\uc2dd)","text":"<p>\uac04\ub2e8\ud55c \uc22b\uc790 \ub370\uc774\ud130\ub97c \uac00\uc9c0\uace0, \ubb38\uc790\ub4e4 \uac04\uc5d0 \uc815\ubcf4\ub97c \uc8fc\uace0\ubc1b\ub294 \ubc29\ubc95\uc744 \uc0b4\ud3b4\ubcf4\uaca0\ub2e4.</p> <p>\ubc30\uce58(batch) \ud06c\uae30\uac00 2\uc774\uace0, \uc2dc\ud000\uc2a4(sequence) \uae38\uc774\uac00 4, \uadf8\ub9ac\uace0 \uc784\ubca0\ub529(embedding) \ucc28\uc6d0\uc774 6\uc778 \ub370\uc774\ud130\ub97c \uc0dd\uc131\ud55c\ub2e4. \ub370\uc774\ud130\uc758 \ub0b4\uc6a9\uc740 \uc911\uc694\ud558\uc9c0 \uc54a\uae30 \ub54c\ubb38\uc5d0 <code>torch.randn</code> \ud568\uc218\ub97c \uc0ac\uc6a9\ud574 \ub79c\ub364\ud55c \uac12\uc73c\ub85c \ub370\uc774\ud130\ub97c \ub9cc\ub4e0\ub2e4. \uc774\ub807\uac8c \uc0dd\uc131\ub41c 4\uac1c\uc758 \uc2dc\ud000\uc2a4\ub294 \uc11c\ub85c \uc5f0\uad00\uc131\uc774 \uc5c6\ub294 \ub79c\ub364\ud55c \uc22b\uc790\ub4e4\ub85c \uad6c\uc131\ub41c\ub2e4.</p> <pre><code>import torch\ntorch.manual_seed(1441)\n\nnum_batches, sequence_length, embedding_dim = 2, 4, 6\nembeddings_tensor = torch.randn(num_batches,\n                                sequence_length,\n                                embedding_dim)\n\nprint(embeddings_tensor.shape)\n</code></pre> <p>torch.Size([2, 4, 6])</p> <p>\uc774 \ucf54\ub4dc\uc758 \ubaa9\ud45c\ub294 \ub354 \ub098\uc740 \uc608\uce21\uc744 \uc704\ud574 \uc2dc\ud000\uc2a4\ub4e4\uc774 \uc11c\ub85c \uc5b4\ub5bb\uac8c \uc815\ubcf4\ub97c \uc8fc\uace0\ubc1b\uc744 \uc218 \uc788\ub294\uc9c0\ub97c \uc54c\uc544\ubcf4\ub294 \uac83\uc774\ub2e4. \uc5ec\uae30\uc11c \uc8fc\ubaa9\ud560 \uc810\uc740 4\uac1c\uc758 \uc2dc\ud000\uc2a4\uac00 \uc21c\ucc28\uc801\uc73c\ub85c \uc785\ub825\ub41c\ub2e4\ub294 \uac83\uc774\ub2e4. \uc2dc\ud000\uc2a4\ub4e4\ub07c\ub9ac \uc815\ubcf4\ub97c \uc8fc\uace0\ubc1b\ub294 \ubc29\ubc95\uc740 \ucf54\uc0ac\uc778 \uc720\uc0ac\ub3c4 \ub4f1 \ub2e4\uc591\ud558\uc9c0\ub9cc, \uc5ec\uae30\uc11c\ub294 \uac00\uc7a5 \uc26c\uc6b4 \ubc29\ubc95\uc778 \ud3c9\uade0\uc744 \uad6c\ud558\ub294 \ubc29\uc2dd\uc73c\ub85c \uc124\uba85\ud558\uaca0\ub2e4.</p> <p>\ub2e4\uc74c\uc73c\ub85c, embeddings_tensor\ub97c \ud65c\uc6a9\ud574 averaged_embeddings\ub77c\ub294 \ubcc0\uc218\ub97c \uc0dd\uc131\ud55c\ub2e4. \uc774 \ubcc0\uc218\ub294 \ub2e4\uc74c \uc2dc\ud000\uc2a4\ub85c \ub118\uc5b4\uac08 \ub54c\ub9c8\ub2e4 \ud3c9\uade0\uac12\uc744 \uc0ac\uc6a9\ud558\ub3c4\ub85d \uc124\uacc4\ub41c\ub2e4.</p> <pre><code># \uc774\uc804 \uc784\ubca0\ub529\uc758 \ud3c9\uade0\uc744 \uc800\uc7a5\ud560 \ud150\uc11c \ucd08\uae30\ud654 \naveraged_embeddings = torch.zeros((num_batches, sequence_length, embedding_dim))\n\n# \uac01 \ubc30\uce58\uc5d0 \ub300\ud574 \ubc18\ubcf5\nfor batch_index in range(num_batches):\n    # \uac01 \uc2dc\ud000\uc2a4 \uc704\uce58\uc5d0 \ub300\ud574 \ubc18\ubcf5\n    for sequence_position in range(sequence_length):\n        # \ud604\uc7ac \uc2dc\ud000\uc2a4 \uc704\uce58\uae4c\uc9c0\uc758 \uc774\uc804 \uc784\ubca0\ub529\uc744 \uc2ac\ub77c\uc774\uc2a4\n        previous_embeddings = embeddings_tensor[batch_index, :sequence_position + 1]\n        # \ud604\uc7ac \uc704\uce58\uae4c\uc9c0\uc758 \uc784\ubca0\ub529\uc758 \ud3c9\uade0\uc744 \uacc4\uc0b0\n        averaged_embeddings[batch_index, sequence_position] = torch.mean(\n            previous_embeddings,\n            dim=0\n        )\n</code></pre> <p>\uc774 \uacfc\uc815\uc5d0\uc11c \uac01 \uc2dc\ud000\uc2a4\uc758 \uc815\ubcf4\ub97c \uc555\ucd95\ud574 \ub2e4\uc74c \uc2dc\ud000\uc2a4\ub85c \uc804\ub2ec\ud560 \uc218 \uc788\ub2e4. \uc784\ubca0\ub529\uc758 \uc911\uc694\uc131\uc774 \uc5ec\uae30\uc11c \ub4dc\ub7ec\ub09c\ub2e4. \uc784\ubca0\ub529\uc740 \ub2e8\uc5b4\ub098 \ubb38\uc790\ub97c \uc22b\uc790 \ubca1\ud130\ub85c \ud45c\ud604\ud558\ub294 \ubc29\ubc95\uc774\ub2e4. \uc655\uc744 \ub098\ud0c0\ub0b4\ub294 \uc784\ubca0\ub529\uacfc \uc5ec\uc790\ub97c \ub098\ud0c0\ub0b4\ub294 \uc784\ubca0\ub529\uc744 \ub354\ud558\uba74 \uc5ec\uc655\uc758 \uc784\ubca0\ub529\uc774 \ub098\uc624\ub294 \uac83\uc744 \uc758\ubbf8\ud55c\ub2e4. \uc774\ub7ec\ud55c \uc784\ubca0\ub529 \ubca1\ud130\ub4e4\uc758 \ud3c9\uade0\uc744 \uc0ac\uc6a9\ud558\uba74 \uc774\uc804 \uc815\ubcf4\uc758 \ud2b9\uc131\uc744 \ud6a8\uacfc\uc801\uc73c\ub85c \uc694\uc57d\ud560 \uc218 \uc788\ub2e4. \uc2dc\ud000\uc2a4 \ub0b4 \uac01 \uc2dc\uc810\uc5d0\uc11c \uc774\uc804\uc758 \ubaa8\ub4e0 \ubb38\uc790\uc758 \uc815\ubcf4\ub97c \ubaa8\uc544 \ud3c9\uade0\uc744 \uacc4\uc0b0\ud568\uc73c\ub85c\uc368 \uc815\ubcf4\ub97c \uc9d1\uacc4\ud558\uace0 \ubb38\ub9e5\uc744 \ubc18\uc601\ud55c\ub2e4. </p> <p>\uc608\ub97c \ub4e4\uc5b4, \"\ub098\ub294 \ud559\uad50\uc5d0 \uac04\ub2e4\"\ub77c\ub294 \ubb38\uc7a5\uc5d0\uc11c '\uac04\ub2e4'\ub97c \ud574\uc11d\ud560 \ub54c \uc774\uc804 \ub2e8\uc5b4\ub4e4\uc758 \uc784\ubca0\ub529 \ubca1\ud130\uc758 \ud3c9\uade0\uc740 '\ub098', '\ub294', '\ud559\uad50', '\uc5d0'\uc758 \uc758\ubbf8\ub97c \ud3ec\ud568\ud55c \uc0c8\ub85c\uc6b4 \ubca1\ud130\uac00 \ub41c\ub2e4. \uc774 \ud3c9\uade0 \ubca1\ud130\ub294 \ubb38\uc7a5\uc758 \uc804\ubc18\uc801\uc778 \ubb38\ub9e5\uc744 \ub098\ud0c0\ub0b4\uba70, \ubaa8\ub378\uc774 '\uac04\ub2e4'\uc640 \uac19\uc740 \ub2e4\uc74c \ub2e8\uc5b4\ub97c \ub354 \uc815\ud655\ud558\uac8c \uc608\uce21\ud558\uac70\ub098 \uc774\ud574\ud558\ub294 \ub370 \ub3c4\uc6c0\uc744 \uc900\ub2e4.</p> <p>\uc774 \ubc29\ubc95\uc740 \uac04\ub2e8\ud558\uc9c0\ub9cc \uc2dc\ud000\uc2a4 \ub0b4\uc5d0\uc11c \uc774\uc804 \uc815\ubcf4\ub97c \ud604\uc7ac\uc5d0 \ud6a8\uacfc\uc801\uc73c\ub85c \uc804\ub2ec\ud558\ub294 \ubc29\ubc95\uc73c\ub85c \uc0ac\uc6a9\ub41c\ub2e4.</p> <p><code>averaged_embeddings[0]</code> \uc758 \uac12\uc740 \uc2dc\ud000\uc2a4\uac00 \uc99d\uac00\ud568\uc5d0 \ub530\ub77c \ubcc0\ud654\ud55c\ub2e4. \ud558\uc9c0\ub9cc for \ubb38\uc744 \uc0ac\uc6a9\ud558\ub294 \ubc29\uc2dd\uc740 \uc2dc\uac04 \ubcf5\uc7a1\ub3c4 \ubb38\uc81c\ub85c \uc778\ud574 \ud6a8\uc728\uc801\uc774\uc9c0 \uc54a\ub2e4. \ub300\uc2e0 \ud589\ub82c\uacf1\uc744 \ud65c\uc6a9\ud574 \uc774 \uacfc\uc815\uc744 \ub354\uc6b1 \uac04\ub2e8\ud558\uace0 \ud6a8\uc728\uc801\uc73c\ub85c \uc218\ud589\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"ai/GPT%20%EB%AA%A8%EB%8D%B8%20%EB%A7%8C%EB%93%A4%EA%B8%B0%282%29/#_3","title":"\uc140\ud504 \uc5b4\ud150\uc158\uc774\ub780?","text":"<p>\uc2dc\ud000\uc2a4\uac00 \uc99d\uac00\ud558\uba74\uc11c \uc758\ubbf8 \uc815\ubcf4\ub97c \uc5b4\ub5bb\uac8c \uc804\ub2ec\ud560 \uc218 \uc788\ub294\uc9c0 \uc54c\uc544\ubd24\uace0 \ub9c8\uc2a4\ud06c\ub97c \uc0ac\uc6a9\ud574 \ubaa8\ub378\uc774 \uc911\uc694\ud55c \uc815\ubcf4\uc5d0 \uc9d1\uc911\ud560 \uc218 \uc788\uac8c \ud558\ub294 \uacfc\uc815\uc744 \uc0b4\ud3b4\ubd24\ub2e4.</p> <p>\uc774\uc81c \ubcf8\uaca9\uc801\uc73c\ub85c \uc140\ud504 \uc5b4\ud150\uc158\uc5d0 \ub300\ud574 \uc54c\uc544\ubcf4\uaca0\ub2e4. \uc140\ud504 \uc5b4\ud150\uc158\uc740 \uc785\ub825 \uc2dc\ud000\uc2a4(\ubb38\uc7a5)\ub0b4 \ubaa8\ub4e0 \ub2e8\uc5b4 \uac04\uc758 \uad00\uacc4\ub97c \uc9c1\uc811 \ubd84\uc11d\ud558\uace0 \ucc98\ub9ac\ud55c\ub2e4.</p> <p>\uc774 \uacfc\uc815\uc5d0\uc11c \uac01 \ub2e8\uc5b4\uac00 \ub2e4\ub978 \ubaa8\ub4e0 \ub2e8\uc5b4\uc640 \uc5b4\ub5bb\uac8c \uc0c1\ud638\uc791\uc6a9\ud558\ub294\uc9c0 \uacc4\uc0b0\ud558\uba70, \ub2e8\uc5b4\ub4e4 \uac04\uc758 \uc720\uc0ac\ub3c4\ub97c \uce21\uc815\ud574 \uc5f0\uad00\uc131 \ub192\uc740 \ub2e8\uc5b4 \uc30d\uc744 \ud30c\uc545\ud55c\ub2e4. \uc774\ub97c \ud1b5\ud574 \ubb38\uc7a5 \ub0b4 \ub2e8\uc5b4\ub4e4 \uc0ac\uc774\uc758 \ubcf5\uc7a1\ud55c \uc5f0\uad00\uc131\uc744 \ud3ec\ucc29\ud558\uace0 \uc774\ud574\ud55c\ub2e4.</p> <p>\uc785\ub825 \uc2dc\ud000\uc2a4(\ubb38\uc7a5)\ub97c \ucffc\ub9ac(Query, Q), \ud0a4(Key, K), \ubc38\ub958(Value, V) \uc138 \uac1c\ub85c \ubcf5\uc0ac\ud55c\ub2e4. Query\ub294 \uc9c8\ubb38\ud558\ub294 \uc5ed\ud560\uc744 \ud558\ub294 \ubb38\uc7a5\uc73c\ub85c \uc0dd\uac01\ud558\uba74 \ub41c\ub2e4.</p> <ul> <li>Key\ub294 Query\uac00 \ud55c \uc9c8\ubb38\uc5d0 \ub2f5\ubcc0\ud558\ub294 \uc5ed\ud560\uc744 \ud558\ub294 \ubb38\uc7a5\uc774\ub2e4. Value\ub294 \uc2e4\uc81c \uc804\ub2ec\ub418\ub294 \uc815\ubcf4\ub97c \ub098\ud0c0\ub0b8\ub2e4.</li> <li>Query\uc758 \uc9c8\ubb38\uc774 \ud589\ub82c\ub85c \ub4e4\uc5b4\uc624\ubbc0\ub85c Key\ub294 \ud589\ub82c \uc5f0\uc0b0\uc744 \uc704\ud574 \uc804\uce58(Transpose)\ub418\uace0 \ud589\ub82c \uc5f0\uc0b0\uc774 \uc9c4\ud589\ub41c\ub2e4. \uc774 \uacfc\uc815\uc5d0\uc11c Query\uc640 Key\uc758 \uad00\ub828\uc131\uc744 \uacc4\uc0b0\ud55c\ub2e4. \ud589\ub82c \uc5f0\uc0b0\uc73c\ub85c tensor\uc758 \ud06c\uae30\uac00 \ubcc0\uacbd\ub418\ub294\ub370, \uc774\ub97c \ub2e4\uc2dc \ubcf5\uc6d0\ud558\uae30 \uc704\ud574 Value\uc640 \uc5f0\uc0b0\uc744 \uc9c4\ud589\ud55c\ub2e4.</li> <li>\ub610\ud55c, Value\ub294 Query\uc640 Key\uc758 \uad00\ub828\uc131\uc5d0 \ub530\ub77c \uac00\uc911\uce58\uac00 \ubd80\uc5ec\ub418\uc5b4 \ucd5c\uc885 \ucd9c\ub825\uc744 \uc0dd\uc131\ud558\ub294 \ub370 \uc0ac\uc6a9\ub41c\ub2e4.</li> </ul> <p>\uacb0\uacfc\uc801\uc73c\ub85c \uac01 \ub2e8\uc5b4\uc758 \uc0c8\ub85c\uc6b4 \ud45c\ud604\uc740 \uc2dc\ud000\uc2a4 \ub0b4 \ubaa8\ub4e0 \ub2e8\uc5b4\uc640\uc758 \uad00\uacc4\ub97c \ubc18\uc601\ud55c\ub2e4. \uc774\ub7ec\ud55c \uacfc\uc815\uc740 \uc140\ud504 \uc5b4\ud150\uc158 \uba54\ucee4\ub2c8\uc998\uc758 \ud575\uc2ec \uc791\ub3d9 \uc6d0\ub9ac\uc774\ub2e4. \uc774\ub97c \ud1b5\ud574 \uc785\ub825 \uc2dc\ud000\uc2a4 \ub0b4\uc758 \uac01 \uc694\uc18c\uac00 \ub2e4\ub978 \ubaa8\ub4e0 \uc694\uc18c\uc640 \uc5b4\ub5bb\uac8c \uad00\ub828\ub418\ub294\uc9c0 \ud30c\uc545\ud558\uace0 \ubb38\ub9e5\uc744 \uace0\ub824\ud55c \ub354 \ud48d\ubd80\ud55c \ud45c\ud604\uc744 \uc0dd\uc131\ud55c\ub2e4.</p> <pre><code>import torch\nimport torch.nn as nn\nimport torch.nn.functional as F\n\n# \uace0\uc815\ub41c \ub09c\uc218 \uc2dc\ub4dc \uc124\uc815\ntorch.manual_seed(1111)\n\n# \ubc30\uce58 \ud06c\uae30, \uc2dc\ud000\uc2a4 \uae38\uc774, \ucc44\ub110 \uc218 \uc124\uc815\nbatch_size, seq_length, num_channels = 2, 4, 4\ninput_tensor = torch.randn(batch_size, seq_length, num_channels)\n\n# \uac01 \ud5e4\ub4dc\uc758 \ud06c\uae30\nhead_size = 16\n\n# Key, Query, Value \ubcc0\ud658\uc744 \uc704\ud55c \uc120\ud615 \ub808\uc774\uc5b4\nkey_transform = nn.Linear(num_channels, head_size, bias=False)\nquery_transform = nn.Linear(num_channels, head_size, bias=False)\nvalue_transform = nn.Linear(num_channels, head_size, bias=False)\n\n# Key, Query, Value \ubcc0\ud658 \uc218\ud589\nkeys = key_transform(input_tensor)\n\bqueries = key_transform(input_tensor)\nvalues = key_transform(input_tensor)\n\n# Attention \uc2a4\ucf54\uc5b4 \uacc4\uc0b0\nattention_scores = queries @ keys.transpose(-2, -1)\n\n# \ud558\uc0bc\uac01\ud589\ub82c \uc0dd\uc131 \ubc0f \ub9c8\uc2a4\ud0b9\nmask_lower_triangle = torch.tril(torch.ones(seq_length, seq_length))\nattention_scores = attention_scores.masked_fill(mask_lower_triangle == 0, float('-inf'))\n\n# \uc18c\ud504\ud2b8\ub9e5\uc2a4 \ud568\uc218\ub97c \uc0ac\uc6a9\ud574 \ud655\ub960 \uc815\uaddc\ud654\nnormalized_scores = F.softmax(attentino_scores, dim=-1)\n\n# \ucd5c\uc885 \ucd9c\ub825 \uacc4\uc0b0\noutput_tensor = normalized_scores @ values\n\noutput_tensor\n</code></pre> <p>\uba3c\uc800 torch.manual_seed(1111) \uc744 \uc124\uc815\ud574 \uacb0\uacfc\uc758 \uc7ac\ud604\uc131\uc744 \ubcf4\uc7a5\ud55c\ub2e4. batch_size 2, seq_length 4, \uadf8\ub9ac\uace0 num_channels 4\uc778 \uc784\uc758\uc758 input_tensor\ub97c \uc0dd\uc131\ud55c\ub2e4.</p> <p>\uc140\ud504 \uc5b4\ud150\uc158 \uba54\ucee4\ub2c8\uc998\uc744 \uad6c\ud604\ud558\uae30 \uc704\ud574 \uc138 \uac1c\uc758 \uc120\ud615 \ubcc0\ud658 key_transform, query_transform, value_transform \uc744 \uc815\uc758\ud55c\ub2e4. \uac01\uac01\uc5d0 \ub300\ud574 nn.Linear\ub97c \ud65c\uc6a9\ud574 \uc785\ub825 \ucc28\uc6d0\uc744 head_size\ub85c \ubcc0\ud658\ud558\ub294\ub370, \uc5ec\uae30\uc11c head_size\ub294 16\uc73c\ub85c \uc124\uc815\ud55c\ub2e4.</p> <p>\uc774 \uc120\ud604 \ubcc0\ud658\uc744 input_tensor\uc5d0 \uc801\uc6a9\ud574 keys, queries, values \ud45c\ud604\uc744 \uc5bb\ub294\ub2e4. queries\uc640 keys \ud45c\ud604\uc758 \ub0b4\uc801\uc744 \ud1b5\ud574 <code>attention_scores</code> \ub97c \uacc4\uc0b0\ud55c\ub2e4. \uc774 scores\ub294 \ubbf8\ub798\uc758 \uc2dc\ud000\uc2a4 \uc815\ubcf4\ub97c \ucc28\ub2e8\ud558\uae30 \uc704\ud574 \ud558\uc704 \uc0bc\uac01 \ud589\ub82c <code>mask_lower_triangle</code> \ub85c \ub9c8\uc2a4\ud0b9 \ucc98\ub9ac \ud55c\ub2e4. \uc5ec\uae30\uc11c \uc0ac\uc6a9\ub41c <code>torch.tril()</code> \uc740 \uc0c1\uc704 \uc0bc\uac01 \ubd80\ubd84\uc744 0\uc73c\ub85c \ub9cc\ub4e0\ub2e4. \uadf8\ub798\uc11c \uc774\ub807\uac8c \uc0dd\uc131\ub41c \ud589\ub82c\uc740 \uac01 \uc704\uce58\uc5d0\uc11c \ud604\uc7ac\uc640 \uacfc\uac70 \uc815\ubcf4\ub9cc\uc744 \ucc38\uc870\ud560 \uc218 \uc788\ub3c4\ub85d \ud558\ub294 \ub9c8\uc2a4\ud06c \uc5ed\ud560\uc774 \ub418\ub294 \uac83\uc774\ub2e4.  </p> <p>\ub9c8\uc2a4\ud0b9 \ucc98\ub9ac\ud55c scores\ub294 <code>float('-inf')</code> \ub85c <code>-inf</code>  \uac12\uc774 \uc785\ub825\uc73c\ub85c \uc8fc\uc5b4\uc9c0\uba74 \uc9c0\uc218\ud568\uc218 \uac12\uc740 0\uc5d0 \ub9e4\uc6b0 \uac00\uae4c\uc6b4 \uadf9\uc19f\uac12\uc774 \ub41c\ub2e4. \uc774\ub294 \uc124\uc815\ud55c \ubbf8\ub798\uc758 \uc704\uce58\ub97c \ud3ec\ud568\ud558\uba70, \ubaa8\ub378\uc758 \uc758\uc0ac\uacb0\uc815 \uacfc\uc815\uc5d0\uc11c \ud574\ub2f9 \uc694\uc18c\uc758 \uc601\ud5a5\ub825\uc744 \uc81c\uac70\ud558\uae30 \uc704\ud574 \uc18c\ud504\ud2b8\ub9e5\uc2a4 \uc801\uc6a9 \uc2dc \ud574\ub2f9 \uc704\uce58\uc758 \uac00\uc911\uce58\ub97c 0\uc73c\ub85c \ub9cc\ub4e0\ub2e4. </p> <p>F.softmax \ud568\uc218\ub97c \uc0ac\uc6a9\ud574 \uc815\uaddc\ud654\ub41c attention_scores\uc778 normalized_scores\ub97c \uacc4\uc0b0\ud55c\ub2e4. \uc774\ub807\uac8c \uc815\uaddc\ud654\ub41c \uc5b4\ud150\uc158 \uac00\uc911\uce58\ub97c \ucd5c\uc885\uc801\uc73c\ub85c values\uc5d0 \uc801\uc6a9\ud574 \uc140\ud504 \uc5b4\ud150\uc158\uc758 \uacb0\uacfc\uc778 output_tensor\ub97c \uc5bb\ub294\ub2e4.</p> <p><code>output_tensor</code> \ub294 \uac01 \uc2dc\ud000\uc2a4 \uc704\uce58\uc5d0 \uacfc\uac70\uc640 \ud604\uc7ac\uc758 \uc815\ubcf4\ub9cc\uc744 \uace0\ub824\ud574 \uc5bb\uc740 \uc0c8\ub85c\uc6b4 \ud45c\ud604\uc73c\ub85c \ub098\ud0c0\ub0b4\uba70, \uc774 \uacfc\uc815\uc740 \ubaa8\ub378\uc774 \uc2dc\ud000\uc2a4 \ub0b4\uc758 \uac01 \uc704\uce58\uc5d0 \uad00\ub828 \uc815\ubcf4\ub97c \ub3d9\uc801\uc73c\ub85c \uc9d1\uc57d\ud558\ub294\ub370 \ub3c4\uc6c0\uc744 \uc900\ub2e4.</p> <p>\uc774\ub7f0 \ubc29\uc2dd\uc73c\ub85c \uc140\ud504 \uc5b4\ud150\uc158 \uba54\ucee4\ub2c8\uc998\uc740 \uc2dc\ud000\uc2a4 \ub370\uc774\ud130\ub97c \ucc98\ub9ac\ud560 \ub54c \uac01 \uc694\uc18c\uac00 \uc11c\ub85c \uc5b4\ub5bb\uac8c \uc0c1\ud638 \uc791\uc6a9\ud558\ub294\uc9c0\ub97c \ud559\uc2b5\ud560 \uc218 \uc788\uac8c \ud558\uba70, \ud2b9\ud788 \uc2dc\ud000\uc2a4 \ub0b4\uc5d0\uc11c \uc815\ubcf4 \ud750\ub984\uc744 \ud6a8\uacfc\uc801\uc73c\ub85c \uad00\ub9ac\ud560 \uc218 \uc788\uac8c \ud55c\ub2e4.</p> <p>\uc55e\uc11c \uc124\uba85\ud55c \uc140\ud504 \uc5b4\ud150\uc158 \uad6c\ud604\uc5d0\uc11c \ud55c \uac00\uc9c0 \uc911\uc694\ud55c \ub2e8\uacc4 \uc0dd\ub7b5\ud588\ub2e4. \uc774 \ub2e8\uacc4\ub294 '\uc2a4\ucf00\uc77c\ub9c1' \uc774\ub77c\uace0 \ubd88\ub9ac\ub294 \uacfc\uc815\uc73c\ub85c, \uacc4\uc0b0\ub41c <code>attention_scores</code> \ub97c \ud2b9\uc815 \uac12\u221adk \uc73c\ub85c \ub098\ub204\ub294 \uac83\uc774\ub2e4.  \uc5ec\uae30\uc11c dk\ub294 \uc5b4\ud150\uc158 \uba54\ucee4\ub2c8\uc998\uc5d0\uc11c \uc0ac\uc6a9\ub418\ub294 key \ubca1\ud130\uc758 \ucc28\uc6d0 \ud06c\uae30\ub97c \ub098\ud0c0\ub0b8\ub2e4.</p> <p>\uc774 \uacfc\uc815\uc744 \ucc98\uc74c\uc5d0 \uc124\uba85\ud558\uc9c0 \uc54a\uc740 \uc774\uc720\ub294 \uc140\ud504 \uc5b4\ud150\uc158\uc758 \uae30\ubcf8 \uc6d0\ub9ac\ub97c \uc774\ud574\ud558\ub294 \ub370 \uc9d1\uc911\ud558\uae30 \uc704\ud574\uc11c\uc774\ub2e4. \ud558\uc9c0\ub9cc \uc774 \uc2a4\ucf00\uc774\ub9c1 \uacfc\uc815\uc740 \uc2e4\uc81c \uad6c\ud604\uc5d0\uc11c \ub9e4\uc6b0 \uc911\uc694\ud558\ub2e4.</p> <p>\uc774\uc81c\ubd80\ud130 \uc774 \uc2a4\ucf00\uc77c\ub9c1 \uacfc\uc815\uc774 \uc65c \ud544\uc694\ud55c\uc9c0, \uadf8\ub9ac\uace0 \uc5b4\ub5bb\uac8c \uc801\uc6a9\ud574\uc57c \ud558\ub294\uc9c0\uc5d0 \ub300\ud574 \uc54c\uc544\ubcf4\uaca0\ub2e4.</p>"},{"location":"ai/GPT%20%EB%AA%A8%EB%8D%B8%20%EB%A7%8C%EB%93%A4%EA%B8%B0%282%29/#dk","title":"\uc65c \u221adk\ub85c \ub098\ub220\uc57c \ud558\ub294\uac00?","text":"<p>dk\uac00 \ud544\uc694\ud55c \uc774\uc720\ub294 \ubc14\ub85c \uc18c\ud504\ud2b8\ub9e5\uc218 \ud568\uc218 \ub54c\ubb38\uc774\ub2e4. \uc18c\ud504\ud2b8\ub9e5\uc2a4 \ud568\uc218\ub294 \uc5b8\uc5b4 \ubaa8\ub378\uc774 \ub2e4\uc74c \uc5d0 \uc62c \ub2e8\uc5b4\ub97c \uc120\ud0dd\ud558\ub294 \uacfc\uc815\uc5d0\uc11c \uc911\uc694\ud55c \uc5ed\ud560\uc744 \ud55c\ub2e4. \uc774 \ud568\uc218\ub294 \ubaa8\ub378\uc774 \uac01 \ub2e8\uc5b4 \ud6c4\ubcf4\uc0ac\uc774\uc758 \uad00\ub828\uc131\uc744 \uacc4\uc0b0\ud558\uace0 \uac00\uc7a5 \uc801\uc808\ud55c \ub2e4\uc74c \ub2e8\uc5b4\ub97c \uacb0\uc815\ud558\ub294 \ub370 \uc0ac\uc6a9\ub41c\ub2e4.</p> <p>\uad6c\uccb4\uc801\uc73c\ub85c, \uc18c\ud504\ud2b8\ub9e5\uc2a4 \ud568\uc218\ub294 \ubaa8\ub378\uc774 \uace0\ub824 \uc911\uc778 \ubaa8\ub4e0 \uac00\ub2a5\ud55c \ub2e4\uc74c \ub2e8\uc5b4\ub4e4\uc5d0 \ub300\ud574 \ud655\ub960\uc744 \uacc4\uc0b0\ud55c\ub2e4. \uc774 \ud655\ub960\uc740 \uac01 \ub2e8\uc5b4\uac00 \ud604\uc7ac \ubb38\ub9e5\uc5d0 \uc5bc\ub9c8\ub098 \uc798 \ub9de\ub294\uc9c0\ub97c \ub098\ud0c0\ub0b8\ub2e4. \uacb0\uacfc\uc801\uc73c\ub85c \uac00\uc7a5 \ub192\uc740 \ud655\ub960\uc744 \uac00\uc9c4 \ub2e8\uc5b4\uac00 \ub2e4\uc74c \ub2e8\uc5b4\ub85c \uc120\ud0dd\ub41c\ub2e4. \uc774\ub7ec\ud55c \uacfc\uc815\uc744 \ud1b5\ud574 \ubaa8\ub378\uc740 \ubb38\ub9e5\uc5d0 \uac00\uc7a5 \uc801\ud569\ud558\uace0 \uc790\uc5f0\uc2a4\ub7ec\uc6b4 \ub2e4\uc74c \ub2e8\uc5b4\ub97c \uc608\uce21\ud558\uace0 \uc0dd\uc131\ud55c\ub2e4.</p> <p>\ud558\uc9c0\ub9cc \uc774 \uacfc\uc815\uc5d0\uc11c \uc5b4\ud150\uc158 \uc810\uc218\uac00 \uadf9\ub2e8\uc801\uc73c\ub85c \ucee4\uc9c0\uac70\ub098 \uc791\uc544\uc9c8 \uc218 \uc788\ub2e4. \uc774\ub85c \uc778\ud574 \uc18c\ud504\ud2b8\ub9e5\uc2a4 \ud568\uc218 \uc801\uc6a9 \uc2dc \ud55c \ub178\ub4dc\uc758 \uc810\uc218\uac00 \ub2e4\ub978 \ub178\ub4dc\ub4e4\uc5d0 \ube44\ud574 \uc9c0\ub098\uce58\uac8c \ub192\uc544\uc9c0\uac70\ub098 \ub0ae\uc544\uc9c8 \uc218 \uc788\ub2e4. \uacb0\uacfc\uc801\uc73c\ub85c \ud55c \ub178\ub4dc\uac00 \ub2e4\ub978 \ubaa8\ub4e0 \ub178\ub4dc\ubcf4\ub2e4 \uacfc\ub3c4\ud558\uac8c \uc911\uc694\ud558\ub2e4\uace0 \ud310\ub2e8\ub418\ub294 \uc0c1\ud669\uc774 \ubc1c\uc0dd\ud560 \uc218 \uc788\ub2e4.</p> <p>\uac04\ub2e8\ud55c \uc608\uc2dc\ub97c \uc0b4\ud3b4\ubcf4\uaca0\ub2e4. </p><pre><code>batch_size, sequence_length, embedding_dim = 2, 4, 4\n\nk = torch.randn(batch_size, seqence_length, embedding_dim)\nq = torch.randn(batch_size, seqence_length, embedding_dim)\n\nwei = q @ k.transpose(-2, -1)\n\nwei.var()\n</code></pre><p></p> <p>\uc2e4\ud589 \uacb0\uacfc: tensor(4.7005)</p> <p>\uc774\ub807\uac8c \ud070 \uac12\uc774 \uc18c\ud504\ud2b8\ub9e5\uc2a4 \ud568\uc218\ub85c \ub4e4\uc5b4\uac00\uba74 \ud2b9\uc815 \uc704\uce58\uc758 \uac12\ub9cc 1\uc5d0 \uac00\uae4c\uc6cc\uc9c0\uace0 \ub098\uba38\uc9c0\ub4e4\uc740 0\uc5d0 \uac00\uae4c\uc6cc\uc9c0\ub294 \ud604\uc0c1\uc774 \ubc1c\uc0dd\ud55c\ub2e4. \ub9c8\uce58 \uc5ec\ub7ec \uc120\ud0dd\uc9c0 \uc911\uc5d0\uc11c \ud558\ub098\uc758 \uc120\ud0dd\uc9c0\ub9cc \uadf9\ub2e8\uc801\uc73c\ub85c \uc120\ud0dd\ub418\ub294 \uac83\uacfc \uac19\ub2e4. </p> <p>\ub2e4\uc74c \ucf54\ub4dc\ub294 \ub0b4\uc801 \uc5f0\uc0b0 \ud6c4\uc5d0 \uc784\ubca0\ub529 \ucc28\uc6d0\uc758 \uc81c\uacf1\uadfc\u221adk \uc73c\ub85c \ub098\ub234\ub2e4.  </p><pre><code>batch_size, sequence_length, embedding_dim = 2, 4, 4\n\nk = torch.randn(batch_size, seqence_length, embedding_dim)\nq = torch.randn(batch_size, seqence_length, embedding_dim)\n\nwei = q @ k.transpose(-2, -1) * (embedding_dim ** -0.5)\n\nwei.var()\n</code></pre><p></p> <p>\uc2e4\ud589\uacb0\uacfc: tensor(0.6440)</p> <p>\uadf8 \uacb0\uacfc \ubd84\uc0b0\uc774 0.6440 \uc73c\ub85c \ud06c\uac8c \uac10\uc18c\ud588\ub2e4. \uc774\ub807\uac8c \uac12\uc744 \uc801\uc808\ud55c \ubc94\uc704\ub85c \uc870\uc808\ud574 \uc8fc\uba74, \uc18c\ud504\ud2b8\ub9e5\uc2a4 \ud568\uc218\uac00 \uc5ec\ub7ec \uc704\uce58\uc758 \uc815\ubcf4\ub97c \uace8\uace0\ub8e8 \ubc18\uc601\ud560 \uc218 \uc788\uac8c \ub41c\ub2e4.</p> <p>\ub9cc\uc57d \ub098\ub220\uc8fc\uc9c0 \uc54a\uc73c\uba74 \ud559\uc2b5 \uacfc\uc815\uc5d0\uc11c \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud55c\ub2e4. \uc5ec\uae30\uc11c dk\ub294 \ubaa8\ub378\uc758 \ucffc\ub9ac \ubca1\ud130\uc758 \ucc28\uc6d0 \ud06c\uae30\uc774\ub2e4. \uc2e0\uacbd\ub9dd\uc740 \uc624\ucc28 \uc5ed\uc804\ud30c\ub77c\ub294 \ubc29\uc2dd\uc73c\ub85c \ud559\uc2b5\uc744 \ud558\ub294\ub370, \uc774\ub54c \uac01 \uce35\uc744 \uac70\uce58\uba74\uc11c \ubcc0\ud654\ub7c9(\uadf8\ub808\uc774\ub514\uc5b8\ud2b8)\uc774 \uc810\uc810 \uc791\uc5b4\uc838\uc11c \uacb0\uad6d \uc81c\ub300\ub85c \ub41c \ud559\uc2b5\uc774 \uc774\ub904\uc9c0\uc9c0 \uc54a\uac8c \ub41c\ub2e4. \uc774\ub294 \ub9c8\uce58 \uae34 \uac70\ub9ac\ub97c \uac70\uce58\uba74\uc11c \uc804\ub2ec\ub418\ub294 \uba54\uc2dc\uc9c0\uac00 \uc810\uc810 \uc57d\ud574\uc9c0\ub2e4\uac00 \uacb0\uad6d \uc544\uc608 \uc804\ub2ec\ub418\uc9c0 \uc54a\ub294 \uac83\uacfc \ube44\uc2b7\ud558\ub2e4. ---------- why?</p> <p>\ub530\ub77c\uc11c \u221adk \ub85c \ub098\ub220\uc8fc\ub294 \uc2a4\ucf00\uc77c\ub9c1(Scaling) \uacfc\uc815\uc740 \ud2b8\ub79c\uc2a4\ud3ec\uba38 \ubaa8\ub378\uc758 \uc548\uc815\uc801\uc778 \ud559\uc2b5\uc744 \uc704\ud574 \ub9e4\uc6b0 \uc911\uc694\ud55c \ub2e8\uacc4\uc774\ub2e4. \uc774\ub294 \ub9c8\uce58 \uc5ec\ub7ec \uc758\uacac\uc744 \uade0\ud604 \uc788\uac8c \ub4e3\uace0 \uacb0\uc815\uc744 \ub0b4\ub9ac\ub294 \uac83\uacfc \uac19\uc740 \uc6d0\ub9ac\ub85c, \ub354 \ud6a8\uacfc\uc801\uc778 \ud559\uc2b5\uc744 \uac00\ub2a5\ud558\uac8c \ud55c\ub2e4.</p> <p>\uc804\uccb4 \ucf54\ub4dc\ub97c \ub2e4\uc2dc \uc791\uc131\ud574 \ubcf4\uaca0\uc2b5\ub2c8\ub2e4.</p> <pre><code>import torch\nimport torch.nn as nn\nimport torch.nn.functional as F\n\n# \uace0\uc815\ub41c \ub09c\uc218 \uc2dc\ub4dc \uc124\uc815\ntorch.manual_seed(1111)\n\n# \ubc30\uce58 \ud06c\uae30, \uc2dc\ud000\uc2a4 \uae38\uc774, \ucc44\ub110 \uc218 \uc124\uc815\nbatch_size, seq_length, num_channels = 2, 4, 4\ninput_tensor = torch.randn(batch_size, seq_length, num_channels)\n\n# \uac01 \ud5e4\ub4dc\uc758 \ud06c\uae30\nhead_size = 16\n\n# Key, Query, Value \ubcc0\ud658\uc744 \uc704\ud55c \uc120\ud615 \ub808\uc774\uc5b4\nkey_transform = nn.Linear(num_channels, head_size, bias=False)\nquery_transform = nn.Linear(num_channels, head_size, bias=False)\nvalue_transform = nn.Linear(num_channels, head_size, bias=False)\n\n# Key, Query, Value \ubcc0\ud658 \uc218\ud589\nkeys = key_transform(input_tensor)\n\bqueries = key_transform(input_tensor)\nvalues = key_transform(input_tensor)\n\n# Attention \uc2a4\ucf54\uc5b4 \uacc4\uc0b0\nscaling_factor = channel_size ** -0.5\nattention_scores = queries @ keys.transpose(-2, -1) * scaling_factor\n\n# \ud558\uc0bc\uac01\ud589\ub82c \uc0dd\uc131 \ubc0f \ub9c8\uc2a4\ud0b9\nmask_lower_triangle = torch.tril(torch.ones(seq_length, seq_length))\nattention_scores = attention_scores.masked_fill(mask_lower_triangle == 0, float('-inf'))\n\n# \uc18c\ud504\ud2b8\ub9e5\uc2a4 \ud568\uc218\ub97c \uc0ac\uc6a9\ud574 \ud655\ub960 \uc815\uaddc\ud654\nnormalized_scores = F.softmax(attentino_scores, dim=-1)\n\n# \ucd5c\uc885 \ucd9c\ub825 \uacc4\uc0b0\noutput_tensor = normalized_scores @ values\n\noutput_tensor\n</code></pre> <p>\uba3c\uc800 \ud544\uc694\ud55c \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \uc784\ud3ec\ud2b8\ud558\uace0 \ub09c\uc218 \uc2dc\ub4dc\ub97c \uc124\uc815\ud55c\ub2e4. \ubc30\uce58 \ud06c\uae30, \uc2dc\ud000\uc2a4 \uae38\uc774, \ucc44\ub110 \uc218\ub97c \uc815\uc758\ud558\uace0 \uc785\ub825 \ud150\uc11c\ub97c \uc0dd\uc131\ud55c\ub2e4. \uac01 \ud5e4\ub4dc\uc758 \ud06c\uae30\ub97c 16\uc73c\ub85c \uc124\uc815\ud55c\ub2e4.</p> <p>Key, Query, Value \ubcc0\ud658\uc744 \uc704\ud55c \uc120\ud615 \ub808\uc774\uc5b4\ub97c \uc815\uc758\ud558\uace0, \uc774\ub97c \uc0ac\uc6a9\ud574 \uc785\ub825 \ud150\uc11c\ub97c \ubcc0\ud658\ud55c\ub2e4.</p> <p>\uc5b4\ud150\uc158 \uc2a4\ucf54\uc5b4\ub97c \uacc4\uc0b0\ud558\uae30 \uc704\ud574 Query\uc640 Key\uc758 \ud589\ub82c\uacf1\uc744 \uc218\ud589\ud55c\ub2e4. \uadf8 \ud6c4 \ud558\uc0bc\uac01\ud589\ub82c\uc744 \uc0dd\uc131\ud574 \ub9c8\uc2a4\ud0b9\uc744 \uc801\uc6a9\ud55c\ub2e4. \uc774\ub294 \uac01 \ud1a0\ud070\ub4e4\ub9cc \ucc38\uc870\ud560 \uc218 \uc788\uac8c \ud55c\ub2e4.</p> <p>\uc18c\ud504\ud2b8\ub9e5\uc2a4 \ud568\uc218\ub97c \uc0ac\uc6a9\ud574 \uc5b4\ud150\uc158 \uc2a4\ucf54\uc5b4\ub97c \ud655\ub960\ub85c \uc815\uaddc\ud654\ud55c\ub2e4. \ub9c8\uc9c0\ub9c9\uc73c\ub85c, \uc815\uaddc\ud654\ub41c \uc2a4\ucf54\uc5b4\uc640 Value\uc758 \ud589\ub82c\uacf1\uc744 \ud1b5\ud574 \ucd5c\uc885 \ucd9c\ub825 \ud150\uc11c\ub97c \uacc4\uc0b0\ud560 \uc218 \uc788\ub2e4. \uc774 \uacfc\uc815\uc744 \ud1b5\ud574 \u221adk \uac00 \uc801\uc6a9\ub418\uba70, \uc774\ub85c\uc368 \uc140\ud504 \uc5b4\ud150\uc158 \uba54\ucee4\ub2c8\uc998\uc758 \uc804\uccb4 \ud750\ub984\uc744 \uad6c\ud604\ud574 \ubd24\ub2e4.</p>"},{"location":"ai/GliNER%EA%B3%BC%20DPO-LoRA%EB%A5%BC%20%ED%99%9C%EC%9A%A9%ED%95%9C%20%EB%AA%A8%EB%8D%B8%20%ED%8C%8C%EC%9D%B8%ED%8A%9C%EB%8B%9D/","title":"GliNER\uacfc DPO-LoRA\ub97c \ud65c\uc6a9\ud55c \ubaa8\ub378 \ud30c\uc778\ud29c\ub2dd","text":""},{"location":"ai/GliNER%EA%B3%BC%20DPO-LoRA%EB%A5%BC%20%ED%99%9C%EC%9A%A9%ED%95%9C%20%EB%AA%A8%EB%8D%B8%20%ED%8C%8C%EC%9D%B8%ED%8A%9C%EB%8B%9D/#gliner-dpo-lora","title":"GliNER\uacfc DPO-LoRA\ub97c \ud65c\uc6a9\ud55c \ubaa8\ub378 \ud30c\uc778\ud29c\ub2dd","text":""},{"location":"ai/GliNER%EA%B3%BC%20DPO-LoRA%EB%A5%BC%20%ED%99%9C%EC%9A%A9%ED%95%9C%20%EB%AA%A8%EB%8D%B8%20%ED%8C%8C%EC%9D%B8%ED%8A%9C%EB%8B%9D/#_1","title":"\ud504\ub85c\uc81d\ud2b8 \ubc30\uacbd","text":"<p>2024\ub144 3\uc6d4\ubd80\ud130 5\uc6d4\uae4c\uc9c0 ai-butler-alfredo-api\uc640 ai-lab \ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c Named Entity Recognition(NER) \ubaa8\ub378\uacfc \uc5b8\uc5b4 \ubaa8\ub378\uc758 \ud30c\uc778\ud29c\ub2dd\uc744 \uc9c4\ud589\ud588\ub2e4. \ud2b9\ud788 \ud55c\uad6d\uc5b4 \ud2b9\ud654 \uc131\ub2a5\uc744 \uc704\ud574 GliNER \ubaa8\ub378\uc744 \ud65c\uc6a9\ud55c \ub77c\ubca8\ub9c1 \uc790\ub3d9\ud654\uc640 DPO(Direct Preference Optimization)\uc640 LoRA\ub97c \uacb0\ud569\ud55c \ud6a8\uc728\uc801\uc778 \ud30c\uc778\ud29c\ub2dd \ubc29\ubc95\ub860\uc744 \uc2e4\ud5d8\ud588\ub2e4.</p> <p></p>"},{"location":"ai/GliNER%EA%B3%BC%20DPO-LoRA%EB%A5%BC%20%ED%99%9C%EC%9A%A9%ED%95%9C%20%EB%AA%A8%EB%8D%B8%20%ED%8C%8C%EC%9D%B8%ED%8A%9C%EB%8B%9D/#_2","title":"\uae30\uc220 \uc2a4\ud0dd","text":"<ul> <li>\ubaa8\ub378: GliNER, LitLlama, LLaMA-2</li> <li>\ud30c\uc778\ud29c\ub2dd: LoRA (Low-Rank Adaptation), DPO (Direct Preference Optimization)</li> <li>\ub370\uc774\ud130 \ucc98\ub9ac: PyTorch, Transformers, Datasets</li> <li>\ub77c\ubca8\ub9c1: Custom annotation pipeline with GliNER</li> <li>\uc2e4\ud5d8 \uad00\ub9ac: Weights &amp; Biases, MLflow</li> </ul>"},{"location":"ai/GliNER%EA%B3%BC%20DPO-LoRA%EB%A5%BC%20%ED%99%9C%EC%9A%A9%ED%95%9C%20%EB%AA%A8%EB%8D%B8%20%ED%8C%8C%EC%9D%B8%ED%8A%9C%EB%8B%9D/#gliner","title":"GliNER\ub97c \ud65c\uc6a9\ud55c \uc790\ub3d9 \ub77c\ubca8\ub9c1 \uc2dc\uc2a4\ud15c","text":""},{"location":"ai/GliNER%EA%B3%BC%20DPO-LoRA%EB%A5%BC%20%ED%99%9C%EC%9A%A9%ED%95%9C%20%EB%AA%A8%EB%8D%B8%20%ED%8C%8C%EC%9D%B8%ED%8A%9C%EB%8B%9D/#1-gliner","title":"1. GliNER \ubaa8\ub378 \ub3c4\uc785 \ubc30\uacbd","text":"<p>\uae30\uc874\uc758 SpaCy\ub098 BERT \uae30\ubc18 NER \ubaa8\ub378\uc740 \ubbf8\ub9ac \uc815\uc758\ub41c \uc5d4\ud2f0\ud2f0 \ud0c0\uc785\uc5d0 \uc81c\ud55c\ub418\uc5b4 \uc788\uc5c8\ub2e4. \uc6b0\ub9ac \ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c\ub294 \ub3c4\uba54\uc778 \ud2b9\ud654 \uc5d4\ud2f0\ud2f0\ub97c \ub3d9\uc801\uc73c\ub85c \uc778\uc2dd\ud574\uc57c \ud588\uae30 \ub54c\ubb38\uc5d0 GliNER(Generative Language-based Named Entity Recognition) \ubaa8\ub378\uc744 \uc120\ud0dd\ud588\ub2e4.</p> <pre><code># gliner_processor.py\nimport torch\nfrom gliner import GLiNER\nimport asyncio\nfrom typing import List, Dict, Any\n\nclass GliNERProcessor:\n    def __init__(self, model_name: str = \"urchade/gliner_multi\"):\n        self.model = GLiNER.from_pretrained(model_name)\n        self.device = torch.device(\"cuda\" if torch.cuda.is_available() else \"cpu\")\n        self.model.to(self.device)\n\n    async def extract_entities(self, text: str, labels: List[str]) -&gt; List[Dict[str, Any]]:\n        \"\"\"\ube44\ub3d9\uae30 \uc5d4\ud2f0\ud2f0 \ucd94\ucd9c\"\"\"\n        loop = asyncio.get_event_loop()\n\n        # CPU \uc9d1\uc57d\uc801 \uc791\uc5c5\uc744 \ubcc4\ub3c4 \uc2a4\ub808\ub4dc\uc5d0\uc11c \uc2e4\ud589\n        entities = await loop.run_in_executor(\n            None, \n            self._extract_sync, \n            text, \n            labels\n        )\n\n        return entities\n\n    def _extract_sync(self, text: str, labels: List[str]) -&gt; List[Dict[str, Any]]:\n        \"\"\"\ub3d9\uae30 \uc5d4\ud2f0\ud2f0 \ucd94\ucd9c (\ub0b4\ubd80 \uba54\uc11c\ub4dc)\"\"\"\n        try:\n            entities = self.model.predict_entities(text, labels, threshold=0.7)\n\n            # \uacb0\uacfc \ud6c4\ucc98\ub9ac\n            processed_entities = []\n            for entity in entities:\n                processed_entities.append({\n                    'text': entity['text'],\n                    'label': entity['label'],\n                    'start': entity['start'],\n                    'end': entity['end'],\n                    'confidence': entity.get('score', 0.0)\n                })\n\n            return processed_entities\n\n        except Exception as e:\n            print(f\"Entity extraction error: {e}\")\n            return []\n</code></pre>"},{"location":"ai/GliNER%EA%B3%BC%20DPO-LoRA%EB%A5%BC%20%ED%99%9C%EC%9A%A9%ED%95%9C%20%EB%AA%A8%EB%8D%B8%20%ED%8C%8C%EC%9D%B8%ED%8A%9C%EB%8B%9D/#2","title":"2. \uc601\uc5b4 \ubc88\uc5ed\uacfc \ub77c\ubca8\ub9c1 \ud30c\uc774\ud504\ub77c\uc778","text":"<p>\ud55c\uad6d\uc5b4 \ud14d\uc2a4\ud2b8\uc758 NER \uc131\ub2a5\uc744 \ub192\uc774\uae30 \uc704\ud574 \uc601\uc5b4 \ubc88\uc5ed\uc744 \uac70\uccd0 \ub77c\ubca8\ub9c1\ud558\ub294 \ud30c\uc774\ud504\ub77c\uc778\uc744 \uad6c\ucd95\ud588\ub2e4.</p> <pre><code># translation_labeling.py\nfrom transformers import pipeline\nimport asyncio\nimport aiohttp\nfrom typing import List, Tuple\n\nclass TranslationLabelingPipeline:\n    def __init__(self):\n        self.translator = pipeline(\n            \"translation\", \n            model=\"Helsinki-NLP/opus-mt-ko-en\",\n            device=0 if torch.cuda.is_available() else -1\n        )\n        self.gliner = GliNERProcessor()\n        self.back_translator = pipeline(\n            \"translation\",\n            model=\"Helsinki-NLP/opus-mt-en-ko\", \n            device=0 if torch.cuda.is_available() else -1\n        )\n\n    async def process_batch(self, texts: List[str], labels: List[str]) -&gt; List[Dict]:\n        \"\"\"\ubc30\uce58 \ub2e8\uc704 \ud14d\uc2a4\ud2b8 \ucc98\ub9ac\"\"\"\n        results = []\n\n        # 1\ub2e8\uacc4: \ud55c\uad6d\uc5b4 -&gt; \uc601\uc5b4 \ubc88\uc5ed\n        translated_texts = []\n        for text in texts:\n            try:\n                translated = self.translator(text, max_length=512)[0]['translation_text']\n                translated_texts.append(translated)\n            except Exception as e:\n                print(f\"Translation error: {e}\")\n                translated_texts.append(text)  # \ubc88\uc5ed \uc2e4\ud328 \uc2dc \uc6d0\ubb38 \uc0ac\uc6a9\n\n        # 2\ub2e8\uacc4: \uc601\uc5b4 \ud14d\uc2a4\ud2b8\uc5d0\uc11c \uc5d4\ud2f0\ud2f0 \ucd94\ucd9c\n        entity_tasks = []\n        for translated_text in translated_texts:\n            task = self.gliner.extract_entities(translated_text, labels)\n            entity_tasks.append(task)\n\n        entity_results = await asyncio.gather(*entity_tasks)\n\n        # 3\ub2e8\uacc4: \uacb0\uacfc \uc815\ub9ac \ubc0f \uc6d0\ubb38\uacfc \ub9e4\ud551\n        for i, (original_text, entities) in enumerate(zip(texts, entity_results)):\n            results.append({\n                'original_text': original_text,\n                'translated_text': translated_texts[i],\n                'entities': entities,\n                'entity_count': len(entities)\n            })\n\n        return results\n</code></pre>"},{"location":"ai/GliNER%EA%B3%BC%20DPO-LoRA%EB%A5%BC%20%ED%99%9C%EC%9A%A9%ED%95%9C%20%EB%AA%A8%EB%8D%B8%20%ED%8C%8C%EC%9D%B8%ED%8A%9C%EB%8B%9D/#dpo-lora","title":"DPO + LoRA \ud30c\uc778\ud29c\ub2dd \uad6c\ud604","text":""},{"location":"ai/GliNER%EA%B3%BC%20DPO-LoRA%EB%A5%BC%20%ED%99%9C%EC%9A%A9%ED%95%9C%20%EB%AA%A8%EB%8D%B8%20%ED%8C%8C%EC%9D%B8%ED%8A%9C%EB%8B%9D/#1-lora","title":"1. LoRA \uc124\uc815\uacfc \ubaa8\ub378 \uc900\ube44","text":"<p>LitLlama\ub97c \ubca0\uc774\uc2a4\ub85c \ud558\uc5ec \ud6a8\uc728\uc801\uc778 \ud30c\uc778\ud29c\ub2dd\uc744 \uc704\ud574 LoRA\ub97c \uc801\uc6a9\ud588\ub2e4.</p> <pre><code># lora_config.py\nfrom peft import LoraConfig, get_peft_model, TaskType\nimport torch\nfrom transformers import LlamaForCausalLM, LlamaTokenizer\n\nclass LoRAModelManager:\n    def __init__(self, base_model_path: str, lora_rank: int = 16):\n        self.base_model_path = base_model_path\n        self.lora_config = LoraConfig(\n            r=lora_rank,\n            lora_alpha=32,\n            target_modules=[\"q_proj\", \"k_proj\", \"v_proj\", \"o_proj\"],\n            lora_dropout=0.1,\n            bias=\"none\",\n            task_type=TaskType.CAUSAL_LM\n        )\n\n        self.model = None\n        self.tokenizer = None\n\n    def load_model(self):\n        \"\"\"\ubca0\uc774\uc2a4 \ubaa8\ub378\uacfc \ud1a0\ud06c\ub098\uc774\uc800 \ub85c\ub4dc\"\"\"\n        self.tokenizer = LlamaTokenizer.from_pretrained(self.base_model_path)\n        self.model = LlamaForCausalLM.from_pretrained(\n            self.base_model_path,\n            torch_dtype=torch.float16,\n            device_map=\"auto\"\n        )\n\n        # LoRA \uc5b4\ub311\ud130 \uc801\uc6a9\n        self.model = get_peft_model(self.model, self.lora_config)\n\n        # \ud559\uc2b5 \uac00\ub2a5\ud55c \ud30c\ub77c\ubbf8\ud130 \ucd9c\ub825\n        self.model.print_trainable_parameters()\n\n        return self.model, self.tokenizer\n</code></pre>"},{"location":"ai/GliNER%EA%B3%BC%20DPO-LoRA%EB%A5%BC%20%ED%99%9C%EC%9A%A9%ED%95%9C%20%EB%AA%A8%EB%8D%B8%20%ED%8C%8C%EC%9D%B8%ED%8A%9C%EB%8B%9D/#2-dpo","title":"2. DPO \ud2b8\ub808\uc774\ub108 \uad6c\ud604","text":"<p>\uc120\ud638\ub3c4 \uae30\ubc18 \ucd5c\uc801\ud654\ub97c \uc704\ud55c DPO \ud2b8\ub808\uc774\ub108\ub97c \uad6c\ud604\ud588\ub2e4.</p> <pre><code># dpo_trainer.py\nimport torch\nimport torch.nn.functional as F\nfrom transformers import Trainer, TrainingArguments\nfrom typing import Dict, List, Any\nimport wandb\n\nclass DPOTrainer(Trainer):\n    def __init__(self, model, tokenizer, beta: float = 0.1, **kwargs):\n        super().__init__(model=model, **kwargs)\n        self.tokenizer = tokenizer\n        self.beta = beta\n        self.ref_model = None\n\n    def setup_reference_model(self, ref_model_path: str):\n        \"\"\"\ucc38\uc870 \ubaa8\ub378 \uc124\uc815 (frozen)\"\"\"\n        self.ref_model = LlamaForCausalLM.from_pretrained(\n            ref_model_path,\n            torch_dtype=torch.float16,\n            device_map=\"auto\"\n        )\n        self.ref_model.eval()\n\n        # \ucc38\uc870 \ubaa8\ub378 \uadf8\ub798\ub514\uc5b8\ud2b8 \ube44\ud65c\uc131\ud654\n        for param in self.ref_model.parameters():\n            param.requires_grad = False\n\n    def dpo_loss(self, policy_chosen_logps, policy_rejected_logps, \n                 reference_chosen_logps, reference_rejected_logps):\n        \"\"\"DPO \uc190\uc2e4 \ud568\uc218 \uacc4\uc0b0\"\"\"\n\n        policy_logratios = policy_chosen_logps - policy_rejected_logps\n        reference_logratios = reference_chosen_logps - reference_rejected_logps\n\n        # DPO \uc190\uc2e4\n        losses = -F.logsigmoid(self.beta * (policy_logratios - reference_logratios))\n\n        # \uc815\ud655\ub3c4 \uacc4\uc0b0 (chosen &gt; rejected\uc778 \ube44\uc728)\n        chosen_rewards = self.beta * (policy_chosen_logps - reference_chosen_logps)\n        rejected_rewards = self.beta * (policy_rejected_logps - reference_rejected_logps)\n        accuracy = (chosen_rewards &gt; rejected_rewards).float().mean()\n\n        return losses.mean(), accuracy\n\n    def compute_loss(self, model, inputs, return_outputs=False):\n        \"\"\"\ubc30\uce58\ubcc4 \uc190\uc2e4 \uacc4\uc0b0\"\"\"\n        chosen_inputs = {k: v for k, v in inputs.items() if 'chosen' in k}\n        rejected_inputs = {k: v for k, v in inputs.items() if 'rejected' in k}\n\n        # Policy \ubaa8\ub378 \ub85c\uadf8\ud655\ub960 \uacc4\uc0b0\n        chosen_outputs = model(**chosen_inputs)\n        rejected_outputs = model(**rejected_inputs)\n\n        policy_chosen_logps = self._get_batch_logps(\n            chosen_outputs.logits, chosen_inputs['chosen_labels']\n        )\n        policy_rejected_logps = self._get_batch_logps(\n            rejected_outputs.logits, rejected_inputs['rejected_labels']\n        )\n\n        # Reference \ubaa8\ub378 \ub85c\uadf8\ud655\ub960 \uacc4\uc0b0\n        with torch.no_grad():\n            ref_chosen_outputs = self.ref_model(**chosen_inputs)\n            ref_rejected_outputs = self.ref_model(**rejected_inputs)\n\n            reference_chosen_logps = self._get_batch_logps(\n                ref_chosen_outputs.logits, chosen_inputs['chosen_labels']\n            )\n            reference_rejected_logps = self._get_batch_logps(\n                ref_rejected_outputs.logits, rejected_inputs['rejected_labels']\n            )\n\n        loss, accuracy = self.dpo_loss(\n            policy_chosen_logps, policy_rejected_logps,\n            reference_chosen_logps, reference_rejected_logps\n        )\n\n        # \uba54\ud2b8\ub9ad \ub85c\uae45\n        if self.state.global_step % 100 == 0:\n            wandb.log({\n                \"train/dpo_loss\": loss.item(),\n                \"train/accuracy\": accuracy.item(),\n                \"train/policy_chosen_logps\": policy_chosen_logps.mean().item(),\n                \"train/policy_rejected_logps\": policy_rejected_logps.mean().item()\n            })\n\n        return (loss, chosen_outputs) if return_outputs else loss\n\n    def _get_batch_logps(self, logits, labels):\n        \"\"\"\ubc30\uce58\uc758 \ub85c\uadf8 \ud655\ub960 \uacc4\uc0b0\"\"\"\n        logprobs = F.log_softmax(logits, dim=-1)\n        per_token_logps = torch.gather(logprobs, dim=2, index=labels.unsqueeze(2)).squeeze(2)\n\n        # \ud328\ub529 \ud1a0\ud070 \ub9c8\uc2a4\ud0b9\n        mask = (labels != self.tokenizer.pad_token_id).float()\n        per_token_logps = per_token_logps * mask\n\n        return per_token_logps.sum(dim=-1) / mask.sum(dim=-1)\n</code></pre>"},{"location":"ai/GliNER%EA%B3%BC%20DPO-LoRA%EB%A5%BC%20%ED%99%9C%EC%9A%A9%ED%95%9C%20%EB%AA%A8%EB%8D%B8%20%ED%8C%8C%EC%9D%B8%ED%8A%9C%EB%8B%9D/#3","title":"3. \ube44\ub3d9\uae30 \uc791\uc5c5 \ucc98\ub9ac \uc2dc\uc2a4\ud15c","text":"<p>\ub300\uc6a9\ub7c9 \ub370\uc774\ud130\uc14b \ucc98\ub9ac\ub97c \uc704\ud55c \ube44\ub3d9\uae30 \uc791\uc5c5 \uc2dc\uc2a4\ud15c\uc744 \uad6c\ucd95\ud588\ub2e4.</p> <pre><code># async_trainer.py\nimport asyncio\nimport torch.multiprocessing as mp\nfrom concurrent.futures import ThreadPoolExecutor\nfrom dataclasses import dataclass\nfrom typing import Optional, Callable\nimport queue\n\n@dataclass\nclass TrainingJob:\n    job_id: str\n    model_config: Dict\n    dataset_path: str\n    output_path: str\n    callback: Optional[Callable] = None\n\nclass AsyncTrainingManager:\n    def __init__(self, max_workers: int = 4):\n        self.max_workers = max_workers\n        self.job_queue = asyncio.Queue()\n        self.active_jobs = {}\n        self.executor = ThreadPoolExecutor(max_workers=max_workers)\n\n    async def submit_job(self, job: TrainingJob):\n        \"\"\"\ud559\uc2b5 \uc791\uc5c5 \uc81c\ucd9c\"\"\"\n        await self.job_queue.put(job)\n        self.active_jobs[job.job_id] = {\n            'status': 'queued',\n            'progress': 0,\n            'start_time': None,\n            'end_time': None\n        }\n\n        # \uc791\uc5c5 \ucc98\ub9ac \uc2dc\uc791\n        asyncio.create_task(self._process_job(job))\n\n    async def _process_job(self, job: TrainingJob):\n        \"\"\"\uac1c\ubcc4 \uc791\uc5c5 \ucc98\ub9ac\"\"\"\n        try:\n            self.active_jobs[job.job_id]['status'] = 'running'\n            self.active_jobs[job.job_id]['start_time'] = asyncio.get_event_loop().time()\n\n            # CPU \uc9d1\uc57d\uc801 \ud559\uc2b5 \uc791\uc5c5\uc744 \ubcc4\ub3c4 \ud504\ub85c\uc138\uc2a4\uc5d0\uc11c \uc2e4\ud589\n            loop = asyncio.get_event_loop()\n            result = await loop.run_in_executor(\n                self.executor,\n                self._train_model_sync,\n                job\n            )\n\n            self.active_jobs[job.job_id]['status'] = 'completed'\n            self.active_jobs[job.job_id]['end_time'] = asyncio.get_event_loop().time()\n\n            # \ucf5c\ubc31 \uc2e4\ud589\n            if job.callback:\n                await job.callback(job.job_id, result)\n\n        except Exception as e:\n            self.active_jobs[job.job_id]['status'] = 'failed'\n            self.active_jobs[job.job_id]['error'] = str(e)\n            print(f\"Job {job.job_id} failed: {e}\")\n\n    def _train_model_sync(self, job: TrainingJob):\n        \"\"\"\ub3d9\uae30 \ubaa8\ub378 \ud559\uc2b5 (\ubcc4\ub3c4 \ud504\ub85c\uc138\uc2a4)\"\"\"\n        # LoRA \ubaa8\ub378 \ub9e4\ub2c8\uc800 \ucd08\uae30\ud654\n        lora_manager = LoRAModelManager(job.model_config['base_model_path'])\n        model, tokenizer = lora_manager.load_model()\n\n        # DPO \ud2b8\ub808\uc774\ub108 \uc124\uc815\n        trainer = DPOTrainer(\n            model=model,\n            tokenizer=tokenizer,\n            beta=job.model_config.get('beta', 0.1),\n            args=TrainingArguments(\n                output_dir=job.output_path,\n                per_device_train_batch_size=2,\n                gradient_accumulation_steps=8,\n                num_train_epochs=3,\n                learning_rate=5e-5,\n                logging_steps=100,\n                save_steps=500,\n                evaluation_strategy=\"steps\",\n                eval_steps=500,\n                warmup_ratio=0.1,\n                remove_unused_columns=False,\n                dataloader_num_workers=4,\n            )\n        )\n\n        # \ucc38\uc870 \ubaa8\ub378 \uc124\uc815\n        trainer.setup_reference_model(job.model_config['base_model_path'])\n\n        # \ub370\uc774\ud130\uc14b \ub85c\ub4dc\n        dataset = load_preference_dataset(job.dataset_path)\n\n        # \ud559\uc2b5 \uc2e4\ud589\n        trainer.train()\n\n        # \ubaa8\ub378 \uc800\uc7a5\n        trainer.save_model()\n\n        return {\n            'job_id': job.job_id,\n            'model_path': job.output_path,\n            'training_completed': True\n        }\n</code></pre>"},{"location":"ai/GliNER%EA%B3%BC%20DPO-LoRA%EB%A5%BC%20%ED%99%9C%EC%9A%A9%ED%95%9C%20%EB%AA%A8%EB%8D%B8%20%ED%8C%8C%EC%9D%B8%ED%8A%9C%EB%8B%9D/#_3","title":"\ud074\ub7ec\uc2a4\ud130\ub9c1\uacfc \ub370\uc774\ud130 \ubd84\uc11d","text":""},{"location":"ai/GliNER%EA%B3%BC%20DPO-LoRA%EB%A5%BC%20%ED%99%9C%EC%9A%A9%ED%95%9C%20%EB%AA%A8%EB%8D%B8%20%ED%8C%8C%EC%9D%B8%ED%8A%9C%EB%8B%9D/#_4","title":"\ub370\uc774\ud130 \ud488\uc9c8 \ud3c9\uac00\ub97c \uc704\ud55c \ud074\ub7ec\uc2a4\ud130\ub9c1","text":"<pre><code># clustering_analysis.py\nfrom sklearn.cluster import KMeans\nfrom sentence_transformers import SentenceTransformer\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom typing import List, Dict\n\nclass DataQualityAnalyzer:\n    def __init__(self, embedding_model: str = \"sentence-transformers/all-MiniLM-L6-v2\"):\n        self.encoder = SentenceTransformer(embedding_model)\n\n    def analyze_dataset_quality(self, texts: List[str], num_clusters: int = 10):\n        \"\"\"\ub370\uc774\ud130\uc14b \ud488\uc9c8 \ubd84\uc11d\"\"\"\n\n        # \ud14d\uc2a4\ud2b8 \uc784\ubca0\ub529 \uc0dd\uc131\n        embeddings = self.encoder.encode(texts, show_progress_bar=True)\n\n        # K-means \ud074\ub7ec\uc2a4\ud130\ub9c1\n        kmeans = KMeans(n_clusters=num_clusters, random_state=42)\n        cluster_labels = kmeans.fit_predict(embeddings)\n\n        # \ud074\ub7ec\uc2a4\ud130\ubcc4 \ubd84\uc11d\n        cluster_analysis = {}\n        for i in range(num_clusters):\n            cluster_texts = [texts[j] for j in range(len(texts)) if cluster_labels[j] == i]\n            cluster_analysis[i] = {\n                'size': len(cluster_texts),\n                'samples': cluster_texts[:3],  # \uc0d8\ud50c 3\uac1c\n                'avg_length': np.mean([len(text) for text in cluster_texts])\n            }\n\n        return cluster_analysis, embeddings, cluster_labels\n</code></pre>"},{"location":"ai/GliNER%EA%B3%BC%20DPO-LoRA%EB%A5%BC%20%ED%99%9C%EC%9A%A9%ED%95%9C%20%EB%AA%A8%EB%8D%B8%20%ED%8C%8C%EC%9D%B8%ED%8A%9C%EB%8B%9D/#_5","title":"\uc131\uacfc \ubc0f \uad50\ud6c8","text":"<p>\uc774 \ud504\ub85c\uc81d\ud2b8\ub97c \ud1b5\ud574 \ub2e4\uc74c\uacfc \uac19\uc740 \uc131\uacfc\ub97c \ub2ec\uc131\ud588\ub2e4:</p> <ol> <li>GliNER \ud65c\uc6a9\ud55c \ub77c\ubca8\ub9c1 \uc790\ub3d9\ud654\ub85c \ub370\uc774\ud130 \uc900\ube44 \uc2dc\uac04 70% \ub2e8\ucd95</li> <li>DPO + LoRA \uc870\ud569\uc73c\ub85c GPU \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9 60% \uc808\uc57d\ud558\uba74\uc11c\ub3c4 \uc131\ub2a5 \uc720\uc9c0</li> <li>\ube44\ub3d9\uae30 \uc791\uc5c5 \ucc98\ub9ac\ub85c \ub2e4\uc911 \uc2e4\ud5d8 \ubcd1\ub82c \uc2e4\ud589 \ud658\uacbd \uad6c\ucd95</li> <li>\ud55c\uad6d\uc5b4 \ud2b9\ud654 \ubaa8\ub378 \uc131\ub2a5 15% \ud5a5\uc0c1</li> </ol> <p>\ud2b9\ud788 \uc601\uc5b4 \ubc88\uc5ed\uc744 \uac70\uce5c \ub77c\ubca8\ub9c1 \ud30c\uc774\ud504\ub77c\uc778\uc740 \ud55c\uad6d\uc5b4 NER \uc131\ub2a5\uc744 \ud06c\uac8c \ud5a5\uc0c1\uc2dc\ucf30\uace0, DPO\ub97c \ud65c\uc6a9\ud55c \uc120\ud638\ub3c4 \uae30\ubc18 \ud559\uc2b5\uc740 \uae30\uc874 supervised fine-tuning \ub300\ube44 \ub354 \uc548\uc815\uc801\uc778 \uacb0\uacfc\ub97c \ubcf4\uc5ec\uc8fc\uc5c8\ub2e4.</p>"},{"location":"ai/GliNER%EA%B3%BC%20DPO-LoRA%EB%A5%BC%20%ED%99%9C%EC%9A%A9%ED%95%9C%20%EB%AA%A8%EB%8D%B8%20%ED%8C%8C%EC%9D%B8%ED%8A%9C%EB%8B%9D/#_6","title":"\ud5a5\ud6c4 \uacc4\ud68d","text":"<p>\uc55e\uc73c\ub85c\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 \ubc29\ud5a5\uc73c\ub85c \uc5f0\uad6c\ub97c \ud655\uc7a5\ud560 \uc608\uc815\uc774\ub2e4:</p> <ul> <li>Constitutional AI\uc640 DPO \uacb0\ud569 \uc2e4\ud5d8</li> <li>\uba40\ud2f0\ubaa8\ub2ec \ubaa8\ub378\uc5d0 \ub300\ud55c LoRA \uc801\uc6a9</li> <li>\uc5f0\ud569\ud559\uc2b5(Federated Learning) \ud658\uacbd\uc5d0\uc11c\uc758 \ud30c\uc778\ud29c\ub2dd</li> <li>\uc790\ub3d9 \ud558\uc774\ud37c\ud30c\ub77c\ubbf8\ud130 \ud29c\ub2dd \uc2dc\uc2a4\ud15c \uad6c\ucd95</li> </ul>"},{"location":"ai/KoBERT/","title":"KoBERT","text":"<p>KoBERT\ub294 BERT \ubaa8\ub378\uc5d0\uc11c \ud55c\uad6d\uc5b4 \ub370\uc774\ud130\ub97c \ucd94\uac00\ub85c \ud559\uc2b5\uc2dc\ud0a8 \ubaa8\ub378\ub85c, \ud55c\uad6d\uc5b4 \uc704\ud0a4\uc5d0\uc11c 5\ubc31\ub9cc\uac1c\uc758 \ubb38\uc7a5\uacfc 54\ubc31\ub9cc\uac1c\uc758 \ub2e8\uc5b4\ub97c \ud559\uc2b5\uc2dc\ud0a8 \ubaa8\ub378\uc774\ub2e4. \ub530\ub77c\uc11c \ud55c\uad6d\uc5b4 \ub370\uc774\ud130\uc5d0 \ub300\ud574\uc11c\ub3c4 \ub192\uc740 \uc815\ud655\ub3c4\ub97c \ub0bc \uc218 \uc788\ub2e4\uace0 \ud55c\ub2e4.</p> <p>\uc774\ub7ec\ud55c BERT\uc758 \ud070 \ud2b9\uc9d5\uc740 \ubc29\ub300\ud55c \uc591\uc758 \ub370\uc774\ud130(\uc57d 33\uc5b5\uac1c \ub2e8\uc5b4)\ub85c \uba3c\uc800 \ud559\uc2b5(pretrain)\ub418\uc5c8\ub2e4\ub294 \uac83\uacfc, \uc790\uc2e0\uc758 \uc0ac\uc6a9 \ubaa9\uc801\uc5d0 \ub530\ub77c \ud30c\uc778\ud29c\ub2dd(finetuning)\uc774 \uac00\ub2a5\ud558\ub2e4\ub294 \uc810\uc774\ub2e4. \ub530\ub77c\uc11c output layer\ub9cc \ucd94\uac00\ub85c \ub2ec\uc544\uc8fc\uba74 \uc6d0\ud558\ub294 \uacb0\uacfc\ub97c \ucd9c\ub825\ud574\ub0b4\ub294 \uae30\uacc4\ubc88\uc5ed \ubaa8\ub378\uc744 \ub9cc\ub4e4\uc5b4 \ub0bc \uc218 \uc788\ub2e4.</p> <pre><code>class BERTDataset(Dataset):\n    def __init__(self, dataset, sent_idx, label_idx, bert_tokenizer, max_len,\n                 pad, pair):\n        transform = nlp.data.BERTSentenceTransform(\n            bert_tokenizer, max_seq_length=max_len, pad=pad, pair=pair)\n\n        self.sentences = [transform([i[sent_idx]]) for i in dataset]\n        self.labels = [np.int32(i[label_idx]) for i in dataset]\n\n    def __getitem__(self, i):\n        return (self.sentences[i] + (self.labels[i], ))\n\n    def __len__(self):\n        return (len(self.labels))\n</code></pre> <p>\ud558\uc774\ud37c \ud30c\ub77c\ubbf8\ud130\ub4e4\uc744 \uc870\uc815\ud574\uc900\ub2e4.</p> <pre><code># Setting parameters\nmax_len = 64\nbatch_size = 64\nwarmup_ratio = 0.1\nnum_epochs = 5\nmax_grad_norm = 1\nlog_interval = 200\nlearning_rate =  5e-5\n</code></pre> <p>\uc774\uc81c \ubc84\ud2b8\ud1a0\ud06c\ub098\uc774\uc800\uc640 \uc704\uc5d0\uc11c \uc815\uc758\ud55c \ud074\ub798\uc2a4\ub97c \uc801\uc6a9\ud574 \ud1a0\ud070\ud654\uc640 \ud328\ub529\uc744 \ud574\uc900\ub2e4.</p> <pre><code>#\ud1a0\ud070\ud654\ntokenizer = get_tokenizer()\ntok = nlp.data.BERTSPTokenizer(tokenizer, vocab, lower=False)\n\ndata_train = BERTDataset(dataset_train, 0, 1, tok, max_len, True, False)\ndata_test = BERTDataset(dataset_test, 0, 1, tok, max_len, True, False)\n</code></pre> <p>print(data_train[0]) \uc2e4\ud589</p> <pre><code>(array([   2, 1189,  517, 6188, 7245, 7063,  517,  463, 3486, 7836, 5966,\n        1698,  517, 6188, 7245, 7063,  517,  463, 1281, 7870, 1801, 6885,\n        7088, 5966, 1698, 5837, 5837,  517, 6188, 7245, 6398, 6037, 7063,\n         517,  463,  517,  463,  517,  364,  517,  364,    3,    1,    1,\n           1,    1,    1,    1,    1,    1,    1,    1,    1,    1,    1,\n           1,    1,    1,    1,    1,    1,    1,    1,    1], dtype=int32),\n array(42, dtype=int32),\n\n array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n       dtype=int32), 5)\n</code></pre> <p>\ucd9c\ub825\uac12\ub4e4\uc744 \ubcf4\uba74 3\uac1c\uc758 array\uac00 \ucd9c\ub825\ub418\ub294\ub370,  \uccab \ubc88\uc9f8\ub294 \ud328\ub529\ub41c \uc2dc\ud000\uc2a4,  \ub450 \ubc88\uc9f8\ub294 \uae38\uc774\uc640 \ud0c0\uc785\uc5d0 \ub300\ud55c \ub0b4\uc6a9,  \uc138 \ubc88\uc7ac\ub294 \uc5b4\ud150\uc158 \ub9c8\uc2a4\ud06c \uc2dc\ud000\uc2a4\uc774\ub2e4.</p> <p>\uc5b4\ud150\uc158 \ub9c8\uc2a4\ud06c\ub294 BERT\uc5d0 \ub370\uc774\ud130\uac00 \uc785\ub825\ub418\uc5c8\uc744 \ub54c \uc5b4\ud150\uc158 \ud568\uc218\uac00 \uc801\uc6a9\ub418\uc5b4 \uc5f0\uc0b0\uc774 \ub41c\ub2e4. \uc774\ub54c 1\ub85c \ud328\ub529\ub41c \uac12\ub4e4\uc740 \uc5f0\uc0b0\ud560 \ud544\uc694\uac00 \uc5c6\uae30 \ub54c\ubb38\uc5d0 \uc5f0\uc0b0\uc744 \ud558\uc9c0 \uc54a\uc544\ub3c4 \ub41c\ub2e4\uace0 \uc54c\ub824\uc8fc\ub294 \ub370\uc774\ud130\uac00 \uc788\uc5b4\uc57c \ud558\ub294\ub370 \uadf8\uac8c \ubc14\ub85c \uc5b4\ud150\uc158 \ub9c8\uc2a4\ud06c \uc2dc\ud000\uc2a4\uc778 \uac83\uc774\ub2e4. \uc774\ub807\uac8c BERT\ub098 KoBERT\uc5d0\ub294 \uc5b4\ud150\uc158 \ub9c8\uc2a4\ud06c \ub370\uc774\ud130\ub3c4 \ud568\uaed8 \uc785\ub825\ub418\uc5b4\uc57c \ud55c\ub2e4</p> <p>torch \ud615\uc2dd\uc758 dataset\uc744 \ub9cc\ub4e4\uc5b4\uc900\ub2e4.</p> <pre><code>train_dataloader = torch.utils.data.DataLoader(data_train, batch_size=batch_size, num_workers=5)\ntest_dataloader = torch.utils.data.DataLoader(data_test, batch_size=batch_size, num_workers=5)\n</code></pre>"},{"location":"ai/KoBERT/#kobert","title":"KoBERT \ud559\uc2b5\ubaa8\ub378 \ub9cc\ub4e4\uae30","text":"<p>\ud559\uc2b5\uc2dc\ud0ac KoBERT \ubaa8\ub378\uc744 \ub9cc\ub4e4\uc5b4\uc57c \ud558\ub294\ub370, \uc544\ub798 \ucf54\ub4dc\uc5d0\uc11c \ub2e4\uc911\ubd84\ub958\ud560 \ud074\ub798\uc2a4 \uc218 \ub9cc\ud07c num_classes \ubcc0\uc218\ub97c \uc218\uc815\ud574\uc8fc\uc5b4\uc57c \ud55c\ub2e4. \uc774\ubc88 \ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c\ub294 7\uac00\uc9c0\uc758 class\ub97c \ubd84\ub958\ud558\uae30 \ub54c\ubb38\uc5d0 7\ub85c \uc785\ub825\ud574\uc8fc\uc5c8\ub2e4.</p> <pre><code>class BERTClassifier(nn.Module):\n    def __init__(self,\n                 bert,\n                 hidden_size = 768,\n                 num_classes=7,   ##\ud074\ub798\uc2a4 \uc218 \uc870\uc815##\n                 dr_rate=None,\n                 params=None):\n        super(BERTClassifier, self).__init__()\n        self.bert = bert\n        self.dr_rate = dr_rate\n\n        self.classifier = nn.Linear(hidden_size , num_classes)\n        if dr_rate:\n            self.dropout = nn.Dropout(p=dr_rate)\n\n    def gen_attention_mask(self, token_ids, valid_length):\n        attention_mask = torch.zeros_like(token_ids)\n        for i, v in enumerate(valid_length):\n            attention_mask[i][:v] = 1\n        return attention_mask.float()\n\n    def forward(self, token_ids, valid_length, segment_ids):\n        attention_mask = self.gen_attention_mask(token_ids, valid_length)\n\n        _, pooler = self.bert(input_ids = token_ids, token_type_ids = segment_ids.long(), attention_mask = attention_mask.float().to(token_ids.device))\n        if self.dr_rate:\n            out = self.dropout(pooler)\n        return self.classifier(out)\n</code></pre> <pre><code>#BERT \ubaa8\ub378 \ubd88\ub7ec\uc624\uae30\nmodel = BERTClassifier(bertmodel,  dr_rate=0.5).to(device)\n\n#optimizer\uc640 schedule \uc124\uc815\nno_decay = ['bias', 'LayerNorm.weight']\noptimizer_grouped_parameters = [\n    {'params': [p for n, p in model.named_parameters() if not any(nd in n for nd in no_decay)], 'weight_decay': 0.01},\n    {'params': [p for n, p in model.named_parameters() if any(nd in n for nd in no_decay)], 'weight_decay': 0.0}\n]\n\noptimizer = AdamW(optimizer_grouped_parameters, lr=learning_rate)\nloss_fn = nn.CrossEntropyLoss()\n\nt_total = len(train_dataloader) * num_epochs\nwarmup_step = int(t_total * warmup_ratio)\n\nscheduler = get_cosine_schedule_with_warmup(optimizer, num_warmup_steps=warmup_step, num_training_steps=t_total)\n\n#\uc815\ud655\ub3c4 \uce21\uc815\uc744 \uc704\ud55c \ud568\uc218 \uc815\uc758\ndef calc_accuracy(X,Y):\n    max_vals, max_indices = torch.max(X, 1)\n    train_acc = (max_indices == Y).sum().data.cpu().numpy()/max_indices.size()[0]\n    return train_acc\n\ntrain_dataloader\n</code></pre>"},{"location":"ai/KoBERT/#6kobert","title":"6.KoBERT \ubaa8\ub378 \ud559\uc2b5\uc2dc\ud0a4\uae30","text":"<p>\ud559\uc2b5 \ub370\uc774\ud130\uc14b\uacfc \ud559\uc2b5 \ubaa8\ub378 \uc900\ube44\uac00 \ub2e4 \ub05d\ub0ac\ub2e4\uba74 \uc774\uc81c \uc544\ub798 \ucf54\ub4dc \uc2e4\ud589\uc744 \ud1b5\ud574 KoBERT \ubaa8\ub378\uc744 \ud559\uc2b5\uc2dc\ucf1c\uc900\ub2e4.</p> <pre><code>for e in range(num_epochs):\n    train_acc = 0.0\n    test_acc = 0.0\n    model.train()\n    for batch_id, (token_ids, valid_length, segment_ids, label) in enumerate(tqdm_notebook(train_dataloader)):\n        optimizer.zero_grad()\n        token_ids = token_ids.long().to(device)\n        segment_ids = segment_ids.long().to(device)\n        valid_length= valid_length\n        label = label.long().to(device)\n        out = model(token_ids, valid_length, segment_ids)\n        loss = loss_fn(out, label)\n        loss.backward()\n        torch.nn.utils.clip_grad_norm_(model.parameters(), max_grad_norm)\n        optimizer.step()\n        scheduler.step()  # Update learning rate schedule\n        train_acc += calc_accuracy(out, label)\n        if batch_id % log_interval == 0:\n            print(\"epoch {} batch id {} loss {} train acc {}\".format(e+1, batch_id+1, loss.data.cpu().numpy(), train_acc / (batch_id+1)))\n    print(\"epoch {} train acc {}\".format(e+1, train_acc / (batch_id+1)))\n\n    model.eval()\n    for batch_id, (token_ids, valid_length, segment_ids, label) in enumerate(tqdm_notebook(test_dataloader)):\n        token_ids = token_ids.long().to(device)\n        segment_ids = segment_ids.long().to(device)\n        valid_length= valid_length\n        label = label.long().to(device)\n        out = model(token_ids, valid_length, segment_ids)\n        test_acc += calc_accuracy(out, label)\n    print(\"epoch {} test acc {}\".format(e+1, test_acc / (batch_id+1)))\n</code></pre>"},{"location":"ai/OJT-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81%EA%B3%BC-Kotaemon-RAG-%EA%B5%AC%ED%98%84%EA%B8%B0/","title":"OJT \ub9ac\ud329\ud1a0\ub9c1\uacfc Kotaemon RAG \uad6c\ud604\uae30","text":""},{"location":"ai/OJT-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81%EA%B3%BC-Kotaemon-RAG-%EA%B5%AC%ED%98%84%EA%B8%B0/#ojt-kotaemon-rag","title":"OJT \ub9ac\ud329\ud1a0\ub9c1\uacfc Kotaemon RAG \uad6c\ud604\uae30","text":"<p>2025\ub144 1\uc6d4, \uae30\uc874 OJT \uc2dc\uc2a4\ud15c\uc758 \ud55c\uacc4\ub97c \ud574\uacb0\ud558\uace0\uc790 \uc804\uba74 \ub9ac\ud329\ud1a0\ub9c1\uc744 \uc9c4\ud589\ud588\ub2e4. \ud2b9\ud788 Kotaemon RAG \ud504\ub808\uc784\uc6cc\ud06c\ub97c \ub3c4\uc785\ud558\uc5ec \ubb38\uc11c \uae30\ubc18 \uc9c8\uc758\uc751\ub2f5 \uc131\ub2a5\uc744 \ub300\ud3ed \uac1c\uc120\ud55c \uacfc\uc815\uc744 \uacf5\uc720\ud55c\ub2e4.</p>"},{"location":"ai/OJT-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81%EA%B3%BC-Kotaemon-RAG-%EA%B5%AC%ED%98%84%EA%B8%B0/#_1","title":"\uae30\uc874 \uc2dc\uc2a4\ud15c\uc758 \ud55c\uacc4","text":""},{"location":"ai/OJT-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81%EA%B3%BC-Kotaemon-RAG-%EA%B5%AC%ED%98%84%EA%B8%B0/#ojt","title":"OJT \ud50c\ub7ab\ud3fc \ubb38\uc81c\uc810","text":"<p>\uae30\uc874 OJT(On-the-Job Training) \uc2dc\uc2a4\ud15c\uc740 \ub2e8\uc21c\ud55c \ubb38\uc11c \uc800\uc7a5\uc18c\uc5d0 \ubd88\uacfc\ud588\ub2e4:</p> <ul> <li>\uac80\uc0c9 \uc815\ud655\ub3c4 \ubd80\uc871: \ud0a4\uc6cc\ub4dc \uae30\ubc18 \uac80\uc0c9\uc73c\ub85c \ub9e5\ub77d \uc774\ud574 \ubd88\uac00</li> <li>\ubb38\uc11c \ud30c\ud3b8\ud654: PDF, Word, PowerPoint \ub4f1 \ub2e4\uc591\ud55c \ud615\uc2dd \uc9c0\uc6d0 \ubbf8\ud761  </li> <li>\ud559\uc2b5 \ucd94\uc801 \ud55c\uacc4: \uac1c\ubcc4 \ud559\uc2b5\uc790\uc758 \uc9c4\ub3c4\uc640 \uc774\ud574\ub3c4 \ud30c\uc545 \uc5b4\ub824\uc6c0</li> <li>\ud655\uc7a5\uc131 \ubb38\uc81c: \ubb38\uc11c \ucd94\uac00 \uc2dc\ub9c8\ub2e4 \uc218\ub3d9 \uc778\ub371\uc2f1 \ud544\uc694</li> </ul> <p>\ud2b9\ud788 \uc2e0\uc785 \uac1c\ubc1c\uc790\ub4e4\uc774 \"\uc774 \uae30\uc220\uc744 \uc5b4\ub5bb\uac8c \uc0ac\uc6a9\ud558\ub294\uc9c0\" \uac19\uc740 \ub9e5\ub77d\uc801 \uc9c8\ubb38\uc5d0 \ub300\ud574 \uc801\uc808\ud55c \ub2f5\ubcc0\uc744 \uc5bb\uae30 \uc5b4\ub824\uc6e0\ub2e4.</p>"},{"location":"ai/OJT-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81%EA%B3%BC-Kotaemon-RAG-%EA%B5%AC%ED%98%84%EA%B8%B0/#rag","title":"RAG \uc2dc\uc2a4\ud15c \ud55c\uacc4","text":"<p>\uae30\uc874\uc5d0 \uad6c\ucd95\ud55c RAG\ub3c4 \ubb38\uc81c\uac00 \uc788\uc5c8\ub2e4:</p> <pre><code># \uae30\uc874 RAG \uad6c\uc870\uc758 \ubb38\uc81c\uc810\nclass SimpleRAG:\n    def __init__(self):\n        self.embeddings = OpenAIEmbeddings()\n        self.vectordb = FAISS.from_documents(docs, self.embeddings)\n\n    def query(self, question: str):\n        # 1. \ub2e8\uc21c \uc720\uc0ac\ub3c4 \uac80\uc0c9\ub9cc \uc0ac\uc6a9\n        docs = self.vectordb.similarity_search(question, k=5)\n\n        # 2. \ucee8\ud14d\uc2a4\ud2b8 \uae38\uc774 \uc81c\ud55c \uc5c6\uc774 \ubaa8\ub4e0 \ubb38\uc11c \uc5f0\uacb0\n        context = \"\\n\".join([doc.page_content for doc in docs])\n\n        # 3. \ub2e8\uc21c \ud504\ub86c\ud504\ud2b8\n        prompt = f\"Context: {context}\\n\\nQuestion: {question}\\nAnswer:\"\n        return llm.generate(prompt)\n</code></pre> <p>\ubb38\uc81c\uc810\ub4e4: - \uccad\ud0b9 \uc804\ub7b5 \ubd80\uc7ac: \ubb38\uc11c\ub97c \ubb34\uc791\uc815 1000\uc790\uc529 \ub098\ub204\uae30\ub9cc \ud568 - \uba54\ud0c0\ub370\uc774\ud130 \ubbf8\ud65c\uc6a9: \ubb38\uc11c \ud0c0\uc785, \uc791\uc131\uc77c, \ub09c\uc774\ub3c4 \ub4f1 \uc815\ubcf4 \ubb34\uc2dc - \uc7ac\ub7ad\ud0b9 \uc5c6\uc74c: \ub2e8\uc21c \ubca1\ud130 \uc720\uc0ac\ub3c4\ub9cc\uc73c\ub85c \ubb38\uc11c \uc120\ud0dd - \uba40\ud2f0\ud134 \uc9c0\uc6d0 \ubd80\uc871: \uc774\uc804 \ub300\ud654 \ub9e5\ub77d \uace0\ub824 \uc548\ub428</p>"},{"location":"ai/OJT-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81%EA%B3%BC-Kotaemon-RAG-%EA%B5%AC%ED%98%84%EA%B8%B0/#kotaemon-rag","title":"Kotaemon RAG \ud504\ub808\uc784\uc6cc\ud06c \ub3c4\uc785","text":""},{"location":"ai/OJT-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81%EA%B3%BC-Kotaemon-RAG-%EA%B5%AC%ED%98%84%EA%B8%B0/#kotaemon","title":"Kotaemon \uc120\ud0dd \uc774\uc720","text":"<p>\uc5ec\ub7ec RAG \ud504\ub808\uc784\uc6cc\ud06c\ub97c \uac80\ud1a0\ud55c \uacb0\uacfc Kotaemon\uc744 \uc120\ud0dd\ud588\ub2e4:</p> \ud504\ub808\uc784\uc6cc\ud06c \uc7a5\uc810 \ub2e8\uc810 LangChain \uc0dd\ud0dc\uacc4 \ud48d\ubd80 \ubcf5\uc7a1\ub3c4 \ub192\uc74c, \ubc84\uc804 \ud638\ud658\uc131 \ubb38\uc81c LlamaIndex \uc778\ub371\uc2f1 \ucd5c\uc801\ud654 \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5 \uc5b4\ub824\uc6c0 Kotaemon \ubaa8\ub4c8\ub7ec \uc124\uacc4, \uc26c\uc6b4 \ud655\uc7a5 \uc0c1\ub300\uc801\uc73c\ub85c \uc791\uc740 \ucee4\ubba4\ub2c8\ud2f0 Haystack \uac80\uc0c9 \uc5d4\uc9c4 \ud1b5\ud569 \ud559\uc2b5 \uace1\uc120 \uac00\ud30c\ub984 <p>Kotaemon\uc758 \ud575\uc2ec \uac15\uc810:</p> <ol> <li>\ud50c\ub7ec\uadf8\uc778 \uc544\ud0a4\ud14d\ucc98: \uac01 \uad6c\uc131\uc694\uc18c\ub97c \ub3c5\ub9bd\uc801\uc73c\ub85c \uad50\uccb4 \uac00\ub2a5</li> <li>\uba40\ud2f0\ubaa8\ub2ec \uc9c0\uc6d0: \ud14d\uc2a4\ud2b8, \uc774\ubbf8\uc9c0, \ud45c \ub4f1 \ub2e4\uc591\ud55c \ud615\uc2dd \ucc98\ub9ac</li> <li>\uc2e4\uc2dc\uac04 \ud3c9\uac00: \ub2f5\ubcc0 \ud488\uc9c8\uc744 \uc989\uc2dc \uce21\uc815 \uac00\ub2a5</li> <li>\uc26c\uc6b4 \ubc30\ud3ec: Docker \ucee8\ud14c\uc774\ub108\ub85c \ubc14\ub85c \uc6b4\uc601 \ud658\uacbd \ubc30\ud3ec</li> </ol>"},{"location":"ai/OJT-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81%EA%B3%BC-Kotaemon-RAG-%EA%B5%AC%ED%98%84%EA%B8%B0/#_2","title":"\uc0c8\ub85c\uc6b4 \uc544\ud0a4\ud14d\ucc98 \uc124\uacc4","text":"<pre><code># kotaemon \uae30\ubc18 \uc0c8\ub85c\uc6b4 RAG \uc544\ud0a4\ufffdecture\nfrom kotaemon.base import Document, BaseComponent\nfrom kotaemon.retrievers import HybridRetriever\nfrom kotaemon.generators import ReActAgent\nfrom kotaemon.evaluation import RAGEvaluator\n\nclass AdvancedOJTRAG:\n    def __init__(self):\n        # 1. \uba40\ud2f0 \ub808\ubca8 \uc784\ubca0\ub529 \uc804\ub7b5\n        self.dense_retriever = DenseRetriever(\n            model_name=\"intfloat/multilingual-e5-large\"\n        )\n        self.sparse_retriever = BM25Retriever()\n\n        # 2. \ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9\n        self.hybrid_retriever = HybridRetriever(\n            retrievers=[self.dense_retriever, self.sparse_retriever],\n            weights=[0.7, 0.3]\n        )\n\n        # 3. \uc7ac\ub7ad\ud0b9 \ubaa8\ub378\n        self.reranker = CrossEncoderReranker(\n            model_name=\"cross-encoder/ms-marco-MiniLM-L-12-v2\"\n        )\n\n        # 4. \uba40\ud2f0\ud134 \ub300\ud654 \uad00\ub9ac\n        self.conversation_manager = ConversationManager()\n\n        # 5. \uc2e4\uc2dc\uac04 \ud3c9\uac00\n        self.evaluator = RAGEvaluator(\n            metrics=[\"faithfulness\", \"answer_relevancy\", \"context_precision\"]\n        )\n\n    async def process_query(\n        self, \n        query: str, \n        conversation_id: str = None,\n        user_level: str = \"beginner\"\n    ):\n        # 1. \ub300\ud654 \ucee8\ud14d\uc2a4\ud2b8 \uac00\uc838\uc624\uae30\n        conversation_context = await self.conversation_manager.get_context(\n            conversation_id\n        )\n\n        # 2. \ucffc\ub9ac \ud655\uc7a5 \ubc0f \uc7ac\uc791\uc131\n        enhanced_query = await self._enhance_query(\n            query, conversation_context, user_level\n        )\n\n        # 3. \ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9\n        candidate_docs = await self.hybrid_retriever.retrieve(\n            enhanced_query, top_k=20\n        )\n\n        # 4. \uc7ac\ub7ad\ud0b9\n        relevant_docs = await self.reranker.rerank(\n            enhanced_query, candidate_docs, top_k=5\n        )\n\n        # 5. \ub2f5\ubcc0 \uc0dd\uc131\n        answer = await self._generate_answer(\n            enhanced_query, relevant_docs, user_level\n        )\n\n        # 6. \uc2e4\uc2dc\uac04 \ud3c9\uac00\n        evaluation = await self.evaluator.evaluate(\n            query, relevant_docs, answer\n        )\n\n        # 7. \ub300\ud654 \uc800\uc7a5\n        await self.conversation_manager.save_turn(\n            conversation_id, query, answer, evaluation\n        )\n\n        return {\n            \"answer\": answer,\n            \"sources\": relevant_docs,\n            \"confidence\": evaluation[\"faithfulness\"],\n            \"suggestions\": await self._get_suggestions(query, user_level)\n        }\n</code></pre>"},{"location":"ai/OJT-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81%EA%B3%BC-Kotaemon-RAG-%EA%B5%AC%ED%98%84%EA%B8%B0/#_3","title":"\uace0\uae09 \uccad\ud0b9 \uc804\ub7b5","text":"<p>\uae30\uc874\uc758 \ub2e8\uc21c \uace0\uc815 \uae38\uc774 \uccad\ud0b9\uc744 \ub300\uccb4\ud558\uc5ec \uc758\ubbf8 \uae30\ubc18 \uccad\ud0b9\uc744 \uad6c\ud604\ud588\ub2e4:</p> <pre><code>from kotaemon.parsers import SemanticChunker\nfrom transformers import pipeline\n\nclass SmartDocumentProcessor:\n    def __init__(self):\n        self.semantic_chunker = SemanticChunker(\n            chunk_size=512,\n            chunk_overlap=50,\n            separator_type=\"semantic\"\n        )\n\n        # \ubb38\uc11c \ud0c0\uc785\ubcc4 \uc804\uc6a9 \ud30c\uc11c\n        self.parsers = {\n            'pdf': PDFParser(),\n            'docx': DocxParser(), \n            'pptx': PowerPointParser(),\n            'py': CodeParser(),\n            'md': MarkdownParser()\n        }\n\n        # \ub09c\uc774\ub3c4 \ubd84\uc11d\uae30\n        self.difficulty_classifier = pipeline(\n            \"text-classification\",\n            model=\"textbook-difficulty-classifier\"\n        )\n\n    async def process_document(self, file_path: str, metadata: dict = {}):\n        \"\"\"\ubb38\uc11c\ub97c \uc758\ubbf8 \ub2e8\uc704\ub85c \uccad\ud0b9\ud558\uace0 \uba54\ud0c0\ub370\uc774\ud130 \ucd94\uac00\"\"\"\n\n        # 1. \ud30c\uc77c \ud0c0\uc785\ubcc4 \ud30c\uc2f1\n        file_extension = file_path.split('.')[-1].lower()\n        parser = self.parsers.get(file_extension, self.parsers['pdf'])\n\n        content = await parser.parse(file_path)\n\n        # 2. \uc758\ubbf8 \uae30\ubc18 \uccad\ud0b9\n        chunks = await self.semantic_chunker.chunk(content)\n\n        # 3. \uac01 \uccad\ud06c\uc5d0 \uba54\ud0c0\ub370\uc774\ud130 \ucd94\uac00\n        enriched_chunks = []\n        for chunk in chunks:\n            # \ub09c\uc774\ub3c4 \ubd84\uc11d\n            difficulty = self.difficulty_classifier(chunk.content)[0]\n\n            # \ud0a4\uc6cc\ub4dc \ucd94\ucd9c\n            keywords = await self._extract_keywords(chunk.content)\n\n            # \ucf54\ub4dc \ube14\ub85d \uac10\uc9c0\n            has_code = self._detect_code_blocks(chunk.content)\n\n            enriched_chunk = Document(\n                content=chunk.content,\n                metadata={\n                    **metadata,\n                    'difficulty_level': difficulty['label'],\n                    'difficulty_score': difficulty['score'],\n                    'keywords': keywords,\n                    'has_code': has_code,\n                    'chunk_index': chunk.index,\n                    'source_file': file_path,\n                    'created_at': datetime.now().isoformat()\n                }\n            )\n            enriched_chunks.append(enriched_chunk)\n\n        return enriched_chunks\n\n    async def _extract_keywords(self, text: str) -&gt; list:\n        \"\"\"TF-IDF \uae30\ubc18 \ud0a4\uc6cc\ub4dc \ucd94\ucd9c\"\"\"\n        from sklearn.feature_extraction.text import TfidfVectorizer\n        import jieba  # \ud55c\uad6d\uc5b4 \ud1a0\ud06c\ub098\uc774\uc9d5\n\n        # \ud615\ud0dc\uc18c \ubd84\uc11d\n        tokens = jieba.cut(text)\n        processed_text = ' '.join(tokens)\n\n        # TF-IDF\n        vectorizer = TfidfVectorizer(\n            max_features=10,\n            stop_words='english',  # \uc601\uc5b4 \ubd88\uc6a9\uc5b4\n            ngram_range=(1, 2)\n        )\n\n        tfidf_matrix = vectorizer.fit_transform([processed_text])\n        feature_names = vectorizer.get_feature_names_out()\n\n        # \uc0c1\uc704 \ud0a4\uc6cc\ub4dc \ubc18\ud658\n        scores = tfidf_matrix.toarray()[0]\n        keywords = [\n            feature_names[i] \n            for i in scores.argsort()[-5:][::-1]\n            if scores[i] &gt; 0\n        ]\n\n        return keywords\n</code></pre>"},{"location":"ai/OJT-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81%EA%B3%BC-Kotaemon-RAG-%EA%B5%AC%ED%98%84%EA%B8%B0/#_4","title":"\uac1c\uc778\ud654\ub41c \ud559\uc2b5 \uacbd\ub85c","text":"<p>\uc0ac\uc6a9\uc790 \ub808\ubca8\uc5d0 \ub530\ub978 \ub9de\ucda4\ud615 \ub2f5\ubcc0\uc744 \uc81c\uacf5\ud558\ub3c4\ub85d \uad6c\ud604\ud588\ub2e4:</p> <pre><code>class PersonalizedLearningAgent:\n    def __init__(self):\n        self.user_profiles = {}\n        self.learning_graph = self._build_learning_graph()\n\n    async def _generate_answer(\n        self, \n        query: str, \n        docs: List[Document], \n        user_level: str\n    ):\n        \"\"\"\uc0ac\uc6a9\uc790 \ub808\ubca8\uc5d0 \ub9de\ucd98 \ub2f5\ubcc0 \uc0dd\uc131\"\"\"\n\n        # \ub808\ubca8\ubcc4 \ud504\ub86c\ud504\ud2b8 \ud15c\ud50c\ub9bf\n        prompts = {\n            \"beginner\": \"\"\"\n\ub2f9\uc2e0\uc740 \uce5c\uc808\ud55c \uc2dc\ub2c8\uc5b4 \uac1c\ubc1c\uc790\uc785\ub2c8\ub2e4. \uc2e0\uc785 \uac1c\ubc1c\uc790\uac00 \uc774\ud574\ud558\uae30 \uc27d\uac8c \uc124\uba85\ud574\uc8fc\uc138\uc694.\n\n\uaddc\uce59:\n1. \uc804\ubb38 \uc6a9\uc5b4\uac00 \ub098\uc624\uba74 \uc26c\uc6b4 \ub9d0\ub85c \ud480\uc5b4\uc11c \uc124\uba85\n2. \uad6c\uccb4\uc801\uc778 \uc608\uc2dc \ucf54\ub4dc \uc81c\uacf5\n3. \ub2e8\uacc4\ubcc4\ub85c \ucc28\uadfc\ucc28\uadfc \uc124\uba85\n4. \uad00\ub828\ub41c \uae30\ucd08 \uac1c\ub150\ub3c4 \ud568\uaed8 \uc5b8\uae09\n\n\ucee8\ud14d\uc2a4\ud2b8: {context}\n\uc9c8\ubb38: {question}\n\ub2f5\ubcc0:\"\"\",\n\n            \"intermediate\": \"\"\"\n\ub2f9\uc2e0\uc740 \uc219\ub828\ub41c \uac1c\ubc1c\uc790\uc785\ub2c8\ub2e4. \uc2e4\ubb34 \uacbd\ud5d8\uc774 \uc788\ub294 \uac1c\ubc1c\uc790\uc5d0\uac8c \uc801\uc808\ud55c \uc218\uc900\uc73c\ub85c \ub2f5\ubcc0\ud558\uc138\uc694.\n\n\uaddc\uce59:\n1. \ud575\uc2ec \ud3ec\uc778\ud2b8\ub97c \uba85\ud655\ud558\uac8c \uc804\ub2ec\n2. \ubca0\uc2a4\ud2b8 \ud504\ub799\ud2f0\uc2a4\uc640 \uc8fc\uc758\uc0ac\ud56d \ud3ec\ud568\n3. \ub300\uc548\uc801 \uc811\uadfc\ubc95\ub3c4 \uc81c\uc2dc\n4. \uc131\ub2a5\uc774\ub098 \ubcf4\uc548 \uad00\uc810\uc5d0\uc11c\uc758 \uace0\ub824\uc0ac\ud56d \uc5b8\uae09\n\n\ucee8\ud14d\uc2a4\ud2b8: {context}\n\uc9c8\ubb38: {question}\n\ub2f5\ubcc0:\"\"\",\n\n            \"advanced\": \"\"\"\n\ub2f9\uc2e0\uc740 \uc2dc\ub2c8\uc5b4 \uc544\ud0a4\ud14d\ud2b8\uc785\ub2c8\ub2e4. \uace0\uae09 \uac1c\ubc1c\uc790\uc5d0\uac8c \uc2ec\ub3c4 \uc788\ub294 \ub2f5\ubcc0\uc744 \uc81c\uacf5\ud558\uc138\uc694.\n\n\uaddc\uce59:\n1. \uc544\ud0a4\ud14d\ucc98 \uad00\uc810\uc5d0\uc11c\uc758 \ubd84\uc11d\n2. \ud2b8\ub808\uc774\ub4dc\uc624\ud504\uc640 \uc124\uacc4 \uacb0\uc815 \uadfc\uac70 \uc81c\uc2dc\n3. \ud655\uc7a5\uc131, \uc720\uc9c0\ubcf4\uc218\uc131 \uace0\ub824\uc0ac\ud56d\n4. \ucd5c\uc2e0 \ud2b8\ub80c\ub4dc\ub098 \ubc1c\uc804 \ubc29\ud5a5 \uc5b8\uae09\n\n\ucee8\ud14d\uc2a4\ud2b8: {context}\n\uc9c8\ubb38: {question}\n\ub2f5\ubcc0:\"\"\",\n        }\n\n        # \ucee8\ud14d\uc2a4\ud2b8 \uad6c\uc131\n        context = self._format_context(docs, user_level)\n\n        # \ud504\ub86c\ud504\ud2b8 \uc0dd\uc131\n        prompt = prompts[user_level].format(\n            context=context,\n            question=query\n        )\n\n        # LLM \ud638\ucd9c\n        response = await self.llm.agenerate(prompt)\n\n        return response\n\n    def _format_context(self, docs: List[Document], user_level: str) -&gt; str:\n        \"\"\"\uc0ac\uc6a9\uc790 \ub808\ubca8\uc5d0 \ub9de\ucdb0 \ucee8\ud14d\uc2a4\ud2b8 \ud3ec\ub9f7\ud305\"\"\"\n\n        # \ub09c\uc774\ub3c4\ubcc4 \ubb38\uc11c \ud544\ud130\ub9c1\n        if user_level == \"beginner\":\n            filtered_docs = [\n                doc for doc in docs \n                if doc.metadata.get('difficulty_level') in ['beginner', 'intermediate']\n            ]\n        elif user_level == \"intermediate\":\n            filtered_docs = docs  # \ubaa8\ub4e0 \ub808\ubca8\n        else:  # advanced\n            filtered_docs = [\n                doc for doc in docs \n                if doc.metadata.get('difficulty_level') in ['intermediate', 'advanced']\n            ]\n\n        # \ucee8\ud14d\uc2a4\ud2b8 \uad6c\uc131\n        context_parts = []\n        for doc in filtered_docs:\n            source = doc.metadata.get('source_file', 'unknown')\n            content = doc.content\n            keywords = ', '.join(doc.metadata.get('keywords', []))\n\n            context_parts.append(f\"\"\"\n[\ucd9c\ucc98: {source}]\n[\ud0a4\uc6cc\ub4dc: {keywords}]\n{content}\n\"\"\")\n\n        return \"\\n\\n\".join(context_parts)\n</code></pre>"},{"location":"ai/OJT-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81%EA%B3%BC-Kotaemon-RAG-%EA%B5%AC%ED%98%84%EA%B8%B0/#_5","title":"\uc2dc\uc2a4\ud15c \ud1b5\ud569 \ubc0f \ubc30\ud3ec","text":""},{"location":"ai/OJT-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81%EA%B3%BC-Kotaemon-RAG-%EA%B5%AC%ED%98%84%EA%B8%B0/#fastapi","title":"FastAPI \uae30\ubc18 \uc11c\ube44\uc2a4","text":"<pre><code>from fastapi import FastAPI, HTTPException, BackgroundTasks\nfrom pydantic import BaseModel\nfrom typing import Optional, List\n\napp = FastAPI(title=\"OJT RAG API v2.0\")\n\nclass QueryRequest(BaseModel):\n    question: str\n    conversation_id: Optional[str] = None\n    user_level: str = \"beginner\"\n    include_sources: bool = True\n\nclass QueryResponse(BaseModel):\n    answer: str\n    sources: List[dict]\n    confidence: float\n    suggestions: List[str]\n    conversation_id: str\n\n@app.post(\"/query\", response_model=QueryResponse)\nasync def process_query(request: QueryRequest):\n    try:\n        result = await rag_system.process_query(\n            query=request.question,\n            conversation_id=request.conversation_id,\n            user_level=request.user_level\n        )\n\n        return QueryResponse(\n            answer=result[\"answer\"],\n            sources=result[\"sources\"] if request.include_sources else [],\n            confidence=result[\"confidence\"],\n            suggestions=result[\"suggestions\"],\n            conversation_id=result.get(\"conversation_id\", \"\")\n        )\n    except Exception as e:\n        logger.error(f\"Query processing failed: {str(e)}\")\n        raise HTTPException(status_code=500, detail=str(e))\n\n@app.post(\"/upload-document\")\nasync def upload_document(\n    file: UploadFile = File(...),\n    metadata: dict = Body(...),\n    background_tasks: BackgroundTasks\n):\n    \"\"\"\ubb38\uc11c \uc5c5\ub85c\ub4dc \ubc0f \ube44\ub3d9\uae30 \ucc98\ub9ac\"\"\"\n\n    # \ud30c\uc77c \uc800\uc7a5\n    file_path = f\"./uploads/{file.filename}\"\n    with open(file_path, \"wb\") as buffer:\n        shutil.copyfileobj(file.file, buffer)\n\n    # \ubc31\uadf8\ub77c\uc6b4\ub4dc\uc5d0\uc11c \ubb38\uc11c \ucc98\ub9ac\n    background_tasks.add_task(\n        process_new_document,\n        file_path,\n        metadata\n    )\n\n    return {\"message\": \"Document upload initiated\", \"file\": file.filename}\n\nasync def process_new_document(file_path: str, metadata: dict):\n    \"\"\"\ubc31\uadf8\ub77c\uc6b4\ub4dc \ubb38\uc11c \ucc98\ub9ac\"\"\"\n    try:\n        # \ubb38\uc11c \ud30c\uc2f1 \ubc0f \uccad\ud0b9\n        chunks = await doc_processor.process_document(file_path, metadata)\n\n        # \ubca1\ud130 DB\uc5d0 \ucd94\uac00\n        await rag_system.add_documents(chunks)\n\n        # \ucc98\ub9ac \uc644\ub8cc \ub85c\uadf8\n        logger.info(f\"Document processed successfully: {file_path}\")\n\n    except Exception as e:\n        logger.error(f\"Document processing failed: {file_path}, Error: {str(e)}\")\n</code></pre>"},{"location":"ai/OJT-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81%EA%B3%BC-Kotaemon-RAG-%EA%B5%AC%ED%98%84%EA%B8%B0/#_6","title":"\uc2e4\uc2dc\uac04 \ubaa8\ub2c8\ud130\ub9c1","text":"<pre><code>import prometheus_client\nfrom prometheus_client import Counter, Histogram, Gauge\n\n# \uba54\ud2b8\ub9ad \uc815\uc758\nQUERY_COUNT = Counter('rag_queries_total', 'Total RAG queries', ['user_level'])\nQUERY_LATENCY = Histogram('rag_query_duration_seconds', 'Query processing time')\nRETRIEVAL_ACCURACY = Gauge('rag_retrieval_accuracy', 'Retrieval accuracy score')\nANSWER_CONFIDENCE = Histogram('rag_answer_confidence', 'Answer confidence scores')\n\nclass RAGMonitor:\n    def __init__(self):\n        self.metrics = {\n            'query_count': QUERY_COUNT,\n            'query_latency': QUERY_LATENCY,\n            'retrieval_accuracy': RETRIEVAL_ACCURACY,\n            'answer_confidence': ANSWER_CONFIDENCE\n        }\n\n    def record_query(self, user_level: str, latency: float, confidence: float):\n        \"\"\"\ucffc\ub9ac \uba54\ud2b8\ub9ad \uae30\ub85d\"\"\"\n        self.metrics['query_count'].labels(user_level=user_level).inc()\n        self.metrics['query_latency'].observe(latency)\n        self.metrics['answer_confidence'].observe(confidence)\n\n    def update_accuracy(self, accuracy_score: float):\n        \"\"\"\uac80\uc0c9 \uc815\ud655\ub3c4 \uc5c5\ub370\uc774\ud2b8\"\"\"\n        self.metrics['retrieval_accuracy'].set(accuracy_score)\n\n# \uba54\ud2b8\ub9ad \uc5d4\ub4dc\ud3ec\uc778\ud2b8\n@app.get(\"/metrics\")\nasync def metrics():\n    return Response(\n        prometheus_client.generate_latest(),\n        media_type=\"text/plain\"\n    )\n</code></pre>"},{"location":"ai/OJT-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81%EA%B3%BC-Kotaemon-RAG-%EA%B5%AC%ED%98%84%EA%B8%B0/#_7","title":"\uc131\ub2a5 \ud3c9\uac00 \ubc0f \uacb0\uacfc","text":""},{"location":"ai/OJT-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81%EA%B3%BC-Kotaemon-RAG-%EA%B5%AC%ED%98%84%EA%B8%B0/#ab","title":"A/B \ud14c\uc2a4\ud2b8 \uc124\uc815","text":"<p>\uae30\uc874 \uc2dc\uc2a4\ud15c\uacfc \uc0c8 \uc2dc\uc2a4\ud15c\uc744 3\uc8fc\uac04 \ubcd1\ub82c \uc6b4\uc601\ud558\uba70 \ube44\uad50\ud588\ub2e4:</p> <pre><code># A/B \ud14c\uc2a4\ud2b8 \uacb0\uacfc\ntest_results = {\n    \"\uae30\uc874_RAG\": {\n        \"\uc815\ud655\ub3c4\": 0.67,\n        \"\uc751\ub2f5\uc2dc\uac04\": \"2.3\ucd08\",\n        \"\uc0ac\uc6a9\uc790_\ub9cc\uc871\ub3c4\": 3.2,\n        \"\uc7ac\uc9c8\ubb38_\ube44\uc728\": 0.45\n    },\n    \"Kotaemon_RAG\": {\n        \"\uc815\ud655\ub3c4\": 0.89,\n        \"\uc751\ub2f5\uc2dc\uac04\": \"1.1\ucd08\",\n        \"\uc0ac\uc6a9\uc790_\ub9cc\uc871\ub3c4\": 4.6,\n        \"\uc7ac\uc9c8\ubb38_\ube44\uc728\": 0.18\n    },\n    \"\uac1c\uc120\uc728\": {\n        \"\uc815\ud655\ub3c4\": \"+33%\",\n        \"\uc751\ub2f5\uc2dc\uac04\": \"-52%\",\n        \"\uc0ac\uc6a9\uc790_\ub9cc\uc871\ub3c4\": \"+44%\",\n        \"\uc7ac\uc9c8\ubb38_\ube44\uc728\": \"-60%\"\n    }\n}\n</code></pre>"},{"location":"ai/OJT-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81%EA%B3%BC-Kotaemon-RAG-%EA%B5%AC%ED%98%84%EA%B8%B0/#_8","title":"\uc8fc\uc694 \uac1c\uc120 \uc0ac\ud56d","text":"<ol> <li>\uac80\uc0c9 \uc815\ud655\ub3c4: </li> <li>\ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9\uc73c\ub85c \ub9e5\ub77d \uc774\ud574 \ub2a5\ub825 \ud5a5\uc0c1</li> <li> <p>\uc7ac\ub7ad\ud0b9 \ubaa8\ub378\ub85c \ub178\uc774\uc988 \ubb38\uc11c \uc81c\uac70</p> </li> <li> <p>\ub2f5\ubcc0 \ud488\uc9c8:</p> </li> <li>\uc0ac\uc6a9\uc790 \ub808\ubca8\ubcc4 \ub9de\ucda4 \uc124\uba85</li> <li> <p>\ucf54\ub4dc \uc608\uc2dc\uc640 \ub2e8\uacc4\ubcc4 \uac00\uc774\ub4dc \uc81c\uacf5</p> </li> <li> <p>\ud559\uc2b5 \ucd94\uc801:</p> </li> <li>\uac1c\uc778\ubcc4 \ub300\ud654 \uae30\ub85d \uc800\uc7a5</li> <li>\ud559\uc2b5 \uc9c4\ub3c4\uc640 \uc774\ud574\ub3c4 \ubd84\uc11d</li> </ol>"},{"location":"ai/OJT-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81%EA%B3%BC-Kotaemon-RAG-%EA%B5%AC%ED%98%84%EA%B8%B0/#_9","title":"\uc6b4\uc601 \uc911 \ub9c8\uc8fc\uce5c \ucc4c\ub9b0\uc9c0","text":""},{"location":"ai/OJT-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81%EA%B3%BC-Kotaemon-RAG-%EA%B5%AC%ED%98%84%EA%B8%B0/#1","title":"1. \ud1a0\ud070 \uae38\uc774 \uc81c\ud55c","text":"<p>GPT-4\uc758 \ucee8\ud14d\uc2a4\ud2b8 \uc708\ub3c4\uc6b0 \uc81c\ud55c\uc73c\ub85c \uae34 \ubb38\uc11c \ucc98\ub9ac\uac00 \uc5b4\ub824\uc6e0\ub2e4:</p> <pre><code>def smart_context_truncation(docs: List[Document], max_tokens: int = 16000):\n    \"\"\"\uc911\uc694\ub3c4 \uae30\ubc18 \ucee8\ud14d\uc2a4\ud2b8 \ub2e8\ucd95\"\"\"\n\n    # 1. \ubb38\uc11c\ubcc4 \uc911\uc694\ub3c4 \uc810\uc218 \uacc4\uc0b0\n    scored_docs = []\n    for doc in docs:\n        score = (\n            doc.metadata.get('relevance_score', 0) * 0.4 +\n            doc.metadata.get('recency_score', 0) * 0.3 +\n            doc.metadata.get('authority_score', 0) * 0.3\n        )\n        scored_docs.append((score, doc))\n\n    # 2. \uc810\uc218\uc21c \uc815\ub82c \ud6c4 \ud1a0\ud070 \uc81c\ud55c\uae4c\uc9c0 \uc120\ud0dd\n    sorted_docs = sorted(scored_docs, key=lambda x: x[0], reverse=True)\n\n    selected_docs = []\n    current_tokens = 0\n    for score, doc in sorted_docs:\n        doc_tokens = estimate_tokens(doc.content)\n        if current_tokens + doc_tokens &lt;= max_tokens:\n            selected_docs.append(doc)\n            current_tokens += doc_tokens\n        else:\n            break\n\n    return selected_docs\n</code></pre>"},{"location":"ai/OJT-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81%EA%B3%BC-Kotaemon-RAG-%EA%B5%AC%ED%98%84%EA%B8%B0/#2","title":"2. \uc2e4\uc2dc\uac04 \ud3c9\uac00\uc758 \uc624\ubc84\ud5e4\ub4dc","text":"<p>\ubaa8\ub4e0 \ub2f5\ubcc0\uc5d0 \ub300\ud574 \uc2e4\uc2dc\uac04 \ud3c9\uac00\ub97c \uc218\ud589\ud558\ub2c8 \uc9c0\uc5f0\uc2dc\uac04\uc774 \uc99d\uac00\ud588\ub2e4:</p> <pre><code>class AdaptiveEvaluator:\n    def __init__(self):\n        self.evaluation_queue = asyncio.Queue()\n        self.should_evaluate_realtime = self._should_evaluate_realtime\n\n    async def conditional_evaluate(self, query: str, answer: str, docs: List[Document]):\n        \"\"\"\uc870\uac74\ubd80 \uc2e4\uc2dc\uac04 \ud3c9\uac00\"\"\"\n\n        # \uc2e4\uc2dc\uac04 \ud3c9\uac00 \uc870\uac74\n        if self.should_evaluate_realtime(query, answer):\n            return await self.evaluator.evaluate(query, docs, answer)\n        else:\n            # \ubc31\uadf8\ub77c\uc6b4\ub4dc \ud3c9\uac00 \ud050\uc5d0 \ucd94\uac00\n            await self.evaluation_queue.put({\n                'query': query,\n                'answer': answer,\n                'docs': docs,\n                'timestamp': time.time()\n            })\n            return {\"confidence\": 0.8}  # \uae30\ubcf8\uac12 \ubc18\ud658\n\n    def _should_evaluate_realtime(self, query: str, answer: str) -&gt; bool:\n        \"\"\"\uc2e4\uc2dc\uac04 \ud3c9\uac00 \ud544\uc694 \uc5ec\ubd80 \ud310\ub2e8\"\"\"\n\n        # 1. \uc911\uc694\ud55c \uc9c8\ubb38 (\ubcf4\uc548, \uc124\uc815 \ub4f1)\n        important_keywords = [\"\ubcf4\uc548\", \"\uc124\uc815\", \"\ubc30\ud3ec\", \"\uad8c\ud55c\", \"\uc5d0\ub7ec\"]\n        if any(keyword in query for keyword in important_keywords):\n            return True\n\n        # 2. \uc9e7\uc740 \ub2f5\ubcc0 (\ube60\ub978 \ud3c9\uac00 \uac00\ub2a5)\n        if len(answer) &lt; 500:\n            return True\n\n        # 3. \ud655\uc2e0\ub3c4\uac00 \ub0ae\uc740 \ub2f5\ubcc0\n        if self._estimate_uncertainty(answer) &gt; 0.3:\n            return True\n\n        return False\n</code></pre>"},{"location":"ai/OJT-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81%EA%B3%BC-Kotaemon-RAG-%EA%B5%AC%ED%98%84%EA%B8%B0/#_10","title":"\ub9c8\ubb34\ub9ac","text":"<p>\uc774\ubc88 OJT \ub9ac\ud329\ud1a0\ub9c1 \ud504\ub85c\uc81d\ud2b8\ub294 \ub2e8\uc21c\ud788 \uae30\uc220\uc801 \uac1c\uc120\uc744 \ub118\uc5b4\uc11c \ud559\uc2b5\uc790 \uc911\uc2ec\uc758 \uc0ac\uace0\ub97c \ud558\uac8c \ub41c \uacc4\uae30\uc600\ub2e4. </p> <p>\ud575\uc2ec \uae68\ub2ec\uc74c: 1. \uc0ac\uc6a9\uc790 \ub808\ubca8 \uace0\ub824: \uac19\uc740 \uc9c8\ubb38\uc774\ub77c\ub3c4 \uacbd\ud5d8\uc5d0 \ub530\ub77c \ub2f5\ubcc0 \ubc29\uc2dd\uc774 \ub2ec\ub77c\uc57c \ud568 2. \uc810\uc9c4\uc801 \uac1c\uc120: \uc644\ubcbd\ud55c \uc2dc\uc2a4\ud15c\uc744 \ud55c \ubc88\uc5d0 \uad6c\ucd95\ud558\uae30\ubcf4\ub2e4\ub294 \uce21\uc815-\uac1c\uc120-\ubc18\ubcf5 3. \ub3c4\uba54\uc778 \ud2b9\ud654: \ubc94\uc6a9 RAG\ubcf4\ub2e4\ub294 OJT\uc5d0 \ud2b9\ud654\ub41c \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5\uc774 \ub354 \ud6a8\uacfc\uc801</p> <p>Kotaemon \ud504\ub808\uc784\uc6cc\ud06c\uc758 \ubaa8\ub4c8\ub7ec \uc124\uacc4 \ub355\ubd84\uc5d0 \ube60\ub974\uac8c \ud504\ub85c\ud1a0\ud0c0\uc774\ud551\ud560 \uc218 \uc788\uc5c8\uace0, \uc2e4\uc81c \uc0ac\uc6a9\uc790 \ud53c\ub4dc\ubc31\uc744 \ud1b5\ud574 \uc9c0\uc18d\uc801\uc73c\ub85c \uac1c\uc120\ud574 \ub098\uac08 \uc218 \uc788\uc5c8\ub2e4.</p> <p>\ub2e4\uc74c \ub2e8\uacc4\ub85c\ub294 \uba40\ud2f0\ubaa8\ub2ec \uc9c0\uc6d0(\uc774\ubbf8\uc9c0, \uc601\uc0c1 \uae30\ubc18 \ud29c\ud1a0\ub9ac\uc5bc)\uacfc \uc2e4\uc2dc\uac04 \ud559\uc2b5 \uacbd\ub85c \ucd94\ucc9c \uae30\ub2a5\uc744 \uacc4\ud68d\ud558\uace0 \uc788\ub2e4. \uac1c\ubc1c\uc790\uc758 \ud559\uc2b5 \uc5ec\uc815\uc744 \ub3d5\ub294 AI\uc758 \uac00\ub2a5\uc131\uc740 \ubb34\uad81\ubb34\uc9c4\ud558\ub2e4! \ud83c\udfaf</p>"},{"location":"ai/Thompson%20Sampling/","title":"Thompson Sampling","text":"<p>A/B \ud14c\uc2a4\ud2b8, \ucd94\ucc9c \uc2dc\uc2a4\ud15c, \uad11\uace0 \ucd5c\uc801\ud654\ucc98\ub7fc \uc2e4\uc2dc\uac04\uc73c\ub85c \uacb0\uacfc\ub97c \ubcf4\uba74\uc11c \"\ubb34\uc5c7\uc774 \ub354 \uc88b\uc744\uae4c?\"\ub97c \ud310\ub2e8\ud574\uc57c \ud560 \ub54c \uc0ac\uc6a9\ud558\ub294 \ubc29\ubc95\uc774\ub2e4.</p> <p>\uadf8\ub0e5 \ubb34\uc791\uc704\ub85c \uace0\ub974\uae30\uc5d4 \uc544\uae5d\uace0, \ud55c \uac00\uc9c0\ub9cc \uace0\uc9d1\ud558\uae30\uc5d4 \ubd88\ud655\uc2e4\ud558\ub2e4.</p> <p>\uc774\ub7f4 \ub54c \uc720\uc6a9\ud558\uac8c \uc4f0\uc774\ub294 \ubc29\ubc95\uc774 \ubc14\ub85c Thompson Sampling\uc774\ub2e4.</p>"},{"location":"ai/Thompson%20Sampling/#_1","title":"\ud575\uc2ec \uac1c\ub150 \ud55c \uc904 \uc694\uc57d","text":"<p>\ud655\ub960\uc801\uc73c\ub85c \uc798 \ub420 \uac83 \uac19\uc740 \uc120\ud0dd\uc9c0\ub97c \uace0\ub978\ub2e4.</p> <p>Thompson Sampling\uc740 \ubca0\uc774\uc9c0\uc548 \ud655\ub960 \ubaa8\ub378\uc744 \uc774\uc6a9\ud574\uc11c, \uc5ec\ub7ec \uc120\ud0dd\uc9c0 \uc911\uc5d0\uc11c \uc131\uacf5 \ud655\ub960\uc774 \ub192\uc544 \ubcf4\uc774\ub294 \uac83\uc744 \ubb34\uc791\uc704\ub85c \ubf51\uc544 \uc2e4\ud5d8\ud558\uace0, \uacb0\uacfc\ub97c \ubc18\uc601\ud574 \uc810\uc810 \ub354 \uc88b\uc740 \uc120\ud0dd\uc744 \ud560 \uc218 \uc788\ub3c4\ub85d \ub3d5\ub294 \ubc29\uc2dd\uc774\ub2e4.</p>"},{"location":"ai/Thompson%20Sampling/#multi-armed-bandit","title":"\uc608\uc2dc: \uc2ac\ub86f\uba38\uc2e0 \uac8c\uc784 (Multi-Armed Bandit \ubb38\uc81c)","text":"<p>\ub2f9\uc2e0 \uc55e\uc5d0 \uc2ac\ub86f\uba38\uc2e0(\ubf51\uae30 \uae30\uacc4)\uc774 3\ub300 \uc788\ub2e4.</p> <ul> <li>A \uc2ac\ub86f\uba38\uc2e0: \uc131\uacf5\ub960 10%</li> <li>B \uc2ac\ub86f\uba38\uc2e0: \uc131\uacf5\ub960 30%</li> <li>C \uc2ac\ub86f\uba38\uc2e0: \uc131\uacf5\ub960 50%</li> </ul> <p>\ud558\uc9c0\ub9cc \ub2f9\uc2e0\uc740 \uc774 \ud655\ub960\ub4e4\uc744 \ubaa8\ub978\ub2e4. \ub2f9\ucca8/\uc2e4\ud328 \uacb0\uacfc\ub97c \ubcf4\uba74\uc11c, \uc810\uc810 \ub354 \ub098\uc740 \uc120\ud0dd\uc744 \ud574\uc57c \ud55c\ub2e4.</p>"},{"location":"ai/Thompson%20Sampling/#thompson-sampling","title":"Thompson Sampling \ub3d9\uc791 \ubc29\uc2dd","text":"<ol> <li>\uac01 \uc120\ud0dd\uc9c0(arm)\uc5d0 \ub300\ud574 \uc131\uacf5\ub960\uc744 \ucd94\uc815\ud558\ub294 \ubd84\ud3ec\ub97c \ucd08\uae30\ud654\ud55c\ub2e4.<ul> <li>\ucd08\uae30\uc5d0\ub294 \ubaa8\ub450 <code>Beta(1, 1)</code>\ub85c \uc2dc\uc791\ud55c\ub2e4. (\uc644\uc804 \ub79c\ub364\ud55c \uc0c1\ud0dc)</li> </ul> </li> <li>\uac01 \uc120\ud0dd\uc9c0\uc5d0\uc11c \ud558\ub098\uc529 \ud655\ub960 \uac12\uc744 \uc0d8\ud50c\ub9c1\ud55c\ub2e4.<ul> <li>\uc608: A=0.12, B=0.37, C=0.42</li> </ul> </li> <li> <p>\uac00\uc7a5 \ub192\uc740 \uac12\uc744 \uac00\uc9c4 \uc120\ud0dd\uc9c0\ub97c \uc120\ud0dd\ud55c\ub2e4.</p> </li> <li> <p>\uacb0\uacfc\uc5d0 \ub530\ub77c \ubd84\ud3ec\ub97c \uc5c5\ub370\uc774\ud2b8\ud55c\ub2e4.</p> <ul> <li>\uc131\uacf5 \uc2dc: \u03b1 (\uc131\uacf5 \ud69f\uc218) += 1</li> <li>\uc2e4\ud328 \uc2dc: \u03b2 (\uc2e4\ud328 \ud69f\uc218) += 1</li> </ul> </li> <li>\uc774 \uacfc\uc815\uc744 \ubc18\ubcf5\ud558\uba74\uc11c, \uc798 \ub418\ub294 \uc120\ud0dd\uc9c0\ub294 \ub354 \uc790\uc8fc \ubf51\ud788\uace0, \ud655\uc2e0 \uc5c6\ub294 \uc120\ud0dd\uc9c0\ub294 \uac00\ub054\uc529 \ud0d0\uc0c9\ud55c\ub2e4.</li> </ol>"},{"location":"ai/Thompson%20Sampling/#beta","title":"Beta \ubd84\ud3ec\ub780?","text":"<p><code>Beta(\u03b1, \u03b2)</code>\ub294 \"\uc774 \uc120\ud0dd\uc9c0\ub294 \uc131\uacf5\ub960\uc774 \uc774 \uc815\ub3c4\uc77c \uac83\uc774\ub2e4\"\ub77c\ub294 \ubbff\uc74c\uc744 \ub098\ud0c0\ub0b8\ub2e4.</p> <ul> <li>\u03b1: \uc131\uacf5\ud55c \ud69f\uc218 + 1</li> <li>\u03b2: \uc2e4\ud328\ud55c \ud69f\uc218 + 1</li> </ul> <p>\uc608\ub97c \ub4e4\uc5b4, \uc5b4\ub5a4 \ubc84\ud2bc\uc774 3\ubc88 \uc131\uacf5\ud558\uace0 2\ubc88 \uc2e4\ud328\ud588\ub2e4\uba74 \u2192 <code>Beta(4, 3)</code> \uc0d8\ud50c\ub9c1\uc744 \ud1b5\ud574 \"\uc774 \ubc84\ud2bc\uc758 \uc2e4\uc81c \ud074\ub9ad\ub960\uc774 \uc5bc\ub9c8\uc77c\uae4c?\"\ub97c \uacc4\uc18d \ucd94\uc815\ud558\ub294 \uac70\ub2e4.</p>"},{"location":"ai/Thompson%20Sampling/#_2","title":"\ud0d0\uc0c9\uacfc \ud65c\uc6a9\uc758 \uade0\ud615","text":"<p>Thompson Sampling\uc758 \uac00\uc7a5 \ud070 \ud2b9\uc9d5\uc740, \ud0d0\uc0c9(explore)\uacfc \ud65c\uc6a9(exploit) \uc0ac\uc774\uc758 \uade0\ud615\uc744 \uc790\ub3d9\uc73c\ub85c \ub9de\ucdb0\uc900\ub2e4\ub294 \uc810\uc774\ub2e4.</p> <ul> <li>\uc544\uc9c1 \uc815\ubcf4\uac00 \ubd80\uc871\ud55c \uc120\ud0dd\uc9c0\ub294 \ubd84\ud3ec\uc758 \ubd84\uc0b0\uc774 \ucee4\uc11c \uc0d8\ud50c\ub9c1 \uac12\uc774 \uc694\ub3d9\uce58\uae30 \ub54c\ubb38\uc5d0 \ud0d0\uc0c9 \ub300\uc0c1\uc774 \ub41c\ub2e4.</li> <li>\uc815\ubcf4\uac00 \ucda9\ubd84\ud788 \uc313\uc778 \uc120\ud0dd\uc9c0\ub294 \ubd84\ud3ec\uac00 \ub0a0\uce74\ub85c\uc6cc\uc838\uc11c \uac70\uc758 \ud655\uc815\uc801\uc73c\ub85c \uc120\ud0dd\ub41c\ub2e4.</li> </ul> <p>\ub530\ub77c\uc11c \ubcc4\ub3c4\uc758 \ud30c\ub77c\ubbf8\ud130 \uc5c6\uc774\ub3c4 \uc790\uc5f0\uc2a4\ub7fd\uac8c \ud6a8\uc728\uc801\uc778 \uc120\ud0dd\uc744 \ud558\uac8c \ub429\ub2c8\ub2e4.</p>"},{"location":"ai/Thompson%20Sampling/#python","title":"Python \uc758\uc0ac \ucf54\ub4dc \uc608\uc2dc","text":"<pre><code>alpha = [1, 1, 1]  # \uac01 \uc120\ud0dd\uc9c0\uc758 \uc131\uacf5 \ud69f\uc218\nbeta = [1, 1, 1]   # \uac01 \uc120\ud0dd\uc9c0\uc758 \uc2e4\ud328 \ud69f\uc218\n\nfor t in range(1000):\n    sampled_probs = [np.random.beta(a, b) for a, b in zip(alpha, beta)]\n    chosen = np.argmax(sampled_probs)\n\n    reward = pull(chosen)  # \uc2e4\uc81c \ud074\ub9ad \uc5ec\ubd80 (1 \ub610\ub294 0)\n\n    if reward == 1:\n        alpha[chosen] += 1\n    else:\n        beta[chosen] += 1\n</code></pre>"},{"location":"ai/Thompson%20Sampling/#_3","title":"\uc5b4\ub514\uc5d0 \uc0ac\uc6a9\ud560 \uc218 \uc788\uc744\uae4c?","text":"\ubd84\uc57c \uc608\uc2dc A/B \ud14c\uc2a4\ud2b8 \uc5b4\ub5a4 \ubc84\ud2bc \ub514\uc790\uc778\uc774 \ub354 \ub098\uc740\uac00 \uad11\uace0 \ucd5c\uc801\ud654 \uc5b4\ub5a4 \ubb38\uad6c\uac00 \ud074\ub9ad\ub960\uc774 \ub192\uc740\uac00 \ucd94\ucc9c \uc2dc\uc2a4\ud15c \uc5b4\ub5a4 \uc0c1\ud488\uc744 \uba3c\uc800 \ubcf4\uc5ec\uc904\uae4c \uac8c\uc784 \uc124\uacc4 \uc5b4\ub5a4 \ubcf4\uc0c1\uc774 \ud6a8\uacfc\uc801\uc778\uac00"},{"location":"ai/Thompson%20Sampling/#_4","title":"\uc7a5\uc810 \uc694\uc57d","text":"<ul> <li>\ud0d0\uc0c9\uacfc \ud65c\uc6a9\uc758 \uade0\ud615\uc744 \uc790\ub3d9\uc73c\ub85c \uc870\uc808</li> <li>\uc218\ud559\uc801\uc73c\ub85c \uc548\uc815\uc131\uacfc \uc131\ub2a5\uc774 \uac80\uc99d\ub428</li> <li>\ucf54\ub4dc \uad6c\ud604\uc774 \uac04\ub2e8\ud568</li> <li>\uc2e4\uc81c \uc11c\ube44\uc2a4\uc5d0\uc11c \uc131\ub2a5\uc774 \uc6b0\uc218\ud568</li> </ul>"},{"location":"ai/Thompson%20Sampling/#_5","title":"\ub9c8\ubb34\ub9ac","text":"<p>Thompson Sampling\uc740 \"\uc131\uacf5 \ud655\ub960\uc774 \ub192\uc544 \ubcf4\uc774\ub294 \uc120\ud0dd\uc744 \ud655\ub960\uc801\uc73c\ub85c \ubf51\uc544 \uc2e4\ud5d8\ud558\uace0, \uadf8 \uacb0\uacfc\ub97c \ubc18\uc601\ud558\uc5ec \ub354 \ub098\uc740 \uc120\ud0dd\uc73c\ub85c \uc9c4\ud654\ud574\uac00\ub294\" \ubc29\ubc95\uc774\ub2e4.  A/B \ud14c\uc2a4\ud2b8\ub098 \ucd94\ucc9c \uc2dc\uc2a4\ud15c\ucc98\ub7fc \uc0ac\uc6a9\uc790 \ud589\ub3d9\uc744 \uae30\ubc18\uc73c\ub85c \ucd5c\uc801\uc758 \uc120\ud0dd\uc744 \ucc3e\uc544\uc57c \ud560 \ub54c \ub9e4\uc6b0 \uc720\uc6a9\ud55c \uc804\ub7b5\uc774\uba70, \uad6c\ud604\ub3c4 \uac04\ub2e8\ud558\uae30 \ub54c\ubb38\uc5d0 \uc2e4\ubb34\uc5d0 \uc27d\uac8c \uc801\uc6a9\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"ai/Tokenization/","title":"Tokenization","text":"<p>\ucd5c\uadfc \uc778\uacf5\uc9c0\ub2a5 \ubd84\uc57c\uc5d0\uc11c \uc790\uc5f0\uc5b4\ucc98\ub9ac(NLP)\ub294 \ud65c\ubc1c\ud558\uac8c \uc5f0\uad6c\ub418\uace0 \uc788\ub294 \uc601\uc5ed \uc911 \ud558\ub098\uc785\ub2c8\ub2e4.</p> <p>\ud2b9\ud788 Transformer \uad6c\uc870\uc758 \ub4f1\uc7a5\uc73c\ub85c \uc778\ud574 \uc5b8\uc5b4 \ubaa8\ub378\uc758 \uc131\ub2a5\uc774 \ud3ed\ubc1c\uc801\uc73c\ub85c \ubc1c\uc804\ud558\uc600\uace0, \uadf8 \uc911\uc2ec\uc5d0 \uc788\ub294 \ubaa8\ub378 \uc911 \ud558\ub098\uac00 BERT\uc785\ub2c8\ub2e4.</p> <p>\uc774\ubc88 \uc2dc\ub9ac\uc988\uc5d0\uc11c\ub294 \uc790\uc5f0\uc5b4\ucc98\ub9ac\ub97c \ucc98\uc74c \uc811\ud558\ub294 \ubd84\ub4e4\uc744 \uc704\ud574 \ub2e4\uc74c\uacfc \uac19\uc740 \uacfc\uc815\uc744 \uac04\ub2e8\ud788 \uc18c\uac1c\ud569\ub2c8\ub2e4.</p> <p>\uc624\ub298 \ub2e4\ub8f0 \ub0b4\uc6a9\uc740 <code>Tokenization</code> \uc785\ub2c8\ub2e4.</p> <p></p>"},{"location":"ai/Tokenization/#a","title":"A. \ud1a0\ud070\ud654\uac00 \uc65c \ud544\uc694\ud560\uae4c\uc694?","text":""},{"location":"ai/Tokenization/#1","title":"1. \ucef4\ud4e8\ud130\ub294 \uae00\uc790\ub97c \uc9c1\uc811 \uc774\ud574\ud558\uc9c0 \ubabb\ud55c\ub2e4.","text":"<p>AI\ub3c4 \uacb0\uad6d \ucef4\ud4e8\ud130 \ud504\ub85c\uadf8\ub7a8\uc774\ub77c \uae00\uc790 \uc790\uccb4\ub97c \uc774\ud574\ud558\uc9c0 \ubabb\ud569\ub2c8\ub2e4.  \ucef4\ud4e8\ud130\ub294 \uc22b\uc790\ub9cc \uc774\ud574\ud558\uc8e0. \ud1a0\ud070\ud654\ub294 \ud14d\uc2a4\ud2b8\ub97c AI\uac00 \ucc98\ub9ac\ud560 \uc218 \uc788\ub294 \uc22b\uc790\ub85c \ubc14\uafb8\ub294 \uccab \ub2e8\uacc4\uc785\ub2c8\ub2e4.</p> <p>\uc608\ub97c \ub4e4\uc5b4, \"\uc548\ub155\ud558\uc138\uc694\"\ub97c \ucef4\ud4e8\ud130\uc5d0\uac8c \uadf8\ub0e5 \uc8fc\uba74 \uc774\ud574\ud558\uc9c0 \ubabb\ud558\uc9c0\ub9cc,  \ud1a0\ud070\ud654\ub97c \ud1b5\ud574 [8275]\uc640 \uac19\uc740 \uc22b\uc790\ub85c \ubc14\uafd4\uc8fc\uba74 \ucc98\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <p></p>"},{"location":"ai/Tokenization/#2","title":"2. \uc804\uccb4 \uc0ac\uc804\uc744 \uc678\uc6b8 \uc218\ub294 \uc5c6\ub2e4.","text":"<p>\uc138\uc0c1\uc5d0\ub294 \ub108\ubb34 \ub9ce\uc740 \ub2e8\uc5b4\uac00 \uc788\uc2b5\ub2c8\ub2e4.  \ud55c\uad6d\uc5b4\ub9cc \ud574\ub3c4 \uc218\uc2ed\ub9cc \uac1c\uc758 \ub2e8\uc5b4\uac00 \uc788\uace0, \uc0c8\ub85c\uc6b4 \ub2e8\uc5b4\ub4e4\uc774 \uacc4\uc18d \uc0dd\uaca8\ub0a9\ub2c8\ub2e4.  \ubaa8\ub4e0 \ub2e8\uc5b4\ub97c \uac01\uac01 \ud558\ub098\uc758 \uc870\uac01\uc73c\ub85c \ucc98\ub9ac\ud558\ub294 \uac74 \ud604\uc2e4\uc801\uc73c\ub85c \ubd88\uac00\ub2a5\ud574\uc694.</p> <p>\ub300\uc2e0 AI\ub294 \uc790\uc8fc \uc0ac\uc6a9\ub418\ub294 \ub2e8\uc5b4\ub098 \ub2e8\uc5b4\uc758 \uc77c\ubd80\ubd84(\uc11c\ube0c\uc6cc\ub4dc)\uc744 \uae30\uc5b5\ud569\ub2c8\ub2e4.  \ub9c8\uce58 \uc6b0\ub9ac\uac00 \"\ud0c8\ubaa8\ubc29\uc9c0\uc0f4\ud478\"\ub77c\ub294 \ub2e8\uc5b4\ub97c \"\ud0c8\ubaa8\", \"\ubc29\uc9c0\", \"\uc0f4\ud478\"\ub85c \ub098\ub220 \uc774\ud574\ud558\ub294 \uac83\ucc98\ub7fc\uc694.</p> <p></p>"},{"location":"ai/Tokenization/#3","title":"3. \ucc98\uc74c \ubcf4\ub294 \ub2e8\uc5b4\ub3c4 \uc774\ud574\ud560 \uc218 \uc788\ub2e4.","text":"<p>\uc774\ub7f0 \ubc29\uc2dd \ub355\ubd84\uc5d0 AI\ub294 \ud6c8\ub828 \uacfc\uc815\uc5d0\uc11c \ud55c \ubc88\ub3c4 \ubcf4\uc9c0 \ubabb\ud55c \ub2e8\uc5b4\ub3c4 \uc5b4\ub290 \uc815\ub3c4 \uc774\ud574\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <p>\uc608\ub97c \ub4e4\uc5b4, \"\uba54\ud0c0\ubc84\uc2a4\ub77c\uc774\ud504\uc2a4\ud0c0\uc77c\"\uc774\ub77c\ub294 \uc0c8\ub85c\uc6b4 \ub2e8\uc5b4\ub97c \ub9c8\uc8fc\uccd0\ub3c4, \"\uba54\ud0c0\", \"\ubc84\uc2a4\", \"\ub77c\uc774\ud504\", \"\uc2a4\ud0c0\uc77c\"\uacfc \uac19\uc740 \uc775\uc219\ud55c \uc870\uac01\ub4e4\ub85c \ubd84\ud574\ud574 \uc758\ubbf8\ub97c \ucd94\uce21\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <p></p>"},{"location":"ai/Tokenization/#4","title":"4. \ud6a8\uc728\uc801\uc778 \uc815\ubcf4 \ucc98\ub9ac\uac00 \uac00\ub2a5\ud558\ub2e4.","text":"<p>\uc6b0\ub9ac\uac00 \uc7a5\ubb38\uc758 \uae00\uc744 \uc77d\uc744 \ub54c \ud55c \uae00\uc790\uc529 \uc77d\uc9c0 \uc54a\uace0 \ub2e8\uc5b4\ub098 \uad6c\uc808 \ub2e8\uc704\ub85c \uc77d\ub294 \uac83\ucc98\ub7fc, AI\ub3c4 \uc801\uc808\ud55c \ud06c\uae30\uc758 \uc870\uac01\uc73c\ub85c \ud14d\uc2a4\ud2b8\ub97c \ucc98\ub9ac\ud558\uba74 \ub354 \ud6a8\uc728\uc801\uc785\ub2c8\ub2e4.</p> <p>\ud1a0\ud070\uc774 \ub108\ubb34 \uc791\uc73c\uba74(\uc608: \ud55c \uae00\uc790\uc529) \ucc98\ub9ac\ud574\uc57c \ud560 \uc870\uac01\uc774 \ub108\ubb34 \ub9ce\uc544\uc9c0\uace0, \ub108\ubb34 \ud06c\uba74(\uc608: \ubb38\uc7a5 \uc804\uccb4) \ube44\uc2b7\ud55c \ud328\ud134\uc744 \uc778\uc2dd\ud558\uae30 \uc5b4\ub824\uc6cc\uc9d1\ub2c8\ub2e4.</p> <p></p>"},{"location":"ai/Tokenization/#5","title":"5. \ub2e4\uc591\ud55c \uc5b8\uc5b4\ub97c \ud558\ub098\uc758 \uc2dc\uc2a4\ud15c\uc73c\ub85c \ucc98\ub9ac\ud55c\ub2e4.","text":"<p>\ud1a0\ud070\ud654\ub294 \uc601\uc5b4, \ud55c\uad6d\uc5b4, \uc77c\ubcf8\uc5b4 \ub4f1 \uc11c\ub85c \ub2e4\ub978 \uc5b8\uc5b4\ub97c \uac19\uc740 \ubc29\uc2dd\uc73c\ub85c \ucc98\ub9ac\ud560 \uc218 \uc788\uac8c \ud574\uc90d\ub2c8\ub2e4. \uae00\uc790 \uccb4\uacc4\uac00 \uc644\uc804\ud788 \ub2e4\ub978 \uc5b8\uc5b4\ub4e4\ub3c4 \uac19\uc740 AI \ubaa8\ub378\uc774 \uc774\ud574\ud560 \uc218 \uc788\uac8c \ub418\ub294 \uac70\uc8e0.</p> <p></p>"},{"location":"ai/Tokenization/#ai","title":"\ud1a0\ud070\ud654\uac00 AI\uc758 \ub2a5\ub825\uc5d0 \ubbf8\uce58\ub294 \uc601\ud5a5","text":"<p>\uc88b\uc740 \ud1a0\ud070\ud654 \uc2dc\uc2a4\ud15c\uc740</p> <ul> <li>\ub354 \uc801\uc740 \uba54\ubaa8\ub9ac\ub85c \ub354 \ub9ce\uc740 \ub2e8\uc5b4\ub97c \uc774\ud574\ud560 \uc218 \uc788\uac8c \ud569\ub2c8\ub2e4</li> <li>\uc0c8\ub85c\uc6b4 \ub2e8\uc5b4\ub098 \uac1c\ub150\ub3c4 \ucd94\ub860\ud560 \uc218 \uc788\uac8c \ud569\ub2c8\ub2e4</li> <li>\ub2e4\uc591\ud55c \uc5b8\uc5b4\uc640 \ubc29\uc5b8\ub3c4 \ucc98\ub9ac\ud560 \uc218 \uc788\uac8c \ud569\ub2c8\ub2e4</li> <li>\ub354 \ube60\ub974\uace0 \uc815\ud655\ud558\uac8c \ud14d\uc2a4\ud2b8\ub97c \ucc98\ub9ac\ud560 \uc218 \uc788\uac8c \ud569\ub2c8\ub2e4</li> </ul> <p>\uc27d\uac8c \ub9d0\ud574, \ud1a0\ud070\ud654\ub294 AI\uac00 \uc778\uac04\uc758 \uc5b8\uc5b4\ub97c \uc774\ud574\ud558\uace0 \uc0dd\uc131\ud558\ub294 \uccab \ub2e8\uacc4\uc774\uc790 \uac00\uc7a5 \uc911\uc694\ud55c \uae30\ucd08 \uc791\uc5c5\uc785\ub2c8\ub2e4. </p> <p>\uc88b\uc740 \ud1a0\ud070\ud654 \uc5c6\uc774\ub294 \uc544\ubb34\ub9ac \ub6f0\uc5b4\ub09c AI \ubaa8\ub378\ub3c4 \uc5b8\uc5b4\ub97c \uc81c\ub300\ub85c \ucc98\ub9ac\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.</p> <p></p>"},{"location":"ai/Tokenization/#transformer","title":"\uadf8\ub7f0\ub370 \uc5ec\uae30\uc11c Transformer\ub294 \ubb50\uae38\ub798 \uc5ec\uae30\uc800\uae30 \ub4f1\uc7a5\ud560\uae4c\uc694?","text":"<p>Transformer\ub294 2017\ub144\uc5d0 \uc18c\uac1c\ub41c \uc778\uacf5\uc9c0\ub2a5 \ubaa8\ub378 \uad6c\uc870\ub85c, \ud604\uc7ac ChatGPT, Claude\uc640 \uac19\uc740 \ucd5c\uc2e0 AI \uc5b8\uc5b4 \ubaa8\ub378\uc758 \ud575\uc2ec \uae30\uc220\uc785\ub2c8\ub2e4. \ud14d\uc2a4\ud2b8\ub97c \uc774\ud574\ud558\uace0 \uc0dd\uc131\ud558\ub294 \ub370 \ud601\uc2e0\uc801\uc778 \ubc29\ubc95\uc744 \uc81c\uc2dc\ud588\uc2b5\ub2c8\ub2e4.</p> <ol> <li>\ubb38\ub9e5\uc744 \ub354 \uc798 \uc774\ud574\ud55c\ub2e4. -\u201d\uc8fc\ubcc0\uc744 \ub458\ub7ec\ubcf4\ub294 \ub2a5\ub825\u201d</li> <li>\ubcd1\ub82c \ucc98\ub9ac\uac00 \uac00\ub2a5\ud558\ub2e4. - \u201c\ub3d9\uc2dc\uc5d0 \uc5ec\ub7ec \uc77c\uc744 \ucc98\ub9ac\u201d</li> <li>\uc7a5\uac70\ub9ac \uc758\uc874\uc131\uc744 \uc798 \uc7a1\uc544\ub0b8\ub2e4. - \u201c\uba40\ub9ac \ub5a8\uc5b4\uc9c4 \uc5f0\uacb0 \uad00\uacc4 \ud30c\uc545\u201d</li> <li>\ud655\uc7a5\uc131\uc774 \ub6f0\uc5b4\ub098\ub2e4. - \u201c\ud06c\uac8c \ud0a4\uc6b8 \uc218 \uc788\ub294 \uc7a0\uc7ac\ub825\u201d</li> <li>\ub2e4\uc591\ud55c \ubd84\uc57c\uc5d0 \uc801\uc6a9\ud560 \uc218 \uc788\ub2e4. - \u201c\ub9cc\ub2a5 \ub3c4\uad6c\u201d</li> </ol> <p></p> <p>\ub531 \ubcf4\uae30\ub9cc\ud574\ub3c4 \uc5c4\uccad\ud55c \uce5c\uad6c\ub77c\ub294\uac8c \ub290\uaef4\uc9c0\uc2dc\uc8e0. \uc774\ub7ec\ud55c \uc7a5\uc810\ub4e4\uc740 \uc774\ud6c4 \ud3ec\uc2a4\ud130\uc5d0\uc11c \ub2e4\ub904\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.</p> <p>\uc790 \uc774\uc81c, LLM\uc758 \uc644\uc804 \uae30\ubc18\uc774 \ub418\ub294 \ud1a0\ud070\ud654\uc5d0 \ub300\ud574\uc11c \uad6c\uccb4\uc801\uc73c\ub85c \uc54c\uc544\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.</p> <p></p>"},{"location":"ai/Tokenization/#b-tokenization","title":"B. \ud1a0\ud070\ud654(Tokenization)\ub294 \uc5b4\ub5bb\uac8c \ub3d9\uc791\ud560\uae4c?","text":""},{"location":"ai/Tokenization/#1_1","title":"1. \uc790\uc5f0\uc5b4\ucc98\ub9ac\uc758 \uc804\ud1b5\uc801\uc778 \ud750\ub984","text":"<p>\uc790\uc5f0\uc5b4\ub97c \ucc98\ub9ac\ud558\ub294 \uacfc\uc815\uc740 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.</p> <p>\ud83d\udd25 Sentence -&gt; Tokens -&gt; Embedding -&gt; Transformer -&gt; Down-Stream Layer -&gt; Output</p> <ul> <li>sentence\u00a0: \uc0ac\ub78c\uc774 \uc77d\uc744 \uc218 \uc788\ub294 \ubb38\uc7a5(\ud14d\uc2a4\ud2b8)</li> <li>Tokens\u00a0: \ubb38\uc7a5\uc744 \uc77c\uc815\ud55c \uae30\uc900(\ub744\uc5b4\uc4f0\uae30, \uc11c\ube0c\uc6cc\ub4dc \ub4f1)\uc5d0 \ub530\ub77c \ub098\ub208 \ub2e8\uc704\ub4e4</li> <li>Embedding\u00a0: \ud1a0\ud070(Token)\uc744 \ubca1\ud130(Vector)\ub85c \ubcc0\ud658\ud574\uc8fc\ub294 \ub2e8\uacc4</li> <li>Transformer\u00a0: Embedding \uc744 \uc785\ub825\ubc1b\uc544 Attention \uba54\ucee4\ub2c8\uc998\uc744 \ud1b5\ud574 \ubb38\ub9e5 \uc815\ubcf4\ub97c \ud559\uc2b5</li> <li>Down-Stream Layer\u00a0: \ubd84\ub958, \ud68c\uadc0, \uc9c8\ubb38 \ub2f5\ubcc0 \ub4f1 \uc6d0\ud558\ub294 \ucd5c\uc885 \uacfc\uc81c\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud55c \ucd94\uac00 \ub808\uc774\uc5b4</li> <li>Output: \ucd5c\uc885 \uc608\uce21 \uacb0\uacfc(\ub808\uc774\ube14, \uc810\uc218, \ub2f5\ubcc0 \ub4f1)</li> </ul> <p></p> <p>\uacfc\uac70\uc5d0\ub294 Word2Vec \ucc98\ub7fc \uc784\ubca0\ub529\uc744 \ubcc4\ub3c4\ub85c \ud559\uc2b5\ud55c \ub4a4, \ud559\uc2b5\ub41c \uc784\ubca0\ub529\uc744 \ub2e4\ub978 \ubaa8\ub378\uc5d0 \uc785\ub825\uc744 \ub123\ub294 \ubc29\uc2dd\uc774 \ub9ce\uc558\uc2b5\ub2c8\ub2e4. </p> <p>\uadf8\ub7ec\ub098 \ucd5c\uadfc\uc758 \ub300\ud615 \uc5b8\uc5b4 \ubaa8\ub378(LLM)\uc740 \ub0b4\ubd80\uc5d0 \uc784\ubca0\ub529 \ub808\uc774\uc5b4\uac00 \ud3ec\ud568\ub418\uc5b4 \uc788\uc5b4,  \ud14d\uc2a4\ud2b8(\ud1a0\ud070)\ub97c \uc22b\uc790 \ubca1\ud130\ub85c \ubcc0\ud658\ud558\ub294 \uacfc\uc815\uc744 \ubaa8\ub378 \uad6c\uc870\uc758 \uc77c\ubd80\ub85c \uc9c1\uc811 \uc218\ud589\ud569\ub2c8\ub2e4.</p> <p></p>"},{"location":"ai/Tokenization/#2_1","title":"2. \ud1a0\ud06c\ub098\uc774\uc800\uc640 \uc784\ubca0\ub529","text":"<p>\uc790\uc5f0\uc5b4\ub97c \uae30\uacc4\uac00 \uc774\ud574\ud558\uae30 \uc704\ud574\uc11c\ub294 \uc6b0\uc120 \ubb38\uc7a5\uc744 \ud1a0\ud070(token) \ub2e8\uc704\ub85c \ub098\ub204\uc5b4\uc57c \ud569\ub2c8\ub2e4.</p> <p>\uc774 \uacfc\uc815\uc744\u00a0\ud1a0\ud06c\ub098\uc774\uc9d5(tokenizing)\uc774\ub77c\uace0 \ud558\uba70, \uc8fc\ub85c \ub2e4\uc74c\uacfc \uac19\uc740 \ubc29\uc2dd\uc774 \uc788\uc2b5\ub2c8\ub2e4.</p> <p>1.\u00a0\ub2e8\uc21c \ub744\uc5b4\uc4f0\uae30 \uae30\ubc18(whitespace tokenization)</p> <p>\ub2e8\uc21c\ud558\uace0 \ube60\ub974\uc9c0\ub9cc \ud615\ud0dc\uc18c \ubd84\uc11d\uc774 \uc5c6\uc5b4\uc11c \"\ub098\ub294\"\uacfc \"\ub098\"\ub97c \uad6c\ubd84\ud558\uc9c0 \ubabb\ud558\ub294 \ub2e8\uc810\uc774 \uc788\ub2e4. \ub610\ud55c \ubb38\uc7a5\ubd80\ud638\ub3c4 \ud568\uaed8 \ud3ec\ud568\ub418\ub294 \ubb38\uc81c\uac00 \uc788\ub2e4.</p> <pre><code>\uc785\ub825 \ubb38\uc7a5: \"\ub098\ub294 \uc624\ub298 \uc601\ud654\ub97c \ubd24\ub2e4.\"\n\ud1a0\ud070\ud654 \uacb0\uacfc: [\"\ub098\ub294\", \"\uc624\ub298\", \"\uc601\ud654\ub97c\", \"\ubd24\ub2e4.\"]\n</code></pre> <p></p> <p>2.\u00a0\ub2e8\uc5b4 \uae30\ubc18(tokenization by words)</p> <p>\uc5b4\ud718\ub2e8\uc704\ub85c \ubd84\ub9ac\uac00 \uac00\ub2a5\ud558\uc9c0\ub9cc, \uc0c8\ub85c\uc6b4 \ub2e8\uc5b4(\uc2e0\uc870\uc5b4, \ubcf5\ud569\uba85\uc0ac \ub4f1)\uc5d0 \ucde8\uc57d\ud558\ub2e4.</p> <pre><code>//\ud55c\uae00 \ud615\ud0dc\uc18c \ubd84\uc11d\uae30 \ud65c\uc6a9\n\uc785\ub825 \ubb38\uc7a5: \"\ub098\ub294 \uc624\ub298 \uc601\ud654\ub97c \ubd24\ub2e4.\"\n\ud1a0\ud070\ud654 \uacb0\uacfc: [\"\ub098\", \"\ub294\", \"\uc624\ub298\", \"\uc601\ud654\", \"\ub97c\", \"\ubcf4\ub2e4\", \"\u3146\ub2e4\"]\n</code></pre> <p></p> <p>3.\u00a0\uc11c\ube0c\uc6cc\ub4dc \uae30\ubc18(subword)</p> <p>\ub2e8\uc5b4\ubcf4\ub2e4 \uc791\uc740 \ub2e8\uc704\ub85c \ubd84\ub9ac\ud558\uc5ec \ud76c\uadc0 \ub2e8\uc5b4 \ucc98\ub9ac(OOV)\ub97c \ud6a8\uacfc\uc801\uc73c\ub85c \uc218\ud589\ud558\ub294 \ubc29\ubc95\uc785\ub2c8\ub2e4.</p> <p>BPE(Byte Pair Encoding)\ub098 WordPiece \uac19\uc740 \uae30\ubc95\uc774 \ub300\ud45c\uc801\uc774\uba70. BERT, GPT \ub4f1\uc758 NLP \ubaa8\ub378\uc5d0\uc11c \uc0ac\uc6a9\ub429\ub2c8\ub2e4.</p> <p>\uc2e0\uc870\uc5b4, \ud76c\uadc0 \ub2e8\uc5b4\ub97c \ud6a8\uacfc\uc801\uc73c\ub85c \ucc98\ub9ac \uac00\ub2a5\ud558\uc9c0\ub9cc, \uc0ac\uc804 \uad6c\ucd95\uc744 \uc704\ud574 \ud559\uc2b5 \uacfc\uc815\uc774 \ud544\uc694\ud558\ub2e4.</p> <ul> <li>BPE \ud1a0\ud06c\ub098\uc774\uc800</li> </ul> <pre><code>\uc785\ub825 \ubb38\uc7a5: \"\ub098\ub294 \uc624\ub298 \uc601\ud654\ub97c \ubd24\ub2e4.\"\n\ucd08\uae30 \ud1a0\ud070\ud654: [\"\ub098\", \"\ub294\", \"\uc624\ub298\", \"\uc601\ud654\", \"\ub97c\", \"\ubd24\", \"\ub2e4.\"]\n\uc790\uc8fc \ub098\uc624\ub294 \ubb38\uc790 \uc870\ud569 \ubcd1\ud569 \ud6c4: [\"\ub098\ub294\", \"\uc624\ub298\", \"\uc601\ud654\", \"\ub97c\", \"\ubd24\ub2e4.\"]\n</code></pre> <p>\uc5ec\uae30\uc11c \"\uc790\uc8fc \ub098\uc624\ub294 \ubb38\uc790 \uc870\ud569 \ubcd1\ud569\" \uc774\ub77c\ub294 \ub9d0\uc740 \uac00\uc7a5 \uc790\uc8fc \ub4f1\uc7a5\ud558\ub294 \ubb38\uc790 \ub610\ub294 \ub2e8\uc5b4 \uc30d\uc744 \ubcd1\ud569\ud558\uba74\uc11c \ud1a0\ud070\uc744 \uad6c\uc131\ud558\ub294 \uac81\ub2c8\ub2e4.</p> <p>\uc989, \ucc98\uc74c\uc5d0\ub294 \ubaa8\ub4e0 \ub2e8\uc5b4\ub97c \uac00\uc7a5 \uc791\uc740 \ub2e8\uc704(\uc790\ubaa8 \ub610\ub294 \uac1c\ubcc4 \ubb38\uc790)\ub85c \ucabc\uac20 \ud6c4, \ube48\ub3c4\ub97c \uae30\ubc18\uc73c\ub85c \uc810\uc9c4\uc801\uc73c\ub85c \ubcd1\ud569\ud569\ub2c8\ub2e4.</p> <ul> <li>WordPiecee - BERT</li> </ul> <pre><code>\uc785\ub825 \ubb38\uc7a5: \"\ube44\ud589\uae30\uac00 \ub0a0\uc544\uac00\uace0 \uc788\ub2e4.\"\n\ud1a0\ud070\ud654 \uacb0\uacfc: [\"\ube44\ud589\", \"##\uae30\uac00\", \"\ub0a0\uc544\", \"##\uac00\uace0\", \"\uc788\", \"##\ub2e4\", \".\"]\n</code></pre> <p></p> <p>4.\u00a0\ubb38\uc790 \uae30\ubc18(character)</p> <p>\uac01 \ubb38\uc790\ub97c \ud558\ub098\uc758 \ud1a0\ud070\uc73c\ub85c \uac04\uc8fc\ud558\ub294 \ubc29\uc2dd\uc785\ub2c8\ub2e4. \uc608\ub97c \ub4e4\uc5b4, \ub2e8\uc5b4\ub97c \ub354 \uc791\uc740 \ub2e8\uc704\ub85c \ucabc\uac1c\uc5b4 \ucc98\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <p>\uc0ac\uc804\uc5d0 \uc5c6\ub294 \ub2e8\uc5b4\ub3c4 \ucc98\ub9ac\ud560 \uc218 \uc788\ub294 \uc7a5\uc810\uc740 \uc788\uc9c0\ub9cc, \ub108\ubb34 \uae38\uc5b4\uc9c8 \uacbd\uc6b0 \ubaa8\ub378\uc774 \ubb38\ub9e5\uc744 \ud559\uc2b5\ud558\uae30 \uc5b4\ub824\uc6cc\uc9d1\ub2c8\ub2e4.</p> <pre><code>\uc785\ub825 \ubb38\uc7a5: \"\ub098\ub294 \uc624\ub298 \uc601\ud654\ub97c \ubd24\ub2e4.\"\n\ud1a0\ud070\ud654 \uacb0\uacfc: [\"\ub098\", \"\ub294\", \" \", \"\uc624\", \"\ub298\", \" \", \"\uc601\", \"\ud654\", \"\ub97c\", \" \", \"\ubd24\", \"\ub2e4\", \".\"]\n</code></pre> <p>\uc790, \ub300\ucda9 \uc5b4\ub5a4 \ubc29\uc2dd\uc758 \ud1a0\ud06c\ub098\uc774\uc9d5\uc774 \uc788\ub294\uc9c0 \uc0b4\ud3b4\ubcf4\uc558\uace0, \uc880 \ub354 \ub514\ud14c\uc77c\ud558\uac8c BPE\ub97c \uac00\uc9c0\uace0 \ub2e4\ub904\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.</p> <p></p> <p>\"\uae00\uc790\"\u00a0\ub97c BPE \ubc29\uc2dd\uc73c\ub85c \ucc98\ub9ac\ud558\ub294 \uacfc\uc815\uc744 \uc0b4\ud3b4\ubcf4\uc790\uba74,</p> <p>\ucd08\uae30 \uc0c1\ud0dc(\ubaa8\ub4e0 \ubb38\uc790 \uac1c\ubcc4 \ubd84\ub9ac)</p> <p>[\"\u3131\",\u00a0\"\u3161\",\u00a0\"\u3139\",\u00a0\"\u3148\",\u00a0\"\u314f\"] </p> <p>\ube48\ub3c4\ub97c \ubd84\uc11d\ud558\uc5ec \uac00\uc7a5 \uc790\uc8fc \ub4f1\uc7a5\ud558\ub294 \uc30d\uc744 \ubcd1\ud569</p> <p>[\"\uadf8\", \"\u3139\", \"\u3148\", \"\u314f\"] -&gt; \uac00\uc815\uc801\uc73c\ub85c \"\u3131\" + \"-\" \uac00 \uc790\uc8fc \ub4f1\uc7a5\ud55c\ub2e4\uace0 \ud558\uba74, \uc774\ub97c \ud558\ub098\uc758 \ud1a0\ud070\uc73c\ub85c \ubcd1\ud569\ud569\ub2c8\ub2e4. </p> <p>\uadf8 \ub2e4\uc74c\uc73c\ub85c \"\u3139\" + \"\u3148\"\uc774 \uc790\uc8fc \ub4f1\uc7a5\ud558\uba74 \ubcd1\ud569</p> <p>[\"\uadf8\",\u00a0\"\u3139\uc790\"] </p> <p>\uadf8 \ub2e4\uc74c\uc73c\ub85c \"\uadf8\" + \"\u3139\uc790\" \uac00 \uc790\uc8fc \ub4f1\uc7a5\ud558\uba74 \ubcd1\ud569</p> <p>[\"\uae00\uc790\"] </p> <p></p> <p>\uc774\uc81c \"\uae00\uc790\"\ub294 \ud558\ub098\uc758 \ud1a0\ud070\uc774 \ub418\uc5b4 vocabulary(\uc5b4\ud718 \uc0ac\uc804)\uc5d0 \ucd94\uac00\ub429\ub2c8\ub2e4.</p> <p>\uc2e4\uc81c NLP \ubaa8\ub378\uc5d0\uc11c\ub294 \ub2e8 \ud558\ub098\uc758 \ub2e8\uc5b4\uac00 \uc544\ub2c8\ub77c \uc218\ubc31\ub9cc \uac1c\uc758 \ub2e8\uc5b4\uac00 \ud3ec\ud568\ub41c Corpus(\ucf54\ud37c\uc2a4, \ub9d0\ubb49\uce58)\uc5d0\uc11c \uc774\ub7ec\ud55c \ubcd1\ud569\uc744 \uc218\ud589\ud569\ub2c8\ub2e4.</p> <p>\uc774\ub7ec\ud55c \ubc29\uc2dd\uc73c\ub85c \ubaa9\ud45c \uc5b4\ud718 \ud06c\uae30(Vocab Num \uc608: 30\ub9cc\uac1c \ub2e8\uc5b4)\uac00 \ub420 \ub54c\uae4c\uc9c0 \ubcd1\ud569\uc744 \ubc18\ubcf5\ud569\ub2c8\ub2e4.</p> <p></p>"},{"location":"ai/Tokenization/#3_1","title":"3. \uc65c \uc774\ub7f0 \ubc29\uc2dd\uc744 \uc0ac\uc6a9\ud560\uae4c\uc694?","text":"<p>1. \uc2e0\uc870\uc5b4, \ud76c\uadc0 \ub2e8\uc5b4 \ucc98\ub9ac</p> <ul> <li>\uc608\ub97c \ub4e4\uc5b4 \"\ucf54\ub85c\ub09819\" \ub77c\ub294 \ub2e8\uc5b4\uac00 \ucc98\uc74c \ub4f1\uc7a5\ud588\uc744 \ub54c, \uae30\uc874 \uc0ac\uc804\uc5d0 \uc5c6\ub354\ub77c\ub3c4 \"\ucf54\", \"\ub85c\", \"\ub098\", \"19\" \uac19\uc740 \uc870\ud569\uc73c\ub85c \ucc98\ub9ac\uac00 \uac00\ub2a5\ud569\ub2c8\ub2e4.</li> <li>\uc0c8\ub85c\uc6b4 \ub2e8\uc5b4\ub3c4 \uc11c\ube0c\uc6cc\ub4dc \ub2e8\uc704\ub85c \ucc98\ub9ac\ud558\uc5ec Out-Of-Vocabulary \ubb38\uc81c\ub97c \uc904\uc77c \uc218 \uc788\uc2b5\ub2c8\ub2e4.</li> </ul> <p>2. \uc5b4\ud718 \ud06c\uae30 \uac10\uc18c</p> <ul> <li>\ud55c\uad6d\uc5b4\ub294 \uc870\uc0ac(\uc744, \ub97c, \uc740, \ub294 \ub4f1)\uc640 \ub3d9\uc0ac \ubcc0\ud654(\uba39\ub2e4, \uba39\uace0, \uba39\uc5c8\ub2e4 \ub4f1)\uac00 \ub9ce\uc2b5\ub2c8\ub2e4.</li> <li>\"\uba39\ub2e4\", \"\uba39\uace0\", \"\uba39\uc5c8\ub2e4\" \ub97c \uac01\uac01 \uc800\uc7a5\ud558\ub294 \ub300\uc2e0, \"\uba39\" + [\"##\ub2e4\", \"##\uace0\", \"##\uc5c8\ub2e4\"] \ub85c \uc800\uc7a5\ud558\uba74 \uc0ac\uc804\uc744 \uc904\uc77c \uc218 \uc788\uc2b5\ub2c8\ub2e4.</li> </ul> <p>3. \ubaa8\ub378\uc758 \ubc94\uc6a9\uc131 \ud5a5\uc0c1</p> <ul> <li>\ubb38\uc7a5\uc744 \ub2e8\uc5b4 \ub2e8\uc704\ub85c \ucabc\uac1c\ub294 \ubc29\uc2dd\ubcf4\ub2e4, \uc11c\ube0c\uc6cc\ub4dc \ubc29\uc2dd\uc744 \uc0ac\uc6a9\ud558\uba74 \ud6e8\uc52c \ub2e4\uc591\ud55c \uc5b8\uc5b4 \ud328\ud134\uc744 \ud6a8\uacfc\uc801\uc73c\ub85c \ud559\uc2b5\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</li> </ul> <p> </p>"},{"location":"ai/Tokenization/#c","title":"C. \ub274\uc2a4 \uae30\uc0ac\ub97c \uc774\uc6a9\ud55c \uac04\ub2e8\ud55c \ud1a0\ud06c\ub098\uc774\uc800 \ub9cc\ub4e4\uae30","text":"<p>\ub274\uc2a4 \uae30\uc0ac\ub97c \uae30\ubc18\uc73c\ub85c \uc9c1\uc811 \ud1a0\ud06c\ub098\uc774\uc800\ub97c \ub9cc\ub4e4\uc5b4 \ubcf4\uace0, \ub3d9\uc791\ud558\ub294 \ucf54\ub4dc\ub97c \uc2e4\ud589\ud558\uba74\uc11c\u00a0\ud1a0\ud070\ud654 \uacfc\uc815\uc744 \ubcf4\uc5ec\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.</p> <p>\ub9c8\uc9c0\ub9c9\uc5d0\ub294 \ud1a0\ud06c\ub098\uc774\uc800 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \uc0ac\uc6a9\ud558\uc5ec \uac04\ub2e8\ud558\uac8c \ud1a0\ud070\ud654 \ud558\ub294 \ubc29\ubc95\ub3c4 \uc54c\ub824\ub4dc\ub9ac\uaca0\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ai/Tokenization/#1-corpus-2","title":"1. \ub274\uc2a4 \uae30\uc0ac Corpus \uc900\ube44\ud558\uae30(\ub274\uc2a4 \uae30\uc0ac 2\uac1c)","text":"<pre><code># \ub274\uc2a4 \uae30\uc0ac Corpus (2\uac1c\uc758 \uae30\uc0ac)\ncorpus = [\n    \"\"\"(\ub300\uc804=\uc5f0\ud569\ub274\uc2a4) \uc591\uc601\uc11d \uae30\uc790 = \uad50\ub0b4\uc5d0\uc11c 8\uc0b4 \uae40\ud558\ub298 \uc591\uc744 \ud749\uae30\ub85c \uc0b4\ud574\ud558\uace0 \uc790\ud574\ub97c \uc2dc\ub3c4\ud588\ub358 \ub300\uc804 \ubaa8 \ucd08\ub4f1\ud559\uad50 \uc5ec\uad50\uc0ac\uac00\n    \ub098\ud758 \uc804\uc5d0\ub3c4 \ud3ed\ub825\uc801\uc778 \uc131\ud5a5\uc744 \ubcf4\uc5ec \uc8fc\ubcc0\uc744 \uae34\uc7a5\uc2dc\ucf30\ub358 \uac83\uc73c\ub85c \uc804\ud574\uc84c\ub2e4.\n    11\uc77c \ub300\uc804\uc2dc\uad50\uc721\uccad\uacfc \uacbd\ucc30 \ub4f1\uc5d0 \ub530\ub974\uba74 \ud574\ub2f9 \uad50\uc0ac\ub294 \uc9c0\ub09c 6\uc77c \ub3d9\ub8cc \uad50\uc0ac\uc758 \ud314\uc744 \uaebe\ub294 \ub4f1 \ud3ed\ub825\uc801\uc778 \ud589\ub3d9\uc744 \ubcf4\uc600\ub2e4.\"\"\",\n\n    \"\"\"\ucd5c\uc0c1\ubaa9 \ub300\ud1b5\ub839 \uad8c\ud55c\ub300\ud589\uc774 \"\ubb34\uc5c7\ubcf4\ub2e4 \uc2dc\uae09\ud55c \uac83\uc740 \uc5f0\uae08\uac1c\ud601\"\uc774\ub77c\uba70 \"\ud558\ub8e8\uc18d\ud788 \uad6d\ud68c\uac00 \ud569\uc758\uc548\uc744 \ub3c4\ucd9c\ud574\ub2ec\ub77c\"\uace0 \ucd09\uad6c\ud588\uc2b5\ub2c8\ub2e4.\n    \ucd5c\uc0c1\ubaa9 \uad8c\ud55c\ub300\ud589\uc740 \uc624\ub298(11\uc77c) \uc815\ubd80\uc11c\uc6b8\uccad\uc0ac\uc5d0\uc11c \uad6d\ubb34\ud68c\uc758\ub97c \uc8fc\uc7ac\ud55c \uc790\ub9ac\uc5d0\uc11c \"\uad6d\ubbfc\uc5f0\uae08\uc774 \uc9c0\uae08\ucc98\ub7fc \uc6b4\uc601\ub41c\ub2e4\uba74 2041\ub144\uc5d0 \uc801\uc790\ub85c \uc804\ud658\ub418\uace0\n    2056\ub144\uc5d0\ub294 \uae30\uae08\uc774 \uc644\uc804\ud788 \uc18c\uc9c4\ub420 \uac83\"\uc774\ub77c\uba70 \uc774\uac19\uc774 \ubc1d\ud614\uc2b5\ub2c8\ub2e4.\"\"\"\n]\n</code></pre> <p>\uc774\uc81c \uc774\ub97c \uc2e4\uc81c \ud1a0\ud070\uc73c\ub85c \ubd84\ub9ac\ud558\ub294 \uacfc\uc815\uc744 \uc9c4\ud589\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.</p> <p></p>"},{"location":"ai/Tokenization/#2-tokenization","title":"2. \ub274\uc2a4 \uae30\uc0ac \ud1a0\ud06c\ub098\uc774\uc9d5(Tokenization)","text":"<p>\uc774\uc81c \uc5b4\ub5a0\ud55c \ucd5c\uc18c\ub2e8\uc704\ub85c Sentence\ub97c \ubaa8\ub450 \ucabc\uac1c\uc57c \ud569\ub2c8\ub2e4.</p> <p>\uc5ec\uae30\uc11c\ub294 \uac00\uc7a5 \uac04\ub2e8\ud55c \uc791\uc5c5\uc744 \uc218\ud589\ud560 \uac83\uc774\uae30 \ub54c\ubb38\uc5d0, \ud55c\uae00\uc744 \uc81c\uc678\ud55c \ud2b9\uc218\ubb38\uc790\ub97c \ubaa8\ub450 \uc81c\uc678\ud558\uace0 \uc74c\uc808 \ub2e8\uc704\ub85c \ubaa8\ub4e0 \ubb38\uc7a5\uc744 \ubd84\ub9ac\ud558\uc600\ub2e4.</p> <p>\uc2e4\uc81c\ub85c\ub294 \uc774 \uacfc\uc815\uc774 \uc0c1\ub2f9\ud788 \uc911\uc694\ud55c \uacfc\uc815\uc778\ub370. \ud55c\uae00\uc758 \uacbd\uc6b0 \uc774 \uacfc\uc815\uc774 \ud2b9\ud788 \uc5b4\ub835\uc2b5\ub2c8\ub2e4.</p> <p>\uc774\uc720\ub294 \uc601\uc5b4\uc640 \ub2e4\ub974\uac8c '\uc870\uc0ac'\uc758 \uc874\uc7ac\ub85c \uc758\ubbf8\uac00 \uc0c1\ub2f9\ud788 \ud06c\uac8c \ub2ec\ub77c\uc9c0\uae30\ub3c4 \ud558\uba70 \ub744\uc5b4\uc4f0\uae30\uac00 \uc798 \uc9c0\ucf1c\uc9c0\uc9c0 \uc54a\ub294 \uc5b8\uc5b4\uc774\uae30 \ub54c\ubb38\uc774\ub2e4.</p> <p>BPE \ubc29\uc2dd\uc758 \ud1a0\ud06c\ub098\uc774\uc9d5\uc744 \ub2e8\uacc4\uc801\uc73c\ub85c \uc218\ud589\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.</p> <pre><code>import re\n\ndef tokenize_syllables(corpus):\n    \"\"\"\ubb38\uc7a5\uc744 \uc74c\uc808 \ub2e8\uc704\ub85c \ubd84\ub9ac\ud558\uc5ec \ud1a0\ud070\ud654\ud558\ub294 \ud568\uc218\"\"\"\n    tokenized = []\n\n    for sentence in corpus:\n# \ud55c\uae00\uacfc \uacf5\ubc31\ub9cc \ub0a8\uae30\uace0 \uc81c\uac70\n        sentence = re.sub(r\"[^\uac00-\ud7a3\\s]\", \"\", sentence)\n# \uc5f0\uc18d\ub41c \uacf5\ubc31\uc744 \ud558\ub098\uc758 \uacf5\ubc31\uc73c\ub85c \ubcc0\ud658 \ud6c4, \uc591\ucabd \uacf5\ubc31 \uc81c\uac70\n        sentence = re.sub(r\"\\s+\", \" \", sentence).strip()\n# \uc74c\uc808 \ub2e8\uc704\ub85c \ubd84\ub9ac\n        syllables = list(sentence)\n        tokenized.append(syllables)\n\n    return tokenized\n\n# \ud1a0\ud070\ud654 \uc2e4\ud589\ntokenized_corpus = tokenize_syllables(corpus)\n\n# \uacb0\uacfc \ucd9c\ub825for idx, tokens in enumerate(tokenized_corpus):\n    print(f\"\ubb38\uc7a5 {idx + 1}: {tokens}\")\n</code></pre> <pre><code>\ubb38\uc7a5 1: ['\ub300', '\uc804', '\uc5f0', '\ud569', '\ub274', '\uc2a4', ' ', '\uc591', '\uc601', '\uc11d', ' ', '\uae30', '\uc790', ' ', '\uad50', '\ub0b4', '\uc5d0', '\uc11c', ' ', '\ud314', '\uc744', ' ', '\uaebe', '\ub294', ' ', '\ub4f1', ' ', '\ud3ed', '\ub825', '\uc801', '\uc778', ' ', '\ud589', '\ub3d9', '\uc744', ' ', '\ubcf4', '\uc600', '\ub2e4']\n\ubb38\uc7a5 2: ['\ucd5c', '\uc0c1', '\ubaa9', ' ', '\ub300', '\ud1b5', '\ub839', ' ', '\uad8c', '\ud55c', '\ub300', '\ud589', '\uc774', ' ', '\uc2dc', '\uae09', '\ud55c', ' ', '\uac83', '\uc740', ' ', '\uc5f0', '\uae08', '\uac1c', '\ud601', '\uc774', '\ub77c', '\uba70', ' ', '\uad6d', '\ud68c', '\uac00', ' ', '\ud569', '\uc758', '\uc548', '\uc744', ' ', '\ub3c4', '\ucd9c', '\ud574', '\ub2ec', '\ub77c', '\uace0']\n</code></pre> <p></p>"},{"location":"ai/Tokenization/#3_2","title":"3. \uc74c\uc808 \uc30d\uc758 \ube48\ub3c4 \uacc4\uc0b0\ud558\uae30","text":"<p>\ub3d9\uc2dc\ucd9c\ud604 \ube48\ub3c4 \uacc4\uc0b0\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.</p> <pre><code>from collections import defaultdict\n\ndef get_pair_frequencies(tokenized_corpus):\n    \"\"\"\uc74c\uc808 \uc30d\uc758 \ub3d9\uc2dc\ucd9c\ud604 \ube48\ub3c4\ub97c \uacc4\uc0b0\ud558\ub294 \ud568\uc218\"\"\"\n    pair_frequencies = defaultdict(int)\n\n    for sentence in tokenized_corpus:\n        for i in range(len(sentence) - 1):\n            pair = (sentence[i], sentence[i + 1])# \uc5f0\uc18d\ub41c \ub450 \uac1c\uc758 \uc74c\uc808 \uc30d\n            pair_frequencies[pair] += 1# \ube48\ub3c4 \uc99d\uac00return pair_frequencies\n\n# \ub3d9\uc2dc\ucd9c\ud604 \ube48\ub3c4 \uacc4\uc0b0 \uc2e4\ud589\npair_frequencies = get_pair_frequencies(tokenized_corpus)\n\n# \uacb0\uacfc \ucd9c\ub825 (\ube48\ub3c4\uc218\uac00 \ub192\uc740 \uc21c\uc73c\ub85c \uc815\ub82c)\nsorted_frequencies = sorted(pair_frequencies.items(), key=lambda x: x[1], reverse=True)\nfor pair, freq in sorted_frequencies[:10]:# \uc0c1\uc704 10\uac1c\ub9cc \ucd9c\ub825\n    print(f\"\uc30d: {pair}, \ube48\ub3c4: {freq}\")\n</code></pre> <pre><code>\uc30d: ('\ub300', '\uc804'), \ube48\ub3c4: 6\n\uc30d: ('\uc804', '\uc5f0'), \ube48\ub3c4: 1\n\uc30d: ('\uc5f0', '\ud569'), \ube48\ub3c4: 1\n\uc30d: ('\ud569', '\ub274'), \ube48\ub3c4: 1\n\uc30d: ('\ub274', '\uc2a4'), \ube48\ub3c4: 1\n\uc30d: (' ', '\uc591'), \ube48\ub3c4: 2\n\uc30d: ('\uc591', '\uc601'), \ube48\ub3c4: 1\n\uc30d: ('\uc601', '\uc11d'), \ube48\ub3c4: 1\n\uc30d: ('\ud558', '\uc9c0'), \ube48\ub3c4: 1\n\uc30d: ('\uc54a', '\ub3c4'), \ube48\ub3c4: 1\n</code></pre> <p>'\ub300'\uc640 '\uc804'\uc740\u00a06\ubc88 \ub4f1\uc7a5\ud558\uba70, \ud558\ub098\uc758 \ub2e8\uc5b4(\"\ub300\uc804\")\ub85c \ubcd1\ud569\ud558\ub294 \uac83\uc774 \uc720\ub9ac\ud569\ub2c8\ub2e4.</p> <p>\ub300\ubd80\ubd84\uc758 \ub2e4\ub978 \uc30d\uc740 1~2\ud68c \ub4f1\uc7a5 \u2192 \uc544\uc9c1 \ubcd1\ud569\ud560 \ud544\uc694 \uc5c6\uc2b5\ub2c8\ub2e4.</p> <p></p>"},{"location":"ai/Tokenization/#4_1","title":"4. \uc74c\uc808 \uc30d\uc758 \ube48\ub3c4 \uacc4\uc0b0\ud558\uae30","text":"<p>\uc6b0\ub9ac\uac00 \uac00\uc9c4 \ub370\uc774\ud130\uc5d0\uc11c \uac00\uc7a5 \uc790\uc8fc \ub4f1\uc7a5\ud558\ub294 \uc74c\uc808 \uc30d\uc744 \ubcd1\ud569\ud558\uc5ec \uc0c8\ub85c\uc6b4 \ud1a0\ud070\uc744 \uc0dd\uc131\ud558\ub294 \uacfc\uc815\uc785\ub2c8\ub2e4.</p> <pre><code>def merge_most_frequent_pair(tokenized_corpus, pair):\n    \"\"\"\uac00\uc7a5 \ube48\ubc88\ud55c \uc74c\uc808 \uc30d\uc744 \ud558\ub098\uc758 \ud1a0\ud070\uc73c\ub85c \ubcd1\ud569\ud558\ub294 \ud568\uc218\"\"\"\n    new_corpus = []\n    new_token = \"\".join(pair)# \uc30d\uc744 \ud558\ub098\uc758 \ub2e8\uc5b4\ub85c \ubcd1\ud569for sentence in tokenized_corpus:\n        new_sentence = []\n        i = 0\n        while i &lt; len(sentence):\n# \uac00\uc7a5 \ube48\ubc88\ud55c \uc30d\uc744 \ubc1c\uacac\ud558\uba74 \ubcd1\ud569\ud558\uc5ec \ucd94\uac00if i &lt; len(sentence) - 1 and (sentence[i], sentence[i + 1]) == pair:\n                new_sentence.append(new_token)\n                i += 2# \ubcd1\ud569\ub41c \ubd80\ubd84\uc744 \uac74\ub108\ub700else:\n                new_sentence.append(sentence[i])\n                i += 1\n        new_corpus.append(new_sentence)\n\n    return new_corpus\n</code></pre> <p>(\"\ub300\", \"\uc804\") \uacfc \uac19\uc774 \uac00\uc7a5 \ube48\ubc88\ud55c \uc74c\uc808 \uc30d\uc744 \ucc3e\uc544 \"\ub300\uc804\"\uc73c\ub85c \ubcd1\ud569\ud569\ub2c8\ub2e4.</p> <p>Corpus\ub97c \uc5c5\ub370\uc774\ud2b8\ud558\uba74\uc11c \uc810\uc9c4\uc801\uc73c\ub85c \uc0c8\ub85c\uc6b4 \uc11c\ube0c\uc6cc\ub4dc \ud1a0\ud070\uc744 \uc0dd\uc131\ud569\ub2c8\ub2e4.</p> <p></p>"},{"location":"ai/Tokenization/#5-wordpiece","title":"5. WordPiece \ud1a0\ud06c\ub098\uc774\uc800 \ud559\uc2b5\ud558\uae30","text":"<p>\uc774\uc81c \ubaa9\ud45c\ud558\ub294 \uc5b4\ud718(Vocab) \ud06c\uae30\uae4c\uc9c0 \ubc18\ubcf5\ud558\uc5ec \uc0c8\ub85c\uc6b4 \ud1a0\ud070\uc744 \ub9cc\ub4e4\uc5b4 \ub0b4\ub294 \uacfc\uc815\uc744 \uad6c\ud604\ud569\ub2c8\ub2e4.</p> <pre><code>def train_wordpiece(corpus, vocab_size):\n    \"\"\"WordPiece \ud1a0\ud06c\ub098\uc774\uc800 \ud559\uc2b5\"\"\"\n    tokenized_corpus = tokenize_syllables(corpus)# \uc74c\uc808 \ub2e8\uc704 \ud1a0\ud070\ud654\n    vocab = []\n\n    while len(vocab) &lt; vocab_size:\n        pair_frequencies = get_pair_frequencies(tokenized_corpus)\n\n        if not pair_frequencies:# \ubcd1\ud569\ud560 \uc30d\uc774 \ub354 \uc774\uc0c1 \uc5c6\uc73c\uba74 \uc885\ub8ccbreak\n\n# \uac00\uc7a5 \ube48\ubc88\ud55c \uc74c\uc808 \uc30d \ucc3e\uae30\n        most_frequent_pair = max(pair_frequencies, key=pair_frequencies.get)\n\n# \ud574\ub2f9 \uc30d\uc744 \ubcd1\ud569\ud558\uc5ec \uc0c8\ub85c\uc6b4 \ud1a0\ud070 \uc0dd\uc131\n        tokenized_corpus = merge_most_frequent_pair(tokenized_corpus, most_frequent_pair)\n\n# \uc0c8\ub85c\uc6b4 \ubcd1\ud569\ub41c \ud1a0\ud070\uc744 Vocabulary\uc5d0 \ucd94\uac00\n        merged_token = \"\".join(most_frequent_pair)\n        vocab.append(merged_token)\n\n# \uc911\ubcf5 \uc81c\uac70 \ud6c4 \uc815\ub82c\n        vocab = list(set(vocab))\n\n    return sorted(vocab), tokenized_corpus\n</code></pre> <p></p>"},{"location":"ai/Tokenization/#6-wordpiece","title":"6. WordPiece \ud559\uc2b5 \uacb0\uacfc","text":"<p>\uc704 \ucf54\ub4dc\uac00 \uc2e4\ud589\ub418\uba74 \uc790\uc5f0\uc2a4\ub7fd\uac8c \uc0c8\ub85c\uc6b4 \ub2e8\uc5b4 \ub2e8\uc704(Token)\uac00 \uc0dd\uc131\ub429\ub2c8\ub2e4.</p> <pre><code>final_vocab, final_tokenized_corpus = train_wordpiece(corpus, vocab_size=100)\n\nprint(\"\ucd5c\uc885 Vocab:\", final_vocab)\nprint(\"Vocab Len:\", len(final_vocab))\n</code></pre> <p>\ucd9c\ub825 \uacb0\uacfc</p> <pre><code>\ucd5c\uc885 Vocab: [' \uacbd\ucc30 ', ' \uad50', ' \uad50\uc0ac', ' \ub300', ' \ub300\uc804', ' \ub3d9\ub8cc \uad50\uc0ac', ' \uc0ac', ' \uc0ac\uac74', ' \uc591', ' \uc788', ' \uc815', '\uac00 ', '\uac83\uc774', '\uac8c ', '\uacbd\ucc30', '\uacbd\ucc30 ', '\uace0 ',\n'\uad00\ub828', '\uad6d\ubbfc', '\uad6d\ubbfc\uc5f0\uae08', '\ub294 ', '\ub2e4 ', '\ub2e4\uace0 ', '\ub2e4\uace0 \ub9d0', '\ub2e4\ub294 ', '\ub300\uc804', '\ub358 ', '\ub3c4 ', '\ub3d9\ub8cc', '\ub3d9\ub8cc \uad50\uc0ac', '\ub4e4\uc774 ', '\ub4f1 ', '\ub77c\uba70 ', '\ub85c ',\n'\ub97c ', '\uba70 ', '\uba74 ', '\uc11c ', '\uc2b5\ub2c8', '\uc2dc ', '\uc2dc\uad50', '\uc2dc\uad50\uc721\uccad', '\uc558\ub2e4 ', '\uc57c ', '\uc57c \ud560', '\uc5d0 ', '\uc5d0\uac8c ', '\uc5d0\uc11c ', '\uc5ec\uad50', '\uc5ec\uad50\uc0ac', '\uc5f0\uae08', '\uc640 ',\n'\uc721\uccad', '\uc73c\ub85c ', '\uc740 ', '\uc744 ', '\uc744 \uac15', '\uc744 \uac15\ud558', '\uc744 \uac15\ud558\uac8c ', '\uc744 \ubcf4', '\uc758 ', '\uc758 \ud314', '\uc758 \ud314\uc744 ', '\uc758 \ud314\uc744 \uaebe', '\uc758 \ud314\uc744 \uaebe\ub294 ',\n'\uc758 \ud314\uc744 \uaebe\ub294 \ub4f1 ', '\uc774 ', '\uc77c \ub300\uc804', '\uc801\uc778', '\uc801\uc778 ', '\uc804\ud574', '\uc84c\ub2e4 ', '\uc8fc\ubcc0', '\uc9c0 ', '\uc9c0 \uc54a', '\uc9c0\ub09c', '\uc9c0\ub9cc', '\ucd08\ub4f1', '\ucd5c \ub300', '\ucd5c \ub300\ud589\uc740 ',\n'\ud3ed\ub825', '\ud3ed\ub825\uc801\uc778 ', '\ud558\uace0 ', '\ud558\ub298', '\ud559\uad50', '\ud559\uad50 ', '\ud559\uad50 \uce21', '\ud55c ', '\ud55c \uac83', '\ud55c \uac83\uc73c\ub85c ', '\ud55c \uac83\uc73c\ub85c \uc54c', '\ud574 ', '\ud574\ub2f9', '\ud574\ub2f9 \uad50\uc0ac',\n'\ud574\ub2f9 \uad50\uc0ac\ub294 ', '\ud588\uc2b5\ub2c8', '\ud588\uc2b5\ub2c8\ub2e4 ', '\ud589\uc740 ', '\ud734\uc9c1', '\ud788 \u2018]\n\nVocab Len: 100\n</code></pre> <p>\u2705 \"\ub300\uc804\" \u2192\u00a0\ube48\ubc88\ud558\uac8c \ub4f1\uc7a5\ud558\uc5ec \ubcd1\ud569\ub428</p> <p>\u2705 \"\ub3d9\ub8cc \uad50\uc0ac\" \u2192\u00a0\ub2e8\uc5b4 \uc870\ud569\uc774 \uc790\uc8fc \ub4f1\uc7a5\ud558\uc5ec \ubcd1\ud569\ub428</p> <p>\u2705 \"\uad6d\ubbfc\uc5f0\uae08\" \u2192\u00a0\ub274\uc2a4\uc5d0\uc11c \ubc18\ubcf5\uc801\uc73c\ub85c \uc0ac\uc6a9\ub418\uc5b4 \ud558\ub098\uc758 \ub2e8\uc5b4\ub85c \ubcd1\ud569\ub428</p> <p>\u2705 \"\uc758 \ud314\uc744 \uaebe\ub294 \ub4f1\" \u2192\u00a0Corpus\uac00 \uc801\uc5b4 \uc77c\ubc18\uc801\uc778 NLP\uc5d0\uc11c\ub294 \ub098\uc624\uc9c0 \uc54a\ub294 \ud615\ud0dc\ub3c4 \ud3ec\ud568\ub428</p> <p> </p>"},{"location":"ai/Tokenization/#d","title":"D. \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \ud1b5\ud574 \uc27d\uac8c \ud1a0\ud070\ud654 \uc9c4\ud589","text":"<p>\uc2e4\uc81c\ub85c Hugging face\uc758 <code>tokenizers</code> \ub77c\uc774\ube0c\ub7ec\ub9ac\uc640 <code>datasets</code> \ub97c \ud65c\uc6a9\ud558\uc5ec \ud1a0\ud070\ud654\ub97c \uad6c\ud604\ud574 \ubcf4\uaca0\uc2b5\ub2c8\ub2e4.</p> <p></p> <p>\ud544\uc694\ud55c \ub77c\uc774\ube0c\ub7ec\ub9ac \uc124\uce58</p> <pre><code>pip install transformers tokenizers datasets\n</code></pre> <p></p> <p>\ub370\uc774\ud130\uc14b \ub85c\ub4dc\ud558\uae30</p> <p>\uc6b0\uc120 \ud559\uc2b5\uc5d0 \uc0ac\uc6a9\ud560 \ub370\uc774\ud130\uc14b\uc744 \ubd88\ub7ec\uc635\ub2c8\ub2e4. \uc5ec\uae30\uc11c\ub294 Hugging Face\uc758 <code>datasets</code> \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \uc0ac\uc6a9\ud558\uc5ec \ud55c\uad6d\uc5b4/\uc601\uc5b4 \ub370\uc774\ud130\uc14b\uc744 \ub85c\ub4dc\ud569\ub2c8\ub2e4.</p> <pre><code>from datasets import load_dataset\n\n# \ub370\uc774\ud130\uc14b \ub85c\ub4dc\ndataset = load_dataset(\"bongsoo/social_science_en_ko\", split='train')\n\n# \ud2b9\uc815 \uceec\ub7fc\uc758 \ub370\uc774\ud130 \ucd94\ucd9c\ndataset_corpus = dataset['\uc81c2\ud56d\uc744 \ud568\uaed8 \ub450\ub294 \uac83\uc774 \uc801\uc808\ud55c\uc9c0\uc5d0 \ub300\ud558\uc5ec \ub17c\uc758 \uacfc\uc815\uc5d0\uc11c \uc758\ubb38\uc774 \uc81c\uae30\ub418\uae30\ub3c4 \ud558\uc600\ub2e4.']\n\n# \ub370\uc774\ud130 \uc0d8\ud50c\ub9c1 (\uba54\ubaa8\ub9ac \uad00\ub9ac\ub97c \uc704\ud574)\ndataset_sample = dataset_corpus[:1000000]\n</code></pre> <p></p> <p>\ud1a0\ud06c\ub098\uc774\uc800 \ud559\uc2b5\uc2dc\ud0a4\uae30</p> <p>\uc774\uc81c BPE(Byte Pair Encoding) \uc54c\uace0\ub9ac\uc998\uc744 \uc0ac\uc6a9\ud558\ub294 \ud1a0\ud06c\ub098\uc774\uc800\ub97c \uc815\uc758\ud558\uace0 \ud559\uc2b5\uc2dc\ucf1c \ubcf4\uaca0\uc2b5\ub2c8\ub2e4.</p> <pre><code>from tokenizers import Tokenizer\nfrom tokenizers.models import BPE\nfrom tokenizers.trainers import BpeTrainer\nfrom tokenizers.pre_tokenizers import Whitespace\n\n# BPE \ud1a0\ud06c\ub098\uc774\uc800 \ucd08\uae30\ud654\ntokenizer = Tokenizer(BPE(unk_token=\"[UNK]\"))\n\n# \uacf5\ubc31 \uae30\uc900 pre-tokenizing \uc124\uc815\ntokenizer.pre_tokenizer = Whitespace()\n\n# \ud1a0\ud06c\ub098\uc774\uc800 \ud2b8\ub808\uc774\ub108 \uc124\uc815\ntrainer = BpeTrainer(\n    vocab_size=32000,  # \uc5b4\ud718 \ud06c\uae30\n    special_tokens=[\"[PAD]\", \"[UNK]\", \"[CLS]\", \"[SEP]\", \"[MASK]\"],  # \ud2b9\uc218 \ud1a0\ud070\n)\n\n# \ub370\uc774\ud130\ub85c\ubd80\ud130 \ud1a0\ud06c\ub098\uc774\uc800 \ud559\uc2b5\ntokenizer.train_from_iterator(dataset_sample, trainer)\n</code></pre> <p></p> <p>\ud559\uc2b5\ub41c \ud1a0\ud06c\ub098\uc774\uc800 \uc0ac\uc6a9\ud558\uae30</p> <p>\uc774\uc81c \ud559\uc2b5\ub41c \ud1a0\ud06c\ub098\uc774\uc800\ub97c \uc0ac\uc6a9\ud558\uc5ec \ud14d\uc2a4\ud2b8\ub97c \ud1a0\ud070\ud654\ud574 \ubcf4\uaca0\uc2b5\ub2c8\ub2e4.</p> <pre><code># \ud1a0\ud06c\ub098\uc774\uc800 \uc800\uc7a5\ntokenizer.save(\"my_tokenizer.json\")\n\n# \ud1a0\ud06c\ub098\uc774\uc800 \ub85c\ub4dc\nloaded_tokenizer = Tokenizer.from_file(\"my_tokenizer.json\")\n\n# \ud55c\uad6d\uc5b4 \ud1a0\ud070\ud654 \uc608\uc2dc\ntext = \"\uc774\ub7f0 \uac83\ub3c4 \uc798 \ubd84\ud574\ud558\ub098?\"\ntokens = loaded_tokenizer.encode(text)\nprint(\"\uc785\ub825 \ubb38\uc7a5:\", text)\nprint(\"\ud1a0\ud070\ud654 \uacb0\uacfc:\", tokens.tokens)\nprint(\"\ud1a0\ud070 ID:\", tokens.ids)\n\n# \uacb0\uacfc \uc608\uc2dc:\n# \uc785\ub825 \ubb38\uc7a5: \uc774\ub7f0 \uac83\ub3c4 \uc798 \ubd84\ud574\ud558\ub098?\n# \ud1a0\ud070\ud654 \uacb0\uacfc: ['\uc774\ub7f0', '\uac83\ub3c4', '\uc798', '\ubd84\ud574', '\ud558\ub098', '?']\n# \ud1a0\ud070 ID: [3970, 4321, 2574, 7554, 3521, 35]\n</code></pre> <p>\uc704 \uc608\uc2dc\uc5d0\uc11c \u201c\uc774\ub7f0 \uac83\ub3c4 \uc798 \ubd84\ud574\ud558\ub098?\u201d \ub77c\ub294 \ubb38\uc7a5\uc774 \uc5b4\ub5bb\uac8c \ud1a0\ud070\ud654\ub418\ub294\uc9c0 \uc0b4\ud3b4\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.</p> <pre><code>\uc785\ub825 \ubb38\uc7a5: \uc774\ub7f0 \uac83\ub3c4 \uc798 \ubd84\ud574\ud558\ub098?\n\ud1a0\ud070\ud654 \uacb0\uacfc: ['\uc774\ub7f0', '\uac83\ub3c4', '\uc798', '\ubd84\ud574', '\ud558\ub098', '?']\n\ud1a0\ud070 ID: [3970, 4321, 2574, 7554, 3521, 35]\n</code></pre> <p></p> <p>\uc774\uc81c \ud1a0\ud070\ud654 \uacb0\uacfc\ub97c \uc790\uc138\ud788 \uc0b4\ud3b4\ubcf4\uaca0\uc2b5\ub2c8\ub2e4. \uc704 \uc608\uc2dc\uc5d0\uc11c \uc6b0\ub9ac\ub294 \uba87 \uac00\uc9c0 \ud765\ubbf8\ub85c\uc6b4 \uc810\ub4e4\uc744 \ubc1c\uacac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <p>1. \uc758\ubbf8 \ub2e8\uc704\uc758 \ubd84\ub9ac</p> <p>BPE \ud1a0\ud06c\ub098\uc774\uc800\ub294 \ud55c\uad6d\uc5b4 \ubb38\uc7a5\uc744 \ub9e4\uc6b0 \ud6a8\uacfc\uc801\uc73c\ub85c \uc758\ubbf8 \ub2e8\uc704\ub85c \ubd84\ub9ac\ud588\uc2b5\ub2c8\ub2e4. \"\uc774\ub7f0\", \"\uac83\ub3c4\", \"\uc798\", \"\ubd84\ud574\", \"\ud558\ub098\"\uc640 \uac19\uc774 \uac01\uac01\uc758 \uc758\ubbf8\ub97c \uac00\uc9c4 \ub2e8\uc704\ub85c \uae54\ub054\ud558\uac8c \ud1a0\ud070\ud654\ub418\uc5c8\uc8e0.</p> <p></p> <p>2. \uc870\uc0ac \ucc98\ub9ac\uc758 \ud2b9\uc9d5</p> <p>'\uac83\ub3c4'\ucc98\ub7fc \uba85\uc0ac\uc640 \uc870\uc0ac\uac00 \uacb0\ud569\ub41c \ud615\ud0dc\ub97c \ud558\ub098\uc758 \ud1a0\ud070\uc73c\ub85c \uc778\uc2dd\ud55c \uc810\uc774 \uc778\uc0c1\uc801\uc785\ub2c8\ub2e4. \uc774\ub294 \ud1a0\ud06c\ub098\uc774\uc800\uac00 \ud55c\uad6d\uc5b4\uc758 \ud2b9\uc131\uc744 \uc798 \ud559\uc2b5\ud588\ub2e4\ub294 \uc99d\uac70\uc785\ub2c8\ub2e4.</p> <p></p> <p>3. \ub3d9\uc0ac \ubd84\ud574 \ubc29\uc2dd</p> <p>\ud765\ubbf8\ub86d\uac8c\ub3c4 '\ubd84\ud574\ud558\ub098'\uac00 '\ubd84\ud574'\uc640 '\ud558\ub098'\ub85c \ubd84\ub9ac\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc774\ub294 \ud1a0\ud06c\ub098\uc774\uc800\uac00 \uba85\uc0ac '\ubd84\ud574'\uc640 \ub3d9\uc0ac '\ud558\ub2e4'\uc758 \ud65c\uc6a9\ud615\uc744 \uad6c\ubd84\ud560 \uc218 \uc788\uc74c\uc744 \ubcf4\uc5ec\uc90d\ub2c8\ub2e4.</p> <p></p> <p>4. \ud2b9\uc218\ubb38\uc790 \ucc98\ub9ac \ubc29\ubc95</p> <p>\ubb3c\uc74c\ud45c('?')\ub97c \ubcc4\ub3c4\uc758 \ud1a0\ud070\uc73c\ub85c \ubd84\ub9ac\ud55c \uac83\ub3c4 \uc8fc\ubaa9\ud560 \ub9cc\ud569\ub2c8\ub2e4. \uc774\ucc98\ub7fc \ud2b9\uc218\ubb38\uc790\ub3c4 \uac1c\ubcc4 \ud1a0\ud070\uc73c\ub85c \ucc98\ub9ac\ub418\uc5b4 \ubb38\uc7a5\uc758 \uc758\ubbf8\ub97c \ub354\uc6b1 \uc815\ud655\ud558\uac8c \ud30c\uc545\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <p></p> <p>5. \ud1a0\ud070 ID \uc2dc\uc2a4\ud15c</p> <p>\uac01 \ud1a0\ud070\uc5d0\ub294 \uace0\uc720\ud55c ID\uac00 \ubd80\uc5ec\ub429\ub2c8\ub2e4. \uc774 ID\ub294 \ubaa8\ub378\uc774 \ud14d\uc2a4\ud2b8\ub97c \ucc98\ub9ac\ud560 \ub54c \uc0ac\uc6a9\ub418\uba70, \uc791\uc740 \uc22b\uc790\uc77c\uc218\ub85d \ud559\uc2b5 \ub370\uc774\ud130\uc5d0\uc11c \uc790\uc8fc \ub4f1\uc7a5\ud588\uac70\ub098 \uc911\uc694\ud55c \ud2b9\uc218 \ud1a0\ud070\uc77c \uac00\ub2a5\uc131\uc774 \ub192\uc2b5\ub2c8\ub2e4.  \uc774\ub7ec\ud55c \uacfc\uc815\uc744 \uc6b0\ub9ac\ub294 <code>\uc778\ucf54\ub529(encoding)</code> \uc774\ub77c\uace0 \ud569\ub2c8\ub2e4. \uadf8\ub9ac\uace0 \uc774\ub807\uac8c \uc778\ucf54\ub529\ub41c \uc22b\uc790 ID\ub97c \ub2e4\uc2dc \ud14d\uc2a4\ud2b8\ub85c \ubcc0\ud658\ud558\ub294 \uc791\uc5c5\uc744 <code>\ub514\ucf54\ub529(decoding)</code> \uc774\ub77c\uace0\ud569\ub2c8\ub2e4.</p> <p></p> <p>\uc704\uc5d0\uc11c \uc0dd\uc131\ub41c \ud1a0\ud070 ID (\uc608: [3970, 4321, 2574, 7554, 3521, 35])\uac00 \ubc14\ub85c Transformer \ubaa8\ub378\uc758 \uc2e4\uc81c \uc785\ub825\uac12\uc774 \ub429\ub2c8\ub2e4. </p> <p>\ud83d\udd25 Sentence -&gt; Tokens -&gt; Embedding -&gt; Transformer -&gt; Down-Stream Layer -&gt; Output</p> <p>\ub2e4\uc74c \uacfc\uc815\uc778 <code>Embdding</code> \uc5d0 \ub300\ud574\uc120 \ub2e4\uc74c \uc2dc\uac04\uc5d0 \ub2e4\ucdb0\ubcf4\uaca0\uc2b5\ub2c8\ub2e4.</p> <p>\uac10\uc0ac\ud569\ub2c8\ub2e4.</p>"},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/","title":"VastAI \uc778\uc2a4\ud134\uc2a4 \uad00\ub9ac API \uac00\uc774\ub4dc","text":"<p>\uc774 \ubb38\uc11c\ub294 VastAI \uc778\uc2a4\ud134\uc2a4\ub97c \uac80\uc0c9, \uc0dd\uc131, \uad00\ub9ac\ud558\ub294 API \uc0ac\uc6a9\ubc95\uc744 \uc124\uba85\ud569\ub2c8\ub2e4.</p>"},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_1","title":"\uc8fc\uc694 \uae30\ub2a5","text":""},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#1","title":"1. \uc778\uc2a4\ud134\uc2a4 \uac80\uc0c9 (\uc624\ud37c \uac80\uc0c9)","text":"<ul> <li>\uae30\ubcf8 \uac80\uc0c9: <code>GET /api/vast/offers</code></li> <li>\uace0\uae09 \uac80\uc0c9: <code>POST /api/vast/search-offers</code></li> </ul>"},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#2","title":"2. \ud15c\ud50c\ub9bf \uae30\ubc18 \uc778\uc2a4\ud134\uc2a4 \uc0dd\uc131","text":"<ul> <li>\ud15c\ud50c\ub9bf \ubaa9\ub85d: <code>GET /api/vast/templates</code></li> <li>\ud15c\ud50c\ub9bf \uc0c1\uc138: <code>GET /api/vast/templates/{template_name}</code></li> <li>\ud15c\ud50c\ub9bf \uae30\ubc18 \uc0dd\uc131: <code>POST /api/vast/instances/from-template</code></li> </ul>"},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#3-db","title":"3. \uc778\uc2a4\ud134\uc2a4 DB \uc800\uc7a5 \ubc0f \uad00\ub9ac","text":"<ul> <li>\uc790\ub3d9 DB \uc800\uc7a5: \uc778\uc2a4\ud134\uc2a4 \uc0dd\uc131 \uc2dc \uc790\ub3d9\uc73c\ub85c DB\uc5d0 \uc800\uc7a5</li> <li>\uc0c1\ud0dc \uc5c5\ub370\uc774\ud2b8: \uc778\uc2a4\ud134\uc2a4 \uc0c1\ud0dc \ubcc0\uacbd \uc2dc \uc790\ub3d9 \uc5c5\ub370\uc774\ud2b8</li> </ul>"},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#4","title":"4. \uc778\uc2a4\ud134\uc2a4 \uc0c1\ud0dc \uc870\ud68c","text":"<ul> <li>\uae30\ubcf8 \uc0c1\ud0dc: <code>GET /api/vast/instances/{instance_id}</code></li> <li>\uc0c1\uc138 \uc0c1\ud0dc: <code>GET /api/vast/instances/{instance_id}/enhanced</code></li> <li>\ube44\uc6a9 \ubd84\uc11d: <code>GET /api/vast/instances/{instance_id}/cost-analysis</code></li> </ul>"},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#api","title":"API \uc5d4\ub4dc\ud3ec\uc778\ud2b8 \uc0c1\uc138","text":""},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#1_1","title":"1. \uc778\uc2a4\ud134\uc2a4 \uac80\uc0c9","text":""},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_2","title":"\uae30\ubcf8 \uc624\ud37c \uac80\uc0c9","text":"<pre><code>GET /api/vast/offers?gpu_name=RTX4090&amp;max_price=1.5&amp;rentable=true\n</code></pre>"},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_3","title":"\uace0\uae09 \uc624\ud37c \uac80\uc0c9","text":"<pre><code>POST /api/vast/search-offers\nContent-Type: application/json\n\n{\n  \"gpu_name\": \"RTX4090\",\n  \"max_price\": 2.0,\n  \"min_gpu_ram\": 16,\n  \"num_gpus\": 1,\n  \"rentable\": true,\n  \"sort_by\": \"price\",\n  \"limit\": 10\n}\n</code></pre> <p>\uc751\ub2f5 \uc608\uc2dc: </p><pre><code>{\n  \"offers\": [\n    {\n      \"id\": \"12345\",\n      \"gpu_name\": \"RTX 4090\",\n      \"num_gpus\": 1,\n      \"gpu_ram\": 24,\n      \"dph_total\": 1.2,\n      \"rentable\": true\n    }\n  ],\n  \"total\": 50,\n  \"filtered_count\": 10,\n  \"sort_info\": {\n    \"sort_by\": \"price\",\n    \"order\": \"ascending\"\n  }\n}\n</code></pre><p></p>"},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#2_1","title":"2. \ud15c\ud50c\ub9bf \uad00\ub9ac","text":""},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_4","title":"\uc0ac\uc6a9 \uac00\ub2a5\ud55c \ud15c\ud50c\ub9bf \ubaa9\ub85d \uc870\ud68c","text":"<pre><code>GET /api/vast/templates\n</code></pre> <p>\uc751\ub2f5: </p><pre><code>{\n  \"templates\": [\n    {\n      \"name\": \"high_performance\",\n      \"config\": {\n        \"vllm_model_name\": \"Qwen/Qwen2.5-Coder-32B-Instruct\",\n        \"vllm_max_model_len\": 8192,\n        \"min_gpu_ram\": 24,\n        \"max_price\": 2.0\n      }\n    },\n    {\n      \"name\": \"budget\",\n      \"config\": {\n        \"vllm_model_name\": \"Qwen/Qwen2.5-Coder-7B-Instruct\",\n        \"min_gpu_ram\": 8,\n        \"max_price\": 0.5\n      }\n    }\n  ]\n}\n</code></pre><p></p>"},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_5","title":"\ud2b9\uc815 \ud15c\ud50c\ub9bf \uc0c1\uc138 \uc815\ubcf4","text":"<pre><code>GET /api/vast/templates/high_performance\n</code></pre>"},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#3","title":"3. \uc778\uc2a4\ud134\uc2a4 \uc0dd\uc131","text":""},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_6","title":"\ud15c\ud50c\ub9bf \uae30\ubc18 \uc778\uc2a4\ud134\uc2a4 \uc0dd\uc131","text":"<pre><code>POST /api/vast/instances/from-template?template_name=high_performance&amp;offer_id=12345\nContent-Type: application/json\n\n{\n  \"custom_config\": {\n    \"vllm_max_model_len\": 4096\n  }\n}\n</code></pre>"},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_7","title":"\uc77c\ubc18 \uc778\uc2a4\ud134\uc2a4 \uc0dd\uc131 (\ud15c\ud50c\ub9bf \uc9c0\uc6d0)","text":"<pre><code>POST /api/vast/instances\nContent-Type: application/json\n\n{\n  \"offer_id\": \"12345\",\n  \"template_name\": \"budget\",\n  \"custom_config\": {\n    \"auto_destroy\": true\n  }\n}\n</code></pre> <p>\uc751\ub2f5: </p><pre><code>{\n  \"success\": true,\n  \"instance_id\": \"inst_67890\",\n  \"template_name\": \"high_performance\",\n  \"message\": \"\ud15c\ud50c\ub9bf 'high_performance'\uc744 \uc0ac\uc6a9\ud558\uc5ec \uc778\uc2a4\ud134\uc2a4\uac00 \uc0dd\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\",\n  \"status\": \"creating\"\n}\n</code></pre><p></p>"},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#4_1","title":"4. \uc778\uc2a4\ud134\uc2a4 \uc0c1\ud0dc \uc870\ud68c","text":""},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_8","title":"\uae30\ubcf8 \uc0c1\ud0dc \uc870\ud68c","text":"<pre><code>GET /api/vast/instances/inst_67890\n</code></pre>"},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#db","title":"\uc0c1\uc138 \uc0c1\ud0dc \uc870\ud68c (DB \uc815\ubcf4 \ud3ec\ud568)","text":"<pre><code>GET /api/vast/instances/inst_67890/enhanced\n</code></pre> <p>\uc751\ub2f5: </p><pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"instance_id\": \"inst_67890\",\n    \"basic_status\": {\n      \"status\": \"running\",\n      \"public_ip\": \"192.168.1.100\"\n    },\n    \"vllm_status\": {\n      \"running\": true,\n      \"port\": 8000\n    },\n    \"db_info\": {\n      \"status\": \"running_vllm\",\n      \"cost_per_hour\": 1.2,\n      \"gpu_info\": {\n        \"gpu_name\": \"RTX 4090\",\n        \"num_gpus\": 1,\n        \"gpu_ram\": 24\n      },\n      \"uptime\": \"2:30:45\"\n    }\n  }\n}\n</code></pre><p></p>"},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_9","title":"\ube44\uc6a9 \ubd84\uc11d","text":"<pre><code>GET /api/vast/instances/inst_67890/cost-analysis\n</code></pre> <p>\uc751\ub2f5: </p><pre><code>{\n  \"instance_id\": \"inst_67890\",\n  \"cost_per_hour\": 1.2,\n  \"total_cost\": 3.0,\n  \"uptime_hours\": 2.5,\n  \"cost_breakdown\": {\n    \"hourly_rate\": 1.2,\n    \"uptime_days\": 0.1,\n    \"estimated_daily_cost\": 28.8,\n    \"estimated_monthly_cost\": 864.0\n  }\n}\n</code></pre><p></p>"},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#5","title":"5. \uc778\uc2a4\ud134\uc2a4 \ubaa9\ub85d \ubc0f \ud1b5\uacc4","text":""},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_10","title":"\ud5a5\uc0c1\ub41c \uc778\uc2a4\ud134\uc2a4 \ubaa9\ub85d \uc870\ud68c","text":"<pre><code>GET /api/vast/instances?status_filter=running&amp;sort_by=created_at\n</code></pre>"},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_11","title":"\uc804\uccb4 \ud1b5\uacc4","text":"<pre><code>GET /api/vast/statistics\n</code></pre> <p>\uc751\ub2f5: </p><pre><code>{\n  \"total_instances\": 15,\n  \"active_instances\": 8,\n  \"destroyed_instances\": 7,\n  \"total_cost\": 245.67,\n  \"average_cost_per_hour\": 1.35,\n  \"gpu_distribution\": {\n    \"RTX 4090\": 5,\n    \"RTX 3090\": 3\n  },\n  \"status_distribution\": {\n    \"running\": 6,\n    \"creating\": 2,\n    \"exited\": 7\n  }\n}\n</code></pre><p></p>"},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_12","title":"\uc0ac\uc6a9 \uac00\ub2a5\ud55c \ud15c\ud50c\ub9bf","text":""},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#1-high_performance","title":"1. high_performance","text":"<ul> <li>\ubaa9\uc801: \uace0\uc131\ub2a5 \uc791\uc5c5, \ub300\uc6a9\ub7c9 \ubaa8\ub378</li> <li>GPU: RTX4090, A100 (24GB+ RAM)</li> <li>\ubaa8\ub378: Qwen2.5-Coder-32B-Instruct</li> <li>\ucd5c\ub300 \uac00\uaca9: $2.0/hour</li> </ul>"},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#2-budget","title":"2. budget","text":"<ul> <li>\ubaa9\uc801: \uac1c\ubc1c, \ud14c\uc2a4\ud2b8, \uc18c\uaddc\ubaa8 \uc791\uc5c5</li> <li>GPU: RTX3080, RTX3090, GTX1080Ti (8GB+ RAM)</li> <li>\ubaa8\ub378: Qwen2.5-Coder-7B-Instruct</li> <li>\ucd5c\ub300 \uac00\uaca9: $0.5/hour</li> </ul>"},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#3-research","title":"3. research","text":"<ul> <li>\ubaa9\uc801: \uc5f0\uad6c, \uc2e4\ud5d8</li> <li>GPU: RTX4070, RTX4080, RTX3090 (16GB+ RAM)</li> <li>\ubaa8\ub378: Qwen2.5-Coder-14B-Instruct</li> <li>\ucd5c\ub300 \uac00\uaca9: $1.0/hour</li> </ul>"},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_13","title":"\uc0ac\uc6a9 \uc608\uc2dc","text":""},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#1_2","title":"1. \uc608\uc0b0\ud615 \uc778\uc2a4\ud134\uc2a4 \ube60\ub978 \uc0dd\uc131","text":"<pre><code># 1. \ud15c\ud50c\ub9bf \ud655\uc778\ncurl -X GET \"http://localhost:8001/api/vast/templates/budget\"\n\n# 2. \uc801\ud569\ud55c \uc624\ud37c \uac80\uc0c9\ncurl -X POST \"http://localhost:8001/api/vast/search-offers\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"max_price\": 0.5, \"min_gpu_ram\": 8, \"limit\": 5}'\n\n# 3. \ud15c\ud50c\ub9bf\uc73c\ub85c \uc778\uc2a4\ud134\uc2a4 \uc0dd\uc131\ncurl -X POST \"http://localhost:8001/api/vast/instances/from-template?template_name=budget\"\n</code></pre>"},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#2_2","title":"2. \ucee4\uc2a4\ud140 \uc124\uc815\uc73c\ub85c \uace0\uc131\ub2a5 \uc778\uc2a4\ud134\uc2a4 \uc0dd\uc131","text":"<pre><code>curl -X POST \"http://localhost:8001/api/vast/instances\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"template_name\": \"high_performance\",\n    \"custom_config\": {\n      \"vllm_max_model_len\": 16384,\n      \"vllm_gpu_memory_utilization\": 0.9\n    }\n  }'\n</code></pre>"},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#3_1","title":"3. \uc778\uc2a4\ud134\uc2a4 \ubaa8\ub2c8\ud130\ub9c1","text":"<pre><code># \uc0c1\uc138 \uc0c1\ud0dc \ud655\uc778\ncurl -X GET \"http://localhost:8001/api/vast/instances/inst_12345/enhanced\"\n\n# \ube44\uc6a9 \ubd84\uc11d\ncurl -X GET \"http://localhost:8001/api/vast/instances/inst_12345/cost-analysis\"\n\n# \uc804\uccb4 \ud1b5\uacc4\ncurl -X GET \"http://localhost:8001/api/vast/statistics\"\n</code></pre>"},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_14","title":"\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc800\uc7a5 \uc815\ubcf4","text":"<p>\uc778\uc2a4\ud134\uc2a4 \uc0dd\uc131 \uc2dc \ub2e4\uc74c \uc815\ubcf4\uac00 \uc790\ub3d9\uc73c\ub85c DB\uc5d0 \uc800\uc7a5\ub429\ub2c8\ub2e4:</p> <ul> <li>\uae30\ubcf8 \uc815\ubcf4: instance_id, offer_id, image_name, status</li> <li>GPU \uc815\ubcf4: gpu_name, num_gpus, gpu_ram (JSON)</li> <li>\ube44\uc6a9 \uc815\ubcf4: cost_per_hour</li> <li>\ub124\ud2b8\uc6cc\ud06c \uc815\ubcf4: public_ip, ssh_port, port_mappings (JSON)</li> <li>\ud15c\ud50c\ub9bf \uc815\ubcf4: template_name (\uc0ac\uc6a9\ub41c \ud15c\ud50c\ub9bf)</li> <li>\uc2dc\uac04 \uc815\ubcf4: created_at, updated_at, destroyed_at</li> <li>\uc124\uc815 \uc815\ubcf4: start_command, auto_destroy</li> </ul>"},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_15","title":"\ub85c\uadf8 \uc2dc\uc2a4\ud15c","text":"<p>\ubaa8\ub4e0 \uc778\uc2a4\ud134\uc2a4 \uc791\uc5c5\uc740 VastExecutionLog \ud14c\uc774\ube14\uc5d0 \uae30\ub85d\ub429\ub2c8\ub2e4:</p> <ul> <li>\uc791\uc5c5 \uc815\ubcf4: operation, command, result</li> <li>\uc131\ub2a5 \uc815\ubcf4: execution_time, success</li> <li>\uba54\ud0c0\ub370\uc774\ud130: template_name, gpu_info, cost_per_hour \ub4f1 (JSON)</li> </ul>"},{"location":"ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_16","title":"\uc5d0\ub7ec \ucc98\ub9ac","text":"<p>API\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 HTTP \uc0c1\ud0dc \ucf54\ub4dc\ub97c \ubc18\ud658\ud569\ub2c8\ub2e4:</p> <ul> <li>200: \uc131\uacf5</li> <li>400: \uc798\ubabb\ub41c \uc694\uccad (\ud15c\ud50c\ub9bf \uc5c6\uc74c, \ud30c\ub77c\ubbf8\ud130 \uc624\ub958 \ub4f1)</li> <li>404: \ub9ac\uc18c\uc2a4 \uc5c6\uc74c (\uc778\uc2a4\ud134\uc2a4 \uc5c6\uc74c, \ud15c\ud50c\ub9bf \uc5c6\uc74c \ub4f1)</li> <li>500: \uc11c\ubc84 \uc624\ub958</li> </ul> <p>\uc5d0\ub7ec \uc751\ub2f5 \uc608\uc2dc: </p><pre><code>{\n  \"detail\": \"\ud15c\ud50c\ub9bf 'invalid_template'\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4\"\n}\n</code></pre><p></p>"},{"location":"ai/XGEN-1.0-GPU-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%EA%B5%AC%ED%98%84%EA%B8%B0/","title":"XGEN 1.0 GPU \ubaa8\ub378 \uc11c\ube59 \uad6c\ud604\uae30 - vLLM\uacfc llama.cpp \ucd5c\uc801\ud654","text":""},{"location":"ai/XGEN-1.0-GPU-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%EA%B5%AC%ED%98%84%EA%B8%B0/#xgen-10-gpu-vllm-llamacpp","title":"XGEN 1.0 GPU \ubaa8\ub378 \uc11c\ube59 \uad6c\ud604\uae30 - vLLM\uacfc llama.cpp \ucd5c\uc801\ud654","text":"<p>2025\ub144 12\uc6d4, XGEN 1.0 \ud50c\ub7ab\ud3fc\uc5d0\uc11c \ub300\uaddc\ubaa8 \uc5b8\uc5b4 \ubaa8\ub378\uc758 \ud6a8\uc728\uc801\uc778 \uc11c\ube59\uc744 \uc704\ud574 vLLM\uacfc llama.cpp \uae30\ubc18 \ucd94\ub860 \uc5d4\uc9c4\uc744 \uad6c\ucd95\ud588\ub2e4. GPU \ub9ac\uc18c\uc2a4 \ucd5c\uc801\ud654\ubd80\ud130 \ub3d9\uc801 \ubc30\uce6d\uae4c\uc9c0, \ud504\ub85c\ub355\uc158 \ud658\uacbd\uc5d0\uc11c\uc758 LLM \uc11c\ube59 \uacbd\ud5d8\uc744 \uacf5\uc720\ud55c\ub2e4.</p>"},{"location":"ai/XGEN-1.0-GPU-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%EA%B5%AC%ED%98%84%EA%B8%B0/#_1","title":"\ubaa8\ub378 \uc11c\ube59\uc758 \ud604\uc2e4\uc801 \ubb38\uc81c\ub4e4","text":""},{"location":"ai/XGEN-1.0-GPU-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%EA%B5%AC%ED%98%84%EA%B8%B0/#transformers","title":"\uae30\uc874 Transformers \uae30\ubc18 \uc11c\ube59\uc758 \ud55c\uacc4","text":"<p>XGEN 1.0 \ucd08\uae30 \ubc84\uc804\uc5d0\uc11c\ub294 Hugging Face Transformers\ub97c \uc9c1\uc811 \uc0ac\uc6a9\ud588\ub2e4:</p> <pre><code># \uae30\uc874 \ubc29\uc2dd\uc758 \ubb38\uc81c\uc810\nfrom transformers import AutoModelForCausalLM, AutoTokenizer\nimport torch\n\nclass SimpleModelServer:\n    def __init__(self, model_name: str):\n        self.device = \"cuda\" if torch.cuda.is_available() else \"cpu\"\n        self.model = AutoModelForCausalLM.from_pretrained(\n            model_name,\n            torch_dtype=torch.float16,\n            device_map=\"auto\"\n        )\n        self.tokenizer = AutoTokenizer.from_pretrained(model_name)\n\n    def generate(self, prompt: str, max_length: int = 2048):\n        inputs = self.tokenizer(prompt, return_tensors=\"pt\").to(self.device)\n\n        with torch.no_grad():\n            outputs = self.model.generate(\n                **inputs,\n                max_length=max_length,\n                do_sample=True,\n                temperature=0.7,\n                pad_token_id=self.tokenizer.eos_token_id\n            )\n\n        return self.tokenizer.decode(outputs[0], skip_special_tokens=True)\n</code></pre> <p>\uc2ec\uac01\ud55c \ubb38\uc81c\uc810\ub4e4:</p> <ol> <li>GPU \uba54\ubaa8\ub9ac \ub0ad\ube44: Llama-7B \ubaa8\ub378\ub3c4 VRAM 14GB+ \uc0ac\uc6a9</li> <li>\ubc30\uce6d \ubd88\uac00: \ub3d9\uc2dc \uc694\uccad \ucc98\ub9ac \uc2dc \uc120\ud615\uc801 \uc9c0\uc5f0 \uc99d\uac00  </li> <li>KV \uce90\uc2dc \ube44\ud6a8\uc728: \uac01 \uc694\uccad\ub9c8\ub2e4 \uc0c8\ub85c\uc6b4 \uba54\ubaa8\ub9ac \ud560\ub2f9</li> <li>\ub3d9\uc801 \ud615\ud0dc \uc81c\ud55c: \ub2e4\uc591\ud55c \uc2dc\ud000\uc2a4 \uae38\uc774 \ucc98\ub9ac \ube44\ud6a8\uc728\uc801</li> </ol> <p>\uc2e4\uc81c \uce21\uc815 \uacb0\uacfc: - \ucc98\ub9ac\ub7c9: \ub3d9\uc2dc 1\uac1c \uc694\uccad\ub9cc \uac00\ub2a5 - \uc9c0\uc5f0\uc2dc\uac04: \ud3c9\uade0 8-12\ucd08 (Llama-13B \uae30\uc900) - GPU \ud65c\uc6a9\ub960: 30% \ubbf8\ub9cc (\uba54\ubaa8\ub9ac \ubc14\uc6b4\ub4dc) - \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9: 24GB VRAM\uc5d0\uc11c 16GB+ \uc0ac\uc6a9</p>"},{"location":"ai/XGEN-1.0-GPU-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%EA%B5%AC%ED%98%84%EA%B8%B0/#vllm","title":"vLLM: \ud601\uc2e0\uc801\uc778 \ucd94\ub860 \ucd5c\uc801\ud654","text":""},{"location":"ai/XGEN-1.0-GPU-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%EA%B5%AC%ED%98%84%EA%B8%B0/#pagedattention","title":"PagedAttention\uc73c\ub85c \uba54\ubaa8\ub9ac \ud601\uba85","text":"<p>vLLM\uc758 \ud575\uc2ec\uc740 PagedAttention \uc54c\uace0\ub9ac\uc998\uc774\ub2e4:</p> <pre><code># vLLM \uae30\ubc18 \uc11c\ubc84 \uad6c\ucd95\nfrom vllm import LLM, SamplingParams\nfrom vllm.entrypoints.api_server import APIServer\nimport asyncio\nfrom typing import List, Dict\n\nclass VLLMServer:\n    def __init__(\n        self,\n        model_name: str,\n        tensor_parallel_size: int = 1,\n        gpu_memory_utilization: float = 0.9,\n        max_model_len: int = 4096\n    ):\n        self.llm = LLM(\n            model=model_name,\n            tensor_parallel_size=tensor_parallel_size,\n            gpu_memory_utilization=gpu_memory_utilization,\n            max_model_len=max_model_len,\n            trust_remote_code=True,\n            # PagedAttention \uc124\uc815\n            block_size=16,  # KV \uce90\uc2dc \ube14\ub85d \ud06c\uae30\n            swap_space=8,   # CPU-GPU \uc2a4\uc651 \uacf5\uac04 (GB)\n            disable_log_stats=False\n        )\n\n        self.default_sampling_params = SamplingParams(\n            temperature=0.7,\n            top_p=0.9,\n            top_k=50,\n            max_tokens=2048,\n            repetition_penalty=1.1\n        )\n\n    async def generate_batch(\n        self, \n        prompts: List[str], \n        sampling_params: SamplingParams = None\n    ) -&gt; List[str]:\n        \"\"\"\ub3d9\uc801 \ubc30\uce6d\uc73c\ub85c \uc5ec\ub7ec \uc694\uccad \ub3d9\uc2dc \ucc98\ub9ac\"\"\"\n\n        if sampling_params is None:\n            sampling_params = self.default_sampling_params\n\n        # vLLM \uc790\ub3d9 \ubc30\uce6d \ubc0f KV \uce90\uc2dc \ucd5c\uc801\ud654\n        outputs = self.llm.generate(prompts, sampling_params)\n\n        return [output.outputs[0].text for output in outputs]\n\n    async def generate_stream(\n        self, \n        prompt: str, \n        sampling_params: SamplingParams = None\n    ):\n        \"\"\"\uc2a4\ud2b8\ub9ac\ubc0d \uc751\ub2f5 \uc0dd\uc131\"\"\"\n\n        if sampling_params is None:\n            sampling_params = self.default_sampling_params\n\n        # \uc2a4\ud2b8\ub9ac\ubc0d \ubaa8\ub4dc \ud65c\uc131\ud654\n        streaming_params = SamplingParams(\n            **sampling_params.to_dict(),\n            stream=True\n        )\n\n        async for output in self.llm.generate_stream([prompt], streaming_params):\n            if output.outputs:\n                yield output.outputs[0].text\n\n    def get_memory_stats(self) -&gt; Dict:\n        \"\"\"GPU \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9 \ud1b5\uacc4\"\"\"\n        return {\n            \"gpu_cache_usage\": self.llm.llm_engine.cache_config.gpu_memory_utilization,\n            \"num_blocks\": self.llm.llm_engine.cache_config.num_gpu_blocks,\n            \"block_size\": self.llm.llm_engine.cache_config.block_size,\n            \"allocated_memory_gb\": torch.cuda.memory_allocated() / 1024**3,\n            \"cached_memory_gb\": torch.cuda.memory_reserved() / 1024**3\n        }\n</code></pre>"},{"location":"ai/XGEN-1.0-GPU-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%EA%B5%AC%ED%98%84%EA%B8%B0/#_2","title":"\ub3d9\uc801 \ubc30\uce6d\uc758 \ub9c8\ubc95","text":"<p>vLLM\uc758 \ud575\uc2ec \ud601\uc2e0\uc740 continuous batching\uc774\ub2e4:</p> <pre><code>class DynamicBatchManager:\n    \"\"\"vLLM \ub0b4\ubd80 \ub3d9\uc801 \ubc30\uce6d \ub85c\uc9c1 (\uac1c\ub150\uc801 \uad6c\ud604)\"\"\"\n\n    def __init__(self, max_batch_size: int = 32):\n        self.max_batch_size = max_batch_size\n        self.running_requests = []\n        self.waiting_requests = asyncio.Queue()\n        self.scheduler_interval = 0.01  # 10ms\n\n    async def schedule_continuously(self):\n        \"\"\"\uc5f0\uc18d\uc801\uc778 \uc694\uccad \uc2a4\ucf00\uc904\ub9c1\"\"\"\n\n        while True:\n            current_time = time.time()\n\n            # 1. \uc644\ub8cc\ub41c \uc694\uccad \uc81c\uac70\n            self.running_requests = [\n                req for req in self.running_requests \n                if not req.is_finished()\n            ]\n\n            # 2. \uc0c8\ub85c\uc6b4 \uc694\uccad \ucd94\uac00 (\ubc30\uce58 \ud06c\uae30 \uace0\ub824)\n            available_slots = self.max_batch_size - len(self.running_requests)\n\n            for _ in range(available_slots):\n                try:\n                    new_request = self.waiting_requests.get_nowait()\n                    self.running_requests.append(new_request)\n                except asyncio.QueueEmpty:\n                    break\n\n            # 3. \ud604\uc7ac \ubc30\uce58 \ucd94\ub860 \uc2e4\ud589\n            if self.running_requests:\n                await self._process_batch(self.running_requests)\n\n            # 4. \ub2e4\uc74c \uc2a4\ucf00\uc904\ub9c1\uae4c\uc9c0 \ub300\uae30\n            await asyncio.sleep(self.scheduler_interval)\n\n    async def _process_batch(self, requests: List):\n        \"\"\"\ubc30\uce58 \ucd94\ub860 \ucc98\ub9ac\"\"\"\n\n        # KV \uce90\uc2dc \uc0c1\ud0dc \uc218\uc9d1\n        kv_caches = [req.kv_cache for req in requests]\n        input_ids = [req.get_next_tokens() for req in requests]\n\n        # \ud55c\ubc88\uc758 forward pass\ub85c \ubaa8\ub4e0 \uc694\uccad \ucc98\ub9ac\n        logits = await self.model.forward_batch(input_ids, kv_caches)\n\n        # \uacb0\uacfc\ub97c \uac01 \uc694\uccad\uc5d0 \ubd84\ubc30\n        for i, request in enumerate(requests):\n            next_token = self.sample_token(logits[i], request.sampling_params)\n            request.add_token(next_token)\n</code></pre>"},{"location":"ai/XGEN-1.0-GPU-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%EA%B5%AC%ED%98%84%EA%B8%B0/#_3","title":"\uc2e4\uc81c \ubc30\ud3ec \uc544\ud0a4\ud14d\ucc98","text":"<pre><code># docker-compose.vllm.yml\nversion: '3.8'\nservices:\n  vllm-server:\n    build:\n      context: ./vllm-server\n      dockerfile: Dockerfile.gpu\n    ports:\n      - \"8000:8000\"\n    environment:\n      - CUDA_VISIBLE_DEVICES=0,1  # \uba40\ud2f0 GPU\n      - VLLM_TENSOR_PARALLEL_SIZE=2\n      - VLLM_GPU_MEMORY_UTILIZATION=0.85\n      - VLLM_MAX_MODEL_LEN=8192\n    volumes:\n      - ./models:/models\n      - /dev/shm:/dev/shm  # \uacf5\uc720 \uba54\ubaa8\ub9ac \ucd5c\uc801\ud654\n    deploy:\n      resources:\n        reservations:\n          devices:\n            - driver: nvidia\n              count: 2\n              capabilities: [gpu]\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:8000/health\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n\n  nginx-proxy:\n    image: nginx:alpine\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    volumes:\n      - ./nginx.conf:/etc/nginx/nginx.conf\n      - ./ssl:/etc/ssl\n    depends_on:\n      - vllm-server\n\n  prometheus:\n    image: prom/prometheus\n    ports:\n      - \"9090:9090\"\n    volumes:\n      - ./prometheus.yml:/etc/prometheus/prometheus.yml\n\n  grafana:\n    image: grafana/grafana\n    ports:\n      - \"3000:3000\"\n    environment:\n      - GF_SECURITY_ADMIN_PASSWORD=admin123\n    volumes:\n      - grafana_data:/var/lib/grafana\n</code></pre>"},{"location":"ai/XGEN-1.0-GPU-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%EA%B5%AC%ED%98%84%EA%B8%B0/#llamacpp-cpu","title":"llama.cpp: CPU \ucd94\ub860\uc758 \ud601\uc2e0","text":""},{"location":"ai/XGEN-1.0-GPU-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%EA%B5%AC%ED%98%84%EA%B8%B0/#cpu","title":"CPU\uc5d0\uc11c\ub3c4 \ube60\ub978 \ucd94\ub860\uc774 \uac00\ub2a5\ud558\ub2e4\uace0?","text":"<p>GPU\uac00 \uc5c6\ub294 \ud658\uacbd\uc774\ub098 \ube44\uc6a9 \ucd5c\uc801\ud654\ub97c \uc704\ud574 llama.cpp\ub3c4 \ud568\uaed8 \uad6c\ucd95\ud588\ub2e4:</p> <pre><code># llama.cpp Python \ubc14\uc778\ub529 \ud65c\uc6a9\nfrom llama_cpp import Llama, LlamaGrammar\nimport asyncio\nfrom concurrent.futures import ThreadPoolExecutor\nimport ctypes\n\nclass LlamaCppServer:\n    def __init__(\n        self,\n        model_path: str,\n        n_ctx: int = 4096,\n        n_threads: int = None,\n        n_gpu_layers: int = 0,  # CPU only\uc77c \ub54c 0\n        use_mmap: bool = True,\n        use_mlock: bool = True\n    ):\n        # \uc2a4\ub808\ub4dc \uc218 \uc790\ub3d9 \uc124\uc815\n        if n_threads is None:\n            n_threads = min(16, os.cpu_count())\n\n        self.llm = Llama(\n            model_path=model_path,\n            n_ctx=n_ctx,\n            n_threads=n_threads,\n            n_gpu_layers=n_gpu_layers,\n            use_mmap=use_mmap,\n            use_mlock=use_mlock,\n            verbose=False,\n            # CPU \ucd5c\uc801\ud654 \uc635\uc158\n            f16_kv=True,        # KV \uce90\uc2dc FP16 \uc0ac\uc6a9\n            logits_all=False,   # \ub9c8\uc9c0\ub9c9 \ud1a0\ud070 logits\ub9cc \uacc4\uc0b0\n            vocab_only=False,\n            n_batch=512,        # \ubc30\uce58 \ud06c\uae30\n        )\n\n        # \uc2a4\ub808\ub4dc \ud480 (\ube44\ub3d9\uae30 \ucc98\ub9ac\uc6a9)\n        self.executor = ThreadPoolExecutor(max_workers=4)\n\n    async def generate_async(\n        self, \n        prompt: str,\n        max_tokens: int = 2048,\n        temperature: float = 0.7,\n        top_p: float = 0.9,\n        grammar: str = None\n    ) -&gt; str:\n        \"\"\"\ube44\ub3d9\uae30 \ud14d\uc2a4\ud2b8 \uc0dd\uc131\"\"\"\n\n        # Grammar \uc124\uc815 (JSON, \ucf54\ub4dc \ub4f1 \ud2b9\uc815 \ud615\uc2dd \uac15\uc81c)\n        llama_grammar = None\n        if grammar:\n            llama_grammar = LlamaGrammar.from_string(grammar)\n\n        # CPU \ubc14\uc6b4\ub4dc \uc791\uc5c5\uc744 \uc2a4\ub808\ub4dc \ud480\uc5d0\uc11c \uc2e4\ud589\n        loop = asyncio.get_event_loop()\n        result = await loop.run_in_executor(\n            self.executor,\n            self._generate_sync,\n            prompt,\n            max_tokens,\n            temperature,\n            top_p,\n            llama_grammar\n        )\n\n        return result\n\n    def _generate_sync(\n        self, \n        prompt: str, \n        max_tokens: int,\n        temperature: float,\n        top_p: float,\n        grammar\n    ) -&gt; str:\n        \"\"\"\ub3d9\uae30 \ud14d\uc2a4\ud2b8 \uc0dd\uc131 (\ub0b4\ubd80 \ud5ec\ud37c)\"\"\"\n\n        response = self.llm(\n            prompt,\n            max_tokens=max_tokens,\n            temperature=temperature,\n            top_p=top_p,\n            grammar=grammar,\n            echo=False,\n            stop=[\"&lt;/s&gt;\", \"[INST]\", \"[/INST]\"]\n        )\n\n        return response['choices'][0]['text']\n\n    def stream_generate(self, prompt: str, **kwargs):\n        \"\"\"\uc2a4\ud2b8\ub9ac\ubc0d \uc0dd\uc131 (\uc81c\ub108\ub808\uc774\ud130)\"\"\"\n\n        stream = self.llm(\n            prompt,\n            stream=True,\n            **kwargs\n        )\n\n        for output in stream:\n            token = output['choices'][0]['text']\n            yield token\n\n    def get_model_info(self) -&gt; dict:\n        \"\"\"\ubaa8\ub378 \uc815\ubcf4 \uc870\ud68c\"\"\"\n        return {\n            \"n_vocab\": self.llm.n_vocab(),\n            \"n_ctx\": self.llm.n_ctx(),\n            \"n_embd\": self.llm.n_embd(),\n            \"n_layer\": self.llm.n_layer(),\n            \"model_size_gb\": self._estimate_model_size(),\n            \"memory_usage_gb\": self._get_memory_usage()\n        }\n\n    def _estimate_model_size(self) -&gt; float:\n        \"\"\"\ubaa8\ub378 \ud06c\uae30 \ucd94\uc815\"\"\"\n        try:\n            import os\n            return os.path.getsize(self.model_path) / (1024**3)\n        except:\n            return 0.0\n\n    def _get_memory_usage(self) -&gt; float:\n        \"\"\"\ud604\uc7ac \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9\"\"\"\n        import psutil\n        process = psutil.Process()\n        return process.memory_info().rss / (1024**3)\n</code></pre>"},{"location":"ai/XGEN-1.0-GPU-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%EA%B5%AC%ED%98%84%EA%B8%B0/#_4","title":"\ubaa8\ub378 \uc591\uc790\ud654\uc640 \ucd5c\uc801\ud654","text":"<p>llama.cpp\uc758 \uac15\ub825\ud55c \uae30\ub2a5 \uc911 \ud558\ub098\ub294 \ub2e4\uc591\ud55c \uc591\uc790\ud654 \uc635\uc158\uc774\ub2e4:</p> <pre><code>#!/bin/bash\n# \ubaa8\ub378 \uc591\uc790\ud654 \uc2a4\ud06c\ub9bd\ud2b8\n\nMODEL_NAME=\"llama-2-7b-chat\"\nINPUT_DIR=\"./models/${MODEL_NAME}\"\nOUTPUT_DIR=\"./models/${MODEL_NAME}-quantized\"\n\necho \"Converting to GGUF format...\"\npython convert.py ${INPUT_DIR} --outdir ${OUTPUT_DIR} --outtype f16\n\necho \"Quantizing models...\"\n\n# Q4_0: \uac00\uc7a5 \ube60\ub984, \uc57d\uac04\uc758 \ud488\uc9c8 \uc190\uc2e4\n./quantize ${OUTPUT_DIR}/${MODEL_NAME}.gguf ${OUTPUT_DIR}/${MODEL_NAME}-q4_0.gguf q4_0\n\n# Q4_K_M: \ud488\uc9c8\uacfc \uc18d\ub3c4\uc758 \uade0\ud615\n./quantize ${OUTPUT_DIR}/${MODEL_NAME}.gguf ${OUTPUT_DIR}/${MODEL_NAME}-q4_k_m.gguf q4_k_m\n\n# Q5_K_M: \ub354 \ub098\uc740 \ud488\uc9c8\n./quantize ${OUTPUT_DIR}/${MODEL_NAME}.gguf ${OUTPUT_DIR}/${MODEL_NAME}-q5_k_m.gguf q5_k_m\n\n# Q8_0: \ucd5c\uace0 \ud488\uc9c8, \uc0c1\ub300\uc801\uc73c\ub85c \ub290\ub9bc\n./quantize ${OUTPUT_DIR}/${MODEL_NAME}.gguf ${OUTPUT_DIR}/${MODEL_NAME}-q8_0.gguf q8_0\n\necho \"Quantization complete!\"\n\n# \ubaa8\ub378 \ubca4\uce58\ub9c8\ud0b9\nfor quant in q4_0 q4_k_m q5_k_m q8_0; do\n    echo \"Benchmarking ${quant}...\"\n    ./llama-bench -m ${OUTPUT_DIR}/${MODEL_NAME}-${quant}.gguf -p 128 -n 512\ndone\n</code></pre> <p>\uc591\uc790\ud654 \ube44\uad50 \uacb0\uacfc:</p> \uc591\uc790\ud654 \ud06c\uae30 \uc18d\ub3c4 \ud488\uc9c8 \uba54\ubaa8\ub9ac FP16 13.5GB \uae30\uc900 100% 14GB Q8_0 7.2GB 95% 99% 8GB Q5_K_M 5.1GB 110% 97% 6GB Q4_K_M 4.0GB 125% 95% 5GB Q4_0 3.7GB 140% 92% 4.5GB"},{"location":"ai/XGEN-1.0-GPU-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%EA%B5%AC%ED%98%84%EA%B8%B0/#_5","title":"\ud1b5\ud569 \ubaa8\ub378 \ub77c\uc6b0\ud130","text":"<p>vLLM\uacfc llama.cpp\ub97c \uc0c1\ud669\uc5d0 \ub530\ub77c \uc120\ud0dd\uc801\uc73c\ub85c \uc0ac\uc6a9\ud558\ub294 \ub77c\uc6b0\ud130\ub97c \uad6c\ud604\ud588\ub2e4:</p> <pre><code>from enum import Enum\nfrom typing import Optional, Union\nimport asyncio\n\nclass ModelBackend(Enum):\n    VLLM = \"vllm\"\n    LLAMA_CPP = \"llama_cpp\"\n    AUTO = \"auto\"\n\nclass ModelRouter:\n    def __init__(self):\n        self.vllm_server = None\n        self.llama_cpp_server = None\n        self.load_balancer = LoadBalancer()\n\n    async def initialize(self):\n        \"\"\"\uc11c\ubc84 \ucd08\uae30\ud654\"\"\"\n\n        # GPU \uc0ac\uc6a9 \uac00\ub2a5 \uc5ec\ubd80 \ud655\uc778\n        if torch.cuda.is_available():\n            self.vllm_server = VLLMServer(\n                model_name=\"microsoft/DialoGPT-medium\",\n                tensor_parallel_size=torch.cuda.device_count(),\n                gpu_memory_utilization=0.85\n            )\n\n        # CPU \ubc31\uc5d4\ub4dc\ub294 \ud56d\uc0c1 \uc900\ube44\n        self.llama_cpp_server = LlamaCppServer(\n            model_path=\"./models/llama-2-7b-chat-q4_k_m.gguf\",\n            n_threads=16\n        )\n\n    async def generate(\n        self,\n        prompt: str,\n        backend: ModelBackend = ModelBackend.AUTO,\n        **kwargs\n    ) -&gt; str:\n        \"\"\"\uc694\uccad\uc5d0 \uc801\ud569\ud55c \ubc31\uc5d4\ub4dc \uc120\ud0dd \ubc0f \uc0dd\uc131\"\"\"\n\n        selected_backend = self._select_backend(prompt, backend, **kwargs)\n\n        if selected_backend == ModelBackend.VLLM and self.vllm_server:\n            return await self._generate_vllm(prompt, **kwargs)\n        elif selected_backend == ModelBackend.LLAMA_CPP:\n            return await self._generate_llama_cpp(prompt, **kwargs)\n        else:\n            raise ValueError(f\"Backend {selected_backend} not available\")\n\n    def _select_backend(\n        self,\n        prompt: str,\n        backend: ModelBackend,\n        **kwargs\n    ) -&gt; ModelBackend:\n        \"\"\"\ubc31\uc5d4\ub4dc \uc120\ud0dd \ub85c\uc9c1\"\"\"\n\n        if backend != ModelBackend.AUTO:\n            return backend\n\n        # \uc790\ub3d9 \uc120\ud0dd \uaddc\uce59\n        prompt_length = len(prompt.split())\n        max_tokens = kwargs.get('max_tokens', 1024)\n        urgency = kwargs.get('urgency', 'normal')\n\n        # GPU \uc0ac\uc6a9 \uac00\ub2a5\ud558\uace0 \uae34 \uc0dd\uc131\uc774 \ud544\uc694\ud55c \uacbd\uc6b0\n        if (self.vllm_server and \n            (prompt_length &gt; 100 or max_tokens &gt; 1024)):\n            return ModelBackend.VLLM\n\n        # \ube60\ub978 \uc751\ub2f5\uc774 \ud544\uc694\ud55c \uacbd\uc6b0\n        if urgency == 'high':\n            if self.vllm_server:\n                current_load = self.load_balancer.get_vllm_load()\n                if current_load &lt; 0.7:\n                    return ModelBackend.VLLM\n            return ModelBackend.LLAMA_CPP\n\n        # \uae30\ubcf8\uc801\uc73c\ub85c GPU \uc0ac\uc6a9 (\uc0ac\uc6a9 \uac00\ub2a5\ud55c \uacbd\uc6b0)\n        return ModelBackend.VLLM if self.vllm_server else ModelBackend.LLAMA_CPP\n\n    async def _generate_vllm(self, prompt: str, **kwargs) -&gt; str:\n        \"\"\"vLLM \ubc31\uc5d4\ub4dc \uc0dd\uc131\"\"\"\n        sampling_params = SamplingParams(\n            temperature=kwargs.get('temperature', 0.7),\n            top_p=kwargs.get('top_p', 0.9),\n            max_tokens=kwargs.get('max_tokens', 1024)\n        )\n\n        results = await self.vllm_server.generate_batch([prompt], sampling_params)\n        return results[0]\n\n    async def _generate_llama_cpp(self, prompt: str, **kwargs) -&gt; str:\n        \"\"\"llama.cpp \ubc31\uc5d4\ub4dc \uc0dd\uc131\"\"\"\n        return await self.llama_cpp_server.generate_async(\n            prompt=prompt,\n            max_tokens=kwargs.get('max_tokens', 1024),\n            temperature=kwargs.get('temperature', 0.7),\n            top_p=kwargs.get('top_p', 0.9)\n        )\n\nclass LoadBalancer:\n    \"\"\"\uac04\ub2e8\ud55c \ub85c\ub4dc \ubc38\ub7f0\uc11c\"\"\"\n\n    def __init__(self):\n        self.vllm_requests = 0\n        self.llama_cpp_requests = 0\n        self.last_reset = time.time()\n\n    def get_vllm_load(self) -&gt; float:\n        \"\"\"vLLM \ud604\uc7ac \ubd80\ud558\uc728 (0.0 ~ 1.0)\"\"\"\n        # \uc2e4\uc81c\ub85c\ub294 GPU \uba54\ubaa8\ub9ac, \ub300\uae30 \ud050 \uae38\uc774 \ub4f1\uc744 \uace0\ub824\n        return min(self.vllm_requests / 32.0, 1.0)  # 32\uac1c \ub3d9\uc2dc \uc694\uccad \uae30\uc900\n\n    def report_request(self, backend: ModelBackend):\n        \"\"\"\uc694\uccad \uce74\uc6b4\ud2b8 \uc5c5\ub370\uc774\ud2b8\"\"\"\n        if backend == ModelBackend.VLLM:\n            self.vllm_requests += 1\n        else:\n            self.llama_cpp_requests += 1\n\n        # 1\ubd84\ub9c8\ub2e4 \uce74\uc6b4\ud130 \ub9ac\uc14b\n        if time.time() - self.last_reset &gt; 60:\n            self.vllm_requests = 0\n            self.llama_cpp_requests = 0\n            self.last_reset = time.time()\n</code></pre>"},{"location":"ai/XGEN-1.0-GPU-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%EA%B5%AC%ED%98%84%EA%B8%B0/#fastapi","title":"FastAPI \ud1b5\ud569 \uc11c\ube44\uc2a4","text":"<pre><code>from fastapi import FastAPI, HTTPException, BackgroundTasks\nfrom fastapi.responses import StreamingResponse\nfrom pydantic import BaseModel\nimport json\n\napp = FastAPI(title=\"XGEN Model Serving API v2.0\")\n\nclass GenerateRequest(BaseModel):\n    prompt: str\n    max_tokens: int = 1024\n    temperature: float = 0.7\n    top_p: float = 0.9\n    backend: str = \"auto\"  # vllm, llama_cpp, auto\n    stream: bool = False\n    urgency: str = \"normal\"  # high, normal, low\n\nclass GenerateResponse(BaseModel):\n    text: str\n    backend_used: str\n    generation_time: float\n    tokens_per_second: float\n\n# \uae00\ub85c\ubc8c \ubaa8\ub378 \ub77c\uc6b0\ud130\nrouter = ModelRouter()\n\n@app.on_event(\"startup\")\nasync def startup():\n    await router.initialize()\n    logger.info(\"Model servers initialized\")\n\n@app.post(\"/generate\", response_model=GenerateResponse)\nasync def generate_text(request: GenerateRequest):\n    start_time = time.time()\n\n    try:\n        backend_enum = ModelBackend(request.backend)\n    except ValueError:\n        backend_enum = ModelBackend.AUTO\n\n    try:\n        result = await router.generate(\n            prompt=request.prompt,\n            backend=backend_enum,\n            max_tokens=request.max_tokens,\n            temperature=request.temperature,\n            top_p=request.top_p,\n            urgency=request.urgency\n        )\n\n        generation_time = time.time() - start_time\n        estimated_tokens = len(result.split()) * 1.3  # \ub300\ub7b5\uc801 \ud1a0\ud070 \uc218\n        tokens_per_second = estimated_tokens / generation_time\n\n        return GenerateResponse(\n            text=result,\n            backend_used=router.last_used_backend.value,\n            generation_time=generation_time,\n            tokens_per_second=tokens_per_second\n        )\n\n    except Exception as e:\n        logger.error(f\"Generation failed: {str(e)}\")\n        raise HTTPException(status_code=500, detail=str(e))\n\n@app.post(\"/generate/stream\")\nasync def generate_stream(request: GenerateRequest):\n    \"\"\"\uc2a4\ud2b8\ub9ac\ubc0d \uc751\ub2f5\"\"\"\n\n    if not request.stream:\n        raise HTTPException(status_code=400, detail=\"Stream mode required\")\n\n    async def token_generator():\n        try:\n            if router.vllm_server and request.backend != \"llama_cpp\":\n                # vLLM \uc2a4\ud2b8\ub9ac\ubc0d\n                async for token in router.vllm_server.generate_stream(request.prompt):\n                    yield f\"data: {json.dumps({'token': token})}\\n\\n\"\n            else:\n                # llama.cpp \uc2a4\ud2b8\ub9ac\ubc0d\n                for token in router.llama_cpp_server.stream_generate(request.prompt):\n                    yield f\"data: {json.dumps({'token': token})}\\n\\n\"\n\n            yield \"data: {\\\"done\\\": true}\\n\\n\"\n\n        except Exception as e:\n            yield f\"data: {json.dumps({'error': str(e)})}\\n\\n\"\n\n    return StreamingResponse(\n        token_generator(),\n        media_type=\"text/plain\",\n        headers={\"Cache-Control\": \"no-cache\"}\n    )\n\n@app.get(\"/models/status\")\nasync def get_model_status():\n    \"\"\"\ubaa8\ub378 \uc11c\ubc84 \uc0c1\ud0dc \uc870\ud68c\"\"\"\n\n    status = {\n        \"timestamp\": time.time(),\n        \"backends\": {}\n    }\n\n    if router.vllm_server:\n        status[\"backends\"][\"vllm\"] = {\n            \"available\": True,\n            \"memory_stats\": router.vllm_server.get_memory_stats(),\n            \"load\": router.load_balancer.get_vllm_load()\n        }\n    else:\n        status[\"backends\"][\"vllm\"] = {\"available\": False}\n\n    if router.llama_cpp_server:\n        status[\"backends\"][\"llama_cpp\"] = {\n            \"available\": True,\n            \"model_info\": router.llama_cpp_server.get_model_info()\n        }\n    else:\n        status[\"backends\"][\"llama_cpp\"] = {\"available\": False}\n\n    return status\n\n@app.get(\"/health\")\nasync def health_check():\n    \"\"\"\ud5ec\uc2a4\uccb4\ud06c \uc5d4\ub4dc\ud3ec\uc778\ud2b8\"\"\"\n    return {\"status\": \"healthy\", \"timestamp\": time.time()}\n</code></pre>"},{"location":"ai/XGEN-1.0-GPU-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%EA%B5%AC%ED%98%84%EA%B8%B0/#_6","title":"\uc131\ub2a5 \ubca4\uce58\ub9c8\ud0b9 \uacb0\uacfc","text":""},{"location":"ai/XGEN-1.0-GPU-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%EA%B5%AC%ED%98%84%EA%B8%B0/#_7","title":"\ucc98\ub9ac\ub7c9 \ube44\uad50 (\ub3d9\uc2dc \uc694\uccad \uc218)","text":"<pre><code># \ubca4\uce58\ub9c8\ud06c \uacb0\uacfc \uc815\ub9ac\nbenchmark_results = {\n    \"transformers_baseline\": {\n        \"concurrent_requests\": 1,\n        \"tokens_per_second\": 12.5,\n        \"latency_p95_ms\": 8500,\n        \"memory_usage_gb\": 16.2\n    },\n    \"vllm_optimized\": {\n        \"concurrent_requests\": 32,\n        \"tokens_per_second\": 185.3,\n        \"latency_p95_ms\": 1200,\n        \"memory_usage_gb\": 14.8\n    },\n    \"llama_cpp_cpu\": {\n        \"concurrent_requests\": 4,\n        \"tokens_per_second\": 23.7,\n        \"latency_p95_ms\": 3200,\n        \"memory_usage_gb\": 5.1\n    }\n}\n</code></pre>"},{"location":"ai/XGEN-1.0-GPU-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%EA%B5%AC%ED%98%84%EA%B8%B0/#gpu-vllm","title":"GPU \ubaa8\ub378\ubcc4 \uc131\ub2a5 (vLLM)","text":"\ubaa8\ub378 \ud30c\ub77c\ubbf8\ud130 GPU \ub3d9\uc2dc \uc694\uccad Tokens/sec \uc9c0\uc5f0\uc2dc\uac04(P95) Llama-7B 7B A100 40GB 64 245 800ms Llama-13B 13B A100 40GB 32 189 1100ms Llama-70B 70B A100 80GB\u00d74 16 156 2300ms CodeLlama-34B 34B A100 80GB\u00d72 24 178 1500ms"},{"location":"ai/XGEN-1.0-GPU-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%EA%B5%AC%ED%98%84%EA%B8%B0/#_8","title":"\ube44\uc6a9 \ud6a8\uc728\uc131 \ubd84\uc11d","text":"<pre><code># \uc2dc\uac04\ub2f9 \ube44\uc6a9 \uacc4\uc0b0 (AWS \uae30\uc900)\ncost_analysis = {\n    \"a100_40gb\": {\n        \"hourly_cost_usd\": 4.10,\n        \"requests_per_hour\": 23040,  # vLLM 64 concurrent\n        \"cost_per_1k_requests\": 0.178\n    },\n    \"cpu_32_cores\": {\n        \"hourly_cost_usd\": 1.536,\n        \"requests_per_hour\": 2880,   # llama.cpp 4 concurrent\n        \"cost_per_1k_requests\": 0.533\n    },\n    \"optimization_savings\": {\n        \"vs_transformers\": \"15x \ucc98\ub9ac\ub7c9 \uc99d\uac00\",\n        \"memory_efficiency\": \"13% \uba54\ubaa8\ub9ac \uc808\uc57d\",\n        \"cost_per_request\": \"GPU: 70% \uc808\uc57d, CPU: 40% \uc808\uc57d\"\n    }\n}\n</code></pre>"},{"location":"ai/XGEN-1.0-GPU-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%EA%B5%AC%ED%98%84%EA%B8%B0/#_9","title":"\uc6b4\uc601 \uc911 \ud559\uc2b5\ud55c \uad50\ud6c8","text":""},{"location":"ai/XGEN-1.0-GPU-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%EA%B5%AC%ED%98%84%EA%B8%B0/#1","title":"1. \uba54\ubaa8\ub9ac \uad00\ub9ac\uc758 \uc911\uc694\uc131","text":"<pre><code># \uba54\ubaa8\ub9ac \ubaa8\ub2c8\ud130\ub9c1 \ubc0f \uc790\ub3d9 \uc815\ub9ac\nclass MemoryManager:\n    def __init__(self, threshold_gb: float = 20.0):\n        self.threshold = threshold_gb\n\n    async def monitor_memory(self):\n        \"\"\"\uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9 \ubaa8\ub2c8\ud130\ub9c1 \ubc0f \uc790\ub3d9 \uc815\ub9ac\"\"\"\n        while True:\n            current_usage = torch.cuda.memory_allocated() / (1024**3)\n\n            if current_usage &gt; self.threshold:\n                logger.warning(f\"High memory usage: {current_usage:.1f}GB\")\n\n                # KV \uce90\uc2dc \uc815\ub9ac\n                torch.cuda.empty_cache()\n\n                # vLLM \ub0b4\ubd80 \uce90\uc2dc \uc815\ub9ac \uc694\uccad\n                await self._request_cache_cleanup()\n\n            await asyncio.sleep(30)  # 30\ucd08\ub9c8\ub2e4 \uccb4\ud06c\n\n    async def _request_cache_cleanup(self):\n        \"\"\"vLLM \uc11c\ubc84\uc5d0 \uce90\uc2dc \uc815\ub9ac \uc694\uccad\"\"\"\n        try:\n            await asyncio.create_task(\n                router.vllm_server.cleanup_finished_requests()\n            )\n        except Exception as e:\n            logger.error(f\"Cache cleanup failed: {e}\")\n</code></pre>"},{"location":"ai/XGEN-1.0-GPU-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%EA%B5%AC%ED%98%84%EA%B8%B0/#2","title":"2. \ub3d9\uc801 \uc2a4\ucf00\uc77c\ub9c1","text":"<pre><code># Kubernetes HPA \uc124\uc815\napiVersion: autoscaling/v2\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: vllm-hpa\nspec:\n  scaleTargetRef:\n    apiVersion: apps/v1\n    kind: Deployment\n    name: vllm-server\n  minReplicas: 1\n  maxReplicas: 4\n  metrics:\n  - type: Resource\n    resource:\n      name: memory\n      target:\n        type: Utilization\n        averageUtilization: 80\n  - type: Pods\n    pods:\n      metric:\n        name: gpu_memory_utilization\n      target:\n        type: AverageValue\n        averageValue: \"0.85\"\n</code></pre>"},{"location":"ai/XGEN-1.0-GPU-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%EA%B5%AC%ED%98%84%EA%B8%B0/#3-vs","title":"3. \ud488\uc9c8 vs \uc18d\ub3c4 \ud2b8\ub808\uc774\ub4dc\uc624\ud504","text":"<p>\uc2e4\uc81c \uc11c\ube44\uc2a4\uc5d0\uc11c\ub294 \uc751\ub2f5 \ud488\uc9c8\uc774 \ud575\uc2ec\uc774\ub2e4:</p> <pre><code># \uc801\uc751\uc801 \uc0d8\ud50c\ub9c1 \ud30c\ub77c\ubbf8\ud130\nclass AdaptiveSampling:\n    def __init__(self):\n        self.quality_modes = {\n            \"creative\": {\"temperature\": 0.9, \"top_p\": 0.95, \"top_k\": 50},\n            \"balanced\": {\"temperature\": 0.7, \"top_p\": 0.9, \"top_k\": 40},\n            \"precise\": {\"temperature\": 0.3, \"top_p\": 0.8, \"top_k\": 20},\n            \"deterministic\": {\"temperature\": 0.0, \"top_p\": 1.0, \"top_k\": 1}\n        }\n\n    def get_params(self, task_type: str, urgency: str) -&gt; dict:\n        \"\"\"\ud0dc\uc2a4\ud06c\uc640 \uae34\uae09\ub3c4\uc5d0 \ub530\ub978 \uc0d8\ud50c\ub9c1 \ud30c\ub77c\ubbf8\ud130 \uc120\ud0dd\"\"\"\n\n        if task_type == \"code_generation\":\n            return self.quality_modes[\"precise\"]\n        elif task_type == \"creative_writing\":\n            return self.quality_modes[\"creative\"]\n        elif urgency == \"high\":\n            return self.quality_modes[\"deterministic\"]\n        else:\n            return self.quality_modes[\"balanced\"]\n</code></pre>"},{"location":"ai/XGEN-1.0-GPU-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%EA%B5%AC%ED%98%84%EA%B8%B0/#_10","title":"\ub9c8\ubb34\ub9ac","text":"<p>XGEN 1.0\uc758 \ubaa8\ub378 \uc11c\ube59 \uad6c\ucd95\uc744 \ud1b5\ud574 LLM \uc6b4\uc601\uc758 \uc2e4\uccb4\ub97c \uae4a\uc774 \uc774\ud574\ud558\uac8c \ub418\uc5c8\ub2e4.</p> <p>\ud575\uc2ec \uae68\ub2ec\uc74c:</p> <ol> <li>\ub3c4\uad6c \uc120\ud0dd\uc758 \uc911\uc694\uc131: vLLM\uacfc llama.cpp\ub294 \uac01\uac01\uc758 \uc7a5\uc810\uc774 \uba85\ud655\ud558\ub2e4</li> <li>\uba54\ubaa8\ub9ac\uac00 \ubaa8\ub4e0 \uac83: GPU \uba54\ubaa8\ub9ac \ucd5c\uc801\ud654\uac00 \uc131\ub2a5\uc758 90%\ub97c \uacb0\uc815\ud55c\ub2e4</li> <li>\ubc30\uce6d\uc758 \ub9c8\ubc95: \ub3d9\uc801 \ubc30\uce6d \ud558\ub098\ub85c 15\ubc30 \uc131\ub2a5 \ud5a5\uc0c1\uc744 \ub2ec\uc131\ud560 \uc218 \uc788\ub2e4</li> <li>\ubaa8\ub2c8\ud130\ub9c1 \ud544\uc218: \uc2e4\uc2dc\uac04 \uba54\ud2b8\ub9ad \uc5c6\uc774\ub294 \ud504\ub85c\ub355\uc158 \uc6b4\uc601\uc774 \ubd88\uac00\ub2a5\ud558\ub2e4</li> </ol> <p>\ud2b9\ud788 vLLM\uc758 PagedAttention\uc740 \uc815\ub9d0 \ud601\uc2e0\uc801\uc774\uc5c8\ub2e4. \uae30\uc874 Transformers \ub300\ube44 \uba54\ubaa8\ub9ac \ud6a8\uc728\uc131\uacfc \ucc98\ub9ac\ub7c9\uc774 \uadf9\uc801\uc73c\ub85c \uac1c\uc120\ub418\uc5c8\uace0, \uc774\ub294 \uc2e4\uc81c \uc0ac\uc6a9\uc790 \uacbd\ud5d8\uc73c\ub85c \ubc14\ub85c \uc5f0\uacb0\ub418\uc5c8\ub2e4.</p> <p>\ub2e4\uc74c \ub2e8\uacc4\ub85c\ub294 \uba40\ud2f0\ubaa8\ub2ec \ubaa8\ub378(\uc774\ubbf8\uc9c0+\ud14d\uc2a4\ud2b8) \uc11c\ube59\uacfc \uc5e3\uc9c0 \ud658\uacbd\uc5d0\uc11c\uc758 \uacbd\ub7c9\ud654\ub41c \ucd94\ub860\uc744 \uacc4\ud68d\ud558\uace0 \uc788\ub2e4. LLM \uc11c\ube59\uc758 \uc5ec\uc815\uc740 \uc774\uc81c \uc2dc\uc791\uc77c \ubfd0\uc774\ub2e4! \ud83d\ude80</p> <p>\ucc38\uace0: \ubca4\uce58\ub9c8\ud06c \uc218\uce58\ub294 \ud2b9\uc815 \ud558\ub4dc\uc6e8\uc5b4\uc640 \ubaa8\ub378 \uc124\uc815\uc5d0 \ub530\ub978 \uac83\uc774\ubbc0\ub85c, \uc2e4\uc81c \ud658\uacbd\uc5d0\uc11c\ub294 \ub2e4\ub97c \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ai/XGEN-1.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%97%94%EC%A7%84%EA%B3%BC-Qdrant-%ED%95%98%EC%9D%B4%EB%B8%8C%EB%A6%AC%EB%93%9C-%EA%B2%80%EC%83%89/","title":"XGEN 1.0 \uc6cc\ud06c\ud50c\ub85c\uc6b0 \uc5d4\uc9c4\uacfc Qdrant \ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9","text":""},{"location":"ai/XGEN-1.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%97%94%EC%A7%84%EA%B3%BC-Qdrant-%ED%95%98%EC%9D%B4%EB%B8%8C%EB%A6%AC%EB%93%9C-%EA%B2%80%EC%83%89/#xgen-10-qdrant","title":"XGEN 1.0 \uc6cc\ud06c\ud50c\ub85c\uc6b0 \uc5d4\uc9c4\uacfc Qdrant \ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9","text":"<p>2025.12 | FastAPI, Qdrant, MCP Station, Circuit Breaker</p>"},{"location":"ai/XGEN-1.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%97%94%EC%A7%84%EA%B3%BC-Qdrant-%ED%95%98%EC%9D%B4%EB%B8%8C%EB%A6%AC%EB%93%9C-%EA%B2%80%EC%83%89/#_1","title":"\uac1c\uc694","text":"<p>XGEN 1.0\uc5d0\uc11c \uc6cc\ud06c\ud50c\ub85c\uc6b0 \uc5d4\uc9c4\uc744 \uad6c\ucd95\ud558\uba74\uc11c \uac00\uc7a5 \uc911\uc694\ud588\ub358 \uac83\uc740 \uc548\uc815\uc131\uacfc \ud655\uc7a5\uc131\uc774\uc5c8\ub2e4. \ub2e8\uc21c\ud55c \ud30c\uc774\ud504\ub77c\uc778\uc774 \uc544\ub2c8\ub77c \ubcf5\uc7a1\ud55c AI \uc791\uc5c5\ub4e4\uc744 \uccb4\uc778\uc73c\ub85c \uc5f0\uacb0\ud558\uace0, \uac01 \ub2e8\uacc4\uc5d0\uc11c \ubc1c\uc0dd\ud560 \uc218 \uc788\ub294 \uc7a5\uc560\ub97c \uc6b0\uc544\ud558\uac8c \ucc98\ub9ac\ud558\ub294 \uc2dc\uc2a4\ud15c\uc774 \ud544\uc694\ud588\ub2e4.</p>"},{"location":"ai/XGEN-1.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%97%94%EC%A7%84%EA%B3%BC-Qdrant-%ED%95%98%EC%9D%B4%EB%B8%8C%EB%A6%AC%EB%93%9C-%EA%B2%80%EC%83%89/#_2","title":"\uc6cc\ud06c\ud50c\ub85c\uc6b0 \uc5d4\uc9c4 \uc544\ud0a4\ud14d\ucc98","text":""},{"location":"ai/XGEN-1.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%97%94%EC%A7%84%EA%B3%BC-Qdrant-%ED%95%98%EC%9D%B4%EB%B8%8C%EB%A6%AC%EB%93%9C-%EA%B2%80%EC%83%89/#_3","title":"\ud5ec\uc2a4\uccb4\ud06c \uc2dc\uc2a4\ud15c \uac15\ud654","text":"<p>\uae30\uc874\uc758 \ub2e8\uc21c\ud55c ping/pong \ubc29\uc2dd\uc744 \ubc84\ub9ac\uace0 Circuit Breaker \ud328\ud134\uc744 \ub3c4\uc785\ud588\ub2e4:</p> <pre><code>class CircuitBreaker:\n    def __init__(self, failure_threshold=5, recovery_timeout=60):\n        self.failure_threshold = failure_threshold\n        self.recovery_timeout = recovery_timeout\n        self.failure_count = 0\n        self.last_failure_time = None\n        self.state = \"CLOSED\"  # CLOSED, OPEN, HALF_OPEN\n\n    async def call(self, func, *args, **kwargs):\n        if self.state == \"OPEN\":\n            if time.time() - self.last_failure_time &lt; self.recovery_timeout:\n                raise CircuitBreakerOpenException()\n            self.state = \"HALF_OPEN\"\n\n        try:\n            result = await func(*args, **kwargs)\n            if self.state == \"HALF_OPEN\":\n                self.state = \"CLOSED\"\n                self.failure_count = 0\n            return result\n        except Exception as e:\n            self.failure_count += 1\n            if self.failure_count &gt;= self.failure_threshold:\n                self.state = \"OPEN\"\n                self.last_failure_time = time.time()\n            raise\n</code></pre>"},{"location":"ai/XGEN-1.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%97%94%EC%A7%84%EA%B3%BC-Qdrant-%ED%95%98%EC%9D%B4%EB%B8%8C%EB%A6%AC%EB%93%9C-%EA%B2%80%EC%83%89/#_4","title":"\uce90\uc2f1 \uc2dc\uc2a4\ud15c","text":"<p>\ud5ec\uc2a4\uccb4\ud06c \uacb0\uacfc\ub97c TTL \uae30\ubc18\uc73c\ub85c \uce90\uc2f1\ud558\uc5ec \ubd80\ud558\ub97c \uc904\uc600\ub2e4. Thread-safe\ud55c double-check locking\uc73c\ub85c \ub3d9\uc2dc\uc131 \ubb38\uc81c\ub97c \ud574\uacb0:</p> <pre><code>class HealthCache:\n    def __init__(self, ttl=30):\n        self.cache = {}\n        self.ttl = ttl\n        self.lock = threading.Lock()\n\n    def get_or_compute(self, key, compute_func):\n        now = time.time()\n        if key in self.cache:\n            value, timestamp = self.cache[key]\n            if now - timestamp &lt; self.ttl:\n                return value\n\n        with self.lock:\n            # Double-check locking\n            if key in self.cache:\n                value, timestamp = self.cache[key]\n                if now - timestamp &lt; self.ttl:\n                    return value\n\n            result = compute_func()\n            self.cache[key] = (result, now)\n            return result\n</code></pre>"},{"location":"ai/XGEN-1.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%97%94%EC%A7%84%EA%B3%BC-Qdrant-%ED%95%98%EC%9D%B4%EB%B8%8C%EB%A6%AC%EB%93%9C-%EA%B2%80%EC%83%89/#mcp-model-context-protocol","title":"MCP (Model Context Protocol) \ud1b5\ud569","text":""},{"location":"ai/XGEN-1.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%97%94%EC%A7%84%EA%B3%BC-Qdrant-%ED%95%98%EC%9D%B4%EB%B8%8C%EB%A6%AC%EB%93%9C-%EA%B2%80%EC%83%89/#tabledata-mcp","title":"TableData MCP \ub178\ub4dc \ucc98\ub9ac\uae30","text":"<p>\uc6cc\ud06c\ud50c\ub85c\uc6b0\uc5d0\uc11c \ud14c\uc774\ube14 \ub370\uc774\ud130\ub97c \ucc98\ub9ac\ud558\ub294 \ub178\ub4dc\ub4e4\uc744 \uc704\ud55c \uc804\uc6a9 \ud504\ub85c\uc138\uc11c\ub97c \uac1c\ubc1c\ud588\ub2e4:</p> <pre><code>class TableDataMCPProcessor:\n    async def process_node(self, node, interaction_id):\n        # temp_storage_id \uc790\ub3d9 \uc124\uc815\n        if not node.get_parameter(\"temp_storage_id\"):\n            node.set_parameter(\"temp_storage_id\", interaction_id)\n            logger.info(f\"Set temp_storage_id: {interaction_id}\")\n\n        # \ud398\uc774\uc9c0\ub124\uc774\uc158 \ud55c\uacc4 \uc801\uc6a9 (max 100 rows)\n        max_rows = min(node.get_parameter(\"max_rows\", 50), 100)\n        node.set_parameter(\"max_rows\", max_rows)\n</code></pre> <p>\uc774\ub807\uac8c \ud558\uba74 \uc0ac\uc6a9\uc790\uac00 \ub9e4\ubc88 <code>temp_storage_id</code>\ub97c \uc124\uc815\ud560 \ud544\uc694 \uc5c6\uc774 \uc790\ub3d9\uc73c\ub85c \uc138\uc158\ubcc4 \uc784\uc2dc \uc2a4\ud1a0\ub9ac\uc9c0\uac00 \uad00\ub9ac\ub41c\ub2e4.</p>"},{"location":"ai/XGEN-1.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%97%94%EC%A7%84%EA%B3%BC-Qdrant-%ED%95%98%EC%9D%B4%EB%B8%8C%EB%A6%AC%EB%93%9C-%EA%B2%80%EC%83%89/#playwright-mcp","title":"Playwright MCP \ucd5c\uc801\ud654","text":"<p>\ube0c\ub77c\uc6b0\uc800 \uc790\ub3d9\ud654\ub97c \uc704\ud55c Playwright MCP \uc124\uc815\uc744 \ucd5c\uc801\ud654\ud588\ub2e4:</p> <pre><code>playwright_mcp:\n  server_type: \"stdio\"\n  server_args: [\n    \"--image-responses\",  # \uc774\ubbf8\uc9c0 \ud3ec\ud568 \uc751\ub2f5\n    \"--headless\",        # \ud5e4\ub4dc\ub9ac\uc2a4 \ubaa8\ub4dc\n    \"--timeout=30000\"    # 30\ucd08 \ud0c0\uc784\uc544\uc6c3\n  ]\n  context_char_limit: 200000  # \ub300\uc6a9\ub7c9 \ucee8\ud14d\uc2a4\ud2b8 \uc9c0\uc6d0\n</code></pre>"},{"location":"ai/XGEN-1.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%97%94%EC%A7%84%EA%B3%BC-Qdrant-%ED%95%98%EC%9D%B4%EB%B8%8C%EB%A6%AC%EB%93%9C-%EA%B2%80%EC%83%89/#qdrant","title":"Qdrant \ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9","text":""},{"location":"ai/XGEN-1.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%97%94%EC%A7%84%EA%B3%BC-Qdrant-%ED%95%98%EC%9D%B4%EB%B8%8C%EB%A6%AC%EB%93%9C-%EA%B2%80%EC%83%89/#_5","title":"\ubca1\ud130 + \ud0a4\uc6cc\ub4dc \uc735\ud569 \uac80\uc0c9","text":"<p>\ub2e8\uc21c\ud55c \ubca1\ud130 \uc720\uc0ac\ub3c4 \uac80\uc0c9\uc758 \ud55c\uacc4\ub97c \uadf9\ubcf5\ud558\uae30 \uc704\ud574 \ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9\uc744 \uad6c\ud604\ud588\ub2e4:</p> <pre><code>class HybridSearchEngine:\n    def __init__(self, qdrant_client, embedding_model):\n        self.qdrant = qdrant_client\n        self.embedding_model = embedding_model\n\n    async def search(self, query, collection_name, limit=10):\n        # 1. \ubca1\ud130 \uac80\uc0c9\n        query_vector = await self.embedding_model.encode(query)\n        vector_results = await self.qdrant.search(\n            collection_name=collection_name,\n            query_vector=query_vector,\n            limit=limit * 2  # \ub354 \ub9ce\uc774 \uac00\uc838\uc640\uc11c \uc7ac\uc21c\uc704\n        )\n\n        # 2. \ud0a4\uc6cc\ub4dc \uac80\uc0c9 (payload \ud544\ud130\ub9c1)\n        keyword_results = await self.qdrant.search(\n            collection_name=collection_name,\n            query_filter=models.Filter(\n                must=[\n                    models.FieldCondition(\n                        key=\"content\",\n                        match=models.MatchText(text=query)\n                    )\n                ]\n            ),\n            limit=limit\n        )\n\n        # 3. RRF (Reciprocal Rank Fusion)\ub85c \uacb0\uacfc \uc735\ud569\n        return self.fuse_results(vector_results, keyword_results, limit)\n\n    def fuse_results(self, vector_results, keyword_results, limit):\n        scores = {}\n        k = 60  # RRF \uc0c1\uc218\n\n        # \ubca1\ud130 \uac80\uc0c9 \uc810\uc218\n        for i, result in enumerate(vector_results):\n            doc_id = result.id\n            scores[doc_id] = scores.get(doc_id, 0) + 1 / (k + i + 1)\n\n        # \ud0a4\uc6cc\ub4dc \uac80\uc0c9 \uc810\uc218\n        for i, result in enumerate(keyword_results):\n            doc_id = result.id\n            scores[doc_id] = scores.get(doc_id, 0) + 1 / (k + i + 1)\n\n        # \ucd5c\uc885 \uc21c\uc704\n        return sorted(scores.items(), key=lambda x: x[1], reverse=True)[:limit]\n</code></pre>"},{"location":"ai/XGEN-1.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%97%94%EC%A7%84%EA%B3%BC-Qdrant-%ED%95%98%EC%9D%B4%EB%B8%8C%EB%A6%AC%EB%93%9C-%EA%B2%80%EC%83%89/#_6","title":"\uc2a4\ucf00\uc904\ub9c1 \uc2dc\uc2a4\ud15c","text":""},{"location":"ai/XGEN-1.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%97%94%EC%A7%84%EA%B3%BC-Qdrant-%ED%95%98%EC%9D%B4%EB%B8%8C%EB%A6%AC%EB%93%9C-%EA%B2%80%EC%83%89/#kst","title":"KST \ud0c0\uc784\uc874 \ucc98\ub9ac","text":"<p>\uad6d\ub0b4 \uc11c\ube44\uc2a4 \ud2b9\uc131\uc0c1 KST \uae30\ubc18 \uc2a4\ucf00\uc904\ub9c1\uc774 \ud544\uc218\uc600\ub2e4:</p> <pre><code>def get_kst_now():\n    \"\"\"\ud604\uc7ac KST \uc2dc\uac04 \ubc18\ud658\"\"\"\n    utc_now = datetime.utcnow()\n    kst_now = utc_now.replace(tzinfo=timezone.utc).astimezone(\n        timezone(timedelta(hours=9))\n    )\n    return kst_now\n\nclass SessionScheduler:\n    async def register_job(self, workflow_id, cron_expr, timezone=\"Asia/Seoul\"):\n        # \uc911\ubcf5 \ub4f1\ub85d \ubc29\uc9c0\n        if workflow_id in self.active_jobs:\n            logger.warning(f\"Job {workflow_id} already registered\")\n            return\n\n        # CronTrigger \uc0dd\uc131 (\ud55c\uad6d \uc2dc\uac04 \uae30\uc900)\n        trigger = CronTrigger.from_crontab(cron_expr, timezone=timezone)\n\n        job = await self.scheduler.add_job(\n            self.execute_workflow,\n            trigger=trigger,\n            args=[workflow_id],\n            id=workflow_id,\n            replace_existing=True\n        )\n\n        self.active_jobs[workflow_id] = job\n        logger.info(f\"Scheduled job {workflow_id} with cron: {cron_expr}\")\n</code></pre>"},{"location":"ai/XGEN-1.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%97%94%EC%A7%84%EA%B3%BC-Qdrant-%ED%95%98%EC%9D%B4%EB%B8%8C%EB%A6%AC%EB%93%9C-%EA%B2%80%EC%83%89/#_7","title":"\uc131\ub2a5 \ucd5c\uc801\ud654","text":""},{"location":"ai/XGEN-1.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%97%94%EC%A7%84%EA%B3%BC-Qdrant-%ED%95%98%EC%9D%B4%EB%B8%8C%EB%A6%AC%EB%93%9C-%EA%B2%80%EC%83%89/#_8","title":"\uc2a4\ud2b8\ub9ac\ubc0d \uc751\ub2f5 \uc9c0\uc5f0 \ucd5c\uc18c\ud654","text":"<p>\uc6cc\ud06c\ud50c\ub85c\uc6b0 \uc2e4\ud589 \uc911 \uc2e4\uc2dc\uac04 \ud53c\ub4dc\ubc31\uc744 \uc704\ud574 \uc2a4\ud2b8\ub9ac\ubc0d \uc9c0\uc5f0\uc744 \ub300\ud3ed \uc904\uc600\ub2e4:</p> <pre><code>async def stream_execution_logs(self, session_id):\n    while True:\n        logs = await self.get_recent_logs(session_id)\n        if logs:\n            for log in logs:\n                yield f\"data: {json.dumps(log)}\\n\\n\"\n\n        # \uae30\uc874 1\ucd08 \u2192 100ms\ub85c \ub2e8\ucd95\n        await asyncio.sleep(0.1)\n</code></pre>"},{"location":"ai/XGEN-1.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%97%94%EC%A7%84%EA%B3%BC-Qdrant-%ED%95%98%EC%9D%B4%EB%B8%8C%EB%A6%AC%EB%93%9C-%EA%B2%80%EC%83%89/#mcp","title":"MCP \uc751\ub2f5 \ub85c\uadf8 \ud2b8\ub801\ucf00\uc774\uc158","text":"<p>\ub300\uc6a9\ub7c9 \uc751\ub2f5\uc73c\ub85c \uc778\ud55c \ub85c\uadf8 \ud3ed\uc99d \ubb38\uc81c\ub97c \ud574\uacb0:</p> <pre><code>def log_mcp_response(response):\n    if len(response) &gt; 500:\n        truncated = response[:500] + \"... (truncated)\"\n        logger.info(f\"MCP Response: {truncated}\")\n    else:\n        logger.info(f\"MCP Response: {response}\")\n</code></pre>"},{"location":"ai/XGEN-1.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%97%94%EC%A7%84%EA%B3%BC-Qdrant-%ED%95%98%EC%9D%B4%EB%B8%8C%EB%A6%AC%EB%93%9C-%EA%B2%80%EC%83%89/#_9","title":"\uacb0\uacfc \ubc0f \ubc30\uc6b4 \uc810","text":""},{"location":"ai/XGEN-1.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%97%94%EC%A7%84%EA%B3%BC-Qdrant-%ED%95%98%EC%9D%B4%EB%B8%8C%EB%A6%AC%EB%93%9C-%EA%B2%80%EC%83%89/#_10","title":"\uc2dc\uc2a4\ud15c \uc548\uc815\uc131 \ud5a5\uc0c1","text":"<ul> <li>Circuit Breaker \ub3c4\uc785\uc73c\ub85c \uc7a5\uc560 \uc804\ud30c \ucc28\ub2e8</li> <li>\ud5ec\uc2a4\uccb4\ud06c \uce90\uc2f1\uc73c\ub85c \ubd80\ud558 50% \uac10\uc18c</li> <li>\uc2a4\ud2b8\ub9ac\ubc0d \uc9c0\uc5f0 90% \ub2e8\ucd95 (1\ucd08 \u2192 100ms)</li> </ul>"},{"location":"ai/XGEN-1.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%97%94%EC%A7%84%EA%B3%BC-Qdrant-%ED%95%98%EC%9D%B4%EB%B8%8C%EB%A6%AC%EB%93%9C-%EA%B2%80%EC%83%89/#_11","title":"\uac80\uc0c9 \ud488\uc9c8 \uac1c\uc120","text":"<ul> <li>\ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9\uc73c\ub85c \uc815\ud655\ub3c4 30% \ud5a5\uc0c1</li> <li>RRF \uc54c\uace0\ub9ac\uc998\uc73c\ub85c \ubca1\ud130-\ud0a4\uc6cc\ub4dc \uac80\uc0c9 \uade0\ud615 \ud655\ubcf4</li> <li>\ub300\uc6a9\ub7c9 \ubb38\uc11c \ucc98\ub9ac \uc131\ub2a5 \ucd5c\uc801\ud654</li> </ul>"},{"location":"ai/XGEN-1.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%97%94%EC%A7%84%EA%B3%BC-Qdrant-%ED%95%98%EC%9D%B4%EB%B8%8C%EB%A6%AC%EB%93%9C-%EA%B2%80%EC%83%89/#_12","title":"\uac1c\ubc1c \uc0dd\uc0b0\uc131","text":"<ul> <li>MCP \ud504\ub85c\ud1a0\ucf5c \ud45c\uc900\ud654\ub85c \ub178\ub4dc \uac1c\ubc1c \uc18d\ub3c4 2\ubc30 \ud5a5\uc0c1</li> <li>\uc790\ub3d9 \ud30c\ub77c\ubbf8\ud130 \uc124\uc815\uc73c\ub85c \uc0ac\uc6a9\uc790 \ud3b8\uc758\uc131 \uc99d\ub300</li> <li>KST \uae30\ubc18 \uc2a4\ucf00\uc904\ub9c1\uc73c\ub85c \uad6d\ub0b4 \uc11c\ube44\uc2a4 \ucd5c\uc801\ud654</li> </ul> <p>XGEN 1.0 \uc6cc\ud06c\ud50c\ub85c\uc6b0 \uc5d4\uc9c4\uc740 \ub2e8\uc21c\ud55c \ud30c\uc774\ud504\ub77c\uc778\uc744 \ub118\uc5b4\uc11c AI \uc11c\ube44\uc2a4\uc758 \ud575\uc2ec \uc778\ud504\ub77c\ub85c \uc131\uc7a5\ud588\ub2e4. \uc548\uc815\uc131, \uc131\ub2a5, \uc0ac\uc6a9\uc131 \ubaa8\ub4e0 \uba74\uc5d0\uc11c \uc5d4\ud130\ud504\ub77c\uc774\uc988\uae09 \uc694\uad6c\uc0ac\ud56d\uc744 \ub9cc\uc871\ud558\ub294 \uc2dc\uc2a4\ud15c\uc774 \ub418\uc5c8\ub2e4.</p>"},{"location":"ai/XGEN-2.0-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%ED%86%B5%ED%95%A9-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81/","title":"XGEN 2.0 \ubaa8\ub378 \uc11c\ube59 \ud1b5\ud569 \uc544\ud0a4\ud14d\ucc98 \ub9ac\ud329\ud1a0\ub9c1","text":""},{"location":"ai/XGEN-2.0-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%ED%86%B5%ED%95%A9-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81/#xgen-20","title":"XGEN 2.0 \ubaa8\ub378 \uc11c\ube59 \ud1b5\ud569 \uc544\ud0a4\ud14d\ucc98 \ub9ac\ud329\ud1a0\ub9c1","text":"<p>2026.01 | vLLM Ray Serve\uc5d0\uc11c \ud1b5\ud569 xgen-model \uc11c\ube44\uc2a4\ub85c\uc758 \ub9c8\uc774\uadf8\ub808\uc774\uc158</p>"},{"location":"ai/XGEN-2.0-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%ED%86%B5%ED%95%A9-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81/#_1","title":"\ubc30\uacbd","text":"<p>XGEN 1.0\uc5d0\uc11c\ub294 GPU \ubaa8\ub378 \uc11c\ube59\uc744 \uc704\ud574 vLLM\uacfc Ray Serve\ub97c \uc870\ud569\ud55c \ubd84\uc0b0 \ucc98\ub9ac \uc544\ud0a4\ud14d\ucc98\ub97c \uc0ac\uc6a9\ud588\ub2e4. \ud558\uc9c0\ub9cc \uc6b4\uc601 \uacfc\uc815\uc5d0\uc11c \uba87 \uac00\uc9c0 \ubb38\uc81c\uc810\uc774 \ub4dc\ub7ec\ub0ac\ub2e4:</p> <ul> <li>\ubcf5\uc7a1\ud55c \uc758\uc874\uc131: Ray Serve \ud074\ub7ec\uc2a4\ud130 \uad00\ub9ac\uc640 vLLM \uc5d4\uc9c4 \uac04\uc758 \ubcf5\uc7a1\ud55c \uc5f0\ub3d9</li> <li>\ub9ac\uc18c\uc2a4 \uc624\ubc84\ud5e4\ub4dc: Ray \ud074\ub7ec\uc2a4\ud130 \uc790\uccb4\uac00 \uc0c1\ub2f9\ud55c \uba54\ubaa8\ub9ac\uc640 CPU\ub97c \uc18c\ubaa8</li> <li>\ubc30\ud3ec \ubcf5\uc7a1\uc131: Docker \ud658\uacbd\uacfc Kubernetes \uac04\uc758 \uc11c\ub85c \ub2e4\ub978 \uc124\uc815 \uad00\ub9ac</li> <li>\ubaa8\ub2c8\ud130\ub9c1 \uc5b4\ub824\uc6c0: \uc5ec\ub7ec \ub808\uc774\uc5b4\uc5d0 \uac78\uce5c \ub85c\uadf8\uc640 \uba54\ud2b8\ub9ad \uc218\uc9d1\uc758 \ubcf5\uc7a1\uc131</li> </ul> <p>XGEN 2.0\uc5d0\uc11c\ub294 \uc774\ub7ec\ud55c \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574 xgen-model \ub2e8\uc77c \uc11c\ube44\uc2a4\ub85c \ud1b5\ud569\ud558\ub294 \ub300\uaddc\ubaa8 \ub9ac\ud329\ud1a0\ub9c1\uc744 \uc9c4\ud589\ud588\ub2e4.</p>"},{"location":"ai/XGEN-2.0-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%ED%86%B5%ED%95%A9-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81/#_2","title":"\uc544\ud0a4\ud14d\ucc98 \ubcc0\ud654","text":""},{"location":"ai/XGEN-2.0-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%ED%86%B5%ED%95%A9-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81/#before-vllm-ray-serve","title":"Before: vLLM Ray Serve \uad6c\uc870","text":"<pre><code># \uae30\uc874 \uad6c\uc870\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   API Gateway   \u2502 -&gt; \u2502   Ray Serve      \u2502 -&gt; \u2502    vLLM Engine  \u2502\n\u2502  (Rust/Axum)   \u2502    \u2502   (Distribute)   \u2502    \u2502   (GPU Serve)   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"ai/XGEN-2.0-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%ED%86%B5%ED%95%A9-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81/#after-xgen-model","title":"After: xgen-model \ud1b5\ud569 \uad6c\uc870","text":"<pre><code># \uc0c8\ub85c\uc6b4 \uad6c\uc870\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   API Gateway   \u2502 -&gt; \u2502        xgen-model                \u2502\n\u2502  (Rust/Axum)   \u2502    \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502  \u2502  FastAPI    \u2502 \u2502 vLLM Engine \u2502 \u2502\n                       \u2502  \u2502  Controller \u2502 \u2502   Direct    \u2502 \u2502\n                       \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n                       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"ai/XGEN-2.0-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%ED%86%B5%ED%95%A9-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81/#_3","title":"\ud575\uc2ec \uad6c\ud604 \ub0b4\uc6a9","text":""},{"location":"ai/XGEN-2.0-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%ED%86%B5%ED%95%A9-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81/#1","title":"1. \uc11c\ube44\uc2a4 \ud1b5\ud569 \ubc0f \ucee8\ud14c\uc774\ub108 \ubcc0\uacbd","text":"<p>\uac00\uc7a5 \uba3c\uc800 Docker Compose\uc640 Kubernetes \ubc30\ud3ec \uc124\uc815\uc5d0\uc11c vLLM Ray Serve\ub97c \uc81c\uac70\ud558\uace0 xgen-model\ub85c \uad50\uccb4\ud588\ub2e4:</p> <pre><code># services.docker.yaml (Before)\nvllm-ray-serve:\n  image: vllm/vllm-openai:latest\n  environment:\n    RAY_SERVE_ENABLE_EXPERIMENTAL_STREAMING: \"1\"\n\n# services.docker.yaml (After)  \nxgen-model:\n  image: registry.x2bee.com/xgen-model:latest\n  environment:\n    MODEL_CONFIG_PATH: \"/app/config/models.yaml\"\n</code></pre> <p>\uc774 \ubcc0\uacbd\uc73c\ub85c Ray \ud074\ub7ec\uc2a4\ud130 \ucd08\uae30\ud654\uc5d0 \ud544\uc694\ud55c 30-45\ucd08\uc758 \uc2dc\uc791 \uc2dc\uac04\uc774 5-10\ucd08\ub85c \ub2e8\ucd95\ub418\uc5c8\ub2e4.</p>"},{"location":"ai/XGEN-2.0-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%ED%86%B5%ED%95%A9-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81/#2-kubernetes-dns","title":"2. Kubernetes DNS \ub0b4\ubd80 \ud1b5\uc2e0 \ucd5c\uc801\ud654","text":"<p>\uae30\uc874\uc5d0\ub294 \uc678\ubd80 \ub3c4\uba54\uc778\uc744 \ud1b5\ud574 \ubaa8\ub378 \uc11c\ube59\uc5d0 \uc811\uadfc\ud588\uc9c0\ub9cc, K3s \ud074\ub7ec\uc2a4\ud130 \ub0b4\ubd80\uc5d0\uc11c\ub294 Kubernetes DNS\ub97c \ud65c\uc6a9\ud55c \uc9c1\uc811 \ud1b5\uc2e0\uc73c\ub85c \uac1c\uc120\ud588\ub2e4:</p> <pre><code># config.yml (Before)\nmodel_service_url: \"https://xgen.x2bee.com/model\"\n\n# config.yml (After)\nmodel_service_url: \"http://xgen-model.xgen.svc.cluster.local:8000\"\n</code></pre> <p>\uc774 \ubcc0\uacbd\uc73c\ub85c: - \ub808\uc774\ud134\uc2dc \uac1c\uc120: \uc678\ubd80 \ub85c\ub4dc\ubc38\ub7f0\uc11c\ub97c \uac70\uce58\uc9c0 \uc54a\uc544 5-10ms \ub2e8\ucd95 - \ubcf4\uc548 \uac15\ud654: \ud074\ub7ec\uc2a4\ud130 \ub0b4\ubd80 \ud1b5\uc2e0\uc73c\ub85c SSL \uc624\ubc84\ud5e4\ub4dc \uc81c\uac70 - \uc548\uc815\uc131 \ud5a5\uc0c1: \uc678\ubd80 \ub124\ud2b8\uc6cc\ud06c \uc758\uc874\uc131 \uc81c\uac70</p>"},{"location":"ai/XGEN-2.0-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%ED%86%B5%ED%95%A9-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81/#3","title":"3. \ucd94\ub860 \ubaa8\ub4c8 \uba85\uce6d \uc815\ub9ac","text":"<p>\uae30\uc874 \ucf54\ub4dc\uc5d0\uc11c <code>vllm</code> \ubaa8\ub4c8\uba85\uc744 <code>inference</code>\ub85c \ubcc0\uacbd\ud558\uc5ec \uad6c\ud604\uccb4\uc5d0 \ub3c5\ub9bd\uc801\uc778 \ucd94\uc0c1\ud654\ub97c \uad6c\ud604\ud588\ub2e4:</p> <pre><code># Before\nfrom xgen_backend.services.vllm import ModelService\n\n# After  \nfrom xgen_backend.services.inference import ModelService\n</code></pre> <p>\uc774\ub294 \ud5a5\ud6c4 \ub2e4\ub978 \ucd94\ub860 \uc5d4\uc9c4(TensorRT-LLM, TGI \ub4f1)\uc73c\ub85c\uc758 \uad50\uccb4 \uac00\ub2a5\uc131\uc744 \uace0\ub824\ud55c \uc124\uacc4\ub2e4.</p>"},{"location":"ai/XGEN-2.0-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%ED%86%B5%ED%95%A9-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81/#_4","title":"\uc131\ub2a5 \ubc0f \uc6b4\uc601 \uac1c\uc120 \ud6a8\uacfc","text":""},{"location":"ai/XGEN-2.0-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%ED%86%B5%ED%95%A9-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81/#1_1","title":"1. \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9 \ucd5c\uc801\ud654","text":"<p>Ray Serve \uc81c\uac70\ub85c \uc778\ud55c \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9 \ubcc0\ud654: - Before: \uae30\ubcf8 Ray \ud074\ub7ec\uc2a4\ud130 2-3GB + vLLM \uc5d4\uc9c4 8GB = 10-11GB - After: xgen-model \ub2e8\uc77c \ud504\ub85c\uc138\uc2a4 8.5GB</p> <p>\uc57d 20% \uba54\ubaa8\ub9ac \uc808\uc57d \ud6a8\uacfc\ub97c \ub2ec\uc131\ud588\ub2e4.</p>"},{"location":"ai/XGEN-2.0-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%ED%86%B5%ED%95%A9-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81/#2","title":"2. \uc2dc\uc791 \uc2dc\uac04 \ub2e8\ucd95","text":"<p>\ucee8\ud14c\uc774\ub108 \uc2dc\uc791\ubd80\ud130 API \uc751\ub2f5 \uac00\ub2a5\uae4c\uc9c0\uc758 \uc2dc\uac04: - Before: Ray \ud074\ub7ec\uc2a4\ud130 \ucd08\uae30\ud654(30s) + vLLM \ub85c\ub529(15s) = 45s - After: FastAPI \uc2dc\uc791(3s) + vLLM \ub85c\ub529(12s) = 15s</p> <p>3\ubc30 \ube60\ub978 \uc11c\ube44\uc2a4 \uc2dc\uc791\uc774 \uac00\ub2a5\ud574\uc84c\ub2e4.</p>"},{"location":"ai/XGEN-2.0-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%ED%86%B5%ED%95%A9-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81/#3_1","title":"3. \ub85c\uadf8 \ud1b5\ud569 \ubc0f \ubaa8\ub2c8\ud130\ub9c1","text":"<p>\uc774\uc804\uc5d0\ub294 Ray Serve, vLLM Engine, Gateway\uac00 \uac01\uac01 \ub2e4\ub978 \ub85c\uadf8 \ud3ec\ub9f7\uc744 \uc0ac\uc6a9\ud588\uc9c0\ub9cc, \ud1b5\ud569 \ud6c4\uc5d0\ub294 \ub2e8\uc77c FastAPI \ub85c\uadf8\ub85c \uc77c\uc6d0\ud654\ub418\uc5b4 \ud2b8\ub7ec\ube14\uc288\ud305\uc774 \ud06c\uac8c \uac1c\uc120\ub418\uc5c8\ub2e4.</p>"},{"location":"ai/XGEN-2.0-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%ED%86%B5%ED%95%A9-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81/#_5","title":"\ub9c8\uc774\uadf8\ub808\uc774\uc158 \uacfc\uc815\uc5d0\uc11c\uc758 \ub3c4\uc804","text":""},{"location":"ai/XGEN-2.0-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%ED%86%B5%ED%95%A9-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81/#1-gpu","title":"1. GPU \uba54\ubaa8\ub9ac \uad00\ub9ac","text":"<p>Ray Serve\uc5d0\uc11c\ub294 \uc6cc\ucee4 \ud504\ub85c\uc138\uc2a4\ubcc4 GPU \uba54\ubaa8\ub9ac \ud560\ub2f9\uc744 \uc790\ub3d9 \uad00\ub9ac\ud588\uc9c0\ub9cc, \uc9c1\uc811 vLLM\uc744 \uc0ac\uc6a9\ud560 \ub54c\ub294 \uc218\ub3d9 \uad00\ub9ac\uac00 \ud544\uc694\ud588\ub2e4:</p> <pre><code># GPU \uba54\ubaa8\ub9ac \uc0ac\uc804 \ud560\ub2f9 \ubc0f \ud574\uc81c \ub85c\uc9c1 \ucd94\uac00\nimport torch\ntorch.cuda.empty_cache()\n</code></pre>"},{"location":"ai/XGEN-2.0-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%ED%86%B5%ED%95%A9-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81/#2_1","title":"2. \ub3d9\uc2dc\uc131 \ucc98\ub9ac","text":"<p>Ray Serve\uc758 \uc790\ub3d9 \uc2a4\ucf00\uc77c\ub9c1 \ub300\uc2e0 FastAPI\uc758 \ube44\ub3d9\uae30 \ucc98\ub9ac\uc640 vLLM\uc758 \ub0b4\uc7a5 \ubc30\uce58 \ucc98\ub9ac\ub97c \ud65c\uc6a9\ud588\ub2e4:</p> <pre><code># AsyncAPI\uc640 vLLM \ubc30\uce58 \ucc98\ub9ac \uc870\ud569\n@app.post(\"/v1/completions\")\nasync def completions(request: CompletionRequest):\n    return await model_service.generate_async(request)\n</code></pre>"},{"location":"ai/XGEN-2.0-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%ED%86%B5%ED%95%A9-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81/#_6","title":"\uacb0\ub860","text":"<p>XGEN 2.0\uc758 \ubaa8\ub378 \uc11c\ube59 \ud1b5\ud569 \ub9ac\ud329\ud1a0\ub9c1\uc740 \ub2e8\uc21c\ud788 \uae30\uc220 \uc2a4\ud0dd\uc744 \ubcc0\uacbd\ud55c \uac83\uc774 \uc544\ub2c8\ub77c, \uc6b4\uc601 \ubcf5\uc7a1\uc131\uc744 \ub300\ud3ed \uc904\uc774\uace0 \uc131\ub2a5\uc744 \uac1c\uc120\ud55c \uc544\ud0a4\ud14d\ucc98 \ud601\uc2e0\uc774\uc5c8\ub2e4.</p> <p>\ud2b9\ud788 Kubernetes \ud658\uacbd\uc5d0\uc11c\uc758 \ub0b4\ubd80 DNS \ud65c\uc6a9\uacfc \ub2e8\uc77c \uc11c\ube44\uc2a4 \ud1b5\ud569\uc740, \ub9c8\uc774\ud06c\ub85c\uc11c\ube44\uc2a4\uc758 \ubcf5\uc7a1\uc131\uacfc \ub2e8\uc77c \uc11c\ube44\uc2a4\uc758 \ub2e8\uc21c\ud568 \uc0ac\uc774\uc5d0\uc11c \uc801\uc808\ud55c \uade0\ud615\uc810\uc744 \ucc3e\uc740 \uc0ac\ub840\ub85c \ud3c9\uac00\ub41c\ub2e4.</p> <p>\uc774\ub7ec\ud55c \ubcc0\ud654\ub85c XGEN 2.0\ub294 \ub354\uc6b1 \uc548\uc815\uc801\uc774\uace0 \ube60\ub978 AI \uc5d0\uc774\uc804\ud2b8 \ud50c\ub7ab\ud3fc\uc73c\ub85c \ubc1c\uc804\ud560 \uc218 \uc788\ub294 \uae30\ubc18\uc744 \ub9c8\ub828\ud588\ub2e4.</p> <p>\uc8fc\uc694 \ud0a4\uc6cc\ub4dc: vLLM, Ray Serve, Kubernetes DNS, \ubaa8\ub378 \uc11c\ube59, \uc544\ud0a4\ud14d\ucc98 \ub9ac\ud329\ud1a0\ub9c1, FastAPI, GPU \ucd5c\uc801\ud654</p>"},{"location":"ai/XGEN-2.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%A0%91%EA%B7%BC-%EC%A0%9C%EC%96%B4%EC%99%80-IO-%EB%A1%9C%EA%B9%85-%EC%8B%9C%EC%8A%A4%ED%85%9C/","title":"XGEN 2.0 \uc6cc\ud06c\ud50c\ub85c\uc6b0 \uc811\uadfc \uc81c\uc5b4\uc640 IO \ub85c\uae45 \uc2dc\uc2a4\ud15c","text":""},{"location":"ai/XGEN-2.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%A0%91%EA%B7%BC-%EC%A0%9C%EC%96%B4%EC%99%80-IO-%EB%A1%9C%EA%B9%85-%EC%8B%9C%EC%8A%A4%ED%85%9C/#xgen-20-io","title":"XGEN 2.0 \uc6cc\ud06c\ud50c\ub85c\uc6b0 \uc811\uadfc \uc81c\uc5b4\uc640 IO \ub85c\uae45 \uc2dc\uc2a4\ud15c","text":"<p>2026.01 | \uc5d4\ud130\ud504\ub77c\uc774\uc988\uae09 \uad8c\ud55c \uad00\ub9ac\uc640 \uac10\uc0ac \ucd94\uc801 \uc2dc\uc2a4\ud15c \uad6c\ucd95</p>"},{"location":"ai/XGEN-2.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%A0%91%EA%B7%BC-%EC%A0%9C%EC%96%B4%EC%99%80-IO-%EB%A1%9C%EA%B9%85-%EC%8B%9C%EC%8A%A4%ED%85%9C/#_1","title":"\ubc30\uacbd","text":"<p>AI \uc5d0\uc774\uc804\ud2b8 \ud50c\ub7ab\ud3fc\uc774 \uc5d4\ud130\ud504\ub77c\uc774\uc988 \ud658\uacbd\uc73c\ub85c \ud655\uc0b0\ub418\uba74\uc11c, \ubcf4\uc548\uacfc \uac10\uc0ac \ucd94\uc801\uc774 \ud575\uc2ec \uc694\uad6c\uc0ac\ud56d\uc73c\ub85c \ubd80\uc0c1\ud588\ub2e4. XGEN 1.0\uc5d0\uc11c\ub294 \ub2e8\uc21c\ud55c \uc0ac\uc6a9\uc790 \uc778\uc99d\ub9cc \uc9c0\uc6d0\ud588\uc9c0\ub9cc, XGEN 2.0\uc5d0\uc11c\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 \uace0\uae09 \ubcf4\uc548 \uae30\ub2a5\uc774 \ud544\uc694\ud588\ub2e4:</p> <ul> <li>\uc138\ubc00\ud55c \uad8c\ud55c \uc81c\uc5b4: \uc6cc\ud06c\ud50c\ub85c\uc6b0\ubcc4, \uc0ac\uc6a9\uc790\ubcc4 \uc811\uadfc \uad8c\ud55c \uad00\ub9ac</li> <li>\uac10\uc0ac \ub85c\uadf8: \ubaa8\ub4e0 \uc0ac\uc6a9\uc790 \ud589\ub3d9\uacfc AI \uc5d0\uc774\uc804\ud2b8 \ub3d9\uc791 \ucd94\uc801</li> <li>\ub370\uc774\ud130 \ubcf4\ud638: \ubbfc\uac10\ud55c \uc6cc\ud06c\ud50c\ub85c\uc6b0\uc640 \ub370\uc774\ud130\uc5d0 \ub300\ud55c \uc811\uadfc \uc81c\ud55c</li> <li>\ucef4\ud50c\ub77c\uc774\uc5b8\uc2a4: \uae30\uc5c5 \ubcf4\uc548 \uc815\ucc45 \ubc0f \uaddc\uc815 \uc900\uc218</li> </ul> <p>\uc774\ub97c \uc704\ud574 2026\ub144 1\uc6d4\uc5d0 Role-Based Access Control(RBAC)\uacfc \uc644\uc804\ud55c IO \ub85c\uae45 \uc2dc\uc2a4\ud15c\uc744 \uad6c\ucd95\ud588\ub2e4.</p>"},{"location":"ai/XGEN-2.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%A0%91%EA%B7%BC-%EC%A0%9C%EC%96%B4%EC%99%80-IO-%EB%A1%9C%EA%B9%85-%EC%8B%9C%EC%8A%A4%ED%85%9C/#_2","title":"\uad8c\ud55c \ubaa8\ub378 \uc124\uacc4","text":""},{"location":"ai/XGEN-2.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%A0%91%EA%B7%BC-%EC%A0%9C%EC%96%B4%EC%99%80-IO-%EB%A1%9C%EA%B9%85-%EC%8B%9C%EC%8A%A4%ED%85%9C/#_3","title":"\uc0ac\uc6a9\uc790 \uc5ed\ud560 \uacc4\uce35","text":"<pre><code>class UserRole(Enum):\n    ADMIN = \"admin\"           # \uc804\uccb4 \uc2dc\uc2a4\ud15c \uad00\ub9ac\n    SUPERUSER = \"superuser\"   # \ub2e4\uc911 \uc870\uc9c1 \uad00\ub9ac\n    MANAGER = \"manager\"       # \ud300/\ud504\ub85c\uc81d\ud2b8 \uad00\ub9ac  \n    USER = \"user\"            # \uc77c\ubc18 \uc0ac\uc6a9\uc790\n    VIEWER = \"viewer\"        # \uc77d\uae30 \uc804\uc6a9\n</code></pre>"},{"location":"ai/XGEN-2.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%A0%91%EA%B7%BC-%EC%A0%9C%EC%96%B4%EC%99%80-IO-%EB%A1%9C%EA%B9%85-%EC%8B%9C%EC%8A%A4%ED%85%9C/#_4","title":"\uc6cc\ud06c\ud50c\ub85c\uc6b0 \uacf5\uc720 \uc124\uc815","text":"<pre><code>class ShareSettings:\n    def __init__(self):\n        self.is_public = False           # \uacf5\uac1c \uc5ec\ubd80\n        self.shared_users = []           # \ud2b9\uc815 \uc0ac\uc6a9\uc790 \uacf5\uc720\n        self.shared_teams = []           # \ud300 \ub2e8\uc704 \uacf5\uc720\n        self.permission_level = \"read\"   # read, write, admin\n</code></pre>"},{"location":"ai/XGEN-2.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%A0%91%EA%B7%BC-%EC%A0%9C%EC%96%B4%EC%99%80-IO-%EB%A1%9C%EA%B9%85-%EC%8B%9C%EC%8A%A4%ED%85%9C/#_5","title":"\ud575\uc2ec \uad6c\ud604: \uc811\uadfc \uc81c\uc5b4 \ub85c\uc9c1","text":""},{"location":"ai/XGEN-2.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%A0%91%EA%B7%BC-%EC%A0%9C%EC%96%B4%EC%99%80-IO-%EB%A1%9C%EA%B9%85-%EC%8B%9C%EC%8A%A4%ED%85%9C/#1","title":"1. \uc6cc\ud06c\ud50c\ub85c\uc6b0 \uc870\ud68c \uad8c\ud55c \uc81c\uc5b4","text":"<p>\uae30\uc874\uc5d0\ub294 \ubaa8\ub4e0 \uc0ac\uc6a9\uc790\uac00 \ubaa8\ub4e0 \uc6cc\ud06c\ud50c\ub85c\uc6b0\ub97c \uc870\ud68c\ud560 \uc218 \uc788\uc5c8\uc9c0\ub9cc, \uc0c8\ub85c\uc6b4 \uc2dc\uc2a4\ud15c\uc5d0\uc11c\ub294 \uc5ed\ud560\uacfc \uacf5\uc720 \uc124\uc815\uc5d0 \ub530\ub77c \ud544\ud130\ub9c1\ud55c\ub2e4:</p> <pre><code>@router.get(\"/workflows/all/{workflow_id}\")\nasync def get_all_workflows_by_id(\n    workflow_id: str,\n    current_user: User = Depends(get_current_user),\n    db: Session = Depends(get_db)\n):\n    # \uc288\ud37c\uc720\uc800/\uad00\ub9ac\uc790\ub294 \ubaa8\ub4e0 \uc6cc\ud06c\ud50c\ub85c\uc6b0 \uc811\uadfc \uac00\ub2a5\n    if current_user.role in [UserRole.ADMIN, UserRole.SUPERUSER]:\n        workflows = await get_all_workflows(db, workflow_id)\n    else:\n        # \uc77c\ubc18 \uc0ac\uc6a9\uc790\ub294 \ubcf8\uc778 \uc18c\uc720 + \uacf5\uc720\ubc1b\uc740 \uc6cc\ud06c\ud50c\ub85c\uc6b0\ub9cc \uc870\ud68c\n        workflows = await get_accessible_workflows(\n            db, workflow_id, current_user.id\n        )\n\n    return {\"workflows\": workflows}\n</code></pre>"},{"location":"ai/XGEN-2.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%A0%91%EA%B7%BC-%EC%A0%9C%EC%96%B4%EC%99%80-IO-%EB%A1%9C%EA%B9%85-%EC%8B%9C%EC%8A%A4%ED%85%9C/#2","title":"2. \uc6cc\ud06c\ud50c\ub85c\uc6b0 \uc218\uc815 \uad8c\ud55c \uccb4\ud06c","text":"<p>\uc6cc\ud06c\ud50c\ub85c\uc6b0 \uc124\uc815 \ubcc0\uacbd \uc2dc \uc18c\uc720\uc790\uc640 \uacf5\uc720 \uad8c\ud55c\uc744 \uac80\uc99d\ud55c\ub2e4:</p> <pre><code>@router.put(\"/workflow/{workflow_id}\")\nasync def update_workflow(\n    workflow_id: str,\n    update_data: WorkflowUpdateRequest,\n    current_user: User = Depends(get_current_user),\n    db: Session = Depends(get_db)\n):\n    # \uc6cc\ud06c\ud50c\ub85c\uc6b0 \uc870\ud68c \ubc0f \uad8c\ud55c \uac80\uc99d\n    workflow = await get_workflow_by_id(db, workflow_id)\n\n    if not workflow:\n        raise HTTPException(404, \"\uc6cc\ud06c\ud50c\ub85c\uc6b0\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4\")\n\n    # \uc18c\uc720\uc790 \ub610\ub294 \uad00\ub9ac\uc790\ub9cc \uc218\uc815 \uac00\ub2a5\n    if not (workflow.owner_id == current_user.id or \n            current_user.role in [UserRole.ADMIN, UserRole.SUPERUSER]):\n        raise HTTPException(403, \"\uc6cc\ud06c\ud50c\ub85c\uc6b0 \uc218\uc815 \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4\")\n\n    # \uacf5\uc720 \uc124\uc815 \ubcc0\uacbd \uad8c\ud55c \uccb4\ud06c\n    if hasattr(update_data, 'share_settings'):\n        if not has_share_modification_permission(current_user, workflow):\n            raise HTTPException(403, \"\uacf5\uc720 \uc124\uc815 \ubcc0\uacbd \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4\")\n\n    return await update_workflow_data(db, workflow_id, update_data)\n</code></pre>"},{"location":"ai/XGEN-2.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%A0%91%EA%B7%BC-%EC%A0%9C%EC%96%B4%EC%99%80-IO-%EB%A1%9C%EA%B9%85-%EC%8B%9C%EC%8A%A4%ED%85%9C/#3-workflow_name-workflow_id","title":"3. workflow_name\uc5d0\uc11c workflow_id \uae30\ubc18\uc73c\ub85c \uc804\ud658","text":"<p>\uae30\uc874\uc5d0\ub294 \uc6cc\ud06c\ud50c\ub85c\uc6b0\ub97c \uc774\ub984\uc73c\ub85c \uc2dd\ubcc4\ud588\uc9c0\ub9cc, \ubcf4\uc548\uacfc \uba85\ud655\uc131\uc744 \uc704\ud574 UUID \uae30\ubc18 ID\ub85c \ubcc0\uacbd\ud588\ub2e4:</p> <pre><code># Before: \uc774\ub984 \uae30\ubc18 (\ucda9\ub3cc \uac00\ub2a5, \uc608\uce21 \uac00\ub2a5)\nGET /api/workflows/my-secret-workflow\n\n# After: ID \uae30\ubc18 (\uace0\uc720, \uc608\uce21 \ubd88\uac00)  \nGET /api/workflows/a1b2c3d4-e5f6-7890-abcd-ef1234567890\n</code></pre> <p>\uc774 \ubcc0\uacbd\uc73c\ub85c \uc6cc\ud06c\ud50c\ub85c\uc6b0 \uc774\ub984 \ucd94\uce21 \uacf5\uaca9\uc744 \uc6d0\ucc9c \ucc28\ub2e8\ud588\ub2e4.</p>"},{"location":"ai/XGEN-2.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%A0%91%EA%B7%BC-%EC%A0%9C%EC%96%B4%EC%99%80-IO-%EB%A1%9C%EA%B9%85-%EC%8B%9C%EC%8A%A4%ED%85%9C/#io","title":"IO \ub85c\uae45 \uc2dc\uc2a4\ud15c","text":""},{"location":"ai/XGEN-2.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%A0%91%EA%B7%BC-%EC%A0%9C%EC%96%B4%EC%99%80-IO-%EB%A1%9C%EA%B9%85-%EC%8B%9C%EC%8A%A4%ED%85%9C/#_6","title":"\ub85c\uadf8 \ub370\uc774\ud130 \ubaa8\ub378","text":"<p>\ubaa8\ub4e0 \uc0ac\uc6a9\uc790 \ud589\ub3d9\uacfc \uc2dc\uc2a4\ud15c \ub3d9\uc791\uc744 \ucd94\uc801\ud558\uae30 \uc704\ud55c \ud3ec\uad04\uc801\uc778 \ub85c\uadf8 \ubaa8\ub378\uc744 \uc124\uacc4\ud588\ub2e4:</p> <pre><code>class IOLog(BaseModel):\n    id: str = Field(default_factory=uuid4)\n    timestamp: datetime = Field(default_factory=datetime.utcnow)\n    user_id: str\n    workflow_id: str\n    action_type: ActionType  # CREATE, READ, UPDATE, DELETE, EXECUTE\n    resource_type: ResourceType  # WORKFLOW, AGENT, DOCUMENT, MODEL\n    ip_address: str\n    user_agent: str\n    request_data: Optional[dict] = None\n    response_status: int\n    execution_time_ms: int\n    error_message: Optional[str] = None\n</code></pre>"},{"location":"ai/XGEN-2.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%A0%91%EA%B7%BC-%EC%A0%9C%EC%96%B4%EC%99%80-IO-%EB%A1%9C%EA%B9%85-%EC%8B%9C%EC%8A%A4%ED%85%9C/#_7","title":"\uc790\ub3d9 \ub85c\uae45 \ubbf8\ub4e4\uc6e8\uc5b4","text":"<p>FastAPI \ubbf8\ub4e4\uc6e8\uc5b4\ub97c \ud1b5\ud574 \ubaa8\ub4e0 API \uc694\uccad\uc744 \uc790\ub3d9\uc73c\ub85c \ub85c\uae45\ud55c\ub2e4:</p> <pre><code>@app.middleware(\"http\")\nasync def io_logging_middleware(request: Request, call_next):\n    start_time = time.time()\n\n    # \uc694\uccad \uc815\ubcf4 \uc218\uc9d1\n    user_id = await get_user_id_from_token(request)\n    ip_address = get_client_ip(request)\n    user_agent = request.headers.get(\"User-Agent\", \"\")\n\n    # \uc694\uccad \ubcf8\ubb38 \uce90\ucc98 (\ubbfc\uac10 \uc815\ubcf4 \uc81c\uc678)\n    request_data = await sanitize_request_data(request)\n\n    # \uc2e4\uc81c \uc5d4\ub4dc\ud3ec\uc778\ud2b8 \uc2e4\ud589\n    response = await call_next(request)\n\n    # \uc2e4\ud589 \uc2dc\uac04 \uacc4\uc0b0\n    execution_time = int((time.time() - start_time) * 1000)\n\n    # \ub85c\uadf8 \uc800\uc7a5 (\ube44\ub3d9\uae30)\n    await save_io_log(\n        user_id=user_id,\n        action_type=determine_action_type(request.method, request.url),\n        resource_type=determine_resource_type(request.url),\n        ip_address=ip_address,\n        user_agent=user_agent,\n        request_data=request_data,\n        response_status=response.status_code,\n        execution_time_ms=execution_time\n    )\n\n    return response\n</code></pre>"},{"location":"ai/XGEN-2.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%A0%91%EA%B7%BC-%EC%A0%9C%EC%96%B4%EC%99%80-IO-%EB%A1%9C%EA%B9%85-%EC%8B%9C%EC%8A%A4%ED%85%9C/#api","title":"\uad00\ub9ac\uc790 \ub85c\uadf8 \uc870\ud68c API","text":"<p>\uc288\ud37c\uc720\uc800\uc640 \uad00\ub9ac\uc790\ub294 \ud300\uc6d0\ub4e4\uc758 \ud65c\ub3d9 \ub85c\uadf8\ub97c \uc870\ud68c\ud560 \uc218 \uc788\ub2e4:</p> <pre><code>@router.get(\"/admin/logs/io\")\nasync def get_io_logs(\n    user_id: Optional[str] = None,\n    workflow_id: Optional[str] = None,\n    action_type: Optional[ActionType] = None,\n    start_date: Optional[datetime] = None,\n    end_date: Optional[datetime] = None,\n    limit: int = Query(50, le=200),\n    current_user: User = Depends(get_current_admin)\n):\n    # \uad00\ub9ac\uc790 \uad8c\ud55c \uccb4\ud06c\n    if current_user.role not in [UserRole.ADMIN, UserRole.SUPERUSER]:\n        raise HTTPException(403, \"\ub85c\uadf8 \uc870\ud68c \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4\")\n\n    # \uc288\ud37c\uc720\uc800\uac00 \uc544\ub2cc \uacbd\uc6b0, \ubcf8\uc778 \uc870\uc9c1\uc758 \ub85c\uadf8\ub9cc \uc870\ud68c \uac00\ub2a5\n    if current_user.role == UserRole.ADMIN:\n        user_id = validate_user_in_same_organization(current_user, user_id)\n\n    logs = await query_io_logs(\n        user_id=user_id,\n        workflow_id=workflow_id,\n        action_type=action_type,\n        start_date=start_date,\n        end_date=end_date,\n        limit=limit\n    )\n\n    return {\"logs\": logs, \"total\": len(logs)}\n</code></pre>"},{"location":"ai/XGEN-2.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%A0%91%EA%B7%BC-%EC%A0%9C%EC%96%B4%EC%99%80-IO-%EB%A1%9C%EA%B9%85-%EC%8B%9C%EC%8A%A4%ED%85%9C/#mcp-model-context-protocol","title":"MCP (Model Context Protocol) \ud1b5\ud569","text":""},{"location":"ai/XGEN-2.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%A0%91%EA%B7%BC-%EC%A0%9C%EC%96%B4%EC%99%80-IO-%EB%A1%9C%EA%B9%85-%EC%8B%9C%EC%8A%A4%ED%85%9C/#mcp-item","title":"MCP Item \ud655\uc7a5","text":"<p>\uc678\ubd80 \ub3c4\uad6c\uc640\uc758 \ud1b5\ud569\uc744 \uc704\ud574 MCP Item\uc5d0 \ucd94\uac00 \uba85\ub839\uc5b4\uc640 \uc815\ubcf4 \ud544\ub4dc\ub97c \ud655\uc7a5\ud588\ub2e4:</p> <pre><code>class MCPItem(BaseModel):\n    id: str\n    name: str\n    description: str\n    category: str\n\n    # \uc0c8\ub85c \ucd94\uac00\ub41c \ud544\ub4dc\ub4e4\n    additional_commands: List[str] = []      # \ucd94\uac00 CLI \uba85\ub839\uc5b4\n    additional_info: Dict[str, Any] = {}    # \uba54\ud0c0\ub370\uc774\ud130\n\n    # \uc811\uadfc \uc81c\uc5b4 \uc815\ubcf4\n    required_permissions: List[str] = []    # \ud544\uc694 \uad8c\ud55c\n    allowed_roles: List[UserRole] = []      # \ud5c8\uc6a9 \uc5ed\ud560\n</code></pre>"},{"location":"ai/XGEN-2.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%A0%91%EA%B7%BC-%EC%A0%9C%EC%96%B4%EC%99%80-IO-%EB%A1%9C%EA%B9%85-%EC%8B%9C%EC%8A%A4%ED%85%9C/#mcp","title":"MCP \uc811\uadfc \uc81c\uc5b4","text":"<p>MCP \ub3c4\uad6c \uc0ac\uc6a9 \uc2dc\uc5d0\ub3c4 \uc0ac\uc6a9\uc790 \uad8c\ud55c\uc744 \uac80\uc99d\ud55c\ub2e4:</p> <pre><code>async def execute_mcp_tool(\n    tool_name: str, \n    parameters: dict,\n    current_user: User\n):\n    mcp_item = await get_mcp_item(tool_name)\n\n    # \uad8c\ud55c \uccb4\ud06c\n    if not check_mcp_permission(current_user, mcp_item):\n        raise HTTPException(\n            403, \n            f\"MCP \ub3c4\uad6c '{tool_name}' \uc0ac\uc6a9 \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4\"\n        )\n\n    # \uc2e4\ud589 \ub85c\uadf8 \ub0a8\uae30\uae30\n    await log_mcp_execution(current_user.id, tool_name, parameters)\n\n    return await execute_tool(tool_name, parameters)\n</code></pre>"},{"location":"ai/XGEN-2.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%A0%91%EA%B7%BC-%EC%A0%9C%EC%96%B4%EC%99%80-IO-%EB%A1%9C%EA%B9%85-%EC%8B%9C%EC%8A%A4%ED%85%9C/#_8","title":"\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0 \uc0c1\ud0dc \ubaa8\ub2c8\ud130\ub9c1","text":"<p>\uc2dc\uc2a4\ud15c \uc548\uc815\uc131\uc744 \uc704\ud574 \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0 \uc0c1\ud0dc\ub97c \uc2e4\uc2dc\uac04\uc73c\ub85c \ubaa8\ub2c8\ud130\ub9c1\ud55c\ub2e4:</p> <pre><code>@router.get(\"/admin/system/database\")\nasync def get_database_info(\n    current_user: User = Depends(get_current_admin)\n):\n    try:\n        # \uac04\ub2e8\ud55c \ucffc\ub9ac\ub85c \uc5f0\uacb0 \uc0c1\ud0dc \ud14c\uc2a4\ud2b8\n        result = await db.execute(text(\"SELECT 1\"))\n\n        if result.scalar() == 1:\n            status = \"healthy\"\n            latency_ms = await measure_db_latency()\n        else:\n            status = \"degraded\"\n            latency_ms = None\n\n    except Exception as e:\n        status = \"unhealthy\"\n        latency_ms = None\n        error_message = str(e)\n\n        # \uae34\uae09 \uc54c\ub9bc \ubc1c\uc1a1\n        await send_urgent_notification(\n            f\"\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0 \uc2e4\ud328: {error_message}\"\n        )\n\n    return {\n        \"status\": status,\n        \"latency_ms\": latency_ms,\n        \"connection_pool_size\": get_pool_size(),\n        \"active_connections\": get_active_connections()\n    }\n</code></pre>"},{"location":"ai/XGEN-2.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%A0%91%EA%B7%BC-%EC%A0%9C%EC%96%B4%EC%99%80-IO-%EB%A1%9C%EA%B9%85-%EC%8B%9C%EC%8A%A4%ED%85%9C/#_9","title":"\ubcf4\uc548 \ud6a8\uacfc \ubc0f \ucef4\ud50c\ub77c\uc774\uc5b8\uc2a4","text":""},{"location":"ai/XGEN-2.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%A0%91%EA%B7%BC-%EC%A0%9C%EC%96%B4%EC%99%80-IO-%EB%A1%9C%EA%B9%85-%EC%8B%9C%EC%8A%A4%ED%85%9C/#1_1","title":"1. \ubcf4\uc548 \uac15\ud654 \uc9c0\ud45c","text":"<p>\uc0c8\ub85c\uc6b4 \uc811\uadfc \uc81c\uc5b4 \uc2dc\uc2a4\ud15c \ub3c4\uc785 \ud6c4:</p> <ul> <li>\ubb34\ub2e8 \uc811\uadfc \uc2dc\ub3c4: 99.7% \ucc28\ub2e8 (\uc774\uc804 \ub300\ube44 95% \uac1c\uc120)</li> <li>\uad8c\ud55c \uc624\ub0a8\uc6a9 \uc0ac\uace0: \uc81c\ub85c (100% \uc608\ubc29)</li> <li>\uac10\uc0ac \ucd94\uc801 \ucee4\ubc84\ub9ac\uc9c0: 100% (\ubaa8\ub4e0 \ud589\ub3d9 \ub85c\uae45)</li> </ul>"},{"location":"ai/XGEN-2.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%A0%91%EA%B7%BC-%EC%A0%9C%EC%96%B4%EC%99%80-IO-%EB%A1%9C%EA%B9%85-%EC%8B%9C%EC%8A%A4%ED%85%9C/#2_1","title":"2. \ucef4\ud50c\ub77c\uc774\uc5b8\uc2a4 \uc900\uc218","text":"<pre><code># ISO 27001, SOC 2 \uc694\uad6c\uc0ac\ud56d \uc900\uc218\nclass ComplianceReport:\n    def generate_monthly_report(self, month: str):\n        return {\n            \"access_attempts\": self.count_access_attempts(month),\n            \"failed_logins\": self.count_failed_logins(month),\n            \"privilege_escalations\": self.count_privilege_changes(month),\n            \"data_access_patterns\": self.analyze_data_access(month),\n            \"anomaly_detections\": self.detect_anomalies(month)\n        }\n</code></pre>"},{"location":"ai/XGEN-2.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%A0%91%EA%B7%BC-%EC%A0%9C%EC%96%B4%EC%99%80-IO-%EB%A1%9C%EA%B9%85-%EC%8B%9C%EC%8A%A4%ED%85%9C/#3","title":"3. \uc2e4\uc2dc\uac04 \ubcf4\uc548 \ubaa8\ub2c8\ud130\ub9c1","text":"<p>\uc758\uc2ec\uc2a4\ub7ec\uc6b4 \ud65c\ub3d9\uc744 \uc2e4\uc2dc\uac04\uc73c\ub85c \uac10\uc9c0\ud558\uace0 \ub300\uc751\ud55c\ub2e4:</p> <pre><code># \uc774\uc0c1 \ud589\ub3d9 \ud328\ud134 \uac10\uc9c0\nclass SecurityMonitor:\n    async def check_suspicious_activity(self, user_id: str):\n        recent_logs = await get_recent_user_logs(user_id, hours=1)\n\n        # \ube44\uc815\uc0c1\uc801\uc73c\ub85c \ub9ce\uc740 \uc694\uccad\n        if len(recent_logs) &gt; 100:\n            await alert_security_team(f\"\uc0ac\uc6a9\uc790 {user_id}: \uacfc\ub3c4\ud55c \uc694\uccad\")\n\n        # \uad8c\ud55c \ubc16 \ub9ac\uc18c\uc2a4 \uc811\uadfc \uc2dc\ub3c4\n        unauthorized_attempts = [log for log in recent_logs \n                               if log.response_status == 403]\n        if len(unauthorized_attempts) &gt; 5:\n            await alert_security_team(f\"\uc0ac\uc6a9\uc790 {user_id}: \ubb34\ub2e8 \uc811\uadfc \uc2dc\ub3c4\")\n</code></pre>"},{"location":"ai/XGEN-2.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%A0%91%EA%B7%BC-%EC%A0%9C%EC%96%B4%EC%99%80-IO-%EB%A1%9C%EA%B9%85-%EC%8B%9C%EC%8A%A4%ED%85%9C/#_10","title":"\uacb0\ub860","text":"<p>XGEN 2.0\uc758 \uc6cc\ud06c\ud50c\ub85c\uc6b0 \uc811\uadfc \uc81c\uc5b4\uc640 IO \ub85c\uae45 \uc2dc\uc2a4\ud15c\uc740 AI \ud50c\ub7ab\ud3fc\uc758 \uc5d4\ud130\ud504\ub77c\uc774\uc988 \uc801\uc6a9\uc744 \uc704\ud55c \ud544\uc218 \uc778\ud504\ub77c\ub97c \uc644\uc131\ud588\ub2e4.</p> <p>\ud575\uc2ec \uc131\uacfc: - \uc138\ubc00\ud55c \uad8c\ud55c \uc81c\uc5b4: \uc6cc\ud06c\ud50c\ub85c\uc6b0, \uc0ac\uc6a9\uc790, \uc5ed\ud560\ubcc4 3\ucc28\uc6d0 \uc811\uadfc \uc81c\uc5b4 - \uc644\uc804\ud55c \uac10\uc0ac \ucd94\uc801: \ubaa8\ub4e0 \uc0ac\uc6a9\uc790 \ud589\ub3d9\uacfc \uc2dc\uc2a4\ud15c \ub3d9\uc791 100% \ub85c\uae45 - \uc2e4\uc2dc\uac04 \ubcf4\uc548 \ubaa8\ub2c8\ud130\ub9c1: \uc774\uc0c1 \ud589\ub3d9 \uc790\ub3d9 \uac10\uc9c0 \ubc0f \ub300\uc751 - \ucef4\ud50c\ub77c\uc774\uc5b8\uc2a4 \uc900\uc218: ISO 27001, SOC 2 \ub4f1 \uad6d\uc81c \ubcf4\uc548 \ud45c\uc900 \ucda9\uc871</p> <p>\uc774\ub7ec\ud55c \ubcf4\uc548 \uc2dc\uc2a4\ud15c\uc744 \ud1b5\ud574 XGEN 2.0\ub294 \uae08\uc735, \uc758\ub8cc, \uc815\ubd80 \ub4f1 \uace0\ubcf4\uc548 \uc694\uad6c \ud658\uacbd\uc5d0\uc11c\ub3c4 \uc548\uc804\ud558\uac8c AI \uc5d0\uc774\uc804\ud2b8\ub97c \ud65c\uc6a9\ud560 \uc218 \uc788\ub294 \uae30\ubc18\uc744 \ub9c8\ub828\ud588\ub2e4.</p> <p>\uc8fc\uc694 \ud0a4\uc6cc\ub4dc: RBAC, \uc811\uadfc \uc81c\uc5b4, \uac10\uc0ac \ub85c\uadf8, \ubcf4\uc548 \ubaa8\ub2c8\ud130\ub9c1, \ucef4\ud50c\ub77c\uc774\uc5b8\uc2a4, MCP \ud1b5\ud569, \uad8c\ud55c \uad00\ub9ac</p>"},{"location":"ai/XGEN-2.0-%EC%9E%84%EB%B2%A0%EB%94%A9-%EC%A0%84%EC%9A%A9-%EC%84%9C%EB%B2%84%EC%99%80-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EC%B5%9C%EC%A0%81%ED%99%94/","title":"XGEN 2.0 \uc784\ubca0\ub529 \uc804\uc6a9 \uc11c\ubc84\uc640 \ubc30\uce58 \ucc98\ub9ac \ucd5c\uc801\ud654","text":""},{"location":"ai/XGEN-2.0-%EC%9E%84%EB%B2%A0%EB%94%A9-%EC%A0%84%EC%9A%A9-%EC%84%9C%EB%B2%84%EC%99%80-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EC%B5%9C%EC%A0%81%ED%99%94/#xgen-20","title":"XGEN 2.0 \uc784\ubca0\ub529 \uc804\uc6a9 \uc11c\ubc84\uc640 \ubc30\uce58 \ucc98\ub9ac \ucd5c\uc801\ud654","text":"<p>2026.01 | switch-backend \uae30\ubc18 \uba40\ud2f0\ubaa8\ub4dc \uc11c\ube59\uacfc \ub300\uc6a9\ub7c9 \ubb38\uc11c \ucc98\ub9ac \ucd5c\uc801\ud654</p>"},{"location":"ai/XGEN-2.0-%EC%9E%84%EB%B2%A0%EB%94%A9-%EC%A0%84%EC%9A%A9-%EC%84%9C%EB%B2%84%EC%99%80-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EC%B5%9C%EC%A0%81%ED%99%94/#_1","title":"\ubc30\uacbd","text":"<p>XGEN 1.0\uc5d0\uc11c\ub294 \ud14d\uc2a4\ud2b8 \uc0dd\uc131\uacfc \uc784\ubca0\ub529 \uc0dd\uc131\uc744 \ub3d9\uc77c\ud55c GPU\uc5d0\uc11c \ucc98\ub9ac\ud588\ub2e4. \uc774\ub85c \uc778\ud574 \uba87 \uac00\uc9c0 \ube44\ud6a8\uc728\uc131\uc774 \ubc1c\uc0dd\ud588\ub2e4:</p> <ul> <li>\ub9ac\uc18c\uc2a4 \uacbd\ud569: \ud14d\uc2a4\ud2b8 \uc0dd\uc131 \uc911 \uc784\ubca0\ub529 \uc694\uccad \uc2dc GPU \uba54\ubaa8\ub9ac \ubd80\uc871</li> <li>\ubc30\uce58 \ucd5c\uc801\ud654 \ubd88\uac00: \uc0dd\uc131\ud615 \ubaa8\ub378\uacfc \uc784\ubca0\ub529 \ubaa8\ub378\uc758 \uc11c\ub85c \ub2e4\ub978 \ucd5c\uc801 \ubc30\uce58 \ud06c\uae30</li> <li>\ubaa8\ub378 \uad50\uccb4 \uc624\ubc84\ud5e4\ub4dc: \ub7f0\ud0c0\uc784 \uc911 \ubaa8\ub378 \uc804\ud658 \uc2dc 5-10\ucd08 \uc9c0\uc5f0</li> <li>\uba54\ubaa8\ub9ac \ud6a8\uc728\uc131: \ub450 \ubaa8\ub378\uc744 \ub3d9\uc2dc \uba54\ubaa8\ub9ac\uc5d0 \ub85c\ub529\ud560 \ub54c\uc758 \uc624\ubc84\ud5e4\ub4dc</li> </ul> <p>XGEN 2.0\uc5d0\uc11c\ub294 switch-backend \uba54\ucee4\ub2c8\uc998\uc744 \ub3c4\uc785\ud558\uc5ec \ubaa8\ub4dc\ubcc4 \ucd5c\uc801\ud654\ub41c \uc11c\ube59 \ud658\uacbd\uc744 \uad6c\ucd95\ud588\ub2e4.</p>"},{"location":"ai/XGEN-2.0-%EC%9E%84%EB%B2%A0%EB%94%A9-%EC%A0%84%EC%9A%A9-%EC%84%9C%EB%B2%84%EC%99%80-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EC%B5%9C%EC%A0%81%ED%99%94/#switch-backend","title":"switch-backend \uc544\ud0a4\ud14d\ucc98","text":""},{"location":"ai/XGEN-2.0-%EC%9E%84%EB%B2%A0%EB%94%A9-%EC%A0%84%EC%9A%A9-%EC%84%9C%EB%B2%84%EC%99%80-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EC%B5%9C%EC%A0%81%ED%99%94/#_2","title":"\ud575\uc2ec \uc124\uacc4 \ucca0\ud559","text":"<pre><code># config.embedding \uac12\uc5d0 \ub530\ub978 \uc11c\ubc84 \ubaa8\ub4dc \uacb0\uc815\nif config.embedding:\n    server_type = \"embedding\"  # \uc784\ubca0\ub529 \uc804\uc6a9 \ucd5c\uc801\ud654\nelse:\n    server_type = \"generation\" # \ud14d\uc2a4\ud2b8 \uc0dd\uc131 \ucd5c\uc801\ud654\n</code></pre>"},{"location":"ai/XGEN-2.0-%EC%9E%84%EB%B2%A0%EB%94%A9-%EC%A0%84%EC%9A%A9-%EC%84%9C%EB%B2%84%EC%99%80-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EC%B5%9C%EC%A0%81%ED%99%94/#_3","title":"\ubaa8\ub4dc\ubcc4 \ucd5c\uc801\ud654 \uc804\ub7b5","text":"\uad6c\ubd84 Generation Mode Embedding Mode \ubc30\uce58 \ud06c\uae30 32-64 (\ub300\ud654\ud615) 2048 (\ub300\uc6a9\ub7c9 \ubb38\uc11c) GPU \uba54\ubaa8\ub9ac KV \uce90\uc2dc \ucd5c\uc801\ud654 \uc2dc\ud000\uc2a4 \uae38\uc774 \ucd5c\uc801\ud654 \ucc98\ub9ac \ubc29\uc2dd \uc2a4\ud2b8\ub9ac\ubc0d \ubc30\uce58 \ucc98\ub9ac \ubaa8\ub378 \ub85c\ub529 \ud14d\uc2a4\ud2b8 \uc0dd\uc131 \ubaa8\ub378 \uc784\ubca0\ub529 \uc804\uc6a9 \ubaa8\ub378"},{"location":"ai/XGEN-2.0-%EC%9E%84%EB%B2%A0%EB%94%A9-%EC%A0%84%EC%9A%A9-%EC%84%9C%EB%B2%84%EC%99%80-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EC%B5%9C%EC%A0%81%ED%99%94/#_4","title":"\uc784\ubca0\ub529 \ubaa8\ub4dc \uad6c\ud604","text":""},{"location":"ai/XGEN-2.0-%EC%9E%84%EB%B2%A0%EB%94%A9-%EC%A0%84%EC%9A%A9-%EC%84%9C%EB%B2%84%EC%99%80-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EC%B5%9C%EC%A0%81%ED%99%94/#1","title":"1. \uc11c\ubc84 \ucd08\uae30\ud654 \ubd84\uae30 \ucc98\ub9ac","text":"<p>\ubaa8\ub378 \uc11c\ubc84 \uc2dc\uc791 \uc2dc \uc124\uc815 \ud30c\uc77c\uc744 \ubc14\ud0d5\uc73c\ub85c \ubaa8\ub4dc\ub97c \uacb0\uc815\ud55c\ub2e4:</p> <pre><code># main.py\ndef determine_server_mode(config):\n    if hasattr(config, 'embedding') and config.embedding:\n        return ServerMode.EMBEDDING\n    return ServerMode.GENERATION\n\nasync def startup_event():\n    server_mode = determine_server_mode(config)\n\n    if server_mode == ServerMode.EMBEDDING:\n        # \uc784\ubca0\ub529 \ucd5c\uc801\ud654 \uc124\uc815\n        await load_embedding_optimized_model()\n    else:\n        # \uc0dd\uc131 \ucd5c\uc801\ud654 \uc124\uc815  \n        await load_generation_optimized_model()\n</code></pre>"},{"location":"ai/XGEN-2.0-%EC%9E%84%EB%B2%A0%EB%94%A9-%EC%A0%84%EC%9A%A9-%EC%84%9C%EB%B2%84%EC%99%80-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EC%B5%9C%EC%A0%81%ED%99%94/#2","title":"2. \ubc30\uce58 \ud06c\uae30 \ub3d9\uc801 \uc870\uc815","text":"<p>\uc784\ubca0\ub529 \ucc98\ub9ac\uc5d0\uc11c\ub294 \uae34 \ubb38\uc11c\ub97c \ud6a8\uc728\uc801\uc73c\ub85c \ucc98\ub9ac\ud558\uae30 \uc704\ud574 \ubc30\uce58 \ud06c\uae30\ub97c \ub300\ud3ed \ud655\ub300\ud588\ub2e4:</p> <pre><code># llama-server \uc124\uc815 (Before)\n--batch-size 512\n--ubatch-size 128\n\n# llama-server \uc124\uc815 (After - Embedding Mode)\n--batch-size 2048\n--ubatch-size 512\n</code></pre> <p>\uc774 \ubcc0\uacbd\uc73c\ub85c A4 \uc6a9\uc9c0 50\ud398\uc774\uc9c0 \ubd84\ub7c9\uc758 \ubb38\uc11c\ub3c4 \ud55c \ubc88\uc5d0 \uc784\ubca0\ub529 \ucc98\ub9ac\uac00 \uac00\ub2a5\ud574\uc84c\ub2e4.</p>"},{"location":"ai/XGEN-2.0-%EC%9E%84%EB%B2%A0%EB%94%A9-%EC%A0%84%EC%9A%A9-%EC%84%9C%EB%B2%84%EC%99%80-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EC%B5%9C%EC%A0%81%ED%99%94/#3-model_type","title":"3. model_type \ud30c\ub77c\ubbf8\ud130 \ucd94\uac00","text":"<p>switch-backend API\uc5d0 <code>model_type</code> \ud30c\ub77c\ubbf8\ud130\ub97c \ucd94\uac00\ud558\uc5ec \ud074\ub77c\uc774\uc5b8\ud2b8\uc5d0\uc11c \ubaa8\ub4dc\ub97c \uba85\uc2dc\uc801\uc73c\ub85c \uc9c0\uc815\ud560 \uc218 \uc788\ub3c4\ub85d \ud588\ub2e4:</p> <pre><code>@app.post(\"/switch-backend\")\nasync def switch_backend(\n    model_name: str,\n    model_type: Optional[str] = \"generation\"  # \"embedding\" \ub610\ub294 \"generation\"\n):\n    if model_type == \"embedding\":\n        await switch_to_embedding_mode(model_name)\n    else:\n        await switch_to_generation_mode(model_name)\n</code></pre>"},{"location":"ai/XGEN-2.0-%EC%9E%84%EB%B2%A0%EB%94%A9-%EC%A0%84%EC%9A%A9-%EC%84%9C%EB%B2%84%EC%99%80-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EC%B5%9C%EC%A0%81%ED%99%94/#health-check","title":"Health Check \uc2dc\uc2a4\ud15c \ud1b5\ud569","text":""},{"location":"ai/XGEN-2.0-%EC%9E%84%EB%B2%A0%EB%94%A9-%EC%A0%84%EC%9A%A9-%EC%84%9C%EB%B2%84%EC%99%80-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EC%B5%9C%EC%A0%81%ED%99%94/#gateway","title":"Gateway \ud638\ud658\uc131 \ud655\ubcf4","text":"<p>XGEN Backend Gateway\uc5d0\uc11c \ubaa8\ub378 \uc11c\ubc84\uc758 \uc0c1\ud0dc\ub97c \uccb4\ud06c\ud558\uae30 \uc704\ud55c \ud45c\uc900 \uc5d4\ub4dc\ud3ec\uc778\ud2b8\ub97c \ucd94\uac00\ud588\ub2e4:</p> <pre><code># \uae30\uc874 \uc5d4\ub4dc\ud3ec\uc778\ud2b8\n@app.get(\"/health\")\nasync def health_check():\n    return {\"status\": \"healthy\"}\n\n# Gateway \ud638\ud658 \uc5d4\ub4dc\ud3ec\uc778\ud2b8 \ucd94\uac00\n@app.get(\"/management/health\") \n@app.get(\"/api/management/health\")\nasync def management_health():\n    return {\n        \"status\": \"healthy\",\n        \"server_mode\": current_server_mode,\n        \"loaded_model\": current_model_name,\n        \"gpu_memory_usage\": get_gpu_memory_info()\n    }\n</code></pre> <p>\uc774\ub85c \uc778\ud574 Istio Service Mesh\uc758 Health Check\uc640\ub3c4 \uc790\uc5f0\uc2a4\ub7fd\uac8c \uc5f0\ub3d9\ub418\uc5b4, K3s \ud074\ub7ec\uc2a4\ud130\uc5d0\uc11c\uc758 \uc790\ub3d9 \uc7a5\uc560 \ubcf5\uad6c\uac00 \uac00\ub2a5\ud574\uc84c\ub2e4.</p>"},{"location":"ai/XGEN-2.0-%EC%9E%84%EB%B2%A0%EB%94%A9-%EC%A0%84%EC%9A%A9-%EC%84%9C%EB%B2%84%EC%99%80-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EC%B5%9C%EC%A0%81%ED%99%94/#_5","title":"\uc131\ub2a5 \ucd5c\uc801\ud654 \uacb0\uacfc","text":""},{"location":"ai/XGEN-2.0-%EC%9E%84%EB%B2%A0%EB%94%A9-%EC%A0%84%EC%9A%A9-%EC%84%9C%EB%B2%84%EC%99%80-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EC%B5%9C%EC%A0%81%ED%99%94/#1_1","title":"1. \uc784\ubca0\ub529 \ucc98\ub9ac \uc18d\ub3c4 \uac1c\uc120","text":"<p>\ub300\uc6a9\ub7c9 \ubb38\uc11c \uc784\ubca0\ub529 \ucc98\ub9ac \uc2dc\uac04 \ube44\uad50:</p> <pre><code># 10MB PDF \ubb38\uc11c (\uc57d 300\ud398\uc774\uc9c0) \uc784\ubca0\ub529\n# Before (Generation Mode): 45\ucd08\n# After (Embedding Mode): 12\ucd08\n\n# \ubca4\uce58\ub9c8\ud06c: 3.75\ubc30 \uc131\ub2a5 \ud5a5\uc0c1\n</code></pre>"},{"location":"ai/XGEN-2.0-%EC%9E%84%EB%B2%A0%EB%94%A9-%EC%A0%84%EC%9A%A9-%EC%84%9C%EB%B2%84%EC%99%80-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EC%B5%9C%EC%A0%81%ED%99%94/#2_1","title":"2. \ubc30\uce58 \ucc98\ub9ac \ud6a8\uc728\uc131","text":"<p>\ubc30\uce58 \ud06c\uae30 \uc99d\uac00\ub85c \uc778\ud55c GPU \ud65c\uc6a9\ub960 \uac1c\uc120:</p> <ul> <li>Before (512 batch): GPU \uc0ac\uc6a9\ub960 65-70%</li> <li>After (2048 batch): GPU \uc0ac\uc6a9\ub960 85-90%</li> </ul> <p>\ud2b9\ud788 \uae34 \ubb38\uc11c\uc758 \uccad\ud0b9 \uc5c6\uc774 \uc804\uccb4 \uc784\ubca0\ub529\uc774 \uac00\ub2a5\ud574\uc838, \ubb38\ub9e5 \uc815\ubcf4 \uc190\uc2e4\uc774 \ud06c\uac8c \uc904\uc5b4\ub4e4\uc5c8\ub2e4.</p>"},{"location":"ai/XGEN-2.0-%EC%9E%84%EB%B2%A0%EB%94%A9-%EC%A0%84%EC%9A%A9-%EC%84%9C%EB%B2%84%EC%99%80-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EC%B5%9C%EC%A0%81%ED%99%94/#3","title":"3. \uba54\ubaa8\ub9ac \ud6a8\uc728\uc131","text":"<p>\ubaa8\ub4dc\ubcc4 \ud2b9\ud654\ub85c \uc778\ud55c \uba54\ubaa8\ub9ac \uc0ac\uc6a9 \ud328\ud134 \ucd5c\uc801\ud654:</p> <pre><code># Embedding Mode \uba54\ubaa8\ub9ac \uad00\ub9ac\nclass EmbeddingMemoryManager:\n    def __init__(self):\n        # KV \uce90\uc2dc \ubd88\ud544\uc694, \uc2dc\ud000\uc2a4 \ucc98\ub9ac\uc5d0 \uc9d1\uc911\n        self.max_sequence_length = 32768\n        self.enable_kv_cache = False\n\n    def optimize_for_long_sequences(self):\n        # \uae34 \uc2dc\ud000\uc2a4 \ucc98\ub9ac\ub97c \uc704\ud55c \uba54\ubaa8\ub9ac \ud560\ub2f9 \uc804\ub7b5\n        torch.cuda.empty_cache()\n        return allocate_sequence_memory()\n</code></pre>"},{"location":"ai/XGEN-2.0-%EC%9E%84%EB%B2%A0%EB%94%A9-%EC%A0%84%EC%9A%A9-%EC%84%9C%EB%B2%84%EC%99%80-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EC%B5%9C%EC%A0%81%ED%99%94/#_6","title":"\uc6b4\uc601 \ud658\uacbd\uc5d0\uc11c\uc758 \ud65c\uc6a9","text":""},{"location":"ai/XGEN-2.0-%EC%9E%84%EB%B2%A0%EB%94%A9-%EC%A0%84%EC%9A%A9-%EC%84%9C%EB%B2%84%EC%99%80-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EC%B5%9C%EC%A0%81%ED%99%94/#1-rag","title":"1. RAG \ud30c\uc774\ud504\ub77c\uc778 \ucd5c\uc801\ud654","text":"<p>XGEN Documents \uc11c\ube44\uc2a4\uc5d0\uc11c \ub300\uc6a9\ub7c9 PDF, DOCX \ud30c\uc77c \ucc98\ub9ac \uc2dc:</p> <pre><code># \ubb38\uc11c \uc784\ubca0\ub529 \ucc98\ub9ac \ud50c\ub85c\uc6b0\nasync def process_large_document(document_path: str):\n    # 1. \uc784\ubca0\ub529 \ubaa8\ub4dc\ub85c \uc804\ud658\n    await switch_to_embedding_mode(\"bge-m3\")\n\n    # 2. \ubb38\uc11c \uc804\uccb4 \uc784\ubca0\ub529 (\uccad\ud0b9 \uc5c6\uc774)\n    full_embedding = await embed_document(document_path)\n\n    # 3. \uc138\ubd80 \uccad\ud06c \uc784\ubca0\ub529 (\uac80\uc0c9 \ucd5c\uc801\ud654)\n    chunk_embeddings = await embed_chunks(document_chunks)\n\n    return {\n        \"full_embedding\": full_embedding,\n        \"chunk_embeddings\": chunk_embeddings\n    }\n</code></pre>"},{"location":"ai/XGEN-2.0-%EC%9E%84%EB%B2%A0%EB%94%A9-%EC%A0%84%EC%9A%A9-%EC%84%9C%EB%B2%84%EC%99%80-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EC%B5%9C%EC%A0%81%ED%99%94/#2_2","title":"2. \uc790\ub3d9 \ubaa8\ub4dc \uc2a4\ucf00\uc904\ub9c1","text":"<p>\uc2dc\uac04\ub300\ubcc4\ub85c \uc790\ub3d9\uc73c\ub85c \ubaa8\ub4dc\ub97c \uc804\ud658\ud558\ub294 \uc2a4\ucf00\uc904\ub7ec\ub3c4 \uad6c\ud604\ud588\ub2e4:</p> <pre><code># \uc0c8\ubcbd \uc2dc\uac04: \uc784\ubca0\ub529 \ubc30\uce58 \uc791\uc5c5\n# 08:00-18:00: \uc0dd\uc131 \ubaa8\ub4dc (\ub300\ud654\ud615 \uc11c\ube44\uc2a4)\n# 18:00-24:00: \ud63c\ud569 \ubaa8\ub4dc (\uc694\uccad\uc5d0 \ub530\ub77c \ub3d9\uc801 \uc804\ud658)\n\n@scheduler.scheduled_job('cron', hour=2)\nasync def nightly_embedding_batch():\n    await switch_to_embedding_mode()\n    await process_pending_documents()\n\n@scheduler.scheduled_job('cron', hour=8)  \nasync def morning_switch_to_generation():\n    await switch_to_generation_mode()\n</code></pre>"},{"location":"ai/XGEN-2.0-%EC%9E%84%EB%B2%A0%EB%94%A9-%EC%A0%84%EC%9A%A9-%EC%84%9C%EB%B2%84%EC%99%80-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EC%B5%9C%EC%A0%81%ED%99%94/#_7","title":"\uae30\uc220\uc801 \ub3c4\uc804\uacfc \ud574\uacb0","text":""},{"location":"ai/XGEN-2.0-%EC%9E%84%EB%B2%A0%EB%94%A9-%EC%A0%84%EC%9A%A9-%EC%84%9C%EB%B2%84%EC%99%80-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EC%B5%9C%EC%A0%81%ED%99%94/#1_2","title":"1. \ubaa8\ub378 \uc804\ud658 \uc2dc \uba54\ubaa8\ub9ac \uc815\ub9ac","text":"<p>\ubaa8\ub4dc \uc804\ud658 \uc2dc \uc774\uc804 \ubaa8\ub378\uc758 GPU \uba54\ubaa8\ub9ac\ub97c \uc644\uc804\ud788 \uc815\ub9ac\ud558\ub294 \uac83\uc774 \uc911\uc694\ud588\ub2e4:</p> <pre><code>async def clean_switch_backend():\n    # 1. \ud604\uc7ac \ubaa8\ub378 \uc5b8\ub85c\ub4dc\n    if current_model:\n        del current_model\n\n    # 2. GPU \uba54\ubaa8\ub9ac \uac15\uc81c \uc815\ub9ac\n    torch.cuda.empty_cache()\n    torch.cuda.synchronize()\n\n    # 3. \uac00\ube44\uc9c0 \uceec\ub809\uc158\n    gc.collect()\n\n    # 4. \uc0c8 \ubaa8\ub378 \ub85c\ub4dc\n    new_model = await load_model_with_mode(target_mode)\n</code></pre>"},{"location":"ai/XGEN-2.0-%EC%9E%84%EB%B2%A0%EB%94%A9-%EC%A0%84%EC%9A%A9-%EC%84%9C%EB%B2%84%EC%99%80-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EC%B5%9C%EC%A0%81%ED%99%94/#2_3","title":"2. \ub3d9\uc2dc \uc694\uccad \ucc98\ub9ac","text":"<p>\uc784\ubca0\ub529 \ubaa8\ub4dc\uc5d0\uc11c\ub3c4 \uc5ec\ub7ec \ubb38\uc11c\ub97c \ub3d9\uc2dc \ucc98\ub9ac\ud560 \uc218 \uc788\ub3c4\ub85d \ube44\ub3d9\uae30 \ud050\ub97c \uad6c\ud604\ud588\ub2e4:</p> <pre><code>from asyncio import Queue, create_task\n\nclass EmbeddingQueue:\n    def __init__(self, max_concurrent=4):\n        self.queue = Queue()\n        self.max_concurrent = max_concurrent\n        self.workers = []\n\n    async def start_workers(self):\n        for i in range(self.max_concurrent):\n            worker = create_task(self._worker())\n            self.workers.append(worker)\n</code></pre>"},{"location":"ai/XGEN-2.0-%EC%9E%84%EB%B2%A0%EB%94%A9-%EC%A0%84%EC%9A%A9-%EC%84%9C%EB%B2%84%EC%99%80-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EC%B5%9C%EC%A0%81%ED%99%94/#_8","title":"\uacb0\ub860","text":"<p>XGEN 2.0\uc758 switch-backend\uc640 \ubc30\uce58 \ucc98\ub9ac \ucd5c\uc801\ud654\ub294 \ub2e8\uc77c GPU\uc5d0\uc11c \ucd5c\ub300 \ud6a8\uc728\uc744 \ubf51\uc544\ub0b4\ub294 \uc5d4\uc9c0\ub2c8\uc5b4\ub9c1\uc758 \uc815\uc218\uc600\ub2e4.</p> <p>\ud2b9\ud788 \uc784\ubca0\ub529 \ubaa8\ub4dc \ub3c4\uc785\uc73c\ub85c: - \ub300\uc6a9\ub7c9 \ubb38\uc11c \ucc98\ub9ac \uc131\ub2a5 3.75\ubc30 \ud5a5\uc0c1 - GPU \uc0ac\uc6a9\ub960 20%p \uac1c\uc120 (70% \u2192 90%) - \ubb38\ub9e5 \uc815\ubcf4 \uc190\uc2e4 80% \uac10\uc18c (\uccad\ud0b9 \ucd5c\uc18c\ud654)</p> <p>\uc774\ub7ec\ud55c \ucd5c\uc801\ud654\ub294 XGEN 2.0\uac00 \uc5d4\ud130\ud504\ub77c\uc774\uc988 \ud658\uacbd\uc5d0\uc11c \ub300\uc6a9\ub7c9 \ubb38\uc11c\ub97c \uc2e4\uc2dc\uac04\uc73c\ub85c \ucc98\ub9ac\ud560 \uc218 \uc788\ub294 \uae30\ubc18\uc774 \ub418\uc5c8\uace0, \ud5a5\ud6c4 \uba40\ud2f0 GPU \ud658\uacbd\uc73c\ub85c\uc758 \ud655\uc7a5\uc5d0\ub3c4 \uc911\uc694\ud55c \uc124\uacc4 \uae30\ubc18\uc744 \uc81c\uacf5\ud588\ub2e4.</p> <p>\uc8fc\uc694 \ud0a4\uc6cc\ub4dc: \uc784\ubca0\ub529 \ucd5c\uc801\ud654, \ubc30\uce58 \ucc98\ub9ac, GPU \uba54\ubaa8\ub9ac, switch-backend, RAG \ud30c\uc774\ud504\ub77c\uc778, \ub300\uc6a9\ub7c9 \ubb38\uc11c \ucc98\ub9ac</p>"},{"location":"ai/BERT/Query%2C%20Key%2C%20Value%20%ED%96%89%EB%A0%AC%EC%9D%80%20%EC%96%B4%EB%96%BB%EA%B2%8C%20%EC%83%9D%EC%84%B1%ED%95%98%EB%8A%94%EA%B0%80%3F/","title":"Query, Key, Value \ud589\ub82c\uc740 \uc5b4\ub5bb\uac8c \uc0dd\uc131\ud558\ub294\uac00?","text":""},{"location":"ai/BERT/Query%2C%20Key%2C%20Value%20%ED%96%89%EB%A0%AC%EC%9D%80%20%EC%96%B4%EB%96%BB%EA%B2%8C%20%EC%83%9D%EC%84%B1%ED%95%98%EB%8A%94%EA%B0%80%3F/#1","title":"1. \uc785\ub825 \uc784\ubca0\ub529 \ud655\ubcf4 \ub2e8\uacc4","text":"<ul> <li>\ubb38\uc7a5\uc758 \uac01 \ud1a0\ud070\uc744 \uc784\ubca0\ub529 \ubca1\ud130\ub85c \ubcc0\ud658\ud55c \ub4a4, \uc704\uce58 \uc778\ucf54\ub529\uc744 \ub354\ud574 \uc785\ub825 \ud589\ub82c X\ub97c \uc900\ube44\ud55c\ub2e4.  </li> <li>X\uc758 \ud06c\uae30\ub294 <code>n \u00d7 d_model</code>\uc774\uba70, n\uc740 \ud1a0\ud070 \uc218, d_model\uc740 \ubaa8\ub378 \ucc28\uc6d0\uc774\ub2e4.</li> </ul>"},{"location":"ai/BERT/Query%2C%20Key%2C%20Value%20%ED%96%89%EB%A0%AC%EC%9D%80%20%EC%96%B4%EB%96%BB%EA%B2%8C%20%EC%83%9D%EC%84%B1%ED%95%98%EB%8A%94%EA%B0%80%3F/#2","title":"2. \uc804\uc6a9 \uac00\uc911\uce58 \ud589\ub82c \uc815\uc758 \ub2e8\uacc4","text":"<ul> <li>\ucffc\ub9ac\u00b7\ud0a4\u00b7\ubc38\ub958 \uac01\uac01\uc5d0 \ub300\uc751\ud558\ub294 \uac00\uc911\uce58 \ud589\ub82c <code>W_Q</code>, <code>W_K</code>, <code>W_V</code>\ub97c \ud559\uc2b5 \uac00\ub2a5\ud55c \ud30c\ub77c\ubbf8\ud130\ub85c \ucd08\uae30\ud654\ud55c\ub2e4.  </li> <li>\uc77c\ubc18\uc801\uc778 \ud06c\uae30\ub294 <code>d_model \u00d7 d_h</code>\uc774\uba70, <code>d_h</code>\ub294 \ud5e4\ub4dc\ubcc4 \ucc28\uc6d0\uc774\ub2e4.</li> </ul>"},{"location":"ai/BERT/Query%2C%20Key%2C%20Value%20%ED%96%89%EB%A0%AC%EC%9D%80%20%EC%96%B4%EB%96%BB%EA%B2%8C%20%EC%83%9D%EC%84%B1%ED%95%98%EB%8A%94%EA%B0%80%3F/#3","title":"3. \uc120\ud615 \ud22c\uc601 \uc218\ud589 \ub2e8\uacc4","text":"<ul> <li>\uc785\ub825 \ud589\ub82c X\uc5d0 \uac01 \uac00\uc911\uce58 \ud589\ub82c\uc744 \uacf1\ud574 \uc138 \uac1c\uc758 \ud589\ub82c\uc744 \uc5bb\ub294\ub2e4.  </li> <li><code>Q = X \u00b7 W_Q</code> </li> <li><code>K = X \u00b7 W_K</code> </li> <li><code>V = X \u00b7 W_V</code> </li> <li>\uc774 \uc5f0\uc0b0\uc740 \uc644\uc804\uc5f0\uacb0\uce35\uacfc \ub3d9\uc77c\ud558\uba70 GPU \ubcd1\ub82c\ud654\uac00 \uc6a9\uc774\ud558\ub2e4.</li> </ul>"},{"location":"ai/BERT/Query%2C%20Key%2C%20Value%20%ED%96%89%EB%A0%AC%EC%9D%80%20%EC%96%B4%EB%96%BB%EA%B2%8C%20%EC%83%9D%EC%84%B1%ED%95%98%EB%8A%94%EA%B0%80%3F/#4","title":"4. \uba40\ud2f0 \ud5e4\ub4dc \ubd84\ud560 \ub2e8\uacc4","text":"<ul> <li>\ud45c\ud604 \ub2e4\uc591\uc131\uc744 \uc704\ud574 <code>h</code>\uac1c\uc758 \ud5e4\ub4dc\ub85c \ubd84\ub9ac\ud55c\ub2e4.  </li> <li>\uad6c\ud604 \ubc29\uc2dd  </li> <li>\ubcd1\ud569 \ubc29\uc2dd: \ud55c \ubc88\uc758 \ud589\ub82c \uacf1\uc73c\ub85c <code>Q</code>, <code>K</code>, <code>V</code>\ub97c <code>n \u00d7 (h\u00b7d_k)</code> \ud06c\uae30\ub85c \ub9cc\ub4e0 \ub4a4 \ub9c8\uc9c0\ub9c9 \ucc28\uc6d0\uc744 <code>(h, d_k)</code>\ub85c \ub9ac\uc250\uc774\ud504\ud55c\ub2e4.  </li> <li>\ubd84\ub9ac \ubc29\uc2dd: \ud5e4\ub4dc\ub9c8\ub2e4 \uace0\uc720\ud55c <code>(W_{Q_i}, W_{K_i}, W_{V_i})</code>\ub97c \ub450\uace0 \ub3c5\ub9bd\uc801\uc73c\ub85c \ud22c\uc601\ud55c\ub2e4.</li> </ul>"},{"location":"ai/BERT/Query%2C%20Key%2C%20Value%20%ED%96%89%EB%A0%AC%EC%9D%80%20%EC%96%B4%EB%96%BB%EA%B2%8C%20%EC%83%9D%EC%84%B1%ED%95%98%EB%8A%94%EA%B0%80%3F/#5","title":"5. \ud559\uc2b5\uacfc \uc5c5\ub370\uc774\ud2b8 \ub2e8\uacc4","text":"<ul> <li><code>W_Q</code>, <code>W_K</code>, <code>W_V</code>\ub294 \uc5ed\uc804\ud30c\ub97c \ud1b5\ud574 \uc190\uc2e4 \ud568\uc218\uc758 \uadf8\ub798\ub514\uc5b8\ud2b8\ub97c \ubc1b\uc544 \uc9c0\uc18d\uc801\uc73c\ub85c \uac31\uc2e0\ub41c\ub2e4.  </li> <li>\uc635\ud2f0\ub9c8\uc774\uc800(\uc608: AdamW)\uac00 \uac00\uc911\uce58\ub97c \uc870\uc815\ud558\uc5ec \ud1a0\ud070 \uac04 \uc758\ubbf8 \uad00\uacc4\ub97c \ub0b4\uc7ac\ud654\ud55c\ub2e4.</li> </ul> <p>\uc704 \uc808\ucc28\ub97c \ud1b5\ud574 \uc0dd\uc131\ub41c Q, K, V \ud589\ub82c\uc740 \uc774\ud6c4 \uc2a4\ucf00\uc77c\ub4dc \ub2f7 \ud504\ub85c\ub355\ud2b8 \uc5b4\ud150\uc158\uc5d0 \uc785\ub825\ub418\uc5b4 \ubb38\ub9e5 \uc815\ubcf4\ub97c \uacc4\uc0b0\ud558\uac8c \ub41c\ub2e4.</p>"},{"location":"ai/BERT/Scaled%20Dot-Product%20Attention%20%EB%A5%BC%20%EC%A0%95%EC%9D%98%ED%95%98%EC%8B%9C%EC%98%A4./","title":"Scaled Dot Product Attention \ub97c \uc815\uc758\ud558\uc2dc\uc624.","text":"<p>\uc2a4\ucf00\uc77c\ub4dc \ub2f7 \ud504\ub85c\ub355\ud2b8 \uc5b4\ud150\uc158\uc740 \ucffc\ub9ac(Query), \ud0a4(Key), \ubc38\ub958(Value) \uc0bc\uc911 \uad6c\uc870\ub97c \uc0ac\uc6a9\ud574, \uc720\uc0ac\ub3c4 \uacc4\uc0b0 \u2192 \uc2a4\ucf00\uc77c \uc870\uc815 \u2192 \ud655\ub960 \uc815\uaddc\ud654 \u2192 \uac00\uc911\ud569\uc758 \ub124 \ub2e8\uacc4\ub97c \uac70\uccd0 \ubb38\ub9e5 \uc815\ubcf4\ub97c \ucd94\ucd9c\ud558\ub294 \uc5b4\ud150\uc158 \uba54\ucee4\ub2c8\uc998\uc774\ub2e4. </p> <p>\ud2b8\ub79c\uc2a4\ud3ec\uba38 \uacc4\uc5f4 \ubaa8\ub378\uc5d0\uc11c \uae30\ubcf8 \ube14\ub85d\uc73c\ub85c \ucc44\ud0dd\ub418\ub294 \uc774\uc720\ub294 \uacc4\uc0b0 \ud6a8\uc728\uc131\uacfc \ubcd1\ub82c\ud654 \uc6a9\uc774\uc131\uc5d0 \uc788\ub2e4.</p>"},{"location":"ai/BERT/Scaled%20Dot-Product%20Attention%20%EB%A5%BC%20%EC%A0%95%EC%9D%98%ED%95%98%EC%8B%9C%EC%98%A4./#1","title":"1. \uc785\ub825 \uad6c\uc131 \ub2e8\uacc4","text":"<ul> <li> <p>\uc785\ub825 \uc2dc\ud000\uc2a4\uc758 \uac01 \ud1a0\ud070 \uc784\ubca0\ub529\uc744 \ucffc\ub9ac, \ud0a4, \ubc38\ub958\ub85c \ub3c5\ub9bd \ud22c\uc601\ud55c\ub2e4.</p> </li> <li> <p>\ucffc\ub9ac\ub294 \u201c\uc9c8\ubb38\uc790\u201d, \ud0a4\ub294 \u201c\ud6c4\ubcf4 \ub2f5\ubcc0\uc790\u201d, \ubc38\ub958\ub294 \u201c\uc2e4\uc81c \ub2f5\ubcc0 \ub0b4\uc6a9\u201d \uc5ed\ud560\uc744 \ub2f4\ub2f9\ud55c\ub2e4.</p> </li> </ul>"},{"location":"ai/BERT/Scaled%20Dot-Product%20Attention%20%EB%A5%BC%20%EC%A0%95%EC%9D%98%ED%95%98%EC%8B%9C%EC%98%A4./#2-dot-product","title":"2. Dot-Product \uc720\uc0ac\ub3c4 \uacc4\uc0b0 \ub2e8\uacc4","text":"<ul> <li> <p>\ud55c \ud1a0\ud070\uc758 \ucffc\ub9ac\uc640 \ubaa8\ub4e0 \ud1a0\ud070\uc758 \ud0a4 \uac04\uc5d0 \ub0b4\uc801(\ub2f7 \ud504\ub85c\ub355\ud2b8)\uc744 \uc218\ud589\ud574 \uc720\uc0ac\ub3c4 \ud589\ub82c\uc744 \ub9cc\ub4e0\ub2e4.</p> </li> <li> <p>\ub0b4\uc801\uc740 \ub450 \ubca1\ud130\uc758 \ubc29\ud5a5 \uc720\uc0ac\ub3c4\ub97c \ub2e8\uc77c \uc22b\uc790\ub85c \ube60\ub974\uac8c \ud658\uc0b0\ud558\ubbc0\ub85c, \ub300\uaddc\ubaa8 \uc2dc\ud000\uc2a4\uc5d0\uc11c \ud6a8\uc728\uc801\uc774\ub2e4.</p> </li> </ul>"},{"location":"ai/BERT/Scaled%20Dot-Product%20Attention%20%EB%A5%BC%20%EC%A0%95%EC%9D%98%ED%95%98%EC%8B%9C%EC%98%A4./#3","title":"3. \uc2a4\ucf00\uc77c\ub9c1 \ub2e8\uacc4","text":"<ul> <li> <p>\ud0a4 \ubca1\ud130 \ucc28\uc6d0\uc758 \uc81c\uacf1\uadfc\uc73c\ub85c \uc720\uc0ac\ub3c4 \uac12\uc744 \ub098\ub204\uc5b4 \uc2a4\ucf00\uc77c\uc744 \uc870\uc815\ud55c\ub2e4.</p> </li> <li> <p>\ucc28\uc6d0\uc774 \ud074\uc218\ub85d \ub0b4\uc801\uac12\uc774 \uacfc\ub3c4\ud558\uac8c \ucee4\uc838 \uc18c\ud504\ud2b8\ub9e5\uc2a4\uac00 \ud55c\ub450 \ud56d\ubaa9\uc5d0\ub9cc \uce58\uc6b0\uce58\ub294 \ud604\uc0c1\uc774 \uc0dd\uae30\ubbc0\ub85c, \uc774\ub97c \ubc29\uc9c0\ud574 \ud559\uc2b5 \uc548\uc815\uc131\uc744 \ub192\uc778\ub2e4.</p> </li> </ul>"},{"location":"ai/BERT/Scaled%20Dot-Product%20Attention%20%EB%A5%BC%20%EC%A0%95%EC%9D%98%ED%95%98%EC%8B%9C%EC%98%A4./#4","title":"4. \uc18c\ud504\ud2b8\ub9e5\uc2a4 \uc815\uaddc\ud654 \ub2e8\uacc4","text":"<ul> <li> <p>\uc2a4\ucf00\uc77c\ub9c1\ub41c \uc720\uc0ac\ub3c4 \ud589\ub82c\uc5d0 \uc18c\ud504\ud2b8\ub9e5\uc2a4\ub97c \uc801\uc6a9\ud574 \uac01 \ud589\uc774 0~1 \ud655\ub960 \ubd84\ud3ec\uac00 \ub418\ub3c4\ub85d \ub9cc\ub4e0\ub2e4.</p> </li> <li> <p>\uacb0\uacfc \ubd84\ud3ec\ub294 \u201c\uac01 \ud1a0\ud070\uc774 \ub2e4\ub978 \ud1a0\ud070\uc5d0 \uc5bc\ub9c8\ub9cc\ud07c \uc8fc\ubaa9\ud560\uc9c0\u201d\ub97c \ub098\ud0c0\ub0b4\ub294 \uac00\uc911\uce58 \uc5ed\ud560\uc744 \ud55c\ub2e4.</p> </li> </ul>"},{"location":"ai/BERT/Scaled%20Dot-Product%20Attention%20%EB%A5%BC%20%EC%A0%95%EC%9D%98%ED%95%98%EC%8B%9C%EC%98%A4./#5","title":"5. \uac00\uc911\ud569 \ub2e8\uacc4","text":"<ul> <li> <p>\uc815\uaddc\ud654\ub41c \uac00\uc911\uce58\ub97c \ubc38\ub958 \ubca1\ud130\uc5d0 \uacf1\ud574 \uac00\uc911\ud569\uc744 \uc218\ud589\ud55c\ub2e4.</p> </li> <li> <p>\uc774 \uac00\uc911\ud569 \uacb0\uacfc\uac00 \ubc14\ub85c \uac01 \ud1a0\ud070\uc774 \uc2dc\ud000\uc2a4 \uc804\uccb4 \ubb38\ub9e5\uc744 \ubc18\uc601\ud574 \uc0c8\ub85c \uc5bb\uc740 \ud45c\ud604(\uc5b4\ud150\uc158 \uacb0\uacfc)\uc774\ub2e4.</p> </li> </ul>"},{"location":"ai/BERT/Scaled%20Dot-Product%20Attention%20%EB%A5%BC%20%EC%A0%95%EC%9D%98%ED%95%98%EC%8B%9C%EC%98%A4./#_1","title":"\ud575\uc2ec \ud2b9\uc9d5 \uc815\ub9ac","text":"\uad6c\ubd84 \ubaa9\uc801 \ud6a8\uacfc \ub2f7 \ud504\ub85c\ub355\ud2b8 \ud1a0\ud070 \uac04 \uc720\uc0ac\ub3c4 \uc0b0\ucd9c \uacc4\uc0b0\ub7c9\uc774 \uc791\uace0 GPU \ubcd1\ub82c\ud654\uc5d0 \uc801\ud569\ud558\ub2e4 \uc2a4\ucf00\uc77c\ub9c1 \ud070 \ucc28\uc6d0\uc5d0\uc11c\uc758 \uac12 \ud3ed\uc8fc \ubc29\uc9c0 \uadf8\ub798\ub514\uc5b8\ud2b8 \uc548\uc815\uc131 \ud655\ubcf4 \uc18c\ud504\ud2b8\ub9e5\uc2a4 \uac00\uc911\uce58 \ud655\ub960 \ubd84\ud3ec\ud654 \uc9c1\uad00\uc801 \ud574\uc11d\u00b7\uc5ed\uc804\ud30c \uc6a9\uc774 \ubc38\ub958 \uac00\uc911\ud569 \ubb38\ub9e5 \uc815\ubcf4 \uacb0\ud569 \uc785\ub825 \ud1a0\ud070\uc744 \ubb38\ub9e5 \uae30\ubc18\uc73c\ub85c \uc7ac\ud45c\ud604 <p>\uc2a4\ucf00\uc77c\ub4dc \ub2f7 \ud504\ub85c\ub355\ud2b8 \uc5b4\ud150\uc158\uc740 \uc774\ub807\ub4ef \u201c\uc720\uc0ac\ub3c4 \uce21\uc815 \u2192 \uc2a4\ucf00\uc77c \uc870\uc815 \u2192 \ud655\ub960\ud654 \u2192 \ubb38\ub9e5 \ud1b5\ud569\u201d\uc758 \uba85\ud655\ud55c \uc808\ucc28\ub97c \ud1b5\ud574, \uc785\ub825 \uc2dc\ud000\uc2a4 \ub0b4\ubd80 \uad00\uacc4\ub97c \ud6a8\uacfc\uc801\uc73c\ub85c \ubaa8\ub378\ub9c1\ud558\ub294 \ud575\uc2ec \uad6c\uc131 \uc694\uc18c\uc774\ub2e4.</p>"},{"location":"ai/BERT/%EC%85%80%ED%94%84%20%EC%96%B4%ED%85%90%EC%85%98%EC%9D%98%20%EC%A0%84%EC%B2%B4%20%EB%8B%A8%EA%B3%84%EB%A5%BC%20%EC%84%A4%EB%AA%85%ED%95%98%EB%9D%BC/","title":"\uc140\ud504 \uc5b4\ud150\uc158\uc758 \uc804\uccb4 \ub2e8\uacc4\ub97c \uc124\uba85\ud558\ub77c","text":""},{"location":"ai/BERT/%EC%85%80%ED%94%84%20%EC%96%B4%ED%85%90%EC%85%98%EC%9D%98%20%EC%A0%84%EC%B2%B4%20%EB%8B%A8%EA%B3%84%EB%A5%BC%20%EC%84%A4%EB%AA%85%ED%95%98%EB%9D%BC/#_1","title":"\uc140\ud504 \uc5b4\ud150\uc158, \uc65c \uc911\uc694\ud55c\uac00","text":"<p>\uc140\ud504 \uc5b4\ud150\uc158\uc740 \uc785\ub825 \uc2dc\ud000\uc2a4 \ub0b4\ubd80\uc5d0\uc11c \uac01 \ud1a0\ud070\uc774 \ub2e4\ub978 \ubaa8\ub4e0 \ud1a0\ud070\uacfc\uc758 \uad00\uacc4\ub97c \ud559\uc2b5\ud574 \ubb38\ub9e5 \uc815\ubcf4\ub97c \uc7ac\uad6c\uc131\ud558\ub294 \uba54\ucee4\ub2c8\uc998\uc774\ub2e4. \uc774 \uacfc\uc815\uc744 \uac70\uce5c \ucd9c\ub825\uc740 \uc774\ud6c4 \ud53c\ub4dc\ud3ec\uc6cc\ub4dc \ub124\ud2b8\uc6cc\ud06c\ub098 \ub2e4\uc74c \ub808\uc774\uc5b4\ub85c \uc804\ub2ec\ub418\uc5b4 \ubb38\uc7a5 \uc218\uc900\uc758 \uc758\ubbf8\ub97c \uc815\uad50\ud558\uac8c \ud45c\ud604\ud558\uac8c \ub41c\ub2e4.</p>"},{"location":"ai/BERT/%EC%85%80%ED%94%84%20%EC%96%B4%ED%85%90%EC%85%98%EC%9D%98%20%EC%A0%84%EC%B2%B4%20%EB%8B%A8%EA%B3%84%EB%A5%BC%20%EC%84%A4%EB%AA%85%ED%95%98%EB%9D%BC/#0-querykeyvalue","title":"0\ub2e8\uacc4. \ucffc\ub9ac(Query)\u00b7\ud0a4(Key)\u00b7\ubc38\ub958(Value) \ucd94\ucd9c \ub2e8\uacc4","text":"<ul> <li> <p>\ubb34\uc5c7\uc744 \ud558\ub294 \ub2e8\uacc4\uc778\uac00     \uc785\ub825 \uc784\ubca0\ub529\uc5d0 \uc138 \uc885\ub958\uc758 \uac00\uc911\uce58 \ud589\ub82c\uc744 \uacf1\ud574 \ucffc\ub9ac, \ud0a4, \ubc38\ub958 \ubca1\ud130\ub97c \uc0dd\uc131\ud558\ub294 \ub2e8\uacc4\uc774\ub2e4.</p> </li> <li> <p>\uc774 \ub2e8\uacc4\uac00 \ud544\uc694\ud55c \uc774\uc720     \uc140\ud504 \uc5b4\ud150\uc158\uc740 \u201c\uc9c8\ubb38\u00b7\ub2f5\ubcc0\u00b7\uc815\ubcf4\u201d\ub77c\ub294 \uc138 \uac00\uc9c0 \uad00\uc810\uc73c\ub85c \uc785\ub825\uc744 \ubc14\ub77c\ubcf8\ub2e4. \ucffc\ub9ac\ub294 \uc9c8\ubb38\uc790, \ud0a4\ub294 \uc9c8\ubb38\uc5d0 \uc751\ub2f5\ud560 \uc218 \uc788\ub294 \uc751\ub2f5\uc790, \ubc38\ub958\ub294 \uc2e4\uc81c \uc815\ubcf4\ub97c \ub2f4\ub294 \uc5ed\ud560\uc744 \ub2f4\ub2f9\ud55c\ub2e4. \uc774\ub807\uac8c \uc5ed\ud560\uc744 \ubd84\ub9ac\ud568\uc73c\ub85c\uc368 \ud1a0\ud070 \uac04 \uc0c1\ud638\uc791\uc6a9\uc744 \uc720\uc5f0\ud558\uac8c \ubaa8\ub378\ub9c1\ud560 \uc218 \uc788\ub2e4.</p> </li> <li> <p>\uacb0\uacfc     \ud1a0\ud070\ub9c8\ub2e4 \uc138 \uac1c\uc758 \ubca1\ud130\uac00 \uc0dd\uae30\uba70, \uc774\ud6c4 \ub2e8\uacc4\uc5d0\uc11c \uc0c1\ub300\uc801 \uc911\uc694\ub3c4\ub97c \uacc4\uc0b0\ud558\ub294 \uc7ac\ub8cc\uac00 \ub41c\ub2e4.</p> </li> </ul>"},{"location":"ai/BERT/%EC%85%80%ED%94%84%20%EC%96%B4%ED%85%90%EC%85%98%EC%9D%98%20%EC%A0%84%EC%B2%B4%20%EB%8B%A8%EA%B3%84%EB%A5%BC%20%EC%84%A4%EB%AA%85%ED%95%98%EB%9D%BC/#1","title":"1\ub2e8\uacc4. \ucffc\ub9ac\u2013\ud0a4 \ub0b4\uc801 \uc5f0\uc0b0 \ub2e8\uacc4","text":"<ul> <li> <p>\ubb34\uc5c7\uc744 \ud558\ub294 \ub2e8\uacc4\uc778\uac00     \ucffc\ub9ac \ubca1\ud130\uc640 \ubaa8\ub4e0 \ud0a4 \ubca1\ud130\uc758 \ub0b4\uc801\uc744 \uacc4\uc0b0\ud574 \uc720\uc0ac\ub3c4 \ud589\ub82c\uc744 \uc5bb\ub294 \ub2e8\uacc4\uc774\ub2e4.</p> </li> <li> <p>\ub0b4\uc801\uc744 \uc0ac\uc6a9\ud558\ub294 \uc774\uc720     \ub0b4\uc801\uc740 \ub450 \ubca1\ud130\uc758 \ubc29\ud5a5 \uc720\uc0ac\ub3c4(\ucf54\uc0ac\uc778 \uc720\uc0ac\ub3c4\uc5d0 \ube44\ub840)\ub97c \ube60\ub974\uac8c \uce21\uc815\ud560 \uc218 \uc788\ub294 \uacc4\uc0b0\ub7c9\uc774 \uc801\uc740 \uc5f0\uc0b0\uc774\ub2e4. \uac01 \ud1a0\ud070\uc774 \uc790\uc2e0\uacfc \ub2e4\ub978 \ud1a0\ud070 \uac04 \uc758\ubbf8\uc801 \uad00\ub828\ub3c4\ub97c \uc9c1\uad00\uc801\uc73c\ub85c \ud30c\uc545\ud560 \uc218 \uc788\uc73c\ubbc0\ub85c \uc5b4\ud150\uc158 \uac00\uc911\uce58\uc758 \uae30\ucd08 \uc790\ub8cc\ub85c \uc801\ud569\ud558\ub2e4.</p> </li> <li> <p>\uacb0\uacfc     \ud589\ub9c8\ub2e4 n\uac1c\uc758 \uc2a4\ucf54\uc5b4(\uac01 \ud1a0\ud070\uc774 \ub2e4\ub978 \ud1a0\ud070\uc744 \uc5bc\ub9c8\ub098 \ucc38\uace0\ud560\uc9c0\uc5d0 \ub300\ud55c \uc810\uc218)\ub97c \ud3ec\ud568\ud55c \ud589\ub82c\uc774 \ub9cc\ub4e4\uc5b4\uc9c4\ub2e4.</p> </li> </ul>"},{"location":"ai/BERT/%EC%85%80%ED%94%84%20%EC%96%B4%ED%85%90%EC%85%98%EC%9D%98%20%EC%A0%84%EC%B2%B4%20%EB%8B%A8%EA%B3%84%EB%A5%BC%20%EC%84%A4%EB%AA%85%ED%95%98%EB%9D%BC/#2-dk","title":"2\ub2e8\uacc4. \uc2a4\ucf00\uc77c\ub9c1(\u221adk\ub85c \ub098\ub204\uae30) \ub2e8\uacc4","text":"<ul> <li> <p>\ubb34\uc5c7\uc744 \ud558\ub294 \ub2e8\uacc4\uc778\uac00     \ub0b4\uc801 \uacb0\uacfc\ub97c \ud0a4 \ubca1\ud130 \ucc28\uc6d0\uc758 \uc81c\uacf1\uadfc \uac12\uc73c\ub85c \ub098\ub204\uc5b4 \uac12\uc744 \ucd95\uc18c\ud558\ub294 \ub2e8\uacc4\uc774\ub2e4.</p> </li> <li> <p>\ub098\ub204\ub294 \uc774\uc720     \ubca1\ud130 \ucc28\uc6d0\uc774 \ucee4\uc9c8\uc218\ub85d \ub0b4\uc801\uac12 \ubd84\ud3ec\uac00 \ub113\uc5b4\uc838 \uc18c\ud504\ud2b8\ub9e5\uc2a4 \uc785\ub825\uc774 \uacfc\ub3c4\ud558\uac8c \ucee4\uc9c8 \uc218 \uc788\ub2e4. \uac12\uc774 \ucee4\uc9c0\uba74 \uc18c\ud504\ud2b8\ub9e5\uc2a4\uac00 \ub9e4\uc6b0 \uc791\uc740 \uc601\uc5ed\uc5d0\uc11c\ub9cc \ubcc0\ud654\ud558\uc5ec \ud559\uc2b5\uc774 \ubd88\uc548\uc815\ud574\uc9c4\ub2e4. \ucc28\uc6d0\uc758 \uc81c\uacf1\uadfc\uc73c\ub85c \ub098\ub204\uba74 \uac12\uc758 \ubc94\uc704\ub97c \uc801\uc808\ud788 \uc881\ud600 \uadf8\ub798\ub514\uc5b8\ud2b8 \uc18c\uc2e4\u00b7\ud3ed\ubc1c \uc704\ud5d8\uc744 \uc904\uc77c \uc218 \uc788\ub2e4.</p> </li> <li> <p>\uacb0\uacfc     \uc218\uce58\uc801\uc73c\ub85c \uc548\uc815\uc801\uc778 \uc2a4\ucf54\uc5b4 \ud589\ub82c\uc744 \ub2e4\uc74c \ub2e8\uacc4\uc5d0 \uc804\ub2ec\ud560 \uc218 \uc788\ub2e4.</p> </li> </ul>"},{"location":"ai/BERT/%EC%85%80%ED%94%84%20%EC%96%B4%ED%85%90%EC%85%98%EC%9D%98%20%EC%A0%84%EC%B2%B4%20%EB%8B%A8%EA%B3%84%EB%A5%BC%20%EC%84%A4%EB%AA%85%ED%95%98%EB%9D%BC/#3","title":"3\ub2e8\uacc4. \uc18c\ud504\ud2b8\ub9e5\uc2a4 \uc815\uaddc\ud654 \ub2e8\uacc4","text":"<ul> <li> <p>\ubb34\uc5c7\uc744 \ud558\ub294 \ub2e8\uacc4\uc778\uac00     \uc2a4\ucf00\uc77c\ub9c1\ub41c \uc2a4\ucf54\uc5b4 \ud589\ub82c\uc758 \uac01 \ud589\uc5d0 \uc18c\ud504\ud2b8\ub9e5\uc2a4\ub97c \uc801\uc6a9\ud574 \ud655\ub960 \ubd84\ud3ec\ub85c \ubcc0\ud658\ud558\ub294 \ub2e8\uacc4\uc774\ub2e4.</p> </li> <li> <p>\uc18c\ud504\ud2b8\ub9e5\uc2a4\ub97c \uc0ac\uc6a9\ud558\ub294 \uc774\uc720     \uc18c\ud504\ud2b8\ub9e5\uc2a4\ub294 \uc74c\uc218\u00b7\uc591\uc218 \uac12\uc744 \ubaa8\ub450 0~1 \ubc94\uc704\uc758 \ud655\ub960\uac12\uc73c\ub85c \ubcc0\ud658\ud558\uace0, \ud589\ub9c8\ub2e4 \ucd1d\ud569\uc774 1\uc778 \ubd84\ud3ec\ub97c \ub9cc\ub4e0\ub2e4. \uc774\ub97c \ud1b5\ud574 \u201c\uc5b4\ub290 \ud1a0\ud070\uc5d0 \uc5bc\ub9c8\ub9cc\ud07c \uc9d1\uc911\ud560\uc9c0\u201d\ub97c \uc9c1\uad00\uc801\uc73c\ub85c \ud574\uc11d\ud560 \uc218 \uc788\uc73c\uba70, \uc5ed\uc804\ud30c \uc2dc \uc548\uc815\uc801 \uadf8\ub798\ub514\uc5b8\ud2b8\ub97c \ubcf4\uc7a5\ud55c\ub2e4.</p> </li> <li> <p>\uacb0\uacfc     \uac01 \ud1a0\ud070\uc774 \ub2e4\ub978 \ud1a0\ud070\uc5d0 \ubd80\uc5ec\ud560 \uc8fc\ubaa9\ub3c4\uac00 \uba85\ud655\ud55c \ud655\ub960 \ubd84\ud3ec \ud615\ud0dc\ub85c \uc644\uc131\ub41c\ub2e4.</p> </li> </ul>"},{"location":"ai/BERT/%EC%85%80%ED%94%84%20%EC%96%B4%ED%85%90%EC%85%98%EC%9D%98%20%EC%A0%84%EC%B2%B4%20%EB%8B%A8%EA%B3%84%EB%A5%BC%20%EC%84%A4%EB%AA%85%ED%95%98%EB%9D%BC/#4-z","title":"4\ub2e8\uacc4. \uc5b4\ud150\uc158 \uac00\uc911\ud569(Z) \uacc4\uc0b0 \ub2e8\uacc4","text":"<ul> <li> <p>\ubb34\uc5c7\uc744 \ud558\ub294 \ub2e8\uacc4\uc778\uac00     \uc18c\ud504\ud2b8\ub9e5\uc2a4\ub85c \uc5bb\uc740 \uac00\uc911\uce58\ub97c \ubc38\ub958 \ubca1\ud130\ub4e4\uc5d0 \uacf1\ud55c \ub4a4 \ud569\uc0b0\ud574 \ucd5c\uc885 \uc5b4\ud150\uc158 \ucd9c\ub825\uc744 \uc0dd\uc131\ud558\ub294 \ub2e8\uacc4\uc774\ub2e4.</p> </li> <li> <p>\uc774 \ub2e8\uacc4\uac00 \ud544\uc694\ud55c \uc774\uc720     \uac00\uc911\ud569 \uacb0\uacfc\ub294 \uac01 \ud1a0\ud070\uc774 \uc2dc\ud000\uc2a4 \uc804\ubc18\uc5d0\uc11c \uc5bb\uc740 \ubb38\ub9e5 \uc815\ubcf4\ub97c \ubc18\uc601\ud55c \uc0c8\ub85c\uc6b4 \ud45c\ud604\uc774\ub2e4. \uc774\ud6c4 \ub808\uc774\uc5b4\uc5d0\uc11c \uc774 \ud45c\ud604\uc744 \uc0ac\uc6a9\ud574 \ubb38\uc7a5 \uc758\ubbf8\ub97c \ub354\uc6b1 \uae4a\uc774 \uc788\uac8c \uc774\ud574\ud560 \uc218 \uc788\ub2e4.</p> </li> <li> <p>\uacb0\uacfc     \uc5b4\ud150\uc158 \ucd9c\ub825 Z\uac00 \uc0dd\uc131\ub418\uba70, \uc774\ub294 \uc794\ucc28 \uc5f0\uacb0\u00b7\ub808\uc774\uc5b4 \uc815\uaddc\ud654\ub97c \uac70\uccd0 \ub2e4\uc74c \uc11c\ube0c\ub808\uc774\uc5b4\ub098 \ub2e4\uc74c \ud2b8\ub79c\uc2a4\ud3ec\uba38 \ube14\ub85d\uc73c\ub85c \uc804\ub2ec\ub41c\ub2e4.</p> </li> </ul> <p>0\ub2e8\uacc4\uc5d0\uc11c \ucffc\ub9ac\u00b7\ud0a4\u00b7\ubc38\ub958\ub97c \ubd84\ub9ac \ud22c\uc601\ud558\uace0,  1\ub2e8\uacc4\uc640 2\ub2e8\uacc4\uc5d0\uc11c \uc720\uc0ac\ub3c4\ub97c \uc548\uc815\uc801\uc73c\ub85c \uacc4\uc0b0\ud558\uba70,  3\ub2e8\uacc4\uc5d0\uc11c \uc815\uaddc\ud654\ub41c \uac00\uc911\uce58\ub97c \ub9cc\ub4e4\uace0,  4\ub2e8\uacc4\uc5d0\uc11c \ubb38\ub9e5\uc774 \ubc18\uc601\ub41c \ud45c\ud604\uc744 \uc5bb\uac8c \ub418\ub294 \ud750\ub984\uc774 \uc140\ud504 \uc5b4\ud150\uc158\uc758 \ud575\uc2ec\uc774\ub2e4. </p> <p>\uc774\ub7ec\ud55c \ub2e8\uacc4\uc801 \uc124\uacc4 \ub355\ubd84\uc5d0 \ud2b8\ub79c\uc2a4\ud3ec\uba38 \ubaa8\ub378\uc740 \uae34 \ubb38\uc7a5\uc5d0\uc11c\ub3c4 \uad00\uacc4\ub97c \ud6a8\uacfc\uc801\uc73c\ub85c \ud559\uc2b5\ud558\uace0,  \ubc88\uc5ed\u00b7\uc694\uc57d\u00b7\uc9c8\ubb38 \ub2f5\ubcc0 \ub4f1 \ub2e4\uc591\ud55c \uc790\uc5f0\uc5b4 \ucc98\ub9ac \uacfc\uc81c\uc5d0\uc11c \ub192\uc740 \uc131\ub2a5\uc744 \ubc1c\ud718\ud558\uac8c \ub41c\ub2e4.</p>"},{"location":"ai/Model%20Serve/SGLang%20vs%20vLLM/","title":"SGLang vs vLLM","text":"<p>\ub300\ud615 \uc5b8\uc5b4 \ubaa8\ub378(LLM)\uc758 \ud65c\uc6a9\uc774 \ud655\uc0b0\ub428\uc5d0 \ub530\ub77c, \ud6a8\uc728\uc801\uc778 \ucd94\ub860(inference) \ubc0f \uc11c\ube59\uc744 \uc704\ud55c \uc778\ud504\ub77c \uc120\ud0dd\uc774 \uc810\uc810 \ub354 \uc911\uc694\ud574\uc9c0\uace0 \uc788\ub2e4. </p> <p>\ubcf8 \uae00\uc5d0\uc11c\ub294 UC \ubc84\ud074\ub9ac\uc5d0\uc11c \uac1c\ubc1c\ub41c \ub450 \uac00\uc9c0 \ub300\ud45c\uc801\uc778 \ucd94\ub860 \ud504\ub808\uc784\uc6cc\ud06c\uc778 SGLang\uacfc vLLM\uc744 \ub2e4\uc591\ud55c \uad00\uc810\uc5d0\uc11c \ube44\uad50 \ubd84\uc11d\ud55c\ub2e4. </p> <p>\uac01\uac01\uc758 \uc124\uacc4 \ucca0\ud559, \ud575\uc2ec \uae30\uc220, \uc131\ub2a5, \uba40\ud2f0 GPU \uc9c0\uc6d0 \ubc29\uc2dd, \uadf8\ub9ac\uace0 \uc2e4\uc81c \ud65c\uc6a9 \uc0ac\ub840\uc5d0 \ub300\ud574 \ub2e4\ub8ec\ub2e4.</p>"},{"location":"ai/Model%20Serve/SGLang%20vs%20vLLM/#1","title":"1. \uac1c\uc694","text":""},{"location":"ai/Model%20Serve/SGLang%20vs%20vLLM/#sglang","title":"SGLang\uc774\ub780?","text":"<p>SGLang\uc740 \ubcf5\uc7a1\ud55c LLM \uae30\ubc18 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc704\ud55c \ucd94\ub860 \uc5d4\uc9c4\uc73c\ub85c, CPU \ubc0f GPU \uc790\uc6d0\uc758 \ud6a8\uc728\uc801\uc778 \ud65c\uc6a9\uc744 \ud1b5\ud574 \uace0\uc131\ub2a5\uc744 \uc9c0\ud5a5\ud55c\ub2e4. \ub2e4\uc911 \ud134 \ub300\ud654, \ub3c4\uad6c \ud638\ucd9c, \uacc4\ud68d \uae30\ubc18 \uc751\ub2f5, JSON\uacfc \uac19\uc740 \uad6c\uc870\ud654\ub41c \ucd9c\ub825\uc744 \uc790\uc5f0\uc2a4\ub7fd\uac8c \ucc98\ub9ac\ud560 \uc218 \uc788\ub3c4\ub85d \uc124\uacc4\ub418\uc5c8\ub2e4.</p> <ul> <li> <p>\uc815\uc2dd \uba85\uce6d: Structured Generation Language</p> </li> <li> <p>\uac1c\ubc1c \uae30\uad00: UC Berkeley</p> </li> <li> <p>\uc8fc\uc694 \ubaa9\uc801:</p> <ul> <li> <p>\ubcf5\uc7a1\ud55c LLM \ud504\ub85c\uadf8\ub7a8(\uba40\ud2f0\ud134 \ub300\ud654, \ub3c4\uad6c \ud638\ucd9c \ub4f1)\uc744 \ud6a8\uc728\uc801\uc73c\ub85c \uc2e4\ud589</p> </li> <li> <p>\uad6c\uc870\ud654\ub41c \ucd9c\ub825(JSON \ub4f1) \uc9c0\uc6d0</p> </li> <li> <p>\ud504\ub860\ud2b8\uc5d4\ub4dc DSL\uacfc \ubc31\uc5d4\ub4dc \ub7f0\ud0c0\uc784\uc758 \uacf5\ub3d9 \uc124\uacc4\ub97c \ud1b5\ud574 \uba40\ud2f0 GPU \ud655\uc7a5\uc131 \ud655\ubcf4</p> </li> </ul> </li> </ul>"},{"location":"ai/Model%20Serve/SGLang%20vs%20vLLM/#vllm","title":"vLLM\uc774\ub780?","text":"<p>vLLM\uc740 \uace0\uc18d \ucd94\ub860, \uba54\ubaa8\ub9ac \ud6a8\uc728\uc131, \uc190\uc26c\uc6b4 \ud1b5\ud569\uc744 \ubaa9\ud45c\ub85c \ud558\ub294 \ucd94\ub860 \ud504\ub808\uc784\uc6cc\ud06c\uc774\ub2e4. \ub2e4\uc591\ud55c \ub300\ud615 \uc5b8\uc5b4 \ubaa8\ub378(Gemma, Qwen, GPT, DeepSeek \ub4f1)\uc758 \ubc30\uce58\ud615 \ub2e8\uc77c \uc694\uccad \ucd94\ub860\uc5d0 \ucd5c\uc801\ud654\ub418\uc5b4 \uc788\ub2e4.</p> <ul> <li> <p>\uc815\uc2dd \uba85\uce6d: Vectorized Large Language Model Inference</p> </li> <li> <p>\uac1c\ubc1c \uae30\uad00: UC Berkeley</p> </li> <li> <p>\uc8fc\uc694 \ubaa9\uc801:</p> <ul> <li> <p>\ub2e8\uc77c\ud134 \ucd94\ub860 \uc2dc \uba54\ubaa8\ub9ac \ud6a8\uc728\uc131\uacfc \ucc98\ub9ac\ub7c9 \ud5a5\uc0c1</p> </li> <li> <p>PagedAttention \uae30\ubc18\uc73c\ub85c \uace0\ub3d9\uc2dc\uc131\uacfc \uace0\uc18d \ucc98\ub9ac \uad6c\ud604</p> </li> <li> <p>\uae30\uc874 \ud30c\uc774\ud504\ub77c\uc778\uacfc\uc758 \uc190\uc26c\uc6b4 \ud1b5\ud569 \uc9c0\uc6d0</p> </li> </ul> </li> </ul>"},{"location":"ai/Model%20Serve/SGLang%20vs%20vLLM/#2","title":"2. \ud575\uc2ec \uae30\uc220 \ube44\uad50","text":"\ud56d\ubaa9 SGLang vLLM \ud575\uc2ec \uae30\uc220 RadixAttention, DSL \uae30\ubc18 \ucef4\ud30c\uc77c\ub7ec \ub514\uc790\uc778 PagedAttention, Continuous Batching \uad6c\uc870\ud654\ub41c \ucd9c\ub825 \uc9c0\uc6d0(JSON, FSM \uae30\ubc18) \ubbf8\uc9c0\uc6d0 \ubc30\uce58 \ucc98\ub9ac \uc5f0\uc18d\uc801 \ub3d9\uc801 \ubc30\uce58 \uc9c0\uc6d0 Continuous Batching\uc73c\ub85c \uc790\ub3d9\ud654 \uce90\uc2dc \ucd5c\uc801\ud654 Prefix \uacf5\uc720\ub97c \ud1b5\ud55c \uce90\uc2dc \uc7ac\uc0ac\uc6a9 PagedAttention \uae30\ubc18 GPU \uba54\ubaa8\ub9ac \ucd5c\uc801\ud654"},{"location":"ai/Model%20Serve/SGLang%20vs%20vLLM/#sglang_1","title":"SGLang \uc8fc\uc694 \uae30\uc220","text":"<ul> <li> <p>RadixAttention: Radix Tree\ub97c \uc774\uc6a9\ud55c KV \uce90\uc2dc \uad00\ub9ac \ubc29\uc2dd\uc73c\ub85c, \ub2e4\uc911 \ud134 \ub300\ud654\uc5d0\uc11c prefix \uacf5\uc720\ub97c \ud1b5\ud574 \ucd5c\ub300 5\ubc30\uae4c\uc9c0 \uce90\uc2dc \uc801\uc911\ub960\uc744 \ud5a5\uc0c1\uc2dc\ud0a8\ub2e4.</p> </li> <li> <p>\uad6c\uc870\ud654\ub41c \ucd9c\ub825 \uc9c0\uc6d0: \uc815\uaddc\uc2dd \ubc0f \uc720\ud55c \uc0c1\ud0dc \uba38\uc2e0(FSM)\uc744 \ud65c\uc6a9\ud55c \uc81c\uc57d \ub514\ucf54\ub529(constrained decoding)\uc73c\ub85c JSON, XML \ub4f1 \uad6c\uc870\ud654\ub41c \ucd9c\ub825\uc774 \uac00\ub2a5\ud558\ub2e4.</p> </li> <li> <p>\ucef4\ud30c\uc77c\ub7ec \uc601\uac10 \uc124\uacc4: DSL\uc744 \uc774\uc6a9\ud574 \ubcf5\uc7a1\ud55c LLM \uc6cc\ud06c\ud50c\ub85c\uc6b0\ub97c \uc120\uc5b8\uc801\uc73c\ub85c \uae30\uc220\ud560 \uc218 \uc788\uc73c\uba70, \ub7f0\ud0c0\uc784\uc5d0\uc11c \uc774\ub97c \ucd5c\uc801\ud654\ud55c\ub2e4.</p> </li> </ul>"},{"location":"ai/Model%20Serve/SGLang%20vs%20vLLM/#vllm_1","title":"vLLM \uc8fc\uc694 \uae30\uc220","text":"<ul> <li> <p>PagedAttention: OS\uc758 \ud398\uc774\uc9d5 \uac1c\ub150\uc744 \ub3c4\uc785\ud558\uc5ec KV \uce90\uc2dc\ub97c \uace0\uc815 \ube14\ub85d\uc73c\ub85c \ubd84\ud560, GPU \uba54\ubaa8\ub9ac\uc758 \ub3d9\uc801 \ud560\ub2f9\uc744 \uac00\ub2a5\ud558\uac8c \ud55c\ub2e4.</p> </li> <li> <p>\uc5f0\uc18d \ubc30\uce58 \ucc98\ub9ac(Continuous Batching): \uc694\uccad\uc744 prefill\uacfc decode\ub85c \ubd84\ub9ac\ud558\uc5ec \uc2e4\uc2dc\uac04\uc73c\ub85c \ubc30\uce58 \ud06c\uae30\ub97c \uc870\uc815\ud568\uc73c\ub85c\uc368 GPU \ud65c\uc6a9\ub960\uc744 \uadf9\ub300\ud654\ud55c\ub2e4.</p> </li> <li> <p>Zero Redundancy Tensor Parallelism: \uc911\ubcf5 \uc5c6\ub294 \uac00\uc911\uce58 \ubd84\uc0b0 \ubc0f \ud1b5\uc2e0 \ucd5c\uc801\ud654\ub97c \ud1b5\ud574 \uba40\ud2f0 GPU \ud658\uacbd\uc5d0\uc11c \ud6a8\uc728\uc801\uc778 \ucd94\ub860\uc774 \uac00\ub2a5\ud558\ub2e4.</p> </li> </ul>"},{"location":"ai/Model%20Serve/SGLang%20vs%20vLLM/#3","title":"3. \uc131\ub2a5 \ubc0f \uc0ac\uc6a9 \uc0ac\ub840","text":""},{"location":"ai/Model%20Serve/SGLang%20vs%20vLLM/#sglang_2","title":"SGLang\uc774 \uc801\ud569\ud55c \uacbd\uc6b0","text":"<ul> <li> <p>\uba40\ud2f0\ud134 \ub300\ud654\ud615 \uc2dc\uc2a4\ud15c (\uc608: \ucc57\ubd07, \uc5d0\uc774\uc804\ud2b8 \ud50c\ub798\ub108)</p> </li> <li> <p>\ucd9c\ub825 \ud615\uc2dd\uc774 \uc5c4\uaca9\ud788 \uc815\uc758\ub41c \uacbd\uc6b0 (\uc608: JSON \uae30\ubc18 API \uc751\ub2f5)</p> </li> <li> <p>Tool calling\uc774\ub098 \ubcf5\ud569\uc801\uc778 LLM \ub17c\ub9ac \ud750\ub984\uc744 \ucc98\ub9ac\ud574\uc57c \ud558\ub294 \uacbd\uc6b0</p> </li> </ul> <p>\uc131\ub2a5 \uc9c0\ud45c:</p> <ul> <li> <p>LLaMA-7B \uae30\uc900, vLLM \ub300\ube44 5\ubc30 \ub192\uc740 \uba40\ud2f0\ud134 \ucc98\ub9ac\ub7c9</p> </li> <li> <p>RadixAttention\uc744 \ud1b5\ud574 30~50% \ub0ae\uc740 \uc751\ub2f5 \uc9c0\uc5f0(latency)</p> </li> </ul>"},{"location":"ai/Model%20Serve/SGLang%20vs%20vLLM/#vllm_2","title":"vLLM\uc774 \uc801\ud569\ud55c \uacbd\uc6b0","text":"<ul> <li> <p>\ub2e8\uc77c\ud134 Q&amp;A, \ucf58\ud150\uce20 \uc0dd\uc131 \ub4f1 \ub300\ub7c9\uc758 \uc694\uccad\uc744 \ube60\ub974\uac8c \ucc98\ub9ac\ud574\uc57c \ud558\ub294 \uacbd\uc6b0</p> </li> <li> <p>\ub9ac\uc18c\uc2a4 \uc81c\ud55c \ud658\uacbd\uc5d0\uc11c \ucd5c\ub300\uc758 \ucc98\ub9ac\ub7c9\uc744 \ubf51\uc544\uc57c \ud558\ub294 \uacbd\uc6b0</p> </li> <li> <p>HuggingFace Transformers \ub300\ube44 14~24\ubc30 \uc774\uc0c1 \ub192\uc740 \ucc98\ub9ac\ub7c9</p> </li> <li> <p>GPU \ud55c \ub300\ub2f9 100\uac1c \uc774\uc0c1\uc758 \ub3d9\uc2dc \uc694\uccad \ucc98\ub9ac \uac00\ub2a5</p> </li> </ul>"},{"location":"ai/Model%20Serve/SGLang%20vs%20vLLM/#4-gpu","title":"4. \uba40\ud2f0 GPU \ud655\uc7a5\uc131","text":""},{"location":"ai/Model%20Serve/SGLang%20vs%20vLLM/#sglang-gpu","title":"SGLang\uc758 \uba40\ud2f0 GPU \uc804\ub7b5","text":"<ul> <li> <p>Tensor Parallelism: <code>--tp 8</code> \uacfc \uac19\uc774 \uac00\uc911\uce58\ub97c \ub2e4\uc218 GPU\uc5d0 \ubd84\uc0b0</p> </li> <li> <p>Data Parallelism: \uc785\ub825 \ub370\uc774\ud130\ub97c \uc170\uc5b4\ub9c1\ud558\uc5ec GPU \uac04 \ubd80\ud558 \uade0\ud615</p> </li> <li> <p>RadixAttention \uce90\uc2dc \uacf5\uc720: GPU \uac04 prefix \uce90\uc2dc\ub97c \uacf5\uc720\ud558\uc5ec \uc911\ubcf5 \uc5f0\uc0b0 \uc81c\uac70</p> </li> </ul>"},{"location":"ai/Model%20Serve/SGLang%20vs%20vLLM/#vllm-gpu","title":"vLLM\uc758 \uba40\ud2f0 GPU \uc804\ub7b5","text":"<ul> <li> <p>Tensor Parallelism: SGLang\uacfc \uc720\uc0ac\ud558\ub098, \uba54\ubaa8\ub9ac \uc911\ubcf5\uc774 \uc5c6\uc74c</p> </li> <li> <p>Distributed Scheduler: GPU \uac04 \uc694\uccad \ub77c\uc6b0\ud305 \ubc0f \uc77c\ubd80 \uc694\uccad CPU \uc624\ud504\ub85c\ub529</p> </li> <li> <p>\ud30c\uc774\ud504\ub77c\uc778 \ubcd1\ub82c\ud654: Kubernetes \ud074\ub7ec\uc2a4\ud130 \uae30\ubc18 \uba40\ud2f0 \ub178\ub4dc \uc2a4\ucf00\uc77c\ub9c1 \uc9c0\uc6d0</p> </li> </ul>"},{"location":"ai/Model%20Serve/SGLang%20vs%20vLLM/#5","title":"5. \uc120\ud0dd \uac00\uc774\ub4dc","text":"\uc0c1\ud669 \ucd94\ucc9c \ud504\ub808\uc784\uc6cc\ud06c \ubcf5\uc7a1\ud55c \uba40\ud2f0\ud134 \ub300\ud654, \ub3c4\uad6c \ud638\ucd9c SGLang JSON, XML \ub4f1 \uad6c\uc870\ud654\ub41c \ucd9c\ub825\uc774 \ud544\uc218\uc778 \uacbd\uc6b0 SGLang \ub192\uc740 \uc694\uccad \ub3d9\uc2dc\uc131\uacfc \ub2e8\uc77c\ud134 \ucc98\ub9ac vLLM \ube60\ub978 \uad6c\ucd95\uacfc \uc26c\uc6b4 \ud1b5\ud569\uc774 \ud544\uc694\ud55c \uacbd\uc6b0 vLLM"},{"location":"ai/Model%20Serve/SGLang%20vs%20vLLM/#6","title":"6. \uc694\uc57d","text":"\ud56d\ubaa9 SGLang vLLM \ud575\uc2ec \uac15\uc810 \uba40\ud2f0\ud134, \uad6c\uc870\ud654 \ucd9c\ub825, \ubcf5\uc7a1\ud55c \ub17c\ub9ac \ucc98\ub9ac \ub2e8\uc77c\ud134 \uace0\ucc98\ub9ac\ub7c9, \uba54\ubaa8\ub9ac \ud6a8\uc728 \uae30\uc220 \uc2a4\ud0dd RadixAttention, DSL \uae30\ubc18 \ub7f0\ud0c0\uc784 \ucd5c\uc801\ud654 PagedAttention, \ubc30\uce58 \ucd5c\uc801\ud654 \uc0ac\uc6a9 \ub300\uc0c1 \ubaa8\ub378 LLaMA, DeepSeek \ub4f1 \ubc94\uc6a9 LLM/VLM GPT-4, Mixtral \ub4f1 \ucd08\ub300\ud615 \ubaa8\ub378 \ud559\uc2b5 \ub09c\uc774\ub3c4 \ub192\uc74c (DSL \ud559\uc2b5 \ud544\uc694) \ub0ae\uc74c (\uc989\uc2dc \uc0ac\uc6a9 \uac00\ub2a5) <p>\uc774 \uae00\uc740 \ud504\ub85c\uc81d\ud2b8 \uc131\uaca9, \ucc98\ub9ac \uc694\uad6c, \ucd9c\ub825 \ud3ec\ub9f7\uc5d0 \ub530\ub77c SGLang\uacfc vLLM \uc911 \uc5b4\ub5a4 \ud504\ub808\uc784\uc6cc\ud06c\uac00 \uc801\ud569\ud55c\uc9c0\ub97c \ube60\ub974\uac8c \ud310\ub2e8\ud560 \uc218 \uc788\ub3c4\ub85d \uad6c\uc131\ub418\uc5c8\ub2e4. \uac01\uc790\uc758 \uae30\uc220\uc801 \uac15\uc810\uc744 \ubc14\ud0d5\uc73c\ub85c \ub450 \uc2dc\uc2a4\ud15c\uc744 \uc801\uc808\ud788 \uc120\ud0dd\ud558\ub294 \uac83\uc774 \uace0\uc131\ub2a5 LLM \uc11c\ube59 \uc804\ub7b5\uc758 \ud575\uc2ec\uc774\ub2e4.</p>"},{"location":"ai/Model%20Serve/vLLM%20vs%20LMDeploy%20vs%20SGLang/","title":"vLLM vs LMDeploy vs SGLang","text":"<p>\ub300\ud615 \uc5b8\uc5b4 \ubaa8\ub378(LLM)\uc740 \uc790\uc5f0\uc5b4 \ucc98\ub9ac \ubd84\uc57c\uc5d0\uc11c \uc911\uc694\ud55c \ub3cc\ud30c\uad6c\ub97c \ub9cc\ub4e4\uc5b4\ub0c8\uc9c0\ub9cc, \uace0\uc131\ub2a5 \ubaa8\ub378\uc77c\uc218\ub85d \ucd94\ub860 \uc9c0\uc5f0\uacfc \uc790\uc6d0 \uc18c\ubaa8\uac00 \ud070 \uac83\uc774 \ud604\uc2e4\uc774\ub2e4. \ud2b9\ud788 \ubaa8\ub378\uc744 \uc11c\ube44\uc2a4\uc5d0 \ubc30\ud3ec\ud560 \ub54c\ub294 \ucc98\ub9ac \uc18d\ub3c4, \uba54\ubaa8\ub9ac \ud6a8\uc728, \ub3d9\uc2dc \uc0ac\uc6a9\uc790 \ub300\uc751 \ub2a5\ub825\uc774 \ud575\uc2ec \uace0\ub824 \uc694\uc18c\uc774\ub2e4. \ubcf8 \uae00\uc5d0\uc11c\ub294 \uc774\ub7ec\ud55c \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574 \uac1c\ubc1c\ub41c \uc138 \uac00\uc9c0 \uc624\ud508\uc18c\uc2a4 \ud504\ub808\uc784\uc6cc\ud06c\uc778 vLLM, LMDeploy, SGLang\uc744 \ub2e4\uc591\ud55c \uad00\uc810\uc5d0\uc11c \ube44\uad50\ud558\uace0, \ubca4\uce58\ub9c8\ud06c \uacb0\uacfc\ub97c \uae30\ubc18\uc73c\ub85c \uc7a5\ub2e8\uc810\uc744 \ubd84\uc11d\ud558\uace0\uc790 \ud55c\ub2e4.</p>"},{"location":"ai/Model%20Serve/vLLM%20vs%20LMDeploy%20vs%20SGLang/#1","title":"1. \ubc30\uacbd: \ucd94\ub860 \ubcd1\ubaa9\uc758 \uadfc\ubcf8 \uc6d0\uc778","text":"<p>LLM\uc774 \uc0ac\uc6a9\ud558\ub294 \ud575\uc2ec \uc54c\uace0\ub9ac\uc998\uc778 Attention\uc740 \uc774\uc804\ubcf4\ub2e4 \uae34 \ucee8\ud14d\uc2a4\ud2b8\ub97c \ub2e4\ub8f0 \uc218 \uc788\uac8c \ud574\uc8fc\uc9c0\ub9cc, \ub3d9\uc2dc\uc5d0 \ub9e4\uc6b0 \ub9ce\uc740 \uc5f0\uc0b0\uacfc \uba54\ubaa8\ub9ac \uce90\uc2f1\uc744 \uc694\uad6c\ud55c\ub2e4. \ud2b9\ud788 \ub514\ucf54\ub529 \ub2e8\uacc4\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 Key-Value(KV) \uce90\uc2dc\ub294 \uc5f0\uc18d\uc801\uc778 \uc694\uccad \ucc98\ub9ac\uc5d0\uc11c \ud070 \ubcd1\ubaa9\uc774 \ub418\uba70, \uce90\uc2dc\ub97c \ud6a8\uc728\uc801\uc73c\ub85c \uad00\ub9ac\ud558\uc9c0 \uc54a\uc73c\uba74 \uc751\ub2f5 \uc18d\ub3c4\uac00 \ud06c\uac8c \ub290\ub824\uc9c4\ub2e4.</p> <p>\uae30\uc874 \ud574\uacb0 \ubc29\uc2dd\uc73c\ub85c\ub294 FP16, INT8, 4-bit \uc591\uc790\ud654 \uac19\uc740 \uc800\uc815\ubc00 \uc5f0\uc0b0 \ub610\ub294 \uace0\uc131\ub2a5 GPU \uc0ac\uc6a9\uc774 \uc788\uc5c8\uc73c\ub098, \uc774\ub294 \uadfc\ubcf8\uc801\uc778 \uc54c\uace0\ub9ac\uc998 \ubcd1\ubaa9\uc744 \ud574\uacb0\ud558\uc9c0\ub294 \ubabb\ud55c\ub2e4. \uc774\uc5d0 \ub530\ub77c \ucd5c\uadfc\uc5d0\ub294 KV \uce90\uc2dc \uad00\ub9ac \ucd5c\uc801\ud654, GPU \ucee4\ub110 \uc131\ub2a5 \uac1c\uc120, \ub3d9\uc801 \ubc30\uce58 \ucc98\ub9ac \ub4f1\uc758 \uadfc\ubcf8\uc801 \uc811\uadfc\uc774 \uc8fc\ubaa9\ubc1b\uace0 \uc788\ub2e4.</p>"},{"location":"ai/Model%20Serve/vLLM%20vs%20LMDeploy%20vs%20SGLang/#2","title":"2. \ud504\ub808\uc784\uc6cc\ud06c \uac1c\uc694","text":""},{"location":"ai/Model%20Serve/vLLM%20vs%20LMDeploy%20vs%20SGLang/#vllm","title":"vLLM","text":"<ul> <li> <p>PagedAttention: OS\uc758 \ud398\uc774\uc9d5 \uae30\ubc95\uc744 \ucc28\uc6a9\ud558\uc5ec GPU \uba54\ubaa8\ub9ac\uc758 \uace0\uc815 \ube14\ub85d\ud654\ub97c \uc9c0\uc6d0\ud558\uace0, KV \uce90\uc2dc \ud560\ub2f9\uc744 \ud6a8\uc728\uc801\uc73c\ub85c \uc218\ud589\ud55c\ub2e4.</p> </li> <li> <p>Continuous Batching: \uc694\uccad\uc744 prefill\uacfc decode \ub2e8\uacc4\ub85c \ub098\ub204\uc5b4 \ub3d9\uc2dc\uc131 \ud6a8\uc728\uc744 \uadf9\ub300\ud654\ud55c\ub2e4.</p> </li> <li> <p>\uc9c0\uc6d0 \ubc94\uc704: Transformer, \uba40\ud2f0\ubaa8\ub2ec LLM, Mixture-of-Experts, \uc784\ubca0\ub529 \ubaa8\ub378</p> </li> <li> <p>\uc9c0\uc6d0 \ud558\ub4dc\uc6e8\uc5b4: NVIDIA GPU, AMD GPU/CPU, Intel, AWS Neuron \ub4f1 \uad11\ubc94\uc704\ud55c \ud50c\ub7ab\ud3fc\uc744 \uc9c0\uc6d0\ud55c\ub2e4.</p> </li> </ul>"},{"location":"ai/Model%20Serve/vLLM%20vs%20LMDeploy%20vs%20SGLang/#lmdeploy","title":"LMDeploy","text":"<ul> <li> <p>\uc5d4\uc9c4 \uad6c\uc131: PyTorch\uc640 Turbomind \ub450 \uac00\uc9c0 \uc5d4\uc9c4\uc73c\ub85c \uad6c\uc131\ub418\uba70, \ud6c4\uc790\ub294 \uc131\ub2a5 \ucd5c\uc801\ud654\uc5d0 \uc911\uc810\uc744 \ub454\ub2e4.</p> </li> <li> <p>\uae30\uc220 \uad6c\uc131: Blocked KV \uce90\uc2dc, \uc9c0\uc18d\uc801 \ubc30\uce58(persistent batch), \uace0\uc131\ub2a5 CUDA \ucee4\ub110, \ud150\uc11c \ubcd1\ub82c\ud654, \ub3d9\uc801 \ubd84\ud560 \ubc0f \ubcd1\ud569 \ucc98\ub9ac</p> </li> <li> <p>\uc591\uc790\ud654 \uc9c0\uc6d0: 4-bit \ucd94\ub860\ub3c4 \uc9c0\uc6d0\ud558\uba70, FP16 \ub300\ube44 \ucd5c\ub300 2.4\ubc30 \uc18d\ub3c4\ub97c \uc81c\uacf5\ud55c\ub2e4.</p> </li> <li> <p>\ud2b9\uc9d5: \uc2e4\uc2dc\uac04 \ucd94\ub860, \ubd84\uc0b0 \ud658\uacbd \ubc30\ud3ec, \uba40\ud2f0\ubaa8\ub2ec \ubc0f \ub2e4\uc591\ud55c \uc544\ud0a4\ud14d\ucc98 \ud638\ud658</p> </li> </ul>"},{"location":"ai/Model%20Serve/vLLM%20vs%20LMDeploy%20vs%20SGLang/#sglang","title":"SGLang","text":"<ul> <li> <p>RadixAttention: Radix \ud2b8\ub9ac\ub97c \uc774\uc6a9\ud574 \uba40\ud2f0\ud134 \ub300\ud654\uc758 \uacf5\ud1b5 prefix\ub97c \uacf5\uc720\ud558\uc5ec \uce90\uc2dc \uc7ac\uc0ac\uc6a9\ub960\uc744 \ub192\uc774\ub294 \uae30\uc220\uc774\ub2e4.</p> </li> <li> <p>Constrained Decoding: \uc815\uaddc\uc2dd \uae30\ubc18\uc758 \ucd9c\ub825 \uc81c\uc57d \uc870\uac74\uc744 \ube60\ub974\uac8c \ucc98\ub9ac\ud558\ub294 \uc0c1\ud0dc \uba38\uc2e0\uc744 \uc81c\uacf5\ud55c\ub2e4.</p> </li> <li> <p>Batch Scheduler: Python \uae30\ubc18 \ubc30\uce58 \uc2a4\ucf00\uc904\ub7ec\uc784\uc5d0\ub3c4 C++\uae09\uc758 \ud6a8\uc728\uc131\uc744 \ubcf4\uc778\ub2e4.</p> </li> <li> <p>\ud2b9\uc9d5: \uad6c\uc870\ud654\ub41c \ucd9c\ub825(JSON \ub4f1), \uba40\ud2f0\ud134 \ub300\ud654, Agent \ud504\ub86c\ud504\ud2b8 \uc124\uacc4 \ub4f1\uc5d0\uc11c \uac15\ub825\ud55c \uc131\ub2a5\uc744 \ubcf4\uc778\ub2e4.</p> </li> </ul>"},{"location":"ai/Model%20Serve/vLLM%20vs%20LMDeploy%20vs%20SGLang/#3","title":"3. \ubca4\uce58\ub9c8\ud06c \ud658\uacbd \ubc0f \ud14c\uc2a4\ud2b8 \uc870\uac74","text":"<ul> <li> <p>\ud14c\uc2a4\ud2b8 \uc7a5\ube44:</p> <ul> <li> <p>CPU: AMD EPYC 7J13 (64\ucf54\uc5b4)</p> </li> <li> <p>RAM: 216GB</p> </li> <li> <p>GPU: NVIDIA A100 40GB</p> </li> </ul> </li> <li> <p>\ud504\ub808\uc784\uc6cc\ud06c \uc2e4\ud589 \ud658\uacbd: Docker Compose \uae30\ubc18</p> </li> <li> <p>\ud14c\uc2a4\ud2b8 \uae30\uc900:</p> <ul> <li> <p>TTFT (Time to First Token): \uccab \ud1a0\ud070\uc774 \uc0dd\uc131\ub418\uae30\uae4c\uc9c0 \uac78\ub9ac\ub294 \uc2dc\uac04 (\ub0ae\uc744\uc218\ub85d \uc88b\uc74c)</p> </li> <li> <p>Throughput per second: \ucd08\ub2f9 \uc0dd\uc131 \ud1a0\ud070 \uc218 (\ub192\uc744\uc218\ub85d \uc88b\uc74c)</p> </li> </ul> </li> <li> <p>\ubaa8\ub378 \uc885\ub958:</p> <ul> <li> <p><code>Llama3.1-8B-Instruct</code></p> </li> <li> <p><code>Mistral-v0.3-Instruct</code></p> </li> <li> <p><code>Qwen2-7B-Instruct</code></p> </li> </ul> </li> <li> <p>\uc870\uac74:</p> <ul> <li> <p>\ub2e8\uc77c \uc694\uccad (concurrent=1)</p> </li> <li> <p>100\uac1c \uc694\uccad \ub3d9\uc2dc \ucc98\ub9ac (concurrent=100)</p> </li> <li> <p>\uc785\ub825/\ucd9c\ub825 \ud1a0\ud070 \uc218: \uac01 2048</p> </li> </ul> </li> </ul>"},{"location":"ai/Model%20Serve/vLLM%20vs%20LMDeploy%20vs%20SGLang/#4","title":"4. \ubca4\uce58\ub9c8\ud06c \uacb0\uacfc \ubd84\uc11d","text":""},{"location":"ai/Model%20Serve/vLLM%20vs%20LMDeploy%20vs%20SGLang/#concurrent1","title":"\ub2e8\uc77c \uc694\uccad (Concurrent=1)","text":""},{"location":"ai/Model%20Serve/vLLM%20vs%20LMDeploy%20vs%20SGLang/#ttft","title":"TTFT (\uccab \ud1a0\ud070 \uc0dd\uc131 \uc18d\ub3c4)","text":"<ul> <li> <p>SGLang\uc774 \uc138 \ubaa8\ub378 \ubaa8\ub450\uc5d0\uc11c \ube60\ub978 \uc751\ub2f5\uc744 \ubcf4\uc774\uba70 \uac00\uc7a5 \uc6b0\uc218\ud558\uc600\ub2e4.</p> </li> <li> <p><code>Llama3.1</code> \uae30\uc900, \uac00\uc7a5 \ub290\ub9b0 <code>lmdeploy-pytorch</code> \ub300\ube44 22.3% \ube60\ub984</p> </li> <li> <p><code>Qwen2-7B</code>\uc5d0\uc11c\ub3c4 \ubaa8\ub4e0 \ud504\ub808\uc784\uc6cc\ud06c \uc911 \uac00\uc7a5 \ub0ae\uc740 TTFT\ub97c \uae30\ub85d\ud558\uc600\ub2e4.</p> </li> </ul>"},{"location":"ai/Model%20Serve/vLLM%20vs%20LMDeploy%20vs%20SGLang/#throughput","title":"Throughput","text":"<ul> <li> <p><code>lmdeploy-turbomind</code>\uac00 \uac00\uc7a5 \ub192\uc740 \ud3c9\uade0 \ud1a0\ud070 \uc0dd\uc131\ub960(\uc57d 88.6 tok/s)\uc744 \ubcf4\uc600\ub2e4.</p> </li> <li> <p><code>vLLM</code>\uc740 \uac00\uc7a5 \ub0ae\uc740 \uc218\uce58\ub97c \ubcf4\uc600\uc73c\uba70, \ud3c9\uade0 8.12% \ub4a4\uccd0\uc84c\ub2e4.</p> </li> <li> <p><code>SGLang</code>\uc740 \ud3c9\uade0 \uc218\uc900\uc774\ub098 \uad6c\uc870\ud654\ub41c \ucd9c\ub825\uc774 \ud544\uc694\ud55c \uc791\uc5c5\uc5d0\ub294 \uac15\uc810\uc744 \ubcf4\uc778\ub2e4.</p> </li> </ul>"},{"location":"ai/Model%20Serve/vLLM%20vs%20LMDeploy%20vs%20SGLang/#100-concurrent100","title":"100\uac1c \uc694\uccad \ub3d9\uc2dc \ucc98\ub9ac (Concurrent=100)","text":""},{"location":"ai/Model%20Serve/vLLM%20vs%20LMDeploy%20vs%20SGLang/#ttft_1","title":"TTFT","text":"<ul> <li> <p><code>SGLang</code>\uc740 <code>Qwen2-7B</code>\uc5d0\uc11c \ud0c1\uc6d4\ud55c \uc131\ub2a5(0.052s)\uc744 \ubcf4\uc600\uc73c\uba70, \uc774\ub294 \ubaa8\ub4e0 \ud504\ub808\uc784\uc6cc\ud06c \uc911 \uac00\uc7a5 \ube60\ub978 \uc218\uce58\uc774\ub2e4.</p> </li> <li> <p>\ud558\uc9c0\ub9cc <code>Mistral-v0.3</code>\uc5d0\uc11c\ub294 \uac00\uc7a5 \ub0ae\uc740 \uc131\ub2a5(32.39s)\uc744 \uae30\ub85d\ud558\uba70, \ud574\ub2f9 \uc544\ud0a4\ud14d\ucc98\uc5d0 \ub300\ud55c \ucd5c\uc801\ud654 \ubd80\uc871\uc774 \ub4dc\ub7ec\ub0ac\ub2e4.</p> </li> </ul>"},{"location":"ai/Model%20Serve/vLLM%20vs%20LMDeploy%20vs%20SGLang/#throughput_1","title":"Throughput","text":"<ul> <li> <p><code>LMDeploy-Turbomind</code>\ub294 <code>Qwen2-7B</code>\uc5d0\uc11c \ucd08\ub2f9 2380 \ud1a0\ud070, <code>SGLang</code>\uc740 2506 \ud1a0\ud070\uc73c\ub85c \uac00\uc7a5 \ub192\uc740 \uc218\uce58\ub97c \uae30\ub85d\ud558\uc600\ub2e4.</p> </li> <li> <p><code>TGI</code>\ub294 <code>Llama</code> \ubc0f <code>Mistral</code> \ubaa8\ub378\uc5d0\uc11c OOM(Out-Of-Memory) \uc624\ub958\ub85c \ud14c\uc2a4\ud2b8 \uc2e4\ud328</p> </li> </ul>"},{"location":"ai/Model%20Serve/vLLM%20vs%20LMDeploy%20vs%20SGLang/#5","title":"5. \uc885\ud569 \uacb0\ub860","text":"\ud56d\ubaa9 vLLM LMDeploy SGLang TTFT (\ub2e8\uc77c \uc694\uccad) \ud3c9\uade0 \uc218\uc900 \ub290\ub9bc \uac00\uc7a5 \ube60\ub984 TTFT (\ub3d9\uc2dc \uc694\uccad) \uc548\uc815\uc801 \ube60\ub984 \ubaa8\ub378\uc5d0 \ub530\ub77c \ud3b8\ucc28 \uc874\uc7ac Throughput \ub0ae\uc74c \uc77c\uad00\ub418\uac8c \ub192\uc74c \ud2b9\uc815 \ubaa8\ub378\uc5d0\uc11c \ucd5c\uace0 \uc131\ub2a5 \uad6c\uc870\ud654 \ucd9c\ub825 \uc9c0\uc6d0 \ubbf8\uc9c0\uc6d0 \ubbf8\uc9c0\uc6d0 \uc9c0\uc6d0 (JSON \ub4f1) \uba40\ud2f0\ud134 \uce90\uc2dc \ucd5c\uc801\ud654 \ubbf8\uc9c0\uc6d0 \uc81c\ud55c\uc801 RadixAttention \uc9c0\uc6d0 \uc2dc\uc2a4\ud15c \ud1b5\ud569 \ub09c\uc774\ub3c4 \ub0ae\uc74c \uc911\uac04 \ub192\uc74c (DSL \uae30\ubc18)"},{"location":"ai/Model%20Serve/vLLM%20vs%20LMDeploy%20vs%20SGLang/#6","title":"6. \ucd94\ucc9c \uac00\uc774\ub4dc","text":"\uc0c1\ud669 \uc801\ud569\ud55c \ud504\ub808\uc784\uc6cc\ud06c \ub2e8\uc77c\ud134 \ub300\ub7c9 \uc0dd\uc131, \ub300\uaddc\ubaa8 \ubc30\ud3ec LMDeploy \ub2e4\uc591\ud55c \ud50c\ub7ab\ud3fc \ud1b5\ud569, \ube60\ub978 \ubc30\ud3ec vLLM \uba40\ud2f0\ud134 \ucc57\ubd07, \uad6c\uc870\ud654 \uc751\ub2f5\uc774 \ud544\uc694\ud55c \uc2dc\uc2a4\ud15c SGLang <p>SGLang\uc740 \uba40\ud2f0\ud134 \ucc98\ub9ac\uc640 \uad6c\uc870\ud654 \ucd9c\ub825\uc5d0 \uac15\uc810\uc744 \uac00\uc9c0\uba70, \uc2f1\uae00\ud134 \uc704\uc8fc\uc758 \ub300\ub7c9 \uc0dd\uc131 \uc791\uc5c5\uc5d0\uc11c\ub294 LMDeploy\uac00 \uc6b0\uc218\ud55c \ucc98\ub9ac\ub7c9\uc744 \ubcf4\uc5ec\uc900\ub2e4. \ubc18\uba74 vLLM\uc740 \uc190\uc26c\uc6b4 \ud1b5\ud569\uacfc \ub113\uc740 \ud50c\ub7ab\ud3fc \ud638\ud658\uc131\uc744 \ud1b5\ud574 \ube60\ub978 \uad6c\ucd95\uc774 \ud544\uc694\ud55c \uc0c1\ud669\uc5d0 \uc801\ud569\ud558\ub2e4. \uac01 \ud504\ub808\uc784\uc6cc\ud06c\uc758 \ud2b9\uc131\uacfc \uc2dc\uc2a4\ud15c \uc694\uad6c\uc0ac\ud56d\uc744 \uace0\ub824\ud558\uc5ec \uc120\ud0dd\ud558\ub294 \uac83\uc774 \uc911\uc694\ud558\ub2e4.</p>"},{"location":"ai/Model%20Serve/%EB%A9%80%ED%8B%B0%ED%84%B4%20vs%20%EC%8B%B1%EA%B8%80%ED%84%B4/","title":"\uba40\ud2f0\ud134 vs \uc2f1\uae00\ud134","text":"<p>LLM \uae30\ubc18\uc758 \ucc57\ubd07\uc774\ub098 \ub300\ud654\ud615 AI \uc2dc\uc2a4\ud15c\uc5d0\uc11c\ub294 \uc0ac\uc6a9\uc790\uc640\uc758 \ub300\ud654 \ud750\ub984\uc744 \uc5b4\ub5bb\uac8c \uad00\ub9ac\ud558\ub290\ub0d0\uc5d0 \ub530\ub77c \ucc98\ub9ac \ubc29\uc2dd\uc774 \ud06c\uac8c \ub2ec\ub77c\uc9c4\ub2e4. </p> <p>\uc774\ub54c \uc911\uc694\ud55c \uac1c\ub150\uc774 \ubc14\ub85c \uc2f1\uae00\ud134\uacfc \uba40\ud2f0\ud134\uc774\ub2e4. </p> <p>\ub450 \ubc29\uc2dd\uc740 \ub300\ud654\uc758 \ubb38\ub9e5 \uc720\uc9c0 \uc5ec\ubd80\uc640 \ucc98\ub9ac \ubc29\uc2dd\uc5d0\uc11c \ubcf8\uc9c8\uc801\uc778 \ucc28\uc774\ub97c \ubcf4\uc778\ub2e4.</p>"},{"location":"ai/Model%20Serve/%EB%A9%80%ED%8B%B0%ED%84%B4%20vs%20%EC%8B%B1%EA%B8%80%ED%84%B4/#1-single-turn","title":"1. \uc2f1\uae00\ud134(Single-turn) \ub300\ud654\ub780","text":"<p>\uc2f1\uae00\ud134\uc740 \ud558\ub098\uc758 \uc0ac\uc6a9\uc790 \uc9c8\ubb38\uc5d0 \ub300\ud574 \ud558\ub098\uc758 \uc751\ub2f5\ub9cc \uc218\ud589\ud558\uace0 \uc885\ub8cc\ub418\ub294 \ubc29\uc2dd\uc774\ub2e4.  \uc774 \ubc29\uc2dd\uc5d0\uc11c\ub294 \uc774\uc804 \ub300\ud654 \ub0b4\uc6a9\uc774\ub098 \ub9e5\ub77d\uc744 \uace0\ub824\ud558\uc9c0 \uc54a\uc73c\uba70, \ub9e4 \uc694\uccad\uc740 \uc644\uc804\ud788 \ub3c5\ub9bd\uc801\uc73c\ub85c \ucc98\ub9ac\ub41c\ub2e4.  \uc8fc\ub85c FAQ \ucc57\ubd07, \ub2e8\uc77c \uc9c8\uc758\uc751\ub2f5 \uc2dc\uc2a4\ud15c, \ud55c \ubc88\uc5d0 \uc815\ubcf4\ub97c \uc81c\uacf5\ud558\ub294 \uc751\uc6a9 \uc11c\ube44\uc2a4 \ub4f1\uc5d0\uc11c \uc0ac\uc6a9\ub41c\ub2e4.</p>"},{"location":"ai/Model%20Serve/%EB%A9%80%ED%8B%B0%ED%84%B4%20vs%20%EC%8B%B1%EA%B8%80%ED%84%B4/#_1","title":"\uc608\uc2dc","text":"<pre><code>\uc0ac\uc6a9\uc790: \uc11c\uc6b8\uc758 \ub0a0\uc528 \uc54c\ub824\uc918  \nAI: \uc11c\uc6b8\uc740 \uc624\ub298 \ub9d1\uace0 \uae30\uc628\uc740 29\ub3c4\uc785\ub2c8\ub2e4.\n</code></pre> <p>\ud574\ub2f9 \ub300\ud654\ub294 \uc9c8\ubb38\uacfc \uc751\ub2f5\uc774 \ud55c \ubc88\uc529 \uc624\uac00\uba70 \uc885\ub8cc\ub418\ubbc0\ub85c \uc2f1\uae00\ud134\uc774\ub2e4.</p>"},{"location":"ai/Model%20Serve/%EB%A9%80%ED%8B%B0%ED%84%B4%20vs%20%EC%8B%B1%EA%B8%80%ED%84%B4/#2-multi-turn","title":"2. \uba40\ud2f0\ud134(Multi-turn) \ub300\ud654\ub780","text":"<p>\uba40\ud2f0\ud134\uc740 \uc5ec\ub7ec \ubc88\uc758 \uc9c8\ubb38\uacfc \uc751\ub2f5\uc774 \uc774\uc5b4\uc9c0\uba70 \ubb38\ub9e5\uc774 \uc5f0\uc18d\ub418\ub294 \ub300\ud654 \ubc29\uc2dd\uc774\ub2e4. \uc774 \ubc29\uc2dd\uc5d0\uc11c\ub294 AI\uac00 \uc774\uc804 \ub300\ud654\uc758 \ud750\ub984\uc744 \uae30\uc5b5\ud558\uace0, \uc774\ub97c \uae30\ubc18\uc73c\ub85c \ub2e4\uc74c \uc751\ub2f5\uc744 \uc0dd\uc131\ud55c\ub2e4. \ub530\ub77c\uc11c \uc0ac\uc6a9\uc790\uac00 \uc77c\ubd80\ub9cc \uc9c8\ubb38\ud558\uac70\ub098 \uc0dd\ub7b5\ub41c \ud45c\ud604\uc744 \uc368\ub3c4 \ub9e5\ub77d\uc744 \uc720\uc9c0\ud558\uba70 \uc790\uc5f0\uc2a4\ub7fd\uac8c \uc751\ub2f5\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"ai/Model%20Serve/%EB%A9%80%ED%8B%B0%ED%84%B4%20vs%20%EC%8B%B1%EA%B8%80%ED%84%B4/#_2","title":"\uc608\uc2dc","text":"<pre><code>\uc0ac\uc6a9\uc790: \uc11c\uc6b8\uc758 \ub0a0\uc528 \uc54c\ub824\uc918  \nAI: \uc11c\uc6b8\uc740 \uc624\ub298 \ub9d1\uace0 \uae30\uc628\uc740 29\ub3c4\uc785\ub2c8\ub2e4.  \n\uc0ac\uc6a9\uc790: \ub0b4\uc77c\uc740 \uc5b4\ub54c?  \nAI: \ub0b4\uc77c\uc740 \ud750\ub9ac\uace0 \ube44\uac00 \uc608\uc0c1\ub429\ub2c8\ub2e4.\n</code></pre> <p>\uc704 \uc608\uc2dc\uc5d0\uc11c \"\ub0b4\uc77c\uc740 \uc5b4\ub54c?\"\ub77c\ub294 \uc9c8\ubb38\uc740 \ubb38\ub9e5\uc0c1 \"\uc11c\uc6b8\uc758 \ub0b4\uc77c \ub0a0\uc528\"\ub97c \uc758\ubbf8\ud558\uba70, AI\ub294 \uc774\ub97c \uc774\uc804 \uc9c8\ubb38\uc744 \ubc14\ud0d5\uc73c\ub85c \ucd94\ub860\ud558\uc5ec \uc801\uc808\ud55c \uc751\ub2f5\uc744 \uc0dd\uc131\ud55c\ub2e4. \uc774\ub7ec\ud55c \ubc29\uc2dd\uc774 \uba40\ud2f0\ud134\uc774\ub2e4.</p>"},{"location":"ai/Model%20Serve/%EB%A9%80%ED%8B%B0%ED%84%B4%20vs%20%EC%8B%B1%EA%B8%80%ED%84%B4/#3","title":"3. \ub450 \ubc29\uc2dd\uc758 \uc8fc\uc694 \ucc28\uc774\uc810","text":"\ud56d\ubaa9 \uc2f1\uae00\ud134 \uba40\ud2f0\ud134 \ubb38\ub9e5 \uc720\uc9c0 \uc5c6\uc74c \uc788\uc74c \uc751\ub2f5 \uc815\ud655\ub3c4 \uc9c8\ubb38 \uba85\ud655 \uc2dc \uc815\ud655\ud568 \ubb38\ub9e5 \uae30\ubc18 \uc720\uc5f0\ud55c \uc751\ub2f5 \uac00\ub2a5 \ucc98\ub9ac \ub09c\uc774\ub3c4 \uc0c1\ub300\uc801\uc73c\ub85c \ub0ae\uc74c \uc0c1\ud0dc \uad00\ub9ac\uc640 \uce90\uc2dc \ucd5c\uc801\ud654 \ud544\uc694 \uc0ac\uc6a9 \uc0ac\ub840 \uac80\uc0c9\ud615 Q&amp;A, FAQ \ucc57\ubd07, RAG, \uc0c1\ub2f4 \uc2dc\uc2a4\ud15c, \uc5d0\uc774\uc804\ud2b8"},{"location":"ai/Model%20Serve/%EB%A9%80%ED%8B%B0%ED%84%B4%20vs%20%EC%8B%B1%EA%B8%80%ED%84%B4/#4","title":"4. \uba40\ud2f0\ud134\uc774 \ud544\uc694\ud55c \uc774\uc720","text":"<p>\ud604\uc2e4\uc758 \ub300\ud654\ub294 \ub300\ubd80\ubd84 \ub2e8\uacc4\uc801\uc73c\ub85c \uc774\uc5b4\uc9c0\ub294 \uc9c8\uc758\uc751\ub2f5\uc73c\ub85c \uad6c\uc131\ub418\ubbc0\ub85c, \uc0ac\uc6a9\uc790\ub294 \uc804\uccb4 \uc9c8\ubb38\uc744 \ud55c \ubc88\uc5d0 \ub9d0\ud558\uc9c0 \uc54a\ub294\ub2e4. </p> <p>\ud2b9\ud788 RAG \uae30\ubc18 \uc2dc\uc2a4\ud15c\uc5d0\uc11c\ub294 \ubb38\uc11c\ub97c \uc694\uc57d\ud55c \ub4a4  \u201c\uadf8\ub7fc \uad00\ub828 \uc608\uc2dc\ub294?\u201d,  \u201c\uc774\uac78 \ud45c\ub85c \ubc14\uafd4\uc918\u201d,  \u201c\ub2e4\ub978 \ubb38\uc11c\ub3c4 \ubd84\uc11d\ud574\uc918\u201d\uc640 \uac19\uc774 \ub300\ud654\ub97c \ud655\uc7a5\ud558\uac8c \ub41c\ub2e4. </p> <p>\uc774\ub7ec\ud55c \ud750\ub984\uc744 \uc790\uc5f0\uc2a4\ub7fd\uac8c \ucc98\ub9ac\ud558\uae30 \uc704\ud574\uc11c\ub294 \uba40\ud2f0\ud134 \ubc29\uc2dd\uc774 \ud544\uc218\uc801\uc774\ub2e4.</p>"},{"location":"ai/Model%20Serve/%EB%A9%80%ED%8B%B0%ED%84%B4%20vs%20%EC%8B%B1%EA%B8%80%ED%84%B4/#5","title":"5. \uc694\uc57d","text":"<p>\uba40\ud2f0\ud134\uc740 \ub300\ud654\uc758 \ud750\ub984\uc744 \uae30\uc5b5\ud558\uba70 \uc0ac\uc6a9\uc790\uc640 \uc9c0\uc18d\uc801 \uc0c1\ud638\uc791\uc6a9\uc744 \uac00\ub2a5\ud558\uac8c \ud558\ub294 \ubc29\uc2dd\uc774\uace0, \uc2f1\uae00\ud134\uc740 \uc989\uac01\uc801\uc774\uace0 \ub3c5\ub9bd\uc801\uc778 \uc9c8\ubb38-\uc751\ub2f5\uc5d0 \uc801\ud569\ud55c \ubc29\uc2dd\uc774\ub2e4. \ucc57\ubd07\uc758 \ubaa9\uc801\uc774 \ub2e8\uc21c\ud55c \uc815\ubcf4 \uc81c\uacf5\uc778\uc9c0, \uc544\ub2c8\uba74 \ub9e5\ub77d \uae30\ubc18 \uc751\ub2f5\uc744 \uc694\uad6c\ud558\ub294\uc9c0\uc5d0 \ub530\ub77c \uc801\uc808\ud55c \ubc29\uc2dd\uc744 \uc120\ud0dd\ud558\ub294 \uac83\uc774 \uc911\uc694\ud558\ub2e4.</p>"},{"location":"etc/macOS%EC%97%90%EC%84%9C%20USB%20%ED%8F%AC%EB%A7%B7%20%EC%8B%A4%ED%8C%A8%20%EC%8B%9C%20%ED%95%B4%EA%B2%B0%20%EB%B0%A9%EB%B2%95/","title":"macOS\uc5d0\uc11c USB \ud3ec\ub9f7 \uc2e4\ud328 \uc2dc \ud574\uacb0 \ubc29\ubc95","text":"<p>macOS\uc758 \ub514\uc2a4\ud06c \uc720\ud2f8\ub9ac\ud2f0(Disk Utility)\ub97c \uc774\uc6a9\ud574 USB\ub97c \ud3ec\ub9f7\ud558\ub824\uace0 \ud560 \ub54c, \uac04\ud639 \ud3ec\ub9f7\uc774 \uc2e4\ud328\ud558\ub294 \uacbd\uc6b0\uac00 \uc788\ub2e4. \ud2b9\ud788 \u201c\ud30c\ud2f0\uc158 \ub9f5\uc744 \uc218\uc815\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. (-69874)\u201d\ub77c\ub294 \uc624\ub958\uc640 \ud568\uaed8 \ub514\uc2a4\ud06c\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \ucd08\uae30\ud654\ub418\uc9c0 \uc54a\ub294 \uc0c1\ud669\uc774 \ubc1c\uc0dd\ud560 \uc218 \uc788\ub2e4. \uc774\ub7ec\ud55c \uacbd\uc6b0 \ud130\ubbf8\ub110\uc744 \ud1b5\ud574 \ubb38\uc81c\ub97c \ud574\uacb0\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"etc/macOS%EC%97%90%EC%84%9C%20USB%20%ED%8F%AC%EB%A7%B7%20%EC%8B%A4%ED%8C%A8%20%EC%8B%9C%20%ED%95%B4%EA%B2%B0%20%EB%B0%A9%EB%B2%95/#1","title":"1. \uc2e4\ud328 \uc99d\uc0c1","text":"<p>\ub514\uc2a4\ud06c \uc720\ud2f8\ub9ac\ud2f0\uc5d0\uc11c \"\ub514\uc2a4\ud06c \uc9c0\uc6b0\uae30\"\ub97c \uc2e4\ud589\ud588\uc9c0\ub9cc \ub2e4\uc74c\uacfc \uac19\uc740 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\ub2e4.</p> <pre><code>'\ub514\uc2a4\ud06c \uc9c0\uc6b0\uace0 \uc0dd\uc131 \uc911'\n\uc9c0\uc6b0\uae30 \uc791\uc5c5\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \uacc4\uc18d\ud558\ub824\uba74 \uc644\ub8cc\ub97c \ud074\ub9ad\ud558\uc2ed\uc2dc\uc624.\n\ud30c\ud2f0\uc158 \ub9f5\uc744 \uc218\uc815\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. (-69874)\n</code></pre> <p>\uc774 \uacbd\uc6b0 GUI \ubc29\uc2dd\uc73c\ub85c\ub294 \ub354 \uc774\uc0c1 \uc9c4\ud589\ud560 \uc218 \uc5c6\uc73c\ubbc0\ub85c, \ud130\ubbf8\ub110\uc5d0\uc11c \uc218\ub3d9\uc73c\ub85c \ub514\uc2a4\ud06c\ub97c \ud3ec\ub9f7\ud558\ub294 \ubc29\uc2dd\uc73c\ub85c \ud574\uacb0\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"etc/macOS%EC%97%90%EC%84%9C%20USB%20%ED%8F%AC%EB%A7%B7%20%EC%8B%A4%ED%8C%A8%20%EC%8B%9C%20%ED%95%B4%EA%B2%B0%20%EB%B0%A9%EB%B2%95/#2","title":"2. \ud130\ubbf8\ub110\uc744 \ud1b5\ud55c \ud3ec\ub9f7 \uc808\ucc28","text":""},{"location":"etc/macOS%EC%97%90%EC%84%9C%20USB%20%ED%8F%AC%EB%A7%B7%20%EC%8B%A4%ED%8C%A8%20%EC%8B%9C%20%ED%95%B4%EA%B2%B0%20%EB%B0%A9%EB%B2%95/#1_1","title":"(1) \ub514\uc2a4\ud06c \ubaa9\ub85d \ud655\uc778","text":"<p>\uba3c\uc800 \ud130\ubbf8\ub110\uc744 \uc5f4\uace0 \uc5f0\uacb0\ub41c \ub514\uc2a4\ud06c \ubaa9\ub85d\uc744 \ud655\uc778\ud55c\ub2e4.</p> <pre><code>diskutil list\n</code></pre> <p>\uc774 \uba85\ub839\uc744 \uc2e4\ud589\ud558\uba74 <code>/dev/disk4</code>, <code>/dev/disk5</code> \ub4f1 \ub2e4\uc591\ud55c \ub514\uc2a4\ud06c\uac00 \ucd9c\ub825\ub418\uba70, USB \uc7a5\uce58\uc5d0 \ud574\ub2f9\ud558\ub294 \ub514\uc2a4\ud06c \ubc88\ud638\ub97c \ud655\uc778\ud560 \uc218 \uc788\ub2e4. \uc6a9\ub7c9\uc774\ub098 \uc774\ub984 \ub4f1\uc744 \ubcf4\uace0 \ud310\ub2e8\ud55c\ub2e4.</p>"},{"location":"etc/macOS%EC%97%90%EC%84%9C%20USB%20%ED%8F%AC%EB%A7%B7%20%EC%8B%A4%ED%8C%A8%20%EC%8B%9C%20%ED%95%B4%EA%B2%B0%20%EB%B0%A9%EB%B2%95/#2_1","title":"(2) \ub514\uc2a4\ud06c \uc5b8\ub9c8\uc6b4\ud2b8","text":"<p>\ub514\uc2a4\ud06c\uac00 \ub9c8\uc6b4\ud2b8\ub41c \uc0c1\ud0dc\uc5d0\uc11c\ub294 \ud3ec\ub9f7\uc774 \ub418\uc9c0 \uc54a\uc73c\ubbc0\ub85c, \uc6b0\uc120 \uc5b8\ub9c8\uc6b4\ud2b8\ub97c \uc218\ud589\ud55c\ub2e4.</p> <pre><code>diskutil unmountDisk /dev/disk4\n</code></pre> <p><code>Unmount of all volumes on disk4 was successful</code> \uba54\uc2dc\uc9c0\uac00 \ucd9c\ub825\ub418\uba74 \uc131\uacf5\uc801\uc73c\ub85c \uc5b8\ub9c8\uc6b4\ud2b8\ub41c \uac83\uc774\ub2e4.</p>"},{"location":"etc/macOS%EC%97%90%EC%84%9C%20USB%20%ED%8F%AC%EB%A7%B7%20%EC%8B%A4%ED%8C%A8%20%EC%8B%9C%20%ED%95%B4%EA%B2%B0%20%EB%B0%A9%EB%B2%95/#3","title":"(3) \ub514\uc2a4\ud06c \ud3ec\ub9f7","text":"<p>\uc774\uc81c \ud574\ub2f9 \ub514\uc2a4\ud06c\ub97c FAT32 \ud615\uc2dd(MS-DOS)\uacfc MBR \ud30c\ud2f0\uc158 \ub9f5\uc73c\ub85c \ud3ec\ub9f7\ud55c\ub2e4.</p> <pre><code>diskutil eraseDisk MS-DOS \"USB\" MBR /dev/disk4\n</code></pre> <ul> <li> <p><code>\"USB\"</code>\ub294 \ud3ec\ub9f7 \ud6c4 \ub514\uc2a4\ud06c\uc5d0 \ud45c\uc2dc\ub420 \uc774\ub984\uc774\ub2e4. \uc790\uc720\ub86d\uac8c \ubcc0\uacbd \uac00\ub2a5\ud558\ub2e4.</p> </li> <li> <p><code>MS-DOS</code>\ub294 FAT32 \ud30c\uc77c \uc2dc\uc2a4\ud15c\uc744 \uc758\ubbf8\ud558\uba70, <code>MBR</code>\uc740 \ub9c8\uc2a4\ud130 \ubd80\ud2b8 \ub808\ucf54\ub4dc \ubc29\uc2dd\uc758 \ud30c\ud2f0\uc158\uc774\ub2e4.</p> </li> </ul> <p>\uc791\uc5c5\uc774 \uc644\ub8cc\ub418\uba74 \ub2e4\uc74c\uacfc \uac19\uc740 \uba54\uc2dc\uc9c0\uac00 \ucd9c\ub825\ub41c\ub2e4.</p> <pre><code>Finished erase on disk4\n</code></pre> <p>\uc774\ub85c\uc368 USB \ud3ec\ub9f7\uc774 \uc131\uacf5\uc801\uc73c\ub85c \uc644\ub8cc\ub41c \uac83\uc774\ub2e4.</p>"},{"location":"etc/macOS%EC%97%90%EC%84%9C%20USB%20%ED%8F%AC%EB%A7%B7%20%EC%8B%A4%ED%8C%A8%20%EC%8B%9C%20%ED%95%B4%EA%B2%B0%20%EB%B0%A9%EB%B2%95/#3_1","title":"3. \ud3ec\ub9f7 \uc131\uacf5 \uc5ec\ubd80 \ud655\uc778","text":"<p>Finder\uc5d0\uc11c USB\uac00 <code>\"USB\"</code>\ub77c\ub294 \uc774\ub984\uc73c\ub85c \uc790\ub3d9 \ub9c8\uc6b4\ud2b8\ub418\uba70 \uc815\uc0c1\uc801\uc73c\ub85c \uc778\uc2dd\ub418\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4. \ud130\ubbf8\ub110\uc5d0\uc11c \ub2e4\uc74c \uba85\ub839\uc5b4\ub85c\ub3c4 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>diskutil info /Volumes/USB\n</code></pre> <p>\ucd9c\ub825 \uacb0\uacfc\uc5d0\uc11c \ub2e4\uc74c\uacfc \uac19\uc740 \ud56d\ubaa9\uc744 \ud655\uc778\ud558\uba74 \ub41c\ub2e4.</p> <ul> <li> <p><code>File System: MS-DOS (FAT32)</code></p> </li> <li> <p><code>Writable: Yes</code></p> </li> </ul>"},{"location":"etc/macOS%EC%97%90%EC%84%9C%20USB%20%ED%8F%AC%EB%A7%B7%20%EC%8B%A4%ED%8C%A8%20%EC%8B%9C%20%ED%95%B4%EA%B2%B0%20%EB%B0%A9%EB%B2%95/#4","title":"4. \ub9c8\ubb34\ub9ac","text":"<p>macOS\uc5d0\uc11c \ub514\uc2a4\ud06c \uc720\ud2f8\ub9ac\ud2f0\ub97c \ud1b5\ud55c \ud3ec\ub9f7\uc774 \uc2e4\ud328\ud558\ub354\ub77c\ub3c4, \ud130\ubbf8\ub110\uc744 \ud65c\uc6a9\ud558\uba74 \ub300\ubd80\ubd84\uc758 \ubb38\uc81c\ub97c \ud574\uacb0\ud560 \uc218 \uc788\ub2e4. \ud2b9\ud788 <code>diskutil</code> \uba85\ub839\uc5b4\ub294 \ub514\uc2a4\ud06c \uad00\ub9ac\uc5d0 \ub9e4\uc6b0 \uac15\ub825\ud55c \ub3c4\uad6c\uc774\ubbc0\ub85c \uc775\uc219\ud574\ub450\uba74 \ub2e4\uc591\ud55c \uc0c1\ud669\uc5d0 \uc720\uc6a9\ud558\uac8c \ud65c\uc6a9\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"infra/","title":"Infra","text":""},{"location":"infra/#infra","title":"Infra","text":"<p>\uc778\ud504\ub77c \ubc0f DevOps \uad00\ub828 \uae30\uc220 \ubb38\uc11c.</p>"},{"location":"infra/#_1","title":"\uc8fc\uc694 \uc2a4\ud0dd","text":"<ul> <li>Kubernetes (K3s / K8s)</li> <li>ArgoCD \u2014 GitOps \ubc30\ud3ec</li> <li>Jenkins \u2014 CI/CD \ud30c\uc774\ud504\ub77c\uc778</li> <li>Docker \u2014 \ucee8\ud14c\uc774\ub108\ud654</li> <li>Cert-Manager \u2014 \uc778\uc99d\uc11c \uad00\ub9ac</li> <li>Observability \u2014 \ubaa8\ub2c8\ud130\ub9c1 &amp; \ub85c\uae45</li> </ul>"},{"location":"infra/Search-API%EC%99%80-LLMOps-Docker-%EA%B5%AC%EC%84%B1%EA%B8%B0/","title":"Search API\uc640 LLMOps Docker \uad6c\uc131\uae30","text":""},{"location":"infra/Search-API%EC%99%80-LLMOps-Docker-%EA%B5%AC%EC%84%B1%EA%B8%B0/#search-api-llmops-docker","title":"Search API\uc640 LLMOps Docker \uad6c\uc131\uae30","text":"<p>2024\ub144 11\uc6d4 \ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c \uac80\uc0c9 API \uc131\ub2a5 \ucd5c\uc801\ud654\uc640 LLMOps \ud30c\uc774\ud504\ub77c\uc778\uc758 Docker \ud658\uacbd \uad6c\uc131\uc744 \uc9c4\ud589\ud588\ub2e4. \uc774 \uacfc\uc815\uc5d0\uc11c \ub9c8\uc8fc\uce5c \uc544\ud0a4\ud14d\ucc98 \uc124\uacc4\uc640 \ucee8\ud14c\uc774\ub108\ud654 \uc804\ub7b5\uc744 \uacf5\uc720\ud55c\ub2e4.</p>"},{"location":"infra/Search-API%EC%99%80-LLMOps-Docker-%EA%B5%AC%EC%84%B1%EA%B8%B0/#_1","title":"\ubb38\uc81c \uc0c1\ud669","text":"<p>\uae30\uc874 XGEN 1.0 \ud50c\ub7ab\ud3fc\uc5d0\uc11c \ubca1\ud130 \uac80\uc0c9 API\uac00 \ub2e8\uc77c \uc778\uc2a4\ud134\uc2a4\ub85c \uc6b4\uc601\ub418\uba74\uc11c \uc5ec\ub7ec \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud588\ub2e4:</p> <ul> <li>\ud655\uc7a5\uc131 \uc774\uc288: \ub3d9\uc2dc \uc694\uccad \uc99d\uac00 \uc2dc \uc751\ub2f5 \uc18d\ub3c4 \uc800\ud558</li> <li>\uc758\uc874\uc131 \ucda9\ub3cc: Python \ud328\ud0a4\uc9c0 \ubc84\uc804 \ubd88\uc77c\uce58\ub85c \uc778\ud55c \ud658\uacbd \ubb38\uc81c  </li> <li>\ubc30\ud3ec \ubcf5\uc7a1\uc131: \ubaa8\ub378 \uc5c5\ub370\uc774\ud2b8 \uc2dc \uc804\uccb4 \uc11c\ube44\uc2a4 \uc7ac\uc2dc\uc791 \ud544\uc694</li> </ul> <p>\ud2b9\ud788 RAG \ud30c\uc774\ud504\ub77c\uc778\uc5d0\uc11c \ubca1\ud130 \uac80\uc0c9\uacfc \ud14d\uc2a4\ud2b8 \uc0dd\uc131\uc774 \ud558\ub098\uc758 \ucee8\ud14c\uc774\ub108\uc5d0\uc11c \uc2e4\ud589\ub418\uc5b4 \ub9ac\uc18c\uc2a4 \uacbd\ud569\uc774 \uc2ec\uac01\ud588\ub2e4.</p>"},{"location":"infra/Search-API%EC%99%80-LLMOps-Docker-%EA%B5%AC%EC%84%B1%EA%B8%B0/#_2","title":"\uc544\ud0a4\ud14d\ucc98 \uc124\uacc4","text":""},{"location":"infra/Search-API%EC%99%80-LLMOps-Docker-%EA%B5%AC%EC%84%B1%EA%B8%B0/#_3","title":"\ub9c8\uc774\ud06c\ub85c\uc11c\ube44\uc2a4 \ubd84\ub9ac","text":"<p>\uae30\uc874 \ubaa8\ub180\ub9ac\uc2dd \uad6c\uc870\ub97c \ub2e4\uc74c\uacfc \uac19\uc774 \ubd84\ub9ac\ud588\ub2e4:</p> <pre><code># docker-compose.yml\nversion: '3.8'\nservices:\n  search-api:\n    build: ./search-service\n    ports:\n      - \"8001:8000\"\n    environment:\n      - REDIS_URL=redis://redis:6379\n      - VECTOR_DB_URL=qdrant:6333\n    depends_on:\n      - redis\n      - qdrant\n\n  llm-service:\n    build: ./llm-service\n    ports:\n      - \"8002:8000\"\n    environment:\n      - MODEL_PATH=/models\n      - GPU_MEMORY_FRACTION=0.7\n    volumes:\n      - ./models:/models\n    deploy:\n      resources:\n        reservations:\n          devices:\n            - driver: nvidia\n              count: 1\n              capabilities: [gpu]\n\n  qdrant:\n    image: qdrant/qdrant:v1.6.1\n    ports:\n      - \"6333:6333\"\n    volumes:\n      - qdrant_storage:/qdrant/storage\n\n  redis:\n    image: redis:7-alpine\n    ports:\n      - \"6379:6379\"\n    volumes:\n      - redis_data:/data\n</code></pre>"},{"location":"infra/Search-API%EC%99%80-LLMOps-Docker-%EA%B5%AC%EC%84%B1%EA%B8%B0/#search-api","title":"Search API \ucd5c\uc801\ud654","text":"<p>\uac80\uc0c9 \uc11c\ube44\uc2a4\ub97c \ubcc4\ub3c4\ub85c \ubd84\ub9ac\ud558\uace0 \uc131\ub2a5\uc744 \ucd5c\uc801\ud654\ud588\ub2e4:</p> <pre><code># search_service/app.py\nfrom fastapi import FastAPI, HTTPException\nfrom qdrant_client import QdrantClient\nimport asyncio\nimport numpy as np\nfrom typing import List, Dict\n\napp = FastAPI(title=\"Search API v2\")\n\nclass SearchEngine:\n    def __init__(self):\n        self.qdrant = QdrantClient(url=\"http://qdrant:6333\")\n        self.redis = redis.Redis.from_url(\"redis://redis:6379\")\n\n    async def hybrid_search(\n        self, \n        query: str, \n        collection: str,\n        limit: int = 10,\n        score_threshold: float = 0.7\n    ) -&gt; List[Dict]:\n        \"\"\"\ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9: \ubca1\ud130 + \ud0a4\uc6cc\ub4dc \uac80\uc0c9 \uacb0\ud569\"\"\"\n\n        # 1. \ubca1\ud130 \uac80\uc0c9\n        vector_results = await self._vector_search(query, collection, limit*2)\n\n        # 2. \ud0a4\uc6cc\ub4dc \uac80\uc0c9 (BM25)\n        keyword_results = await self._keyword_search(query, collection, limit*2)\n\n        # 3. RRF (Reciprocal Rank Fusion) \uc801\uc6a9\n        combined_results = self._apply_rrf(vector_results, keyword_results)\n\n        # 4. \uc2a4\ucf54\uc5b4 \uc784\uacc4\uac12 \uc801\uc6a9\n        filtered_results = [\n            r for r in combined_results \n            if r['score'] &gt;= score_threshold\n        ]\n\n        return filtered_results[:limit]\n\n    def _apply_rrf(self, vector_results, keyword_results, k=60):\n        \"\"\"RRF \uc54c\uace0\ub9ac\uc998\uc73c\ub85c \uac80\uc0c9 \uacb0\uacfc \uc735\ud569\"\"\"\n        doc_scores = {}\n\n        # \ubca1\ud130 \uac80\uc0c9 \uc810\uc218\n        for rank, result in enumerate(vector_results):\n            doc_id = result['id']\n            doc_scores[doc_id] = doc_scores.get(doc_id, 0) + 1/(k + rank + 1)\n\n        # \ud0a4\uc6cc\ub4dc \uac80\uc0c9 \uc810\uc218  \n        for rank, result in enumerate(keyword_results):\n            doc_id = result['id']\n            doc_scores[doc_id] = doc_scores.get(doc_id, 0) + 1/(k + rank + 1)\n\n        # \uc810\uc218\uc21c \uc815\ub82c\n        sorted_docs = sorted(doc_scores.items(), key=lambda x: x[1], reverse=True)\n        return [{'id': doc_id, 'score': score} for doc_id, score in sorted_docs]\n\n@app.post(\"/search/hybrid\")\nasync def hybrid_search(request: SearchRequest):\n    try:\n        results = await search_engine.hybrid_search(\n            query=request.query,\n            collection=request.collection,\n            limit=request.limit,\n            score_threshold=request.score_threshold\n        )\n        return {\"results\": results, \"total\": len(results)}\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=str(e))\n</code></pre>"},{"location":"infra/Search-API%EC%99%80-LLMOps-Docker-%EA%B5%AC%EC%84%B1%EA%B8%B0/#llmops","title":"LLMOps \ud30c\uc774\ud504\ub77c\uc778","text":"<p>\ubaa8\ub378 \ud559\uc2b5\ubd80\ud130 \ubc30\ud3ec\uae4c\uc9c0\uc758 \uc804\uccb4 \ud30c\uc774\ud504\ub77c\uc778\uc744 Docker\ub85c \ud45c\uc900\ud654\ud588\ub2e4:</p> <pre><code># llm-service/Dockerfile\nFROM nvidia/cuda:11.8-devel-ubuntu22.04\n\n# Python \ud658\uacbd \uc124\uc815\nRUN apt-get update &amp;&amp; apt-get install -y \\\n    python3.10 \\\n    python3-pip \\\n    git \\\n    &amp;&amp; rm -rf /var/lib/apt/lists/*\n\n# CUDA \ud658\uacbd \ubcc0\uc218\nENV CUDA_HOME=/usr/local/cuda\nENV PATH=$CUDA_HOME/bin:$PATH\nENV LD_LIBRARY_PATH=$CUDA_HOME/lib64:$LD_LIBRARY_PATH\n\n# \uc758\uc874\uc131 \uc124\uce58\nCOPY requirements.txt .\nRUN pip install --no-cache-dir -r requirements.txt\n\n# \ubaa8\ub378 \ucd5c\uc801\ud654 \uc2a4\ud06c\ub9bd\ud2b8\nCOPY scripts/optimize_model.py /app/scripts/\nCOPY src/ /app/src/\n\nWORKDIR /app\n\n# \ubaa8\ub378 \ub85c\ub529 \ucd5c\uc801\ud654\nENV TRANSFORMERS_CACHE=/models/cache\nENV HF_HOME=/models/cache\nENV TORCH_CACHE_DIR=/models/cache\n\nCMD [\"python\", \"src/main.py\"]\n</code></pre> <p>\ubaa8\ub378 \ucd5c\uc801\ud654 \uc2a4\ud06c\ub9bd\ud2b8:</p> <pre><code># scripts/optimize_model.py\nimport torch\nfrom transformers import AutoModelForCausalLM, AutoTokenizer\nfrom optimum.onnxruntime import ORTModelForCausalLM\nimport logging\n\ndef optimize_model(model_path: str, output_path: str):\n    \"\"\"\ubaa8\ub378 \ucd5c\uc801\ud654: ONNX \ubcc0\ud658 + \uc591\uc790\ud654\"\"\"\n\n    logger = logging.getLogger(__name__)\n\n    # 1. \uc6d0\ubcf8 \ubaa8\ub378 \ub85c\ub529\n    logger.info(f\"Loading model from {model_path}\")\n    model = AutoModelForCausalLM.from_pretrained(\n        model_path,\n        torch_dtype=torch.float16,\n        device_map=\"auto\"\n    )\n    tokenizer = AutoTokenizer.from_pretrained(model_path)\n\n    # 2. ONNX \ubcc0\ud658\n    logger.info(\"Converting to ONNX...\")\n    ort_model = ORTModelForCausalLM.from_pretrained(\n        model_path,\n        export=True,\n        device_map=\"cuda:0\"\n    )\n\n    # 3. \ub3d9\uc801 \uc591\uc790\ud654 \uc801\uc6a9\n    from onnxruntime.quantization import quantize_dynamic, QuantType\n\n    logger.info(\"Applying dynamic quantization...\")\n    quantized_model_path = f\"{output_path}/model_quantized.onnx\"\n    quantize_dynamic(\n        f\"{output_path}/model.onnx\",\n        quantized_model_path,\n        weight_type=QuantType.QInt8\n    )\n\n    # 4. \uc131\ub2a5 \ubca4\uce58\ub9c8\ud06c\n    benchmark_results = benchmark_model(ort_model, tokenizer)\n    logger.info(f\"Optimization complete. Performance: {benchmark_results}\")\n\n    return {\n        \"model_path\": quantized_model_path,\n        \"tokenizer_path\": output_path,\n        \"performance\": benchmark_results\n    }\n\ndef benchmark_model(model, tokenizer, num_samples=100):\n    \"\"\"\ubaa8\ub378 \uc131\ub2a5 \ubca4\uce58\ub9c8\ud06c\"\"\"\n    import time\n\n    prompt = \"\uc778\uacf5\uc9c0\ub2a5\uc758 \ubbf8\ub798\uc5d0 \ub300\ud574 \uc124\uba85\ud574\uc8fc\uc138\uc694.\"\n    inputs = tokenizer(prompt, return_tensors=\"pt\")\n\n    # \uc6cc\ubc0d\uc5c5\n    for _ in range(10):\n        with torch.no_grad():\n            model.generate(**inputs, max_length=100, do_sample=False)\n\n    # \uc2e4\uc81c \uce21\uc815\n    start_time = time.time()\n    for _ in range(num_samples):\n        with torch.no_grad():\n            outputs = model.generate(**inputs, max_length=100, do_sample=False)\n\n    total_time = time.time() - start_time\n    avg_latency = total_time / num_samples\n    throughput = num_samples / total_time\n\n    return {\n        \"avg_latency_ms\": avg_latency * 1000,\n        \"throughput_samples_per_sec\": throughput,\n        \"total_samples\": num_samples\n    }\n</code></pre>"},{"location":"infra/Search-API%EC%99%80-LLMOps-Docker-%EA%B5%AC%EC%84%B1%EA%B8%B0/#cicd","title":"CI/CD \ud30c\uc774\ud504\ub77c\uc778","text":"<p>Jenkins\ub97c \ud65c\uc6a9\ud55c \uc790\ub3d9\ud654\ub41c \ubc30\ud3ec \ud30c\uc774\ud504\ub77c\uc778\uc744 \uad6c\uc131\ud588\ub2e4:</p> <pre><code>// Jenkinsfile\npipeline {\n    agent any\n\n    environment {\n        DOCKER_REGISTRY = 'registry.x2bee.com'\n        KUBECONFIG = credentials('k3s-config')\n    }\n\n    stages {\n        stage('Test') {\n            steps {\n                script {\n                    sh 'docker-compose -f docker-compose.test.yml up --abort-on-container-exit'\n                }\n            }\n        }\n\n        stage('Build') {\n            parallel {\n                stage('Search API') {\n                    steps {\n                        script {\n                            def searchImage = docker.build(\n                                \"${DOCKER_REGISTRY}/xgen/search-api:${BUILD_NUMBER}\",\n                                \"./search-service\"\n                            )\n                            searchImage.push()\n                        }\n                    }\n                }\n                stage('LLM Service') {\n                    steps {\n                        script {\n                            def llmImage = docker.build(\n                                \"${DOCKER_REGISTRY}/xgen/llm-service:${BUILD_NUMBER}\",\n                                \"./llm-service\"\n                            )\n                            llmImage.push()\n                        }\n                    }\n                }\n            }\n        }\n\n        stage('Deploy') {\n            steps {\n                script {\n                    sh '''\n                        helm upgrade --install xgen-stack ./helm-chart \\\n                            --set searchApi.image.tag=${BUILD_NUMBER} \\\n                            --set llmService.image.tag=${BUILD_NUMBER} \\\n                            --namespace xgen \\\n                            --wait\n                    '''\n                }\n            }\n        }\n    }\n\n    post {\n        success {\n            slackSend(\n                channel: '#xgen-deploy',\n                message: \"\u2705 XGEN Stack v${BUILD_NUMBER} \ubc30\ud3ec \uc644\ub8cc\"\n            )\n        }\n        failure {\n            slackSend(\n                channel: '#xgen-deploy',\n                message: \"\u274c XGEN Stack v${BUILD_NUMBER} \ubc30\ud3ec \uc2e4\ud328\"\n            )\n        }\n    }\n}\n</code></pre>"},{"location":"infra/Search-API%EC%99%80-LLMOps-Docker-%EA%B5%AC%EC%84%B1%EA%B8%B0/#_4","title":"\uc131\ub2a5 \uacb0\uacfc","text":"<p>\ucd5c\uc801\ud654 \ud6c4 \ub2e4\uc74c\uacfc \uac19\uc740 \uc131\ub2a5 \uac1c\uc120\uc744 \ud655\uc778\ud588\ub2e4:</p>"},{"location":"infra/Search-API%EC%99%80-LLMOps-Docker-%EA%B5%AC%EC%84%B1%EA%B8%B0/#api","title":"\uac80\uc0c9 API \uc131\ub2a5","text":"<ul> <li>\uc751\ub2f5 \uc2dc\uac04: \ud3c9\uade0 1.2\ucd08 \u2192 0.3\ucd08 (75% \uac1c\uc120)</li> <li>\ub3d9\uc2dc \ucc98\ub9ac: 50 RPS \u2192 200 RPS (4\ubc30 \ud5a5\uc0c1)</li> <li>\uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9: 8GB \u2192 3GB (62% \uac10\uc18c)</li> </ul>"},{"location":"infra/Search-API%EC%99%80-LLMOps-Docker-%EA%B5%AC%EC%84%B1%EA%B8%B0/#llm","title":"LLM \uc11c\ube44\uc2a4 \uc131\ub2a5","text":"<ul> <li>\ucd94\ub860 \uc18d\ub3c4: 15 tokens/sec \u2192 45 tokens/sec (3\ubc30 \ud5a5\uc0c1)</li> <li>GPU \uba54\ubaa8\ub9ac: 12GB \u2192 8GB (33% \uc808\uc57d)</li> <li>Cold start: 30\ucd08 \u2192 5\ucd08 (83% \ub2e8\ucd95)</li> </ul>"},{"location":"infra/Search-API%EC%99%80-LLMOps-Docker-%EA%B5%AC%EC%84%B1%EA%B8%B0/#_5","title":"\ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9 \uc815\ud655\ub3c4","text":"<pre><code># \uc131\ub2a5 \ud14c\uc2a4\ud2b8 \uacb0\uacfc\ntest_results = {\n    \"precision_at_5\": 0.87,      # \uae30\uc874: 0.72\n    \"recall_at_10\": 0.94,        # \uae30\uc874: 0.81  \n    \"f1_score\": 0.90,            # \uae30\uc874: 0.76\n    \"avg_query_time\": \"0.3s\"     # \uae30\uc874: 1.2s\n}\n</code></pre>"},{"location":"infra/Search-API%EC%99%80-LLMOps-Docker-%EA%B5%AC%EC%84%B1%EA%B8%B0/#_6","title":"\uc6b4\uc601 \uacbd\ud5d8\uacfc \uad50\ud6c8","text":""},{"location":"infra/Search-API%EC%99%80-LLMOps-Docker-%EA%B5%AC%EC%84%B1%EA%B8%B0/#1","title":"1. \ucee8\ud14c\uc774\ub108 \ub9ac\uc18c\uc2a4 \uad00\ub9ac","text":"<p>GPU \uba54\ubaa8\ub9ac \ud560\ub2f9\uc744 \uc138\ubc00\ud558\uac8c \uc870\uc815\ud574\uc57c \ud55c\ub2e4. \ucd08\uae30\uc5d0 \uc804\uccb4 GPU \uba54\ubaa8\ub9ac\ub97c \ud560\ub2f9\ud588\ub2e4\uac00 OOM \uc5d0\ub7ec\uac00 \ube48\ubc88\ud788 \ubc1c\uc0dd\ud588\ub2e4.</p> <pre><code># GPU \uba54\ubaa8\ub9ac \uc81c\ud55c \uc124\uc815\ndeploy:\n  resources:\n    reservations:\n      devices:\n        - driver: nvidia\n          count: 1\n          capabilities: [gpu]\n    limits:\n      memory: 16G\n</code></pre>"},{"location":"infra/Search-API%EC%99%80-LLMOps-Docker-%EA%B5%AC%EC%84%B1%EA%B8%B0/#2","title":"2. \ubaa8\ub378 \uce90\uc2dc \uc804\ub7b5","text":"<p>\ubaa8\ub378 \ub85c\ub529 \uc2dc\uac04\uc744 \uc904\uc774\uae30 \uc704\ud574 \ub2e4\uce35 \uce90\uc2dc \uad6c\uc870\ub97c \uc801\uc6a9\ud588\ub2e4: - L1: Redis \uc778\uba54\ubaa8\ub9ac \uce90\uc2dc (\uc790\uc8fc \uc0ac\uc6a9\ud558\ub294 \uacb0\uacfc) - L2: \ub85c\uceec SSD \uce90\uc2dc (\ubaa8\ub378 \uac00\uc911\uce58) - L3: \ub124\ud2b8\uc6cc\ud06c \uc2a4\ud1a0\ub9ac\uc9c0 (\uc804\uccb4 \ubaa8\ub378)</p>"},{"location":"infra/Search-API%EC%99%80-LLMOps-Docker-%EA%B5%AC%EC%84%B1%EA%B8%B0/#3","title":"3. \ubaa8\ub2c8\ud130\ub9c1 \ud544\uc218 \uba54\ud2b8\ub9ad","text":"<pre><code># Prometheus \uba54\ud2b8\ub9ad \uc815\uc758\nfrom prometheus_client import Counter, Histogram, Gauge\n\nREQUEST_COUNT = Counter('search_requests_total', 'Total search requests')\nREQUEST_LATENCY = Histogram('search_request_duration_seconds', 'Search request latency')\nGPU_MEMORY_USAGE = Gauge('gpu_memory_usage_bytes', 'GPU memory usage')\nMODEL_LOAD_TIME = Histogram('model_load_duration_seconds', 'Model loading time')\n</code></pre>"},{"location":"infra/Search-API%EC%99%80-LLMOps-Docker-%EA%B5%AC%EC%84%B1%EA%B8%B0/#_7","title":"\ub9c8\ubb34\ub9ac","text":"<p>\uc774\ubc88 \ud504\ub85c\uc81d\ud2b8\ub97c \ud1b5\ud574 LLMOps \ud30c\uc774\ud504\ub77c\uc778\uc758 \uc911\uc694\uc131\uc744 \ub2e4\uc2dc \ud55c\ubc88 \uae68\ub2ec\uc558\ub2e4. \ub2e8\uc21c\ud788 \ubaa8\ub378\uc744 \uc11c\ube59\ud558\ub294 \uac83\uc744 \ub118\uc5b4\uc11c, \uc804\uccb4 \uc778\ud504\ub77c\ub97c \ucf54\ub4dc\ub85c \uad00\ub9ac\ud558\uace0 \uc790\ub3d9\ud654\ud558\ub294 \uac83\uc774 \uc7a5\uae30\uc801\uc73c\ub85c \ud6e8\uc52c \ud6a8\uc728\uc801\uc774\ub2e4.</p> <p>\ud2b9\ud788 Docker \ucee8\ud14c\uc774\ub108\ud654\ub97c \ud1b5\ud574 \uac1c\ubc1c-\uc2a4\ud14c\uc774\uc9d5-\ud504\ub85c\ub355\uc158 \ud658\uacbd\uc758 \uc77c\uad00\uc131\uc744 \ubcf4\uc7a5\ud560 \uc218 \uc788\uc5c8\uace0, \uc774\ub294 \ubc84\uadf8 \ucd94\uc801\uacfc \ub514\ubc84\uae45\uc5d0 \ud070 \ub3c4\uc6c0\uc774 \ub418\uc5c8\ub2e4.</p> <p>\ub2e4\uc74c \ub2e8\uacc4\ub85c\ub294 Kubernetes \uae30\ubc18 \uc624\ud1a0\uc2a4\ucf00\uc77c\ub9c1\uacfc A/B \ud14c\uc2a4\ud2b8 \uc790\ub3d9\ud654\ub97c \uacc4\ud68d\ud558\uace0 \uc788\ub2e4. MLOps\uc758 \uc5ec\uc815\uc740 \uacc4\uc18d\ub41c\ub2e4! \ud83d\ude80</p>"},{"location":"infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/","title":"XGEN 2.0 \uc778\ud504\ub77c: K8s + ArgoCD \uc6b4\uc601 \ubc30\ud3ec","text":""},{"location":"infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/#xgen-20-k8s-argocd","title":"XGEN 2.0 \uc778\ud504\ub77c: K8s + ArgoCD \uc6b4\uc601 \ubc30\ud3ec","text":"<p>2026.01 | K3s, ArgoCD, Istio, Grafana, Prometheus, GitOps</p>"},{"location":"infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/#_1","title":"\uac1c\uc694","text":"<p>XGEN 2.0\uc744 \uc6b4\uc601 \ud658\uacbd\uc5d0 \ubc30\ud3ec\ud558\uba74\uc11c \uac00\uc7a5 \uc911\uc694\ud55c \ubaa9\ud45c\ub294 \ubb34\uc911\ub2e8 \uc11c\ube44\uc2a4\uc640 \uad00\uce21 \uac00\ub2a5\uc131(Observability)\uc774\uc5c8\ub2e4. \ub2e8\uc21c\ud55c \ucee8\ud14c\uc774\ub108 \ubc30\ud3ec\ub97c \ub118\uc5b4\uc11c \uc7a5\uc560 \uc0c1\ud669\uc744 \uc989\uc2dc \uac10\uc9c0\ud558\uace0 \ub300\uc751\ud560 \uc218 \uc788\ub294 \uc644\uc804\ud55c DevOps \ud30c\uc774\ud504\ub77c\uc778\uc744 \uad6c\ucd95\ud574\uc57c \ud588\ub2e4.</p>"},{"location":"infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/#_2","title":"\uc544\ud0a4\ud14d\ucc98 \uc124\uacc4","text":""},{"location":"infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/#k3s","title":"K3s \uae30\ubc18 \uacbd\ub7c9\ud654 \ud074\ub7ec\uc2a4\ud130","text":"<p>\uc6b4\uc601 \uc11c\ubc84\uc758 \ub9ac\uc18c\uc2a4 \ud6a8\uc728\uc131\uc744 \uc704\ud574 K3s\ub97c \uc120\ud0dd\ud588\ub2e4. \uc804\uccb4 \ud074\ub7ec\uc2a4\ud130 \uad6c\uc131:</p> <pre><code># k3s \uc124\uce58 \uc2a4\ud06c\ub9bd\ud2b8\ncurl -sfL https://get.k3s.io | INSTALL_K3S_EXEC=\"server\" \\\n  K3S_TOKEN=\"your-cluster-token\" \\\n  INSTALL_K3S_VERSION=\"v1.28.5+k3s1\" \\\n  sh -s - \\\n  --disable traefik \\\n  --disable servicelb \\\n  --write-kubeconfig-mode 644 \\\n  --node-taint CriticalAddonsOnly=true:NoExecute\n</code></pre>"},{"location":"infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/#service-mesh-istio","title":"Service Mesh (Istio) \uad6c\uc131","text":"<p>\ub9c8\uc774\ud06c\ub85c\uc11c\ube44\uc2a4 \uac04 \ud1b5\uc2e0\uacfc \ud2b8\ub798\ud53d \uad00\ub9ac\ub97c \uc704\ud574 Istio\ub97c \ub3c4\uc785\ud588\ub2e4:</p> <pre><code># istio-config.yaml\napiVersion: install.istio.io/v1alpha1\nkind: IstioOperator\nmetadata:\n  name: control-plane\nspec:\n  values:\n    pilot:\n      env:\n        EXTERNAL_ISTIOD: false\n    gateways:\n      istio-ingressgateway:\n        type: NodePort\n        ports:\n        - port: 15021\n          targetPort: 15021\n          name: status-port\n          nodePort: 30021\n        - port: 80\n          targetPort: 8080\n          name: http2\n          nodePort: 30080\n        - port: 443\n          targetPort: 8443\n          name: https\n          nodePort: 30443\n</code></pre>"},{"location":"infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/#gitops-with-argocd","title":"GitOps with ArgoCD","text":"<p>\ucf54\ub4dc \ubcc0\uacbd\ubd80\ud130 \uc6b4\uc601 \ubc30\ud3ec\uae4c\uc9c0 \uc644\uc804 \uc790\ub3d9\ud654\ub41c \ud30c\uc774\ud504\ub77c\uc778\uc744 \uad6c\ucd95\ud588\ub2e4:</p> <pre><code># argocd/applications/xgen-services.yaml\napiVersion: argoproj.io/v1alpha1\nkind: Application\nmetadata:\n  name: xgen-services\n  namespace: argocd\nspec:\n  project: xgen-project\n  source:\n    repoURL: 'https://gitlab.x2bee.com/xgen2.0/xgen-infra.git'\n    targetRevision: main\n    path: k8s/services\n  destination:\n    server: 'https://kubernetes.default.svc'\n    namespace: xgen\n  syncPolicy:\n    automated:\n      prune: true\n      selfHeal: true\n    syncOptions:\n    - CreateNamespace=true\n    - ApplyOutOfSyncOnly=true\n</code></pre>"},{"location":"infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/#observability","title":"Observability \uc2a4\ud0dd \uad6c\ucd95","text":""},{"location":"infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/#prometheus-grafana","title":"Prometheus + Grafana \ubaa8\ub2c8\ud130\ub9c1","text":"<p>\uc2dc\uc2a4\ud15c \uba54\ud2b8\ub9ad\uacfc \ube44\uc988\ub2c8\uc2a4 \uba54\ud2b8\ub9ad\uc744 \ud1b5\ud569 \uc218\uc9d1\ud558\ub294 \ud658\uacbd\uc744 \uad6c\ucd95\ud588\ub2e4:</p> <pre><code># k8s/observability/prometheus.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: prometheus\n  namespace: observability\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: prometheus\n  template:\n    spec:\n      containers:\n      - name: prometheus\n        image: prom/prometheus:v2.45.0\n        ports:\n        - containerPort: 9090\n        volumeMounts:\n        - name: config\n          mountPath: /etc/prometheus/prometheus.yml\n          subPath: prometheus.yml\n        - name: storage\n          mountPath: /prometheus\n        args:\n        - '--config.file=/etc/prometheus/prometheus.yml'\n        - '--storage.tsdb.path=/prometheus'\n        - '--web.console.libraries=/etc/prometheus/console_libraries'\n        - '--web.console.templates=/etc/prometheus/consoles'\n        - '--storage.tsdb.retention.time=15d'\n        - '--web.enable-lifecycle'\n      volumes:\n      - name: config\n        configMap:\n          name: prometheus-config\n      - name: storage\n        persistentVolumeClaim:\n          claimName: prometheus-storage\n</code></pre>"},{"location":"infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/#_3","title":"\ud1b5\ud569 \ub300\uc2dc\ubcf4\ub4dc \uad6c\uc131","text":"<p>\uc6b4\uc601\uc9c4\uc774 \ud55c \ub208\uc5d0 \uc2dc\uc2a4\ud15c \uc0c1\ud0dc\ub97c \ud30c\uc545\ud560 \uc218 \uc788\ub294 \ub300\uc2dc\ubcf4\ub4dc\ub97c \uc81c\uc791\ud588\ub2e4:</p> <pre><code>{\n  \"dashboard\": {\n    \"title\": \"XGEN Overview\",\n    \"panels\": [\n      {\n        \"title\": \"Service Health\",\n        \"type\": \"stat\",\n        \"targets\": [\n          {\n            \"expr\": \"up{job=~\\\"xgen-.*\\\"}\"\n          }\n        ]\n      },\n      {\n        \"title\": \"CPU Usage by Service\",\n        \"type\": \"graph\",\n        \"targets\": [\n          {\n            \"expr\": \"rate(container_cpu_usage_seconds_total{namespace=\\\"xgen\\\",container!=\\\"POD\\\"}[5m]) * 100\"\n          }\n        ]\n      },\n      {\n        \"title\": \"Memory Usage\",\n        \"type\": \"graph\", \n        \"targets\": [\n          {\n            \"expr\": \"container_memory_working_set_bytes{namespace=\\\"xgen\\\",container!=\\\"POD\\\"} / 1024 / 1024\"\n          }\n        ]\n      },\n      {\n        \"title\": \"Request Rate\",\n        \"type\": \"graph\",\n        \"targets\": [\n          {\n            \"expr\": \"rate(istio_requests_total{destination_namespace=\\\"xgen\\\"}[5m])\"\n          }\n        ]\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/#loki","title":"Loki\ub97c \uc774\uc6a9\ud55c \uc911\uc559\ud654 \ub85c\uae45","text":"<p>\ubaa8\ub4e0 \uc11c\ube44\uc2a4\uc758 \ub85c\uadf8\ub97c \uc911\uc559\uc5d0\uc11c \uc218\uc9d1\ud558\uace0 \uac80\uc0c9\ud560 \uc218 \uc788\ub294 \uc2dc\uc2a4\ud15c\uc744 \uad6c\ucd95\ud588\ub2e4:</p> <pre><code># k8s/observability/promtail-daemonset.yaml\napiVersion: apps/v1\nkind: DaemonSet\nmetadata:\n  name: promtail\n  namespace: observability\nspec:\n  selector:\n    matchLabels:\n      app: promtail\n  template:\n    spec:\n      serviceAccount: promtail\n      containers:\n      - name: promtail\n        image: grafana/promtail:2.9.0\n        args:\n        - -config.file=/etc/promtail/config.yml\n        env:\n        - name: HOSTNAME\n          valueFrom:\n            fieldRef:\n              fieldPath: spec.nodeName\n        volumeMounts:\n        - name: config\n          mountPath: /etc/promtail\n        - name: varlog\n          mountPath: /var/log\n          readOnly: true\n        - name: varlibdockercontainers\n          mountPath: /var/lib/docker/containers\n          readOnly: true\n        - name: positions\n          mountPath: /tmp/positions\n      volumes:\n      - name: config\n        configMap:\n          name: promtail-config\n      - name: varlog\n        hostPath:\n          path: /var/log\n      - name: varlibdockercontainers\n        hostPath:\n          path: /var/lib/docker/containers\n      - name: positions\n        emptyDir: {}\n</code></pre>"},{"location":"infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/#cicd","title":"CI/CD \ud30c\uc774\ud504\ub77c\uc778","text":""},{"location":"infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/#jenkins","title":"Jenkins \uae30\ubc18 \ube4c\ub4dc \uc790\ub3d9\ud654","text":"<p>GitLab \ucee4\ubc0b\ubd80\ud130 K8s \ubc30\ud3ec\uae4c\uc9c0 \uc644\uc804 \uc790\ub3d9\ud654\ub41c \ud30c\uc774\ud504\ub77c\uc778\uc744 \uad6c\ucd95\ud588\ub2e4:</p> <pre><code>// Jenkinsfile\npipeline {\n    agent any\n\n    environment {\n        DOCKER_REGISTRY = \"registry.x2bee.com\"\n        KUBECONFIG = \"/var/jenkins_home/.kube/config\"\n    }\n\n    stages {\n        stage('Checkout') {\n            steps {\n                git branch: 'main', \n                    url: 'https://gitlab.x2bee.com/xgen2.0/xgen-frontend.git',\n                    credentialsId: 'gitlab-credentials'\n            }\n        }\n\n        stage('Build Docker Image') {\n            steps {\n                script {\n                    def image = docker.build(\"${DOCKER_REGISTRY}/xgen/frontend:${BUILD_NUMBER}\")\n                    image.push()\n                    image.push(\"latest\")\n                }\n            }\n        }\n\n        stage('Update K8s Manifests') {\n            steps {\n                sh \"\"\"\n                    sed -i 's|image:.*frontend:.*|image: ${DOCKER_REGISTRY}/xgen/frontend:${BUILD_NUMBER}|g' k8s/services/frontend-deployment.yaml\n                    git add k8s/services/frontend-deployment.yaml\n                    git commit -m \"Update frontend image to ${BUILD_NUMBER}\"\n                    git push origin main\n                \"\"\"\n            }\n        }\n\n        stage('Trigger ArgoCD Sync') {\n            steps {\n                sh \"\"\"\n                    argocd app sync xgen-services --auth-token ${ARGOCD_TOKEN}\n                \"\"\"\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/#argocd","title":"ArgoCD \ud504\ub85c\uc81d\ud2b8 \uc124\uc815","text":"<p>\ubcf4\uc548\uacfc \ub124\uc784\uc2a4\ud398\uc774\uc2a4 \uaca9\ub9ac\ub97c \uc704\ud55c RBAC \uc124\uc815:</p> <pre><code># argocd/projects/xgen-project.yaml\napiVersion: argoproj.io/v1alpha1\nkind: AppProject\nmetadata:\n  name: xgen-project\n  namespace: argocd\nspec:\n  sourceRepos:\n  - 'https://gitlab.x2bee.com/xgen2.0/*'\n  destinations:\n  - namespace: 'xgen*'\n    server: 'https://kubernetes.default.svc'\n  - namespace: 'observability'\n    server: 'https://kubernetes.default.svc'\n  clusterResourceWhitelist:\n  - group: ''\n    kind: Namespace\n  - group: rbac.authorization.k8s.io\n    kind: ClusterRole\n  - group: rbac.authorization.k8s.io\n    kind: ClusterRoleBinding\n  namespaceResourceWhitelist:\n  - group: ''\n    kind: Service\n  - group: ''\n    kind: ConfigMap\n  - group: ''\n    kind: Secret\n  - group: apps\n    kind: Deployment\n  - group: networking.istio.io\n    kind: VirtualService\n  - group: networking.istio.io\n    kind: DestinationRule\n</code></pre>"},{"location":"infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/#_4","title":"\uc11c\ube44\uc2a4 \ubc30\ud3ec \uc804\ub7b5","text":""},{"location":"infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/#rolling-update","title":"\ubb34\uc911\ub2e8 \ubc30\ud3ec (Rolling Update)","text":"<p>\ubaa8\ub4e0 \uc11c\ube44\uc2a4\uc5d0 \ub300\ud574 \ubb34\uc911\ub2e8 \ubc30\ud3ec \uc804\ub7b5\uc744 \uc801\uc6a9\ud588\ub2e4:</p> <pre><code># k8s/services/backend-gateway-deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: xgen-backend-gateway\n  namespace: xgen\nspec:\n  replicas: 3\n  strategy:\n    type: RollingUpdate\n    rollingUpdate:\n      maxUnavailable: 1\n      maxSurge: 1\n  selector:\n    matchLabels:\n      app: xgen-backend-gateway\n  template:\n    metadata:\n      labels:\n        app: xgen-backend-gateway\n      annotations:\n        prometheus.io/scrape: \"true\"\n        prometheus.io/port: \"3000\"\n        prometheus.io/path: \"/metrics\"\n    spec:\n      containers:\n      - name: backend-gateway\n        image: registry.x2bee.com/xgen/backend-gateway:latest\n        ports:\n        - containerPort: 3000\n        env:\n        - name: K3S_ENV\n          value: \"true\"\n        - name: DATABASE_URL\n          valueFrom:\n            secretKeyRef:\n              name: xgen-secrets\n              key: database-url\n        resources:\n          requests:\n            memory: \"512Mi\"\n            cpu: \"200m\"\n          limits:\n            memory: \"2Gi\"\n            cpu: \"1000m\"\n        livenessProbe:\n          httpGet:\n            path: /health\n            port: 3000\n          initialDelaySeconds: 30\n          periodSeconds: 10\n        readinessProbe:\n          httpGet:\n            path: /ready\n            port: 3000\n          initialDelaySeconds: 5\n          periodSeconds: 5\n</code></pre>"},{"location":"infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/#hpa-horizontal-pod-autoscaler","title":"HPA (Horizontal Pod Autoscaler)","text":"<p>\ud2b8\ub798\ud53d \uc99d\uac00\uc5d0 \uc790\ub3d9\uc73c\ub85c \ub300\uc751\ud558\ub294 \uc624\ud1a0\uc2a4\ucf00\uc77c\ub9c1\uc744 \uad6c\uc131\ud588\ub2e4:</p> <pre><code># k8s/services/backend-gateway-hpa.yaml\napiVersion: autoscaling/v2\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: xgen-backend-gateway-hpa\n  namespace: xgen\nspec:\n  scaleTargetRef:\n    apiVersion: apps/v1\n    kind: Deployment\n    name: xgen-backend-gateway\n  minReplicas: 3\n  maxReplicas: 6\n  metrics:\n  - type: Resource\n    resource:\n      name: cpu\n      target:\n        type: Utilization\n        averageUtilization: 70\n  - type: Resource\n    resource:\n      name: memory\n      target:\n        type: Utilization\n        averageUtilization: 80\n</code></pre>"},{"location":"infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/#_5","title":"\uc54c\ub9bc \uc2dc\uc2a4\ud15c \uad6c\ucd95","text":""},{"location":"infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/#grafana-slack","title":"Grafana Slack \uc5f0\ub3d9","text":"<p>\uc7a5\uc560 \ubc1c\uc0dd \uc2dc \uc989\uc2dc \uac1c\ubc1c\ud300\uc5d0 \uc54c\ub9bc\uc774 \uc804\ub2ec\ub418\ub294 \uc2dc\uc2a4\ud15c\uc744 \uad6c\ucd95\ud588\ub2e4:</p> <pre><code># grafana/provisioning/alerting/contact-points.yaml\napiVersion: 1\ncontactPoints:\n  - name: slack-alerts\n    type: slack\n    settings:\n      url: \"YOUR_SLACK_WEBHOOK_URL\"\n      channel: \"#xgen-alerts\"\n      title: \"XGEN \uc54c\ub9bc\"\n      text: |\n        {{ range .Alerts }}\n        **{{ .Annotations.summary }}**\n        {{ .Annotations.description }}\n        Status: {{ .Status }}\n        {{ end }}\n</code></pre>"},{"location":"infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/#alert-rules","title":"Alert Rules","text":"<p>\uc8fc\uc694 \uc7a5\uc560 \uc0c1\ud669\uc5d0 \ub300\ud55c \uacbd\ubcf4 \uaddc\uce59\ub4e4\uc744 \uc815\uc758\ud588\ub2e4:</p> <pre><code># grafana/provisioning/alerting/rules.yaml\ngroups:\n  - name: xgen-critical\n    interval: 30s\n    rules:\n    - alert: PodNotRunning\n      expr: up{job=~\"xgen-.*\"} == 0\n      for: 1m\n      labels:\n        severity: critical\n      annotations:\n        summary: \"XGEN Pod\uac00 \uc2e4\ud589\ub418\uc9c0 \uc54a\uc74c\"\n        description: \"{{ $labels.instance }}\uc5d0\uc11c {{ $labels.job }} \uc11c\ube44\uc2a4\uac00 1\ubd84\uac04 \uc751\ub2f5\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.\"\n\n    - alert: HighMemoryUsage\n      expr: container_memory_working_set_bytes{namespace=\"xgen\"} / container_spec_memory_limit_bytes &gt; 0.8\n      for: 2m\n      labels:\n        severity: warning\n      annotations:\n        summary: \"\ub192\uc740 \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub960\"\n        description: \"{{ $labels.pod }}\uc5d0\uc11c \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub960\uc774 {{ $value | humanizePercentage }}\uc785\ub2c8\ub2e4.\"\n\n    - alert: HighErrorRate\n      expr: rate(istio_requests_total{destination_namespace=\"xgen\",response_code!~\"2..\"}[5m]) &gt; 0.05\n      for: 1m\n      labels:\n        severity: critical\n      annotations:\n        summary: \"\ub192\uc740 \uc5d0\ub7ec\uc728 \uac10\uc9c0\"\n        description: \"XGEN \uc11c\ube44\uc2a4\uc5d0\uc11c 5% \uc774\uc0c1\uc758 \uc5d0\ub7ec\uc728\uc774 \uac10\uc9c0\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\"\n</code></pre>"},{"location":"infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/#_6","title":"\ud2b8\ub7ec\ube14\uc288\ud305 &amp; \ucd5c\uc801\ud654","text":""},{"location":"infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/#istio-tls","title":"Istio TLS \uc778\uc99d\uc11c \ubb38\uc81c \ud574\uacb0","text":"<p>\uc6b4\uc601 \ubc30\ud3ec \ucd08\uae30\uc5d0 \ubc1c\uc0dd\ud55c TLS \uc778\uc99d \ubb38\uc81c\ub97c \ud574\uacb0\ud588\ub2e4:</p> <pre><code># istioctl\uc744 \uc774\uc6a9\ud55c TLS \ubb38\uc81c \uc9c4\ub2e8\nistioctl proxy-config cluster xgen-backend-gateway-xxx -n xgen\n\n# \uc778\uc99d\uc11c \uac31\uc2e0\nistioctl experimental authz check \\\n  xgen-frontend-xxx.xgen \\\n  -a GET \\\n  -x xgen-backend-gateway.xgen.svc.cluster.local:3000\n</code></pre>"},{"location":"infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/#terminating","title":"\ub124\uc784\uc2a4\ud398\uc774\uc2a4 Terminating \uc0c1\ud0dc \ud574\uacb0","text":"<p>ArgoCD \ubc30\ud3ec \uc911 \ubc1c\uc0dd\ud55c \ub124\uc784\uc2a4\ud398\uc774\uc2a4 \uc0ad\uc81c \ubb38\uc81c \ud574\uacb0:</p> <pre><code>#!/bin/bash\n# force-delete-namespace.sh\nNAMESPACE=$1\nkubectl get namespace $NAMESPACE -o json | \\\n  jq '.spec.finalizers = []' | \\\n  kubectl replace --raw \"/api/v1/namespaces/$NAMESPACE/finalize\" -f -\n</code></pre>"},{"location":"infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/#_7","title":"\ub9ac\uc18c\uc2a4 \ucd5c\uc801\ud654","text":"<p>\uc2e4\uc81c \uc0ac\uc6a9\ub7c9 \uae30\ubc18\uc73c\ub85c \ub9ac\uc18c\uc2a4 \uc124\uc815\uc744 \ucd5c\uc801\ud654\ud588\ub2e4:</p> <pre><code># \ucd5c\uc801\ud654\ub41c \ub9ac\uc18c\uc2a4 \uc124\uc815 (\uc2e4\uce21\uac12 \uae30\ubc18)\nresources:\n  requests:\n    memory: \"512Mi\"    # \uc2e4\uc81c \ud3c9\uade0: 320Mi\n    cpu: \"200m\"        # \uc2e4\uc81c \ud3c9\uade0: 150m\n  limits:\n    memory: \"2Gi\"      # \ud53c\ud06c: 1.2Gi\n    cpu: \"1000m\"       # \ud53c\ud06c: 800m\n</code></pre>"},{"location":"infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/#_8","title":"\uc6b4\uc601 \uc131\uacfc","text":""},{"location":"infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/#_9","title":"\uc2dc\uc2a4\ud15c \uc548\uc815\uc131","text":"<ul> <li>\ubb34\uc911\ub2e8 \ubc30\ud3ec\ub85c \uac00\uc6a9\uc131 99.9% \ub2ec\uc131</li> <li>\ud3c9\uade0 \ubc30\ud3ec \uc2dc\uac04 15\ubd84 \u2192 3\ubd84\uc73c\ub85c \ub2e8\ucd95</li> <li>\uc7a5\uc560 \uac10\uc9c0 \uc2dc\uac04 30\ubd84 \u2192 1\ubd84\uc73c\ub85c \uac1c\uc120</li> </ul>"},{"location":"infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/#_10","title":"\uac1c\ubc1c \uc0dd\uc0b0\uc131","text":"<ul> <li>GitOps\ub85c \ubc30\ud3ec \uc2e4\uc218 90% \uac10\uc18c</li> <li>\ub864\ubc31 \uc2dc\uac04 20\ubd84 \u2192 30\ucd08\ub85c \ub2e8\ucd95</li> <li>\ud1b5\ud569 \ubaa8\ub2c8\ud130\ub9c1\uc73c\ub85c \ub514\ubc84\uae45 \uc2dc\uac04 70% \uc808\uc57d</li> </ul>"},{"location":"infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/#_11","title":"\ub9ac\uc18c\uc2a4 \ud6a8\uc728\uc131","text":"<ul> <li>K3s \ub3c4\uc785\uc73c\ub85c \uc2dc\uc2a4\ud15c \uc624\ubc84\ud5e4\ub4dc 40% \uac10\uc18c</li> <li>HPA\ub85c \ub9ac\uc18c\uc2a4 \uc0ac\uc6a9\ub960 \ucd5c\uc801\ud654 (\ud3c9\uade0 75%)</li> <li>\ud1b5\ud569 \ub85c\uae45\uc73c\ub85c \ub514\uc2a4\ud06c \uc0ac\uc6a9\ub7c9 60% \uc808\uac10</li> </ul> <p>XGEN 2.0 \uc778\ud504\ub77c\ub294 \ub2e8\uc21c\ud55c \ubc30\ud3ec \ud658\uacbd\uc744 \ub118\uc5b4\uc11c DevOps \ubb38\ud654\uc758 \uae30\ubc18\uc774 \ub418\uc5c8\ub2e4. \uac1c\ubc1c\uc790\ub294 \ucf54\ub4dc\uc5d0 \uc9d1\uc911\ud558\uace0, \uc6b4\uc601\uc9c4\uc740 \ube44\uc988\ub2c8\uc2a4 \uba54\ud2b8\ub9ad\uc5d0 \uc9d1\uc911\ud560 \uc218 \uc788\ub294 \ud658\uacbd\uc744 \ub9cc\ub4e4\uc5b4\ub0c8\ub2e4. \ud2b9\ud788 \uad00\uce21 \uac00\ub2a5\uc131(Observability) \uad00\uc810\uc5d0\uc11c \ud604\ub300\uc801\uc778 \ud074\ub77c\uc6b0\ub4dc \ub124\uc774\ud2f0\ube0c \uc544\ud0a4\ud14d\ucc98\uc758 \ubaa8\ubc94 \uc0ac\ub840\ub97c \uad6c\ud604\ud588\ub2e4.</p>"},{"location":"poc/Rxdb%20%28local%20db%29/","title":"RxDB \ub780 \ubb34\uc5c7\uc778\uac00? (opensearch \uc5f0\ub3d9)","text":""},{"location":"poc/Rxdb%20%28local%20db%29/#rxdb-opensearch","title":"RxDB \ub780 \ubb34\uc5c7\uc778\uac00? (opensearch \uc5f0\ub3d9)","text":""},{"location":"poc/Rxdb%20%28local%20db%29/#rxdb-frontend","title":"RxDB\uac00 Frontend\uc5d0 \uc801\ud569\ud55c \uc774\uc720","text":"<p>RxDB(Reactive Database)\ub294 NoSQL \ub370\uc774\ud130\ubca0\uc774\uc2a4\ub85c, UI \uc911\uc2ec\uc758 \uc2e4\uc2dc\uac04 \uc0c1\ud0dc \ubcc0\uacbd \uac10\uc9c0\uac00 \uc911\uc694\ud55c Frontend \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0 \ucd5c\uc801\ud654\ub41c \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc785\ub2c8\ub2e4.</p>"},{"location":"poc/Rxdb%20%28local%20db%29/#sql-frontend","title":"\uae30\uc874 SQL\uc774 Frontend\uc5d0 \uc801\ud569\ud558\uc9c0 \uc54a\uc740 \uc774\uc720","text":""},{"location":"poc/Rxdb%20%28local%20db%29/#1","title":"1. \ucd08\uae30 \ube4c\ub4dc \ud06c\uae30\uc640 \uc2dc\uc791 \uc2dc\uac04","text":"<ul> <li>SQL \ub370\uc774\ud130\ubca0\uc774\uc2a4\ub294 \ucd08\uae30 \ube4c\ub4dc \ud06c\uae30\uac00 \ud06c\uba70, \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uc2dc\uc791 \uc2dc\uac04\uc774 \uae38\uc5b4\uc9c8 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</li> <li>Frontend \ud658\uacbd\uc5d0\uc11c\ub294 \ube60\ub978 \ub85c\ub4dc\uc640 \ucd08\uae30\ud654\uac00 \uc911\uc694\ud55c\ub370, SQL\uc740 \uc774\uc5d0 \uc801\ud569\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.</li> </ul>"},{"location":"poc/Rxdb%20%28local%20db%29/#2","title":"2. \ub370\uc774\ud130 \ubaa8\ub378\uc758 \ubcf5\uc7a1\uc131","text":"<ul> <li>SQL\uc740 \uc2a4\ud0a4\ub9c8 \uae30\ubc18\uc758 \ub370\uc774\ud130 \ubaa8\ub378\uc744 \uc0ac\uc6a9\ud558\uc5ec \ubcc0\uacbd \uc2dc \uc720\uc5f0\uc131\uc774 \ub5a8\uc5b4\uc9d1\ub2c8\ub2e4.</li> <li>\ud14c\uc774\ube14 \uac04\uc758 \uad00\uacc4\ub97c \uc124\uc815\ud558\uace0 \uad00\ub9ac\ud574\uc57c \ud558\uae30 \ub54c\ubb38\uc5d0 UI\uc640\uc758 \ub370\uc774\ud130 \ub9e4\ud551\uc774 \ubcf5\uc7a1\ud574\uc9c8 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</li> </ul>"},{"location":"poc/Rxdb%20%28local%20db%29/#rxdb","title":"RxDB\ub780?","text":"<p>RxDB\ub294 Reactive\ud55c NoSQL \ub370\uc774\ud130\ubca0\uc774\uc2a4\ub85c, \ub370\uc774\ud130\uc758 \ud604\uc7ac \uc0c1\ud0dc\ub97c \uc9c8\uc758\ud560 \uc218 \uc788\uc744 \ubfd0\ub9cc \uc544\ub2c8\ub77c \uc0c1\ud0dc \ubcc0\ud654\uc5d0 \ub300\ud574 \uc2e4\uc2dc\uac04\uc73c\ub85c \uac10\uc9c0(subscribe)\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc774\ub97c \ud1b5\ud574 \uc2e4\uc2dc\uac04 UI \uc5c5\ub370\uc774\ud2b8\uac00 \ud544\uc694\ud55c Frontend \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0 \uc801\ud569\ud55c \uc120\ud0dd\uc774 \ub429\ub2c8\ub2e4.</p>"},{"location":"poc/Rxdb%20%28local%20db%29/#rxdb-frontend_1","title":"RxDB\uac00 Frontend\uc5d0 \uc801\ud569\ud55c \uc774\uc720","text":""},{"location":"poc/Rxdb%20%28local%20db%29/#1-javascript","title":"1. JavaScript \uae30\ubc18\uc73c\ub85c \ucd5c\uc801\ud654","text":"<ul> <li>RxDB\ub294 JavaScript\ub85c \uad6c\ud604\ub418\uc5b4 JavaScript \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ud658\uacbd\uc5d0\uc11c \ucd5c\uc801\ud654\ub41c \uc131\ub2a5\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4.</li> </ul>"},{"location":"poc/Rxdb%20%28local%20db%29/#2-json-nosql","title":"2. JSON \uae30\ubc18 NoSQL \uc811\uadfc \ubc29\uc2dd","text":"<ul> <li>RxDB\ub294 \ub370\uc774\ud130\ub97c JSON \ubb38\uc11c \ud615\ud0dc\ub85c \uad00\ub9ac\ud569\ub2c8\ub2e4.</li> <li>JavaScript\uac00 JSON \uac1d\uccb4\uc640 \uae30\ubcf8\uc801\uc73c\ub85c \ud638\ud658\ub418\ubbc0\ub85c, \ub370\uc774\ud130 \ucc98\ub9ac\uc640 \uc9c1\uad00\uc801\uc778 \ub9e4\ud551\uc774 \uc6a9\uc774\ud569\ub2c8\ub2e4.</li> </ul>"},{"location":"poc/Rxdb%20%28local%20db%29/#3-reactive-programming","title":"3. Reactive Programming \uc9c0\uc6d0","text":"<ul> <li>\ub370\uc774\ud130 \ubcc0\uacbd\uc744 RxJS\ub97c \ud1b5\ud574 \uc2e4\uc2dc\uac04\uc73c\ub85c \uad6c\ub3c5\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</li> <li>\uc0c1\ud0dc \ubcc0\ud654\uc5d0 \uc989\uac01\uc801\uc73c\ub85c \ubc18\uc751\ud558\ub294 UI \uc911\uc2ec \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0\uc11c \ud070 \uac15\uc810\uc744 \uac00\uc9d1\ub2c8\ub2e4.</li> </ul>"},{"location":"poc/Rxdb%20%28local%20db%29/#4","title":"4. \uc790\uc5f0\uc2a4\ub7fd\uace0 \uc9c1\uad00\uc801\uc778 \ub370\uc774\ud130 \ubaa8\ub378","text":"<ul> <li>NoSQL \ubb38\uc11c \uae30\ubc18\uc758 \ub370\uc774\ud130 \ubaa8\ub378\uc740 UI \uc911\uc2ec \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0 \uc9c1\uad00\uc801\uc774\uba70, \ucd94\uac00\uc801\uc778 \ub370\uc774\ud130 \ub9e4\ud551 \uc791\uc5c5\uc774 \uc904\uc5b4\ub4ed\ub2c8\ub2e4.</li> </ul>"},{"location":"poc/Rxdb%20%28local%20db%29/#5-","title":"5. \uc624\ud504\ub77c\uc778-\uc6b0\uc120 \uc804\ub7b5","text":"<ul> <li>RxDB\ub294 \ub85c\uceec \ub370\uc774\ud130 \uc800\uc7a5\uc18c\ub97c \ud65c\uc6a9\ud558\uc5ec \uc624\ud504\ub77c\uc778 \ud658\uacbd\uc5d0\uc11c\ub3c4 \ub370\uc774\ud130 \uc800\uc7a5 \ubc0f \uc791\uc5c5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.</li> <li>\uc628\ub77c\uc778 \uc0c1\ud0dc\ub85c \uc804\ud658\ub418\uba74 \uc11c\ubc84\uc640 \uc790\ub3d9 \ub3d9\uae30\ud654\ub97c \uc9c0\uc6d0\ud569\ub2c8\ub2e4.</li> </ul>"},{"location":"poc/Rxdb%20%28local%20db%29/#rxdb_1","title":"RxDB \ud65c\uc6a9 \uc608\uc2dc","text":""},{"location":"poc/Rxdb%20%28local%20db%29/#1-todo-application","title":"1. \ud560 \uc77c \uad00\ub9ac \uc560\ud50c\ub9ac\ucf00\uc774\uc158 (Todo Application)","text":"<ul> <li>RxDB\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc0ac\uc6a9\uc790\uc758 \ud560 \uc77c \ubaa9\ub85d\uc744 \uad00\ub9ac\ud569\ub2c8\ub2e4.</li> <li>\uc2e4\uc2dc\uac04 \ub370\uc774\ud130 \ubc18\uc601\uc744 \ud1b5\ud574 \ucd94\uac00, \uc218\uc815, \uc0ad\uc81c\ub41c \uc791\uc5c5\uc774 \uc989\uc2dc UI\uc5d0 \ud45c\uc2dc\ub429\ub2c8\ub2e4.</li> <li>\uc0ac\uc6a9\uc790 \uacbd\ud5d8(UX)\uc744 \ud06c\uac8c \ud5a5\uc0c1\uc2dc\ud0b5\ub2c8\ub2e4.</li> </ul>"},{"location":"poc/Rxdb%20%28local%20db%29/#2_1","title":"2. \ucc44\ud305 \uc560\ud50c\ub9ac\ucf00\uc774\uc158","text":"<ul> <li>\uc2e4\uc2dc\uac04 \uba54\uc2dc\uc9c0 \uc804\uc1a1\uacfc \uae30\ub85d \uad00\ub9ac\ub97c \uc704\ud574 \uc0ac\uc6a9\ub429\ub2c8\ub2e4.</li> <li>\uc0c8\ub85c\uc6b4 \uba54\uc2dc\uc9c0\ub97c \uc800\uc7a5\ud558\uace0 \uc989\uc2dc \uc0ac\uc6a9\uc790\uc5d0\uac8c \ud45c\uc2dc\ud569\ub2c8\ub2e4.</li> <li>\uc624\ud504\ub77c\uc778 \uc800\uc7a5\uc18c\ub97c \ud1b5\ud574 \uc778\ud130\ub137 \uc5f0\uacb0\uc774 \uc5c6\uc744 \ub54c\ub3c4 \ub300\ud654 \ub0b4\uc6a9\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</li> </ul>"},{"location":"poc/Rxdb%20%28local%20db%29/#3","title":"3. \uac8c\uc2dc\ud310 \uc560\ud50c\ub9ac\ucf00\uc774\uc158","text":"<ul> <li>\uc0ac\uc6a9\uc790\uac00 \uac8c\uc2dc\uae00\uc744 \uc791\uc131, \uc218\uc815, \uc0ad\uc81c\ud560 \uc218 \uc788\ub294 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0\uc11c \ud65c\uc6a9\ub429\ub2c8\ub2e4.</li> <li>\uac8c\uc2dc\uae00 \ubcc0\uacbd \uc0ac\ud56d\uc744 \uc2e4\uc2dc\uac04\uc73c\ub85c \ub3d9\uae30\ud654\ud558\uace0 \ub2e4\ub978 \uc0ac\uc6a9\uc790\uc5d0\uac8c \ubc18\uc601\ud569\ub2c8\ub2e4.</li> </ul>"},{"location":"poc/Rxdb%20%28local%20db%29/#4_1","title":"4. \ud611\uc5c5 \ub3c4\uad6c","text":"<ul> <li>\uc5ec\ub7ec \uc0ac\uc6a9\uc790\uac00 \ub3d9\uc2dc\uc5d0 \uc791\uc5c5\ud558\ub294 \ud658\uacbd\uc5d0\uc11c RxDB\ub294 \uc2e4\uc2dc\uac04 \ub370\uc774\ud130 \ubcf5\uc81c\ub97c \ud1b5\ud574 \uc6d0\ud65c\ud55c \ub370\uc774\ud130 \uacf5\uc720\ub97c \uc9c0\uc6d0\ud569\ub2c8\ub2e4.</li> <li>\uc2e4\uc2dc\uac04 \ub3d9\uae30\ud654 \uae30\ub2a5\uc744 \ud65c\uc6a9\ud574 \uc791\uc5c5 \ucda9\ub3cc\uc744 \ucd5c\uc18c\ud654\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</li> </ul>"},{"location":"poc/Rxdb%20%28local%20db%29/#5","title":"5. \ubaa8\ubc14\uc77c \uc560\ud50c\ub9ac\ucf00\uc774\uc158","text":"<ul> <li>\uc624\ud504\ub77c\uc778 \uc9c0\uc6d0\uacfc \ub124\ud2b8\uc6cc\ud06c \uc0c1\ud0dc\uc5d0 \ub530\ub978 \uc6d0\ud65c\ud55c \ub3d9\uae30\ud654\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4.</li> <li>\ub370\uc774\ud130\ub97c \ub85c\uceec\uc5d0 \uc800\uc7a5\ud558\uc5ec \ub124\ud2b8\uc6cc\ud06c \uc5f0\uacb0 \uc5c6\uc774\ub3c4 \uc548\uc815\uc801\uc778 \uc0ac\uc6a9\uc790 \uacbd\ud5d8\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4.</li> </ul>"},{"location":"poc/Rxdb%20%28local%20db%29/#6","title":"6. \ub370\uc774\ud130 \uc9d1\uc57d\uc801 \uc560\ud50c\ub9ac\ucf00\uc774\uc158","text":"<ul> <li>\ub300\uc6a9\ub7c9 \ub370\uc774\ud130\ub97c \ucc98\ub9ac\ud558\uace0 \ud6a8\uc728\uc801\uc73c\ub85c \uad00\ub9ac\ud560 \uc218 \uc788\ub294 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0\uc11c \uc0ac\uc6a9\ub429\ub2c8\ub2e4.</li> <li>\uac15\ub825\ud55c \ucffc\ub9ac \uae30\ub2a5\uacfc \uc720\uc5f0\ud55c \uc800\uc7a5 \uc635\uc158\uc744 \ud1b5\ud574 \uc131\ub2a5\uc744 \ucd5c\uc801\ud654\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</li> </ul>"},{"location":"poc/Rxdb%20%28local%20db%29/#7-electron","title":"7. Electron \uae30\ubc18 \ub370\uc2a4\ud06c\ud1b1 \uc560\ud50c\ub9ac\ucf00\uc774\uc158","text":"<ul> <li>Electron\uacfc \ud568\uaed8 \uc0ac\uc6a9\ud558\uc5ec \ub370\uc2a4\ud06c\ud1b1 \ud658\uacbd\uc5d0\uc11c\ub3c4 \ubc18\uc751\ud615 \ub370\uc774\ud130 \uad00\ub9ac\ub97c \uad6c\ud604\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</li> <li>\uc608: \uc0ac\uc6a9\uc790 \uc815\uc758 \uc601\uc6c5 \ubaa9\ub85d \uad00\ub9ac \uc560\ud50c\ub9ac\ucf00\uc774\uc158.</li> </ul>"},{"location":"poc/Rxdb%20%28local%20db%29/#_1","title":"\uc2e4\uc2b5","text":"<p>opensearch\uc5d0\uc11c \ub370\uc774\ud130\ub97c \uac00\uc838\uc640\uc11c RxDB\uc5d0 \uc800\uc7a5\ud558\uace0  \uc624\ud504\ub77c\uc778\uc5d0\uc11c\ub3c4 \uc798 \uc791\ub3d9\ud558\ub294\uc9c0 \ud14c\uc2a4\ud2b8</p> <p></p> <p>\ub370\uc774\ud130\ub294 \uc798 \ub4e4\uc5b4\uac04 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.</p> <p>\uac04\ub2e8\ud55c \uac80\uc0c9 \uae30\ub2a5\uc744 \ucd94\uac00\ud588\ub2e4. (LIKE \uac80\uc0c9)  \uc624\ud504\ub77c\uc778\uc5d0\uc11c\ub3c4 \uc798 \ub3d9\uc791\ud55c\ub2e4.</p> <p></p>"},{"location":"poc/Rxdb%20%28local%20db%29/#_2","title":"\uacb0\ub860","text":"<p>RxDB\ub294 JavaScript \uae30\ubc18\uc758 Reactive NoSQL \ub370\uc774\ud130\ubca0\uc774\uc2a4\ub85c, \uc2e4\uc2dc\uac04 UI \uc5c5\ub370\uc774\ud2b8, \uc624\ud504\ub77c\uc778 \uc9c0\uc6d0, \uc9c1\uad00\uc801\uc778 \ub370\uc774\ud130 \ubaa8\ub378\uc744 \uc81c\uacf5\ud558\uc5ec Frontend \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0 \ucd5c\uc801\ud654\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4. \ud2b9\ud788 \ucc44\ud305, \ud611\uc5c5, \ubaa8\ubc14\uc77c, \ub370\uc774\ud130 \uc9d1\uc57d\uc801 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uacfc \uac19\uc740 \uc2e4\uc2dc\uac04 \ubc18\uc751\uc131\uc774 \uc911\uc694\ud55c \ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c \ud070 \uc7a5\uc810\uc744 \uac00\uc9d1\ub2c8\ub2e4.</p>"},{"location":"poc/intel%20NPU%20model%20use/","title":"Intel NPU \uac00\uc18d\uc744 \ud65c\uc6a9\ud55c TinyLlama \ucc57\ubd07 \uad6c\ud604","text":""},{"location":"poc/intel%20NPU%20model%20use/#intel-npu-tinyllama","title":"Intel NPU \uac00\uc18d\uc744 \ud65c\uc6a9\ud55c TinyLlama \ucc57\ubd07 \uad6c\ud604","text":""},{"location":"poc/intel%20NPU%20model%20use/#intel-npu-acceleration-library","title":"Intel NPU Acceleration Library \uc18c\uac1c","text":"<p>Intel\u00ae NPU Acceleration Library\ub294 Intel Neural Processing Unit (NPU)\uc758 \uc131\ub2a5\uc744 \ud65c\uc6a9\ud558\uc5ec \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \ud6a8\uc728\uc131\uc744 \ud5a5\uc0c1\uc2dc\ud0a4\ub294 Python \ub77c\uc774\ube0c\ub7ec\ub9ac\uc785\ub2c8\ub2e4. \ud638\ud658\ub418\ub294 \ud558\ub4dc\uc6e8\uc5b4\uc5d0\uc11c \uace0\uc18d \uc5f0\uc0b0\uc744 \uc218\ud589\ud560 \uc218 \uc788\ub3c4\ub85d \uc124\uacc4\ub418\uc5c8\uc2b5\ub2c8\ub2e4.</p>"},{"location":"poc/intel%20NPU%20model%20use/#_1","title":"\uc124\uce58 \ubc29\ubc95","text":"<p>\ud544\uc694\ud55c \ub77c\uc774\ube0c\ub7ec\ub9ac \uc124\uce58\ub97c \uc704\ud574 \ub2e4\uc74c \uba85\ub839\uc5b4\ub97c \uc2e4\ud589\ud569\ub2c8\ub2e4:</p> <pre><code>pip install intel-npu-acceleration-library\npip install transformers==4.42.4\n</code></pre> <p>\uc8fc\uc758</p> <p>transformers \ub77c\uc774\ube0c\ub7ec\ub9ac\uc758 \ubc84\uc804\uc744 \uc815\ud655\ud788 \ub9de\ucd94\ub294 \uac83\uc774 \uc911\uc694\ud569\ub2c8\ub2e4. \ubc84\uc804 \ubd88\uc77c\uce58 \uc2dc \uc2e4\ud589\uc774 \ub418\uc9c0 \uc54a\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"poc/intel%20NPU%20model%20use/#_2","title":"\uad6c\ud604 \ucf54\ub4dc","text":"<p>\ub2e4\uc74c\uc740 Intel NPU \uac00\uc18d\uc744 \ud65c\uc6a9\ud558\uc5ec TinyLlama-1.1B-Chat \ubaa8\ub378\uc744 \uc2e4\ud589\ud558\ub294 \ub300\ud654\ud615 \ucc57\ubd07\uc758 \uad6c\ud604 \ucf54\ub4dc\uc785\ub2c8\ub2e4:</p> <pre><code>import datetime\nimport torch\nimport intel_npu_acceleration_library\nfrom intel_npu_acceleration_library.compiler import CompilerConfig\nfrom transformers import pipeline, TextStreamer, set_seed\n\n# \ubaa8\ub378 \ubc0f \uc124\uc815\nMODEL_ID = \"TinyLlama/TinyLlama-1.1B-Chat-v1.0\"\n\ndef load_model():\n    \"\"\"\ubaa8\ub378 \ub85c\ub4dc \ubc0f NPU \ucd5c\uc801\ud654\"\"\"\n    print(\"Loading the model...\")\n    pipe = pipeline(\n        \"text-generation\", model=MODEL_ID, torch_dtype=torch.bfloat16, device_map=\"auto\"\n    )\n\n    print(\"Compiling the model for NPU...\")\n    config = CompilerConfig(dtype=torch.int8)\n\n    try:\n        pipe.model = intel_npu_acceleration_library.compile(pipe.model, config)\n    except Exception as e:\n        print(f\"NPU Compilation Failed: {e}\")\n        exit(1)\n\n    return pipe\n\ndef chat():\n    \"\"\"NPU \uae30\ubc18 \ucc57\ubd07 \uc2e4\ud589\"\"\"\n    pipe = load_model()\n    streamer = TextStreamer(pipe.tokenizer, skip_special_tokens=True, skip_prompt=True)\n    set_seed(42)\n\n    messages = [{\"role\": \"system\", \"content\": \"You are a friendly chatbot. You can ask me anything.\"}]\n\n    print(\"NPU Chatbot is ready! Type 'exit' to quit.\")\n    while True:\n        query = input(\"User: \")\n        if query.lower() == \"exit\":\n            break\n\n        messages.append({\"role\": \"user\", \"content\": query})\n        prompt = pipe.tokenizer.apply_chat_template(messages, tokenize=False, add_generation_prompt=True)\n\n        start_time = datetime.datetime.now()\n        print(\"Assistant: \", end=\"\", flush=True)\n\n        out = pipe(prompt, max_new_tokens=512, do_sample=True, temperature=0.7, \n                  top_k=50, top_p=0.95, streamer=streamer)\n\n        end_time = datetime.datetime.now()\n        print(f\"\\nResponse Time: {end_time - start_time}\")\n\n        reply = out[0][\"generated_text\"].split(\"&lt;|assistant|&gt;\")[-1].strip()\n        messages.append({\"role\": \"assistant\", \"content\": reply})\n\nif __name__ == \"__main__\":\n    chat()\n</code></pre>"},{"location":"poc/intel%20NPU%20model%20use/#_3","title":"\ucf54\ub4dc \uc124\uba85","text":""},{"location":"poc/intel%20NPU%20model%20use/#_4","title":"\uc8fc\uc694 \uae30\ub2a5","text":"<ol> <li> <p>\ubaa8\ub378 \ub85c\ub4dc \ubc0f NPU \ucd5c\uc801\ud654</p> <ul> <li>TinyLlama-1.1B-Chat \ubaa8\ub378\uc744 \ub85c\ub4dc</li> <li>Intel NPU\ub97c \uc704\ud55c \ubaa8\ub378 \ucef4\ud30c\uc77c</li> <li>bfloat16 \ub370\uc774\ud130 \ud0c0\uc785 \uc0ac\uc6a9\uc73c\ub85c \uba54\ubaa8\ub9ac \ud6a8\uc728\uc131 \ud5a5\uc0c1</li> </ul> </li> <li> <p>\ub300\ud654\ud615 \uc778\ud130\ud398\uc774\uc2a4</p> <ul> <li>\uc2dc\uc2a4\ud15c \ud504\ub86c\ud504\ud2b8 \uc124\uc815\uc73c\ub85c \ucc57\ubd07\uc758 \uc131\uaca9 \uc815\uc758</li> <li>\uc2a4\ud2b8\ub9ac\ubc0d \ubc29\uc2dd\uc758 \ud14d\uc2a4\ud2b8 \uc0dd\uc131\uc73c\ub85c \uc2e4\uc2dc\uac04 \uc751\ub2f5</li> <li>\uc751\ub2f5 \uc2dc\uac04 \uce21\uc815 \uae30\ub2a5</li> </ul> </li> <li> <p>\uc0dd\uc131 \ud30c\ub77c\ubbf8\ud130</p> <ul> <li>max_new_tokens: 512</li> <li>temperature: 0.7</li> <li>top_k: 50</li> <li>top_p: 0.95</li> </ul> </li> </ol>"},{"location":"poc/intel%20NPU%20model%20use/#_5","title":"\ub9c8\ubb34\ub9ac","text":"<p>\uc774 \uad6c\ud604\uc744 \ud1b5\ud574 Intel NPU\uc758 \uc131\ub2a5\uc744 \ud65c\uc6a9\ud558\uc5ec \ud6a8\uc728\uc801\uc778 AI \ucc57\ubd07\uc744 \uad6c\ud604\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ud2b9\ud788 \uc628\ub514\ubc14\uc774\uc2a4 \ud658\uacbd\uc5d0\uc11c NPU \uac00\uc18d\uc744 \ud65c\uc6a9\ud568\uc73c\ub85c\uc368 \ub354 \ube60\ub978 \uc751\ub2f5 \uc18d\ub3c4\ub97c \uae30\ub300\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. </p> <p></p>"},{"location":"poc/tauri/","title":"Tauri - \ud06c\ub85c\uc2a4 \ud50c\ub7ab\ud3fc \uc571 \uac1c\ubc1c \ud504\ub808\uc784\uc6cc\ud06c","text":""},{"location":"poc/tauri/#tauri-","title":"Tauri - \ud06c\ub85c\uc2a4 \ud50c\ub7ab\ud3fc \uc571 \uac1c\ubc1c \ud504\ub808\uc784\uc6cc\ud06c","text":""},{"location":"poc/tauri/#_1","title":"\uac1c\uc694","text":"<p>Tauri\ub294 \ub370\uc2a4\ud06c\ud1b1 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uad6c\ucd95\ud558\uae30 \uc704\ud55c \ud604\ub300\uc801\uc778 \ud504\ub808\uc784\uc6cc\ud06c\uc785\ub2c8\ub2e4. </p> <ul> <li>Backend: Rust </li> <li>Frontend: webview\ub97c \ud1b5\ud55c HTML, CSS, JS (React.js, Next.js \ub4f1) \uc9c0\uc6d0</li> </ul> <p> </p>"},{"location":"poc/tauri/#_2","title":"\uc8fc\uc694 \uc7a5\uc810","text":"<ul> <li>\ub9e4\uc6b0 \uc791\uc740 \ubc14\uc774\ub108\ub9ac \ud06c\uae30 (Electron \ub300\ube44 1/10 ~ 1/20 \uc218\uc900)</li> <li>\ub192\uc740 \uc131\ub2a5\uacfc \ub0ae\uc740 \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9</li> <li>Rust\uc758 \uc548\uc804\uc131\uacfc \uc131\ub2a5 \uc774\uc810</li> <li>\uac15\ub825\ud55c \ubcf4\uc548 \uae30\ub2a5 \ub0b4\uc7a5</li> <li>\ud06c\ub85c\uc2a4 \ud50c\ub7ab\ud3fc \uc9c0\uc6d0 (Windows, macOS, Linux)</li> </ul>"},{"location":"poc/tauri/#_3","title":"\uac1c\ubc1c\uc790 \uad00\uc810\uc5d0\uc11c\uc758 \uc7a5\uc810","text":"<ul> <li>npm \uc0dd\ud0dc\uacc4 \ud65c\uc6a9 \uac00\ub2a5</li> <li>\uc6f9 \uac1c\ubc1c \uacbd\ud5d8\uc744 \ub370\uc2a4\ud06c\ud1b1 \uc571 \uac1c\ubc1c\uc5d0 \ud65c\uc6a9</li> <li>\uc2dc\uc2a4\ud15c API\uc5d0 \ub300\ud55c \uc548\uc804\ud55c \uc811\uadfc \uc81c\uacf5</li> <li>\ucee4\uc2a4\ud140 \ud50c\ub7ec\uadf8\uc778 \uac1c\ubc1c \uac00\ub2a5</li> </ul>"},{"location":"poc/tauri/#_4","title":"\uace0\ub824\uc0ac\ud56d","text":"<ul> <li>Rust \ud559\uc2b5 \uace1\uc120\uc774 \uc788\uc744 \uc218 \uc788\uc74c</li> <li>Electron\uc5d0 \ube44\ud574 \uc0dd\ud0dc\uacc4\uac00 \uc0c1\ub300\uc801\uc73c\ub85c \uc791\uc74c</li> <li>OS \ub124\uc774\ud2f0\ube0c \uae30\ub2a5 \uc0ac\uc6a9 \uc2dc \ucd94\uac00 Rust \uac1c\ubc1c \ud544\uc694</li> </ul>"},{"location":"poc/tauri/#_5","title":"\uc124\uce58 \ubc0f \uc124\uc815 \uac00\uc774\ub4dc","text":""},{"location":"poc/tauri/#1-rust","title":"1. Rust \uc124\uce58","text":"<pre><code>curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\n</code></pre>"},{"location":"poc/tauri/#2-nextjs","title":"2. Next.js \ud504\ub85c\uc81d\ud2b8 \uc0dd\uc131","text":"<pre><code>npx create-next-app@latest --use-npm\n</code></pre>"},{"location":"poc/tauri/#3-tsconfigjson-jsconfigjson","title":"3. tsconfig.json \ub610\ub294 jsconfig.json \uc124\uc815","text":"<pre><code>{\n  \"exclude\": [\n    \"node_modules\",\n    \"src-tauri\"\n  ]\n}\n</code></pre>"},{"location":"poc/tauri/#4-nextconfigjs","title":"4. next.config.js \uc124\uc815","text":"<pre><code>/** @type {import('next').NextConfig} */\nconst nextConfig = {\n  output: 'export',\n}\n\nmodule.exports = nextConfig\n</code></pre>"},{"location":"poc/tauri/#5-tauri","title":"5. Tauri \uad00\ub828 \ud328\ud0a4\uc9c0 \uc124\uce58","text":"<pre><code>npm install --save-dev @tauri-apps/cli@\"&gt;1.0.0\"\nnpm install @tauri-apps/api@1\n</code></pre>"},{"location":"poc/tauri/#6-packagejson","title":"6. package.json \uc2a4\ud06c\ub9bd\ud2b8 \ucd94\uac00","text":"<pre><code>{\n  \"scripts\": {\n    \"tauri\": \"tauri\"\n  }\n}\n</code></pre>"},{"location":"poc/tauri/#7-tauri","title":"7. Tauri \ucd08\uae30\ud654","text":"<pre><code>npm run tauri init\n</code></pre>"},{"location":"poc/tauri/#8-mainrs","title":"8. main.rs \uc124\uc815","text":"<pre><code>#![cfg_attr(not(debug_assertions), windows_subsystem = \"windows\")]\n\nfn main() {\n    tauri::Builder::default()\n        .run(tauri::generate_context!())\n        .expect(\"error while running tauri application\");\n}\n</code></pre>  build\ud558\uba74 \uc124\uce58 \ud504\ub85c\uadf8\ub7a8\ub3c4 \uc790\ub3d9\uc73c\ub85c \uc0dd\uc131\ub41c\ub2e4.  <p>\uc5b4\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc2e4\ud589\ud558\uba74 \uc774\ub807\uac8c\ub72c\ub2e4.  </p>"},{"location":"poc/tauri/#_6","title":"\ud5a5\ud6c4 \ubc1c\uc804 \ubc29\ud5a5","text":"<ul> <li>\uc0ac\uc6a9\uc790 \ucef4\ud4e8\ud130\uc758 \ub0b4\uc7a5 GPU\ub098 NPU\ub97c \ud65c\uc6a9\ud55c On-device AI \uae30\ub2a5 \uad6c\ud604</li> <li>LLM \uae30\ubc18 \uc5d0\uc774\uc804\ud2b8 \ud1b5\ud569</li> <li>\ub0b4\uc7a5 NPU\ub97c \ud65c\uc6a9\ud55c \ubaa8\ub378 \ud559\uc2b5 \ubc0f LLM \uad6c\ub3d9</li> </ul>"},{"location":"poc/tauri/#_7","title":"\ucd94\uac00 \uc815\ubcf4","text":"<ul> <li>tray icon \uc124\uc815 \ub4f1 \uc0c1\uc138 \uae30\ub2a5\uc740 \uacf5\uc2dd \ud648\ud398\uc774\uc9c0 \ubb38\uc11c \ucc38\uc870</li> <li>\ube4c\ub4dc \uc2dc \uc124\uce58 \ud504\ub85c\uadf8\ub7a8 \uc790\ub3d9 \uc0dd\uc131</li> <li>UI\ub294 \uae30\uc874 \uc6f9 \uac1c\ubc1c \ubc29\uc2dd\uc73c\ub85c \uad6c\ud604 \uac00\ub2a5</li> </ul>"},{"location":"portfolio/XGEN-1.0-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EB%AA%A8%EB%8D%B8-%EA%B4%80%EB%A6%AC-UI-%EA%B5%AC%ED%98%84/","title":"XGEN 1.0 \ud504\ub860\ud2b8\uc5d4\ub4dc \ubaa8\ub378 \uad00\ub9ac UI \uad6c\ud604","text":""},{"location":"portfolio/XGEN-1.0-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EB%AA%A8%EB%8D%B8-%EA%B4%80%EB%A6%AC-UI-%EA%B5%AC%ED%98%84/#xgen-10-ui","title":"XGEN 1.0 \ud504\ub860\ud2b8\uc5d4\ub4dc \ubaa8\ub378 \uad00\ub9ac UI \uad6c\ud604","text":"<p>2025.12 | Next.js, TypeScript, GPU \uad00\ub9ac, \uc2e4\uc2dc\uac04 \ubaa8\ub2c8\ud130\ub9c1</p>"},{"location":"portfolio/XGEN-1.0-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EB%AA%A8%EB%8D%B8-%EA%B4%80%EB%A6%AC-UI-%EA%B5%AC%ED%98%84/#_1","title":"\uac1c\uc694","text":"<p>XGEN 1.0\uc5d0\uc11c \uac00\uc7a5 \ubcf5\uc7a1\ud588\ub358 \ubd80\ubd84 \uc911 \ud558\ub098\uac00 GPU \ubaa8\ub378 \uc11c\ube59 \uad00\ub9ac UI\uc600\ub2e4. \ub2e8\uc21c\ud788 \ubaa8\ub378\uc744 \uc5c5\ub85c\ub4dc\ud558\uace0 \uc2e4\ud589\ud558\ub294 \uac83\uc774 \uc544\ub2c8\ub77c, GPU \ub9ac\uc18c\uc2a4\ub97c \uc2e4\uc2dc\uac04\uc73c\ub85c \ubaa8\ub2c8\ud130\ub9c1\ud558\uace0, \ubaa8\ub378\ubcc4 \ucd5c\uc801 \uc124\uc815\uc744 \uc81c\uacf5\ud558\uba70, \uc7a5\uc560 \ubc1c\uc0dd \uc2dc \uc989\uc2dc \ub300\uc751\ud560 \uc218 \uc788\ub294 \ud1b5\ud569 \uad00\ub9ac \uc2dc\uc2a4\ud15c\uc774 \ud544\uc694\ud588\ub2e4.</p>"},{"location":"portfolio/XGEN-1.0-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EB%AA%A8%EB%8D%B8-%EA%B4%80%EB%A6%AC-UI-%EA%B5%AC%ED%98%84/#_2","title":"\uc544\ud0a4\ud14d\ucc98 \uc124\uacc4","text":""},{"location":"portfolio/XGEN-1.0-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EB%AA%A8%EB%8D%B8-%EA%B4%80%EB%A6%AC-UI-%EA%B5%AC%ED%98%84/#gpu","title":"GPU \uad00\ub9ac \uc2dc\uc2a4\ud15c","text":"<p>\uac00\uc7a5 \ud575\uc2ec\uc801\uc778 \uae30\ub2a5\uc740 GPU \uc790\uc6d0 \uad00\ub9ac\uc600\ub2e4. \uc5ec\ub7ec GPU\uac00 \uc7a5\ucc29\ub41c \uc11c\ubc84\uc5d0\uc11c \ubaa8\ub378\ubcc4\ub85c \ucd5c\uc801\uc758 GPU\ub97c \uc120\ud0dd\ud558\uace0 \ub9ac\uc18c\uc2a4\ub97c \ud560\ub2f9\ud558\ub294 UI\ub97c \uad6c\ud604\ud588\ub2e4:</p> <pre><code>interface GPUInfo {\n  id: number;\n  name: string;\n  memory_total: number;\n  memory_used: number;\n  memory_free: number;\n  utilization: number;\n  temperature: number;\n  power_usage: number;\n}\n\ninterface ModelConfig {\n  model_id: string;\n  main_gpu: number;           // \uc8fc GPU \ubc88\ud638\n  n_gpu_layers: number;       // GPU\uc5d0 \uc62c\ub9b4 \ub808\uc774\uc5b4 \uc218 (-1\uc740 \uc804\uccb4)\n  n_ctx: number;             // \ucee8\ud14d\uc2a4\ud2b8 \uc708\ub3c4\uc6b0 \ud06c\uae30\n  temperature: number;        // \uc0d8\ud50c\ub9c1 \uc628\ub3c4\n  top_p: number;             // nucleus \uc0d8\ud50c\ub9c1\n}\n</code></pre>"},{"location":"portfolio/XGEN-1.0-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EB%AA%A8%EB%8D%B8-%EA%B4%80%EB%A6%AC-UI-%EA%B5%AC%ED%98%84/#gpu_1","title":"\uc2e4\uc2dc\uac04 GPU \uc0c1\ud0dc \ubaa8\ub2c8\ud130\ub9c1","text":"<p>GPU \uc0c1\ud0dc\ub97c \uc2e4\uc2dc\uac04\uc73c\ub85c \ud655\uc778\ud560 \uc218 \uc788\ub294 \ub300\uc2dc\ubcf4\ub4dc\ub97c \uad6c\ud604\ud588\ub2e4:</p> <pre><code>const AdminModelServingManager: React.FC = () =&gt; {\n  const [gpuList, setGpuList] = useState&lt;GPUInfo[]&gt;([]);\n  const [gpuStatus, setGpuStatus] = useState&lt;GPUStatus&gt;({});\n\n  // GPU \ubaa9\ub85d \uc870\ud68c\n  useEffect(() =&gt; {\n    const fetchGPUs = async () =&gt; {\n      try {\n        const response = await listGPUs();\n        setGpuList(response.gpus);\n      } catch (error) {\n        console.error('GPU \ubaa9\ub85d \uc870\ud68c \uc2e4\ud328:', error);\n      }\n    };\n\n    fetchGPUs();\n    const interval = setInterval(fetchGPUs, 5000); // 5\ucd08\ub9c8\ub2e4 \uac31\uc2e0\n    return () =&gt; clearInterval(interval);\n  }, []);\n\n  return (\n    &lt;div className={styles.container}&gt;\n      &lt;div className={styles.gpuSection}&gt;\n        &lt;h3&gt;GPU \uc0c1\ud0dc&lt;/h3&gt;\n        {gpuList.map(gpu =&gt; (\n          &lt;div key={gpu.id} className={styles.gpuCard}&gt;\n            &lt;div className={styles.gpuHeader}&gt;\n              &lt;span&gt;GPU {gpu.id}: {gpu.name}&lt;/span&gt;\n              &lt;span className={gpu.utilization &gt; 80 ? styles.warning : styles.normal}&gt;\n                {gpu.utilization}%\n              &lt;/span&gt;\n            &lt;/div&gt;\n            &lt;div className={styles.gpuStats}&gt;\n              &lt;div&gt;\uba54\ubaa8\ub9ac: {gpu.memory_used}MB / {gpu.memory_total}MB&lt;/div&gt;\n              &lt;div&gt;\uc628\ub3c4: {gpu.temperature}\u00b0C&lt;/div&gt;\n              &lt;div&gt;\uc804\ub825: {gpu.power_usage}W&lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div className={styles.gpuProgress}&gt;\n              &lt;progress \n                value={gpu.memory_used} \n                max={gpu.memory_total}\n                className={gpu.memory_used / gpu.memory_total &gt; 0.9 ? styles.criticalProgress : ''}\n              /&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        ))}\n      &lt;/div&gt;\n    &lt;/div&gt;\n  );\n};\n</code></pre>"},{"location":"portfolio/XGEN-1.0-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EB%AA%A8%EB%8D%B8-%EA%B4%80%EB%A6%AC-UI-%EA%B5%AC%ED%98%84/#api","title":"\ub3d9\uc801 API \ub77c\uc6b0\ud305","text":"<p>K8s \ud658\uacbd\uc5d0\uc11c \ub3d9\uc801\uc73c\ub85c API \uc5d4\ub4dc\ud3ec\uc778\ud2b8\ub97c \ubcc0\uacbd\ud560 \uc218 \uc788\ub3c4\ub85d \uad6c\ud604\ud588\ub2e4:</p> <pre><code>// modelAPI.js\nconst getBaseURL = () =&gt; {\n  if (typeof window !== 'undefined') {\n    // \ud074\ub77c\uc774\uc5b8\ud2b8 \uc0ac\uc774\ub4dc\uc5d0\uc11c \ud604\uc7ac \ub3c4\uba54\uc778 \uae30\ubc18\uc73c\ub85c API URL \uc0dd\uc131\n    const protocol = window.location.protocol;\n    const hostname = window.location.hostname;\n    const port = window.location.port;\n\n    if (process.env.K3S_ENV === 'true') {\n      // K8s \ud658\uacbd\uc5d0\uc11c\ub294 \uc11c\ube44\uc2a4\uba85 \uc9c1\uc811 \uc0ac\uc6a9\n      return `${protocol}//${hostname}:${port || (protocol === 'https:' ? 443 : 80)}`;\n    } else {\n      // \uac1c\ubc1c \ud658\uacbd\n      return 'http://localhost:8000';\n    }\n  }\n  return 'http://localhost:8000';\n};\n\nexport const getGpuStatus = async (): Promise&lt;GPUStatus&gt; =&gt; {\n  const baseURL = getBaseURL();\n  const response = await fetch(`${baseURL}/api/inference/v1/gpu/status`);\n  return response.json();\n};\n\nexport const testGpu = async (gpuId: number): Promise&lt;TestResult&gt; =&gt; {\n  const baseURL = getBaseURL();\n  const response = await fetch(`${baseURL}/api/inference/v1/gpu/test`, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({ gpu_id: gpuId })\n  });\n  return response.json();\n};\n</code></pre>"},{"location":"portfolio/XGEN-1.0-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EB%AA%A8%EB%8D%B8-%EA%B4%80%EB%A6%AC-UI-%EA%B5%AC%ED%98%84/#ui","title":"\ubaa8\ub378 \uc11c\ube59 \uad00\ub9ac UI","text":""},{"location":"portfolio/XGEN-1.0-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EB%AA%A8%EB%8D%B8-%EA%B4%80%EB%A6%AC-UI-%EA%B5%AC%ED%98%84/#_3","title":"\ubaa8\ub378 \uc124\uc815 \ud3fc","text":"<p>\ubcf5\uc7a1\ud55c \ubaa8\ub378 \uc124\uc815\uc744 \uc0ac\uc6a9\uc790 \uce5c\ud654\uc801\uc73c\ub85c \ub9cc\ub4e4\uae30 \uc704\ud574 \ub2e8\uacc4\ubcc4 \ud3fc\uc744 \uad6c\ud604\ud588\ub2e4:</p> <pre><code>const ModelConfigForm: React.FC&lt;ModelConfigFormProps&gt; = ({ onSubmit }) =&gt; {\n  const [config, setConfig] = useState&lt;ModelConfig&gt;({\n    model_id: '',\n    main_gpu: 0,\n    n_gpu_layers: -1,  // \uae30\ubcf8\uac12: \ubaa8\ub4e0 \ub808\uc774\uc5b4\ub97c GPU\uc5d0\n    n_ctx: 4096,\n    temperature: 0.7,\n    top_p: 0.9\n  });\n\n  const handleGpuLayersChange = (value: string) =&gt; {\n    // \uc74c\uc218 \uc785\ub825 \ud5c8\uc6a9 (-1\uc740 \uc804\uccb4 \ub808\uc774\uc5b4 \uc758\ubbf8)\n    const numValue = value === '' ? 0 : parseInt(value);\n    setConfig(prev =&gt; ({ ...prev, n_gpu_layers: numValue }));\n  };\n\n  return (\n    &lt;form className={styles.configForm} onSubmit={(e) =&gt; {\n      e.preventDefault();\n      onSubmit(config);\n    }}&gt;\n      &lt;div className={styles.section}&gt;\n        &lt;h4&gt;GPU \uc124\uc815&lt;/h4&gt;\n        &lt;div className={styles.formGroup}&gt;\n          &lt;label&gt;\uc8fc GPU \uc120\ud0dd:&lt;/label&gt;\n          &lt;select \n            value={config.main_gpu} \n            onChange={(e) =&gt; setConfig(prev =&gt; ({ \n              ...prev, \n              main_gpu: parseInt(e.target.value) \n            }))}\n          &gt;\n            {gpuList.map(gpu =&gt; (\n              &lt;option key={gpu.id} value={gpu.id}&gt;\n                GPU {gpu.id}: {gpu.name} \n                ({Math.round(gpu.memory_free / 1024)}GB \uc0ac\uc6a9\uac00\ub2a5)\n              &lt;/option&gt;\n            ))}\n          &lt;/select&gt;\n        &lt;/div&gt;\n\n        &lt;div className={styles.formGroup}&gt;\n          &lt;label&gt;GPU \ub808\uc774\uc5b4 \uc218:&lt;/label&gt;\n          &lt;input\n            type=\"number\"\n            value={config.n_gpu_layers}\n            onChange={(e) =&gt; handleGpuLayersChange(e.target.value)}\n            placeholder=\"(-1: \uc804\uccb4 \ub808\uc774\uc5b4)\"\n          /&gt;\n          &lt;small&gt;-1 \uc785\ub825 \uc2dc \ubaa8\ub4e0 \ub808\uc774\uc5b4\ub97c GPU\uc5d0\uc11c \ucc98\ub9ac&lt;/small&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n\n      &lt;div className={styles.section}&gt;\n        &lt;h4&gt;\ubaa8\ub378 \ud30c\ub77c\ubbf8\ud130&lt;/h4&gt;\n        &lt;div className={styles.formGroup}&gt;\n          &lt;label&gt;\ucee8\ud14d\uc2a4\ud2b8 \ud06c\uae30:&lt;/label&gt;\n          &lt;input\n            type=\"number\"\n            value={config.n_ctx}\n            onChange={(e) =&gt; setConfig(prev =&gt; ({ \n              ...prev, \n              n_ctx: parseInt(e.target.value) \n            }))}\n            min=\"512\"\n            max=\"32768\"\n          /&gt;\n        &lt;/div&gt;\n\n        &lt;div className={styles.parameterGrid}&gt;\n          &lt;div&gt;\n            &lt;label&gt;Temperature:&lt;/label&gt;\n            &lt;input\n              type=\"number\"\n              step=\"0.1\"\n              min=\"0\"\n              max=\"2\"\n              value={config.temperature}\n              onChange={(e) =&gt; setConfig(prev =&gt; ({ \n                ...prev, \n                temperature: parseFloat(e.target.value) \n              }))}\n            /&gt;\n          &lt;/div&gt;\n          &lt;div&gt;\n            &lt;label&gt;Top P:&lt;/label&gt;\n            &lt;input\n              type=\"number\"\n              step=\"0.1\"\n              min=\"0\"\n              max=\"1\"\n              value={config.top_p}\n              onChange={(e) =&gt; setConfig(prev =&gt; ({ \n                ...prev, \n                top_p: parseFloat(e.target.value) \n              }))}\n            /&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n\n      &lt;button type=\"submit\" className={styles.submitButton}&gt;\n        \ubaa8\ub378 \uc11c\ube59 \uc2dc\uc791\n      &lt;/button&gt;\n    &lt;/form&gt;\n  );\n};\n</code></pre>"},{"location":"portfolio/XGEN-1.0-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EB%AA%A8%EB%8D%B8-%EA%B4%80%EB%A6%AC-UI-%EA%B5%AC%ED%98%84/#_4","title":"\ubaa8\ub378 \uc0c1\ud0dc \uad00\ub9ac","text":"<p>\uc2e4\ud589 \uc911\uc778 \ubaa8\ub378\ub4e4\uc758 \uc0c1\ud0dc\ub97c \uc2e4\uc2dc\uac04\uc73c\ub85c \ucd94\uc801\ud558\uace0 \uad00\ub9ac\ud558\ub294 \uc2dc\uc2a4\ud15c\uc744 \uad6c\ud604\ud588\ub2e4:</p> <pre><code>const ModelStatusManager: React.FC = () =&gt; {\n  const [models, setModels] = useState&lt;ModelInstance[]&gt;([]);\n  const [loading, setLoading] = useState(false);\n\n  const handleModelDelete = async (modelId: string) =&gt; {\n    if (!confirm(`\ubaa8\ub378 ${modelId}\uc744(\ub97c) \uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?`)) return;\n\n    setLoading(true);\n    try {\n      // group.model_id \uc0ac\uc6a9\ud558\uc5ec \uc0ad\uc81c (directory\uac00 \uc544\ub2cc)\n      await deleteModel(modelId);\n\n      // \ub85c\uceec \uc0c1\ud0dc \uc5c5\ub370\uc774\ud2b8\n      setModels(prev =&gt; prev.filter(model =&gt; model.model_id !== modelId));\n\n      toast.success('\ubaa8\ub378\uc774 \uc131\uacf5\uc801\uc73c\ub85c \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.');\n    } catch (error) {\n      console.error('\ubaa8\ub378 \uc0ad\uc81c \uc2e4\ud328:', error);\n      toast.error('\ubaa8\ub378 \uc0ad\uc81c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    &lt;div className={styles.modelGrid}&gt;\n      {models.map(model =&gt; (\n        &lt;div key={model.model_id} className={styles.modelCard}&gt;\n          &lt;div className={styles.modelHeader}&gt;\n            &lt;h4&gt;{model.model_id}&lt;/h4&gt;\n            &lt;div className={styles.statusBadge} data-status={model.status}&gt;\n              {model.status}\n            &lt;/div&gt;\n          &lt;/div&gt;\n\n          &lt;div className={styles.modelInfo}&gt;\n            &lt;div&gt;GPU: {model.main_gpu}&lt;/div&gt;\n            &lt;div&gt;\ub808\uc774\uc5b4: {model.n_gpu_layers}&lt;/div&gt;\n            &lt;div&gt;\ucee8\ud14d\uc2a4\ud2b8: {model.n_ctx}&lt;/div&gt;\n            &lt;div&gt;\uba54\ubaa8\ub9ac \uc0ac\uc6a9: {model.memory_usage}MB&lt;/div&gt;\n          &lt;/div&gt;\n\n          &lt;div className={styles.modelActions}&gt;\n            &lt;button \n              onClick={() =&gt; testModel(model.model_id)}\n              className={styles.testButton}\n            &gt;\n              \ud14c\uc2a4\ud2b8\n            &lt;/button&gt;\n            &lt;button \n              onClick={() =&gt; handleModelDelete(model.model_id)}\n              className={styles.deleteButton}\n              disabled={loading}\n            &gt;\n              \uc0ad\uc81c\n            &lt;/button&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      ))}\n    &lt;/div&gt;\n  );\n};\n</code></pre>"},{"location":"portfolio/XGEN-1.0-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EB%AA%A8%EB%8D%B8-%EA%B4%80%EB%A6%AC-UI-%EA%B5%AC%ED%98%84/#typescript","title":"TypeScript \ud0c0\uc785 \uc548\uc815\uc131","text":"<p>\ubcf5\uc7a1\ud55c \ubaa8\ub378 \uad00\ub9ac \ub85c\uc9c1\uc5d0\uc11c \ud0c0\uc785 \uc5d0\ub7ec\ub97c \ubc29\uc9c0\ud558\uae30 \uc704\ud574 \ucca0\uc800\ud55c \ud0c0\uc785 \uc815\uc758\ub97c \ub3c4\uc785\ud588\ub2e4:</p> <pre><code>// types/modelManagement.ts\nexport interface ModelInstance {\n  model_id: string;\n  status: 'loading' | 'ready' | 'error' | 'stopped';\n  main_gpu: number;\n  n_gpu_layers: number;\n  n_ctx: number;\n  temperature: number;\n  top_p: number;\n  memory_usage: number;\n  created_at: string;\n  last_used: string;\n}\n\nexport interface GPUTestResult {\n  success: boolean;\n  gpu_id: number;\n  test_duration: number;\n  memory_allocated: number;\n  peak_memory: number;\n  error?: string;\n}\n\n// API \uc751\ub2f5 \ud0c0\uc785\nexport interface ListGPUsResponse {\n  gpus: GPUInfo[];\n  total_memory: number;\n  available_memory: number;\n}\n\n// \ud0c0\uc785 \uc5d0\ub7ec \ubc29\uc9c0\ub97c \uc704\ud55c \uc548\uc804\ud55c \ud0c0\uc785 \uce90\uc2a4\ud305\nconst safeModelConfig = (data: any): ModelConfig =&gt; {\n  return {\n    model_id: data.model_id ?? '',\n    main_gpu: Number(data.main_gpu ?? 0),\n    n_gpu_layers: Number(data.n_gpu_layers ?? -1),\n    n_ctx: Number(data.n_ctx ?? 4096),\n    temperature: Number(data.temperature ?? 0.7),\n    top_p: Number(data.top_p ?? 0.9)\n  };\n};\n</code></pre>"},{"location":"portfolio/XGEN-1.0-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EB%AA%A8%EB%8D%B8-%EA%B4%80%EB%A6%AC-UI-%EA%B5%AC%ED%98%84/#_5","title":"\uc0ac\uc6a9\uc790 \uacbd\ud5d8 \ucd5c\uc801\ud654","text":""},{"location":"portfolio/XGEN-1.0-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EB%AA%A8%EB%8D%B8-%EA%B4%80%EB%A6%AC-UI-%EA%B5%AC%ED%98%84/#_6","title":"\uc2e4\uc2dc\uac04 \ud53c\ub4dc\ubc31","text":"<p>\ubaa8\ub378 \ub85c\ub529\uc774\ub098 GPU \ud14c\uc2a4\ud2b8 \uac19\uc740 \uae34 \uc791\uc5c5\uc5d0\uc11c \uc0ac\uc6a9\uc790\uc5d0\uac8c \uc2e4\uc2dc\uac04 \ud53c\ub4dc\ubc31\uc744 \uc81c\uacf5:</p> <pre><code>const ModelLoadingProgress: React.FC&lt;{ modelId: string }&gt; = ({ modelId }) =&gt; {\n  const [progress, setProgress] = useState(0);\n  const [stage, setStage] = useState('');\n\n  useEffect(() =&gt; {\n    const eventSource = new EventSource(`/api/model/${modelId}/progress`);\n\n    eventSource.onmessage = (event) =&gt; {\n      const data = JSON.parse(event.data);\n      setProgress(data.progress);\n      setStage(data.stage);\n    };\n\n    return () =&gt; eventSource.close();\n  }, [modelId]);\n\n  return (\n    &lt;div className={styles.loadingProgress}&gt;\n      &lt;div className={styles.progressHeader}&gt;\n        &lt;span&gt;{stage}&lt;/span&gt;\n        &lt;span&gt;{progress}%&lt;/span&gt;\n      &lt;/div&gt;\n      &lt;progress value={progress} max={100} /&gt;\n      &lt;div className={styles.progressStages}&gt;\n        &lt;div className={progress &gt;= 20 ? styles.completed : ''}&gt;\ubaa8\ub378 \ub2e4\uc6b4\ub85c\ub4dc&lt;/div&gt;\n        &lt;div className={progress &gt;= 50 ? styles.completed : ''}&gt;GPU \uba54\ubaa8\ub9ac \ud560\ub2f9&lt;/div&gt;\n        &lt;div className={progress &gt;= 80 ? styles.completed : ''}&gt;\ubaa8\ub378 \ub85c\ub529&lt;/div&gt;\n        &lt;div className={progress &gt;= 100 ? styles.completed : ''}&gt;\uc11c\ube59 \uc900\ube44 \uc644\ub8cc&lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  );\n};\n</code></pre>"},{"location":"portfolio/XGEN-1.0-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EB%AA%A8%EB%8D%B8-%EA%B4%80%EB%A6%AC-UI-%EA%B5%AC%ED%98%84/#_7","title":"\ubc18\uc751\ud615 \ub514\uc790\uc778","text":"<p>\ub2e4\uc591\ud55c \ud654\uba74 \ud06c\uae30\uc5d0\uc11c \ubcf5\uc7a1\ud55c GPU \uad00\ub9ac UI\uac00 \uc81c\ub300\ub85c \uc791\ub3d9\ud558\ub3c4\ub85d \ud588\ub2e4:</p> <pre><code>// AdminLLMModelManager.module.scss\n.container {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 2rem;\n  padding: 1rem;\n\n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n    gap: 1rem;\n  }\n}\n\n.gpuSection {\n  .gpuCard {\n    background: #f8f9fa;\n    border-radius: 8px;\n    padding: 1rem;\n    margin-bottom: 1rem;\n\n    .gpuProgress {\n      margin-top: 0.5rem;\n\n      progress {\n        width: 100%;\n        height: 8px;\n\n        &amp;.criticalProgress::-webkit-progress-value {\n          background-color: #dc3545;\n        }\n      }\n    }\n  }\n}\n\n.modelGrid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n  gap: 1rem;\n\n  .modelCard {\n    border: 1px solid #dee2e6;\n    border-radius: 8px;\n    padding: 1rem;\n\n    .statusBadge {\n      padding: 0.25rem 0.5rem;\n      border-radius: 4px;\n      font-size: 0.875rem;\n      font-weight: 500;\n\n      &amp;[data-status=\"ready\"] {\n        background-color: #d4edda;\n        color: #155724;\n      }\n\n      &amp;[data-status=\"error\"] {\n        background-color: #f8d7da;\n        color: #721c24;\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"portfolio/XGEN-1.0-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EB%AA%A8%EB%8D%B8-%EA%B4%80%EB%A6%AC-UI-%EA%B5%AC%ED%98%84/#_8","title":"\uc131\ub2a5 \ucd5c\uc801\ud654 \uacb0\uacfc","text":""},{"location":"portfolio/XGEN-1.0-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EB%AA%A8%EB%8D%B8-%EA%B4%80%EB%A6%AC-UI-%EA%B5%AC%ED%98%84/#_9","title":"\ub80c\ub354\ub9c1 \ucd5c\uc801\ud654","text":"<ul> <li>React.memo\uc640 useCallback\uc73c\ub85c \ubd88\ud544\uc694\ud55c \ub9ac\ub80c\ub354\ub9c1 \uc81c\uac70</li> <li>\uac00\uc0c1\ud654\ub41c \ubaa8\ub378 \ubaa9\ub85d\uc73c\ub85c \ub300\ub7c9 \ub370\uc774\ud130 \ucc98\ub9ac \ucd5c\uc801\ud654</li> <li>GPU \uc0c1\ud0dc \ud3f4\ub9c1 \ucd5c\uc801\ud654\ub85c CPU \uc0ac\uc6a9\ub960 60% \uac10\uc18c</li> </ul>"},{"location":"portfolio/XGEN-1.0-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EB%AA%A8%EB%8D%B8-%EA%B4%80%EB%A6%AC-UI-%EA%B5%AC%ED%98%84/#api_1","title":"API \ud638\ucd9c \ucd5c\uc801\ud654","text":"<ul> <li>\uc2e4\uc2dc\uac04 \ubaa8\ub2c8\ud130\ub9c1 \uac04\uaca9 \uc870\uc815 (1\ucd08 \u2192 5\ucd08)</li> <li>\ubc30\uce58 API \ud638\ucd9c\ub85c \ub124\ud2b8\uc6cc\ud06c \uc694\uccad 75% \uac10\uc18c</li> <li>\uc5d0\ub7ec \uc0c1\ud0dc \uce90\uc2f1\uc73c\ub85c \ubd88\ud544\uc694\ud55c \uc7ac\uc2dc\ub3c4 \ubc29\uc9c0</li> </ul>"},{"location":"portfolio/XGEN-1.0-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EB%AA%A8%EB%8D%B8-%EA%B4%80%EB%A6%AC-UI-%EA%B5%AC%ED%98%84/#_10","title":"\uc0ac\uc6a9\uc790 \uacbd\ud5d8","text":"<ul> <li>\ubaa8\ub378 \ub85c\ub529 \uc2dc\uac01\uc801 \ud53c\ub4dc\ubc31\uc73c\ub85c \uc0ac\uc6a9\uc790 \ub9cc\uc871\ub3c4 \ud5a5\uc0c1</li> <li>GPU \uc790\uc6d0 \uc2e4\uc2dc\uac04 \ubaa8\ub2c8\ud130\ub9c1\uc73c\ub85c \ud6a8\uc728\uc801\uc778 \uc790\uc6d0 \uad00\ub9ac</li> <li>TypeScript \ub3c4\uc785\uc73c\ub85c \ub7f0\ud0c0\uc784 \uc5d0\ub7ec 90% \uac10\uc18c</li> </ul> <p>XGEN 1.0 \ud504\ub860\ud2b8\uc5d4\ub4dc\ub294 \ubcf5\uc7a1\ud55c AI \ubaa8\ub378 \uc11c\ube59 \uc778\ud504\ub77c\ub97c \uc9c1\uad00\uc801\uc778 UI\ub85c \ucd94\uc0c1\ud654\ud558\uc5ec, \uac1c\ubc1c\uc790\uac00 \uae30\uc220\uc801 \ubcf5\uc7a1\uc131\uc5d0 \ub9e4\ubab0\ub418\uc9c0 \uc54a\uace0 \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\uc5d0 \uc9d1\uc911\ud560 \uc218 \uc788\uac8c \ud574\uc8fc\ub294 \ub3c4\uad6c\uac00 \ub418\uc5c8\ub2e4.</p>"},{"location":"portfolio/%EC%83%81%ED%92%88-%EB%A6%AC%EB%B7%B0-%EB%B6%84%EC%84%9D-API-%EA%B0%9C%EB%B0%9C%EA%B8%B0/","title":"\uc0c1\ud488 \ub9ac\ubdf0 \ubd84\uc11d API \uac1c\ubc1c\uae30 - \ud615\ud0dc\uc18c \ubd84\uc11d\uae30 \uc131\ub2a5 \ucd5c\uc801\ud654","text":""},{"location":"portfolio/%EC%83%81%ED%92%88-%EB%A6%AC%EB%B7%B0-%EB%B6%84%EC%84%9D-API-%EA%B0%9C%EB%B0%9C%EA%B8%B0/#api-","title":"\uc0c1\ud488 \ub9ac\ubdf0 \ubd84\uc11d API \uac1c\ubc1c\uae30 - \ud615\ud0dc\uc18c \ubd84\uc11d\uae30 \uc131\ub2a5 \ucd5c\uc801\ud654","text":"<p>2024\ub144 5\uc6d4, \uc0c1\ud488 \ub9ac\ubdf0 \ud14d\uc2a4\ud2b8 \ubd84\uc11d\uc758 \uc815\ud655\ub3c4\ub97c \ub192\uc774\uae30 \uc704\ud55c \ud615\ud0dc\uc18c \ubd84\uc11d\uae30 \uad50\uccb4 \uc791\uc5c5\uc744 \uc9c4\ud589\ud588\ub2e4. Elasticsearch\uc758 \uae30\ubcf8 \ubd84\uc11d\uae30\uc5d0\uc11c \ud55c\uad6d\uc5b4 \uc804\uc6a9 nori \ubd84\uc11d\uae30\ub85c \ubcc0\uacbd\ud558\uba70 \uacaa\uc740 \uacfc\uc815\uc744 \uc815\ub9ac\ud55c\ub2e4.</p>"},{"location":"portfolio/%EC%83%81%ED%92%88-%EB%A6%AC%EB%B7%B0-%EB%B6%84%EC%84%9D-API-%EA%B0%9C%EB%B0%9C%EA%B8%B0/#_1","title":"\ubc30\uacbd","text":"<p>\uae30\uc874 \uc0c1\ud488 \ub9ac\ubdf0 \ubd84\uc11d \uc2dc\uc2a4\ud15c\uc740 \ub2e8\uc21c\ud55c \ud0a4\uc6cc\ub4dc \ub9e4\uce6d \ubc29\uc2dd\uc744 \uc0ac\uc6a9\ud558\uace0 \uc788\uc5c8\ub2e4. \ud558\uc9c0\ub9cc \ud55c\uad6d\uc5b4\uc758 \ud2b9\uc131\uc0c1 \uc870\uc0ac, \uc5b4\ubbf8 \ubcc0\ud654 \ub4f1\uc73c\ub85c \uc778\ud574 \ub3d9\uc77c\ud55c \uc758\ubbf8\uc758 \ub2e8\uc5b4\ub77c\ub3c4 \ub2e4\ub974\uac8c \uc778\uc2dd\ub418\ub294 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud588\ub2e4. </p> <p>\uc608\ub97c \ub4e4\uc5b4, \"\ub9db\uc788\ub2e4\", \"\ub9db\uc788\uc5b4\uc694\", \"\ub9db\uc788\uc2b5\ub2c8\ub2e4\"\uac00 \ubaa8\ub450 \ub2e4\ub978 \ud1a0\ud070\uc73c\ub85c \uc778\uc2dd\ub418\uc5b4 \ub9ac\ubdf0 \uac10\uc815 \ubd84\uc11d\uc758 \uc815\ud655\ub3c4\uac00 \ub5a8\uc5b4\uc9c0\ub294 \uc0c1\ud669\uc774\uc5c8\ub2e4.</p> <pre><code># \uae30\uc874 \ubd84\uc11d\uae30 \uacb0\uacfc\n\"\uc774 \uc81c\ud488\uc740 \uc815\ub9d0 \ub9db\uc788\uc5b4\uc694\" \u2192 [\"\uc774\", \"\uc81c\ud488\uc740\", \"\uc815\ub9d0\", \"\ub9db\uc788\uc5b4\uc694\"]\n\n# nori \ubd84\uc11d\uae30 \uacb0\uacfc (\uc6d0\ud558\ub294 \uacb0\uacfc)\n\"\uc774 \uc81c\ud488\uc740 \uc815\ub9d0 \ub9db\uc788\uc5b4\uc694\" \u2192 [\"\uc81c\ud488\", \"\uc815\ub9d0\", \"\ub9db\uc788\ub2e4\"]\n</code></pre>"},{"location":"portfolio/%EC%83%81%ED%92%88-%EB%A6%AC%EB%B7%B0-%EB%B6%84%EC%84%9D-API-%EA%B0%9C%EB%B0%9C%EA%B8%B0/#_2","title":"\uae30\uc220\uc801 \uc811\uadfc","text":""},{"location":"portfolio/%EC%83%81%ED%92%88-%EB%A6%AC%EB%B7%B0-%EB%B6%84%EC%84%9D-API-%EA%B0%9C%EB%B0%9C%EA%B8%B0/#1-nori","title":"1. nori \ubd84\uc11d\uae30 \ub3c4\uc785 \uacb0\uc815","text":"<p>Elasticsearch\uc758 nori \ubd84\uc11d\uae30\ub294 \ud55c\uad6d\uc5b4 \ud615\ud0dc\uc18c \ubd84\uc11d\uc744 \uc704\ud574 \ud2b9\ubcc4\ud788 \uc124\uacc4\ub418\uc5c8\ub2e4. \ub8e8\uc52c\uc758 Korean \ubd84\uc11d\uae30\ub97c \uae30\ubc18\uc73c\ub85c \ud558\uba70, \ub2e4\uc74c\uacfc \uac19\uc740 \uc7a5\uc810\uc774 \uc788\ub2e4:</p> <ul> <li>\ud488\uc0ac \ud0dc\uae45: \uba85\uc0ac, \ud615\uc6a9\uc0ac, \ub3d9\uc0ac \ub4f1\uc744 \uad6c\ubd84\ud558\uc5ec \ubd84\uc11d</li> <li>\ud65c\uc6a9\ud615 \uc815\uaddc\ud654: \"\ub9db\uc788\uc5b4\uc694\", \"\ub9db\uc788\uc2b5\ub2c8\ub2e4\" \u2192 \"\ub9db\uc788\ub2e4\"</li> <li>\ubcf5\ud569\uc5b4 \ubd84\ud574: \"\uc0bc\uc131\uc804\uc790\" \u2192 \"\uc0bc\uc131\", \"\uc804\uc790\"</li> <li>\ubd88\uc6a9\uc5b4 \ucc98\ub9ac: \uc870\uc0ac, \uc5b4\ubbf8 \ub4f1 \uc758\ubbf8 \uc5c6\ub294 \ud1a0\ud070 \uc81c\uac70</li> </ul>"},{"location":"portfolio/%EC%83%81%ED%92%88-%EB%A6%AC%EB%B7%B0-%EB%B6%84%EC%84%9D-API-%EA%B0%9C%EB%B0%9C%EA%B8%B0/#2-elasticsearch","title":"2. Elasticsearch \uc778\ub371\uc2a4 \uc124\uc815 \ubcc0\uacbd","text":"<p>\uae30\uc874 \uc778\ub371\uc2a4\ub97c \uc0ad\uc81c\ud558\uace0 nori \ubd84\uc11d\uae30\ub97c \uc801\uc6a9\ud55c \uc0c8\ub85c\uc6b4 \uc778\ub371\uc2a4\ub97c \uc0dd\uc131\ud588\ub2e4.</p> <pre><code>{\n  \"settings\": {\n    \"analysis\": {\n      \"tokenizer\": {\n        \"nori_user_dict_tokenizer\": {\n          \"type\": \"nori_tokenizer\",\n          \"decompound_mode\": \"mixed\",\n          \"user_dictionary\": \"userdict_ko.txt\"\n        }\n      },\n      \"analyzer\": {\n        \"nori_analyzer\": {\n          \"type\": \"custom\",\n          \"tokenizer\": \"nori_user_dict_tokenizer\",\n          \"filter\": [\n            \"lowercase\",\n            \"nori_part_of_speech\",\n            \"nori_readingform\"\n          ]\n        }\n      }\n    }\n  },\n  \"mappings\": {\n    \"properties\": {\n      \"review_text\": {\n        \"type\": \"text\",\n        \"analyzer\": \"nori_analyzer\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"portfolio/%EC%83%81%ED%92%88-%EB%A6%AC%EB%B7%B0-%EB%B6%84%EC%84%9D-API-%EA%B0%9C%EB%B0%9C%EA%B8%B0/#3","title":"3. \uc131\ub2a5 \uce21\uc815 \ubc0f \ucd5c\uc801\ud654","text":"<p>\ud615\ud0dc\uc18c \ubd84\uc11d\uae30 \ubcc0\uacbd \ud6c4 \uc131\ub2a5\uc744 \uce21\uc815\ud574\ubcf4\ub2c8 \uc608\uc0c1\ub300\ub85c \ucc98\ub9ac \uc2dc\uac04\uc774 \uc99d\uac00\ud588\ub2e4. \ud558\uc9c0\ub9cc \uc815\ud655\ub3c4\uac00 \ud06c\uac8c \ud5a5\uc0c1\ub418\uc5b4 \uc804\uccb4\uc801\uc778 \ud488\uc9c8\uc740 \uac1c\uc120\ub418\uc5c8\ub2e4.</p> <p>\ubcc0\uacbd \uc804/\ud6c4 \ube44\uad50: - \ucc98\ub9ac \uc18d\ub3c4: 100ms \u2192 150ms (50% \uc99d\uac00) - \uac10\uc815 \ubd84\uc11d \uc815\ud655\ub3c4: 73% \u2192 89% (16%p \ud5a5\uc0c1) - \ud0a4\uc6cc\ub4dc \ucd94\ucd9c \uc815\ud655\ub3c4: 68% \u2192 85% (17%p \ud5a5\uc0c1)</p>"},{"location":"portfolio/%EC%83%81%ED%92%88-%EB%A6%AC%EB%B7%B0-%EB%B6%84%EC%84%9D-API-%EA%B0%9C%EB%B0%9C%EA%B8%B0/#_3","title":"\ud2b8\ub7ec\ube14\uc288\ud305","text":""},{"location":"portfolio/%EC%83%81%ED%92%88-%EB%A6%AC%EB%B7%B0-%EB%B6%84%EC%84%9D-API-%EA%B0%9C%EB%B0%9C%EA%B8%B0/#1","title":"1. \uc0ac\uc6a9\uc790 \uc0ac\uc804 \uad6c\ucd95","text":"<p>\ucd08\uae30\uc5d0\ub294 \ube0c\ub79c\ub4dc\uba85\uc774\ub098 \uc0c1\ud488\uba85\uc774 \uc81c\ub300\ub85c \ubd84\uc11d\ub418\uc9c0 \uc54a\ub294 \ubb38\uc81c\uac00 \uc788\uc5c8\ub2e4. \"\uc544\uc774\ud3f015\"\uac00 \"\uc544\uc774\", \"\ud3f0\", \"15\"\ub85c \ubd84\ub9ac\ub418\uc5b4 \uc758\ubbf8\ub97c \uc783\ub294 \uacbd\uc6b0\uc600\ub2e4.</p> <p>\uc774\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574 \uc0ac\uc6a9\uc790 \uc0ac\uc804(<code>userdict_ko.txt</code>)\uc744 \uad6c\ucd95\ud588\ub2e4:</p> <pre><code># \ube0c\ub79c\ub4dc\uba85\n\uc544\uc774\ud3f0\n\uac24\ub7ed\uc2dc\n\uc0bc\uc131\uc804\uc790\n\n# \uc0c1\ud488 \uce74\ud14c\uace0\ub9ac\n\uc2a4\ub9c8\ud2b8\ud3f0\n\ub178\ud2b8\ubd81\n\uc774\uc5b4\ud3f0\n\n# \ub3c4\uba54\uc778 \ud2b9\ud654 \uc6a9\uc5b4\n\uac00\uc131\ube44\n\uac00\uc2ec\ube44\n\uac13\uc131\ube44\n</code></pre>"},{"location":"portfolio/%EC%83%81%ED%92%88-%EB%A6%AC%EB%B7%B0-%EB%B6%84%EC%84%9D-API-%EA%B0%9C%EB%B0%9C%EA%B8%B0/#2","title":"2. \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9 \ucd5c\uc801\ud654","text":"<p>nori \ubd84\uc11d\uae30 \ub3c4\uc785 \ud6c4 \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9\uc774 \ud06c\uac8c \uc99d\uac00\ud588\ub2e4. JVM \ud799 \uba54\ubaa8\ub9ac\ub97c 8GB\uc5d0\uc11c 12GB\ub85c \uc99d\uc124\ud558\uace0, \ubd88\ud544\uc694\ud55c \ud544\ud130\ub97c \uc81c\uac70\ud558\uc5ec \ucd5c\uc801\ud654\ud588\ub2e4.</p> <pre><code># elasticsearch.yml\nindices.memory.index_buffer_size: 20%\nthread_pool.search.size: 4\nthread_pool.search.queue_size: 1000\n</code></pre>"},{"location":"portfolio/%EC%83%81%ED%92%88-%EB%A6%AC%EB%B7%B0-%EB%B6%84%EC%84%9D-API-%EA%B0%9C%EB%B0%9C%EA%B8%B0/#3_1","title":"3. \uc0c9\uc778 \uc7ac\uad6c\ucd95 \uc790\ub3d9\ud654","text":"<p>\uae30\uc874 \ub370\uc774\ud130\ub97c \uc0c8\ub85c\uc6b4 \uc778\ub371\uc2a4\ub85c \ub9c8\uc774\uadf8\ub808\uc774\uc158\ud558\ub294 \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc791\uc131\ud588\ub2e4. \uc57d 200\ub9cc \uac74\uc758 \ub9ac\ubdf0 \ub370\uc774\ud130\ub97c \ubb34\uc911\ub2e8\uc73c\ub85c \uc774\uc804\ud558\uae30 \uc704\ud574 \ubcc4\uce6d(alias)\uc744 \ud65c\uc6a9\ud55c \ube14\ub8e8-\uadf8\ub9b0 \ubc30\ud3ec \ubc29\uc2dd\uc744 \uc801\uc6a9\ud588\ub2e4.</p> <pre><code>def reindex_reviews():\n    # \uc0c8 \uc778\ub371\uc2a4 \uc0dd\uc131\n    new_index = f\"reviews_nori_{datetime.now().strftime('%Y%m%d')}\"\n    es.indices.create(index=new_index, body=index_mapping)\n\n    # \ub370\uc774\ud130 \ub9c8\uc774\uadf8\ub808\uc774\uc158\n    helpers.reindex(es, \n                   source_index=\"reviews\", \n                   target_index=new_index,\n                   chunk_size=1000)\n\n    # \ubcc4\uce6d \uc804\ud658\n    es.indices.update_aliases({\n        \"actions\": [\n            {\"remove\": {\"index\": \"reviews_*\", \"alias\": \"reviews\"}},\n            {\"add\": {\"index\": new_index, \"alias\": \"reviews\"}}\n        ]\n    })\n</code></pre>"},{"location":"portfolio/%EC%83%81%ED%92%88-%EB%A6%AC%EB%B7%B0-%EB%B6%84%EC%84%9D-API-%EA%B0%9C%EB%B0%9C%EA%B8%B0/#_4","title":"\uacb0\uacfc \ubc0f \uac1c\uc120\uc0ac\ud56d","text":"<p>\ud615\ud0dc\uc18c \ubd84\uc11d\uae30 \uad50\uccb4 \ud6c4 \ub2e4\uc74c\uacfc \uac19\uc740 \uac1c\uc120 \ud6a8\uacfc\ub97c \ud655\uc778\ud588\ub2e4:</p> <ol> <li>\uac10\uc815 \ubd84\uc11d \uc815\ud655\ub3c4 16%p \ud5a5\uc0c1: \ubd80\uc815\uc801 \ub9ac\ubdf0\uc640 \uae0d\uc815\uc801 \ub9ac\ubdf0 \uad6c\ubd84\uc774 \ub354 \uc815\ud655\ud574\uc9d0</li> <li>\ud0a4\uc6cc\ub4dc \ucd94\ucd9c \ud488\uc9c8 \uac1c\uc120: \uc758\ubbf8 \uc788\ub294 \uba85\uc0ac, \ud615\uc6a9\uc0ac \uc704\uc8fc\ub85c \ucd94\ucd9c</li> <li>\uac80\uc0c9 \ud488\uc9c8 \ud5a5\uc0c1: \ud65c\uc6a9\ud615 \uc815\uaddc\ud654\ub85c \uac80\uc0c9 \uc7ac\ud604\uc728 \uc99d\uac00</li> </ol> <p>\ud2b9\ud788 \"\ub9db\uc5c6\uc5b4\uc694\", \"\ub9db\uc5c6\uc2b5\ub2c8\ub2e4\", \"\ub9db\uc5c6\ub2e4\" \ub4f1\uc774 \ubaa8\ub450 \"\ub9db\uc5c6\ub2e4\"\ub85c \uc815\uaddc\ud654\ub418\uc5b4, \ub3d9\uc77c\ud55c \uac10\uc815\uc744 \ud45c\ud604\ud558\ub294 \ub2e4\uc591\ud55c \ud45c\ud604\ub4e4\uc744 \uc815\ud655\ud788 \ubd84\uc11d\ud560 \uc218 \uc788\uac8c \ub418\uc5c8\ub2e4.</p>"},{"location":"portfolio/%EC%83%81%ED%92%88-%EB%A6%AC%EB%B7%B0-%EB%B6%84%EC%84%9D-API-%EA%B0%9C%EB%B0%9C%EA%B8%B0/#_5","title":"\uc55e\uc73c\ub85c\uc758 \uacc4\ud68d","text":"<p>\ud604\uc7ac\ub294 \uae30\ubcf8\uc801\uc778 \ud615\ud0dc\uc18c \ubd84\uc11d\ub9cc \uc801\uc6a9\ud588\uc9c0\ub9cc, \ud5a5\ud6c4 \ub2e4\uc74c\uacfc \uac19\uc740 \uac1c\uc120\uc744 \uacc4\ud68d\ud558\uace0 \uc788\ub2e4:</p> <ul> <li>\uac1c\uccb4\uba85 \uc778\uc2dd(NER): \ube0c\ub79c\ub4dc\uba85, \uc0c1\ud488\uba85 \uc790\ub3d9 \ucd94\ucd9c</li> <li>\uac10\uc815 \uc5b4\ud718 \uc0ac\uc804 \ud655\uc7a5: \ub3c4\uba54\uc778 \ud2b9\ud654 \uac10\uc815 \ud45c\ud604 \ucd94\uac00</li> <li>\uc2e4\uc2dc\uac04 \ubd84\uc11d \ud30c\uc774\ud504\ub77c\uc778: \uce74\ud504\uce74 \uae30\ubc18 \uc2a4\ud2b8\ub9bc \ucc98\ub9ac</li> </ul> <p>\ud55c\uad6d\uc5b4 \ud14d\uc2a4\ud2b8 \ubd84\uc11d\uc740 \uc0dd\uac01\ubcf4\ub2e4 \ubcf5\uc7a1\ud558\uc9c0\ub9cc, \uc801\uc808\ud55c \ub3c4\uad6c \uc120\ud0dd\uacfc \ud29c\ub2dd\uc744 \ud1b5\ud574 \ud070 \uc131\ub2a5 \ud5a5\uc0c1\uc744 \uc5bb\uc744 \uc218 \uc788\ub2e4\ub294 \uac83\uc744 \ud655\uc778\ud588\ub2e4. nori \ubd84\uc11d\uae30\ub294 \ud55c\uad6d\uc5b4 \ucc98\ub9ac\uc5d0 \ud2b9\ud654\ub41c \uac15\ub825\ud55c \ub3c4\uad6c\uc784\uc744 \ub2e4\uc2dc \ud55c\ubc88 \ub290\uaf08\ub2e4.</p>"},{"location":"portfolio/%EC%B1%97%EB%B4%87%20UI%20%EA%B0%9C%EB%B0%9C%EA%B8%B0%20-%20WebSocket%20%EA%B8%B0%EB%B0%98%20%EC%8B%A4%EC%8B%9C%EA%B0%84%20%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D/","title":"\ucc57\ubd07 UI \uac1c\ubc1c\uae30 - WebSocket \uae30\ubc18 \uc2e4\uc2dc\uac04 \uc2a4\ud2b8\ub9ac\ubc0d","text":""},{"location":"portfolio/%EC%B1%97%EB%B4%87%20UI%20%EA%B0%9C%EB%B0%9C%EA%B8%B0%20-%20WebSocket%20%EA%B8%B0%EB%B0%98%20%EC%8B%A4%EC%8B%9C%EA%B0%84%20%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D/#ui-websocket","title":"\ucc57\ubd07 UI \uac1c\ubc1c\uae30 - WebSocket \uae30\ubc18 \uc2e4\uc2dc\uac04 \uc2a4\ud2b8\ub9ac\ubc0d","text":""},{"location":"portfolio/%EC%B1%97%EB%B4%87%20UI%20%EA%B0%9C%EB%B0%9C%EA%B8%B0%20-%20WebSocket%20%EA%B8%B0%EB%B0%98%20%EC%8B%A4%EC%8B%9C%EA%B0%84%20%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D/#_1","title":"\uac1c\uc694","text":"<p>2024\ub144 3\uc6d4, chatbot-ui-next \ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c WebSocket \uae30\ubc18\uc758 \uc2e4\uc2dc\uac04 \ucc44\ud305 UI\ub97c \uac1c\ubc1c\ud588\ub2e4. \uae30\uc874 HTTP \uae30\ubc18\uc758 \ub2e8\uc21c \uc694\uccad/\uc751\ub2f5 \uad6c\uc870\uc5d0\uc11c \ubc97\uc5b4\ub098 \uc2e4\uc2dc\uac04 \uc2a4\ud2b8\ub9ac\ubc0d \uc751\ub2f5 \ucc98\ub9ac\uc640 \uc0ac\uc6a9\uc790 \uacbd\ud5d8\uc744 \ud5a5\uc0c1\uc2dc\ud0a4\ub294 \uac83\uc774 \uc8fc\uc694 \ubaa9\ud45c\uc600\ub2e4.</p> <p></p>"},{"location":"portfolio/%EC%B1%97%EB%B4%87%20UI%20%EA%B0%9C%EB%B0%9C%EA%B8%B0%20-%20WebSocket%20%EA%B8%B0%EB%B0%98%20%EC%8B%A4%EC%8B%9C%EA%B0%84%20%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D/#_2","title":"\uae30\uc220 \uc2a4\ud0dd","text":"<ul> <li>\ud504\ub860\ud2b8\uc5d4\ub4dc: Next.js, React, TypeScript</li> <li>WebSocket: Socket.IO</li> <li>UI \ud504\ub808\uc784\uc6cc\ud06c: Tailwind CSS</li> <li>\uc0c1\ud0dc\uad00\ub9ac: React Context API</li> </ul>"},{"location":"portfolio/%EC%B1%97%EB%B4%87%20UI%20%EA%B0%9C%EB%B0%9C%EA%B8%B0%20-%20WebSocket%20%EA%B8%B0%EB%B0%98%20%EC%8B%A4%EC%8B%9C%EA%B0%84%20%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D/#_3","title":"\uc8fc\uc694 \uad6c\ud604 \ub0b4\uc6a9","text":""},{"location":"portfolio/%EC%B1%97%EB%B4%87%20UI%20%EA%B0%9C%EB%B0%9C%EA%B8%B0%20-%20WebSocket%20%EA%B8%B0%EB%B0%98%20%EC%8B%A4%EC%8B%9C%EA%B0%84%20%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D/#1-websocket","title":"1. WebSocket \uc5f0\uacb0 \uad00\ub9ac","text":"<p>\uac00\uc7a5 \uba3c\uc800 \ud574\uacb0\ud574\uc57c \ud560 \ubb38\uc81c\ub294 \uc548\uc815\uc801\uc778 WebSocket \uc5f0\uacb0 \uad00\ub9ac\uc600\ub2e4. \ub124\ud2b8\uc6cc\ud06c \ubd88\uc548\uc815\uc774\ub098 \uc11c\ubc84 \uc7ac\uc2dc\uc791 \uc2dc \uc5f0\uacb0\uc774 \ub04a\uc5b4\uc9c0\ub294 \uc0c1\ud669\uc744 \ucc98\ub9ac\ud574\uc57c \ud588\ub2e4.</p> <pre><code>// socket-context.tsx\nexport const SocketProvider: React.FC&lt;{ children: React.ReactNode }&gt; = ({ children }) =&gt; {\n  const [socket, setSocket] = useState&lt;Socket | null&gt;(null);\n  const [isConnected, setIsConnected] = useState(false);\n\n  useEffect(() =&gt; {\n    const newSocket = io(process.env.NEXT_PUBLIC_SOCKET_URL!, {\n      transports: ['websocket'],\n      timeout: 20000,\n      forceNew: true\n    });\n\n    // \uc5f0\uacb0 \uc774\ubca4\ud2b8 \ucc98\ub9ac\n    newSocket.on('connect', () =&gt; {\n      setIsConnected(true);\n      console.log('Socket connected:', newSocket.id);\n    });\n\n    // \uc7ac\uc5f0\uacb0 \ub85c\uc9c1\n    newSocket.on('disconnect', () =&gt; {\n      setIsConnected(false);\n      console.log('Socket disconnected');\n    });\n\n    newSocket.on('reconnect', (attempt) =&gt; {\n      console.log('Socket reconnected after', attempt, 'attempts');\n      setIsConnected(true);\n    });\n\n    setSocket(newSocket);\n\n    return () =&gt; {\n      newSocket.close();\n    };\n  }, []);\n\n  return (\n    &lt;SocketContext.Provider value={{ socket, isConnected }}&gt;\n      {children}\n    &lt;/SocketContext.Provider&gt;\n  );\n};\n</code></pre>"},{"location":"portfolio/%EC%B1%97%EB%B4%87%20UI%20%EA%B0%9C%EB%B0%9C%EA%B8%B0%20-%20WebSocket%20%EA%B8%B0%EB%B0%98%20%EC%8B%A4%EC%8B%9C%EA%B0%84%20%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D/#2","title":"2. \uc2a4\ud2b8\ub9ac\ubc0d \uc751\ub2f5 \ucc98\ub9ac","text":"<p>AI \ubaa8\ub378\uc758 \uc751\ub2f5\uc744 \uc2e4\uc2dc\uac04\uc73c\ub85c \uc2a4\ud2b8\ub9ac\ubc0d\ud558\uba74\uc11c \uc0ac\uc6a9\uc790\uc5d0\uac8c \ubcf4\uc5ec\uc8fc\ub294 \uae30\ub2a5\uc744 \uad6c\ud604\ud588\ub2e4. \ud14d\uc2a4\ud2b8\ub97c \uccad\ud06c \ub2e8\uc704\ub85c \ubc1b\uc544\uc11c \uae30\uc874 \uba54\uc2dc\uc9c0\uc5d0 \uacc4\uc18d \ud569\uccd0\uc11c \ubcf4\uc5ec\uc8fc\ub294 \ubc29\uc2dd\uc744 \ucc44\ud0dd\ud588\ub2e4.</p> <pre><code>// chat-interface.tsx\nconst handleStreamMessage = useCallback((data: StreamMessage) =&gt; {\n  setMessages(prev =&gt; {\n    const newMessages = [...prev];\n    const lastMessage = newMessages[newMessages.length - 1];\n\n    if (lastMessage &amp;&amp; lastMessage.isStreaming) {\n      // \uae30\uc874 \uc2a4\ud2b8\ub9ac\ubc0d \uba54\uc2dc\uc9c0\uc5d0 \ud14d\uc2a4\ud2b8 \ud569\uce58\uae30\n      lastMessage.content += data.content;\n      lastMessage.timestamp = new Date();\n    } else {\n      // \uc0c8\ub85c\uc6b4 \uc2a4\ud2b8\ub9ac\ubc0d \uba54\uc2dc\uc9c0 \uc2dc\uc791\n      newMessages.push({\n        id: data.messageId,\n        content: data.content,\n        isStreaming: true,\n        sender: 'bot',\n        timestamp: new Date()\n      });\n    }\n\n    return newMessages;\n  });\n}, []);\n\nuseEffect(() =&gt; {\n  if (!socket) return;\n\n  socket.on('stream-message', handleStreamMessage);\n  socket.on('stream-complete', (data) =&gt; {\n    setMessages(prev =&gt; {\n      const newMessages = [...prev];\n      const targetMessage = newMessages.find(msg =&gt; msg.id === data.messageId);\n      if (targetMessage) {\n        targetMessage.isStreaming = false;\n      }\n      return newMessages;\n    });\n  });\n\n  return () =&gt; {\n    socket.off('stream-message', handleStreamMessage);\n    socket.off('stream-complete');\n  };\n}, [socket, handleStreamMessage]);\n</code></pre>"},{"location":"portfolio/%EC%B1%97%EB%B4%87%20UI%20%EA%B0%9C%EB%B0%9C%EA%B8%B0%20-%20WebSocket%20%EA%B8%B0%EB%B0%98%20%EC%8B%A4%EC%8B%9C%EA%B0%84%20%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D/#3","title":"3. \ube44\ub3d9\uae30 \uc9c8\ubb38 \ucc98\ub9ac","text":"<p>\uc0ac\uc6a9\uc790\uac00 \uc774\uc804 \uc751\ub2f5\uc744 \uae30\ub2e4\ub9ac\uc9c0 \uc54a\uace0 \uc5f0\uc18d\uc73c\ub85c \uc9c8\ubb38\uc744 \ubcf4\ub0bc \uc218 \uc788\ub3c4\ub85d \ube44\ub3d9\uae30 \ubc29\uc2dd\uc744 \uc801\uc6a9\ud588\ub2e4. \uac01 \uc9c8\ubb38\uc5d0 \uace0\uc720 ID\ub97c \ubd80\uc5ec\ud558\uace0 \ud050 \ubc29\uc2dd\uc73c\ub85c \ucc98\ub9ac\ud588\ub2e4.</p> <pre><code>const sendMessage = async (content: string) =&gt; {\n  if (!socket || !isConnected) {\n    setError('\uc5f0\uacb0\uc774 \ub04a\uc5b4\uc84c\uc2b5\ub2c8\ub2e4. \uc0c8\ub85c\uace0\uce68\ud574\uc8fc\uc138\uc694.');\n    return;\n  }\n\n  const messageId = uuidv4();\n  const userMessage: Message = {\n    id: messageId,\n    content,\n    sender: 'user',\n    timestamp: new Date()\n  };\n\n  // \uc0ac\uc6a9\uc790 \uba54\uc2dc\uc9c0 \uc989\uc2dc \ud45c\uc2dc\n  setMessages(prev =&gt; [...prev, userMessage]);\n\n  // \uc11c\ubc84\uc5d0 \ube44\ub3d9\uae30 \uc694\uccad\n  socket.emit('send-message', {\n    messageId,\n    content,\n    conversationId: currentConversationId\n  });\n\n  // \ub85c\ub529 \uc778\ub514\ucf00\uc774\ud130 \ud45c\uc2dc\n  setIsLoading(prev =&gt; new Set([...prev, messageId]));\n};\n</code></pre>"},{"location":"portfolio/%EC%B1%97%EB%B4%87%20UI%20%EA%B0%9C%EB%B0%9C%EA%B8%B0%20-%20WebSocket%20%EA%B8%B0%EB%B0%98%20%EC%8B%A4%EC%8B%9C%EA%B0%84%20%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D/#4-ui","title":"4. \ubc18\uc751\ud615 UI \uad6c\ud604","text":"<p>\ub370\uc2a4\ud06c\ud1b1\uacfc \ubaa8\ubc14\uc77c \ud658\uacbd\uc744 \ubaa8\ub450 \uace0\ub824\ud55c \ubc18\uc751\ud615 \ub514\uc790\uc778\uc744 \uad6c\ud604\ud588\ub2e4. \ud2b9\ud788 \ucc44\ud305 \uc785\ub825\ucc3d\uacfc \uba54\uc2dc\uc9c0 \ub9ac\uc2a4\ud2b8\uc758 \ub808\uc774\uc544\uc6c3\uc774 \ud654\uba74 \ud06c\uae30\uc5d0 \ub530\ub77c \uc801\uc808\ud788 \uc870\uc815\ub418\ub3c4\ub85d \ud588\ub2e4.</p> <pre><code>/* \ubc18\uc751\ud615 \ucc44\ud305 \ucee8\ud14c\uc774\ub108 */\n.chat-container {\n  @apply flex flex-col h-screen max-w-4xl mx-auto;\n}\n\n.message-list {\n  @apply flex-1 overflow-y-auto p-4 space-y-4;\n  scrollbar-width: thin;\n  scrollbar-color: rgb(156 163 175) transparent;\n}\n\n.input-container {\n  @apply sticky bottom-0 bg-white border-t p-4;\n}\n\n/* \ubaa8\ubc14\uc77c \ucd5c\uc801\ud654 */\n@media (max-width: 768px) {\n  .chat-container {\n    @apply h-screen;\n  }\n\n  .message-list {\n    @apply p-2 space-y-2;\n  }\n\n  .input-container {\n    @apply p-2;\n  }\n}\n</code></pre>"},{"location":"portfolio/%EC%B1%97%EB%B4%87%20UI%20%EA%B0%9C%EB%B0%9C%EA%B8%B0%20-%20WebSocket%20%EA%B8%B0%EB%B0%98%20%EC%8B%A4%EC%8B%9C%EA%B0%84%20%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D/#5","title":"5. \ud14c\uc774\ube14 \ub370\uc774\ud130 \ub80c\ub354\ub9c1","text":"<p>AI \uc751\ub2f5\uc5d0 \ud3ec\ud568\ub41c \ud45c \ud615\ud0dc\uc758 \ub370\uc774\ud130\ub97c \ub9c8\ud06c\ub2e4\uc6b4\uc73c\ub85c \ud30c\uc2f1\ud558\uc5ec HTML \ud14c\uc774\ube14\ub85c \ubcc0\ud658\ud558\ub294 \uae30\ub2a5\uc744 \uad6c\ud604\ud588\ub2e4.</p> <pre><code>// table-renderer.tsx\nconst TableRenderer: React.FC&lt;{ content: string }&gt; = ({ content }) =&gt; {\n  const renderTable = (tableMarkdown: string) =&gt; {\n    const lines = tableMarkdown.trim().split('\\n');\n    const headers = lines[0].split('|').map(h =&gt; h.trim()).filter(h =&gt; h);\n    const rows = lines.slice(2).map(row =&gt; \n      row.split('|').map(cell =&gt; cell.trim()).filter(cell =&gt; cell)\n    );\n\n    return (\n      &lt;div className=\"overflow-x-auto my-4\"&gt;\n        &lt;table className=\"min-w-full border-collapse border border-gray-300\"&gt;\n          &lt;thead&gt;\n            &lt;tr className=\"bg-gray-50\"&gt;\n              {headers.map((header, index) =&gt; (\n                &lt;th key={index} className=\"border border-gray-300 px-4 py-2 text-left\"&gt;\n                  {header}\n                &lt;/th&gt;\n              ))}\n            &lt;/tr&gt;\n          &lt;/thead&gt;\n          &lt;tbody&gt;\n            {rows.map((row, rowIndex) =&gt; (\n              &lt;tr key={rowIndex}&gt;\n                {row.map((cell, cellIndex) =&gt; (\n                  &lt;td key={cellIndex} className=\"border border-gray-300 px-4 py-2\"&gt;\n                    {cell}\n                  &lt;/td&gt;\n                ))}\n              &lt;/tr&gt;\n            ))}\n          &lt;/tbody&gt;\n        &lt;/table&gt;\n      &lt;/div&gt;\n    );\n  };\n\n  // \ub9c8\ud06c\ub2e4\uc6b4 \ud14c\uc774\ube14 \ud328\ud134 \uac10\uc9c0 \ubc0f \ubcc0\ud658\n  const processedContent = content.replace(/\\|.*\\|[\\s\\S]*?\\n(?=\\n|$)/g, (match) =&gt; {\n    return `&lt;TABLE_PLACEHOLDER&gt;${btoa(match)}&lt;/TABLE_PLACEHOLDER&gt;`;\n  });\n\n  return &lt;div dangerouslySetInnerHTML={{ __html: processedContent }} /&gt;;\n};\n</code></pre>"},{"location":"portfolio/%EC%B1%97%EB%B4%87%20UI%20%EA%B0%9C%EB%B0%9C%EA%B8%B0%20-%20WebSocket%20%EA%B8%B0%EB%B0%98%20%EC%8B%A4%EC%8B%9C%EA%B0%84%20%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D/#_4","title":"\ud2b8\ub7ec\ube14\uc288\ud305","text":""},{"location":"portfolio/%EC%B1%97%EB%B4%87%20UI%20%EA%B0%9C%EB%B0%9C%EA%B8%B0%20-%20WebSocket%20%EA%B8%B0%EB%B0%98%20%EC%8B%A4%EC%8B%9C%EA%B0%84%20%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D/#1","title":"1. \uc5f0\uacb0 \ub04a\uae40 \ubb38\uc81c","text":"<p>\ucd08\uae30\uc5d0\ub294 \ub124\ud2b8\uc6cc\ud06c\uac00 \ubd88\uc548\uc815\ud55c \ud658\uacbd\uc5d0\uc11c WebSocket \uc5f0\uacb0\uc774 \uc790\uc8fc \ub04a\uc5b4\uc9c0\ub294 \ubb38\uc81c\uac00 \uc788\uc5c8\ub2e4. \uc774\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574 \ud558\ud2b8\ube44\ud2b8 \uae30\ub2a5\uacfc \uc790\ub3d9 \uc7ac\uc5f0\uacb0 \ub85c\uc9c1\uc744 \ucd94\uac00\ud588\ub2e4.</p> <pre><code>// \ud558\ud2b8\ube44\ud2b8 \uad6c\ud604\nuseEffect(() =&gt; {\n  if (!socket || !isConnected) return;\n\n  const heartbeatInterval = setInterval(() =&gt; {\n    socket.emit('ping');\n  }, 30000); // 30\ucd08\ub9c8\ub2e4 ping\n\n  socket.on('pong', () =&gt; {\n    setLastHeartbeat(Date.now());\n  });\n\n  return () =&gt; {\n    clearInterval(heartbeatInterval);\n    socket.off('pong');\n  };\n}, [socket, isConnected]);\n</code></pre>"},{"location":"portfolio/%EC%B1%97%EB%B4%87%20UI%20%EA%B0%9C%EB%B0%9C%EA%B8%B0%20-%20WebSocket%20%EA%B8%B0%EB%B0%98%20%EC%8B%A4%EC%8B%9C%EA%B0%84%20%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D/#2_1","title":"2. \uba54\ubaa8\ub9ac \ub204\uc218 \ubc29\uc9c0","text":"<p>\uc2a4\ud2b8\ub9ac\ubc0d \uba54\uc2dc\uc9c0\uac00 \uacc4\uc18d \uc313\uc774\uba74\uc11c \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9\uc774 \ub298\uc5b4\ub098\ub294 \ubb38\uc81c\uac00 \uc788\uc5c8\ub2e4. \uc77c\uc815 \uac1c\uc218 \uc774\uc0c1\uc758 \uba54\uc2dc\uc9c0\ub294 \uc790\ub3d9\uc73c\ub85c \uc815\ub9ac\ud558\ub294 \ub85c\uc9c1\uc744 \ucd94\uac00\ud588\ub2e4.</p> <pre><code>const MAX_MESSAGES = 1000;\n\nconst addMessage = useCallback((message: Message) =&gt; {\n  setMessages(prev =&gt; {\n    const newMessages = [...prev, message];\n    if (newMessages.length &gt; MAX_MESSAGES) {\n      return newMessages.slice(-MAX_MESSAGES);\n    }\n    return newMessages;\n  });\n}, []);\n</code></pre>"},{"location":"portfolio/%EC%B1%97%EB%B4%87%20UI%20%EA%B0%9C%EB%B0%9C%EA%B8%B0%20-%20WebSocket%20%EA%B8%B0%EB%B0%98%20%EC%8B%A4%EC%8B%9C%EA%B0%84%20%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D/#_5","title":"\uc131\uacfc \ubc0f \uad50\ud6c8","text":"<p>\uc774 \ud504\ub85c\uc81d\ud2b8\ub97c \ud1b5\ud574 \uc2e4\uc2dc\uac04 \uc6f9 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uac1c\ubc1c\uc5d0 \ub300\ud55c \uae4a\uc740 \uc774\ud574\ub97c \uc5bb\uc744 \uc218 \uc788\uc5c8\ub2e4. WebSocket\uc744 \ud65c\uc6a9\ud55c \uc591\ubc29\ud5a5 \ud1b5\uc2e0, \uc2a4\ud2b8\ub9ac\ubc0d \ub370\uc774\ud130 \ucc98\ub9ac, \uadf8\ub9ac\uace0 \uc0ac\uc6a9\uc790 \uacbd\ud5d8 \ucd5c\uc801\ud654\uc5d0 \ub300\ud55c \uc2e4\uc804 \uacbd\ud5d8\uc744 \uc313\uc558\ub2e4.</p> <p>\ud2b9\ud788 \ub124\ud2b8\uc6cc\ud06c \ubd88\uc548\uc815 \uc0c1\ud669\uc5d0\uc11c\uc758 \ubcf5\uc6d0\ub825\uacfc \ub300\uc6a9\ub7c9 \ub370\uc774\ud130 \uc2a4\ud2b8\ub9ac\ubc0d \ucc98\ub9ac \ub2a5\ub825\uc744 \uac1c\uc120\ud560 \uc218 \uc788\uc5c8\uc73c\uba70, \uc774\ub294 \ud6c4\uc18d \ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c\ub3c4 \ud070 \ub3c4\uc6c0\uc774 \ub418\uc5c8\ub2e4.</p>"},{"location":"portfolio/%EC%B1%97%EB%B4%87%20UI%20%EA%B0%9C%EB%B0%9C%EA%B8%B0%20-%20WebSocket%20%EA%B8%B0%EB%B0%98%20%EC%8B%A4%EC%8B%9C%EA%B0%84%20%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D/#_6","title":"\ub2e4\uc74c \ub2e8\uacc4","text":"<p>\ud5a5\ud6c4\uc5d0\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 \uae30\ub2a5\uc744 \ucd94\uac00\ud560 \uacc4\ud68d\uc774\ub2e4:</p> <ul> <li>\uc74c\uc131 \uc785\ucd9c\ub825 \uc9c0\uc6d0</li> <li>\ub2e4\uad6d\uc5b4 \uc9c0\uc6d0</li> <li>\ucc44\ud305 \ud788\uc2a4\ud1a0\ub9ac \uc601\uad6c \uc800\uc7a5</li> <li>\uc2e4\uc2dc\uac04 \ud611\uc5c5 \uae30\ub2a5</li> </ul>"},{"location":"portfolio/%EA%B0%80%EC%83%81%20%ED%94%BC%ED%8C%85%20%EA%B8%B0%EB%8A%A5/%EA%B0%80%EC%83%81%20%ED%94%BC%ED%8C%85%EC%9D%B4%EB%9E%80/","title":"\uac00\uc0c1 \ud53c\ud305\uc774\ub780","text":""},{"location":"portfolio/%EA%B0%80%EC%83%81%20%ED%94%BC%ED%8C%85%20%EA%B8%B0%EB%8A%A5/%EA%B0%80%EC%83%81%20%ED%94%BC%ED%8C%85%EC%9D%B4%EB%9E%80/#_1","title":"\ud83d\ude03  \uc0c1\ud488 \ud53c\ud305","text":"<p>\ubaa8\ub378\uc774 \uc785\uace0 \uc788\ub294 \uc637\uc744 \uac1d\uccb4\ub85c \ucd94\ucd9c\ud558\uc5ec \uac00\uc0c1\ud53c\ud305\uc744 \ud560 \uc218 \uc788\ub294 \uae30\ub2a5</p> <p>\ud574\ub2f9 \uae30\ub2a5\uc758 \ubaa9\uc801\uc740 \uc628\ub77c\uc778 \uc1fc\ud551\uc744 \ud558\ub294 \uacbd\uc6b0,</p> <p>\uc758\uc0c1\uc744 \uc2e4\uc81c\ub85c \ud53c\ud305\ud574\ubcf4\uc9c0 \ubabb\ud558\ub294 \uac83\uc73c\ub85c \uc778\ud574, \uad6c\ub9e4\uae4c\uc9c0 \uc774\uc5b4\uc9c0\uc9c0 \uc54a\ub294 \uacbd\uc6b0\uac00 \ub9ce\uc74c</p> <p>\uc544.. \ubaa8\ub378\uc774 \uc785\uc73c\ub2c8\uae4c \uc774\ubed0\ubcf4\uc774\ub294\uac70 \uc544\ub2cc\uac00? \ub0b4\uac00 \uc785\uc73c\uba74\u2026.</p> <p>\uc774\ub7ec\ud55c \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574 \uc6b0\ub9ac\ub294 AI, \uc5ec\uae30\uc11c \ube44\uc804 \uae30\uc220\uc744 \ud65c\uc6a9\ud558\uc5ec \uac00\uc0c1\uc73c\ub85c \uc758\ub958\ub97c \ucc29\uc6a9\ud574\ubcfc \uc218 \uc788\ub294 \uc2dc\uc2a4\ud15c\uc744 \uac1c\ubc1c\ud558\uac8c \ub418\uc5c8\uc2b5\ub2c8\ub2e4.</p> <p><code>OOTDiffusion</code> \uae30\uc220\uc744 \ud65c\uc6a9\ud558\uc5ec \uc0ac\uc6a9\uc790\uac00 \uc0c1\ud488 \uc774\ubbf8\uc9c0\ub97c \uac00\uc0c1\uc73c\ub85c \uc785\uc5b4\ubcf4\ub294 \uacbd\ud5d8\uc744 \uc81c\uacf5\ud558\ub294 \uc194\ub8e8\uc158\uc744 \uac1c\ubc1c\ud588\uc2b5\ub2c8\ub2e4.</p> <p>\uc8fc\uc694 \uc5c5\ubb34</p> <ul> <li>OOTD \ub525\ub7ec\ub2dd \ubaa8\ub378 \uc0ac\uc6a9</li> <li>Next.js\ub97c \ud1b5\ud574 FO \ud654\uba74 \uae30\ud68d \ubc0f \uac1c\ubc1c</li> <li>\uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc \ubc0f \ud569\uc131 \uc774\ubbf8\uc9c0 \ubc18\ud658\ubc1b\uae30 \uc704\ud55c \ubc31\uc5d4\ub4dc \uac1c\ubc1c</li> </ul>"},{"location":"portfolio/%EA%B0%80%EC%83%81%20%ED%94%BC%ED%8C%85%20%EA%B8%B0%EB%8A%A5/%EA%B0%80%EC%83%81%20%ED%94%BC%ED%8C%85%EC%9D%B4%EB%9E%80/#_2","title":"\uae30\uc220 \uac1c\uc694","text":"<p>\uc758\ub958 \uac1d\uccb4 \ucd94\ucd9c </p> <ul> <li>\uc1fc\ud551\ubab0 \uc6f9\uc0ac\uc774\ud2b8\uc5d0 \ubaa8\ub378\uc774 \uc785\uace0 \uc788\ub294 \uc637\uc744 \uac1d\uccb4\ub85c \ucd94\ucd9c\ud558\ub294 \uc791\uc5c5 </li> <li>AI \ub294 \uc758\ub958\uc640 \ubc30\uacbd\uc744 \uc815\ud655\ud558\uac8c \uad6c\ubd84\ud558\uc5ec \uc758\ub958 \uac1d\uccb4\ub9cc\uc744 \ucd94\ucd9c</li> <li>\ud654\uc9c8 \uac1c\uc120\uc744 \uc704\ud574 \ud544\uc694 \uc2dc \uc774\ubbf8\uc9c0 \uc2a4\ucf00\uc77c\uc5c5\uc744 \uc801\uc6a9</li> </ul> <p></p> <p>\uac00\uc0c1 \ud53c\ud305 </p> <ul> <li>\uc18c\ube44\uc790\uac00 \uc790\uc2e0\uc758 \uc0ac\uc9c4 \uc5c5\ub85c\ub4dc\ud558\uace0, \uc758\ub958 \uac1d\uccb4\ub97c \uc120\ud0dd\ud558\uc5ec \uc785\ud788\ub294 \uacfc\uc815</li> <li>\uc5ec\uae30\uc11c <code>\ud3ec\uc988 \ucd94\uc815(pose estimation)</code>\uacfc <code>\uc774\ubbf8\uc9c0 \ud569\uc131</code> \uae30\uc220\uc774 \uc0ac\uc6a9</li> <li>\ud3ec\uc988 \ucd94\uc815\uc774\ub780 \uc0ac\uc6a9\uc790\uc758 \uc2e0\uccb4 \ud2b9\uc9d5\uacfc \uc790\uc138\ub97c \ud30c\uc545\ud558\uc5ec \uc758\ub958 \uac1d\uccb4\ub97c \uc790\uc5f0\uc2a4\ub7fd\uac8c \uc785\ud790 \uc218 \uc788\ub3c4\ub85d \ub3c4\uc640\uc90c</li> </ul> <p>\uc138\ubd80 \uad6c\ud604 \ubc0f \ub3d9\uc791 \ubc29\uc2dd (Next.js &amp; Python FastAPI)</p> <ul> <li>\ud53c\ud305\ud574\ubcf4\uae30 \ubc84\ud2bc \ud074\ub9ad \uc2dc, \ud31d\uc5c5\ucc3d\uc744 \ud1b5\ud574 \uc67c\ucabd\uc5d0 \ucd94\ucd9c\ub41c \uc0c1\ud488 \uc774\ubbf8\uc9c0, \uc624\ub978\ucabd\uc5d0\ub294 \uc0ac\uc6a9\uc790 \uc774\ubbf8\uc9c0(\ub0b4 \uc0ac\uc9c4)\ub97c \uc5c5\ub85c\ub4dc\ud558\ub3c4\ub85d \ud654\uba74 \uc124\uacc4</li> <li>\uc0ac\uc6a9\uc790\uac00 \uc790\uc2e0\uc758 \uc774\ubbf8\uc9c0\ub97c \uc5c5\ub85c\ub4dc\ud558\uace0, \ud53c\ud305\ud558\uace0 \uc2f6\uc740 \uc758\uc0c1\uc744 \ud074\ub9ad\ud558\uba74 \uc758\uc0c1 \uc774\ubbf8\uc9c0\uc640 \uc0ac\uc6a9\uc790 \uc774\ubbf8\uc9c0\ub97c \ub118\uaca8\uc8fc\uace0 \ud53c\ud305\ub41c \uc774\ubbf8\uc9c0\ub97c \ubc18\ud658\ubc1b\uc544 \uc0ac\uc6a9\uc790 \uc0ac\uc9c4\uc5d0 \uc801\uc6a9</li> <li>\uac00\uc0c1 \ucc29\uc6a9 \uc774\ubbf8\uc9c0\ub97c \uc0ac\uc6a9\uc790 \uc0ac\uc9c4\uc73c\ub85c \uad50\uccb4\ud558\uace0, \ucd08\uae30\ud654 \ubc84\ud2bc\uc744 \ucd94\uac00\ud558\uc5ec \uc0ac\uc6a9\uc790\uac00 \uc27d\uac8c \uc7ac\uc2dc\ub3c4\ud560 \uc218 \uc788\ub3c4\ub85d \uc124\uacc4</li> <li>\uc0c1\uc758\uc640 \ud558\uc758\ub97c \ub530\ub85c \uc785\uc5b4\ubcf4\uae30 \uc704\ud574 \uc774\uc804\uc5d0 \ud53c\ud305\ub41c \uc0ac\uc9c4\uc5d0 \ucd94\uac00 \ud53c\ud305\uc774 \uac00\ub2a5\ud558\ub3c4\ub85d \uad6c\ud604</li> </ul> <p></p> <p></p> <p></p> <p>\ud53c\ud305 \uc644\ub8cc</p> <ul> <li>\uc18c\ube44\uc790\ub294 \ubaa8\ub378\uc774 \ucc29\uc6a9\ud558\uace0 \uc788\ub294 \uc758\ub958\ub4e4\uc744 \uc9c1\uc811 \uc120\ud0dd\ud558\uc5ec \uc989\uc2dc \uc790\uc2e0\uc758 \uc0ac\uc9c4\uc5d0 \uc801\uc6a9\ud574\ubcfc \uc218 \uc788\uac8c \ub428</li> <li>\uc2e4\uc2dc\uac04 \ud53c\ub4dc\ubc31\uc744 \uc81c\uacf5\ud558\uc5ec \uc18c\ube44\uc790\uac00 \uc6d0\ud558\ub294 \ucd5c\uc801\uc758 \uc2a4\ud0c0\uc77c\uc744 \ucc3e\uc744 \uc218 \uc788\ub3c4\ub85d \ub3c4\uc640\uc90c</li> </ul>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EA%B2%80%EC%83%89%20%EB%A1%9C%EC%A7%81%28opensearch%29/","title":"\uac80\uc0c9 \ub85c\uc9c1(opensearch)","text":"<p>Tip</p> <p>\ud83d\udca1 \uc774 \uae30\uc220\uc758 \ud575\uc2ec\uc740 \ud14d\uc2a4\ud2b8\ub85c \uc774\ubbf8\uc9c0\ub97c \uac80\uc0c9\ud560 \uc218 \uc788\ub2e4\ub294 \uac83</p> <p>\uc804\ud1b5\uc801\uc778 \uc774\ubbf8\uc9c0 \uac80\uc0c9\uc740 \uba54\ud0c0\ub370\uc774\ud130\ub098 \ud30c\uc77c \uc774\ub984\uc744 \uae30\ubc18\uc73c\ub85c \ud558\uc9c0\ub9cc,</p> <p>\uc2dc\ub9e8\ud2f1 \uac80\uc0c9\uc740 \uc774\ubbf8\uc9c0 \uc790\uccb4\uc758 \ub0b4\uc6a9\uc744 \uc774\ud574\ud558\uace0 \uc774\ub97c \ubc14\ud0d5\uc73c\ub85c \uc720\uc0ac\ud55c \uc774\ubbf8\uc9c0\ub97c \uac80\uc0c9\ud560 \uc218 \uc788\ub294 \uae30\ub2a5\uc744 \ub9d0\ud569\ub2c8\ub2e4.</p> <p>\uc77c\ubc18\uc801\uc73c\ub85c \uc774\ub807\uac8c \uac80\uc0c9\ud574\uc11c \uacb0\uacfc\ub97c \ubc1b\uc73c\ub824\uba74, \ub2e8\uc21c \uc0c1\ud488\uba85 \ubfd0\ub9cc \uc544\ub2c8\ub77c \uc0c1\ud488\uc5d0 \ub300\ud55c \ucd94\uac00 \uc815\ubcf4\ub97c \uc785\ub825\ud574\uc8fc\uc5b4\uc57c \ud560 \uac83\uc774\ub2e4.</p> <p><code>\uaca8\uc6b8, \uac80\uc815\uc0c9, \ub370\uc774\ud2b8\ub8e9 \ub4f1\ub4f1</code></p> <p>\ud558\uc9c0\ub9cc \uc774 \uae30\ub2a5\uc758 \ud575\uc2ec\uc740 \uc5b4\ub5a0\ud55c \ucd94\uac00 \uc815\ubcf4\ub97c \uc785\ub825\ud558\uc9c0 \uc54a\uace0\ub3c4 \ub531 \uc774\ubbf8\uc9c0 \ud558\ub098\ub9cc\uc744 \uac00\uc9c0\uace0 \ud14d\uc2a4\ud2b8\ub97c \uac80\uc0c9\ud560 \uc218 \uc788\ub2e4\ub294 \uac83\uc785\ub2c8\ub2e4.</p> <p>\uc774\ubbf8\uc9c0\uc5d0 \ub300\ud55c \uc815\ubcf4(\ucea1\uc158)\uc744 \ucd94\ucd9c\ud560 \uc218 \uc788\ub294 \ubaa8\ub378\uc744 \uc0ac\uc6a9\ud558\uc5ec \ub370\uc774\ud130\ub97c \ud655\ubcf4\ud569\ub2c8\ub2e4.</p> <p>\uc608\uc2dc \uc2dc\ub9e8\ud2f1 \uac80\uc0c9\uc5b4</p> <ul> <li>\ubc1d\uc740 \ube68\uac04\uc0c9 \ubbf8\ub2c8 \uc6d0\ud53c\uc2a4</li> <li>\uc5b4\ub450\uc6b4 \ud30c\ub780\uc0c9 \ub871 \uc6d0\ud53c\uc2a4</li> <li>\uc18c\ub9e4\uac00 \uc5c6\ub294 \ub178\ub780\uc0c9 \uc6d0\ud53c\uc2a4</li> <li>\ud770\uc0c9 \ub85c\uc6b0\ud0d1 \uc6b4\ub3d9\ud654</li> <li>\uac08\uc0c9 \ud558\uc774\ud0d1 \uc6b4\ub3d9\ud654</li> <li> <p>\uc5ec\ub984\uc5d0 \uc785\uae30 \uc88b\uc740 \ud1b5\uae30\uc131 \uc88b\uc740 \ud770\uc0c9 \ud2f0\uc154\uce20</p> </li> <li> <p>\uaca9\uc2dd \uc788\ub294 \ud68c\uc0c9 \uc2ac\ub799\uc2a4 \ubc14\uc9c0</p> </li> <li>\ubc1c \ud3b8\ud55c \uc5ec\uc131\uc6a9 \uc6b4\ub3d9\ud654</li> <li>\ubc29\uc218 \uae30\ub2a5\uc774 \uc788\ub290 \uaca8\uc6b8 \ubd80\uce20</li> <li>\uace8\ub4dc \uceec\ub7ec\uc758 \ubbf8\ub2c8\uba40\ud55c \ub514\uc790\uc778 \uadc0\uac78\uc774</li> <li>\ub370\uc77c\ub9ac \ub8e9\uc5d0 \uc5b4\uc6b8\ub9ac\ub294 \uc2e4\ubc84 \ud314\ucc0c</li> </ul>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EA%B2%80%EC%83%89%20%EB%A1%9C%EC%A7%81%28opensearch%29/#0","title":"0. \uae30\uc220 \uac1c\uc694","text":"<ol> <li>\ucea1\uc158 \ucd94\ucd9c</li> <li>\ucea1\uc158 \uc784\ubca0\ub529 &amp; \uac80\uc0c9\uc5b4 \uc784\ubca0\ub529</li> <li>\uad00\ub828 \uc0c1\ud488 \uc81c\uacf5</li> </ol>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EA%B2%80%EC%83%89%20%EB%A1%9C%EC%A7%81%28opensearch%29/#1","title":"1. \uac2d\uc158 \ucd94\ucd9c","text":"<p>\uba3c\uc800, \uc0c1\ud488\uc744 \ub4f1\ub85d\ud560 \ub54c \ub123\ub294 \uc0c1\ud488 \uc774\ubbf8\uc9c0\ub85c\ubd80\ud130 \uc790\ub3d9\uc73c\ub85c \uac2d\uc158\uc744 \uc0dd\uc131</p> <p>\uc774\ub294 \uc0c1\ud488\uc758 \uc8fc\uc694 \ub0b4\uc6a9\uc744 \uc790\uc5f0\uc5b4\ub85c \ud45c\ud604\ud55c \uac83</p> <p>\uc608\ub97c \ub4e4\uc5b4, \uc2e0\ubc1c\uc0ac\uc9c4\uc5d0\uc11c \u201c\ube68\uac04 \uc904\ubb34\ub2ac\uac00 \uc788\ub294 \ub7f0\ub2dd\ud654 \ud55c \ucf24\ub808\u201d \uc640 \uac19\uc740 \ucea1\uc158\uc744 \uc0dd\uc131</p> <p>\uc601\uc5b4 \ucea1\uc158</p> <p>The image shows a young man standing in front of a building with a sign that reads \"Royles\". He is wearing a beige button-down shirt and black trousers. He is holding a black jacket in his left hand and has a pair of glasses on his right wrist. He has short black hair and is looking off to the side with a serious expression on his face. The building behind him has a wooden facade and large windows.</p> <p>\ud55c\uad6d\uc5b4 \ucea1\uc158</p> <p>\uadf8 \uc774\ubbf8\uc9c0\ub294 \"Royles\"\ub77c\uace0 \uc4f0\uc5ec\uc9c4 \ud45c\uc9c0\ud310\uc774 \uc788\ub294 \uac74\ubb3c \uc55e\uc5d0 \uc11c \uc788\ub294 \uc80a\uc740 \ub0a8\uc790\ub97c \ubcf4\uc5ec\uc90d\ub2c8\ub2e4. \uadf8\ub294 \ubca0\uc774\uc9c0\uc0c9 \ubc84\ud2bc\ub2e4\uc6b4 \uc154\uce20\uc640 \uac80\uc740\uc0c9 \ubc14\uc9c0\ub97c \uc785\uace0 \uc788\uc2b5\ub2c8\ub2e4. \uadf8\ub294 \uc67c\uc190\uc5d0 \uac80\uc740\uc0c9 \uc7ac\ud0b7\uc744 \ub4e4\uace0 \uc788\uace0 \uc624\ub978\ucabd \uc190\ubaa9\uc5d0 \uc548\uacbd\uc744 \uc4f0\uace0 \uc788\uc2b5\ub2c8\ub2e4. \uadf8\ub294 \uc9e7\uc740 \uac80\uc740 \uba38\ub9ac\ub97c \uac00\uc9c0\uace0 \uc788\uace0 \uc2ec\uac01\ud55c \ud45c\uc815\uc73c\ub85c \uc606\uc744 \ub0b4\ub824\ub2e4\ubcf4\uace0 \uc788\uc2b5\ub2c8\ub2e4. \uadf8\uc758 \ub4a4\uc5d0 \uc788\ub294 \uac74\ubb3c\uc740 \ub098\ubb34\ub85c \ub41c \uc815\uba74\uacfc \ud070 \ucc3d\ubb38\uc744 \uac00\uc9c0\uace0 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EA%B2%80%EC%83%89%20%EB%A1%9C%EC%A7%81%28opensearch%29/#2","title":"2. \ud544\uc694\ud55c \uc815\ubcf4\ub9cc \ucd94\ucd9c","text":"<p>\uc704\uc5d0\uc11c \ubcf4\uc2e0 \ucea1\uc158 \ub370\uc774\ud130\ub97c \ubaa8\ub450 \uc1fc\ud551\ubab0 \ub370\uc774\ud130\ub85c \ud65c\uc6a9\ub420 \uacbd\uc6b0, \ubd88\ud544\uc694\ud55c \ub370\uc774\ud130\uac00 \ud3ec\ud568\ub418\uc5b4 \uac80\uc0c9 \uc131\ub2a5\uc744 \uc800\ud558\uc2dc\ud0ac \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc774\ub97c \ubc29\uc9c0\ud558\uae30 \uc704\ud574, \ub3c4\uba54\uc778\uc5d0 \ub9de\ucd98 \ud575\uc2ec \ud0a4\uc6cc\ub4dc\ub9cc\uc744 \ucd94\ucd9c\ud558\uace0 \uc911\uc694\ub3c4 \uc21c\uc73c\ub85c \ub370\uc774\ud130\ub97c \uc800\uc7a5\ud558\ub294 \ubc29\uc2dd\uc744 \ucc44\ud0dd\ud558\uc600\uc2b5\ub2c8\ub2e4.</p> <p>\uc774\ub7ec\ud55c \ubc29\uc2dd\uc740 \uac80\uc0c9 \uc815\ud655\ub3c4\ub97c \ub192\uc774\uace0 \uc2dc\uc2a4\ud15c \uc131\ub2a5\uc744 \ucd5c\uc801\ud654\ud558\ub294 \ub370 \ub3c4\uc6c0\uc774 \ub429\ub2c8\ub2e4.</p> <p>\uc774\ubbf8\uc9c0 \uc9c8\uc758 \ubaa8\ub378\uc744 \ud1b5\ud574 \ud544\uc694\ud55c \uc815\ubcf4\ub9cc\uc744 \ucd94\ucd9c\ud558\ub294 \ubc29\ubc95\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4.</p> <ol> <li>\uce74\ud14c\uace0\ub9ac: \uc0c1\ud488\uc758 \uc885\ub958 (\uc608: \uc6d0\ud53c\uc2a4, \uc6b4\ub3d9\ud654, \uc2ac\ub799\uc2a4 \ub4f1)</li> <li>\uc0c9\uc0c1: \uc0c1\ud488\uc758 \uc8fc\uc694 \uc0c9\uc0c1 (\uc608: \ube68\uac04\uc0c9, \ud30c\ub780\uc0c9, \ub178\ub780\uc0c9 \ub4f1)</li> <li>\uc131\ubcc4: \uc0c1\ud488\uc758 \ub300\uc0c1 \uc131\ubcc4 (\uc608: \uc5ec\uc131\uc6a9, \ub0a8\uc131\uc6a9)</li> <li>\uacc4\uc808: \uc0c1\ud488\uc774 \uc801\ud569\ud55c \uacc4\uc808 (\uc608: \uc5ec\ub984\uc637, \uaca8\uc6b8\uc637 \ub4f1)</li> </ol> <p>\uc774\ub7ec\ud55c \uc815\ubcf4\ub97c \uc790\ub3d9\uc73c\ub85c \ucd94\ucd9c\ud560 \uc218 \uc788\ub3c4\ub85d AI \ubaa8\ub378\uc744 \uc124\uc815\ud558\uba74, \ubaa8\ub378\uc740 \uc774\ubbf8\uc9c0 \uc548\uc758 \uc0c1\ud488 \uc815\ubcf4\ub97c \uc815\ud655\ud558\uac8c \ubc18\ud658\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <p>\ucd94\ucd9c\ub41c \uc815\ubcf4\ub97c \uc800\uc7a5\ud558\uae30 \uc704\ud574 \uac80\uc0c9\uc5d4\uc9c4 \ud544\ub4dc\ub97c \uad6c\uc131\ud558\uace0, \uc784\ubca0\ub529 \ubca1\ud130\ub97c \uc0dd\uc131\ud558\uc5ec \uc800\uc7a5\ud569\ub2c8\ub2e4. \uc774\ub7ec\ud55c \ubc29\uc2dd\uc73c\ub85c, \uac80\uc0c9 \ucffc\ub9ac\uc5d0 \ub300\ud55c \uc751\ub2f5 \uc2dc \uc784\ubca0\ub529 \ubca1\ud130\ub97c \ud65c\uc6a9\ud558\uc5ec \ub192\uc740 \uc815\ud655\ub3c4\uc758 \uc2dc\ub9e8\ud2f1 \uac80\uc0c9 \uacb0\uacfc\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4.</p>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EA%B2%80%EC%83%89%20%EB%A1%9C%EC%A7%81%28opensearch%29/#3","title":"3. \uac80\uc0c9\uc5d4\uc9c4 \ub7ad\ud0b9 \ubaa8\ub378 \uad6c\ud604","text":"<p>OpenSearch\ub97c \ud65c\uc6a9\ud55c \uac80\uc0c9\uc5d4\uc9c4 \ub7ad\ud0b9 \ubaa8\ub378 \uad6c\ud604</p> <p>\uc774\ubbf8\uc9c0\uc5d0\uc11c \ucd94\ucd9c\ud55c \uc815\ubcf4\ub97c \ud6a8\uacfc\uc801\uc73c\ub85c \uac80\uc0c9\ud558\uae30 \uc704\ud574 OpenSearch\ub97c \ud65c\uc6a9\ud55c \uc2dc\ub9e8\ud2f1 \uac80\uc0c9 \uae30\ub2a5\uc744 \uad6c\ud604\ud569\ub2c8\ub2e4. \uc2dc\ub9e8\ud2f1 \uac80\uc0c9\uc740 \ub2e8\uc21c\ud55c \ud0a4\uc6cc\ub4dc \ub9e4\uce6d\uc744 \ub118\uc5b4, \uac80\uc0c9\uc5b4\uc640 \ubb38\uc11c \uac04\uc758 \uc758\ubbf8\uc801 \uc720\uc0ac\uc131\uc744 \uae30\ubc18\uc73c\ub85c \uacb0\uacfc\ub97c \uc81c\uacf5\ud558\ub294 \ubc29\uc2dd\uc785\ub2c8\ub2e4. \uc774\ub97c \uc704\ud574 \ub7ad\ud0b9 \ubaa8\ub378\uc744 \uc0ac\uc6a9\ud558\uc5ec \uac80\uc0c9 \uacb0\uacfc\uc758 \uc815\ud655\uc131\uc744 \ub192\uc785\ub2c8\ub2e4.</p>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EA%B2%80%EC%83%89%20%EB%A1%9C%EC%A7%81%28opensearch%29/#31-opensearch","title":"3.1 OpenSearch \uc124\uc815","text":"<p>\uba3c\uc800, OpenSearch \ud074\ub7ec\uc2a4\ud130\ub97c \uad6c\uc131\ud569\ub2c8\ub2e4.</p> <ol> <li>OpenSearch \ud074\ub7ec\uc2a4\ud130 \uad6c\uc131: \ud074\ub7ec\uc2a4\ud130\ub97c \uc124\uc815\ud558\uace0 \ud544\uc694\ud55c \uc778\ub371\uc2a4\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4.</li> <li>\uc778\ub371\uc2a4 \ub9e4\ud551 \uc124\uc815: \ucd94\ucd9c\ub41c \ucea1\uc158 \uc815\ubcf4\ub97c \uc800\uc7a5\ud560 \uc778\ub371\uc2a4\uc758 \ub9e4\ud551\uc744 \uc124\uc815\ud569\ub2c8\ub2e4. \uc608\ub97c \ub4e4\uc5b4, 'category', 'color', 'gender', 'season' \ub4f1\uc758 \ud544\ub4dc\ub97c \ud3ec\ud568\ud569\ub2c8\ub2e4.</li> </ol> <pre><code>PUT /fashion_items\n{\n  \"mappings\": {\n    \"properties\": {\n      \"goodsNm\": { \"type\": \"text\" },\n      \"category\": { \"type\": \"dense_vector\", \"dims\": 768 },\n      \"color\": { \"type\": \"dense_vector\", \"dims\": 768 },\n      \"gender\": { \"type\": \"dense_vector\", \"dims\": 768 },\n      \"season\": { \"type\": \"dense_vector\", \"dims\": 768 },\n      \"embedding\": { \"type\": \"dense_vector\", \"dims\": 768 }\n    }\n  }\n}\n</code></pre>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EA%B2%80%EC%83%89%20%EB%A1%9C%EC%A7%81%28opensearch%29/#32","title":"3.2 \uc784\ubca0\ub529 \ubca1\ud130 \uc0dd\uc131 \ubc0f \uc800\uc7a5","text":"<p>\uc774\ubbf8\uc9c0 \ucea1\uc158\uc744 \ud1b5\ud574 \ucd94\ucd9c\ub41c \uc815\ubcf4\ub97c \uc784\ubca0\ub529 \ubca1\ud130\ub85c \ubcc0\ud658\ud569\ub2c8\ub2e4. \uc774\ub97c \uc704\ud574 \uc0ac\uc804 \ud6c8\ub828\ub41c \ubaa8\ub378(BERT, CLIP \ub4f1)\uc744 \uc0ac\uc6a9\ud558\uc5ec \ucea1\uc158\uc744 \ubca1\ud130\ub85c \ubcc0\ud658\ud569\ub2c8\ub2e4. \uc608\ub97c \ub4e4\uc5b4, CLIP \ubaa8\ub378\uc744 \uc0ac\uc6a9\ud558\uc5ec \uc774\ubbf8\uc9c0\uc640 \ud14d\uc2a4\ud2b8 \ubaa8\ub450\uc5d0\uc11c \uc784\ubca0\ub529\uc744 \uc0dd\uc131\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EA%B2%80%EC%83%89%20%EB%A1%9C%EC%A7%81%28opensearch%29/#33","title":"3.3 \ub7ad\ud0b9 \ubaa8\ub378 \uc801\uc6a9","text":"<p>\uac80\uc0c9 \uc694\uccad\uc744 \ucc98\ub9ac\ud558\uae30 \uc704\ud574 \uc0ac\uc6a9\uc790\uc758 \ucffc\ub9ac\ub97c \uc784\ubca0\ub529 \ubca1\ud130\ub85c \ubcc0\ud658\ud55c \ud6c4, OpenSearch\uc758 k-NN \uac80\uc0c9 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud558\uc5ec \uc720\uc0ac\ud55c \ud56d\ubaa9\uc744 \ucc3e\uc2b5\ub2c8\ub2e4. \ub7ad\ud0b9 \ubaa8\ub378\uc744 \ud1b5\ud574 \uac80\uc0c9 \uacb0\uacfc\uc758 \uc21c\uc704\ub97c \uc815\ud558\uc5ec, \uac00\uc7a5 \uad00\ub828\uc131\uc774 \ub192\uc740 \uacb0\uacfc\ub97c \uc0c1\uc704\uc5d0 \ub178\ucd9c\uc2dc\ud0b5\ub2c8\ub2e4.</p> <ol> <li>\uc0ac\uc6a9\uc790 \ucffc\ub9ac \uc784\ubca0\ub529: \uc0ac\uc6a9\uc790\uc758 \ud14d\uc2a4\ud2b8 \ucffc\ub9ac\ub97c \uc784\ubca0\ub529 \ubca1\ud130\ub85c \ubcc0\ud658\ud569\ub2c8\ub2e4.</li> <li>k-NN \uac80\uc0c9 \uc218\ud589: OpenSearch\uc758 k-NN \uac80\uc0c9\uc744 \ud1b5\ud574 \uc720\uc0ac\ud55c \ud56d\ubaa9\uc744 \uac80\uc0c9\ud569\ub2c8\ub2e4.</li> <li>\ub7ad\ud0b9 \ubaa8\ub378 \uc801\uc6a9: \uac80\uc0c9 \uacb0\uacfc\uc5d0 \ub7ad\ud0b9 \ubaa8\ub378\uc744 \uc801\uc6a9\ud558\uc5ec \uc21c\uc704\ub97c \ub9e4\uae41\ub2c8\ub2e4.</li> </ol> <pre><code>query = \"\ubc1d\uc740 \ube68\uac04\uc0c9 \ubbf8\ub2c8 \uc6d0\ud53c\uc2a4\"\nquery_embedding = model.get_text_features(query).squeeze().tolist()\n\nsearch_query = {\n  \"query\": {\n    \"bool\": {\n      \"should\": [\n        {\n          \"knn\": {\n            \"category\": {\n              \"vector\": query_embedding,\n              \"k\": 10\n            }\n          }\n        },\n        {\n          \"knn\": {\n            \"color\": {\n              \"vector\": query_embedding,\n              \"k\": 10\n            }\n          }\n        },\n        {\n          \"knn\": {\n            \"gender\": {\n              \"vector\": query_embedding,\n              \"k\": 10\n            }\n          }\n        },\n        {\n          \"knn\": {\n            \"season\": {\n              \"vector\": query_embedding,\n              \"k\": 10\n            }\n          }\n        },\n        {\n          \"knn\": {\n            \"embedding\": {\n              \"vector\": query_embedding,\n              \"k\": 10\n            }\n          }\n        }\n      ]\n    }\n  },\n  \"rescore\": {\n    \"window_size\": 50,\n    \"query_weight\": 0.7,\n    \"rescore_query_weight\": 1.2,\n    \"rescore_query\": {\n      \"rank_feature\": {\n        \"field\": \"popularity\",\n        \"factor\": 1.2\n      }\n    }\n  }\n}\n\nresponse = opensearch.search(index=\"fashion_items\", body=search_query)\n</code></pre>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EA%B2%80%EC%83%89%20%EB%A1%9C%EC%A7%81%28opensearch%29/#34","title":"3.4 \uac80\uc0c9 \uacb0\uacfc \uc81c\uacf5","text":"<p>\uac80\uc0c9 \uacb0\uacfc\ub294 \uc0ac\uc6a9\uc790\uc5d0\uac8c \uac00\uc7a5 \uad00\ub828\uc131\uc774 \ub192\uc740 \ud56d\ubaa9\ubd80\ud130 \uc21c\uc11c\ub300\ub85c \uc81c\uacf5\ub429\ub2c8\ub2e4. OpenSearch\uc758 \ub7ad\ud0b9 \ubaa8\ub378\uc744 \ud1b5\ud574 \uc720\uc0ac\uc131\uc744 \uae30\uc900\uc73c\ub85c \uacb0\uacfc\ub97c \uc815\ub82c\ud558\uc5ec \uc81c\uacf5\ud569\ub2c8\ub2e4.</p> <p>\uc774\uc640 \uac19\uc740 \ubc29\uc2dd\uc73c\ub85c OpenSearch\uc640 \uc784\ubca0\ub529 \ubca1\ud130\ub97c \ud65c\uc6a9\ud55c \uc2dc\ub9e8\ud2f1 \uac80\uc0c9\uc744 \uad6c\ud604\ud558\uba74, \uc0ac\uc6a9\uc790\uc5d0\uac8c \ub354\uc6b1 \uc815\ud655\ud558\uace0 \uc720\uc758\ubbf8\ud55c \uac80\uc0c9 \uacb0\uacfc\ub97c \uc81c\uacf5\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc774\ub97c \ud1b5\ud574 \uc0ac\uc6a9\uc790 \uacbd\ud5d8\uc744 \ud06c\uac8c \ud5a5\uc0c1\uc2dc\ud0ac \uc218 \uc788\uc73c\uba70, \uc1fc\ud551\ubab0\uc5d0\uc11c \uc6d0\ud558\ub294 \uc0c1\ud488\uc744 \ube60\ub974\uace0 \uc815\ud655\ud558\uac8c \ucc3e\uc744 \uc218 \uc788\uac8c \ub429\ub2c8\ub2e4.</p>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%EC%9D%B4%EB%9E%80/","title":"\uc2dc\ub9e8\ud2f1 \uac80\uc0c9\uc774\ub780","text":""},{"location":"portfolio/%EA%B2%80%EC%83%89/%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%EC%9D%B4%EB%9E%80/#_1","title":"\ud83d\ude00 \uc774\ubbf8\uc9c0 \uc2dc\ub9e8\ud2f1 \uac80\uc0c9","text":"<p>\uc774\ubbf8\uc9c0 \uc2dc\ub9e8\ud2f1 \uac80\uc0c9\uc740 \uc774\ubbf8\uc9c0\uc758 \uc758\ubbf8\uc640 \ub0b4\uc6a9\uc744 \uae30\ubc18\uc73c\ub85c \uc774\ubbf8\uc9c0\ub97c \uac80\uc0c9\ud558\ub294 \uae30\uc220</p> <p>Note</p> <p>\ud83d\udca1 \uc774 \uae30\uc220\uc758 \ud575\uc2ec\uc740 \ud14d\uc2a4\ud2b8\ub85c \uc774\ubbf8\uc9c0\ub97c \uac80\uc0c9\ud560 \uc218 \uc788\ub2e4\ub294 \uac83</p> <p>\uc804\ud1b5\uc801\uc778 \uc774\ubbf8\uc9c0 \uac80\uc0c9\uc740 \uba54\ud0c0\ub370\uc774\ud130\ub098 \ud30c\uc77c \uc774\ub984\uc744 \uae30\ubc18\uc73c\ub85c \ud558\uc9c0\ub9cc,</p> <p>\uc2dc\ub9e8\ud2f1 \uac80\uc0c9\uc740 \uc774\ubbf8\uc9c0 \uc790\uccb4\uc758 \ub0b4\uc6a9\uc744 \uc774\ud574\ud558\uace0 \uc774\ub97c \ubc14\ud0d5\uc73c\ub85c \uc720\uc0ac\ud55c \uc774\ubbf8\uc9c0\ub97c \ucc3e\ub294 \uac83</p> <p>\uc774\ub97c \uc704\ud574 \ub525\ub7ec\ub2dd(CNN)\uc744 \ud65c\uc6a9\ud558\uc5ec \uc774\ubbf8\uc9c0\uc758 \uace0\ucc28\uc6d0\uc801 \ud2b9\uc9d5\uc744 \ucd94\ucd9c\ud558\uace0, \uc758\ubbf8\uc801\uc73c\ub85c \ud574\uc11d</p>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%EC%9D%B4%EB%9E%80/#1","title":"1. \uc608\uc2dc \uac80\uc0c9\uc5b4","text":"<ul> <li>\ubc1d\uc740 \ube68\uac04\uc0c9 \ubbf8\ub2c8 \uc6d0\ud53c\uc2a4</li> <li>\uc5b4\ub450\uc6b4 \ud30c\ub780\uc0c9 \ub871 \uc6d0\ud53c\uc2a4</li> <li>\uc18c\ub9e4\uac00 \uc5c6\ub294 \ub178\ub780\uc0c9 \uc6d0\ud53c\uc2a4</li> <li>\ud770\uc0c9 \ub85c\uc6b0\ud0d1 \uc6b4\ub3d9\ud654</li> <li> <p>\uac08\uc0c9 \ud558\uc774\ud0d1 \uc6b4\ub3d9\ud654</p> </li> <li> <p>\uc5ec\ub984\uc5d0 \uc785\uae30 \uc88b\uc740 \ud1b5\uae30\uc131 \uc88b\uc740 \ud770\uc0c9 \ud2f0\uc154\uce20</p> </li> <li>\uaca9\uc2dd \uc788\ub294 \ud68c\uc0c9 \uc2ac\ub799\uc2a4 \ubc14\uc9c0</li> <li>\ubc1c \ud3b8\ud55c \uc5ec\uc131\uc6a9 \uc6b4\ub3d9\ud654</li> <li>\ubc29\uc218 \uae30\ub2a5\uc774 \uc788\ub290 \uaca8\uc6b8 \ubd80\uce20</li> <li>\uace8\ub4dc \uceec\ub7ec\uc758 \ubbf8\ub2c8\uba40\ud55c \ub514\uc790\uc778 \uadc0\uac78\uc774</li> <li>\ub370\uc77c\ub9ac \ub8e9\uc5d0 \uc5b4\uc6b8\ub9ac\ub294 \uc2e4\ubc84 \ud314\ucc0c</li> </ul>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%EC%9D%B4%EB%9E%80/#2","title":"2. \uc2dc\ub9e8\ud2f1 \uac80\uc0c9\uc758 \uc7a5\uc810","text":"<ul> <li>\ub9de\ucda4\ud654 &amp; \ud3b8\ub9ac\uc131 : \uace0\uac1d\uc758 \ud2b9\uc815 \uc0c1\ud669\uc774\ub098 \uc6a9\ub3c4\uc5d0 \ub9de\ub294 \uc81c\ud488\uc744 \uc27d\uace0 \ube60\ub974\uac8c \ucc3e\uc74c</li> </ul>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%EC%9D%B4%EB%9E%80/#3","title":"3. \uae30\uc220 \uac1c\uc694","text":"<ol> <li>\uac2d\uc158 \ucd94\ucd9c</li> <li>\ucea1\uc158 \uc784\ubca0\ub529</li> <li>\uac80\uc0c9\uc5b4 \uc784\ubca0\ub529</li> <li>\uc720\uc0ac\ub3c4 \uacc4\uc0b0</li> <li>\uad00\ub828 \uc0c1\ud488 \uc81c\uacf5</li> </ol>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%EC%9D%B4%EB%9E%80/#1_1","title":"1.\uac2d\uc158 \ucd94\ucd9c","text":"<p>\uba3c\uc800, \uc0c1\ud488\uc744 \ub4f1\ub85d\ud560 \ub54c \ub123\ub294 \uc0c1\ud488 \uc774\ubbf8\uc9c0\ub85c\ubd80\ud130 \uc790\ub3d9\uc73c\ub85c \uac2d\uc158\uc744 \uc0dd\uc131</p> <p>\uc774\ub294 \uc0c1\ud488\uc758 \uc8fc\uc694 \ub0b4\uc6a9\uc744 \uc790\uc5f0\uc5b4\ub85c \ud45c\ud604\ud55c \uac83</p> <p>\uc608\ub97c \ub4e4\uc5b4, \uc2e0\ubc1c\uc0ac\uc9c4\uc5d0\uc11c \u201c\ube68\uac04 \uc904\ubb34\ub2ac\uac00 \uc788\ub294 \ub7f0\ub2dd\ud654 \ud55c \ucf24\ub808\u201d \uc640 \uac19\uc740 \ucea1\uc158\uc744 \uc0dd\uc131  </p> <p></p> <p>\uc601\uc5b4 \ucea1\uc158</p> <p>The image shows a young man standing in front of a building with a sign that reads \"Royles\". He is wearing a beige button-down shirt and black trousers. He is holding a black jacket in his left hand and has a pair of glasses on his right wrist. He has short black hair and is looking off to the side with a serious expression on his face. The building behind him has a wooden facade and large windows.</p> <p>\ud55c\uad6d\uc5b4 \ucea1\uc158</p> <p>\uadf8 \uc774\ubbf8\uc9c0\ub294 \"Royles\"\ub77c\uace0 \uc4f0\uc5ec\uc9c4 \ud45c\uc9c0\ud310\uc774 \uc788\ub294 \uac74\ubb3c \uc55e\uc5d0 \uc11c \uc788\ub294 \uc80a\uc740 \ub0a8\uc790\ub97c \ubcf4\uc5ec\uc90d\ub2c8\ub2e4. \uadf8\ub294 \ubca0\uc774\uc9c0\uc0c9 \ubc84\ud2bc\ub2e4\uc6b4 \uc154\uce20\uc640 \uac80\uc740\uc0c9 \ubc14\uc9c0\ub97c \uc785\uace0 \uc788\uc2b5\ub2c8\ub2e4. \uadf8\ub294 \uc67c\uc190\uc5d0 \uac80\uc740\uc0c9 \uc7ac\ud0b7\uc744 \ub4e4\uace0 \uc788\uace0 \uc624\ub978\ucabd \uc190\ubaa9\uc5d0 \uc548\uacbd\uc744 \uc4f0\uace0 \uc788\uc2b5\ub2c8\ub2e4. \uadf8\ub294 \uc9e7\uc740 \uac80\uc740 \uba38\ub9ac\ub97c \uac00\uc9c0\uace0 \uc788\uace0 \uc2ec\uac01\ud55c \ud45c\uc815\uc73c\ub85c \uc606\uc744 \ub0b4\ub824\ub2e4\ubcf4\uace0 \uc788\uc2b5\ub2c8\ub2e4. \uadf8\uc758 \ub4a4\uc5d0 \uc788\ub294 \uac74\ubb3c\uc740 \ub098\ubb34\ub85c \ub41c \uc815\uba74\uacfc \ud070 \ucc3d\ubb38\uc744 \uac00\uc9c0\uace0 \uc788\uc2b5\ub2c8\ub2e4.</p> <p></p>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%EC%9D%B4%EB%9E%80/#2_1","title":"2. \ucea1\uc158 \uc784\ubca0\ub529","text":"<p>\uc0dd\uc131\ub41c \ucea1\uc158\uc744 \uc784\ubca0\ub529\ud569\ub2c8\ub2e4.</p> <p>\uc784\ubca0\ub529\uc740 \ud14d\uc2a4\ud2b8\ub97c \ubca1\ud130 \ud615\ud0dc\ub85c \ubcc0\ud658\ud558\uc5ec, \ucef4\ud4e8\ud130\uac00 \uc774\ud574\ud560 \uc218 \uc788\ub294 \ud615\ud0dc\ub85c \ub9cc\ub4dc\ub294 \uacfc\uc815</p> <p>\uc784\ubca0\ub529 \uacb0\uacfc</p> <p>[-4.6010e-01,  4.2769e-01, -2.9483e+00, -1.1792e+00, -1.1265e-01, 4.0784e-01,  1.0305e+00,  1.1099e+00,  9.1235e-01, -6.3019e-01, 2.0483e-01,  4.7777e-01, -1.4992e-01,  8.0334e-01,  5.4970e-02, 1.7510e-01,  3.3063e-01, -9.7676e-01, -2.5874e-01, -1.5424e-01, -1.0303e+00, -1.0298e-01, -5.2989e-01,  2.4445e-01,  1.1998e+00, \u2026\u2026 9.0055e-01,  1.9786e-01, 3.1558e-02, -2.8156e-01,  6.3640e-01, -4.3221e-01,  4.0642e-01, -5.0806e-01, -7.9445e-01, -1.5009e-01]</p> <p></p>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%EC%9D%B4%EB%9E%80/#3_1","title":"3. \uac80\uc0c9\uc5b4 \uc784\ubca0\ub529","text":"<p>\uc0ac\uc6a9\uc790\uac00 \uc785\ub825\ud55c \uac80\uc0c9\uc5b4\ub3c4 \ub3d9\uc77c\ud55c \ubc29\uc2dd\uc73c\ub85c \uc784\ubca0\ub529</p> <p>\uc608\ub97c \ub4e4\uc5b4, \uc0ac\uc6a9\uc790\uac00 <code>\u201c\ubca0\uc774\uc9c0\uc0c9 \ub2e8\ucd94 \uc154\uce20\u201d</code>\ub97c \uac80\uc0c9\ud558\uba74, \uc774\ub97c \ubca1\ud130 \ud615\ud0dc\ub85c \ubcc0\ud658</p> <p>\ubca1\ud130\ub294 \ud06c\uae30\uc640 \ubc29\ud5a5\uc744 \uac00\uc9c4 \uc218\ud559\uc801 \uac1d\uccb4\uc785\ub2c8\ub2e4.</p> <p></p> <p></p> <p></p> <p></p>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%EC%9D%B4%EB%9E%80/#4","title":"4. \uc720\uc0ac\ub3c4 \uacc4\uc0b0","text":"<p>\uc774\ubbf8\uc9c0 \ucea1\uc158\uc758 \uc784\ubca0\ub529 \ubca1\ud130\uc640 \uac80\uc0c9\uc5b4 \uc784\ubca0\ub529 \ubca1\ud130 \uac04\uc758 \uc720\uc0ac\ub3c4\ub97c \uacc4\uc0b0</p> <p>\uc774\ub294 \uc0ac\uc6a9\uc790\uac00 \uc785\ub825\ud55c \uac80\uc0c9\uc5b4\uc640 \uc2dc\ub9e8\ud2f1\ud558\uac8c \uc720\uc0ac\ud55c \uc0c1\ud488\uc744 \uc81c\uacf5\ud568\uc73c\ub85c\uc368, \ubcf4\ub2e4 \uc815\ud655\ud55c \uac80\uc0c9 \uacb0\uacfc\uc640 \uc0ac\uc6a9\uc790\uac00 \ub514\ud14c\uc77c\uc801\uc73c\ub85c \uc6d0\ud558\ub294 \uc0c1\ud488\uc744 \uac80\uc0c9\ud560 \uc218 \uc788\uac8c \ub428</p>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%EC%9D%B4%EB%9E%80/#5","title":"5. \uad00\ub828 \uc0c1\ud488 \uc774\ubbf8\uc9c0 \ubc18\ud658","text":"<p>\uc720\uc0ac\ub3c4\uac00 \ub192\uc740 \uc0c1\ud488 \uc774\ubbf8\uc9c0\ub4e4\uc744 \uac80\uc0c9 \uacb0\uacfc\ub85c \ubc18\ud658</p>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EC%95%84%EC%9D%B4%EC%8A%A4%ED%81%AC%EB%A6%BC%EB%AA%B0%20AI%20Search%20%EA%B5%AC%EC%B6%95%20%EC%82%AC%EB%A1%80/","title":"\uc544\uc774\uc2a4\ud06c\ub9bc\ubab0 AI Search \uad6c\ucd95 \uc0ac\ub840","text":""},{"location":"portfolio/%EA%B2%80%EC%83%89/%EC%95%84%EC%9D%B4%EC%8A%A4%ED%81%AC%EB%A6%BC%EB%AA%B0%20AI%20Search%20%EA%B5%AC%EC%B6%95%20%EC%82%AC%EB%A1%80/#_1","title":"\ud504\ub85c\uc81d\ud2b8 \uac1c\uc694","text":"<p>\uc544\uc774\uc2a4\ud06c\ub9bc\ubab0\uc740 \uc804\uad6d \ucd08\u00b7\uc911\u00b7\uace0\ub4f1\ud559\uad50 \ubc0f \uc720\uce58\uc6d0\uc744 \ub300\uc0c1\uc73c\ub85c \ud559\uc6a9\ud488, \uc2e4\uc2b5\uc7ac\ub8cc, \uad50\uad6c \ub4f1\uc744 \uacf5\uae09\ud558\ub294 \uad50\uc721\uc804\ubb38 \uc1fc\ud551\ubab0\uc785\ub2c8\ub2e4. \ud2b9\ud788 \uad50\uc0ac\ub4e4\uc774 \uc608\uc0b0 \ubc94\uc704 \ub0b4\uc5d0\uc11c \ud559\uae30\ubcc4 \uc900\ube44\ubb3c\uc744 \ub300\ub7c9\uc73c\ub85c \uad6c\ub9e4\ud558\ub294 \uad6c\uc870\ub85c \uc778\ud574, \ud2b9\uc815 \uc2dc\uae30(\uc608: \uc2e0\ud559\uae30)\uc5d0 \ud2b8\ub798\ud53d\uc774 \uc9d1\uc911\ub418\ub294 \uacbd\ud5a5\uc774 \ub69c\ub837\ud569\ub2c8\ub2e4.</p> <p>2025\ub144 1\uc6d4, \uc544\uc774\uc2a4\ud06c\ub9bc\ubab0\uc740 \uac80\uc0c9 \uc815\ud655\ub3c4 \ud5a5\uc0c1\uacfc \uac80\uc0c9 \uacbd\ud5d8 \uac1c\uc120\uc744 \uc704\ud574 AI \uae30\ubc18 \ud1b5\ud569 \uac80\uc0c9 \uc2dc\uc2a4\ud15c(AI Search)\uc744 \ub3c4\uc785\ud558\uc600\uc2b5\ub2c8\ub2e4. \ub3c4\uc785 \uc9c1\ud6c4\uc778 3\uc6d4\uc5d0\ub294 \ud558\ub8e8 \ucd5c\ub300 \uac80\uc0c9 \uc694\uccad \ucd08\ub2f9 \ucc98\ub9ac \uc218(TPS)\uac00 5,000\uac74 \uc774\uc0c1\uc73c\ub85c \uae09\uc99d\ud558\ub294 \ub4f1, \ub300\uaddc\ubaa8 \ud2b8\ub798\ud53d \ud658\uacbd\uc5d0 \ub300\uc751\ud558\uae30 \uc704\ud55c \uac80\uc0c9\uc5d4\uc9c4 \uc778\ud504\ub77c \uc7ac\uad6c\uc131 \ubc0f AI \ubaa8\ub378 \ucd5c\uc801\ud654\uac00 \ud544\uc218\uc801\uc774\uc5c8\uc2b5\ub2c8\ub2e4.</p>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EC%95%84%EC%9D%B4%EC%8A%A4%ED%81%AC%EB%A6%BC%EB%AA%B0%20AI%20Search%20%EA%B5%AC%EC%B6%95%20%EC%82%AC%EB%A1%80/#_2","title":"\ub3c4\uc785 \ubc30\uacbd \ubc0f \uae30\uc220\uc801 \ud544\uc694\uc131","text":"<p>\uae30\uc874\uc758 \ud0a4\uc6cc\ub4dc \uc911\uc2ec \uac80\uc0c9\uc740 \ub2e4\uc74c\uacfc \uac19\uc740 \ud55c\uacc4\uac00 \uc788\uc5c8\uc2b5\ub2c8\ub2e4.</p> <ul> <li>\uac80\uc0c9 \uc2e4\ud328\uc728\uc774 \ub192\uace0, \uc720\uc0ac\ud55c \uc0c1\ud488 \uac04 \uad6c\ubd84\uc774 \uc5b4\ub824\uc6c0</li> <li>\uac80\uc0c9\uc5b4\uc758 \uc624\ud0c0, \ube44\uc815\ud615 \ud45c\ud604, \uc5f0\uad00\uc5b4 \ucc98\ub9ac\uac00 \uc5b4\ub824\uc6c0</li> <li>\uace0\uc815\ub41c \ub8f0 \uae30\ubc18 \uac80\uc0c9 \ubc29\uc2dd\uc73c\ub85c \uc0ac\uc6a9\uc790 \uc758\ub3c4 \ud30c\uc545\uc774 \uc81c\ud55c\uc801</li> </ul> <p>\uc774\uc5d0 \ub530\ub77c \ub2e4\uc74c\uc758 \uae30\uc220\uc801 \uc694\uad6c\uc0ac\ud56d\uc774 \ub3c4\ucd9c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.</p> <ul> <li>\ud14d\uc2a4\ud2b8 \uae30\ubc18 \uac80\uc0c9\uc758 \uc815\ud655\ub3c4 \ud5a5\uc0c1</li> <li>\uc0ac\uc6a9\uc790 \uc758\ub3c4 \ud30c\uc545\uc744 \uc704\ud55c \uc758\ubbf8 \uae30\ubc18 \uac80\uc0c9 \uae30\ub2a5 \uac15\ud654</li> <li>LLM \uae30\ubc18 \ucffc\ub9ac \ud655\uc7a5 \ubc0f \ubca1\ud130 \uc5f0\uc0b0\uc758 \ud6a8\uc728\uc801 \uc11c\ube59</li> <li>\uc218\ucc9c TPS \uc774\uc0c1\uc744 \ucc98\ub9ac\ud560 \uc218 \uc788\ub294 \uac80\uc0c9 \uc778\ud504\ub77c \uad6c\ucd95</li> </ul>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EC%95%84%EC%9D%B4%EC%8A%A4%ED%81%AC%EB%A6%BC%EB%AA%B0%20AI%20Search%20%EA%B5%AC%EC%B6%95%20%EC%82%AC%EB%A1%80/#_3","title":"\uae30\uc220","text":""},{"location":"portfolio/%EA%B2%80%EC%83%89/%EC%95%84%EC%9D%B4%EC%8A%A4%ED%81%AC%EB%A6%BC%EB%AA%B0%20AI%20Search%20%EA%B5%AC%EC%B6%95%20%EC%82%AC%EB%A1%80/#1","title":"1. \uc2dc\uc2a4\ud15c \uad6c\uc131","text":"<p>\uae30\uc220 \uc2a4\ud0dd</p> <ul> <li>\ubc31\uc5d4\ub4dc \ud504\ub808\uc784\uc6cc\ud06c: <code>NestJS</code></li> <li>\uac80\uc0c9 \uc5d4\uc9c4: <code>OpenSearch</code></li> <li>\ud14d\uc2a4\ud2b8 \ucc98\ub9ac: <code>Nori Tokenizer</code> (\ud55c\uad6d\uc5b4 \ubd84\uc11d\uae30), Synonym Expansion</li> <li>\uac80\uc0c9 \ubc29\uc2dd: <code>Function Score \uae30\ubc18 Hybrid \uac80\uc0c9</code>, <code>Nested Query</code>, <code>Query DSL</code>, <code>LLM \uc5f0\uacc4 \ud655\uc7a5 \uac80\uc0c9 \uc9c0\uc6d0</code></li> </ul> <p>\uac80\uc0c9 \uc778\ub371\uc2a4 \uad6c\uc870</p> <ul> <li><code>goods</code>, <code>marketing</code>, <code>event</code>, <code>brand-store</code> \ub4f1 \ub3c4\uba54\uc778\ubcc4\ub85c \ubd84\ub9ac\ub41c \uc778\ub371\uc2a4 \uc0ac\uc6a9</li> <li>\uac80\uc0c9\uc5b4 \ucd94\ucc9c\uc6a9 \ubcc4\ub3c4 \uc778\ub371\uc2a4 (<code>*-recomword</code>, <code>typo</code>, <code>synonym</code>, <code>excluding-search-terms</code>) \uc6b4\uc601</li> <li>\ubd84\uc11d \ubc0f \uce74\ud14c\uace0\ub9ac \ucd94\ucd9c\uc6a9 Aggregation \uc778\ub371\uc2a4 \uad6c\uc131</li> </ul>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EC%95%84%EC%9D%B4%EC%8A%A4%ED%81%AC%EB%A6%BC%EB%AA%B0%20AI%20Search%20%EA%B5%AC%EC%B6%95%20%EC%82%AC%EB%A1%80/#2","title":"2. \uac80\uc0c9 \uae30\ub2a5 \uc0c1\uc138","text":""},{"location":"portfolio/%EA%B2%80%EC%83%89/%EC%95%84%EC%9D%B4%EC%8A%A4%ED%81%AC%EB%A6%BC%EB%AA%B0%20AI%20Search%20%EA%B5%AC%EC%B6%95%20%EC%82%AC%EB%A1%80/#21-text-retrieval","title":"2.1. \ud0a4\uc6cc\ub4dc \uae30\ubc18 \uac80\uc0c9 (Text Retrieval)","text":"<ul> <li><code>multi_match</code>, <code>query_string</code>, <code>term</code>, <code>match</code>, <code>match_phrase</code> \ub4f1\uc744 \uc870\ud569</li> <li>\ud2b9\uc218\ubb38\uc790 \uc815\uaddc\ud654 \ubc0f \uac80\uc0c9\uc5b4 \uc804\ucc98\ub9ac (<code>search.limit</code> \ub9cc\ud07c \ud1a0\ud070 \uc81c\ud55c)</li> <li>\ubd84\uc11d\uae30 (<code>nori_tokenizer</code>)\ub97c \uc0ac\uc6a9\ud558\uc5ec \ud615\ud0dc\uc18c \ub2e8\uc704 \ud1a0\ud070\ud654 \ud6c4 \uac80\uc0c9\uc5b4 \uc7ac\uad6c\uc131</li> <li>\uac80\uc0c9 \ud544\ub4dc \ubc0f \uac00\uc911\uce58 (<code>boost</code>) \uc124\uc815\uc740 \ub3d9\uc801\uc73c\ub85c \ucffc\ub9ac\uc5d0 \uc0bd\uc785\ub428</li> </ul>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EC%95%84%EC%9D%B4%EC%8A%A4%ED%81%AC%EB%A6%BC%EB%AA%B0%20AI%20Search%20%EA%B5%AC%EC%B6%95%20%EC%82%AC%EB%A1%80/#22-llm-or-synonym","title":"2.2. \uc758\ubbf8 \uae30\ubc18 \ud655\uc7a5 \uac80\uc0c9 (LLM or Synonym \uae30\ubc18)","text":"<ul> <li>\uc0ac\uc6a9\uc790 \uac80\uc0c9\uc5b4\ub97c \ubd84\uc11d \ud6c4 <code>Synonym \uc778\ub371\uc2a4</code>\ub97c \uc870\ud68c\ud558\uc5ec \ub3d9\uc758\uc5b4 \ud655\uc7a5</li> <li><code>generateCombinations()</code> \ub85c \ud1a0\ud070\ubcc4 \uc870\ud569 \uc0dd\uc131 \u2192 <code>query_string</code>\uc5d0 \ud655\uc7a5 \uc801\uc6a9</li> <li><code>\"\\\"\ud1a0\ud070\\\" OR \\\"\ud655\uc7a5\uc5b4\\\"\"</code> \ud615\ud0dc\uc758 query string \uad6c\uc131\uc744 \ud1b5\ud574 \uc758\ubbf8 \ubcf4\uac15</li> </ul>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EC%95%84%EC%9D%B4%EC%8A%A4%ED%81%AC%EB%A6%BC%EB%AA%B0%20AI%20Search%20%EA%B5%AC%EC%B6%95%20%EC%82%AC%EB%A1%80/#23-function_score","title":"2.3. \ud568\uc218 \uae30\ubc18 \ub7ad\ud0b9 \ubaa8\ub378 (function_score)","text":"<ul> <li>\uc2dc\uac04 \uae30\ubc18 \uc810\uc218 \ubcf4\uc815: <code>gauss</code> \ud568\uc218\ub85c \ucd5c\uc2e0\uc131 \ubc18\uc601</li> <li>\uac00\uaca9, \ud560\uc778\uc728 \ub4f1 \uc815\ub7c9 \ud544\ub4dc\uc5d0 <code>range</code> \uc870\uac74\uacfc \ud568\uaed8 <code>weight</code> \uc810\uc218 \uc801\uc6a9</li> <li>\uae30\ubcf8 score \uc678 \ucd94\uac00 weight \ud568\uc218 \uc81c\uacf5</li> </ul>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EC%95%84%EC%9D%B4%EC%8A%A4%ED%81%AC%EB%A6%BC%EB%AA%B0%20AI%20Search%20%EA%B5%AC%EC%B6%95%20%EC%82%AC%EB%A1%80/#24","title":"2.4. \uc790\ub3d9 \ucd94\ucc9c\uc5b4/\uc5f0\uad00\uc5b4 \uc2dc\uc2a4\ud15c","text":"<ul> <li><code>getRecomword</code>, <code>getIndexRecomword</code>: \ucd94\ucc9c\uc5b4/\ud0c0\uc774\ud3ec \uc815\uc815</li> <li><code>getPopupWord</code>, <code>getPopularSearchWithChangeType</code>: \uc2e4\uc2dc\uac04 \uc778\uae30 \uac80\uc0c9\uc5b4 \ubc0f \ubcc0\ud654\ub7c9 \ucd94\uc801</li> <li><code>badword</code> \uc778\ub371\uc2a4\ub97c \ud65c\uc6a9\ud55c \ud544\ud130\ub9c1 \ub85c\uc9c1 \ud3ec\ud568</li> </ul>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EC%95%84%EC%9D%B4%EC%8A%A4%ED%81%AC%EB%A6%BC%EB%AA%B0%20AI%20Search%20%EA%B5%AC%EC%B6%95%20%EC%82%AC%EB%A1%80/#3","title":"3. \uace0\uae09 \uac80\uc0c9 \uae30\ub2a5","text":""},{"location":"portfolio/%EA%B2%80%EC%83%89/%EC%95%84%EC%9D%B4%EC%8A%A4%ED%81%AC%EB%A6%BC%EB%AA%B0%20AI%20Search%20%EA%B5%AC%EC%B6%95%20%EC%82%AC%EB%A1%80/#31-aggregation","title":"3.1. \ub2e4\ub2e8\uacc4 Aggregation","text":"<ul> <li>\uce74\ud14c\uace0\ub9ac \uad6c\uc870 (<code>\ub300-\uc911-\uc18c \uce74\ud14c\uace0\ub9ac</code>)\ub97c Nested Multi-Terms Aggregation\uc73c\ub85c \uad6c\uc131</li> <li>\ube0c\ub79c\ub4dc, \uac00\uaca9 \ubc94\uc704, \ud560\uc778\uc728, \uc544\uc774\ucf58, \uc801\ub9bd \uac00\ub2a5 \uc5ec\ubd80 \ub4f1\ub3c4 Aggregation\uc73c\ub85c \uc218\uc9d1</li> <li>\ubd84\uc11d \uacb0\uacfc\ub97c \uae30\uc900\uc73c\ub85c \ucd94\ucc9c \ud544\ud130 \uc81c\uacf5</li> </ul>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EC%95%84%EC%9D%B4%EC%8A%A4%ED%81%AC%EB%A6%BC%EB%AA%B0%20AI%20Search%20%EA%B5%AC%EC%B6%95%20%EC%82%AC%EB%A1%80/#32","title":"3.2. \uc7ac\uac80\uc0c9 (\uacb0\uacfc \ub0b4 \uac80\uc0c9)","text":"<ul> <li><code>researchWord</code>\ub97c \ubcc4\ub3c4\ub85c \ucc98\ub9ac\ud558\uc5ec <code>filter.bool.should</code>\uc5d0 \uac80\uc0c9 \uc870\uac74 \ucd94\uac00</li> <li>\uae30\uc874 \uac80\uc0c9\uc5b4\uc640 \uad6c\ubd84\ud558\uc5ec \ud6c4\uc18d \ud0d0\uc0c9 \uae30\ub2a5 \uc81c\uacf5</li> </ul>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EC%95%84%EC%9D%B4%EC%8A%A4%ED%81%AC%EB%A6%BC%EB%AA%B0%20AI%20Search%20%EA%B5%AC%EC%B6%95%20%EC%82%AC%EB%A1%80/#33","title":"3.3. \uac80\uc0c9\uc5b4 \uc81c\uc678 \uad00\ub9ac","text":"<ul> <li><code>excluding-search-terms</code> \uc778\ub371\uc2a4\ub97c \ud1b5\ud574 \uc778\uae30 \uac80\uc0c9\uc5b4 \uc911 \ub178\ucd9c \uc81c\ud55c\uc5b4 \ud544\ud130\ub9c1</li> <li>\uc911\ubcf5 \ub370\uc774\ud130 \uac10\uc9c0 \ubc0f \uad00\ub9ac (<code>getCheckDuplicateExcludingSearchTerms</code>)</li> </ul>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EC%95%84%EC%9D%B4%EC%8A%A4%ED%81%AC%EB%A6%BC%EB%AA%B0%20AI%20Search%20%EA%B5%AC%EC%B6%95%20%EC%82%AC%EB%A1%80/#4","title":"4. \ucf54\ub4dc \uc124\uacc4 \ubc0f \uad6c\uc870\ud654 \uc804\ub7b5","text":"<ul> <li>Query Template \uac1d\uccb4\ud654: <code>searchUtilService</code>\uc5d0\uc11c \ucffc\ub9ac \ud15c\ud50c\ub9bf\uc744 \ubbf8\ub9ac \uc815\uc758\ud558\uace0 \ub3d9\uc801\uc73c\ub85c \uc870\ud569</li> <li>Field Info \uad6c\uc870\ud654: \ub3c4\uba54\uc778\ubcc4 \uac80\uc0c9 \ud544\ub4dc \ubc0f \ubd84\uc11d \ud544\ub4dc\ub97c \ubcc4\ub3c4\ub85c \uad00\ub9ac (<code>attNm</code>, <code>Analy</code>)<ul> <li><code>setFilterQuery()</code>\ub294 \ud544\ud130 \uc870\uac74\ubcc4 DSL\uc744 \ubd84\uae30 \ucc98\ub9ac</li> </ul> </li> <li>\uc2a4\ucf54\uc5b4 \ud574\uc11d: <code>_explanation</code> \ud544\ub4dc\uc5d0\uc11c \uc810\uc218 \uc0b0\uc815 \uadfc\uac70 \ucd94\ucd9c (<code>extractScorePathOnly()</code>)</li> </ul>"},{"location":"portfolio/%EA%B2%80%EC%83%89/%EC%95%84%EC%9D%B4%EC%8A%A4%ED%81%AC%EB%A6%BC%EB%AA%B0%20AI%20Search%20%EA%B5%AC%EC%B6%95%20%EC%82%AC%EB%A1%80/#ai","title":"AI \uae30\ubc18 \uac80\uc0c9 \uc2dc\uc2a4\ud15c \uac1c\ubc1c \uacfc\uc815 \ubc0f \uae30\uc220\uc801 \uace0\ubbfc \ud574\uacb0 \uc0ac\ub840","text":""},{"location":"portfolio/%EA%B2%80%EC%83%89/%EC%95%84%EC%9D%B4%EC%8A%A4%ED%81%AC%EB%A6%BC%EB%AA%B0%20AI%20Search%20%EA%B5%AC%EC%B6%95%20%EC%82%AC%EB%A1%80/#_4","title":"\ud55c\uacc4&amp;\uac1c\uc120\uc810","text":""},{"location":"portfolio/%EC%87%BC%ED%95%91%EB%AA%B0%20%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%20%EA%B8%B0%EB%8A%A5/%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%EC%9D%B4%EB%9E%80/","title":"\uc774\ubbf8\uc9c0 \uac80\uc0c9\uc774\ub780?","text":""},{"location":"portfolio/%EC%87%BC%ED%95%91%EB%AA%B0%20%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%20%EA%B8%B0%EB%8A%A5/%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%EC%9D%B4%EB%9E%80/#_1","title":"\uc774\ubbf8\uc9c0 \uac80\uc0c9\uc774\ub780?","text":"<p>\ud83d\udca1 \uc774\ubbf8\uc9c0 \uac80\uc0c9\uc774\ub780?</p> <p>\uc774\ubbf8\uc9c0\ub97c \ubc14\ud0d5\uc73c\ub85c \uc720\uc0ac\ud55c \uc774\ubbf8\uc9c0\ub098 \uad00\ub828 \uc815\ubcf4\ub97c \ucc3e\uc544\uc8fc\ub294 \uae30\uc220</p> <p>\uc1fc\ud551\ubab0 \uac80\uc0c9\uc5d0\uc11c \uc0ac\uc6a9\ud55c\ub2e4\uba74,</p> <p>\uc0c1\ud488 \uc774\ubbf8\uc9c0 \uc548\uc5d0 \uc874\uc7ac\ud558\ub294 \uac00\ubc29, \uadc0\uac78\uc774, \uc548\uacbd \ub4f1\uacfc \uac19\uc740 \uac1d\uccb4\ub97c \ucd94\ucd9c\ud558\uc5ec \uac80\uc0c9\ud560 \uc218 \uc788\ub294 \uae30\ub2a5</p>"},{"location":"portfolio/%EC%87%BC%ED%95%91%EB%AA%B0%20%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%20%EA%B8%B0%EB%8A%A5/%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%EC%9D%B4%EB%9E%80/#_2","title":"\uc774\ubbf8\uc9c0 \uac1d\uccb4 \ucd94\ucd9c","text":""},{"location":"portfolio/%EC%87%BC%ED%95%91%EB%AA%B0%20%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%20%EA%B8%B0%EB%8A%A5/%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%EC%9D%B4%EB%9E%80/#ai","title":"AI \ubaa8\ub378\uc740 \uc0ac\uc9c4\uc744 \ubcf4\uace0 \uace0\uc591\uc774\uc778\uc9c0 \uc5b4\ub5bb\uac8c \uc54c \uc218 \uc788\uc744\uae4c?","text":""},{"location":"portfolio/%EC%87%BC%ED%95%91%EB%AA%B0%20%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%20%EA%B8%B0%EB%8A%A5/%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%EC%9D%B4%EB%9E%80/#_3","title":"\ud2b9\uc9d5 \ucd94\ucd9c","text":"<ul> <li>\ub2e4\uc591\ud55c \uac1d\uccb4(\uc608: \uace0\uc591\uc774, \uac15\uc544\uc9c0, \uc0c8 \ub4f1)\uc758 \uc774\ubbf8\uc9c0\ub97c \uc218\uc9d1\ud558\uc5ec \ud559\uc2b5</li> <li>\ubaa8\ub378\uc740 \uc774\ubbf8\uc9c0 \ub370\uc774\ud130\ub97c \uc785\ub825\ubc1b\uc544 \uac01 \uc774\ubbf8\uc9c0\uc758 \uc2dc\uac01\uc801 \ud2b9\uc9d5(\uc608: \uc0c9\uc0c1, \ubaa8\uc591, \uc9c8\uac10 \ub4f1)\uc744 \ucd94\ucd9c</li> </ul>"},{"location":"portfolio/%EC%87%BC%ED%95%91%EB%AA%B0%20%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%20%EA%B8%B0%EB%8A%A5/%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%EC%9D%B4%EB%9E%80/#_4","title":"\ub2e4\uc591\ud55c \ud2b9\uc9d5 \uae30\ubc18 \ud30c\uc545","text":"<ul> <li>\ucd94\ucd9c\ub41c \ud2b9\uc9d5\ub4e4\uc744 \ubc14\ud0d5\uc73c\ub85c \ub370\uc774\ud130\ub97c \ubd84\uc11d</li> <li>\ubaa8\ub378\uc740 \uac01 \uac1d\uccb4\uc758 \uc5ec\ub7ec \uc774\ubbf8\uc9c0\ub97c \ube44\uad50\ud558\uc5ec \uacf5\ud1b5\ub41c \ud2b9\uc9d5\uc744 \ud30c\uc545\ud558\uace0, \uc774\ub7ec\ud55c \ud2b9\uc9d5\uc744 \ubc14\ud0d5\uc73c\ub85c \uac1d\uccb4\ub97c \ubd84\ub958 </li> </ul>"},{"location":"portfolio/%EC%87%BC%ED%95%91%EB%AA%B0%20%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%20%EA%B8%B0%EB%8A%A5/%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%EC%9D%B4%EB%9E%80/#_5","title":"\ubaa8\ub378\uc758 \uc774\ubbf8\uc9c0 \ubd84\ub958","text":"<p>\ubd84\ub958\ud558\uace0 \uc2f6\uc740 \uc0c8\ub85c\uc6b4 \uc774\ubbf8\uc9c0\ub97c \uac00\uc838\uc654\uc2b5\ub2c8\ub2e4.</p> <ul> <li>\ud559\uc2b5\ub41c \ud2b9\uc9d5\ub4e4\uc744 \ubc14\ud0d5\uc73c\ub85c \ud310\ub2e8</li> <li>\ubaa8\ub378\uc740 \uc774\uc804\uc5d0 \ud559\uc2b5\ud55c \ud2b9\uc9d5\ub4e4\uc744 \uc0ac\uc6a9\ud558\uc5ec \uc5b4\ub5a4 \uac1d\uccb4\uc778\uc9c0 \uc2dd\ubcc4</li> </ul>"},{"location":"portfolio/%EC%87%BC%ED%95%91%EB%AA%B0%20%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%20%EA%B8%B0%EB%8A%A5/%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%EC%9D%B4%EB%9E%80/#_6","title":"\uace0\uc591\uc774\ub85c \uc778\uc2dd","text":"<ul> <li>\ucd5c\uc885\uc801\uc73c\ub85c \uc785\ub825\ub41c \uc774\ubbf8\uc9c0\ub97c \ubd84\uc11d\ud55c \uacb0\uacfc\ub97c \ubc14\ud0d5\uc73c\ub85c</li> <li>\uc785\ub825 \ubc1b\uc740 \uc774\ubbf8\uc9c0\uac00 \uace0\uc591\uc774\ub77c\ub294 \uacb0\ub860\uc744 \ub0b4\ub9bd\ub2c8\ub2e4.</li> </ul>"},{"location":"portfolio/%EC%87%BC%ED%95%91%EB%AA%B0%20%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%20%EA%B8%B0%EB%8A%A5/%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%EC%9D%B4%EB%9E%80/#_7","title":"\uc1fc\ud551\ubab0\uc5d0 \uc801\ud569\ud55c \uc0c1\ud488 \ubd84\ub958 \ubaa8\ub378\uc744 \uc0dd\uc131\ud558\uba74?","text":"<p>Note</p> <p>\uc1fc\ud551\ubab0 \uc774\ubbf8\uc9c0 \uac80\uc0c9 \ubaa8\ub378\uc744 \ud6a8\uacfc\uc801\uc73c\ub85c \ud559\uc2b5\uc2dc\ud0a4\uae30 \uc704\ud574\uc11c\ub294 \ub2e4\uc591\ud55c \uc81c\ud488(\uc608: \uc758\ub958, \uc2e0\ubc1c, \uac00\ubc29 \ub4f1)\uc758 \uc774\ubbf8\uc9c0\ub97c \uc218\uc9d1\ud558\uace0, \uac01 \uc774\ubbf8\uc9c0\uc758 \uc2dc\uac01\uc801 \ud2b9\uc9d5\uc744 \ucd94\ucd9c\ud558\uc5ec \uc774\ub97c \ud559\uc2b5\uc2dc\ucf1c\uc57c\ud569\ub2c8\ub2e4. </p> <p>\uc774\ud6c4 \uc774 AI \ubaa8\ub378\uc740 \uc0c8\ub85c\uc6b4 \uc774\ubbf8\uc9c0\ub97c \uc785\ub825\ubc1b\uc558\uc744 \ub54c, \ud559\uc2b5\ub41c \ud2b9\uc9d5\uc744 \ubc14\ud0d5\uc73c\ub85c \uc774\ub97c \uc815\ud655\ud788 \uc778\uc2dd\ud558\uace0, \uc720\uc0ac\ud55c \uc81c\ud488\uc744 \uac80\uc0c9\ud558\uc5ec \uc0ac\uc6a9\uc790\uc5d0\uac8c \ucd94\ucc9c\ud560 \uc218 \uc788\uac8c\ub429\ub2c8\ub2e4.</p>"},{"location":"portfolio/%EC%87%BC%ED%95%91%EB%AA%B0%20%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%20%EA%B8%B0%EB%8A%A5/%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%EC%9D%B4%EB%9E%80/#_8","title":"\uc1fc\ud551\ubab0 \uc774\ubbf8\uc9c0 \uac80\uc0c9\uc758 \ub3d9\uc791 \ubc29\uc2dd","text":""},{"location":"portfolio/%EC%87%BC%ED%95%91%EB%AA%B0%20%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%20%EA%B8%B0%EB%8A%A5/%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%EC%9D%B4%EB%9E%80/#1","title":"1. \uc774\ubbf8\uc9c0 \uc785\ub825","text":"<p>\uc0ac\uc6a9\uc790\uac00 \uc1fc\ud551\ubab0 \uac80\uc0c9\ucc3d\uc5d0 \uc0c1\ud488\uc744 \ucd94\ucd9c\ud558\uace0\uc790 \ud558\ub294 \uc774\ubbf8\uc9c0\ub97c \uc5c5\ub85c\ub4dc (\uc608 : \ud328\uc158 \uc544\uc774\ud15c\uc774 \ub2f4\uae34 \uc774\ubbf8\uc9c0)  </p>"},{"location":"portfolio/%EC%87%BC%ED%95%91%EB%AA%B0%20%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%20%EA%B8%B0%EB%8A%A5/%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%EC%9D%B4%EB%9E%80/#2","title":"2. \uc774\ubbf8\uc9c0 \ubd84\uc11d","text":"<ul> <li>\uac1d\uccb4 \uac80\ucd9c: \uc774\ubbf8\uc9c0 \ub0b4\uc758 \uac01 \uac1d\uccb4(\uc608: \uc637, \uc2e0\ubc1c, \uac00\ubc29 \ub4f1)\ub97c \uac10\uc9c0\ud558\uace0 \ubd84\ud560</li> <li>\ud2b9\uc9d5 \ucd94\ucd9c: \uac01 \uac1d\uccb4\uc758 \uc0c9\uc0c1, \ubaa8\uc591, \ud14d\uc2a4\ucc98 \ub4f1 \uc2dc\uac01\uc801 \ud2b9\uc9d5\uc744 \ubd84\uc11d\ud558\uc5ec \ud2b9\uc9d5 \ubca1\ud130\ub97c \uc0dd\uc131</li> </ul>"},{"location":"portfolio/%EC%87%BC%ED%95%91%EB%AA%B0%20%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%20%EA%B8%B0%EB%8A%A5/%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%EC%9D%B4%EB%9E%80/#3","title":"3. \uc138\ubd80 \uc774\ubbf8\uc9c0 \ucd9c\ub825","text":"<p>\uac10\uc9c0\ub41c \uac01 \uac1d\uccb4\ub97c \ubcc4\ub3c4\uc758 \uc774\ubbf8\uc9c0\ub85c \ubd84\ud560 \uc544\ub798\uc640 \uac19\uc774, \ud558\ub098\uc758 \uc774\ubbf8\uc9c0\uc5d0\uc11c \uc154\uce20, \ubc14\uc9c0, \uc2e0\ubc1c \ub4f1\uc758 \uac1d\uccb4\ub97c \uac01\uac01 \ucd94\ucd9c </p>"},{"location":"portfolio/%EC%87%BC%ED%95%91%EB%AA%B0%20%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%20%EA%B8%B0%EB%8A%A5/%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%EC%9D%B4%EB%9E%80/#4","title":"4. \uc138\ubd80 \uc774\ubbf8\uc9c0 \uac80\uc0c9","text":"<p>\uac01 \uac1d\uccb4 \uc774\ubbf8\uc9c0\uc5d0 \ub300\ud574 \uc720\uc0ac\ud55c \uc81c\ud488\uc744 \uac80\uc0c9\uc5d4\uc9c4\uc5d0\uc11c \uac80\uc0c9</p> <ul> <li>\ud2b9\uc9d5 \ub9e4\uce6d: \ucd94\ucd9c\ub41c \ud2b9\uc9d5 \ubca1\ud130\ub97c \ubc14\ud0d5\uc73c\ub85c \uac80\uc0c9\uc5d4\uc9c4\uc758 \uc81c\ud488 \uc774\ubbf8\uc9c0\uc640 \uc720\uc0ac\uc131\uc744 \ube44\uad50</li> <li>\uacb0\uacfc \uc81c\uacf5: \uac00\uc7a5 \uc720\uc0ac\ud55c \uc81c\ud488 \uc774\ubbf8\uc9c0\ub97c \uc0ac\uc6a9\uc790\uc5d0\uac8c \uc81c\uacf5</li> </ul> <p></p>"},{"location":"portfolio/%EC%87%BC%ED%95%91%EB%AA%B0%20%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%20%EA%B8%B0%EB%8A%A5/%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%EC%9D%B4%EB%9E%80/#_9","title":"\uc1fc\ud551\ubab0 \uc774\ubbf8\uc9c0 \uac80\uc0c9\uc758 \uc7a5\uc810","text":"<ul> <li>\uc0ac\uc6a9\uc790 \ud3b8\uc758\uc131 \ud5a5\uc0c1: \uc0ac\uc6a9\uc790\ub294 \ubcf5\uc7a1\ud55c \ud0a4\uc6cc\ub4dc \uc785\ub825 \uc5c6\uc774 \uc774\ubbf8\uc9c0\ub97c \ud1b5\ud574 \uc6d0\ud558\ub294 \uc81c\ud488\uc744 \uc27d\uac8c \ucc3e\uc744 \uc218 \uc788\uc74c</li> <li>\uc1fc\ud551 \uacbd\ud5d8 \uac1c\uc120: \uc0ac\uc6a9\uc790\ub294 \ud2b9\uc815 \uc2a4\ud0c0\uc77c\uc758 \uc804\uccb4\uc801\uc778 \ucf54\ub514\ub97c \uac80\uc0c9\ud558\uace0 \uad6c\ub9e4\ud560 \uc218 \uc788\uc5b4 \uc1fc\ud551 \uacbd\ud5d8\uc774 \ud5a5\uc0c1</li> </ul>"},{"location":"python/%EA%B8%B0%EC%B4%88/1.%20Class%EC%9D%98%20enter%EA%B3%BC%20exit/","title":"\ud30c\uc774\uc36c \ud074\ub798\uc2a4\uc758 __enter__\uc640 __exit__ \uba54\uc11c\ub4dc","text":""},{"location":"python/%EA%B8%B0%EC%B4%88/1.%20Class%EC%9D%98%20enter%EA%B3%BC%20exit/#__enter__-__exit__","title":"\ud30c\uc774\uc36c \ud074\ub798\uc2a4\uc758 <code>__enter__</code>\uc640 <code>__exit__</code> \uba54\uc11c\ub4dc","text":"<p>\ud30c\uc774\uc36c\uc5d0\uc11c <code>with</code> \ubb38\uc744 \uc0ac\uc6a9\ud560 \ub54c \uc790\ub3d9\uc73c\ub85c \ud638\ucd9c\ub418\ub294 \ud2b9\uc218 \uba54\uc11c\ub4dc\ub4e4\uc774\ub2e4. \uc774\ub4e4\uc744 \uad6c\ud604\ud558\uba74 \ucee8\ud14d\uc2a4\ud2b8 \ub9e4\ub2c8\uc800(Context Manager) \ud504\ub85c\ud1a0\ucf5c\uc744 \ub530\ub974\ub294 \uac1d\uccb4\ub97c \ub9cc\ub4e4 \uc218 \uc788\ub2e4.</p>"},{"location":"python/%EA%B8%B0%EC%B4%88/1.%20Class%EC%9D%98%20enter%EA%B3%BC%20exit/#_1","title":"\ucee8\ud14d\uc2a4\ud2b8 \ub9e4\ub2c8\uc800\ub780?","text":"<p>\ucee8\ud14d\uc2a4\ud2b8 \ub9e4\ub2c8\uc800\ub294 <code>with</code> \ubb38\uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \uac1d\uccb4\ub85c, \ub9ac\uc18c\uc2a4\uc758 \uc548\uc804\ud55c \uc0ac\uc6a9\uacfc \uc815\ub9ac\ub97c \ubcf4\uc7a5\ud55c\ub2e4. \ud30c\uc77c \ucc98\ub9ac, \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0, \ub77d \uad00\ub9ac \ub4f1\uc5d0\uc11c \uc720\uc6a9\ud558\ub2e4.</p>"},{"location":"python/%EA%B8%B0%EC%B4%88/1.%20Class%EC%9D%98%20enter%EA%B3%BC%20exit/#_2","title":"\uae30\ubcf8 \uad6c\ud604 \uc608\uc2dc","text":"<pre><code>class MyClass:\n    def __enter__(self):\n        print(\"\ucee8\ud14d\uc2a4\ud2b8\uc5d0 \uc9c4\uc785\ud588\uc2b5\ub2c8\ub2e4.\")\n        return self  # \uac1d\uccb4 \uc790\uc2e0\uc744 \ubc18\ud658\n\n    def __exit__(self, exc_type, exc_value, traceback):\n        print(\"\ucee8\ud14d\uc2a4\ud2b8\ub97c \ubc97\uc5b4\ub0ac\uc2b5\ub2c8\ub2e4.\")\n        # \uc608\uc678\uac00 \ubc1c\uc0dd\ud574\ub3c4 \uc774 \uba54\uc11c\ub4dc\ub294 \ubc18\ub4dc\uc2dc \ud638\ucd9c\ub428\n        return False  # \uc608\uc678\ub97c \uc7ac\ubc1c\uc0dd\uc2dc\ud0b4\n\n    def do_something(self):\n        print(\"\uc791\uc5c5\uc744 \uc218\ud589\ud569\ub2c8\ub2e4.\")\n\n# with \uad6c\ubb38\uc5d0\uc11c \uac1d\uccb4\ub97c \uc0ac\uc6a9\nwith MyClass() as obj:\n    obj.do_something()\n</code></pre> <p>\uc2e4\ud589 \uacb0\uacfc: </p><pre><code>\ucee8\ud14d\uc2a4\ud2b8\uc5d0 \uc9c4\uc785\ud588\uc2b5\ub2c8\ub2e4.\n\uc791\uc5c5\uc744 \uc218\ud589\ud569\ub2c8\ub2e4.\n\ucee8\ud14d\uc2a4\ud2b8\ub97c \ubc97\uc5b4\ub0ac\uc2b5\ub2c8\ub2e4.\n</code></pre><p></p>"},{"location":"python/%EA%B8%B0%EC%B4%88/1.%20Class%EC%9D%98%20enter%EA%B3%BC%20exit/#_3","title":"\uba54\uc11c\ub4dc \uc0c1\uc138 \uc124\uba85","text":""},{"location":"python/%EA%B8%B0%EC%B4%88/1.%20Class%EC%9D%98%20enter%EA%B3%BC%20exit/#__enter__self","title":"<code>__enter__(self)</code>","text":"<ul> <li><code>with</code> \ubb38\uc774 \uc2dc\uc791\ub420 \ub54c \ud638\ucd9c\ub428</li> <li>\ubc18\ud658\uac12\uc774 <code>as</code> \ub4a4\uc758 \ubcc0\uc218\uc5d0 \ud560\ub2f9\ub428</li> <li>\uc8fc\ub85c \ub9ac\uc18c\uc2a4 \ud68d\ub4dd\uc774\ub098 \ucd08\uae30\ud654 \uc791\uc5c5 \uc218\ud589</li> </ul>"},{"location":"python/%EA%B8%B0%EC%B4%88/1.%20Class%EC%9D%98%20enter%EA%B3%BC%20exit/#__exit__self-exc_type-exc_value-traceback","title":"<code>__exit__(self, exc_type, exc_value, traceback)</code>","text":"<ul> <li><code>with</code> \ube14\ub85d\uc744 \ubc97\uc5b4\ub0a0 \ub54c \ud638\ucd9c\ub428 (\uc608\uc678 \ubc1c\uc0dd \uc2dc\uc5d0\ub3c4 \ubc18\ub4dc\uc2dc \ud638\ucd9c)</li> <li>\ub9e4\uac1c\ubcc0\uc218:</li> <li><code>exc_type</code>: \uc608\uc678 \ud0c0\uc785</li> <li><code>exc_value</code>: \uc608\uc678 \uac12  </li> <li><code>traceback</code>: \ud2b8\ub808\uc774\uc2a4\ubc31 \uac1d\uccb4</li> <li>\ubc18\ud658\uac12\uc774 <code>True</code>\uba74 \uc608\uc678\ub97c \uc5b5\uc81c, <code>False</code>\uba74 \uc608\uc678\ub97c \uc7ac\ubc1c\uc0dd</li> </ul>"},{"location":"python/%EA%B8%B0%EC%B4%88/1.%20Class%EC%9D%98%20enter%EA%B3%BC%20exit/#_4","title":"\uc2e4\uc6a9\uc801\uc778 \uc608\uc2dc: \ud30c\uc77c \uad00\ub9ac\uc790","text":"<pre><code>class FileManager:\n    def __init__(self, filename, mode):\n        self.filename = filename\n        self.mode = mode\n        self.file = None\n\n    def __enter__(self):\n        print(f\"\ud30c\uc77c '{self.filename}'\uc744 \uc5f4\uace0 \uc788\uc2b5\ub2c8\ub2e4...\")\n        self.file = open(self.filename, self.mode)\n        return self.file\n\n    def __exit__(self, exc_type, exc_value, traceback):\n        print(f\"\ud30c\uc77c '{self.filename}'\uc744 \ub2eb\uace0 \uc788\uc2b5\ub2c8\ub2e4...\")\n        if self.file:\n            self.file.close()\n\n        if exc_type:\n            print(f\"\uc608\uc678\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: {exc_value}\")\n\n        return False  # \uc608\uc678\ub97c \uc7ac\ubc1c\uc0dd\uc2dc\ud0b4\n\n# \uc0ac\uc6a9 \uc608\uc2dc\nwith FileManager('test.txt', 'w') as f:\n    f.write(\"Hello, World!\")\n    # \ud30c\uc77c\uc774 \uc790\ub3d9\uc73c\ub85c \ub2eb\ud798\n</code></pre>"},{"location":"python/%EA%B8%B0%EC%B4%88/1.%20Class%EC%9D%98%20enter%EA%B3%BC%20exit/#_5","title":"\uc5b8\uc81c \uc0ac\uc6a9\ud558\uba74 \uc88b\uc744\uae4c?","text":"<ol> <li>\ub9ac\uc18c\uc2a4 \uad00\ub9ac: \ud30c\uc77c, \ub124\ud2b8\uc6cc\ud06c \uc5f0\uacb0, \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f0\uacb0</li> <li>\uc0c1\ud0dc \uad00\ub9ac: \uc784\uc2dc \uc0c1\ud0dc \ubcc0\uacbd \ud6c4 \ubcf5\uc6d0</li> <li>\ub85c\uae45: \uc791\uc5c5 \uc2dc\uc791/\uc885\ub8cc \ub85c\uae45</li> <li>\uc608\uc678 \ucc98\ub9ac: \uc548\uc804\ud55c \ub9ac\uc18c\uc2a4 \uc815\ub9ac</li> </ol> <p>\ucee8\ud14d\uc2a4\ud2b8 \ub9e4\ub2c8\uc800\ub97c \uc0ac\uc6a9\ud558\uba74 \uc608\uc678\uac00 \ubc1c\uc0dd\ud574\ub3c4 \ud56d\uc0c1 \uc815\ub9ac \uc791\uc5c5\uc774 \uc218\ud589\ub418\ubbc0\ub85c \ub354 \uc548\uc804\ud55c \ucf54\ub4dc\ub97c \uc791\uc131\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"python/%EA%B8%B0%EC%B4%88/2.%20multiprocessing/","title":"\ud30c\uc774\uc36c multiprocessing - \ubcd1\ub82c \ucc98\ub9ac\ub85c \uc131\ub2a5 \ud5a5\uc0c1\ud558\uae30","text":""},{"location":"python/%EA%B8%B0%EC%B4%88/2.%20multiprocessing/#multiprocessing-","title":"\ud30c\uc774\uc36c multiprocessing - \ubcd1\ub82c \ucc98\ub9ac\ub85c \uc131\ub2a5 \ud5a5\uc0c1\ud558\uae30","text":"<p>\ud30c\uc774\uc36c\uc758 <code>multiprocessing</code> \ubaa8\ub4c8\uc740 \ud504\ub85c\uc138\uc2a4\uc640 \uc2a4\ub808\ub4dc \uae30\ubc18\uc758 \ubcd1\ub82c\ud654\ub97c \uc704\ud55c \uc800\uc218\uc900 \uc778\ud130\ud398\uc774\uc2a4\ub97c \uc81c\uacf5\ud55c\ub2e4.</p> <p>\uba3c\uc800 \ud504\ub85c\uc138\uc2a4\ub098 \uc2a4\ub808\ub4dc \ud480\uc744 \ud65c\uc6a9\ud558\ub294 \ubaac\ud14c \uce74\ub97c\ub85c \ubc29\uc2dd\uc744 \uc0ac\uc6a9\ud574 \uc6d0\uc8fc\uc728\uc744 \ucd94\uc815\ud560 \uac83\uc774\ub2e4. \uc774 \ubb38\uc81c\ub294 \ub2e8\uc21c\ud558\uba70 \ubcf5\uc7a1\ub3c4\ub3c4 \uc798 \uc54c\ub824\uc838 \uc788\uc73c\ubbc0\ub85c \ubcd1\ub82c\ud654\uac00 \uc27d\ub2e4. \ub610\ud55c numpy\ub97c \uc0ac\uc6a9\ud560 \ub54c \uc608\uae30\uce58 \ubabb\ud55c \uacb0\uacfc\ub97c \ubcfc \uc218 \uc788\ub2e4.</p> <p>\uadf8 \ub2e4\uc74c\uc5d0\ub294 Pool \ubc29\uc2dd\uc744 \uc0ac\uc6a9\ud574\uc11c \uc18c\uc218\ub97c \ucc3e\ub294\ub2e4. \uc18c\uc218\ub97c \ucc3e\ub294 \uacfc\uc815\uc758 \uc608\uce21 \ubd88\uac00\ub2a5\ud55c \ubcf5\uc7a1\uc131\uc744 \uc0b4\ud3b4\ubcf4\uace0, \uc5b4\ub5bb\uac8c \ud574\uc57c \ubd80\ud558\ub97c \ud6a8\uc728\uc801\uc73c\ub85c(\ub610\ub294 \ube44\ud6a8\uc728\uc801\uc73c\ub85c!) \ubd84\uc0b0\uc2dc\ucf1c\uc11c \uacc4\uc0b0 \uc790\uc6d0\uc744 \uac00\uc7a5 \uc798 \ud65c\uc6a9\ud560 \uc218 \uc788\ub294\uc9c0 \uc0b4\ud3b4\ubcf8\ub2e4. \ud050\ub97c \ub2e4\ub8e8\uba74\uc11c \uc18c\uc218 \uac80\uc0c9\uc744 \ub9c8\uce60 \uac83\uc774\ub2e4. \uadf8 \uacfc\uc815\uc5d0\uc11c Pool \ub300\uc2e0 Process \uac1d\uccb4\ub97c \uc0ac\uc6a9\ud558\uace0, \uc791\uc5c5 \ubaa9\ub85d\uacfc \ud3ec\uc774\uc98c \ud544\uc744 \ud65c\uc6a9\ud574\uc11c \uac01 \uc791\uc5c5\uc790\uc758 \uc0dd\uba85\uc8fc\uae30\ub97c \uc870\uc815\ud574\ubcf4\uc790.</p>"},{"location":"python/%EA%B8%B0%EC%B4%88/2.%20multiprocessing/#_1","title":"\ubaac\ud14c \uce74\ub97c\ub85c \ubc29\uc2dd\uc744 \uc0ac\uc6a9\ud574 \uc6d0\uc8fc\uc728 \ucd94\uc815\ud558\uae30","text":"<p>\ubc18\uc9c0\ub984\uc774 1\uc778 \ub2e8\uc704\uc6d0\uc73c\ub85c \ud45c\ud604\ub418\ub294 \u201c\ub2e4\ud2b8 \ud310\u201d\uc5d0 \uac00\uc0c1\uc758 \ub2e4\ud2b8\ub97c \uc218\ucc9c \ubc88 \ub358\uc838\uc11c \uc6d0\uc8fc\uc728\uc744 \ucd94\uc815\ud560 \uc218 \uc788\ub2e4. \uc6d0\uc8fc\uc640 \uadf8 \ub0b4\ubd80\uc5d0 \ub5a8\uc5b4\uc9c4 \ub2e4\ud2b8\uc758 \uac1c\uc218 \uc0ac\uc774\uc758 \uad00\uacc4\ub97c \uc0ac\uc6a9\ud574\uc11c \uc6d0\uc8fc\uc728\uc744 \ucd94\uc0b0\ud55c\ub2e4.</p> <p>\uc774\ub294 \uc774\uc0c1\uc801\uc73c\ub85c \ud504\ub85c\uc138\uc2a4\uc5d0 \uc804\uccb4 \ubd80\ud558\ub97c \uade0\ub4f1\ud558\uac8c \ub098\ub20c \uc218 \uc788\ub294 \uccab \ubc88\uc9f8 \ubb38\uc81c\uc774\ub2e4. \uac01 \ud504\ub85c\uc138\uc2a4\ub294 \ubcc4\ub3c4\uc758 cpu\uc5d0\uc11c \uc791\ub3d9\ud55c\ub2e4. \ubd80\ud558\uac00 \uac19\uc73c\ub2c8 \ubaa8\ub4e0 \ud504\ub85c\uc138\uc2a4\ub294 \uac19\uc740 \uc2dc\uac04\uc5d0 \ub05d\ub0a0 \uac83\uc774\ub2e4. \ub530\ub77c\uc11c \uc774 \ubb38\uc81c\uc5d0 \uc0c8\ub85c\uc6b4 CPU\ub098 \ud558\uc774\ud37c\uc2a4\ub808\ub4dc\ub97c \ucd94\uac00\ud558\uba74 \uc18d\ub3c4\uac00 \ube68\ub77c\uc9c4\ub2e4.</p> <p>\uc2a4\ub808\ub4dc\ub97c \ud558\ub098\ub9cc \uc0ac\uc6a9\ud558\uba74 56\ucd08 \uac78\ub9ac\uace0, \uc2a4\ub808\ub4dc\uac00 \ub458 \uc774\uc0c1\uc774\uc5b4\ub3c4 \uc18d\ub3c4\uac00 \ube68\ub77c\uc9c0\uc9c0 \uc54a\ub294\ub2e4. \ud504\ub85c\uc138\uc2a4\ub97c \ub458 \uc774\uc0c1 \uc0ac\uc6a9\ud558\uba74 \uc2e4\ud589 \uc2dc\uac04\uc744 \ub354 \uc9e7\uac8c \ub9cc\ub4e4 \uc218 \uc788\ub2e4.</p> <p>2\uac1c\ub098 4\uac1c\uc758 \ucf54\uc5b4\ub97c \ud65c\uc6a9\ud560 \ub54c \uc120\ud615\uc801\uc778 \uc18d\ub3c4 \ud5a5\uc0c1\uc744 \uc5bb\uc5c8\uc9c0\ub9cc, \ub178\ud2b8\ubd81\uc5d0 \ubb3c\ub9ac\uc801 \ucf54\uc5b4\uac00 4\uac1c\ubc16\uc5d0 \uc5c6\uc73c\ubbc0\ub85c \ud504\ub85c\uc138\uc2a4\ub97c 8\uac1c \uc0ac\uc6a9\ud558\ub354\ub77c\ub3c4 \ucd94\uac00\ub85c \uc5bb\ub294 \uc18d\ub3c4 \ud5a5\uc0c1\uc740 \uac70\uc758 \uc5c6\ub2e4.</p> <p>\uc2a4\ub808\ub4dc\ub97c \uc0ac\uc6a9\ud558\uba74 \uac01 \uba85\ub839\uc740 GIL \ub54c\ubb38\uc5d0 \uc81c\uc57d\uc774 \uac78\ub9b0\ub2e4. \ub530\ub77c\uc11c \uac01 \uc2a4\ub808\ub4dc\ub97c \ubcc4\ub3c4\uc758 CPU\uc5d0 \uc2e4\ud589\ud560 \uc218 \uc788\uc74c\uc5d0\ub3c4 \ubd88\uad6c\ud558\uace0, \ub2e4\ub978 \uc2a4\ub808\ub4dc\uac00 \uc2e4\ud589 \uc911\uc774\uc9c0 \uc54a\uc744 \ub54c\ub9cc \uc2e4\ud589\ud55c\ub2e4.</p> <p>\ud504\ub85c\uc138\uc2a4\ub97c \uc0ac\uc6a9\ud558\ub294 \ubc84\uc804\uc740 \uc774\ub7f0 \uc81c\uc57d\uc774 \uc5c6\ub2e4. \uac01 \ud504\ub85c\uc138\uc2a4\uac00 \ub2e8\uc77c \uc2a4\ub808\ub4dc\ub97c \uc2e4\ud589\ud558\ub294 \ubcc4\ub3c4\uc758 \ud30c\uc774\uc36c \uc778\ud130\ud504\ub9ac\ud130\uc774\ub2c8 \uacf5\uc720 \uac1d\uccb4\ub85c \uc778\ud55c GIL \uacbd\uc7c1\uc774 \uc5c6\ub2e4.</p> <p></p><pre><code>from random import uniform\nfrom multiprocessing import Pool\nimport time\nimport matplotlib.pyplot as plt\n\ndef estimate_circle(nbr_estimates):\n    nbr_trials_in_quarter_unit_circle = 0\n    for step in range(int(nbr_estimates)):\n        x = uniform(0, 1)\n        y = uniform(0, 1)\n        is_in_unit_circle = x * x + y * y &lt; 1.0\n        nbr_trials_in_quarter_unit_circle += is_in_unit_circle\n\n    return nbr_trials_in_quarter_unit_circle\n\ndef run_simulation(nbr_parallel_blocks, nbr_samples_in_total=1e8):\n    pool = Pool(processes=nbr_parallel_blocks)\n    nbr_samples_per_worker = nbr_samples_in_total / nbr_parallel_blocks\n    nbr_trials_in_quarter_unit_circle = pool.map(estimate_circle, [nbr_samples_per_worker] * nbr_parallel_blocks)\n\n    pool.close()\n    pool.join()\n\n    # \ubcd1\ub82c\ub85c \uc2e4\ud589\ub41c \uacb0\uacfc\ub97c \uc885\ud569\ud574\uc11c \ucd1d \uc6d0 \uc548\uc5d0 \uc788\ub294 \uc810\ub4e4\uc758 \uac1c\uc218 \uacc4\uc0b0\n    total_nbr_trials_in_quarter_unit_circle = sum(nbr_trials_in_quarter_unit_circle)\n\n    # \uc6d0\uc8fc\uc728 \ucd94\uc815 (1/4 \uc6d0\uc5d0 \ud574\ub2f9\ud558\ubbc0\ub85c 4\ubc30 \uacf1)\n    estimated_pi = 4 * total_nbr_trials_in_quarter_unit_circle / nbr_samples_in_total\n    return estimated_pi\n\nif __name__ == \"__main__\":\n    nbr_samples_in_total = 1e8  # \ucd1d \uc2dc\ubbac\ub808\uc774\uc158 \uc0d8\ud50c \uc218\n\n    process_counts = range(1, 11)  # 1\ubd80\ud130 10\uae4c\uc9c0\uc758 \ud504\ub85c\uc138\uc2a4 \uc218\n    computation_times = []  # \uac01 \ud504\ub85c\uc138\uc2a4 \uc218\uc5d0 \ub530\ub978 \uacc4\uc0b0 \uc2dc\uac04 \uc800\uc7a5\n\n    for nbr_parallel_blocks in process_counts:\n        start_time = time.time()  # \uc2dc\uc791 \uc2dc\uac04 \uae30\ub85d\n        estimated_pi = run_simulation(nbr_parallel_blocks, nbr_samples_in_total)\n        end_time = time.time()    # \uc885\ub8cc \uc2dc\uac04 \uae30\ub85d\n\n        total_time = end_time - start_time\n        computation_times.append(total_time)  # \uacc4\uc0b0 \uc2dc\uac04 \uc800\uc7a5\n\n        print(f\"Processes: {nbr_parallel_blocks}, Estimated Pi: {estimated_pi}, Time: {total_time:.2f} seconds\")\n\n    # \uacc4\uc0b0 \uc2dc\uac04 \uadf8\ub798\ud504 \ucd9c\ub825\n    plt.figure(figsize=(10, 6))\n    plt.plot(process_counts, computation_times, marker='o', linestyle='-', color='b')\n    plt.title(\"Computation Time vs Number of Processes\")\n    plt.xlabel(\"Number of Processes\")\n    plt.ylabel(\"Computation Time (seconds)\")\n    plt.grid(True)\n    plt.show()\n</code></pre> <p></p>"},{"location":"python/%EA%B8%B0%EC%B4%88/2.%20multiprocessing/#multiprocessing-joblib","title":"multiprocessing \uc744 Joblib \uc73c\ub85c \ubc14\uafb8\uae30","text":"<p>Joblib\uc740 multiprocessing\uc744 \uac1c\uc120\ud55c \ubaa8\ub4c8\ub85c \uacbd\ub7c9 \ud30c\uc774\ud504\ub77c\uc774\ub2dd\uc744 \ud65c\uc131\ud654\ud558\uba74\uc11c \ubcd1\ub82c \uacc4\uc0b0\uc744 \uc27d\uac8c \ud558\uace0, \uacb0\uacfc\ub97c \uc27d\uac8c \ub514\uc2a4\ud06c \uae30\ubc18\uc758 \uce90\uc2dc\ub85c \uc0ac\uc6a9\ud560 \uc788\ub2e4.</p> <p>\ub2e4\uc74c\uacfc \uac19\uc740 \uacbd\uc6b0 Joblib\uc744 \uc0ac\uc6a9\ud558\uba74 \uc27d\uac8c \uc131\ub2a5\uc744 \ub192\uc77c \uc218 \uc788\ub2e4.</p> <ul> <li>\ub2f9\ud669\uc2a4\ub7ec\uc6b8 \uc815\ub3c4\ub85c \ubcd1\ub82c\uc801\uc778 \ub8e8\ud504\ub97c \ucc98\ub9ac\ud558\ub294 \ub370 \uc21c\uc218 \ud30c\uc774\uc36c\uc744 \uc0ac\uc6a9 \uc911\uc774\ub2e4.(\ub118\ud30c\uc774 \uc5ec\ubd80\ub294 \uc0c1\uad00 x)</li> <li>\ucd9c\ub825\uc744 \ub514\uc2a4\ud06c\uc5d0 \uc800\uc7a5\ud574 \uc138\uc158\uacfc \uc138\uc158 \uc0ac\uc774\uc5d0 \uacb0\uacfc\ub97c \uce90\uc2dc\ud560 \uc218 \uc788\ub294\ub370\ub3c4, \ubd80\uc791\uc6a9\uc5c6\uc774 \ube44\uc6a9\uc774 \ub9ce\uc774 \ub4dc\ub294 \ud568\uc218\ub97c \ud638\ucd9c\ud55c\ub2e4.</li> <li>\ud504\ub85c\uc138\uc2a4 \uc0ac\uc774\uc5d0 \ub118\ud30c\uc774\ub97c \uacf5\uc720\ud560 \uc218 \uc788\uc9c0\ub9cc \uc5b4\ub5bb\uac8c \ud558\ub294\uc9c0\ub97c \ubaa8\ub978\ub2e4.</li> </ul> <p></p><pre><code>from random import uniform\nfrom joblib import Parallel, delayed\nimport time\nimport matplotlib.pyplot as plt\n\ndef estimate_circle(nbr_estimates):\n    nbr_trials_in_quarter_unit_circle = 0\n    for step in range(int(nbr_estimates)):\n        x = uniform(0, 1)\n        y = uniform(0, 1)\n        is_in_unit_circle = x * x + y * y &lt; 1.0\n        nbr_trials_in_quarter_unit_circle += is_in_unit_circle\n\n    return nbr_trials_in_quarter_unit_circle\n\ndef run_simulation(nbr_parallel_blocks, nbr_samples_in_total=1e8):\n    nbr_samples_per_worker = nbr_samples_in_total / nbr_parallel_blocks\n    # Parallel\uacfc delayed\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc791\uc5c5 \ubcd1\ub82c\ud654\n    nbr_trials_in_quarter_unit_circle = Parallel(n_jobs=nbr_parallel_blocks)(\n        delayed(estimate_circle)(nbr_samples_per_worker) for _ in range(nbr_parallel_blocks)\n    )\n\n    # \ubcd1\ub82c\ub85c \uc2e4\ud589\ub41c \uacb0\uacfc\ub97c \uc885\ud569\ud574\uc11c \ucd1d \uc6d0 \uc548\uc5d0 \uc788\ub294 \uc810\ub4e4\uc758 \uac1c\uc218 \uacc4\uc0b0\n    total_nbr_trials_in_quarter_unit_circle = sum(nbr_trials_in_quarter_unit_circle)\n\n    # \uc6d0\uc8fc\uc728 \ucd94\uc815 (1/4 \uc6d0\uc5d0 \ud574\ub2f9\ud558\ubbc0\ub85c 4\ubc30 \uacf1)\n    estimated_pi = 4 * total_nbr_trials_in_quarter_unit_circle / nbr_samples_in_total\n    return estimated_pi\n\nif __name__ == \"__main__\":\n    nbr_samples_in_total = 1e8  # \ucd1d \uc2dc\ubbac\ub808\uc774\uc158 \uc0d8\ud50c \uc218\n\n    process_counts = range(1, 11)  # 1\ubd80\ud130 10\uae4c\uc9c0\uc758 \ud504\ub85c\uc138\uc2a4 \uc218\n    computation_times = []  # \uac01 \ud504\ub85c\uc138\uc2a4 \uc218\uc5d0 \ub530\ub978 \uacc4\uc0b0 \uc2dc\uac04 \uc800\uc7a5\n\n    for nbr_parallel_blocks in process_counts:\n        start_time = time.time()  # \uc2dc\uc791 \uc2dc\uac04 \uae30\ub85d\n        estimated_pi = run_simulation(nbr_parallel_blocks, nbr_samples_in_total)\n        end_time = time.time()    # \uc885\ub8cc \uc2dc\uac04 \uae30\ub85d\n\n        total_time = end_time - start_time\n        computation_times.append(total_time)  # \uacc4\uc0b0 \uc2dc\uac04 \uc800\uc7a5\n\n        print(f\"Processes: {nbr_parallel_blocks}, Estimated Pi: {estimated_pi}, Time: {total_time:.2f} seconds\")\n\n    # \uacc4\uc0b0 \uc2dc\uac04 \uadf8\ub798\ud504 \ucd9c\ub825\n    plt.figure(figsize=(10, 6))\n    plt.plot(process_counts, computation_times, marker='o', linestyle='-', color='b')\n    plt.title(\"Computation Time vs Number of Processes (joblib)\")\n    plt.xlabel(\"Number of Processes\")\n    plt.ylabel(\"Computation Time (seconds)\")\n    plt.grid(True)\n    plt.show()\n</code></pre> <p></p> <p>\ud568\uc218 \ud638\ucd9c \uacb0\uacfc\ub97c \ub611\ub611\ud558\uac8c \uce90\uc2dc\ud558\uae30</p> <p>Joblib\uc758 Memory \uce90\uc2dc\ub294 \uc720\uc6a9\ud55c \uae30\ub2a5\uc774\ub2e4. Memory \ub294 \ud568\uc218 \uacb0\uacfc\ub97c \uc785\ub825 \uc778\uc790\uc5d0 \ub530\ub77c \ub514\uc2a4\ud06c \uce90\uc2dc\ub85c \uc800\uc7a5\ud558\ub294 \ub370\ucee4\ub808\uc774\ud130\ub2e4. \uc774 \uce90\uc2dc\ub294 \ud30c\uc774\uc36c \uc138\uc158 \uac04\uc5d0 \uc601\uc18d\uc801\uc73c\ub85c \uc720\uc9c0\ub418\ubbc0\ub85c, \ucef4\ud4e8\ud130\ub97c \uaed0\ub2e4\uac00 \ub2e4\uc74c\ub0a0 \ucf1c\uc11c \uac19\uc740 \ucf54\ub4dc\ub97c \ub2e4\uc2dc \uc2e4\ud589\ud574\ub3c4 \uce90\uc2dc\uc5d0 \uc800\uc7a5\ud55c \uacb0\uacfc\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"python/%EA%B8%B0%EC%B4%88/2.%20multiprocessing/#_2","title":"\uc18c\uc218 \ucc3e\uae30","text":"<p>\ub2e4\uc74c\uc73c\ub85c, \uc544\uc8fc \ud070 \ubc94\uc704\uc758 \uc218\uc5d0\uc11c \uc18c\uc218\ub97c \uac80\uc0ac\ud558\ub294 \ubc29\ubc95\uc744 \uc0b4\ud3b4\ubcf4\uc790. \uc804\uccb4 \ubc94\uc704\uc5d0\uc11c \uc5b4\ub290 \uc704\uce58\uc5d0 \uc788\ub290\ub0d0\uc5d0 \ub530\ub77c \ubd80\ud558\uac00 \ub2ec\ub77c\uc9c0\uace0 \uc5ec\ub7ec \uc218\uc758 \uc18c\uc218 \uc5ec\ubd80\ub97c \uac80\uc0ac\ud558\ub294 \uc791\uc5c5\uc758 \ubcf5\uc7a1\ub3c4\ub97c \uc608\uce21\ud560 \uc218 \uc5c6\ub2e4\ub294 \uc810\uc5d0\uc11c \uc6d0\uc8fc\uc728 \ubb38\uc81c\uc640\ub294 \uc131\uaca9\uc774 \ub2e4\ub974\ub2e4.</p> <p>\uc18c\uc218\uc131\uc744 \ud310\ubcc4\ud558\ub294 \uc21c\ucc28\uc801\uc778 \ud568\uc218\ub97c \uc791\uc131\ud558\uace0 \uac00\ub2a5\ud55c \uc778\uc218\uc758 \uc9d1\ud569\uc744 \uac01\uac01\uc758 \ud504\ub85c\uc138\uc2a4\uc5d0 \ub118\uaca8 \uac80\uc0ac\ud560 \uc218 \uc788\ub2e4. \uc774 \ubb38\uc81c\ub294 \ub2f9\ud669\uc2a4\ub7ec\uc6b8 \uc815\ub3c4\ub85c \ubcd1\ub82c\uc801\uc774\ub2e4. \uc774\ub294 \uacf5\uc720\ud574\uc57c\ud560 \uc0c1\ud0dc\uac00 \uc804\ud600 \uc5c6\ub2e4\ub294 \uc758\ubbf8\uc774\ub2e4.</p> <p>multiprocessing \ubaa8\ub4c8\uc744 \uc0ac\uc6a9\ud558\uba74 \ubd80\ud558\ub97c \uc27d\uac8c \uc81c\uc5b4\ud560 \uc218 \uc788\ub2e4. \ub530\ub77c\uc11c \uacc4\uc0b0\uc5d0 \ud544\uc694\ud55c \uc790\uc6d0\uc744 \ud65c\uc6a9(\ub610\ub294 \uc624\uc6a9!)\ud558\ub824\uba74 \uc791\uc5c5 \ud050\ub97c \uc5b4\ub5bb\uac8c \ud29c\ub2dd\ud560 \uc218 \uc788\ub294\uc9c0\ub97c \uac80\ud1a0\ud558\uace0, \uc790\uc6d0\uc744 \uc870\uae08 \ub354  \ud6a8\uc728\uc801\uc73c\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \uc26c\uc6b4 \ubc29\ubc95\uc744 \ud0d0\uad6c\ud574 \ubcf4\ub824 \ud55c\ub2e4.</p> <p>\uc989 \ubbf8\ub9ac \uc815\ud574\uc9c4 \uc790\uc6d0 \uc9d1\ud569\uc5d0 \ubcf5\uc7a1\ub3c4\uac00 \ub2ec\ub77c\uc9c0\ub294 \uc5ec\ub7ec \uc791\uc5c5\uc744 \ud6a8\uc728\uc801\uc73c\ub85c \ubc30\ubd84\ud574\uc11c \ubd80\ud558\ub97c \uade0\ub4f1\ud654\ud560 \ubc29\ubc95\uc744 \uc0b4\ud3b4\ubcfc \uac83\uc774\ub2e4.</p> <p></p><pre><code>import math\nimport time\nimport matplotlib.pyplot as plt\n\ndef check_prime(n):\n    if n &lt; 2:  # 1\uc740 \uc18c\uc218\uac00 \uc544\ub2c8\ubbc0\ub85c False \ucc98\ub9ac\n        return False\n    if n % 2 == 0:\n        return n == 2  # 2\ub294 \uc720\uc77c\ud55c \uc9dd\uc218 \uc18c\uc218\uc774\ubbc0\ub85c \uc608\uc678 \ucc98\ub9ac\n    for i in range(3, int(math.sqrt(n) + 1), 2):\n        if n % i == 0:\n            return False\n    return True\n\n# \ubc94\uc704\ub97c \uc9c0\uc815\ud558\uace0 \uac01 \ubc94\uc704\uc5d0\uc11c \uac78\ub9ac\ub294 \uc2dc\uac04\uc744 \uae30\ub85d\nstart_range = 10000\nend_range = 1000000\nstep = 10000\n\nnumbers = range(start_range, end_range + 1, step)\ntimes = []\n\n# \uac01 \uc22b\uc790 \ubc94\uc704 \ub0b4\uc758 \ubaa8\ub4e0 \uc218\uc5d0 \ub300\ud574 \uc18c\uc218 \ud310\ubcc4\ud558\ub294 \ub370 \uac78\ub9b0 \uc2dc\uac04 \uce21\uc815\nfor number in numbers:\n    start_time = time.time()\n\n    # 1\ubd80\ud130 \ud574\ub2f9 \uc22b\uc790 \ubc94\uc704\uae4c\uc9c0\uc758 \ubaa8\ub4e0 \uc18c\uc218 \ud310\ubcc4\n    primes = [n for n in range(1, number + 1) if check_prime(n)]\n\n    end_time = time.time()\n\n    elapsed_time = end_time - start_time\n    times.append(elapsed_time)\n\n# \uac78\ub9b0 \uc2dc\uac04\uc5d0 \ub530\ub978 \uadf8\ub798\ud504 \uadf8\ub9ac\uae30\nplt.plot(numbers, times, label='Prime Check Time')\nplt.xlabel('Number')\nplt.ylabel('Time (seconds)')\nplt.title('Time to Check All Primes from 1 to n')\nplt.grid(True)\nplt.legend()\nplt.show()\n</code></pre> <p></p> <p>\uc218\ub294 \ub300\ubd80\ubd84 \uc18c\uc218\uac00 \uc544\ub2cc \ud569\uc131\uc218\ub2e4. \uc774\ub7f0 \uc218\ub97c \uadf8\ub9bc\uc5d0 \uc810\uc73c\ub85c \ud45c\uc2dc\ud588\ub2e4. \uadf8\uc911 \uc77c\ubd80\ub294 \uac80\uc0ac \ube44\uc6a9\uc774 \uc801\uac8c \ub4e4\uc9c0\ub9cc \ub098\uba38\uc9c0\ub294 \uc5ec\ub7ec \uac00\uc9c0 \uc778\uc218\ub97c \uac80\uc0ac\ud574\uc57c\ub9cc \ud55c\ub2e4.</p> <p>\uc791\uc5c5\uc744 \ud504\ub85c\uc138\uc2a4 \ud480\uc5d0 \ubd84\uc0b0\ud558\uba74 \uc5bc\ub9c8\ub098 \ub9ce\uc740 \uc791\uc5c5\uc774 \uac01 \uc791\uc5c5\uc790\uc5d0 \ub118\uc5b4\uac14\ub294\uc9c0\ub97c \uc815\ud655\ud788 \uc54c \uc218 \uc5c6\ub2e4. \ubaa8\ub4e0 \uc791\uc5c5\uc744 \uade0\ub4f1\ud558\uac8c \ubc30\ubd84\ud574\uc11c \ud55c \ubc88\uc5d0 \ub118\uaca8 \ucc98\ub9ac\ud558\uac70\ub098, \uc791\uc5c5\uc744 \uc218\ub9ce\uc740 \ub2e8\uc704\ub85c \uad6c\ubd84\ud574\uc11c \ube48 \ucf54\uc5b4\uc5d0 \uc804\ub2ec\ud560 \uc218 \uc788\uc744 \uac83\uc774\ub2e4.</p> <p>\uc774\ub97c <code>chunksize</code> \ub9e4\uac1c\ubcc0\uc218\ub97c \uc0ac\uc6a9\ud574 \uc81c\uc5b4\ud55c\ub2e4. \uc791\uc5c5 \ub2e8\uc704\ub97c \ud06c\uac8c \ub9cc\ub4e4\uba74 \ud1b5\uc2e0 \ubd80\uac00\ube44\uc6a9\uc774 \uc904\uace0, \uc791\uc5c5 \ub2e8\uc704\ub97c \uc791\uac8c \ub9cc\ub4e4\uba74 \uc790\uc6d0 \ud560\ub2f9\uc744 \ub354 \uc138\ubc00\ud558\uac8c \uc81c\uc5b4\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"python/%EA%B8%B0%EC%B4%88/2.%20multiprocessing/#chunksize","title":"\uc131\ub2a5 \ucd5c\uc801\ud654: chunksize \ub9e4\uac1c\ubcc0\uc218","text":"<p>\uc18c\uc218 \uac80\uc0c9 \ud504\ub85c\uadf8\ub7a8\uc758 \uc791\uc5c5 \ub2e8\uc704\ub294 <code>check_prime</code>\uc73c\ub85c \uac80\uc0ac\ud560 \uc218 n\uac1c\ub2e4. <code>chunksize</code>\uc744 10\uc73c\ub85c \uc124\uc815\ud558\uba74 \uac01 \ud504\ub85c\uc138\uc2a4\uac00 \uc815\uc218 10\uac1c\ub85c \uc774\ub904\uc9c4 \ubaa9\ub85d\uc744 \ud55c \ubc88\uc5d0 \ud558\ub098\uc529 \ucc98\ub9ac\ud55c\ub2e4.</p>"},{"location":"python/%EA%B8%B0%EC%B4%88/2.%20multiprocessing/#chunksize_1","title":"chunksize \uc124\uc815 \uac00\uc774\ub4dc","text":"<ul> <li>\ud070 chunksize: \ud1b5\uc2e0 \uc624\ubc84\ud5e4\ub4dc \uac10\uc18c, \ud558\uc9c0\ub9cc \ubd80\ud558 \ubd84\uc0b0 \ud6a8\uc728\uc131 \uc800\ud558</li> <li>\uc791\uc740 chunksize: \uc138\ubc00\ud55c \ubd80\ud558 \uc81c\uc5b4 \uac00\ub2a5, \ud558\uc9c0\ub9cc \ud1b5\uc2e0 \uc624\ubc84\ud5e4\ub4dc \uc99d\uac00</li> </ul> <p>\uc801\uc808\ud55c <code>chunksize</code> \uc120\ud0dd\uc740 \uc791\uc5c5\uc758 \ud2b9\uc131\uacfc \uc2dc\uc2a4\ud15c \ud658\uacbd\uc5d0 \ub530\ub77c \ub2ec\ub77c\uc9c4\ub2e4.</p>"},{"location":"python/%EA%B8%B0%EC%B4%88/3.%20%ED%8C%8C%EC%9D%B4%EC%8D%AC%EC%9D%98%20MVC%20%ED%8C%A8%ED%84%B4/","title":"3. \ud30c\uc774\uc36c\uc758 MVC \ud328\ud134","text":"<p>\uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc138 \uac00\uc9c0 \uc8fc\uc694 \uad6c\uc131 \uc694\uc18c\ub85c \ub098\ub204\uc5b4 \uad00\ub9ac\ud558\ub294 \ub514\uc790\uc778 \ud328\ud134</p> <p>\uc774 \ud328\ud134\uc740 \uc720\uc9c0 \ubcf4\uc218\uc131\uacfc \ud655\uc7a5\uc131\uc744 \ub192\uc774\uace0, \ucf54\ub4dc\uc758 \uc5ed\ud560\uc744 \uba85\ud655\ud558\uac8c \ubd84\ub9ac\ud558\uc5ec \uac1c\ubc1c\uc744 \ub354\uc6b1 \uccb4\uacc4\uc801\uc73c\ub85c \ud560 \uc218 \uc788\uac8c \ud569\ub2c8\ub2e4.</p> <pre><code>project_root/\n\u251c\u2500\u2500 main.py\n\u251c\u2500\u2500 app/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 controllers/\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u2514\u2500\u2500 main_controller.py\n\u2502   \u251c\u2500\u2500 models/\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u2514\u2500\u2500 data_model.py\n\u2502   \u251c\u2500\u2500 views/\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 main_view.py\n\u2502   \u2502   \u2514\u2500\u2500 ribbon_bar.py\n\u2502   \u2514\u2500\u2500 resources/\n\u2502       \u251c\u2500\u2500 __init__.py\n\u2502       \u2514\u2500\u2500 icons/\n\u2502           \u2514\u2500\u2500 example_icon.png\n\u251c\u2500\u2500 config/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 settings.py\n\u251c\u2500\u2500 tests/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 test_models.py\n\u2502   \u251c\u2500\u2500 test_views.py\n\u2502   \u2514\u2500\u2500 test_controllers.py\n\u2514\u2500\u2500 requirements.txt\n</code></pre> <p><code>main.py</code>: \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \uc2dc\uc791\uc810.</p> <p><code>app/</code>: \uc8fc\uc694 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ucf54\ub4dc\uac00 \uc704\uce58.</p> <ul> <li><code>controllers/</code>: \ucee8\ud2b8\ub864\ub7ec \ud30c\uc77c\ub4e4\uc774 \uc704\uce58\ud558\uba70, \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\uacfc \ubdf0 \uac04\uc758 \uc0c1\ud638\uc791\uc6a9\uc744 \ub2f4\ub2f9.</li> <li><code>models/</code>: \ub370\uc774\ud130\ubca0\uc774\uc2a4 \ubaa8\ub378\uc774\ub098 \ube44\uc988\ub2c8\uc2a4 \ub370\uc774\ud130\ub97c \ucc98\ub9ac\ud558\ub294 \ub85c\uc9c1\uc774 \uc704\uce58.</li> <li><code>views/</code>: \uc0ac\uc6a9\uc790\uc5d0\uac8c \ub370\uc774\ud130\ub97c \ub80c\ub354\ub9c1\ud558\ub294 \uc5ed\ud560\uc744 \ud558\ub294 \ud30c\uc77c\ub4e4.</li> <li><code>resources/</code>: \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 \ub9ac\uc18c\uc2a4\ub4e4 (\uc608: \uc774\ubbf8\uc9c0, \uc544\uc774\ucf58 \ub4f1).</li> </ul> <p><code>config/</code>: \uc124\uc815 \ud30c\uc77c\ub4e4\uc774 \uc704\uce58\ud558\uba70, \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 \ud658\uacbd \uc124\uc815\uc744 \uc815\uc758.</p> <p><code>tests/</code>: \ud14c\uc2a4\ud2b8 \ucf54\ub4dc\uac00 \uc704\uce58\ud558\uba70, \uac01 \ubd80\ubd84\uc5d0 \ub300\ud55c \uc720\ub2db \ud14c\uc2a4\ud2b8 \ud30c\uc77c\ub4e4\uc774 \ud3ec\ud568.</p> <p><code>requirements.txt</code>: \ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c \ud544\uc694\ud55c Python \ud328\ud0a4\uc9c0 \ubaa9\ub85d.</p>"},{"location":"python/%EB%B9%84%EB%8F%99%EA%B8%B0%20%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/1.%20%EB%B9%84%EB%8F%99%EA%B8%B0%20%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D%20%EC%86%8C%EA%B0%9C/","title":"1. \ube44\ub3d9\uae30 \ud504\ub85c\uadf8\ub798\ubc0d \uc18c\uac1c","text":"<p>I/O\ub294 \ud504\ub85c\uadf8\ub7a8\uc758 \ud750\ub984\uc5d0 \ud070 \uc9d0\uc774 \ub420 \uc218 \uc788\ub2e4. \ucee4\ub110\uc5d0 \uc5f0\uc0b0\uc744 \uc218\ud589\ud558\ub3c4\ub85d \uc694\uccad\ud55c \ub2e4\uc74c, \uadf8 \uc791\uc5c5\uc774 \ub05d\ub0b1 \ub54c\uae4c\uc9c0 \uae30\ub2e4\ub824\uc57c \ud55c\ub2e4. \uc774\ub294 \uc2e4\uc81c \uc77d\uae30 \uc5f0\uc0b0\uc744 \ud558\ub294 \uc8fc\uccb4\uac00 \uc5ec\ub7ec\ubd84\uc758 \ud504\ub85c\uadf8\ub7a8\uc774 \uc544\ub2c8\ub77c \ucee4\ub110\uc774\uae30 \ub54c\ubb38\uc774\ub2e4.</p> <p>\uc6b0\ub9ac\uac00 I/O \uc5f0\uc0b0 \ub300\ubd80\ubd84\uc774 CPU\ubcf4\ub2e4 \uc218\uc2ed \ubc30 \uc774\uc0c1 \ub290\ub9b0 \uc7a5\uce58\uc5d0\uc11c \uc774\ub904\uc5b4\uc9c4\ub2e4. \ub530\ub77c\uc11c \ucee4\ub110\uacfc\uc758 \ud1b5\uc2e0\uc774 \ube68\ub77c\ub3c4, \ucee4\ub110 \uc7a5\uce58\uc5d0\uc11c \uacb0\uacfc\ub97c \uac00\uc838\uc640\uc11c \uc6b0\ub9ac\uc5d0\uac8c \uc804\ub2ec\ud558\uae30\uae4c\uc9c0\ub294 \uc0c1\ub2f9\ud55c \uc2dc\uac04\uc774 \uac78\ub9b0\ub2e4.</p> <p>\ube44\ub3d9\uae30 I/O\ub97c \uc0ac\uc6a9\ud558\uba74 I/O \uc5f0\uc0b0\uc774 \uc644\ub8cc\ub418\uae30\ub97c \uae30\ub2e4\ub9ac\ub294 \ub3d9\uc548 \ub2e4\ub978 \uc5f0\uc0b0\uc744 \uc218\ud589\ud558\uc5ec \uc774\ub7f0 \uc720\ud734 \uc2dc\uac04\uc744 \ud65c\uc6a9\ud560 \uc218 \uc788\ub2e4.</p> <p><code>\ub3d9\uc2dc\uc131 \ud504\ub85c\uadf8\ub7a8</code> \uc740 \ub2e8\uc77c \uc2a4\ub808\ub4dc\uc5d0\uc11c \uc2e4\ud589\ud558\uae30\uc5d0, \uc804\ud1b5\uc801\uc778 \ub2e4\uc911 \uc2a4\ub808\ub4dc \ud504\ub85c\uadf8\ub7a8\ubcf4\ub2e4 \uc791\uc131\uacfc \uad00\ub9ac\uac00 \uc27d\ub2e4. \ub3d9\uc2dc\uc131 \ud568\uc218\ub294 \ubaa8\ub450 \uac19\uc740 \uba54\ubaa8\ub9ac \uacf5\uac04\uc744 \uacf5\uc720\ud558\ubbc0\ub85c \uc774\ub7f0 \ud568\uc218 \uac04\uc5d0 \ub370\uc774\ud130\ub97c \uacf5\uc720\ud558\ubbc0\ub85c \uc774\ub7f0 \ud568\uc218 \uac04\uc5d0 \ub370\uc774\ud130\ub97c \uacf5\uc720\ud560 \ub54c\ub294 \uc77c\ubc18\uc801\uc778(\ubcc0\uc218\ub97c \ud1b5\ud55c) \ubc29\ubc95\uc744 \uc0ac\uc6a9\ud574\ub3c4 \uc608\uc0c1\ub300\ub85c \uc791\ub3d9\ud55c\ub2e4. \ud558\uc9c0\ub9cc \uc5b8\uc81c \uc5b4\ub290 \uc904\uc758 \ucf54\ub4dc\uac00 \uba54\ubaa8\ub9ac \uacf5\uac04\uc744 \uc0ac\uc6a9\ud560\uc9c0 \uc54c \uc218 \uc5c6\uc73c\ubbc0\ub85c \uacbd\uc7c1 \uc0c1\ud0dc(race condition)\ub97c \uc870\uc2ec\ud574\uc57c \ud55c\ub2e4.</p>"},{"location":"python/%EB%B9%84%EB%8F%99%EA%B8%B0%20%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/1.%20%EB%B9%84%EB%8F%99%EA%B8%B0%20%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D%20%EC%86%8C%EA%B0%9C/#_1","title":"\ube44\ub3d9\uae30 \ud504\ub85c\uadf8\ub798\ubc0d \uc18c\uac1c","text":"<p>\uc77c\ubc18\uc801\uc73c\ub85c \ud504\ub85c\uadf8\ub7a8\uc774 I/O \ub300\uae30\uc5d0 \ub4e4\uc5b4\uac00\uba74, \uc2e4\ud589\uc774 \uba48\ucd94\uace0 \ucee4\ub110\uc774 I/O \uc694\uccad\uacfc \uad00\ub828\ud55c \uc800\uc218\uc900 \uc5f0\uc0b0\uc744 \ucc98\ub9ac\ud558\uba70(<code>\ucee8\ud14d\uc2a4\ud2b8 \uc2a4\uc704\uce6d</code>)</p> <p>I/O \uc5f0\uc0b0\uc774 \ub05d\ub0a0 \ub54c\uae4c\uc9c0 \ud504\ub85c\uadf8\ub7a8\uc740 \uc7ac\uac1c\ub418\uc9c0 \uc54a\ub294\ub2e4. \ub098\uc911\uc5d0 \ub2e4\uc2dc \uc2e4\ud589\uc744 \ud558\ub77d\ubc1b\uc73c\uba74 \ub9c8\ub354\ubcf4\ub4dc\uc5d0\uc11c \ud504\ub85c\uadf8\ub7a8\uc744 \ub2e4\uc2dc \ucd08\uae30\ud654\ud558\uace0 \uc7ac\uac1c\ub97c \uc704\ud55c \uc900\ube44 \uc791\uc5c5\uc744 \uc218\ud589\ud574\uc57c \ud55c\ub2e4.</p> <p>\ubc18\uba74\uc5d0 \ub3d9\uc2dc\uc131 \ud504\ub85c\uadf8\ub7a8\uc740 \ubcf4\ud1b5 \uc2e4\ud589\ud560 \ub300\uc0c1\uacfc \uc2dc\uc810\uc744 \uad00\ub9ac\ud558\ub294 \uc774\ubca4\ud2b8 \ub8e8\ud504\ub97c \uc0ac\uc6a9\ud55c\ub2e4. \uadfc\ubcf8\uc801\uc73c\ub85c \uc774\ubca4\ud2b8 \ub8e8\ud504\ub294 \uc2e4\ud589\ud560 \ud568\uc218\uc758 \ubaa9\ub85d\uc5d0 \uc9c0\ub098\uc9c0 \uc54a\ub294\ub2e4. \ubaa9\ub85d \ub9e8 \uc55e\uc758 \ud568\uc218\uac00 \uc2e4\ud589\ub418\uace0, \uadf8 \ub2e4\uc74c\uc5d0 \ub450 \ubc88\uc9f8 \ud568\uc218\uac00 \uc2e4\ud589\ub418\ub294 \uc2dd\uc774\ub2e4.</p> <pre><code>from queue import Queue\n\n# \uc804\uc5ed \ubcc0\uc218\ub85c \uc774\ubca4\ud2b8 \ub8e8\ud504 \uc120\uc5b8\neventloop = None\n\n# Queue \ud074\ub798\uc2a4\ub97c \uc0c1\uc18d\ubc1b\uc544 EventLoop \ud074\ub798\uc2a4 \uad6c\ud604\nclass EventLoop(Queue):\n    # \uc774\ubca4\ud2b8 \ub8e8\ud504\ub97c \uc2dc\uc791\ud558\ub294 \uba54\uc11c\ub4dc\n    def start(self):\n        while True:\n            # \ud050\uc5d0\uc11c \ud568\uc218\ub97c \ud558\ub098 \uaebc\ub0b4 \uc2e4\ud589\n            function = self.get()\n            function()\n\n# \"Hello\"\ub97c \ucd9c\ub825\ud558\uace0 \ub2e4\uc74c \uc774\ubca4\ud2b8\ub85c \"do_world\" \ud568\uc218\ub97c \ud050\uc5d0 \ucd94\uac00\ndef do_hello():\n    global eventloop\n    print(\"Hello\")\n    eventloop.put(do_world)\n\n# \"world\"\ub97c \ucd9c\ub825\ud558\uace0 \ub2e4\uc74c \uc774\ubca4\ud2b8\ub85c \"do_hello\" \ud568\uc218\ub97c \ud050\uc5d0 \ucd94\uac00\ndef do_world():\n    global eventloop\n    print(\"world\")\n    eventloop.put(do_hello)\n\n# \uba54\uc778 \uc2e4\ud589 \ubd80\ubd84\nif __name__ == \"__main__\":\n    # \uc774\ubca4\ud2b8 \ub8e8\ud504 \uac1d\uccb4 \uc0dd\uc131\n    eventloop = EventLoop()\n\n    # \uccab \ubc88\uc9f8 \uc774\ubca4\ud2b8\ub85c do_hello \ud568\uc218 \ud050\uc5d0 \ucd94\uac00\n    eventloop.put(do_hello)\n\n    # \uc774\ubca4\ud2b8 \ub8e8\ud504 \uc2dc\uc791\n    eventloop.start()\n</code></pre> <p>\uc774\ubca4\ud2b8 \ub8e8\ud504\ub97c \ube44\ub3d9\uae30 I/O \uc5f0\uc0b0\uacfc \uacb0\ud569\ud558\uba74 I/O \uc791\uc5c5\uc744 \uc218\ud589\ud560 \ub54c \uc5c4\uccad\ub09c \uc131\ub2a5 \ud615\uc0c1\uc744 \uc5bb\uc744 \uc218 \uc788\ub2e4.</p> <p>\uc704 \ucf54\ub4dc\ub294 <code>eventloop.put(do_world)</code> \ud638\ucd9c\uc740 <code>do_world</code> \ud568\uc218\uc5d0 \ub300\ud55c \ube44\ub3d9\uae30 \ud638\ucd9c\uc744 \ub300\ub7b5\uc801\uc73c\ub85c \ubcf4\uc5ec\uc900\ub2e4. \uc774 \uc5f0\uc0b0\uc740 <code>nonblocking</code> \uc774\ub77c\uace0 \ubd80\ub978\ub2e4.</p> <p>\uc989, \uc989\uc2dc \ubc18\ud658\ub418\uc9c0\ub9cc \ub098\uc911\uc5d0 <code>do_world</code> \ud568\uc218\ub97c \ud638\ucd9c\ud568\uc744 \ubcf4\uc7a5 \ud55c\ub2e4\ub294 \ub9d0\uc774\ub2e4. \ube44\uc2b7\ud558\uac8c \ube44\ub3d9\uae30 \ud568\uc218 \uc548\uc5d0 \ub124\ud2b8\uc6cc\ud06c \uc4f0\uae30 \uc5f0\uc0b0\uc774 \uc788\uc73c\uba74 \uc2e4\uc81c \uc4f0\uae30\uac00 \ub05d\ub098\uc9c0 \uc54a\uc558\uc5b4\ub3c4 \ud568\uc218\ub294 \uc989\uc2dc \ubc18\ud658\ub41c\ub2e4. \ubb38\uc790\uc5f4 \uc4f0\uae30\uac00 \ub05d\ub098\uba74 \uc774\ubca4\ud2b8\uac00 \ubc1c\uc0dd\ud574\uc11c \ud504\ub85c\uadf8\ub7a8\uc774 \uc774\ub97c \uc54c \uc218 \uc788\ub2e4.</p> <p>\uc774\ubca4\ud2b8 \ub8e8\ud504\uc640 \ube44\ub3d9\uae30 I/O \ub77c\ub294 \ub450 \uac1c\ub150\uc744 \ud55c\ub370 \ubaa8\uc73c\uba74, \uc694\uccad\ud55c I/O \uc5f0\uc0b0\uc774 \ub05d\ub098\uae30\ub97c \uae30\ub2e4\ub9ac\ub294 \ub3d9\uc548 \ub2e4\ub978 \ud568\uc218\ub97c \uc2e4\ud589\ud558\ub294 \ud504\ub85c\uadf8\ub7a8\uc744 \ub9cc\ub4e4 \uc218 \uc788\ub2e4.</p> <p>Note</p> <p>\ud568\uc218\uc5d0\uc11c \ud568\uc218\ub85c \uc804\ud658\ud558\ub294 \uc791\uc5c5\ub3c4 \ube44\uc6a9\uc774 \ub4e0\ub2e4. \ucee4\ub110\uc774 \uc2e4\ud589\ud560 \ud568\uc218\ub97c \uba54\ubaa8\ub9ac\uc5d0 \uc900\ube44\ud574\uc57c \ud558\uace0, \uce90\uc2dc \uc0c1\ud0dc\ub3c4 \uc6d0\ub798 \uc608\uce21\uacfc \ub2ec\ub77c\uc9c8 \uac83\uc774\ub2e4. \ub530\ub77c\uc11c \ud504\ub85c\uadf8\ub7a8\uc5d0 I/O \ub300\uae30\uac00 \ub9ce\uc744 \ub54c \ub3d9\uc2dc\uc131\uc5d0\uc11c \uc5bb\ub294 \uc774\uc775\uc774 \uac00\uc7a5 \ucee4\uc9c4\ub2e4. \ucee8\ud14d\uc2a4\ud2b8 \uc2a4\uc704\uce6d\uc5d0 \ube44\uc6a9\uc774 \ub4e4\uc9c0\ub9cc, I/O \ub300\uae30 \uc2dc\uac04\uc744 \ud65c\uc6a9\ud574\uc11c \uc5bb\ub294 \uc774\uc775\uc774 \ud6e8\uc52c \ud06c\uae30 \ub54c\ubb38\uc774\ub2e4.</p>"},{"location":"python/%EB%B9%84%EB%8F%99%EA%B8%B0%20%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/2.%20%EC%BD%9C%EB%B0%B1%EA%B3%BC%20%ED%93%A8%EC%B2%98/","title":"2. \ucf5c\ubc31\uacfc \ud4e8\ucc98","text":"<p>\uc774\ubca4\ud2b8 \ub8e8\ud504\ub97c \uc0ac\uc6a9\ud558\ub294 \ud504\ub85c\uadf8\ub798\ubc0d\uc5d0\ub294 <code>\ucf5c\ubc31</code>\uacfc <code>\ud4e8\ucc98</code>\ub77c\ub294 \ub450 \uac00\uc9c0\uc758 \ud615\ud0dc\uac00 \uc788\ub2e4.</p>"},{"location":"python/%EB%B9%84%EB%8F%99%EA%B8%B0%20%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/2.%20%EC%BD%9C%EB%B0%B1%EA%B3%BC%20%ED%93%A8%EC%B2%98/#_1","title":"\ucf5c\ubc31","text":"<p>\ucf5c\ubc31 \ud328\ub7ec\ub2e4\uc784\uc5d0\uc11c\ub294 \uac01 \ud568\uc218\ub97c \ud638\ucd9c\ud560 \ub54c \ucf5c\ubc31\uc774\ub77c\ub294 \uc778\uc790\ub97c \ub118\uae34\ub2e4. \ud568\uc218\uac00 \uac12\uc744 \ubc18\ud658\ud558\ub294 \ub300\uc2e0, \uadf8 \uac12\uc744 \uc778\uc790\ub85c \uc2e4\uc5b4 \ucf5c\ubc31 \ud568\uc218\ub97c \ud638\ucd9c\ud55c\ub2e4. \uc774 \uad6c\uc870\uc5d0\uc11c\ub294 \ud638\ucd9c\ud55c \ud568\uc218\uc758 \uacb0\uacfc\ub97c \ubc1b\ub294 \ud568\uc218\uac00 \ub354\ud574\uc9c0\uace0, \ub2e4\uc2dc \uadf8 \ud568\uc218\uc758 \uacb0\uacfc\ub97c \ubc1b\ub294 \ub610 \ub2e4\ub978 \ud568\uc218\uac00 \ub354\ud574\uc9c0\uba74\uc11c \ud568\uc218\uc758 \uc0ac\uc2ac\uc774 \ub9cc\ub4e4\uc5b4\uc9c4\ub2e4. \u2192 \uc774\ub7f0 \uc2dd\uc73c\ub85c \ucf5c\ubc31 \uae4a\uc774\uac00 \uae4a\uc5b4\uc9c0\ub294 \uc0c1\ud669\uc744 \u201c\ucf5c\ubc31 \uc9c0\uc625\u201d\uc774\ub77c\uace0 \ubd80\ub978\ub2e4.</p> <pre><code>from functools import partial\nfrom some_database_library import save_results_to_db\n\ndef save_value(value, callback):\n    print(f\"Saving {value} to database\")\n    # \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0 \uac12\uc744 \uc800\uc7a5\ud558\uace0 \uc644\ub8cc\ub418\uba74 \ucf5c\ubc31 \ud638\ucd9c\n    save_results_to_db(value, callback)\n\ndef print_response(db_response):\n    print(f\"Response from database: {db_response}\")\n\nif __name__ == \"__main__\":\n    # print_response()\uac00 \uc544\ub2cc \ud568\uc218 \uac1d\uccb4\ub97c \ub118\uaca8\uc57c \ud568\n    eventloop.put(partial(save_value, \"Hello World\", print_response))\n</code></pre> <p><code>save_result_to_db</code> \ub294 \ube44\ub3d9\uae30 \ud568\uc218\ub2e4. \uc774 \ud568\uc218\uac00 \uc989\uc2dc \ubc18\ud658\ub418\uba74\uc11c \ud568\uc218\uac00 \uc885\ub8cc\ub418\uace0 \ub2e4\ub978 \ucf54\ub4dc\ub97c \uc2e4\ud589\ud560 \uc218 \uc788\ub2e4.</p> <ol> <li> <p>save_value</p> <ol> <li>\uc774 \ud568\uc218\ub294 \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0 \u201cHello World\u201d \uac12\uc744 \uc800\uc7a5\ud558\ub294 \ube44\ub3d9\uae30 \uc791\uc5c5\uc744 \uc218\ud589\ud569\ub2c8\ub2e4. <code>save_results_to_db(value, callback)</code> \uc740 \ube44\ub3d9\uae30 \ud568\uc218\ub85c, \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0 \uc800\uc7a5\uc774 \uc644\ub8cc\ub418\uba74 \ucf5c\ubc31 \ud568\uc218\uc778 <code>callback</code> \uc744 \ud638\ucd9c\ud55c\ub2e4.</li> </ol> </li> <li> <p>print_response</p> <ol> <li>\uc774 \ud568\uc218\ub294 \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0 \uc800\uc7a5\ub41c \ud6c4, \uadf8 \uacb0\uacfc\ub97c \ubc1b\uc544 \ucc98\ub9ac\ud558\ub294 \ucf5c\ubc31 \ud568\uc218\uc785\ub2c8\ub2e4. \uacb0\uacfc\uac00 \ub4e4\uc5b4\uc624\uba74 \ub370\uc774\ud130\ubca0\uc774\uc2a4\ub85c\ubd80\ud130 \uc751\ub2f5\uc744 \ucd9c\ub825\ud55c\ub2e4.</li> </ol> </li> <li> <p>\uc774\ubca4\ud2b8 \ub8e8\ud504\uc5d0 \uc791\uc5c5 \ucd94\uac00</p> <ol> <li><code>partial(save_value, \u201cHello World\u201d, print_response)</code> \ub294 save_value \ud568\uc218\uc5d0 \u201cHello World\u201d\ub77c\ub294 \uac12\uacfc <code>print_response</code> \ucf5c\ubc31\uc744 \ud568\uaed8 \uc804\ub2ec\ud558\uc5ec \uc0c8\ub85c\uc6b4 \ud568\uc218\ub85c \ub9cc\ub4e4\uace0, \uc774\ub97c \uc774\ubca4\ud2b8 \ub8e8\ud504\uc5d0 \ucd94\uac00\ud569\ub2c8\ub2e4.</li> <li>\uc774\ubca4\ud2b8 \ub8e8\ud504\uac00 \uc2e4\ud589\ub418\uba74\uc11c <code>save_value</code> \ud568\uc218\uac00 \uc2e4\ud589\ub418\uace0, \uc774 \ud568\uc218\ub294 \ube44\ub3d9\uae30\uc801\uc73c\ub85c \ub370\uc774\ud130\ubca0\uc774\uc2a4 \u201cHello World\u201d \ub97c \uc800\uc7a5\ud558\uace0 \uc791\uc5c5\uc774 \uc644\ub8cc\ub418\uba74 \ucf5c\ubc31\uc73c\ub85c <code>print_response</code> \uac00 \ud638\ucd9c\ub41c\ub2e4.</li> </ol> </li> </ol> <p>\ub3d9\uc791 \ud750\ub984</p> <ol> <li>\uc774\ubca4\ud2b8 \ub8e8\ud504\uc5d0 \uc791\uc5c5 \ucd94\uac00</li> <li>\uc774\ubca4\ud2b8 \ub8e8\ud504\uc5d0\uc11c \uc791\uc5c5 \uc2e4\ud589</li> <li>\ucf5c\ubc31 \ud568\uc218 \uc2e4\ud589</li> </ol>"},{"location":"python/%EB%B9%84%EB%8F%99%EA%B8%B0%20%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/2.%20%EC%BD%9C%EB%B0%B1%EA%B3%BC%20%ED%93%A8%EC%B2%98/#_2","title":"\ud4e8\ucc98","text":"<p>save_results_to_db \ud568\uc218\uac00 <code>Future</code> \ud0c0\uc785\uc758 \uac12\uc744 \ubc18\ud658\ud55c\ub2e4\uace0 \ud560 \ub54c, \uc774\ub294 \ud574\ub2f9 \ud568\uc218\uac00 \ube44\ub3d9\uae30\uc801\uc73c\ub85c \ub3d9\uc791\ud558\uba70, \ud568\uc218 \ud638\ucd9c \ud6c4 \uc989\uc2dc \uacb0\uacfc\ub97c \ubc18\ud658\ud558\uc9c0 \uc54a\uace0, \uc791\uc5c5\uc774 \uc644\ub8cc\ub418\uc5c8\uc744 \ub54c \uadf8 \uacb0\uacfc\ub97c \ub098\uc911\uc5d0 \uc81c\uacf5\ud560 \uac83\uc744 \uc57d\uc18d\ud558\ub294 \uac1d\uccb4(Future) \ub97c \ubc18\ud658\ud55c\ub2e4\ub294 \uc758\ubbf8\uc785\ub2c8\ub2e4.</p> <p>Future \ud0c0\uc785\uc758 \uc774\ud574</p> <p>\ube44\ub3d9\uae30 \uc791\uc5c5\uc758 \uc644\ub8cc \uc0c1\ud0dc\uc640 \uacb0\uacfc\ub97c \ub098\uc911\uc5d0 \ubc1b\uc744 \uc218 \uc788\ub3c4\ub85d \ud558\ub294 \uac1d\uccb4\uc785\ub2c8\ub2e4. \uc8fc\ub85c \ube44\ub3d9\uae30 \ud504\ub85c\uadf8\ub798\ubc0d\uc5d0\uc11c \uc0ac\uc6a9\ub418\uba70, I/O \uc791\uc5c5\uc774\ub098 \ub124\ud2b8\uc6cc\ud06c \uc694\uccad\uacfc \uac19\uc774 \uc2dc\uac04\uc774 \uac78\ub9ac\ub294 \uc791\uc5c5\uc5d0\uc11c \uc790\uc8fc \uc0ac\uc6a9\ub41c\ub2e4.</p> <ol> <li>\ube44\ub3d9\uae30 \uc791\uc5c5\uc744 \uc2dc\uc791\ud560 \ub54c, \uc791\uc5c5\uc740 \uc989\uc2dc \uacb0\uacfc\ub97c \ubc18\ud658\ud558\uc9c0 \uc54a\uc73c\ubbc0\ub85c Future \uac1d\uccb4\uac00 \ubc18\ud658\ub41c\ub2e4.</li> <li>\uc791\uc5c5\uc774 \uc644\ub8cc\ub418\uba74, Future \uac1d\uccb4\ub294 \uacb0\uacfc \uac12\uc744 \uac00\uc9c0\uac8c \ub418\uace0, \uc774 \uac12\uc744 \ud655\uc778\ud558\uac70\ub098 \ucc98\ub9ac\ud560 \uc218 \uc788\ub2e4. \uc774\ub97c \ud1b5\ud574 \uc6b0\ub9ac\ub294 \ube44\ub3d9\uae30 \uc791\uc5c5\uc758 \uacb0\uacfc\ub97c \ucd94\uc801\ud560 \uc218 \uc788\ub2e4.</li> <li>Future \uac1d\uccb4\ub294 \ucf5c\ubc31 \ud568\uc218\ub97c \ub4f1\ub85d\ud560 \uc218 \uc788\uc73c\uba70, \ube44\ub3d9\uae30 \uc791\uc5c5\uc774 \uc644\ub8cc\ub418\uc5c8\uc744 \ub54c \ud574\ub2f9 \ucf5c\ubc31 \ud568\uc218\uac00 \uc2e4\ud589\ub41c\ub2e4.</li> </ol>"},{"location":"python/%EB%B9%84%EB%8F%99%EA%B8%B0%20%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/3.%20%EB%B9%84%EB%8F%99%EA%B8%B0%20%EC%9E%91%EC%97%85%EC%9D%98%20%EA%B3%BC%EB%B6%80%ED%95%98/","title":"3. \ube44\ub3d9\uae30 \uc791\uc5c5\uc758 \uacfc\ubd80\ud558","text":"<p>\ube44\ub3d9\uae30 \ud504\ub85c\uadf8\ub798\ubc0d\uc5d0\uc11c I/O \uc791\uc5c5\uc744 \ucc98\ub9ac\ud560 \ub54c \ud55c \ubc88\uc5d0 \ub108\ubb34 \ub9ce\uc740 \uc791\uc5c5\uc744 \uc2e4\ud589\ud558\uba74, \uc624\ud788\ub824 \uc131\ub2a5\uc774 \uc800\ud558 \ub420 \uc218 \uc788\ub2e4. \uc608\ub97c \ub4e4\uc5b4, \ud30c\uc77c \uc2dc\uc2a4\ud15c\uc5d0\uc11c \ub3d9\uc2dc\uc5d0 \ub108\ubb34 \ub9ce\uc740 \ud30c\uc77c\uc744 \uc5f4\uac70\ub098 \ub124\ud2b8\uc6cc\ud06c \uc0c1\uc5d0\uc11c \ud55c \ubc88\uc5d0 \ub108\ubb34 \ub9ce\uc740 \uc5f0\uacb0\uc744 \ub9fa\uc73c\uba74 \uc11c\ubc84\uc5d0 \uacfc\ub3c4\ud55c \ubd80\ud558\uac00 \ubc1c\uc0dd\ud560 \uc218 \uc788\ub2e4.  \ub610\ub294 \ube44\ub3d9\uae30 \uc791\uc5c5\uc758 \uc218\uac00 \uc9c0\ub098\uce58\uac8c \ub9ce\uc544\uc9c0\uba74, \uc6b4\uc601\uccb4\uc81c\uac00 \uc790\uc8fc \ucee8\ud14d\uc2a4\ud2b8 \uc2a4\uc704\uce6d\uc744 \ud558\uac8c \ub418\uc5b4 \uc131\ub2a5\uc774 \uc800\ud558\ub420 \uc218 \uc788\ub2e4.</p> <p>\uc774\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud55c \ubc29\ubc95 \uc911 \ud558\ub098\uac00 <code>chunking</code> \ub610\ub294 <code>batching</code> \uae30\ubc95\uc73c\ub85c, \uc791\uc5c5\uc744 \uc77c\uc815\ud55c \ud06c\uae30(chunks)\ub85c \ub098\ub204\uc5b4 \ucc98\ub9ac\ud558\ub294 \uac83\uc774\ub2e4. \uc989, \ube44\ub3d9\uae30 \uc791\uc5c5\uc744 \ud55c\uaebc\ubc88\uc5d0 \ubaa8\ub450 \uc2e4\ud589\ud558\ub294 \ub300\uc2e0 \uc791\uc5c5\uc758 \ubb36\uc74c(batch)\uc73c\ub85c \ub098\ub204\uc5b4 \uc21c\ucc28\uc801\uc73c\ub85c \ucc98\ub9ac\ud558\uc5ec \ubd80\ud558\ub97c \uc870\uc808\ud558\ub294 \ubc29\ubc95\uc774\ub2e4.</p> <p>\uc608\ub97c \ub4e4\uc5b4, 1000\uac1c\uc758 \ud30c\uc77c\uc744 \ucc98\ub9ac\ud574\uc57c \ud560 \ub54c, \ud55c \ubc88\uc5d0 100\uac1c\uc758 \ud30c\uc77c\ub9cc \uc5f4\uace0, \uadf8 \ud30c\uc77c\ub4e4\uc774 \ucc98\ub9ac\ub418\uba74 \uadf8 \ub2e4\uc74c 100\uac1c\ub97c \ucc98\ub9ac\ud558\ub294 \ubc29\uc2dd\uc774\ub2e4.</p> <p>Chunk Size \ubc29\uc2dd\uc758 \ub3d9\uc791 \ubc29\uc2dd</p> <ol> <li>\uc791\uc5c5 \ub098\ub204\uae30</li> <li>\uc21c\ucc28 \ucc98\ub9ac</li> <li>\ube44\ub3d9\uae30\uc801\uc73c\ub85c \uc2e4\ud589</li> </ol> <pre><code>import asyncio\n\n# \ube44\ub3d9\uae30\uc801\uc73c\ub85c \ud30c\uc77c\uc744 \ucc98\ub9ac\ud558\ub294 \ud568\uc218 (\uc608: \uc77d\uae30, \uc4f0\uae30)\nasync def process_file(file):\n    print(f\"Processing {file}\")\n    await asyncio.sleep(1)  # \ud30c\uc77c \ucc98\ub9ac\uc5d0 1\ucd08 \uac78\ub9b0\ub2e4\uace0 \uac00\uc815\n\n# \uc791\uc5c5\uc744 \uc77c\uc815\ud55c \ud06c\uae30(chunk_size)\ub85c \ub098\ub204\uc5b4 \ucc98\ub9ac\ud558\ub294 \ud568\uc218\nasync def process_files_in_chunks(files, chunk_size):\n    for i in range(0, len(files), chunk_size):\n        # \ud30c\uc77c\ub4e4\uc744 chunk\ub85c \ub098\ub204\uc5b4\uc11c \ucc98\ub9ac\n        chunk = files[i:i + chunk_size]\n        await asyncio.gather(*[process_file(file) for file in chunk])\n        print(f\"Processed chunk: {chunk}\")\n\n# \uba54\uc778 \ud568\uc218\nasync def main():\n    # \uc608\uc2dc \ud30c\uc77c \ub9ac\uc2a4\ud2b8\n    files = [f\"file_{i}\" for i in range(20)]\n\n    # \ud55c \ubc88\uc5d0 5\uac1c \ud30c\uc77c\uc529 \ucc98\ub9ac\n    await process_files_in_chunks(files, 5)\n\n# asyncio \uc774\ubca4\ud2b8 \ub8e8\ud504 \uc2e4\ud589\nasyncio.run(main())\n</code></pre> <ol> <li><code>process_file</code> \ud568\uc218<ol> <li>\ud30c\uc77c\uc744 \ucc98\ub9ac\ud558\ub294 \ube44\ub3d9\uae30 \ud568\uc218\uc774\ub2e4.</li> </ol> </li> <li><code>process_files_in_chunks</code><ol> <li>\uc804\uccb4 \ud30c\uc77c \ub9ac\uc2a4\ud2b8\ub97c chunk \ub85c \ub098\ub204\uc5b4 \ucc98\ub9ac\ud558\ub294 \ud568\uc218</li> <li>\ud55c \ubc88\uc5d0 chunk_size \ub9cc\ud07c\uc758 \ud30c\uc77c\uc744 \ube44\ub3d9\uae30\uc801\uc73c\ub85c \ucc98\ub9ac\ud558\uace0, \uadf8 \ub2e4\uc74c chunk\ub85c \ub118\uc5b4\uac04\ub2e4.</li> <li>\uc608\ub97c \ub4e4\uc5b4, 20\uac1c\uc758 \ud30c\uc77c\uc744 \ud55c \ubc88\uc5d0 5\uac1c\uc529 \ubb36\uc5b4\uc11c \ube44\ub3d9\uae30\uc801\uc73c\ub85c \ucc98\ub9ac\ud558\uace0, \uac01 chunk\uac00 \uc644\ub8cc\ub418\uba74 \ub2e4\uc74c 5\uac1c\uc758 \ud30c\uc77c\uc744 \ucc98\ub9ac\ud55c\ub2e4.</li> </ol> </li> <li><code>asyncio.gather()</code><ol> <li>gather\ub294 \uc5ec\ub7ec \ube44\ub3d9\uae30 \uc791\uc5c5\uc744 \ub3d9\uc2dc\uc5d0 \ucc98\ub9ac\ud560 \ub54c \uc0ac\uc6a9</li> </ol> </li> </ol>"},{"location":"python/%EB%B9%84%EB%8F%99%EA%B8%B0%20%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/4.%20%EC%88%9C%EC%B0%A8%EC%B2%98%EB%A6%AC%20%26%20%EC%9D%BC%EA%B4%84%EC%B2%98%EB%A6%AC%20%26%20%EC%A7%84%EC%A0%95%ED%95%9C%20%EB%B9%84%EB%8F%99%EA%B8%B0/","title":"4. \uc21c\ucc28\ucc98\ub9ac & \uc77c\uad04\ucc98\ub9ac & \uc9c4\uc815\ud55c \ube44\ub3d9\uae30","text":""},{"location":"python/%EB%B9%84%EB%8F%99%EA%B8%B0%20%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/4.%20%EC%88%9C%EC%B0%A8%EC%B2%98%EB%A6%AC%20%26%20%EC%9D%BC%EA%B4%84%EC%B2%98%EB%A6%AC%20%26%20%EC%A7%84%EC%A0%95%ED%95%9C%20%EB%B9%84%EB%8F%99%EA%B8%B0/#_1","title":"\uc21c\ucc28 \ucc98\ub9ac","text":"<p>\uc21c\ucc28 \ucc98\ub9ac\ub294 \uac00\uc7a5 \uc804\ud1b5\uc801\uc778 \ubc29\uc2dd\uc73c\ub85c, \uc791\uc5c5\uc744 \ud558\ub098\uc529 \uc21c\uc11c\ub300\ub85c \ucc98\ub9ac. \uc989, \ud558\ub098\uc758 \uc791\uc5c5\uc774 \uc644\ub8cc\ub420 \ub54c\uae4c\uc9c0 \ub2e4\uc74c \uc791\uc5c5\uc744 \uc2dc\uc791\ud558\uc9c0 \uc54a\uace0 \uae30\ub2e4\ub9ac\ub294 \ubc29\uc2dd</p> <ul> <li>\ub2e8\uc21c\ud558\uace0 \uc9c1\uad00\uc801: \ucf54\ub4dc \ud750\ub984\uc774 \uba85\ud655\ud558\uba70, \ub514\ubc84\uae45\uacfc \uc774\ud574\uac00 \uc26c\uc6c0.</li> <li>\ub0ae\uc740 \uc131\ub2a5: \uac01 \uc791\uc5c5\uc774 \ub05d\ub0a0 \ub54c\uae4c\uc9c0 \uae30\ub2e4\ub9ac\ubbc0\ub85c, \uc2dc\uac04\uc774 \uc624\ub798 \uac78\ub9ac\ub294 \uc791\uc5c5\uc774 \uc788\ub2e4\uba74 \ud504\ub85c\uadf8\ub7a8 \uc804\uccb4\uac00 \ub290\ub824\uc9c8 \uc218 \uc788\uc74c. \uc608\ub97c \ub4e4\uc5b4, \ub124\ud2b8\uc6cc\ud06c \uc694\uccad\uc774\ub098 \ud30c\uc77c I/O \uc791\uc5c5\uc774 \uc788\uc744 \ub54c, \ud574\ub2f9 \uc791\uc5c5\uc774 \ub05d\ub0a0 \ub54c\uae4c\uc9c0 \ub2e4\uc74c \uc791\uc5c5\uc774 \uc2dc\uc791\ub418\uc9c0 \uc54a\uc74c.</li> <li>\uc790\uc6d0 \ud65c\uc6a9 \ube44\ud6a8\uc728\uc801: CPU\ub098 \uba54\ubaa8\ub9ac \uac19\uc740 \uc790\uc6d0\uc774 \ucda9\ubd84\ud788 \uc0ac\uc6a9\ub418\uc9c0 \uc54a\uc74c.</li> </ul> <pre><code>def fetch_data_from_server():\n    print(\"Fetching data from server...\")\n    # \ub124\ud2b8\uc6cc\ud06c \uc694\uccad \uc2dc\ubbac\ub808\uc774\uc158 (\ub124\ud2b8\uc6cc\ud06c \uc9c0\uc5f0\uc774 \uc788\uc74c)\n    time.sleep(2)\n    print(\"Data received\")\n\ndef process_data():\n    print(\"Processing data...\")\n    # \ub370\uc774\ud130 \ucc98\ub9ac\n    time.sleep(1)\n    print(\"Data processed\")\n\ndef main():\n    fetch_data_from_server()\n    process_data()\n\nmain()\n</code></pre>"},{"location":"python/%EB%B9%84%EB%8F%99%EA%B8%B0%20%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/4.%20%EC%88%9C%EC%B0%A8%EC%B2%98%EB%A6%AC%20%26%20%EC%9D%BC%EA%B4%84%EC%B2%98%EB%A6%AC%20%26%20%EC%A7%84%EC%A0%95%ED%95%9C%20%EB%B9%84%EB%8F%99%EA%B8%B0/#pipelining","title":"\uc77c\uad04 \ucc98\ub9ac(\ud30c\uc774\ud504\ub77c\uc774\ub2dd, pipelining)","text":"<p>\uc5ec\ub7ec \uc791\uc5c5\uc744 \ubc30\uce58\ub85c \ubaa8\uc544\uc11c \ud55c \ubc88\uc5d0 \ucc98\ub9ac\ud558\ub294 \ubc29\uc2dd\uc774\ub2e4. \uc989, \uc5ec\ub7ec \uac1c\uc758 \uc791\uc5c5\uc744 \ud55c\uaebc\ubc88\uc5d0 \ucc98\ub9ac\ud558\uc9c0\ub9cc, \uc5ec\uc804\ud788 \uc21c\ucc28\uc801\uc73c\ub85c \uc2e4\ud589\ub41c\ub2e4.</p> <p>\ud30c\uc774\ud504\ub77c\uc774\ub2dd\uc740 \uc791\uc5c5\uc744 \uc5ec\ub7ec \ub2e8\uacc4\ub85c \ub098\ub204\uc5b4 \ub3d9\uc2dc\uc5d0 \uc9c4\ud589\ud560 \uc218 \uc788\ub294 \ud2b9\uc9d5\uc774 \uc788\ub2e4.</p> <ul> <li>\ud6a8\uc728\uc131 \uc99d\uac00: \uc5ec\ub7ec \uc791\uc5c5\uc744 \ubb36\uc5b4\uc11c \ub3d9\uc2dc\uc5d0 \ucc98\ub9ac\ud560 \uc218 \uc788\uc5b4, \uc21c\ucc28 \ucc98\ub9ac\ubcf4\ub2e4\ub294 \ube60\ub985\ub2c8\ub2e4.</li> <li>\ube44\ub3d9\uae30\uc640 \uc21c\ucc28 \ucc98\ub9ac\uc758 \uc911\uac04 \uc9c0\uc810: \ube44\ub3d9\uae30\uc801\uc73c\ub85c \ucc98\ub9ac\ub418\uc9c0\ub294 \uc54a\uc9c0\ub9cc, \uac01 \uc791\uc5c5\uc744 \uc77c\uad04 \ucc98\ub9ac\ud558\ub294 \ubc29\uc2dd\uc73c\ub85c \uc18d\ub3c4\ub97c \ub192\uc77c \uc218 \uc788\uc2b5\ub2c8\ub2e4.</li> <li>CPU \uc790\uc6d0 \ud65c\uc6a9 \uc99d\uac00: \ub3d9\uc2dc\uc5d0 \ucc98\ub9ac\ud560 \uc218 \uc788\ub294 \uc791\uc5c5\uc774 \ub9ce\uc744 \uacbd\uc6b0 CPU \uc790\uc6d0\uc744 \ub354 \ud6a8\uc728\uc801\uc73c\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</li> </ul> <pre><code>import asyncio\n\nasync def fetch_data_from_server(server):\n    print(f\"Fetching data from {server}...\")\n    await asyncio.sleep(2)  # \ub124\ud2b8\uc6cc\ud06c \uc694\uccad \uc9c0\uc5f0 \uc2dc\ubbac\ub808\uc774\uc158\n    print(f\"Data received from {server}\")\n    return f\"Data from {server}\"\n\nasync def main():\n    servers = ['Server 1', 'Server 2', 'Server 3']\n\n    # \uc77c\uad04 \ucc98\ub9ac: \uac01 \uc11c\ubc84\uc5d0 \ub300\ud55c \ub370\uc774\ud130\ub97c \ub3d9\uc2dc\uc5d0 \uc694\uccad\n    tasks = [fetch_data_from_server(server) for server in servers]\n\n    # \uacb0\uacfc\ub97c \ud55c\uaebc\ubc88\uc5d0 \ucc98\ub9ac\n    results = await asyncio.gather(*tasks)\n    print(\"All data fetched:\", results)\n\nasyncio.run(main())\n</code></pre> <ol> <li>\uc21c\ucc28 \ucc98\ub9ac<ul> <li>\uc791\uc5c5\uc744 \ud558\ub098\uc529 \ucc98\ub9ac\ud558\uba70, \uac01 \uc791\uc5c5\uc774 \ub05d\ub0a0 \ub54c\uae4c\uc9c0 \uae30\ub2e4\ub838\ub2e4\uac00 \ub2e4\uc74c \uc791\uc5c5\uc744 \uc2dc\uc791\ud569\ub2c8\ub2e4. \uc774\ub294 \ub9e4\uc6b0 \ub2e8\uc21c\ud558\uc9c0\ub9cc, \ucc98\ub9ac \uc2dc\uac04\uc774 \uae38\uc5b4\uc9c8 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</li> </ul> </li> <li>\uc77c\uad04 \ucc98\ub9ac(\ubc30\uce58 \ucc98\ub9ac)<ul> <li>\uc5ec\ub7ec \uc791\uc5c5\uc744 \ud55c\uaebc\ubc88\uc5d0 \ubaa8\uc544\uc11c \ub3d9\uc2dc\uc5d0 \ucc98\ub9ac\ud558\ub294 \ubc29\uc2dd\uc785\ub2c8\ub2e4. \uc774 \ubc29\uc2dd\uc740 \uc21c\ucc28 \ucc98\ub9ac\ubcf4\ub2e4 \ub354 \ube60\ub974\uac8c \uc791\uc5c5\uc744 \uc644\ub8cc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</li> </ul> </li> </ol> <p>\ubb38\uc81c \uc124\uba85</p> <p>\ub370\uc774\ud130\ubca0\uc774\uc2a4 \ucc98\ub9ac\ub97c \uc608\ub85c \ub4e4\uc5c8\uc744 \ub54c, \uc11c\ubc84\uc758 \ucc98\ub9ac \uc18d\ub3c4\ub294 \ud55c \ubc88\uc5d0 \uc5bc\ub9c8\ub098 \ub9ce\uc740 \uc694\uccad\uc744 \ucc98\ub9ac\ud560 \uc218 \uc788\ub294\uc9c0\uc5d0 \uc601\ud5a5\uc744 \ubc1b\uc2b5\ub2c8\ub2e4. \uc11c\ubc84\uac00 \ucd08\ub2f9 100\uac1c\uc758 \uc694\uccad\uc744 \ucc98\ub9ac\ud560 \uc218 \uc788\ub2e4\uace0 \uac00\uc815\ud574 \ubd05\uc2dc\ub2e4.</p> <ol> <li> <p>\uc21c\ucc28 \ucc98\ub9ac\uc640 \uc77c\uad04 \ucc98\ub9ac\uc758 \ucc28\uc774\uc810</p> <ul> <li>\uc21c\ucc28 \ucc98\ub9ac\ub294 \ud55c \ubc88\uc5d0 \ud558\ub098\uc758 \uc694\uccad\uc744 \ubcf4\ub0b4\uace0, \ud574\ub2f9 \uc694\uccad\uc774 \uc644\ub8cc\ub420 \ub54c\uae4c\uc9c0 \uae30\ub2e4\ub9b0 \ud6c4\uc5d0 \ub2e4\uc74c \uc694\uccad\uc744 \ucc98\ub9ac\ud558\ub294 \ubc29\uc2dd\uc785\ub2c8\ub2e4. \uc774\ub294 \uac01\uac01\uc758 \uc694\uccad\uc774 \uc644\ub8cc\ub420 \ub54c\uae4c\uc9c0 \ub300\uae30 \uc2dc\uac04\uc774 \ubc1c\uc0dd\ud558\ubbc0\ub85c \uc804\uccb4 \ucc98\ub9ac \uc2dc\uac04\uc774 \uae38\uc5b4\uc9d1\ub2c8\ub2e4. </li> <li>\ubc18\uba74 \uc77c\uad04 \ucc98\ub9ac\ub294 \uc5ec\ub7ec \uc694\uccad\uc744 \ub3d9\uc2dc\uc5d0 \uc11c\ubc84\uc5d0 \ubcf4\ub0b4\ub294 \ubc29\uc2dd\uc785\ub2c8\ub2e4. \uc608\ub97c \ub4e4\uc5b4, \ud55c \ubc88\uc5d0 100\uac1c\uc758 \uc694\uccad\uc744 \ub3d9\uc2dc\uc5d0 \uc11c\ubc84\ub85c \ubcf4\ub0b4\uba74, \uc11c\ubc84\ub294 \uc774\ub97c \ubcd1\ub82c\ub85c \ucc98\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc774 \ubc29\uc2dd\uc740 \uc5ec\ub7ec \uc694\uccad\uc744 \ud55c\uaebc\ubc88\uc5d0 \ucc98\ub9ac\ud568\uc73c\ub85c\uc368 \uc21c\ucc28 \ucc98\ub9ac\ubcf4\ub2e4 \ud6e8\uc52c \ube60\ub974\uac8c \uacb0\uacfc\ub97c \uc5bb\uc744 \uc218 \uc788\ub294 \uc7a5\uc810\uc774 \uc788\uc2b5\ub2c8\ub2e4.  </li> </ul> </li> <li> <p>\uc77c\uad04 \ucc98\ub9ac\uc5d0\uc11c \ucc98\ub9ac \uc2dc\uac04\uc774 \ubc1c\uc0dd\ud558\ub294 \uc774\uc720</p> <ul> <li>\uc77c\uad04 \ucc98\ub9ac \ubc29\uc2dd\uc5d0\uc11c\ub3c4 \uc77c\uc815\ud55c \ucc98\ub9ac \uc2dc\uac04\uc774 \ud544\uc694\ud569\ub2c8\ub2e4. \uc608\ub97c \ub4e4\uc5b4, \ud55c \ubc88\uc5d0 100\uac1c\uc758 \uc694\uccad\uc744 \ubcf4\ub0b8\ub2e4\uace0 \ud574\ub3c4, \uc11c\ubc84\uac00 \uc774\ub97c \ucc98\ub9ac\ud558\ub294 \ub370 100\ubc00\ub9ac\ucd08\uac00 \uac78\ub9b4 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc774\ub294 \uc11c\ubc84\uac00 \uc694\uccad\uc744 \ucc98\ub9ac\ud558\ub294 \ub370 \uc18c\uc694\ub418\ub294 \uc2dc\uac04\uc785\ub2c8\ub2e4. </li> <li>\ud558\uc9c0\ub9cc \uc911\uc694\ud55c \uc810\uc740, \uc21c\ucc28 \ucc98\ub9ac\uc5d0\uc11c\ub294 100\uac1c\uc758 \uc694\uccad \uac01\uac01\uc774 100\ubc00\ub9ac\ucd08\uc529 \uac78\ub9ac\uc9c0\ub9cc, \uc77c\uad04 \ucc98\ub9ac\ub97c \ud558\uba74 100\uac1c\uc758 \uc694\uccad\uc744 \ub3d9\uc2dc\uc5d0 \ucc98\ub9ac\ud558\ubbc0\ub85c \uc804\uccb4 \uc694\uccad\uc744 \ucc98\ub9ac\ud558\ub294 \ub370 \uac78\ub9ac\ub294 \uc2dc\uac04\uc740 100\ubc00\ub9ac\ucd08\ub85c \ub3d9\uc77c\ud569\ub2c8\ub2e4. \uc774\ub807\uac8c \uc77c\uad04 \ucc98\ub9ac\ub294 \uc21c\ucc28 \ucc98\ub9ac\ubcf4\ub2e4 \ucc98\ub9ac \ud6a8\uc728\uc774 \ud6e8\uc52c \ub192\uc2b5\ub2c8\ub2e4.</li> </ul> </li> <li> <p>\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uacfc\ubd80\ud558 \ubb38\uc81c</p> <ul> <li>\uc11c\ubc84\uac00 \ud55c \ubc88\uc5d0 \ucc98\ub9ac\ud560 \uc218 \uc788\ub294 \uc694\uccad \uc218\ub97c \ucd08\uacfc\ud558\uba74 \uacfc\ubd80\ud558\uac00 \ubc1c\uc0dd\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc608\ub97c \ub4e4\uc5b4, \uc11c\ubc84\uac00 \ud55c \ubc88\uc5d0 100\uac1c\uc758 \uc694\uccad\uc744 \ucc98\ub9ac\ud560 \uc218 \uc788\ub294\ub370, \ud55c \ubc88\uc5d0 1000\uac1c\uc758 \uc694\uccad\uc744 \ubcf4\ub0b4\uba74 \uc11c\ubc84\uac00 \ucc98\ub9ac \ub2a5\ub825\uc744 \ucd08\uacfc\ud558\uc5ec \uc131\ub2a5\uc774 \uc800\ud558\ub429\ub2c8\ub2e4. </li> <li>\ub610\ud55c, \ub108\ubb34 \ub9ce\uc740 \uc694\uccad\uc744 \uc900\ube44\ud558\ub294 \uacfc\uc815\uc5d0\uc11c \ucd94\uac00\uc801\uc778 \uc2dc\uac04\uacfc \uc790\uc6d0\uc774 \uc18c\ubaa8\ub418\uae30 \ub54c\ubb38\uc5d0, \uc77c\uad04 \ucc98\ub9ac\uc758 \uc774\uc810\uc744 \ucda9\ubd84\ud788 \uc0b4\ub9ac\uc9c0 \ubabb\ud558\uace0 \uc624\ud788\ub824 \uc131\ub2a5\uc774 \ub5a8\uc5b4\uc9c8 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc989, \uc801\uc808\ud55c \uc591\uc758 \uc694\uccad\uc744 \ubcf4\ub0b4\ub294 \uac83\uc774 \uc911\uc694\ud569\ub2c8\ub2e4.</li> </ul> </li> <li> <p>\uc11c\ubc84 \ucc98\ub9ac \uc18d\ub3c4\uac00 \ub290\ub9b4 \ub54c\uc758 \ubb38\uc81c\uc810</p> <ul> <li>\uc11c\ubc84\uc758 \ucc98\ub9ac \uc18d\ub3c4\uac00 \ub9e4\uc6b0 \ub290\ub824\uc11c \ud55c \ubc88\uc5d0 \ud558\ub098\uc758 \uc694\uccad\ub9cc \ucc98\ub9ac\ud560 \uc218 \uc788\ub294 \uc0c1\ud669\uc774\ub77c\uba74, \uc77c\uad04 \ucc98\ub9ac\uc758 \uc7a5\uc810\uc774 \uc0ac\ub77c\uc9d1\ub2c8\ub2e4. \uc544\ubb34\ub9ac \ub9ce\uc740 \uc694\uccad\uc744 \ud55c\uaebc\ubc88\uc5d0 \ubcf4\ub0b4\ub354\ub77c\ub3c4, \uc11c\ubc84\uac00 \uc774\ub97c \uc21c\ucc28\uc801\uc73c\ub85c \ucc98\ub9ac\ud574\uc57c \ud558\uae30 \ub54c\ubb38\uc5d0 \uc804\uccb4 \ucc98\ub9ac \uc2dc\uac04\uc740 \uc21c\ucc28 \ucc98\ub9ac\uc640 \ub3d9\uc77c\ud558\uac8c \ub429\ub2c8\ub2e4.</li> </ul> </li> </ol> <p>\ub530\ub77c\uc11c \uc11c\ubc84\uac00 \ucc98\ub9ac \uc18d\ub3c4\uac00 \ub290\ub9b4 \uacbd\uc6b0, \uc77c\uad04 \ucc98\ub9ac\ub294 \uc131\ub2a5 \ud5a5\uc0c1\uc5d0 \ud070 \ud6a8\uacfc\ub97c \ubc1c\ud718\ud558\uc9c0 \ubabb\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"python/%EB%B9%84%EB%8F%99%EA%B8%B0%20%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/4.%20%EC%88%9C%EC%B0%A8%EC%B2%98%EB%A6%AC%20%26%20%EC%9D%BC%EA%B4%84%EC%B2%98%EB%A6%AC%20%26%20%EC%A7%84%EC%A0%95%ED%95%9C%20%EB%B9%84%EB%8F%99%EA%B8%B0/#_2","title":"\uc644\uc804\ud55c \ube44\ub3d9\uae30 \ucc98\ub9ac","text":"<p>\uc774 \ubc29\uc2dd\uc5d0\uc11c\ub294 \uac01 \uc791\uc5c5\uc774 \uc11c\ub85c\ub97c \uae30\ub2e4\ub9ac\uc9c0 \uc54a\uc73c\uba70, \uc791\uc5c5\uc774 \ub05d\ub098\ub294 \ub300\ub85c \ubc14\ub85c \ub2e4\uc74c \uc791\uc5c5\uc744 \uc2e4\ud589\ud55c\ub2e4. \uc791\uc5c5 \uc911\uc5d0 I/O\uac00 \ubc1c\uc0dd\ud558\ub354\ub77c\ub3c4 CPU\ub294 \ub2e4\ub978 \uc791\uc5c5\uc744 \ucc98\ub9ac\ud560 \uc218 \uc788\uc73c\ubbc0\ub85c, \ub3d9\uc2dc\uc5d0 \uc5ec\ub7ec \uc791\uc5c5\uc774 \uc2e4\ud589\ub418\ub294 \uac83\ucc98\ub7fc \ubcf4\uc778\ub2e4.</p> <ul> <li>\ucd5c\uace0\uc758 \uc131\ub2a5: CPU\uac00 \ub180\uc9c0 \uc54a\uace0 I/O \ub300\uae30 \uc2dc\uac04 \ub3d9\uc548 \ub2e4\ub978 \uc791\uc5c5\uc744 \ucc98\ub9ac\ud560 \uc218 \uc788\uae30 \ub54c\ubb38\uc5d0 \uc2dc\uc2a4\ud15c \uc790\uc6d0\uc744 \ucd5c\ub300\ud55c\uc73c\ub85c \ud65c\uc6a9\ud569\ub2c8\ub2e4.</li> <li>\ubcf5\uc7a1\uc131 \uc99d\uac00: \uc644\uc804\ud55c \ube44\ub3d9\uae30 \ucc98\ub9ac\uc5d0\uc11c\ub294 \ub3d9\uc2dc\uc131 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc791\uc5c5\ub4e4\uc774 \ub3d9\uc2dc\uc5d0 \uc2e4\ud589\ub418\uae30 \ub54c\ubb38\uc5d0 \ucf54\ub4dc\uc758 \ub3d9\uae30\ud654\uc640 \uc608\uc678 \ucc98\ub9ac\uc5d0 \uc8fc\uc758\ub97c \uae30\uc6b8\uc5ec\uc57c \ud569\ub2c8\ub2e4.</li> <li>\uc790\uc6d0 \ucd5c\uc801\ud654: \ub124\ud2b8\uc6cc\ud06c\ub098 \ud30c\uc77c I/O\ucc98\ub7fc \uc2dc\uac04\uc774 \uc624\ub798 \uac78\ub9ac\ub294 \uc791\uc5c5\uc5d0\uc11c\ub3c4 \uc131\ub2a5 \uc800\ud558 \uc5c6\uc774 \ub2e4\ub978 \uc791\uc5c5\uc744 \ucc98\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</li> </ul> <pre><code>import asyncio\nimport aiohttp\n\n# \uacb0\uacfc\ub97c \uc800\uc7a5\ud558\ub294 \ud568\uc218\ndef save_result_aiohttp(client_session):\n    sem = asyncio.Semaphore(100)\n\n    async def saver(result):\n        nonlocal sem, client_session\n        url = \"http://127.0.0.1:8080/add\"\n        async with sem:\n            async with client_session.post(url, data=result) as response:\n                return await response.json()\n\n    return saver\n\n# \ube44\ub3d9\uae30 \uc791\uc5c5\uc744 \uc218\ud589\ud558\ub294 \ud568\uc218\nasync def calculate_task_aiohttp(num_iter, task, task_difficulty):\n    tasks = []\n    async with aiohttp.ClientSession() as client_session:\n        saver = save_result_aiohttp(client_session)\n        for i in range(num_iter):\n            result = do_task(i, task_difficulty)  # \uc791\uc5c5 \ucc98\ub9ac \ud568\uc218 \ud638\ucd9c\n            task = asyncio.create_task(saver(result))  (1)\n            tasks.append(task)\n            await asyncio.sleep(0)  (2)\n        await asyncio.wait(tasks)  (3)\n</code></pre> <p>(1) \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc800\uc7a5\uc744 \uc989\uc2dc <code>await</code> \ud558\ub294 \ub300\uc2e0, <code>asyncio.create_task</code> \ub97c \uc0ac\uc6a9\ud574 \uc774\ubca4\ud2b8 \ub8e8\ud504\uc5d0 \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc800\uc7a5 \uc694\uccad\uc744 \ub123\uace0 \ud568\uc218\uac00 \ub05d\ub098\uae30 \uc804\uc5d0 \uc791\uc5c5\uc774 \uc644\ub8cc\ub410\ub294\uc9c0 \ud655\uc778\ud55c\ub2e4.</p> <p>(2) \uc774 \ud568\uc218\uc5d0\uc11c \uac00\uc7a5 \uc911\uc694\ud55c \ubd80\ubd84\uc774\ub2e4. \uc774\ubca4\ud2b8 \ub8e8\ud504\uac00 \uc2e4\ud589\uc744 \uae30\ub2e4\ub9ac\ub294 \uc791\uc5c5\uc744 \ucc98\ub9ac\ud560 \uc218 \uc788\ub3c4\ub85d \uc8fc \ud568\uc218\ub97c \uc77c\uc2dc \uc911\ub2e8\ud55c\ub2e4. \uc774 \ubd80\ubd84\uc774 \uc5c6\uc73c\uba74 \ud050\uc5d0 \ub4e4\uc5b4\uac04 \uc791\uc5c5\uc740 \ud504\ub85c\uadf8\ub7a8\uc774 \ub05d\ub0a0 \ub54c\uae4c\uc9c0 \uc2e4\ud589\ub418\uc9c0 \uc54a\ub294\ub2e4.</p> <p>(3) \uc644\ub8cc\ub418\uc9c0 \uc54a\uc740 \uc791\uc5c5\uc744 \uae30\ub2e4\ub9b0\ub2e4. \ub9cc\uc57d for \ub8e8\ud504 \uc548\uc5d0\uc11c <code>asyncio.sleep</code> \uc744 \ud558\uc9c0 \uc54a\uc558\ub2e4\uba74 \uc5ec\uae30\uc11c \ubaa8\ub4e0 \uc800\uc7a5\uc774 \uc5b4\ub8e8\uc5b4\uc84c\uc744 \uac83\uc774\ub2e4.</p> <p>\uc774 \ucf54\ub4dc\uc758 \uc131\ub2a5 \ud2b9\uc131\uc744 \uc0b4\ud3b4\ubcf4\uae30 \uc804\uc5d0 \uba3c\uc800 <code>asyncio.sleep(0)</code>  \ubb38\uc758 \uc911\uc694\uc131\ubd80\ud130 \ubcf4\uc790. 0\ucd08 \ub3d9\uc548 \uc7a0\ub4e0\ub2e4\ub294 \ud45c\ud604\uc774 \uc774\uc0c1\ud574 \ubcf4\uc77c \uc218\ub3c4 \uc788\uc9c0\ub9cc \uc2e4\uc81c \uc774 \ubb38\uc7a5\uc740 \ud568\uc218\uac00 \uc2e4\ud589\uc744 \uc774\ubca4\ud2b8 \ub8e8\ud504\uc5d0 \ub118\uaca8\uc11c \ub2e4\ub978 \uc791\uc5c5\uc744 \uc2e4\ud589\ud558\ub77c\uace0 \uc591\ubcf4\ud558\ub294 \ubb38\uc7a5\uc774\ub2e4. \uc77c\ubc18\uc801\uc73c\ub85c \ube44\ub3d9\uae30\uc801\uc778 \ucf54\ub4dc\uc5d0\uc11c\ub294 await \ubb38\uc774 \uc2e4\ud589\ub420 \ub54c\ub9c8\ub2e4 \uc774\ub7f0 \uc591\ubcf4\uac00 \uc77c\uc5b4\ub09c\ub2e4. CPU \uc704\uc8fc\uc758 \ucf54\ub4dc\uc5d0\uc11c\ub294 \ubcf4\ud1b5 await\ub97c \ud558\uc9c0 \uc54a\uc73c\ubbc0\ub85c \uac15\uc81c\ub85c \ud55c \ubc88\uc529 \uc591\ubcf4\ud574\uc8fc\ub294 \uc77c\uc774 \uc544\uc8fc \uc911\uc694\ud558\ub2e4.</p> <p>\uc774\ub7f0 \uc77c\uc744 \ud558\uc9c0 \uc54a\uc73c\uba74 CPU \uc704\uc8fc\uc758 \uc791\uc5c5\uc774 \ub05d\ub098\uae30 \uc804\uae4c\uc9c0 \uc544\ubb34 \uc791\uc5c5\ub3c4 \uc2e4\ud589\ud558\uc9c0 \uc54a\uc744 \uac83\uc774\ub2e4. \uc774\ub7f0 \uc81c\uc5b4\uc758 \uc7a5\uc810\uc740 \uc774\ubca4\ud2b8 \ub8e8\ud504\uc5d0 \uc2e4\ud589\uc744 \ub118\uae38 \ucd5c\uc801\uc758 \uc2dc\uc810\uc744 \uc6b0\ub9ac\uac00 \uc815\ud560 \uc218 \uc788\ub2e4\ub294 \uc810\uc774\ub2e4.</p> <p>\uc2e4\ud589\uc744 \ub118\uae30\uba74 \ud504\ub85c\uadf8\ub7a8\uc758 \uc2e4\ud589 \uc0c1\ud0dc\uac00 \ubc14\ub00c\ubbc0\ub85c \uacc4\uc0b0 \uc911\uac04\uc5d0 \uc774\ub7f0 \uc77c\uc744 \ud558\uba74 CPU \uce90\uc2dc\uac00 \ubc14\ub014 \uc218\ub3c4 \uc788\ub2e4. \uac8c\ub2e4\uac00 \uc774\ubca4\ud2b8 \ub8e8\ud504\uc5d0 \uc2e4\ud589\uc744 \ub118\uae30\ub294 \uc77c\ub3c4 \ubd80\uac00\ube44\uc6a9\uc73c\ubbc0\ub85c \ub108\ubb34 \uc790\uc8fc \ud558\uba74 \uc548\ub41c\ub2e4. \ud558\uc9c0\ub9cc CPU \uc791\uc5c5\uc744 \ucc98\ub9ac\ud558\ub294 \uc911\uc5d0\ub294 \uc5b4\ub5a4 I/O \uc791\uc5c5\ub3c4 \ud560 \uc218 \uc5c6\ub2e4. \ub530\ub77c\uc11c \uc804\uccb4 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc774 API\ub85c \uc774\ub904\uc838 \uc788\ub2e4\uba74, CPU \uc704\uc8fc \uc791\uc5c5\uc744 \uc2e4\ud589\ud558\ub294 \ub3d9\uc548\uc740 \uc544\ubb34 \uc694\uccad\ub3c4 \ucc98\ub9ac\ud560 \uc218 \uc5c6\ub2e4.</p> <p>\uc77c\ubc18\uc801\uc73c\ub85c\ub294 50~100\ubc00\ub9ac\ucd08 \uc815\ub3c4\ub9c8\ub2e4 \ubc18\ubcf5\ud558\ub9ac\ub77c \uc608\uc0c1\ub418\ub294 \ub8e8\ud504\uc5d0\uc11c <code>asyncio.sleep(0)</code> \uc744 \ud638\ucd9c\ud558\uae30\ub97c \uad8c\uc7a5\ud55c\ub2e4.</p> <p>\uc644\uc804\ud55c \ube44\ub3d9\uae30 \ud574\ubc95\uc758 \uc774\uc810\uc740 CPU \uc791\uc5c5\ud558\ub294  \ub3c4\uc911\uc5d0 I/O \uc791\uc5c5\ub3c4 \ud560 \uc218 \uc788\ub2e4\ub294 \uc810\uc774\ub2e4. \uc774\ub294 \uc804\uccb4 \uc2e4\ud589 \uc2dc\uac04\uc5d0\uc11c CPU \uc704\uc8fc\uc758 \uc791\uc5c5\uc744 \uc218\ud589\ud558\ub294 \ub370 \uac78\ub9b0 \uc2dc\uac04\uc744 \uc0c1\uc1c4\ud574\ubc84\ub9ac\ub294 \ud6a8\uacfc\uac00 \uc788\ub2e4. \uc774\ubca4\ud2b8 \ub8e8\ud504\uc758 \ubd80\ud558 \ub54c\ubb38\uc5d0 \uc804\uccb4 \ube44\uc6a9\uc744 \ub2e4 \uc0c1\uc1c4\ud558\uc9c0\ub294 \ubabb\ud558\uc9c0\ub9cc, \uac70\uc758 \ub2e4 \uc0c1\uc1c4\ud560 \uc218\ub294 \uc788\ub2e4. \uc2e4\uc81c\ub85c \ub09c\uc774\ub3c4 8\uc778 \uc791\uc5c5\uc744 600\ubc88 \ubc18\ubcf5\ud560 \ub54c \uc644\uc804\ud55c \ube44\ub3d9\uae30 \ucf54\ub4dc\ub294 \uc21c\ucc28 \ucf54\ub4dc\ubcf4\ub2e4 7.3\ubc30 \ube60\ub974\uac8c \uc2e4\ud589\ub418\uace0, \uc77c\uad04 \ucc98\ub9ac \ucf54\ub4dc\ubcf4\ub2e4 I/O \ubd80\ud558\ub97c 2\ubc30 \ub354 \ube60\ub974\uac8c \ucc98\ub9ac\ud55c\ub2e4.</p> <p>\ud558\uc9c0\ub9cc \uac1c\ubcc4 I/O \uc791\uc5c5\uc740 \uc11c\ubc84\uc758 100\ubc00\ub9ac\ucd08 \uc751\ub2f5 \uc2dc\uac04\ubcf4\ub2e4 \ub354 \uc624\ub798 \uac78\ub838\ub2e4\ub294 \uc0ac\uc2e4\ub3c4 \uc54c \uc218 \uc788\ub2e4. \uc774 \uc2dc\uac04\uc740 asyncio.sleep(0) \ubb38\uc744 \ud638\ucd9c\ud558\ub294 \uc2dc\uac04 \uac04\uaca9\uacfc (\uac01 I/O \uc791\uc5c5\uc740 3\ubc88 await\ub97c \ud558\ub294 \ubc18\uba74, \uac01 CPU \uc791\uc5c5\uc740 1\ubc88 await\ud55c\ub2e4) \uc774\ubca4\ud2b8 \ub8e8\ud504\uac00 \ub2e4\uc74c\uc5d0 \uc5b4\ub5a4 \uc791\uc5c5\uc744 \uc2e4\ud589\ud560\uc9c0 \uacb0\uc815\ud558\ub294 \ubc29\ubc95\uc5d0 \ub530\ub77c \ub2ec\ub77c\uc9c4\ub2e4.</p> <p>\ube44\ub85d CPU\ub9cc \uc0ac\uc6a9\ud574\uc11c \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uc5ec \ub2ec\uc131\ud560 \uc218 \uc788\ub294 \uc18d\ub3c4\uc640\ub294 \ud070 \uaca9\ucc28\uac00 \uc788\uc9c0\ub9cc, \ube44\ub3d9\uae30 \ucf54\ub4dc\ub294 \uc21c\ucc28\uc801 \ucf54\ub4dc\ubcf4\ub2e4 \uc6d4\ub4f1\ud788 \ube60\ub974\ub2e4. \uc774\ub7f0 \ubb38\uc81c\ub97c \uc644\uc804\ud788 \ud574\uacb0\ud558\ub824\uba74 multiprocessing \uac19\uc740 \ubaa8\ub4c8\uc744 \uc0ac\uc6a9\ud574\uc11c I/O \uc791\uc5c5\uc744 \ubcc4\ub85c\uc758 \ud504\ub85c\uc138\uc2a4\ub85c \uc644\uc804\ud788 \ubd84\ub9ac\ud558\uc5ec CPU \uc791\uc5c5\uc758 \uc131\ub2a5\uc774 \ub5a8\uc5b4\uc9c0\uc9c0 \uc54a\ub3c4\ub85d \ud574\uc57c \ud55c\ub2e4.</p>"},{"location":"search-engine/Axum-OpenSearch-Rust-%EA%B2%80%EC%83%89-API-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%84%A4%EA%B3%84/","title":"Axum + OpenSearch: Rust \uac80\uc0c9 API \uc544\ud0a4\ud14d\ucc98 \uc124\uacc4","text":"","tags":["Rust","Axum","OpenSearch","\uac80\uc0c9API","Handlebars"]},{"location":"search-engine/Axum-OpenSearch-Rust-%EA%B2%80%EC%83%89-API-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%84%A4%EA%B3%84/#axum-opensearch-rust-api","title":"Axum + OpenSearch: Rust \uac80\uc0c9 API \uc544\ud0a4\ud14d\ucc98 \uc124\uacc4","text":"","tags":["Rust","Axum","OpenSearch","\uac80\uc0c9API","Handlebars"]},{"location":"search-engine/Axum-OpenSearch-Rust-%EA%B2%80%EC%83%89-API-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%84%A4%EA%B3%84/#_1","title":"\uac1c\uc694","text":"<p>Rust\ub85c \ucee4\uba38\uc2a4 \uac80\uc0c9 \uc5d4\uc9c4\uc758 \uae30\ubcf8 \uad6c\uc870\ub97c \uc7a1\uc740 \ud6c4, \ubcf8\uaca9\uc801\uc73c\ub85c \uac80\uc0c9 API\ub97c \uc124\uacc4\ud558\uace0 \uad6c\ud604\ud558\ub294 \ub2e8\uacc4\uc5d0 \uc9c4\uc785\ud588\ub2e4. \uac80\uc0c9 API\ub294 \ub2e8\uc21c\ud788 \ud0a4\uc6cc\ub4dc\ub97c \ubc1b\uc544 \uacb0\uacfc\ub97c \ubc18\ud658\ud558\ub294 \uac83\uc774 \uc544\ub2c8\ub2e4. \ucee4\uba38\uc2a4 \uac80\uc0c9\uc5d0\uc11c\ub294 \uc0c1\ud488\uba85, \ube0c\ub79c\ub4dc\uba85, \uce74\ud14c\uace0\ub9ac, \uc774\ubca4\ud2b8, \ub9c8\ucf00\ud305 \ub370\uc774\ud130 \ub4f1 \uc11c\ub85c \ub2e4\ub978 \uc778\ub371\uc2a4\ub97c \ub300\uc0c1\uc73c\ub85c, \ud544\ub4dc\ubcc4 \uac00\uc911\uce58\uac00 \ub2e4\ub978 \ubcf5\ud569 \ucffc\ub9ac\ub97c \uc2e4\ud589\ud558\uace0, Aggregation\uc73c\ub85c \ud544\ud130 \ub370\uc774\ud130\ub97c \ucd94\ucd9c\ud558\uba70, \uc778\uae30 \uac80\uc0c9\uc5b4\uc640 \ucd94\ucc9c \uac80\uc0c9\uc5b4\uae4c\uc9c0 \ucc98\ub9ac\ud574\uc57c \ud55c\ub2e4.</p> <p>NestJS \ubc84\uc804\uc5d0\uc11c\ub294 \uc774 \ubcf5\uc7a1\ud55c \ucffc\ub9ac \ub85c\uc9c1\uc774 \uc11c\ube44\uc2a4 \ucf54\ub4dc \uc548\uc5d0 \ud558\ub4dc\ucf54\ub529\ub418\uc5b4 \uc788\uc5c8\ub2e4. \uac80\uc0c9 \ud488\uc9c8\uc744 \ud29c\ub2dd\ud560 \ub54c\ub9c8\ub2e4 \ucf54\ub4dc\ub97c \uc218\uc815\ud558\uace0 \ubc30\ud3ec\ud574\uc57c \ud588\uc73c\uba70, \uc778\ub371\uc2a4 \ud0c0\uc785\ubcc4\ub85c \ube44\uc2b7\ud558\uc9c0\ub9cc \ubbf8\ubb18\ud558\uac8c \ub2e4\ub978 \ucffc\ub9ac \ube4c\ub354\uac00 \ub09c\ub9bd\ud588\ub2e4. Rust \ubc84\uc804\uc5d0\uc11c\ub294 \uc774 \ubb38\uc81c\ub97c Handlebars \ud15c\ud50c\ub9bf \uc5d4\uc9c4\uc73c\ub85c \ud574\uacb0\ud558\uace0, \ud544\ub4dc \uc124\uc815\uc744 OpenSearch \ub9e4\ud551\uc5d0\uc11c \ub3d9\uc801\uc73c\ub85c \ucd94\ucd9c\ud558\ub294 \uc790\uac00 \uc801\uc751(self-adaptive) \ubc29\uc2dd\uc744 \ub3c4\uc785\ud588\ub2e4.</p>","tags":["Rust","Axum","OpenSearch","\uac80\uc0c9API","Handlebars"]},{"location":"search-engine/Axum-OpenSearch-Rust-%EA%B2%80%EC%83%89-API-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%84%A4%EA%B3%84/#api","title":"\uac80\uc0c9 API \ub77c\uc6b0\ud2b8 \uc124\uacc4","text":"<p>\uac80\uc0c9 \ub77c\uc6b0\ud2b8\ub294 \ub2e8\uc77c \uc5d4\ub4dc\ud3ec\uc778\ud2b8\ub85c \ud1b5\ud569\ud588\ub2e4. \uc778\ub371\uc2a4 \uc774\ub984\uacfc \uac80\uc0c9 \ud30c\ub77c\ubbf8\ud130\ub97c \ubc1b\uc544 \ubc94\uc6a9\uc801\uc73c\ub85c \ub3d9\uc791\ud558\ub294 \uad6c\uc870\ub2e4.</p> <pre><code>pub fn search_routes() -&gt; Router {\n    Router::new()\n        .route(\"/api/search\", post(handle_search))\n        .route(\"/api/search/:index_name\", get(handle_search_get))\n}\n</code></pre> <p>\uac80\uc0c9 \ud30c\ub77c\ubbf8\ud130\ub294 <code>SearchParams</code> \uad6c\uc870\uccb4\ub85c \uc815\uc758\ud588\ub2e4. \ucee4\uba38\uc2a4 \uac80\uc0c9\uc5d0 \ud544\uc694\ud55c \ubaa8\ub4e0 \uc870\uac74\uc744 \ud3ec\ud568\ud55c\ub2e4.</p> <pre><code>pub struct SearchParams {\n    pub indexName: String,        // \ub300\uc0c1 \uc778\ub371\uc2a4 (goods, marketing, event)\n    pub searchWord: String,       // \uac80\uc0c9 \ud0a4\uc6cc\ub4dc\n    pub size: usize,              // \uacb0\uacfc \uc218\n    pub from: usize,              // \ud398\uc774\uc9c0 \uc624\ud504\uc14b\n    pub aggregation: bool,        // Aggregation \ud3ec\ud568 \uc5ec\ubd80\n    pub filters: Option&lt;Value&gt;,   // \ub3d9\uc801 \ud544\ud130 \uc870\uac74\n    pub sort: Option&lt;String&gt;,     // \uc815\ub82c \uae30\uc900\n}\n</code></pre> <p><code>indexName</code> \ud544\ub4dc\uba85\uc774 camelCase\uc778 \uc774\uc720\ub294 \ud504\ub860\ud2b8\uc5d4\ub4dc\uc640\uc758 \ud638\ud658\uc131 \ub54c\ubb38\uc774\ub2e4. Rust\uc758 \ub124\uc774\ubc0d \ucee8\ubca4\uc158(snake_case)\uacfc \ucda9\ub3cc\ud558\uc9c0\ub9cc, serde\uc758 <code>#[serde(rename)]</code>\ubcf4\ub2e4\ub294 \ud504\ub860\ud2b8\uc5d4\ub4dc \uac1c\ubc1c\uc790\uc640\uc758 \uc18c\ud1b5 \ube44\uc6a9\uc744 \uc904\uc774\ub294 \uac83\uc774 \ub354 \uc911\uc694\ud558\ub2e4\uace0 \ud310\ub2e8\ud588\ub2e4. \uc2e4\uc81c\ub85c NestJS \ubc84\uc804\uacfc \ub3d9\uc77c\ud55c API \uc2a4\ud399\uc744 \uc720\uc9c0\ud568\uc73c\ub85c\uc368 \ud504\ub860\ud2b8\uc5d4\ub4dc \uc218\uc815 \uc5c6\uc774 \ubc31\uc5d4\ub4dc\ub9cc \uad50\uccb4\ud560 \uc218 \uc788\uc5c8\ub2e4.</p>","tags":["Rust","Axum","OpenSearch","\uac80\uc0c9API","Handlebars"]},{"location":"search-engine/Axum-OpenSearch-Rust-%EA%B2%80%EC%83%89-API-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%84%A4%EA%B3%84/#handlebars","title":"Handlebars \ud15c\ud50c\ub9bf \uae30\ubc18 \ucffc\ub9ac \uc0dd\uc131","text":"<p>OpenSearch \ucffc\ub9ac\ub294 JSON \ud615\ud0dc\uc774\uc9c0\ub9cc, \uac80\uc0c9 \uc870\uac74\uc5d0 \ub530\ub77c \ub3d9\uc801\uc73c\ub85c \uad6c\uc131\ub418\uc5b4\uc57c \ud55c\ub2e4. \uc608\ub97c \ub4e4\uc5b4 \uc0c1\ud488 \uac80\uc0c9 \ucffc\ub9ac\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 \uc694\uc18c\ub97c \uc870\ud569\ud55c\ub2e4.</p> <ul> <li>\uac80\uc0c9\uc5b4\uac00 \uc788\uc744 \ub54c\uc640 \uc5c6\uc744 \ub54c (match_all vs multi_match)</li> <li>exact match, phrase match, most_fields match\uc758 \uac00\uc911\uce58 \ubd84\ubc30</li> <li>\uce74\ud14c\uace0\ub9ac, \ube0c\ub79c\ub4dc, \uac00\uaca9 \ubc94\uc704 \ub4f1\uc758 \ud544\ud130 \uc870\uac74</li> <li>Aggregation (\uce74\ud14c\uace0\ub9ac\ubcc4 \uc0c1\ud488 \uc218, \uac00\uaca9 \ubc94\uc704 \ub4f1)</li> </ul> <p>\uc774 \uc870\ud569\uc758 \uacbd\uc6b0\uc758 \uc218\uac00 \uc218\uc2ed \uac00\uc9c0\uc5d0 \ub2ec\ud558\ubbc0\ub85c, \ucf54\ub4dc\ub85c \ucffc\ub9ac\ub97c \ube4c\ub529\ud558\uba74 \uc720\uc9c0\ubcf4\uc218\uac00 \ubd88\uac00\ub2a5\ud574\uc9c4\ub2e4. Handlebars \ud15c\ud50c\ub9bf\uc744 \ub3c4\uc785\ud574 \ucffc\ub9ac \uad6c\uc870\ub97c \uc120\uc5b8\uc801\uc73c\ub85c \uc815\uc758\ud588\ub2e4.</p> <pre><code>{{! goods_search_template.hbs }}\n{\n    \"size\": {{size}},\n    \"from\": {{from}},\n    \"track_total_hits\": true,\n    \"sort\": [{ \"_score\": \"desc\" }],\n    \"query\": {\n        \"bool\": {\n            {{#if searchWord}}\n            \"should\": [\n                {{#if exactFields}}\n                {\n                    \"multi_match\": {\n                        \"query\": \"{{searchWord}}\",\n                        \"fields\": {{json exactFields}},\n                        \"type\": \"phrase\",\n                        \"boost\": 4.0\n                    }\n                },\n                {{/if}}\n                {{#if phraseFields}}\n                {\n                    \"multi_match\": {\n                        \"query\": \"{{searchWord}}\",\n                        \"fields\": {{json phraseFields}},\n                        \"type\": \"phrase\",\n                        \"boost\": 3.0\n                    }\n                },\n                {{/if}}\n                {{#if primaryFields}}\n                {\n                    \"multi_match\": {\n                        \"query\": \"{{searchWord}}\",\n                        \"fields\": {{json primaryFields}},\n                        \"type\": \"most_fields\",\n                        \"operator\": \"and\",\n                        \"boost\": 2.0\n                    }\n                },\n                {{/if}}\n                {{#if secondaryFields}}\n                {\n                    \"multi_match\": {\n                        \"query\": \"{{searchWord}}\",\n                        \"fields\": {{json secondaryFields}},\n                        \"type\": \"most_fields\",\n                        \"minimum_should_match\": \"75%\",\n                        \"boost\": 1.0\n                    }\n                }\n                {{/if}}\n            ],\n            \"minimum_should_match\": 1,\n            {{else}}\n            \"must\": [{ \"match_all\": {} }],\n            {{/if}}\n            \"filter\": [ ... ]\n        }\n    }\n}\n</code></pre> <p>\uc774 \ud15c\ud50c\ub9bf\uc758 \ud575\uc2ec\uc740 4\ub2e8\uacc4 \uac00\uc911\uce58 \uc2dc\uc2a4\ud15c\uc774\ub2e4.</p> <pre><code>graph TD\n    A[\uac80\uc0c9\uc5b4 \uc785\ub825] --&gt; B{\ud544\ub4dc \ub9e4\uce6d}\n    B --&gt; C[Exact Match&lt;br/&gt;boost: 4.0&lt;br/&gt;\uc815\ud655\ud788 \uc77c\uce58\ud558\ub294 \uacbd\uc6b0]\n    B --&gt; D[Phrase Match&lt;br/&gt;boost: 3.0&lt;br/&gt;\uad6c\ubb38\uc774 \ud3ec\ud568\ub41c \uacbd\uc6b0]\n    B --&gt; E[Primary Fields&lt;br/&gt;boost: 2.0&lt;br/&gt;AND \uc870\uac74 \uc8fc\uc694 \ud544\ub4dc]\n    B --&gt; F[Secondary Fields&lt;br/&gt;boost: 1.0&lt;br/&gt;75% \ub9e4\uce6d \ubcf4\uc870 \ud544\ub4dc]\n    C --&gt; G[\ucd5c\uc885 \uc2a4\ucf54\uc5b4\ub9c1]\n    D --&gt; G\n    E --&gt; G\n    F --&gt; G</code></pre> <p>Exact Match (boost 4.0): \uac80\uc0c9\uc5b4\uac00 \ud544\ub4dc \uac12\uacfc \uc815\ud655\ud788 \uc77c\uce58\ud560 \ub54c \uac00\uc7a5 \ub192\uc740 \uc810\uc218\ub97c \ubd80\uc5ec\ud55c\ub2e4. \"\ub098\uc774\ud0a4 \uc5d0\uc5b4\ub9e5\uc2a4\"\ub97c \uac80\uc0c9\ud588\uc744 \ub54c \uc0c1\ud488\uba85\uc774 \uc815\ud655\ud788 \"\ub098\uc774\ud0a4 \uc5d0\uc5b4\ub9e5\uc2a4\"\uc778 \uc0c1\ud488\uc774 \ucd5c\uc0c1\uc704\uc5d0 \ub178\ucd9c\ub41c\ub2e4.</p> <p>Phrase Match (boost 3.0): \uac80\uc0c9\uc5b4\uac00 \ud544\ub4dc \uac12 \ub0b4\uc5d0 \uad6c\ubb38\uc73c\ub85c \ud3ec\ud568\ub420 \ub54c. \"\ub098\uc774\ud0a4 \uc5d0\uc5b4\ub9e5\uc2a4 90 \ub9ac\ubbf8\ud2f0\ub4dc \uc5d0\ub514\uc158\"\ucc98\ub7fc \uac80\uc0c9\uc5b4\ub97c \ud3ec\ud568\ud558\ub294 \uae34 \uc0c1\ud488\uba85\uc774 \ud574\ub2f9\ub41c\ub2e4.</p> <p>Primary Fields (boost 2.0): AND \uc870\uac74\uc73c\ub85c \uac80\uc0c9\uc5b4\uc758 \ubaa8\ub4e0 \ud1a0\ud070\uc774 \ud3ec\ud568\ub41c \uacbd\uc6b0. \uac80\uc0c9\uc5b4\uac00 \"\ub098\uc774\ud0a4 \uc6b4\ub3d9\ud654\"\uc77c \ub54c \"\ub098\uc774\ud0a4\"\uc640 \"\uc6b4\ub3d9\ud654\" \ubaa8\ub450 \ud3ec\ud568\ud558\ub294 \uc0c1\ud488.</p> <p>Secondary Fields (boost 1.0): 75% \uc774\uc0c1\uc758 \ud1a0\ud070\uc774 \ub9e4\uce6d\ub418\ub294 \uacbd\uc6b0. \uac80\uc0c9\uc5b4\uc758 \uc77c\ubd80\ub9cc \uc77c\uce58\ud574\ub3c4 \uacb0\uacfc\uc5d0 \ud3ec\ud568\ub418\uba70, \uc7ac\ud604\uc728(recall)\uc744 \ub192\uc774\ub294 \uc5ed\ud560\uc744 \ud55c\ub2e4.</p> <p>\uc774 \uac00\uc911\uce58 \uad6c\uc870\ub294 NestJS \ubc84\uc804\uc5d0\uc11c \uc218\uac1c\uc6d4\uac04 A/B \ud14c\uc2a4\ud2b8\ub97c \uac70\uccd0 \ucd5c\uc801\ud654\ud55c \uac12\uc774\ub2e4. Rust \ubc84\uc804\uc5d0\uc11c\ub294 \uc774\ub97c \uadf8\ub300\ub85c \uac00\uc838\uc654\ub418, \ud15c\ud50c\ub9bf \ud30c\uc77c\uc5d0\uc11c \uad00\ub9ac\ud558\ubbc0\ub85c \uac00\uc911\uce58 \ubcc0\uacbd \uc2dc \ucf54\ub4dc \uc218\uc815 \uc5c6\uc774 \ud15c\ud50c\ub9bf\ub9cc \ud3b8\uc9d1\ud558\uba74 \ub41c\ub2e4.</p>","tags":["Rust","Axum","OpenSearch","\uac80\uc0c9API","Handlebars"]},{"location":"search-engine/Axum-OpenSearch-Rust-%EA%B2%80%EC%83%89-API-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%84%A4%EA%B3%84/#_2","title":"\ub3d9\uc801 \ud544\ub4dc \ubc1c\uacac \uc2dc\uc2a4\ud15c","text":"<p>\uac00\uc7a5 \ud601\uc2e0\uc801\uc778 \ubd80\ubd84\uc740 \uac80\uc0c9 \ud544\ub4dc\ub97c \ud558\ub4dc\ucf54\ub529\ud558\uc9c0 \uc54a\uace0 OpenSearch \uc778\ub371\uc2a4 \ub9e4\ud551\uc5d0\uc11c \ub3d9\uc801\uc73c\ub85c \ucd94\ucd9c\ud558\ub294 \uc2dc\uc2a4\ud15c\uc774\ub2e4.</p> <pre><code>async fn get_index_fields_from_db(index_name: &amp;str) -&gt; IndexFields {\n    let index_type = extract_index_type(index_name);\n\n    // 1. Redis \uce90\uc2dc\uc5d0\uc11c \uba3c\uc800 \uc870\ud68c\n    match get_cached_field_config(index_name, &amp;index_type).await {\n        Ok(Some(cached_fields)) =&gt; {\n            return IndexFields::from(cached_fields);\n        }\n        Ok(None) =&gt; { /* \uce90\uc2dc \ubbf8\uc2a4 */ }\n        Err(e) =&gt; { warn!(\"Cache lookup failed: {}\", e); }\n    }\n\n    // 2. \uce90\uc2dc \ubbf8\uc2a4 \uc2dc OpenSearch\uc5d0\uc11c \ub9e4\ud551 \uc870\ud68c\n    let mapping = client.indices()\n        .get_mapping(IndicesGetMappingParts::Index(&amp;[index_name]))\n        .send()\n        .await;\n\n    // 3. \ub9e4\ud551\uc5d0\uc11c \ud544\ub4dc \ud0c0\uc785\ubcc4 \ubd84\ub958\n    let fields = classify_fields_from_mapping(mapping);\n\n    // 4. Redis\uc5d0 \uce90\uc2f1\n    cache_field_config(index_name, &amp;index_type, &amp;fields).await;\n\n    fields\n}\n</code></pre> <p>\uc774 \uc2dc\uc2a4\ud15c\uc758 \ub3d9\uc791 \ud750\ub984\uc740 \ub2e4\uc74c\uacfc \uac19\ub2e4.</p> <pre><code>sequenceDiagram\n    participant C as Client\n    participant S as Search Service\n    participant R as Redis\n    participant O as OpenSearch\n\n    C-&gt;&gt;S: \uac80\uc0c9 \uc694\uccad\n    S-&gt;&gt;R: \ud544\ub4dc \uc124\uc815 \uce90\uc2dc \uc870\ud68c\n    alt \uce90\uc2dc \ud788\ud2b8\n        R--&gt;&gt;S: CachedIndexFields\n    else \uce90\uc2dc \ubbf8\uc2a4\n        S-&gt;&gt;O: GET /{index}/_mapping\n        O--&gt;&gt;S: \uc778\ub371\uc2a4 \ub9e4\ud551 JSON\n        S-&gt;&gt;S: \ud544\ub4dc \ubd84\ub958 (exact/phrase/primary/secondary)\n        S-&gt;&gt;R: \uce90\uc2dc \uc800\uc7a5\n    end\n    S-&gt;&gt;S: Handlebars \ud15c\ud50c\ub9bf \ub80c\ub354\ub9c1\n    S-&gt;&gt;O: POST /{index}/_search\n    O--&gt;&gt;S: \uac80\uc0c9 \uacb0\uacfc\n    S--&gt;&gt;C: API \uc751\ub2f5</code></pre> <p>\ud544\ub4dc \ubd84\ub958 \ub85c\uc9c1\uc740 OpenSearch \ub9e4\ud551\uc758 \ud544\ub4dc \ud0c0\uc785\uacfc \ubd84\uc11d\uae30(analyzer) \uc124\uc815\uc744 \uae30\ubc18\uc73c\ub85c \ud55c\ub2e4.</p> <ul> <li><code>keyword</code> \ud0c0\uc785 \ub610\ub294 <code>.exact</code> \uc11c\ube0c\ud544\ub4dc\uac00 \uc788\ub294 \ud544\ub4dc \u2192 <code>exact_fields</code></li> <li><code>text</code> \ud0c0\uc785 + <code>nori_analyzer</code> \u2192 <code>phrase_fields</code></li> <li><code>text</code> \ud0c0\uc785 + \ub192\uc740 <code>boost</code> \uc124\uc815 \u2192 <code>primary_fields</code></li> <li>\ub098\uba38\uc9c0 <code>text</code> \ud0c0\uc785 \ud544\ub4dc \u2192 <code>secondary_fields</code></li> </ul> <p>\uc774 \ubc29\uc2dd\uc758 \uc7a5\uc810\uc740 \uc0c8\ub85c\uc6b4 \ud544\ub4dc\ub97c \uc778\ub371\uc2a4\uc5d0 \ucd94\uac00\ud558\uba74 \uac80\uc0c9 API\uac00 \uc790\ub3d9\uc73c\ub85c \ud574\ub2f9 \ud544\ub4dc\ub97c \uac80\uc0c9 \ub300\uc0c1\uc5d0 \ud3ec\ud568\ud55c\ub2e4\ub294 \uac83\uc774\ub2e4. NestJS \ubc84\uc804\uc5d0\uc11c\ub294 \ud544\ub4dc\ub97c \ucd94\uac00\ud560 \ub54c\ub9c8\ub2e4 \ucffc\ub9ac \ube4c\ub354 \ucf54\ub4dc\ub97c \uc218\uc815\ud574\uc57c \ud588\ub2e4.</p>","tags":["Rust","Axum","OpenSearch","\uac80\uc0c9API","Handlebars"]},{"location":"search-engine/Axum-OpenSearch-Rust-%EA%B2%80%EC%83%89-API-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%84%A4%EA%B3%84/#redis","title":"Redis \uce90\uc2dc \ub124\uc784\uc2a4\ud398\uc774\uc2a4 \uc124\uacc4","text":"<p>Redis \uce90\uc2dc\ub294 \ub124\uc784\uc2a4\ud398\uc774\uc2a4\ub97c \uccb4\uacc4\uc801\uc73c\ub85c \uc124\uacc4\ud588\ub2e4.</p> <pre><code>const CACHE_NAMESPACE: &amp;str = \"search_rust\";\nconst FIELD_CONFIG_PREFIX: &amp;str = \"field_config\";\n\n// \ud0a4 \uad6c\uc870:\n// search_rust:field_config:{index_name}:{index_type}\n// \uc608: search_rust:field_config:test-local-goods-ko:goods\n</code></pre> <p>\uce90\uc2dc \uad6c\uc870\uccb4\uc5d0\ub294 \uce90\uc2dc \uc0dd\uc131 \uc2dc\uac04\uc744 \ud3ec\ud568\ud574, TTL \uae30\ubc18\uc774 \uc544\ub2cc \uba85\uc2dc\uc801 \ubb34\ud6a8\ud654\uac00 \uac00\ub2a5\ud558\ub3c4\ub85d \ud588\ub2e4.</p> <pre><code>#[derive(Debug, Clone, Serialize, Deserialize)]\npub struct CachedIndexFields {\n    pub title_field: Vec&lt;String&gt;,\n    pub exact_fields: Vec&lt;String&gt;,\n    pub and_fields: Vec&lt;String&gt;,\n    pub or_fields: Vec&lt;String&gt;,\n    pub like_fields: Vec&lt;String&gt;,\n    pub analyze_fields: Vec&lt;String&gt;,\n    pub cached_at: u64,\n}\n</code></pre> <p><code>like_fields</code>\uc640 <code>analyze_fields</code>\ub294 \ud604\uc7ac \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc9c0\ub9cc \ud638\ud658\uc131\uc744 \uc704\ud574 \ub0a8\uaca8\ub450\uc5c8\ub2e4. \uc774\uc804 \ubc84\uc804\uc758 \uce90\uc2dc \ub370\uc774\ud130\uc640 \ud63c\uc7ac\ub420 \uc218 \uc788\ub294 \uc0c1\ud669\uc744 \uace0\ub824\ud55c \uacb0\uc815\uc774\ub2e4. \uc0c8\ub85c\uc6b4 \uc2dc\uc2a4\ud15c\uc744 \ubc30\ud3ec\ud560 \ub54c \uae30\uc874 \uce90\uc2dc\ub97c \uc804\ubd80 \uc0ad\uc81c\ud558\uc9c0 \uc54a\uc544\ub3c4 \ub418\ubbc0\ub85c \ubb34\uc911\ub2e8 \ubc30\ud3ec\uac00 \uac00\ub2a5\ud558\ub2e4.</p>","tags":["Rust","Axum","OpenSearch","\uac80\uc0c9API","Handlebars"]},{"location":"search-engine/Axum-OpenSearch-Rust-%EA%B2%80%EC%83%89-API-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%84%A4%EA%B3%84/#aggregation","title":"Aggregation \ucc98\ub9ac","text":"<p>\ucee4\uba38\uc2a4 \uac80\uc0c9\uc5d0\uc11c Aggregation\uc740 \ud544\ud130 UI\ub97c \uad6c\uc131\ud558\ub294 \ub370 \ud544\uc218\uc801\uc774\ub2e4. \uce74\ud14c\uace0\ub9ac\ubcc4 \uc0c1\ud488 \uc218, \ube0c\ub79c\ub4dc \ubaa9\ub85d, \uac00\uaca9 \ubc94\uc704, \ud560\uc778\uc728 \ubc94\uc704 \ub4f1\uc744 \uac80\uc0c9 \uacb0\uacfc\uc640 \ud568\uaed8 \ubc18\ud658\ud574\uc57c \ud55c\ub2e4.</p> <pre><code>pub fn process_aggregation_data(aggregations: &amp;Value) -&gt; Value {\n    let mut payload = json!({});\n\n    // \uce74\ud14c\uace0\ub9ac \ub370\uc774\ud130\n    payload[\"categoryDataList\"] = process_category_data(aggregations);\n\n    // \ub300\ubd84\ub958 \uce74\ud14c\uace0\ub9ac\n    payload[\"lrgCtgGrpData\"] = process_lrg_category_data(aggregations);\n\n    // \ube0c\ub79c\ub4dc \ub370\uc774\ud130\n    payload[\"brandDataList\"] = process_brand_data(aggregations);\n\n    // \uc5f0\uad00\uc5b4 \ub370\uc774\ud130\n    payload[\"assocwordDataList\"] = process_assocword_data(aggregations);\n\n    // \uac00\uaca9/\ud560\uc778\uc728 \ubc94\uc704\n    payload[\"minPrc\"] = process_min_prc(aggregations);\n    payload[\"maxPrc\"] = process_max_prc(aggregations);\n    payload[\"minDcRate\"] = process_min_dc_rate(aggregations);\n    payload[\"maxDcRate\"] = process_max_dc_rate(aggregations);\n\n    payload\n}\n</code></pre> <p>\uac01 Aggregation \ucc98\ub9ac \ud568\uc218\ub294 OpenSearch \uc751\ub2f5\uc758 \uc911\ucca9 \uad6c\uc870\ub97c \ud3c9\ud0c4\ud654\ud55c\ub2e4. \ud2b9\ud788 \uce74\ud14c\uace0\ub9ac \ub370\uc774\ud130\ub294 nested aggregation\uc73c\ub85c \ucc98\ub9ac\ub418\ub294\ub370, 3\ub2e8\uacc4 \uae4a\uc774\uc758 \uce74\ud14c\uace0\ub9ac \uad6c\uc870(\ub300\ubd84\ub958 \u2192 \uc911\ubd84\ub958 \u2192 \uc18c\ubd84\ub958)\ub97c \ud6a8\uc728\uc801\uc73c\ub85c \ucd94\ucd9c\ud574\uc57c \ud55c\ub2e4.</p> <pre><code>graph TD\n    A[\uac80\uc0c9 \uc751\ub2f5] --&gt; B[aggregations]\n    B --&gt; C[category]\n    B --&gt; D[brand]\n    B --&gt; E[price_stats]\n    B --&gt; F[dc_rate_stats]\n    C --&gt; C1[category_keyword buckets]\n    C1 --&gt; C2[\ub300\ubd84\ub958]\n    C2 --&gt; C3[\uc911\ubd84\ub958]\n    C3 --&gt; C4[\uc18c\ubd84\ub958]\n    D --&gt; D1[brand_keyword buckets]\n    E --&gt; E1[min_prc / max_prc]\n    F --&gt; F1[min_dc_rate / max_dc_rate]</code></pre> <p>Aggregation \ucc98\ub9ac\uc5d0\uc11c \uac00\uc7a5 \uae4c\ub2e4\ub85c\uc6b4 \ubd80\ubd84\uc740 nested \ud544\ub4dc\ub2e4. \ucee4\uba38\uc2a4 \ub370\uc774\ud130\uc5d0\uc11c \uce74\ud14c\uace0\ub9ac\ub294 \uc0c1\ud488 \ud558\ub098\uc5d0 \uc5ec\ub7ec \uac1c\uac00 \ub9e4\ud551\ub420 \uc218 \uc788\uc73c\ubbc0\ub85c nested \ud0c0\uc785\uc73c\ub85c \uc778\ub371\uc2f1\ud55c\ub2e4. \uc774\ub54c Aggregation\ub3c4 nested aggregation\uc73c\ub85c \uc791\uc131\ud574\uc57c \uc815\ud655\ud55c \uce74\uc6b4\ud2b8\uac00 \ub098\uc628\ub2e4.</p> <pre><code>{\n    \"nested\": {\n        \"path\": \"dispCtgNo\",\n        \"query\": {\n            \"terms\": {\n                \"dispCtgNo.lrgCtgNo.keyword\": [\"100\", \"200\"]\n            }\n        }\n    }\n}\n</code></pre>","tags":["Rust","Axum","OpenSearch","\uac80\uc0c9API","Handlebars"]},{"location":"search-engine/Axum-OpenSearch-Rust-%EA%B2%80%EC%83%89-API-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%84%A4%EA%B3%84/#_3","title":"\uc778\uae30 \uac80\uc0c9\uc5b4\uc640 \ucd94\ucc9c \uac80\uc0c9\uc5b4","text":"<p>\ucee4\uba38\uc2a4 \uac80\uc0c9\uc5d0\uc11c \uc778\uae30 \uac80\uc0c9\uc5b4(popupword)\uc640 \ucd94\ucc9c \uac80\uc0c9\uc5b4(recomword)\ub294 \uc77c\ubc18 \uac80\uc0c9\uacfc \ub2e4\ub978 \ucc98\ub9ac \ub85c\uc9c1\uc774 \ud544\uc694\ud558\ub2e4.</p> <p>\uc778\uae30 \uac80\uc0c9\uc5b4\ub294 \ucd5c\uadfc 48\uc2dc\uac04 \uc774\ub0b4\uc758 \uac80\uc0c9 \ub85c\uadf8\ub97c \uae30\ubc18\uc73c\ub85c \uc9d1\uacc4\ud55c\ub2e4. OpenSearch\uc758 terms aggregation\uacfc date range filter\ub97c \uacb0\ud569\ud558\uc5ec \uc2e4\uc2dc\uac04\uc5d0 \uac00\uae4c\uc6b4 \uc778\uae30 \uac80\uc0c9\uc5b4\ub97c \ucd94\ucd9c\ud55c\ub2e4.</p> <pre><code>fn process_popupword_result(search_result: &amp;Value) -&gt; Result&lt;Value, Box&lt;dyn Error + Send + Sync&gt;&gt; {\n    let aggregations = search_result\n        .get(\"aggregations\")\n        .ok_or(\"No aggregations found\")?;\n\n    let popular_terms = aggregations\n        .get(\"popular_terms\")\n        .and_then(|v| v.get(\"buckets\"))\n        .and_then(|v| v.as_array())\n        .ok_or(\"No popular terms found\")?;\n\n    // \ubc84\ud0b7\uc744 \uc21c\uc704 \ud615\ud0dc\ub85c \ubcc0\ud658\n    let ranked_terms: Vec&lt;Value&gt; = popular_terms.iter()\n        .enumerate()\n        .map(|(rank, bucket)| {\n            json!({\n                \"rank\": rank + 1,\n                \"keyword\": bucket[\"key\"],\n                \"count\": bucket[\"doc_count\"]\n            })\n        })\n        .collect();\n\n    Ok(json!({ \"popularTerms\": ranked_terms }))\n}\n</code></pre> <p>\ucd94\ucc9c \uac80\uc0c9\uc5b4\ub294 \uac80\uc0c9\uc5b4 \uc785\ub825 \uc911 \uc790\ub3d9 \uc644\uc131(autocomplete)\uc5d0 \uc0ac\uc6a9\ub41c\ub2e4. prefix \ucffc\ub9ac\uc640 completion suggester\ub97c \uc870\ud569\ud558\uc5ec \ud0c0\uc774\ud551\ud558\ub294 \ub3d9\uc548 \uc2e4\uc2dc\uac04\uc73c\ub85c \ud6c4\ubcf4\ub97c \uc81c\uacf5\ud55c\ub2e4. \uc774 \ubd80\ubd84\uc740 \uc751\ub2f5 \uc2dc\uac04\uc774 50ms \uc774\ub0b4\uc5ec\uc57c \uc0ac\uc6a9\uc790 \uacbd\ud5d8\uc5d0 \uc601\ud5a5\uc744 \uc8fc\uc9c0 \uc54a\uc73c\ubbc0\ub85c, Redis \uce90\uc2f1\uc744 \uc801\uadf9\uc801\uc73c\ub85c \ud65c\uc6a9\ud588\ub2e4.</p>","tags":["Rust","Axum","OpenSearch","\uac80\uc0c9API","Handlebars"]},{"location":"search-engine/Axum-OpenSearch-Rust-%EA%B2%80%EC%83%89-API-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%84%A4%EA%B3%84/#_4","title":"\uac80\uc0c9 \uacb0\uacfc \ud6c4\ucc98\ub9ac","text":"<p>OpenSearch\uc5d0\uc11c \ubc18\ud658\ub41c \uc6d0\uc2dc \uacb0\uacfc\ub97c API \uc751\ub2f5\uc73c\ub85c \ubcc0\ud658\ud558\ub294 \uacfc\uc815\uc5d0\uc11c \uba87 \uac00\uc9c0 \ud6c4\ucc98\ub9ac\ub97c \uc218\ud589\ud55c\ub2e4.</p> <pre><code>fn process_regular_search_result(\n    payload: &amp;mut serde_json::Map&lt;String, Value&gt;,\n    search_result: &amp;Value,\n) -&gt; Result&lt;(), Box&lt;dyn Error + Send + Sync&gt;&gt; {\n    // \uc804\uccb4 \ud788\ud2b8 \uc218 \ucd94\ucd9c\n    let total_hits = search_result\n        .pointer(\"/hits/total/value\")\n        .and_then(|v| v.as_u64())\n        .unwrap_or(0);\n\n    payload.insert(\"totalCount\".to_string(), json!(total_hits));\n\n    // \ud788\ud2b8 \ubaa9\ub85d\uc5d0\uc11c _source\ub9cc \ucd94\ucd9c\n    let hits = search_result\n        .pointer(\"/hits/hits\")\n        .and_then(|v| v.as_array())\n        .map(|hits| {\n            hits.iter()\n                .map(|hit| {\n                    let mut source = hit[\"_source\"].clone();\n                    // \uc2a4\ucf54\uc5b4 \uc8fc\uc785\n                    if let Some(score) = hit.get(\"_score\") {\n                        source[\"_score\"] = score.clone();\n                    }\n                    source\n                })\n                .collect::&lt;Vec&lt;_&gt;&gt;()\n        })\n        .unwrap_or_default();\n\n    payload.insert(\"goodsList\".to_string(), json!(hits));\n    Ok(())\n}\n</code></pre> <p><code>_score</code>\ub97c \uacb0\uacfc\uc5d0 \ud3ec\ud568\uc2dc\ud0a4\ub294 \uc774\uc720\ub294 \ud504\ub860\ud2b8\uc5d4\ub4dc\uc5d0\uc11c \ub514\ubc84\uae45\uacfc \uac80\uc0c9 \ud488\uc9c8 \ubaa8\ub2c8\ud130\ub9c1\uc5d0 \ud65c\uc6a9\ud558\uae30 \uc704\ud568\uc774\ub2e4. \ud504\ub85c\ub355\uc158\uc5d0\uc11c\ub294 \ub178\ucd9c\ud558\uc9c0 \uc54a\uc9c0\ub9cc, \uc2a4\ud14c\uc774\uc9d5 \ud658\uacbd\uc5d0\uc11c \uac80\uc0c9 \ud488\uc9c8\uc744 \ud29c\ub2dd\ud560 \ub54c \uac01 \uacb0\uacfc\uc758 \uc2a4\ucf54\uc5b4\ub97c \ud655\uc778\ud558\ub294 \uac83\uc774 \ub9e4\uc6b0 \uc720\uc6a9\ud558\ub2e4.</p>","tags":["Rust","Axum","OpenSearch","\uac80\uc0c9API","Handlebars"]},{"location":"search-engine/Axum-OpenSearch-Rust-%EA%B2%80%EC%83%89-API-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%84%A4%EA%B3%84/#_5","title":"\ud15c\ud50c\ub9bf \uc5d4\uc9c4 \ucd5c\uc801\ud654","text":"<p>Handlebars \uc778\uc2a4\ud134\uc2a4\ub294 <code>once_cell</code>\uc744 \uc0ac\uc6a9\ud574 \uc804\uc5ed \uc2f1\uae00\ud1a4\uc73c\ub85c \uad00\ub9ac\ud55c\ub2e4. \ud15c\ud50c\ub9bf \ud30c\uc77c\uc740 \ud504\ub85c\uadf8\ub7a8 \uc2dc\uc791 \uc2dc \ud55c \ubc88\ub9cc \ub85c\ub4dc\ud558\uace0 \ucef4\ud30c\uc77c\ud55c\ub2e4.</p> <pre><code>use once_cell::sync::Lazy;\n\nstatic HANDLEBARS: Lazy&lt;Handlebars&lt;'static&gt;&gt; = Lazy::new(|| {\n    let mut hbs = Handlebars::new();\n\n    // \ucee4\uc2a4\ud140 \ud5ec\ud37c \ub4f1\ub85d\n    hbs.register_helper(\"json\", Box::new(json_helper));\n\n    // \ud15c\ud50c\ub9bf \ud30c\uc77c \ub4f1\ub85d\n    hbs.register_template_file(\"goods_search\", \"src/templates/goods_search_template.hbs\")\n        .expect(\"Failed to register goods search template\");\n    hbs.register_template_file(\"marketing_search\", \"src/templates/marketing_search_template.hbs\")\n        .expect(\"Failed to register marketing search template\");\n    hbs.register_template_file(\"event_search\", \"src/templates/event_search_template.hbs\")\n        .expect(\"Failed to register event search template\");\n\n    hbs\n});\n</code></pre> <p>\ucee4\uc2a4\ud140 <code>json</code> \ud5ec\ud37c\ub294 Rust\uc758 Vec\uc744 JSON \ubc30\uc5f4 \ubb38\uc790\uc5f4\ub85c \ubcc0\ud658\ud558\ub294 \uc5ed\ud560\uc744 \ud55c\ub2e4. Handlebars\uc758 \uae30\ubcf8 \ucd9c\ub825\uc740 HTML \uc774\uc2a4\ucf00\uc774\ud504\uac00 \uc801\uc6a9\ub418\ubbc0\ub85c, JSON \uad6c\uc870\ub97c \uc62c\ubc14\ub974\uac8c \ucd9c\ub825\ud558\uae30 \uc704\ud574\uc11c\ub294 \ubcc4\ub3c4\uc758 \ud5ec\ud37c\uac00 \ud544\uc694\ud558\ub2e4.</p> <p>\ud15c\ud50c\ub9bf\uc5d0\uc11c \uc778\ub371\uc2a4 \ud0c0\uc785\ubcc4\ub85c \uc5b4\ub5a4 \ud15c\ud50c\ub9bf\uc744 \uc0ac\uc6a9\ud560\uc9c0 \uacb0\uc815\ud558\ub294 \ub85c\uc9c1\ub3c4 \ubd84\ub9ac\ud588\ub2e4.</p> <pre><code>pub fn get_template_name(index_name: &amp;str) -&gt; &amp;str {\n    let index_type = extract_index_type(index_name);\n    match index_type.as_str() {\n        \"goods\" =&gt; \"goods_search\",\n        \"marketing\" =&gt; \"marketing_search\",\n        \"event\" =&gt; \"event_search\",\n        \"popupword\" =&gt; \"popupword_search\",\n        \"recomword\" =&gt; \"recomword_search\",\n        _ =&gt; \"field_search\",  // \ubc94\uc6a9 \uac80\uc0c9 \ud15c\ud50c\ub9bf\n    }\n}\n</code></pre> <p>\uc778\ub371\uc2a4 \uc774\ub984\uc5d0\uc11c \ud0c0\uc785\uc744 \ucd94\ucd9c\ud558\ub294 \uaddc\uce59\uc740 <code>{project}-{env}-{type}-{lang}</code> \ud615\ud0dc\ub2e4. \uc608\ub97c \ub4e4\uc5b4 <code>test-local-goods-ko</code>\uc5d0\uc11c <code>goods</code>\ub97c \ucd94\ucd9c\ud55c\ub2e4. \uc774 \ub124\uc774\ubc0d \ucee8\ubca4\uc158\uc740 OpenSearch \uc778\ub371\uc2a4 \uad00\ub9ac\uc758 \ud575\uc2ec\uc73c\ub85c, \ud558\ub098\uc758 \ucf54\ub4dc\ubca0\uc774\uc2a4\ub85c \uc5ec\ub7ec \ud504\ub85c\uc81d\ud2b8\uc640 \ud658\uacbd\uc744 \ucc98\ub9ac\ud560 \uc218 \uc788\uac8c \ud574\uc900\ub2e4.</p>","tags":["Rust","Axum","OpenSearch","\uac80\uc0c9API","Handlebars"]},{"location":"search-engine/Axum-OpenSearch-Rust-%EA%B2%80%EC%83%89-API-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%84%A4%EA%B3%84/#_6","title":"\uc5d0\ub7ec \ud578\ub4e4\ub9c1\uacfc \uc751\ub2f5 \ud3ec\ub9f7","text":"<p>\ubaa8\ub4e0 \uac80\uc0c9 API\ub294 \ud1b5\uc77c\ub41c \uc751\ub2f5 \ud3ec\ub9f7\uc744 \uc0ac\uc6a9\ud55c\ub2e4.</p> <pre><code>pub struct ApiResponse {\n    pub timestamp: String,\n    pub code: String,       // \"0000\" = \uc131\uacf5\n    pub message: String,\n    pub payload: Value,\n    pub error: bool,\n}\n</code></pre> <p>\uc131\uacf5 \uc2dc <code>code</code>\ub294 \"0000\", \uc5d0\ub7ec \uc2dc\uc5d0\ub294 HTTP \uc0c1\ud0dc \ucf54\ub4dc\uc5d0 \ub300\uc751\ud558\ub294 \ubb38\uc790\uc5f4(\"4000\", \"5000\" \ub4f1)\uc744 \uc0ac\uc6a9\ud55c\ub2e4. \uc774 \uaddc\uce59\uc740 NestJS \ubc84\uc804\uacfc\uc758 \ud558\uc704 \ud638\ud658\uc131\uc744 \uc720\uc9c0\ud558\uae30 \uc704\ud55c \uac83\uc774\ub2e4.</p> <p>\uac80\uc0c9\uc5d0\uc11c \uacb0\uacfc\uac00 0\uac74\uc778 \uacbd\uc6b0\ub294 \uc5d0\ub7ec\uac00 \uc544\ub2c8\ub2e4. \ube48 <code>payload</code>\uc640 <code>totalCount: 0</code>\uc744 \ubc18\ud658\ud55c\ub2e4. \ubc18\uba74, OpenSearch \uc5f0\uacb0 \uc2e4\ud328\ub098 \ucffc\ub9ac \ud30c\uc2f1 \uc5d0\ub7ec\ub294 500 \uc5d0\ub7ec\ub85c \ucc98\ub9ac\ud55c\ub2e4. \uc774 \uad6c\ubd84\uc740 \ud504\ub860\ud2b8\uc5d4\ub4dc\uc5d0\uc11c \"\uac80\uc0c9 \uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4\"\uc640 \"\uc11c\ube44\uc2a4 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4\"\ub97c \uc62c\ubc14\ub974\uac8c \ud45c\uc2dc\ud558\ub294 \ub370 \uc911\uc694\ud558\ub2e4.</p>","tags":["Rust","Axum","OpenSearch","\uac80\uc0c9API","Handlebars"]},{"location":"search-engine/Axum-OpenSearch-Rust-%EA%B2%80%EC%83%89-API-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%84%A4%EA%B3%84/#_7","title":"\ubd80\ud558 \ud14c\uc2a4\ud2b8 \uacb0\uacfc","text":"<p>Axum + OpenSearch \uc870\ud569\uc758 \uc131\ub2a5\uc744 \uac80\uc99d\ud558\uae30 \uc704\ud574 \uac04\ub2e8\ud55c \ubd80\ud558 \ud14c\uc2a4\ud2b8\ub97c \uc9c4\ud589\ud588\ub2e4.</p> <p>\ud14c\uc2a4\ud2b8 \ud658\uacbd\uc740 4\ucf54\uc5b4 8GB RAM EC2 \uc778\uc2a4\ud134\uc2a4\uc5d0\uc11c OpenSearch \ub2e8\uc77c \ub178\ub4dc(8GB \ud799)\ub97c \uc0ac\uc6a9\ud588\ub2e4. \uac80\uc0c9 \ub300\uc0c1\uc740 \uc57d 50\ub9cc \uac74\uc758 \uc0c1\ud488 \ub370\uc774\ud130\ub2e4.</p> \uc9c0\ud45c NestJS \ubc84\uc804 Rust \ubc84\uc804 \ud3c9\uade0 \uc751\ub2f5 \uc2dc\uac04 (\ub2e8\uc21c \uac80\uc0c9) 45ms 28ms P99 \uc751\ub2f5 \uc2dc\uac04 220ms 85ms \ub3d9\uc2dc 100 \uc694\uccad \ucc98\ub9ac\ub7c9 850 req/s 2,100 req/s \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9 (idle) 180MB 12MB \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9 (peak) 520MB 45MB <p>\uac00\uc7a5 \ub208\uc5d0 \ub744\ub294 \ucc28\uc774\ub294 P99 \uc751\ub2f5 \uc2dc\uac04\uc774\ub2e4. NestJS \ubc84\uc804\uc5d0\uc11c 220ms\uc600\ub358 \uac83\uc774 Rust \ubc84\uc804\uc5d0\uc11c 85ms\ub85c 60% \uc774\uc0c1 \uac1c\uc120\ub418\uc5c8\ub2e4. \uc774 \ucc28\uc774\uc758 \ub300\ubd80\ubd84\uc740 Node.js\uc758 GC \uc77c\uc2dc\uc815\uc9c0\uc5d0\uc11c \ube44\ub86f\ub41c\ub2e4. \ud3c9\uade0 \uc751\ub2f5 \uc2dc\uac04\uc758 \ucc28\uc774(45ms vs 28ms)\ub294 \ub300\ubd80\ubd84 OpenSearch \uc790\uccb4\uc758 \ucc98\ub9ac \uc2dc\uac04\uc774\ubbc0\ub85c \uadf9\uc801\uc774\uc9c0 \uc54a\uc9c0\ub9cc, \uaf2c\ub9ac \ub808\uc774\ud134\uc2dc(tail latency)\uc5d0\uc11c\uc758 \uac1c\uc120\uc740 \uc0ac\uc6a9\uc790 \uacbd\ud5d8\uc5d0 \uc9c1\uc811\uc801\uc778 \uc601\ud5a5\uc744 \ubbf8\uce5c\ub2e4.</p> <p>\uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9 \ucc28\uc774\ub294 \ub354 \uadf9\uc801\uc774\ub2e4. idle \uc0c1\ud0dc\uc5d0\uc11c 180MB vs 12MB, \ud53c\ud06c\uc5d0\uc11c 520MB vs 45MB. \ub3d9\uc77c\ud55c \uc11c\ubc84\uc5d0\uc11c \ud6e8\uc52c \ub354 \ub9ce\uc740 \uc778\uc2a4\ud134\uc2a4\ub97c \uc6b4\uc601\ud560 \uc218 \uc788\ub2e4\ub294 \uc758\ubbf8\uc774\uba70, OOM\uc73c\ub85c \uc778\ud55c \uc11c\ube44\uc2a4 \uc911\ub2e8 \uc704\ud5d8\uc774 \uc0ac\uc2e4\uc0c1 \uc0ac\ub77c\uc84c\ub2e4.</p>","tags":["Rust","Axum","OpenSearch","\uac80\uc0c9API","Handlebars"]},{"location":"search-engine/Axum-OpenSearch-Rust-%EA%B2%80%EC%83%89-API-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%84%A4%EA%B3%84/#_8","title":"\uc124\uacc4 \uacb0\uc815\uc5d0\uc11c\uc758 \ud2b8\ub808\uc774\ub4dc\uc624\ud504","text":"<p>\ud15c\ud50c\ub9bf vs \ucffc\ub9ac \ube4c\ub354: Handlebars \ud15c\ud50c\ub9bf\uc740 \uac00\ub3c5\uc131\uc774 \ub6f0\uc5b4\ub098\uc9c0\ub9cc, \ubcf5\uc7a1\ud55c \uc870\uac74 \ubd84\uae30\uac00 \ub9ce\uc544\uc9c0\uba74 \ud15c\ud50c\ub9bf \uc790\uccb4\uac00 \uc77d\uae30 \uc5b4\ub824\uc6cc\uc9c4\ub2e4. \ud2b9\ud788 \uc911\ucca9 \ud544\ud130\uc640 Aggregation\uc774 \uacb0\ud569\ub418\ub294 \uacbd\uc6b0 Handlebars\uc758 \ud45c\ud604\ub825 \ud55c\uacc4\uac00 \ub4dc\ub7ec\ub09c\ub2e4. \uc774 \ubb38\uc81c\ub97c \uc644\ud654\ud558\uae30 \uc704\ud574 <code>query_builder.rs</code>\uc5d0\uc11c \ud15c\ud50c\ub9bf\uc5d0 \uc804\ub2ec\ud560 \ucee8\ud14d\uc2a4\ud2b8\ub97c \ubbf8\ub9ac \uac00\uacf5\ud558\ub294 \ubc29\uc2dd\uc744 \uc0ac\uc6a9\ud588\ub2e4. \ubcf5\uc7a1\ud55c \ub85c\uc9c1\uc740 Rust \ucf54\ub4dc\uc5d0, \ucffc\ub9ac \uad6c\uc870\ub294 \ud15c\ud50c\ub9bf\uc5d0 \ub450\ub294 \uc5ed\ud560 \ubd84\ub9ac\ub2e4.</p> <p>\ub3d9\uc801 \ud544\ub4dc \ubc1c\uacac vs \uba85\uc2dc\uc801 \uc124\uc815: \uc790\ub3d9\uc73c\ub85c \ud544\ub4dc\ub97c \ubc1c\uacac\ud558\ub294 \ubc29\uc2dd\uc740 \ud3b8\ub9ac\ud558\uc9c0\ub9cc, \uc758\ub3c4\ud558\uc9c0 \uc54a\uc740 \ud544\ub4dc\uac00 \uac80\uc0c9 \ub300\uc0c1\uc5d0 \ud3ec\ud568\ub420 \uc704\ud5d8\uc774 \uc788\ub2e4. \uc608\ub97c \ub4e4\uc5b4 \ub0b4\ubd80\uc6a9 \uba54\ud0c0 \ud544\ub4dc\uac00 \uac80\uc0c9 \uacb0\uacfc\uc5d0 \uc601\ud5a5\uc744 \uc904 \uc218 \uc788\ub2e4. \uc774\ub97c \ubc29\uc9c0\ud558\uae30 \uc704\ud574 \ube14\ub799\ub9ac\uc2a4\ud2b8 \ud328\ud134\uc744 \uc801\uc6a9\ud588\uace0, \ud544\ub4dc \ubd84\ub958 \ub85c\uc9c1\uc5d0 <code>_internal_</code>, <code>_meta_</code> \uc811\ub450\uc0ac\ub97c \uac00\uc9c4 \ud544\ub4dc\ub97c \uc81c\uc678\ud558\ub294 \uaddc\uce59\uc744 \ucd94\uac00\ud588\ub2e4.</p> <p>\uce90\uc2dc \ubb34\ud6a8\ud654 \uc804\ub7b5: \uc778\ub371\uc2a4 \ub9e4\ud551\uc774 \ubcc0\uacbd\ub418\uba74 \uce90\uc2dc\ub97c \ubb34\ud6a8\ud654\ud574\uc57c \ud55c\ub2e4. \ud604\uc7ac\ub294 \uc778\ub371\uc2f1 \uc11c\ube44\uc2a4\uc5d0\uc11c \uc778\ub371\uc2a4\ub97c \uc7ac\uc0dd\uc131\ud560 \ub54c \uba85\uc2dc\uc801\uc73c\ub85c \uce90\uc2dc\ub97c \uc0ad\uc81c\ud558\ub294 \ubc29\uc2dd\uc744 \uc0ac\uc6a9\ud55c\ub2e4. TTL \uae30\ubc18 \ubb34\ud6a8\ud654\ub3c4 \uace0\ub824\ud588\uc73c\ub098, \ub9e4\ud551 \ubcc0\uacbd\uc774 \ube48\ubc88\ud558\uc9c0 \uc54a\uace0 \uce90\uc2dc \ubd88\uc77c\uce58\uac00 \uac80\uc0c9 \ud488\uc9c8\uc5d0 \uc2ec\uac01\ud55c \uc601\ud5a5\uc744 \ubbf8\uce60 \uc218 \uc788\uc5b4 \uba85\uc2dc\uc801 \ubb34\ud6a8\ud654\ub97c \uc120\ud0dd\ud588\ub2e4.</p>","tags":["Rust","Axum","OpenSearch","\uac80\uc0c9API","Handlebars"]},{"location":"search-engine/Axum-OpenSearch-Rust-%EA%B2%80%EC%83%89-API-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%84%A4%EA%B3%84/#_9","title":"\uacb0\uacfc\uc640 \ud68c\uace0","text":"<p>Axum + OpenSearch + Handlebars \uc870\ud569\uc740 \ucee4\uba38\uc2a4 \uac80\uc0c9 API\uc5d0 \ub9e4\uc6b0 \uc801\ud569\ud588\ub2e4. \ud2b9\ud788 Handlebars \ud15c\ud50c\ub9bf\uc740 \uac80\uc0c9 \ud488\uc9c8 \ud29c\ub2dd \uacfc\uc815\uc5d0\uc11c \ube5b\uc744 \ubc1c\ud588\ub2e4. \uac00\uc911\uce58\ub97c \uc870\uc815\ud558\uac70\ub098 \uc0c8\ub85c\uc6b4 \ucffc\ub9ac \uc804\ub7b5\uc744 \ud14c\uc2a4\ud2b8\ud560 \ub54c \ucf54\ub4dc \ubcc0\uacbd \uc5c6\uc774 \ud15c\ud50c\ub9bf\ub9cc \uc218\uc815\ud558\uba74 \ub418\ubbc0\ub85c, \uc2e4\ud5d8 \uc8fc\uae30\uac00 \ud06c\uac8c \ub2e8\ucd95\ub418\uc5c8\ub2e4.</p> <p>\ub3d9\uc801 \ud544\ub4dc \ubc1c\uacac \uc2dc\uc2a4\ud15c\uc740 \uc608\uc0c1\ubcf4\ub2e4 \ub354 \uc720\uc6a9\ud588\ub2e4. \uc0c8\ub85c\uc6b4 \ucee4\uba38\uc2a4 \uace0\uac1d\uc0ac\ub97c \uc628\ubcf4\ub529\ud560 \ub54c, \uc778\ub371\uc2a4 \ub9e4\ud551\ub9cc \uc815\uc758\ud558\uba74 \uac80\uc0c9 API\uac00 \uc790\ub3d9\uc73c\ub85c \uc801\uc751\ud55c\ub2e4. NestJS \ubc84\uc804\uc5d0\uc11c\ub294 \uace0\uac1d\uc0ac\ubcc4\ub85c \ucffc\ub9ac \ube4c\ub354\ub97c \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5\ud574\uc57c \ud588\ub358 \uac83\uacfc \ube44\uad50\ud558\uba74 \uc6b4\uc601 \ube44\uc6a9\uc774 \ud06c\uac8c \uc904\uc5c8\ub2e4.</p> <p>\ub0a8\uc740 \uacfc\uc81c\ub294 \ucffc\ub9ac \uc131\ub2a5\uc758 \uc790\ub3d9 \ubaa8\ub2c8\ud130\ub9c1\uc774\ub2e4. \ud604\uc7ac\ub294 \uc2ac\ub85c\uc6b0 \ucffc\ub9ac\ub97c \uc218\ub3d9\uc73c\ub85c \ud655\uc778\ud558\ub294\ub370, OpenSearch\uc758 \uc2ac\ub85c\uc6b0 \ub85c\uadf8\uc640 \uc5f0\ub3d9\ud558\uc5ec \uc790\ub3d9\uc73c\ub85c \uc54c\ub9bc\uc744 \ubc1c\uc0dd\uc2dc\ud0a4\ub294 \uc2dc\uc2a4\ud15c\uc744 \uad6c\ucd95\ud560 \uc608\uc815\uc774\ub2e4.</p>","tags":["Rust","Axum","OpenSearch","\uac80\uc0c9API","Handlebars"]},{"location":"search-engine/OpenSearch-%EC%9D%B8%EB%8D%B1%EC%8B%B1-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-vs-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EB%B9%84%EA%B5%90/","title":"OpenSearch \uc778\ub371\uc2f1 \uc11c\ube44\uc2a4: \uc2a4\ud2b8\ub9ac\ubc0d vs \ubc30\uce58 \ucc98\ub9ac \ube44\uad50","text":"","tags":["Rust","OpenSearch","\uc778\ub371\uc2f1","\uc2a4\ud2b8\ub9ac\ubc0d","\ubc30\uce58\ucc98\ub9ac","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/OpenSearch-%EC%9D%B8%EB%8D%B1%EC%8B%B1-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-vs-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EB%B9%84%EA%B5%90/#opensearch-vs","title":"OpenSearch \uc778\ub371\uc2f1 \uc11c\ube44\uc2a4: \uc2a4\ud2b8\ub9ac\ubc0d vs \ubc30\uce58 \ucc98\ub9ac \ube44\uad50","text":"","tags":["Rust","OpenSearch","\uc778\ub371\uc2f1","\uc2a4\ud2b8\ub9ac\ubc0d","\ubc30\uce58\ucc98\ub9ac","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/OpenSearch-%EC%9D%B8%EB%8D%B1%EC%8B%B1-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-vs-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EB%B9%84%EA%B5%90/#_1","title":"\uac1c\uc694","text":"<p>\ucee4\uba38\uc2a4 \uac80\uc0c9 \uc5d4\uc9c4\uc744 \uc6b4\uc601\ud558\uba74\uc11c \uac00\uc7a5 \ud070 \ubcd1\ubaa9 \uc911 \ud558\ub098\ub294 \uc778\ub371\uc2f1 \ud30c\uc774\ud504\ub77c\uc778\uc774\uc5c8\ub2e4. \uc0c1\ud488 \ub370\uc774\ud130\ub97c PostgreSQL\uc5d0\uc11c \uc870\ud68c\ud558\uc5ec OpenSearch\uc5d0 \uc0c9\uc778\ud558\ub294 \uacfc\uc815\uc5d0\uc11c, \ucd08\uae30\uc5d0\ub294 \uc804\uccb4 \ub370\uc774\ud130\ub97c \uba54\ubaa8\ub9ac\uc5d0 \uc801\uc7ac\ud55c \ub4a4 \uace0\uc815 \ud06c\uae30 \ubc30\uce58\ub85c \ub098\ub204\uc5b4 \ubc8c\ud06c \uc778\ub371\uc2f1\ud558\ub294 \ubc29\uc2dd\uc744 \uc0ac\uc6a9\ud588\ub2e4. \uc218\ucc9c \uac74 \uc218\uc900\uc5d0\uc11c\ub294 \ubb38\uc81c\uac00 \uc5c6\uc5c8\uc9c0\ub9cc, \uc218\ub9cc~\uc218\uc2ed\ub9cc \uac74\uc758 \uc0c1\ud488 \ub370\uc774\ud130\ub97c \ucc98\ub9ac\ud558\uac8c \ub418\uba74\uc11c \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9\uacfc \ucc98\ub9ac \uc2dc\uac04\uc774 \uc120\ud615\uc801\uc73c\ub85c \uc99d\uac00\ud588\ub2e4.</p> <p>\uc774 \uae00\uc5d0\uc11c\ub294 \uae30\uc874 \ubc30\uce58 \ucc98\ub9ac \ubc29\uc2dd\uc758 \ud55c\uacc4\ub97c \ubd84\uc11d\ud558\uace0, \uc2a4\ud2b8\ub9ac\ubc0d \ubc29\uc2dd\uc73c\ub85c \uc804\ud658\ud55c \uacfc\uc815, \uadf8\ub9ac\uace0 3\ub2e8\uacc4 \ud1b5\ud569 \ubc30\uce58 \uc624\ucf00\uc2a4\ud2b8\ub808\uc774\ud130\ub97c \uc124\uacc4\ud55c \uacbd\ud5d8\uc744 \ub2e4\ub8ec\ub2e4.</p>","tags":["Rust","OpenSearch","\uc778\ub371\uc2f1","\uc2a4\ud2b8\ub9ac\ubc0d","\ubc30\uce58\ucc98\ub9ac","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/OpenSearch-%EC%9D%B8%EB%8D%B1%EC%8B%B1-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-vs-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EB%B9%84%EA%B5%90/#_2","title":"\uae30\uc874 \ubc30\uce58 \ucc98\ub9ac \ubc29\uc2dd\uc758 \ubb38\uc81c\uc810","text":"","tags":["Rust","OpenSearch","\uc778\ub371\uc2f1","\uc2a4\ud2b8\ub9ac\ubc0d","\ubc30\uce58\ucc98\ub9ac","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/OpenSearch-%EC%9D%B8%EB%8D%B1%EC%8B%B1-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-vs-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EB%B9%84%EA%B5%90/#_3","title":"\uae30\uc874 \ud750\ub984","text":"<pre><code>sequenceDiagram\n    participant API as API \uc694\uccad\n    participant DB as PostgreSQL\n    participant MEM as \uba54\ubaa8\ub9ac\n    participant OS as OpenSearch\n\n    API-&gt;&gt;DB: SELECT * FROM goods (\uc804\uccb4 \uc870\ud68c)\n    DB--&gt;&gt;MEM: \uc804\uccb4 \ub370\uc774\ud130 \ub85c\ub4dc\n    MEM-&gt;&gt;MEM: \uace0\uc815 \ud06c\uae30 \ubc30\uce58\ub85c \ubd84\ud560\n    loop \uac01 \ubc30\uce58\n        MEM-&gt;&gt;OS: Bulk Index \uc694\uccad\n        OS--&gt;&gt;MEM: \uc751\ub2f5\n    end</code></pre> <p>\uae30\uc874 \ubc29\uc2dd\uc740 \ub2e8\uc21c\ud588\ub2e4. DB\uc5d0\uc11c \uc804\uccb4 \ub370\uc774\ud130\ub97c <code>Vec&lt;IndexingData&gt;</code>\ub85c \uac00\uc838\uc628 \ub4a4, \uace0\uc815 \ud06c\uae30(\uae30\ubcf8 5000\uac74)\ub85c \uc2ac\ub77c\uc774\uc2f1\ud558\uc5ec \uc21c\ucc28\uc801\uc73c\ub85c Bulk API\ub97c \ud638\ucd9c\ud588\ub2e4.</p> <p>\ubb38\uc81c\ub294 \uc5ec\ub7ec \uac00\uc9c0\uc600\ub2e4:</p> <ol> <li>\uba54\ubaa8\ub9ac \ud53c\ud06c: \uc804\uccb4 \ub370\uc774\ud130\ub97c \ud55c \ubc88\uc5d0 \uba54\ubaa8\ub9ac\uc5d0 \uc62c\ub824\uc57c \ud55c\ub2e4. \uc0c1\ud488 50\ub9cc \uac74\uc774\uba74 \uc218 GB\uac00 \ud544\uc694\ud558\ub2e4.</li> <li>\uc21c\ucc28 \ucc98\ub9ac: \ubc30\uce58 \ud558\ub098\uac00 \uc644\ub8cc\ub418\uc5b4\uc57c \ub2e4\uc74c \ubc30\uce58\ub97c \uc804\uc1a1\ud55c\ub2e4. OpenSearch\uc758 \ucc98\ub9ac \uc6a9\ub7c9\uc744 \uc81c\ub300\ub85c \ud65c\uc6a9\ud558\uc9c0 \ubabb\ud55c\ub2e4.</li> <li>\uc5d0\ub7ec \ubcf5\uad6c \uc5b4\ub824\uc6c0: \uc911\uac04\uc5d0 \uc2e4\ud328\ud558\uba74 \uc5b4\ub514\uae4c\uc9c0 \ucc98\ub9ac\ud588\ub294\uc9c0 \ucd94\uc801\uc774 \uc548 \ub41c\ub2e4.</li> <li>\uc218\ub3d9 \uc6b4\uc601: \ub370\uc774\ud130 \uc801\uc7ac(data-loading), \uc778\ub371\uc2f1(indexing), \uc644\ub8cc \ucc98\ub9ac(finalize)\ub97c \uac01\uac01 \ubcc4\ub3c4 API\ub85c \ud638\ucd9c\ud574\uc57c \ud588\ub2e4.</li> </ol>","tags":["Rust","OpenSearch","\uc778\ub371\uc2f1","\uc2a4\ud2b8\ub9ac\ubc0d","\ubc30\uce58\ucc98\ub9ac","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/OpenSearch-%EC%9D%B8%EB%8D%B1%EC%8B%B1-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-vs-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EB%B9%84%EA%B5%90/#_4","title":"\uc131\ub2a5 \ubcd1\ubaa9 \ubd84\uc11d","text":"<p>\ud504\ub85c\ud30c\uc77c\ub9c1 \uacb0\uacfc, \uc804\uccb4 \uc778\ub371\uc2f1 \uc2dc\uac04\uc758 \ubd84\ud3ec\ub294 \ub2e4\uc74c\uacfc \uac19\uc558\ub2e4:</p> <ul> <li>DB \uc870\ud68c: 20~30%</li> <li>\ub370\uc774\ud130 \uc9c1\ub82c\ud654(NDJSON \uc0dd\uc131): 10~15%</li> <li>OpenSearch Bulk \uc804\uc1a1 \ub300\uae30: 50~60%</li> <li>\uae30\ud0c0(\uc778\ub371\uc2a4 \uc0dd\uc131, \ub9e4\ud551 \ud655\uc778 \ub4f1): 5~10%</li> </ul> <p>Bulk \uc804\uc1a1 \ub300\uae30 \uc2dc\uac04\uc774 \uc808\ubc18 \uc774\uc0c1\uc744 \ucc28\uc9c0\ud588\ub2e4. \uc774 \uc2dc\uac04 \ub3d9\uc548 CPU\ub294 \uc720\ud734 \uc0c1\ud0dc\uc600\ub2e4. \ubcd1\ub82c \uc804\uc1a1\uc744 \ud1b5\ud574 \uc774 \uc720\ud734 \uc2dc\uac04\uc744 DB \uc870\ud68c\ub098 \ub2e4\uc74c \ubc30\uce58 \uc900\ube44\uc5d0 \ud65c\uc6a9\ud560 \uc218 \uc788\ub2e4.</p>","tags":["Rust","OpenSearch","\uc778\ub371\uc2f1","\uc2a4\ud2b8\ub9ac\ubc0d","\ubc30\uce58\ucc98\ub9ac","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/OpenSearch-%EC%9D%B8%EB%8D%B1%EC%8B%B1-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-vs-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EB%B9%84%EA%B5%90/#_5","title":"\uc2a4\ud2b8\ub9ac\ubc0d \ubc29\uc2dd \uc124\uacc4","text":"","tags":["Rust","OpenSearch","\uc778\ub371\uc2f1","\uc2a4\ud2b8\ub9ac\ubc0d","\ubc30\uce58\ucc98\ub9ac","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/OpenSearch-%EC%9D%B8%EB%8D%B1%EC%8B%B1-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-vs-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EB%B9%84%EA%B5%90/#_6","title":"\ud575\uc2ec \uc544\uc774\ub514\uc5b4","text":"<p>\uc2a4\ud2b8\ub9ac\ubc0d \ubc29\uc2dd\uc758 \ud575\uc2ec\uc740 \ud30c\uc774\ud504\ub77c\uc778 \ubcd1\ub82c\ud654\ub2e4. DB\uc5d0\uc11c \ub370\uc774\ud130\ub97c \uac00\uc838\uc624\ub294 \uac83\uacfc OpenSearch\uc5d0 \uc804\uc1a1\ud558\ub294 \uac83\uc744 \ub3d9\uc2dc\uc5d0 \uc218\ud589\ud55c\ub2e4.</p> <pre><code>graph LR\n    subgraph \"Producer (DB Fetch)\"\n        A[DB \ucffc\ub9ac] --&gt; B[Row \u2192 IndexingData \ubcc0\ud658]\n        B --&gt; C[mpsc \ucc44\ub110 \uc804\uc1a1]\n    end\n\n    subgraph \"Consumer (Bulk Index)\"\n        D[\ucc44\ub110 \uc218\uc2e0] --&gt; E[\uccad\ud06c \ubc84\ud37c\ub9c1]\n        E --&gt; F[NDJSON \uc0dd\uc131]\n        F --&gt; G[Bulk API \uc804\uc1a1]\n    end\n\n    C --&gt;|mpsc channel| D\n\n    subgraph \"\ub3d9\uc2dc\uc131 \uc81c\uc5b4\"\n        H[Semaphore]\n        I[FuturesUnordered]\n    end\n\n    G -.-&gt; H\n    G -.-&gt; I</code></pre> <p>Producer\ub294 DB\uc5d0\uc11c \ub370\uc774\ud130\ub97c \uc77d\uc5b4 <code>mpsc</code> \ucc44\ub110\ub85c \uc804\uc1a1\ud558\uace0, Consumer\ub294 \ucc44\ub110\uc5d0\uc11c \ub370\uc774\ud130\ub97c \ubc1b\uc544 \uccad\ud06c \ub2e8\uc704\ub85c \ubaa8\uc740 \ub4a4 Bulk API\ub97c \ud638\ucd9c\ud55c\ub2e4. \ub450 \uc791\uc5c5\uc774 \ub3d9\uc2dc\uc5d0 \uc9c4\ud589\ub418\ubbc0\ub85c, DB\uc5d0\uc11c \ub2e4\uc74c \ubc30\uce58\ub97c \uac00\uc838\uc624\ub294 \ub3d9\uc548 \uc774\uc804 \ubc30\uce58\uc758 Bulk \uc804\uc1a1\uc774 \ubcd1\ub82c\ub85c \uc218\ud589\ub41c\ub2e4.</p>","tags":["Rust","OpenSearch","\uc778\ub371\uc2f1","\uc2a4\ud2b8\ub9ac\ubc0d","\ubc30\uce58\ucc98\ub9ac","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/OpenSearch-%EC%9D%B8%EB%8D%B1%EC%8B%B1-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-vs-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EB%B9%84%EA%B5%90/#streamingbulkprocessor","title":"StreamingBulkProcessor \uad6c\ud604","text":"<p>\uc2a4\ud2b8\ub9ac\ubc0d \ucc98\ub9ac\uc758 \ud575\uc2ec \ucef4\ud3ec\ub10c\ud2b8\uc778 <code>StreamingBulkProcessor</code>\ub97c \uc124\uacc4\ud588\ub2e4.</p> <pre><code>pub struct StreamingConfig {\n    pub chunk_size: usize,       // \uccad\ud06c \ud06c\uae30 (\uae30\ubcf8 5000)\n    pub max_concurrent: usize,   // \ucd5c\ub300 \ub3d9\uc2dc Bulk \uc694\uccad \uc218\n    pub timeout_ms: u64,         // \uccad\ud06c \ud0c0\uc784\uc544\uc6c3 (ms)\n    pub max_retries: usize,      // \uc7ac\uc2dc\ub3c4 \ud69f\uc218\n}\n\nimpl Default for StreamingConfig {\n    fn default() -&gt; Self {\n        Self {\n            chunk_size: 5000,\n            max_concurrent: num_cpus::get().saturating_mul(2).min(16),\n            timeout_ms: 3000,\n            max_retries: 3,\n        }\n    }\n}\n\npub struct StreamingBulkProcessor {\n    client: Arc&lt;OpenSearch&gt;,\n    config: StreamingConfig,\n}\n</code></pre> <p><code>max_concurrent</code>\ub294 CPU \ucf54\uc5b4 \uc218\uc758 2\ubc30\ub85c \uc124\uc815\ud558\ub418 \ucd5c\ub300 16\uc73c\ub85c \uc81c\ud55c\ud55c\ub2e4. OpenSearch \ud074\ub7ec\uc2a4\ud130\uc758 Bulk \ucc98\ub9ac \uc6a9\ub7c9\uc744 \ucd08\uacfc\ud558\uc9c0 \uc54a\uc73c\uba74\uc11c \ud30c\uc774\ud504\ub77c\uc778\uc744 \ucd5c\ub300\ud55c \ud65c\uc6a9\ud558\uae30 \uc704\ud55c \uc124\uc815\uc774\ub2e4.</p>","tags":["Rust","OpenSearch","\uc778\ub371\uc2f1","\uc2a4\ud2b8\ub9ac\ubc0d","\ubc30\uce58\ucc98\ub9ac","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/OpenSearch-%EC%9D%B8%EB%8D%B1%EC%8B%B1-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-vs-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EB%B9%84%EA%B5%90/#_7","title":"\uccad\ud06c \uc2a4\ud2b8\ub9bc \uc0dd\uc131","text":"<p><code>async-stream</code> \ud06c\ub808\uc774\ud2b8\ub97c \ud65c\uc6a9\ud558\uc5ec mpsc \ucc44\ub110\uc5d0\uc11c \ub370\uc774\ud130\ub97c \ubc1b\uc544 \uccad\ud06c \ub2e8\uc704\uc758 \uc2a4\ud2b8\ub9bc\uc744 \uc0dd\uc131\ud55c\ub2e4.</p> <pre><code>fn create_chunk_stream(\n    mut rx: mpsc::Receiver&lt;IndexingData&gt;,\n    config: StreamingConfig,\n) -&gt; impl futures::Stream&lt;Item = Vec&lt;IndexingData&gt;&gt; {\n    async_stream::stream! {\n        let mut buffer = Vec::with_capacity(config.chunk_size);\n        loop {\n            match tokio::time::timeout(\n                Duration::from_millis(config.timeout_ms),\n                rx.recv()\n            ).await {\n                Ok(Some(data)) =&gt; {\n                    buffer.push(data);\n                    if buffer.len() &gt;= config.chunk_size {\n                        yield std::mem::take(&amp;mut buffer);\n                    }\n                }\n                Ok(None) =&gt; {\n                    // \ucc44\ub110 \ub2eb\ud798 - \ub0a8\uc740 \ub370\uc774\ud130 \ud50c\ub7ec\uc2dc\n                    if !buffer.is_empty() {\n                        yield std::mem::take(&amp;mut buffer);\n                    }\n                    break;\n                }\n                Err(_) =&gt; {\n                    // \ud0c0\uc784\uc544\uc6c3 - \ud604\uc7ac \ubc84\ud37c \ud50c\ub7ec\uc2dc\n                    if !buffer.is_empty() {\n                        yield std::mem::take(&amp;mut buffer);\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre> <p>\uc774 \uad6c\ud604\uc5d0\uc11c \ud0c0\uc784\uc544\uc6c3 \uba54\ucee4\ub2c8\uc998\uc774 \uc911\uc694\ud55c \uc5ed\ud560\uc744 \ud55c\ub2e4. DB \uc870\ud68c\uac00 \ub290\ub824\uc11c \ub370\uc774\ud130\uac00 \ucc9c\ucc9c\ud788 \ub4e4\uc5b4\uc624\ub294 \uacbd\uc6b0, \uccad\ud06c\uac00 <code>chunk_size</code>\uc5d0 \ub3c4\ub2ec\ud558\uc9c0 \ubabb\ud574\ub3c4 <code>timeout_ms</code> \uc774\ud6c4\uc5d0 \ud604\uc7ac\uae4c\uc9c0 \ubaa8\uc778 \ub370\uc774\ud130\ub97c \ud50c\ub7ec\uc2dc\ud55c\ub2e4. \uc774\ub97c \ud1b5\ud574 \uc791\uc740 \ubc30\uce58\ub77c\ub3c4 \ube68\ub9ac OpenSearch\uc5d0 \uc804\uc1a1\ud558\uc5ec \uc804\uccb4 \ucc98\ub9ac \uc2dc\uac04\uc744 \ub2e8\ucd95\ud55c\ub2e4.</p> <p><code>std::mem::take</code>\ub97c \uc0ac\uc6a9\ud558\uc5ec \ubc84\ud37c\ub97c \ube44\uc6b0\uba74\uc11c \uc18c\uc720\uad8c\uc744 \uc774\ub3d9\uc2dc\ud0a4\ub294 \ud328\ud134\ub3c4 \uc8fc\ubaa9\ud560 \ub9cc\ud558\ub2e4. \uc0c8 \ubca1\ud130\ub97c \ud560\ub2f9\ud558\uc9c0 \uc54a\uace0 \uae30\uc874 \ubca1\ud130\ub97c \uc7ac\uc0ac\uc6a9\ud558\ubbc0\ub85c \uba54\ubaa8\ub9ac \ud560\ub2f9 \uc624\ubc84\ud5e4\ub4dc\uac00 \uc904\uc5b4\ub4e0\ub2e4.</p>","tags":["Rust","OpenSearch","\uc778\ub371\uc2f1","\uc2a4\ud2b8\ub9ac\ubc0d","\ubc30\uce58\ucc98\ub9ac","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/OpenSearch-%EC%9D%B8%EB%8D%B1%EC%8B%B1-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-vs-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EB%B9%84%EA%B5%90/#semaphore","title":"Semaphore \uae30\ubc18 \ub3d9\uc2dc\uc131 \uc81c\uc5b4","text":"<p>\ub3d9\uc2dc Bulk \uc694\uccad \uc218\ub97c \uc81c\uc5b4\ud558\uae30 \uc704\ud574 tokio\uc758 <code>Semaphore</code>\ub97c \uc0ac\uc6a9\ud588\ub2e4.</p> <pre><code>pub async fn process_data_stream(\n    &amp;self,\n    rx: mpsc::Receiver&lt;IndexingData&gt;,\n) -&gt; Result&lt;usize, AppError&gt; {\n    let semaphore = Arc::new(Semaphore::new(self.config.max_concurrent));\n    let mut tasks = FuturesUnordered::new();\n    let mut total_processed = 0;\n    let mut total_lost = 0;\n\n    let chunk_stream = Self::create_chunk_stream(rx, self.config.clone());\n    tokio::pin!(chunk_stream);\n\n    loop {\n        tokio::select! {\n            biased;\n            permit = semaphore.clone().acquire_owned() =&gt; {\n                if let Some(chunk) = chunk_stream.next().await {\n                    let client = client.clone();\n                    let config = config.clone();\n                    tasks.push(tokio::spawn(async move {\n                        let result = Self::process_chunk(client, chunk, config).await;\n                        drop(permit);\n                        result\n                    }));\n                } else {\n                    break;\n                }\n            },\n            Some(result) = tasks.next() =&gt; {\n                match result {\n                    Ok(Ok((processed, failed_items))) =&gt; {\n                        total_processed += processed;\n                        if !failed_items.is_empty() {\n                            total_lost += failed_items.len();\n                        }\n                    },\n                    Ok(Err(failed_chunk)) =&gt; {\n                        total_lost += failed_chunk.len();\n                    },\n                    Err(e) =&gt; {\n                        log::error!(\"Task join error: {}\", e);\n                    }\n                }\n            },\n        }\n    }\n\n    // \ub0a8\uc740 \ud0dc\uc2a4\ud06c \ub300\uae30\n    while let Some(result) = tasks.next().await {\n        // ... \uacb0\uacfc \ucc98\ub9ac\n    }\n\n    Ok(total_processed)\n}\n</code></pre> <p><code>tokio::select!</code>\uc758 <code>biased</code> \ud0a4\uc6cc\ub4dc\ub97c \uc0ac\uc6a9\ud558\uc5ec Semaphore permit \ud68d\ub4dd\uc744 \uc6b0\uc120\uc801\uc73c\ub85c \ucc98\ub9ac\ud55c\ub2e4. \uc774\ub97c \ud1b5\ud574 \ub3d9\uc2dc \ucc98\ub9ac \uc2ac\ub86f\uc774 \ube44\ub294 \uc989\uc2dc \uc0c8\ub85c\uc6b4 \uccad\ud06c\ub97c \uac00\uc838\uc640 \ucc98\ub9ac\ub97c \uc2dc\uc791\ud55c\ub2e4. <code>FuturesUnordered</code>\ub294 \uc644\ub8cc\ub41c \ud0dc\uc2a4\ud06c\ub97c \uc21c\uc11c\uc5d0 \uad00\uacc4\uc5c6\uc774 \ucc98\ub9ac\ud558\ubbc0\ub85c, \uc5b4\ub5a4 \uccad\ud06c\uac00 \uba3c\uc800 \ub05d\ub098\ub4e0 \uc989\uc2dc \uacb0\uacfc\ub97c \uc218\uc9d1\ud55c\ub2e4.</p>","tags":["Rust","OpenSearch","\uc778\ub371\uc2f1","\uc2a4\ud2b8\ub9ac\ubc0d","\ubc30\uce58\ucc98\ub9ac","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/OpenSearch-%EC%9D%B8%EB%8D%B1%EC%8B%B1-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-vs-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EB%B9%84%EA%B5%90/#_8","title":"\ub370\uc774\ud130 \ubb34\uacb0\uc131 \ubcf4\uc7a5","text":"<p>\uc2a4\ud2b8\ub9ac\ubc0d \ubc29\uc2dd\uc5d0\uc11c \uac00\uc7a5 \uac71\uc815\ub418\ub294 \ubd80\ubd84\uc740 \ub370\uc774\ud130 \uc720\uc2e4\uc774\ub2e4. \uc774\ub97c \ubc29\uc9c0\ud558\uae30 \uc704\ud574 \uc5ec\ub7ec \ub808\uc774\uc5b4\uc758 \uc548\uc804\uc7a5\uce58\ub97c \uad6c\ud604\ud588\ub2e4.</p> <pre><code>async fn process_chunk(\n    client: Arc&lt;OpenSearch&gt;,\n    chunk: Vec&lt;IndexingData&gt;,\n    config: StreamingConfig,\n) -&gt; Result&lt;(usize, Vec&lt;IndexingData&gt;), Vec&lt;IndexingData&gt;&gt; {\n    // \uc720\ud6a8\uc131 \uac80\uc99d: index\uac00 \uc5c6\ub294 \ubb38\uc11c \ud544\ud130\ub9c1\n    let validated_chunk: Vec&lt;_&gt; = chunk\n        .into_iter()\n        .filter(|item| item.index.is_some() &amp;&amp; !item.index.as_ref().unwrap().is_empty())\n        .collect();\n\n    for attempt in 1..=config.max_retries {\n        let ndjson_body = match Self::build_ndjson(&amp;validated_chunk) {\n            Ok(body) =&gt; body,\n            Err(e) =&gt; {\n                // NDJSON \uc0dd\uc131 \uc2e4\ud328 \u2192 \uc804\uccb4 \uccad\ud06c \ubc18\ud658\n                return Err(validated_chunk);\n            }\n        };\n\n        let response = match client\n            .bulk(BulkParts::None)\n            .body(vec![ndjson_body.as_slice()])\n            .send()\n            .await\n        {\n            Ok(res) =&gt; res,\n            Err(e) =&gt; {\n                if attempt &gt;= config.max_retries {\n                    return Err(validated_chunk);\n                }\n                // \uc9c0\uc218 \ubc31\uc624\ud504\n                tokio::time::sleep(Duration::from_millis(200 * attempt as u64)).await;\n                continue;\n            }\n        };\n\n        // \uc751\ub2f5 \ubd84\uc11d: \ubd80\ubd84 \uc2e4\ud328 \uc544\uc774\ud15c \ucd94\ucd9c\n        return Self::process_response_with_failed_items(&amp;response_body, &amp;validated_chunk)\n            .map_err(|_| validated_chunk);\n    }\n\n    Err(validated_chunk)\n}\n</code></pre> <p>\ubc18\ud658 \ud0c0\uc785\uc774 \ud575\uc2ec\uc774\ub2e4. <code>Result&lt;(usize, Vec&lt;IndexingData&gt;), Vec&lt;IndexingData&gt;&gt;</code> - \uc131\uacf5 \uc2dc\uc5d0\ub3c4 \uc2e4\ud328\ud55c \uc544\uc774\ud15c \ubaa9\ub85d\uc744 \ud568\uaed8 \ubc18\ud658\ud55c\ub2e4. OpenSearch Bulk API\ub294 \ubd80\ubd84 \uc131\uacf5\uc744 \ud5c8\uc6a9\ud558\ubbc0\ub85c, 1000\uac74 \uc911 998\uac74\uc774 \uc131\uacf5\ud558\uace0 2\uac74\uc774 \uc2e4\ud328\ud560 \uc218 \uc788\ub2e4. \uc774 \uacbd\uc6b0 \uc131\uacf5 \uc218(998)\uc640 \uc2e4\ud328\ud55c \uc544\uc774\ud15c \ubaa9\ub85d(2\uac74)\uc744 \ud568\uaed8 \ubc18\ud658\ud558\uc5ec, \ud638\ucd9c\uc790\uac00 \uc2e4\ud328 \uac74\uc218\ub97c \uc815\ud655\ud788 \ud30c\uc545\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>fn process_response_with_failed_items(\n    response_body: &amp;Value,\n    original_chunk: &amp;[IndexingData],\n) -&gt; Result&lt;(usize, Vec&lt;IndexingData&gt;), AppError&gt; {\n    let mut failed_items = Vec::new();\n    let mut success_count = 0;\n\n    if response_body[\"errors\"].as_bool().unwrap_or(false) {\n        if let Some(items) = response_body[\"items\"].as_array() {\n            for (idx, item) in items.iter().enumerate() {\n                let is_success = item\n                    .get(\"index\")\n                    .and_then(|i| i.get(\"status\"))\n                    .and_then(|s| s.as_u64())\n                    .map_or(false, |s| (200..300).contains(&amp;s));\n\n                if is_success {\n                    success_count += 1;\n                } else if let Some(original_item) = original_chunk.get(idx) {\n                    failed_items.push(original_item.clone());\n                }\n            }\n        }\n    } else {\n        success_count = original_chunk.len();\n    }\n\n    Ok((success_count, failed_items))\n}\n</code></pre> <p>Bulk \uc751\ub2f5\uc758 \uac01 \uc544\uc774\ud15c \uc0c1\ud0dc\ub97c \ud655\uc778\ud558\uc5ec 200~299 \ubc94\uc704\uac00 \uc544\ub2cc \uac83\uc744 \uc2e4\ud328\ub85c \ud310\ubcc4\ud558\uace0, \uc6d0\ubcf8 \ub370\uc774\ud130\uc5d0\uc11c \ud574\ub2f9 \uc778\ub371\uc2a4\uc758 \uc544\uc774\ud15c\uc744 \ucd94\ucd9c\ud55c\ub2e4. \uc774\ub807\uac8c \ud558\uba74 \uc7ac\uc2dc\ub3c4 \ub85c\uc9c1\uc5d0\uc11c \uc2e4\ud328\ud55c \uac74\ub9cc \ub2e4\uc2dc \uc804\uc1a1\ud560 \uc218 \uc788\ub2e4.</p> <p>\ucd5c\uc885\uc801\uc73c\ub85c \ubaa8\ub4e0 \ucc98\ub9ac\uac00 \ub05d\ub09c \ud6c4, \ub370\uc774\ud130 \ubb34\uacb0\uc131 \uc0c1\ud0dc\ub97c \ub85c\uae45\ud55c\ub2e4:</p> <pre><code>// \uc720\uc2e4 \uc5c6\uc74c\n[INFO] DATA INTEGRITY GUARANTEED - No data loss detected.\n\n// \uc720\uc2e4 \ubc1c\uc0dd\n[ERROR] DATA INTEGRITY COMPROMISED - 15 items were lost.\n</code></pre>","tags":["Rust","OpenSearch","\uc778\ub371\uc2f1","\uc2a4\ud2b8\ub9ac\ubc0d","\ubc30\uce58\ucc98\ub9ac","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/OpenSearch-%EC%9D%B8%EB%8D%B1%EC%8B%B1-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-vs-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EB%B9%84%EA%B5%90/#ndjson","title":"NDJSON \uc0dd\uc131 \ucd5c\uc801\ud654","text":"<p>Bulk API\uc5d0 \uc804\ub2ec\ud558\ub294 NDJSON(Newline Delimited JSON) \uc0dd\uc131\ub3c4 \uc131\ub2a5\uc5d0 \uc601\ud5a5\uc744 \ubbf8\uce5c\ub2e4. \uc0ac\uc804\uc5d0 \ubc84\ud37c \ud06c\uae30\ub97c \ucd94\uc815\ud558\uc5ec \ud560\ub2f9\uc744 \ucd5c\uc18c\ud654\ud588\ub2e4.</p> <pre><code>fn build_ndjson(chunk: &amp;[IndexingData]) -&gt; Result&lt;Vec&lt;u8&gt;, AppError&gt; {\n    // \ubb38\uc11c\ub2f9 \ud3c9\uade0 1500\ubc14\uc774\ud2b8\ub85c \ucd94\uc815\ud558\uc5ec \uc0ac\uc804 \ud560\ub2f9\n    let mut buffer = Vec::with_capacity(chunk.len() * 1500);\n\n    for doc in chunk {\n        let index = doc.index.as_deref().unwrap_or(\"unknown-index\");\n\n        // action \ub77c\uc778\n        let action = match &amp;doc.id {\n            Some(id) if id.is_string() || id.is_number() =&gt; {\n                serde_json::json!({ \"index\": { \"_index\": index, \"_id\": id } })\n            }\n            _ =&gt; serde_json::json!({ \"index\": { \"_index\": index } }),\n        };\n        serde_json::to_writer(&amp;mut buffer, &amp;action)?;\n        writeln!(&amp;mut buffer)?;\n\n        // document \ub77c\uc778\n        let mut doc_map = doc.extra_fields.clone();\n        if let Some(id) = &amp;doc.id {\n            doc_map.insert(\"id\".to_string(), id.clone());\n        }\n        // extraData\uac00 object\uba74 string\uc73c\ub85c \ubcc0\ud658\n        if let Some(extra_data) = doc_map.get_mut(\"extraData\") {\n            if extra_data.is_object() {\n                *extra_data = Value::String(extra_data.to_string());\n            }\n        }\n        serde_json::to_writer(&amp;mut buffer, &amp;doc_map)?;\n        writeln!(&amp;mut buffer)?;\n    }\n\n    Ok(buffer)\n}\n</code></pre> <p><code>serde_json::to_writer</code>\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc911\uac04 <code>String</code> \uc0dd\uc131 \uc5c6\uc774 \ubc14\ub85c \ubc84\ud37c\uc5d0 \uc9c1\ub82c\ud654\ud55c\ub2e4. <code>to_string()</code> + <code>write_all()</code>\ubcf4\ub2e4 \ud55c \ubc88\uc758 \ud560\ub2f9\uc744 \uc808\uc57d\ud55c\ub2e4.</p> <p><code>extraData</code> \ud544\ub4dc\uc758 \ud2b9\ubcc4 \ucc98\ub9ac\ub3c4 \uc8fc\ubaa9\ud560 \ub9cc\ud558\ub2e4. \ucee4\uba38\uc2a4 \ub370\uc774\ud130\uc5d0\uc11c <code>extraData</code>\ub294 JSON \uac1d\uccb4\ub85c \ub4e4\uc5b4\uc624\ub294 \uacbd\uc6b0\uac00 \uc788\ub294\ub370, OpenSearch\uc758 \ud574\ub2f9 \ub9e4\ud551\uc774 <code>text</code> \ud0c0\uc785\uc774\uba74 \uc911\ucca9 \uac1d\uccb4\ub97c \uc9c1\uc811 \uc778\ub371\uc2f1\ud560 \uc218 \uc5c6\ub2e4. \ubb38\uc790\uc5f4\ub85c \ubcc0\ud658\ud558\uc5ec \uc800\uc7a5\ud55c\ub2e4.</p>","tags":["Rust","OpenSearch","\uc778\ub371\uc2f1","\uc2a4\ud2b8\ub9ac\ubc0d","\ubc30\uce58\ucc98\ub9ac","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/OpenSearch-%EC%9D%B8%EB%8D%B1%EC%8B%B1-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-vs-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EB%B9%84%EA%B5%90/#batchorchestratorservice","title":"BatchOrchestratorService: \ud1b5\ud569 \ubc30\uce58 \ud30c\uc774\ud504\ub77c\uc778","text":"<p>\uc2a4\ud2b8\ub9ac\ubc0d \uc778\ub371\uc2f1\uc5d0 \ub354\ud574, \uae30\uc874\uc5d0 3\uac1c\uc758 API\ub97c \uc218\ub3d9\uc73c\ub85c \ud638\ucd9c\ud558\ub358 \ubc30\uce58 \ud504\ub85c\uc138\uc2a4\ub97c \ud558\ub098\ub85c \ud1b5\ud569\ud558\ub294 <code>BatchOrchestratorService</code>\ub97c \uad6c\ud604\ud588\ub2e4.</p>","tags":["Rust","OpenSearch","\uc778\ub371\uc2f1","\uc2a4\ud2b8\ub9ac\ubc0d","\ubc30\uce58\ucc98\ub9ac","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/OpenSearch-%EC%9D%B8%EB%8D%B1%EC%8B%B1-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-vs-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EB%B9%84%EA%B5%90/#_9","title":"\uae30\uc874 \uc218\ub3d9 \ud504\ub85c\uc138\uc2a4","text":"<pre><code>sequenceDiagram\n    participant OP as \uc6b4\uc601\uc790\n    participant DL as data-loading API\n    participant IX as index API\n    participant FN as finalize API\n\n    OP-&gt;&gt;DL: 1. \ub370\uc774\ud130 \uc801\uc7ac \ud638\ucd9c\n    Note over DL: INDEX_YN: ST01\u2192ST02\u2192N\n    DL--&gt;&gt;OP: \uc644\ub8cc\n    OP-&gt;&gt;IX: 2. \uc778\ub371\uc2f1 \ud638\ucd9c\n    Note over IX: INDEX_YN='N' \ub370\uc774\ud130 \uc0c9\uc778\n    IX--&gt;&gt;OP: \uc644\ub8cc\n    OP-&gt;&gt;FN: 3. \uc644\ub8cc \ucc98\ub9ac \ud638\ucd9c\n    Note over FN: INDEX_YN: N\u2192Y\n    FN--&gt;&gt;OP: \uc644\ub8cc</code></pre> <p>\uc6b4\uc601\uc790\uac00 3\ub2e8\uacc4\ub97c \uc21c\uc11c\ub300\ub85c \ud638\ucd9c\ud574\uc57c \ud588\uace0, \uc911\uac04\uc5d0 \uc2e4\ud328\ud558\uba74 \uc5b4\ub514\uae4c\uc9c0 \uc9c4\ud589\ub410\ub294\uc9c0 \ud655\uc778\ud558\uace0 \uc218\ub3d9\uc73c\ub85c \ubcf5\uad6c\ud574\uc57c \ud588\ub2e4.</p>","tags":["Rust","OpenSearch","\uc778\ub371\uc2f1","\uc2a4\ud2b8\ub9ac\ubc0d","\ubc30\uce58\ucc98\ub9ac","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/OpenSearch-%EC%9D%B8%EB%8D%B1%EC%8B%B1-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-vs-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EB%B9%84%EA%B5%90/#_10","title":"\ud1b5\ud569 \uc790\ub3d9\ud654 \ud504\ub85c\uc138\uc2a4","text":"<pre><code>sequenceDiagram\n    participant API as batch-execute API\n    participant BO as BatchOrchestrator\n    participant DL as DataLoadingService\n    participant IX as IndexingService\n    participant FN as Finalization\n\n    API-&gt;&gt;BO: \ub2e8\uc77c \uc694\uccad\n    BO-&gt;&gt;BO: BatchStatus \uc0dd\uc131\n\n    rect rgb(230, 245, 255)\n        Note over BO,DL: STEP 1: \ub370\uc774\ud130 \uc801\uc7ac\n        BO-&gt;&gt;DL: load_search_data()\n        DL--&gt;&gt;BO: \uacb0\uacfc\n    end\n\n    rect rgb(230, 255, 230)\n        Note over BO,IX: STEP 2: OpenSearch \uc0c9\uc778\n        BO-&gt;&gt;IX: index_db_data_streaming()\n        IX--&gt;&gt;BO: \uacb0\uacfc\n    end\n\n    rect rgb(255, 245, 230)\n        Note over BO,FN: STEP 3: \uc644\ub8cc \ucc98\ub9ac\n        BO-&gt;&gt;FN: finalize()\n        FN--&gt;&gt;BO: \uacb0\uacfc\n    end\n\n    BO--&gt;&gt;API: BatchStatus (\uc804\uccb4 \uacb0\uacfc)</code></pre> <pre><code>#[derive(Debug, Clone, Serialize, Deserialize)]\npub struct BatchConfig {\n    pub interval_minutes: Option&lt;i32&gt;,\n    pub is_full_load: bool,\n    pub chunk_size: usize,\n    pub parallel_tasks: usize,\n    pub retry_count: u32,\n    pub retry_delay_seconds: u64,\n    pub enable_rollback: bool,\n}\n\nimpl Default for BatchConfig {\n    fn default() -&gt; Self {\n        Self {\n            interval_minutes: Some(30),\n            is_full_load: false,\n            chunk_size: 5000,\n            parallel_tasks: 12,\n            retry_count: 2,\n            retry_delay_seconds: 5,\n            enable_rollback: true,\n        }\n    }\n}\n</code></pre>","tags":["Rust","OpenSearch","\uc778\ub371\uc2f1","\uc2a4\ud2b8\ub9ac\ubc0d","\ubc30\uce58\ucc98\ub9ac","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/OpenSearch-%EC%9D%B8%EB%8D%B1%EC%8B%B1-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-vs-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EB%B9%84%EA%B5%90/#_11","title":"\uc0c1\ud0dc \ucd94\uc801","text":"<p>\uac01 \ub2e8\uacc4\uc758 \uc9c4\ud589 \uc0c1\ud0dc\ub97c <code>BatchStatus</code>\ub85c \ucd94\uc801\ud55c\ub2e4.</p> <pre><code>#[derive(Debug, Clone, Serialize, Deserialize)]\npub struct BatchStatus {\n    pub batch_id: String,\n    pub status: BatchExecutionStatus,\n    pub current_step: BatchStep,\n    pub start_time: String,\n    pub end_time: Option&lt;String&gt;,\n    pub total_records: u64,\n    pub processed_records: u64,\n    pub failed_records: u64,\n    pub error_message: Option&lt;String&gt;,\n    pub step_details: Vec&lt;StepResult&gt;,\n}\n\n#[derive(Debug, Clone, Serialize, Deserialize)]\npub enum BatchStep {\n    DataLoading,\n    OpenSearchIndexing,\n    Finalization,\n    Completed,\n}\n</code></pre> <p>API \ud638\ucd9c \ud55c \ubc88\uc73c\ub85c 3\ub2e8\uacc4\uac00 \uc790\ub3d9 \uc2e4\ud589\ub418\uace0, \uacb0\uacfc\uc5d0 \uac01 \ub2e8\uacc4\ubcc4 \uc0c1\uc138 \uc815\ubcf4\uac00 \ud3ec\ud568\ub41c\ub2e4. <code>enable_rollback</code>\uc774 \ud65c\uc131\ud654\ub418\uc5b4 \uc788\uc73c\uba74, \uc778\ub371\uc2f1 \uc2e4\ud328 \uc2dc \ub370\uc774\ud130 \uc801\uc7ac \ub2e8\uacc4\uc758 \uc0c1\ud0dc \ubcc0\uacbd\uc744 \ub864\ubc31\ud55c\ub2e4.</p>","tags":["Rust","OpenSearch","\uc778\ub371\uc2f1","\uc2a4\ud2b8\ub9ac\ubc0d","\ubc30\uce58\ucc98\ub9ac","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/OpenSearch-%EC%9D%B8%EB%8D%B1%EC%8B%B1-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-vs-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EB%B9%84%EA%B5%90/#index_yn","title":"INDEX_YN \uc0c1\ud0dc \uba38\uc2e0","text":"<p>\ucee4\uba38\uc2a4 \uc778\ub371\uc2f1\uc5d0\uc11c \ub370\uc774\ud130 \uc77c\uad00\uc131\uc758 \ud575\uc2ec\uc740 <code>INDEX_YN</code> \ud50c\ub798\uadf8\uc758 \uc0c1\ud0dc \uc804\uc774\ub2e4.</p> <pre><code>stateDiagram-v2\n    [*] --&gt; ST01: \uc2e0\uaddc \ub370\uc774\ud130\n    ST01 --&gt; ST02: \uc801\uc7ac \uc2dc\uc791\n    ST02 --&gt; N: \uc801\uc7ac \uc644\ub8cc\n    N --&gt; Y: \uc0c9\uc778 \uc644\ub8cc\n    N --&gt; ST01: \ub864\ubc31 (\uc0c9\uc778 \uc2e4\ud328 \uc2dc)</code></pre> <ul> <li><code>ST01</code>: \uc6d0\ubcf8 \ub370\uc774\ud130 \uc0c1\ud0dc</li> <li><code>ST02</code>: \uc801\uc7ac \uc9c4\ud589 \uc911 (\uc911\uac04 \uc0c1\ud0dc)</li> <li><code>N</code>: \uc801\uc7ac \uc644\ub8cc, \uc0c9\uc778 \ub300\uae30</li> <li><code>Y</code>: \uc0c9\uc778 \uc644\ub8cc</li> </ul> <p>\uc778\ub371\uc2f1 \uc11c\ube44\uc2a4\ub294 <code>INDEX_YN='N'</code>\uc778 \ub370\uc774\ud130\ub9cc \uc870\ud68c\ud558\uc5ec OpenSearch\uc5d0 \uc0c9\uc778\ud558\uace0, \uc131\uacf5\ud558\uba74 <code>Y</code>\ub85c \ubcc0\uacbd\ud55c\ub2e4. \uc774 \uc0c1\ud0dc \uba38\uc2e0 \ub355\ubd84\uc5d0 \uc911\uac04\uc5d0 \uc2e4\ud328\ud558\ub354\ub77c\ub3c4 <code>INDEX_YN='N'</code>\uc778 \ub370\uc774\ud130\ub97c \ub2e4\uc2dc \uc870\ud68c\ud558\uba74 \ubbf8\ucc98\ub9ac \uac74\uc744 \uc7ac\ucc98\ub9ac\ud560 \uc218 \uc788\ub2e4.</p>","tags":["Rust","OpenSearch","\uc778\ub371\uc2f1","\uc2a4\ud2b8\ub9ac\ubc0d","\ubc30\uce58\ucc98\ub9ac","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/OpenSearch-%EC%9D%B8%EB%8D%B1%EC%8B%B1-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-vs-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EB%B9%84%EA%B5%90/#_12","title":"\ubc30\uce58 \ucc98\ub9ac \uc544\ud0a4\ud14d\ucc98 \ubb38\uc11c\ud654 \ud6c4 \uc81c\uac70","text":"<p>\ud765\ubbf8\ub85c\uc6b4 \uc774\ub825\uc774 \uc788\ub2e4. \ud1b5\ud569 \ubc30\uce58 \uc544\ud0a4\ud14d\ucc98(<code>BatchOrchestratorService</code>)\ub97c \uba3c\uc800 \uad6c\ud604\ud558\uace0 \uc6b4\uc601\ud574\ubcf8 \ub4a4, \uacb0\uad6d \uc2a4\ud2b8\ub9ac\ubc0d \ubc29\uc2dd\uc774 \ub354 \ud6a8\uacfc\uc801\uc774\ub77c\ub294 \uacb0\ub860\uc5d0 \ub3c4\ub2ec\ud558\uc5ec \ubc30\uce58 \uc544\ud0a4\ud14d\ucc98 \ucf54\ub4dc\ub294 \uc81c\uac70\ud588\ub2e4.</p> <pre><code>2025-06-12 | Add batch processing architecture and enhance indexing services\n2025-06-19 | Remove batch processing architecture; update dependencies and refactor indexing services\n</code></pre> <p>\uc77c\uc8fc\uc77c \uc0ac\uc774\uc5d0 \ucd94\uac00\ud588\ub2e4\uac00 \uc81c\uac70\ud55c \uac83\uc774\ub2e4. \ubc30\uce58 \uc544\ud0a4\ud14d\ucc98\uc758 \ubb38\uc81c\uc810\uc740 \ub2e4\uc74c\uacfc \uac19\uc558\ub2e4:</p> <ol> <li>\ubcf5\uc7a1\ud55c \uc0c1\ud0dc \uad00\ub9ac: 3\ub2e8\uacc4 \ud30c\uc774\ud504\ub77c\uc778\uc758 \uc0c1\ud0dc \uc804\uc774\uac00 \ubcf5\uc7a1\ud558\uace0, \ub864\ubc31 \ub85c\uc9c1\uc774 \uc81c\ub300\ub85c \ub3d9\uc791\ud558\uc9c0 \uc54a\ub294 \uc5e3\uc9c0 \ucf00\uc774\uc2a4\uac00 \uc788\uc5c8\ub2e4.</li> <li>\uc624\ubc84\uc5d4\uc9c0\ub2c8\uc5b4\ub9c1: \uc2e4\uc81c \uc6b4\uc601\uc5d0\uc11c\ub294 \uc2a4\ud2b8\ub9ac\ubc0d \uc778\ub371\uc2f1 API \ud558\ub098\ub9cc \ud638\ucd9c\ud558\uba74 \ucda9\ubd84\ud588\ub2e4. \ub370\uc774\ud130 \uc801\uc7ac\uc640 \uc644\ub8cc \ucc98\ub9ac\ub294 DB \ud2b8\ub9ac\uac70\ub098 \uc2a4\ucf00\uc904\ub7ec\ub85c \ucc98\ub9ac\ud558\ub294 \uac83\uc774 \ub354 \uae54\ub054\ud588\ub2e4.</li> <li>\ud14c\uc2a4\ud2b8 \uc5b4\ub824\uc6c0: 3\ub2e8\uacc4 \ud30c\uc774\ud504\ub77c\uc778\uc758 \ud1b5\ud569 \ud14c\uc2a4\ud2b8\uac00 \ubcf5\uc7a1\ud574\uc11c \uc2e0\ub8b0\ub3c4\uac00 \ub0ae\uc558\ub2e4.</li> </ol> <p>\uacb0\uad6d <code>BatchOrchestratorService</code>\ub294 \uc81c\uac70\ud558\uace0, \uc2a4\ud2b8\ub9ac\ubc0d \uae30\ubc18\uc758 <code>index_db_data_streaming</code>\ub9cc \ub0a8\uacbc\ub2e4. \uc624\ucf00\uc2a4\ud2b8\ub808\uc774\uc158\uc740 \uc678\ubd80 \uc2a4\ucf00\uc904\ub7ec(cron \ub4f1)\uc5d0 \uc704\uc784\ud558\ub294 \uac83\uc774 \ub354 \uc801\ud569\ud55c \uc124\uacc4\uc600\ub2e4.</p> <p>\uc774 \uacbd\ud5d8\uc5d0\uc11c \ubc30\uc6b4 \uad50\ud6c8: \ucf54\ub4dc\ub85c \ud574\uacb0\ud558\ub824\ub294 \ubc94\uc704\ub97c \uc798 \uc815\ud574\uc57c \ud55c\ub2e4. \uc778\ub371\uc2f1 \uc5d4\uc9c4\uc774 \ub370\uc774\ud130 \uc801\uc7ac\uae4c\uc9c0 \ucc45\uc784\uc9c0\uba74 \uad00\uc2ec\uc0ac\uac00 \uc11e\uc5ec\uc11c \ubcf5\uc7a1\ub3c4\uac00 \uae09\uaca9\ud788 \uc62c\ub77c\uac04\ub2e4.</p>","tags":["Rust","OpenSearch","\uc778\ub371\uc2f1","\uc2a4\ud2b8\ub9ac\ubc0d","\ubc30\uce58\ucc98\ub9ac","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/OpenSearch-%EC%9D%B8%EB%8D%B1%EC%8B%B1-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-vs-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EB%B9%84%EA%B5%90/#vs","title":"\uc2a4\ud2b8\ub9ac\ubc0d vs \ubc30\uce58: \uc131\ub2a5 \ube44\uad50","text":"<p>\ub3d9\uc77c\ud55c \uc0c1\ud488 \ub370\uc774\ud130 10\ub9cc \uac74\uc744 \uae30\uc900\uc73c\ub85c \ube44\uad50\ud588\ub2e4.</p> \uce21\uc815 \ud56d\ubaa9 \uae30\uc874 \ubc30\uce58 \uc2a4\ud2b8\ub9ac\ubc0d \uac1c\uc120\uc728 \uc804\uccb4 \ucc98\ub9ac \uc2dc\uac04 180\ucd08 75\ucd08 58% \ucd5c\ub300 \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9 2.1GB 450MB 78% CPU \uc720\ud2f8\ub9ac\uc81c\uc774\uc158 35% 70% 2x \ub370\uc774\ud130 \uc720\uc2e4 \uac74\uc218 0\uac74 0\uac74 - <p>\uc2a4\ud2b8\ub9ac\ubc0d \ubc29\uc2dd\uc740 \ucc98\ub9ac \uc2dc\uac04\uc744 58% \ub2e8\ucd95\ud558\uba74\uc11c, \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9\uc740 78% \uac10\uc18c\uc2dc\ucf30\ub2e4. CPU \uc720\ud2f8\ub9ac\uc81c\uc774\uc158\uc774 \ub192\uc544\uc9c4 \uac83\uc740 \ubcd1\ub82c \ucc98\ub9ac \ub355\ubd84\uc774\ub2e4. \uae30\uc874\uc5d0\ub294 Bulk \uc804\uc1a1\uc744 \uae30\ub2e4\ub9ac\ub294 \ub3d9\uc548 CPU\uac00 \ub180\uc558\uc9c0\ub9cc, \uc2a4\ud2b8\ub9ac\ubc0d\uc5d0\uc11c\ub294 \uadf8 \uc2dc\uac04\uc5d0 \ub2e4\uc74c \uccad\ud06c\ub97c \uc900\ube44\ud55c\ub2e4.</p> <p>\uba54\ubaa8\ub9ac \uac1c\uc120\uc774 \ud2b9\ud788 \uadf9\uc801\uc774\ub2e4. \uae30\uc874\uc5d0\ub294 10\ub9cc \uac74 \uc804\uccb4\ub97c \uba54\ubaa8\ub9ac\uc5d0 \uc62c\ub824\uc57c \ud588\uc9c0\ub9cc, \uc2a4\ud2b8\ub9ac\ubc0d\uc5d0\uc11c\ub294 <code>chunk_size</code> * <code>max_concurrent</code> \ubd84\ub7c9\ub9cc \uba54\ubaa8\ub9ac\uc5d0 \uc874\uc7ac\ud558\uba74 \ub41c\ub2e4. \uae30\ubcf8\uac12 \uae30\uc900\uc73c\ub85c 5000 * 8 = 40000\uac74 \ubd84\ub7c9\uc774\ubbc0\ub85c, \uc804\uccb4 \ub370\uc774\ud130\uc758 40%\ub9cc \uba54\ubaa8\ub9ac\uc5d0 \uc874\uc7ac\ud55c\ub2e4. \uc2e4\uc81c\ub85c\ub294 Producer\uc640 Consumer\uc758 \uc18d\ub3c4 \ucc28\uc774\uc5d0 \ub530\ub77c \ub354 \uc801\uc740 \uc591\uc774 \uba54\ubaa8\ub9ac\uc5d0 \uccb4\ub958\ud55c\ub2e4.</p>","tags":["Rust","OpenSearch","\uc778\ub371\uc2f1","\uc2a4\ud2b8\ub9ac\ubc0d","\ubc30\uce58\ucc98\ub9ac","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/OpenSearch-%EC%9D%B8%EB%8D%B1%EC%8B%B1-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-vs-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EB%B9%84%EA%B5%90/#_13","title":"\ub77c\uc6b0\ud2b8 \ubcc0\uacbd: \uc2a4\ud2b8\ub9ac\ubc0d \uc804\ud658","text":"<p>\uae30\uc874 \uc778\ub371\uc2f1 \ub77c\uc6b0\ud2b8\ub97c \uc2a4\ud2b8\ub9ac\ubc0d \ubc29\uc2dd\uc73c\ub85c \uc804\ud658\ud588\ub2e4. API \uc778\ud130\ud398\uc774\uc2a4\ub294 \ub3d9\uc77c\ud558\uac8c \uc720\uc9c0\ud558\uba74\uc11c \ub0b4\ubd80 \uad6c\ud604\ub9cc \uad50\uccb4\ud55c \ubb34\uc911\ub2e8 \uc804\ud658\uc774\ub2e4.</p> <pre><code>// \ubcc0\uacbd \uc804\nasync fn handle_db_indexing(...) -&gt; Json&lt;IndexingResponse&gt; {\n    match service.index_db_data(lang_cd, interval, index, None).await {\n        // ...\n    }\n}\n\n// \ubcc0\uacbd \ud6c4\nasync fn handle_db_indexing(...) -&gt; Json&lt;IndexingResponse&gt; {\n    match service.index_db_data_streaming(lang_cd, interval, index, None).await {\n        // ...\n    }\n}\n</code></pre> <p>\ud638\ucd9c\ud558\ub294 \ud568\uc218\uba85\ub9cc <code>index_db_data</code> \u2192 <code>index_db_data_streaming</code>\uc73c\ub85c \ubcc0\uacbd\ud588\ub2e4. \uc694\uccad/\uc751\ub2f5 \uad6c\uc870\ub294 \ub3d9\uc77c\ud558\ubbc0\ub85c API \uc18c\ube44\uc790 \uc785\uc7a5\uc5d0\uc11c\ub294 \ubcc0\ud654\uac00 \uc5c6\ub2e4. \ub2e4\ub9cc \uc751\ub2f5 \uc2dc\uac04\uc774 \ub208\uc5d0 \ub744\uac8c \ube68\ub77c\uc9c4\ub2e4.</p> <p>\ucd94\ucc9c \uac80\uc0c9\uc5b4(recomword) \uc778\ub371\uc2f1\ub3c4 \ub3d9\uc77c\ud558\uac8c \uc2a4\ud2b8\ub9ac\ubc0d\uc73c\ub85c \uc804\ud658\ud588\ub2e4:</p> <pre><code>// \ubcc0\uacbd \uc804\nservice.index_db_recomword(lang_cd, interval, index).await\n\n// \ubcc0\uacbd \ud6c4\nservice.index_db_recomword_streaming(lang_cd, interval, index).await\n</code></pre>","tags":["Rust","OpenSearch","\uc778\ub371\uc2f1","\uc2a4\ud2b8\ub9ac\ubc0d","\ubc30\uce58\ucc98\ub9ac","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/OpenSearch-%EC%9D%B8%EB%8D%B1%EC%8B%B1-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-vs-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EB%B9%84%EA%B5%90/#_14","title":"\ud2b9\uc218 \ubb38\uc790 \uc815\uaddc\uc2dd \ucc98\ub9ac","text":"<p>\uc778\ub371\uc2f1 \uacfc\uc815\uc5d0\uc11c \uac80\uc0c9 \ud0a4\uc6cc\ub4dc\uc758 \ud2b9\uc218 \ubb38\uc790\ub97c \uc815\uc81c\ud558\ub294 \ub85c\uc9c1\ub3c4 \uc2a4\ud2b8\ub9ac\ubc0d \ud504\ub85c\uc138\uc11c\uc5d0 \ud3ec\ud568\uc2dc\ucf30\ub2e4. <code>once_cell::Lazy</code>\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc815\uaddc\uc2dd \ucef4\ud30c\uc77c\uc744 \ud55c \ubc88\ub9cc \uc218\ud589\ud55c\ub2e4.</p> <pre><code>static SPECIAL_CHAR_REGEX: Lazy&lt;Regex&gt; = Lazy::new(|| {\n    Regex::new(r#\"[!@#$%^&amp;*()_+\\-=\\[\\]{};':\"\\\\|,.&lt;&gt;\\/?~`]\"#)\n        .expect(\"Failed to compile special character regex\")\n});\n\npub fn clean_keyword_with_regex(keyword: &amp;str) -&gt; String {\n    SPECIAL_CHAR_REGEX\n        .replace_all(keyword.trim(), \"\")\n        .to_string()\n}\n</code></pre> <p>\uc815\uaddc\uc2dd \ucef4\ud30c\uc77c\uc740 \ube44\uc6a9\uc774 \ub192\uc740 \uc5f0\uc0b0\uc774\ubbc0\ub85c, \ud504\ub85c\uadf8\ub7a8 \uc804\uccb4\uc5d0\uc11c \ud55c \ubc88\ub9cc \uc218\ud589\ud558\uace0 \uc7ac\uc0ac\uc6a9\ud558\ub294 \uac83\uc774 \uc911\uc694\ud558\ub2e4. <code>Lazy</code>\ub294 \uccab \uc811\uadfc \uc2dc \ud55c \ubc88\ub9cc \ucd08\uae30\ud654\ub418\ub294 \uac83\uc744 \ubcf4\uc7a5\ud55c\ub2e4.</p>","tags":["Rust","OpenSearch","\uc778\ub371\uc2f1","\uc2a4\ud2b8\ub9ac\ubc0d","\ubc30\uce58\ucc98\ub9ac","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/OpenSearch-%EC%9D%B8%EB%8D%B1%EC%8B%B1-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-vs-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EB%B9%84%EA%B5%90/#_15","title":"\uacb0\uacfc \ubc0f \ud68c\uace0","text":"<p>\uc2a4\ud2b8\ub9ac\ubc0d \ubc29\uc2dd\uc73c\ub85c\uc758 \uc804\ud658\uc740 \uc131\uacf5\uc801\uc774\uc5c8\ub2e4. \ud575\uc2ec \uad50\ud6c8\uc740 \ub2e4\uc74c\uacfc \uac19\ub2e4.</p> <p>\uae30\uc220\uc801 \uc131\uacfc:</p> <ul> <li>\uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9 78% \uac10\uc18c\ub85c, \ub3d9\uc77c\ud55c \uc11c\ubc84\uc5d0\uc11c \ub354 \ud070 \ub370\uc774\ud130\uc14b\uc744 \ucc98\ub9ac\ud560 \uc218 \uc788\uac8c \ub418\uc5c8\ub2e4.</li> <li>\ucc98\ub9ac \uc2dc\uac04 58% \ub2e8\ucd95\uc73c\ub85c, \uc778\ub371\uc2f1 \uc8fc\uae30\ub97c \ub354 \uc9e7\uac8c \uac00\uc838\uac08 \uc218 \uc788\uac8c \ub418\uc5c8\ub2e4.</li> <li><code>Semaphore</code> + <code>FuturesUnordered</code> \uc870\ud569\uc73c\ub85c OpenSearch \ud074\ub7ec\uc2a4\ud130\uc758 Bulk \ucc98\ub9ac \ub2a5\ub825\uc744 \ucd5c\ub300\ud55c \ud65c\uc6a9\ud588\ub2e4.</li> <li>\uc544\uc774\ud15c \ub2e8\uc704\uc758 \uc2e4\ud328 \ucd94\uc801\uc73c\ub85c \ub370\uc774\ud130 \ubb34\uacb0\uc131\uc744 \ubcf4\uc7a5\ud588\ub2e4.</li> </ul> <p>\uc124\uacc4 \uad50\ud6c8:</p> <ul> <li><code>BatchOrchestratorService</code>\ub97c \ub9cc\ub4e4\uc5c8\ub2e4\uac00 \uc81c\uac70\ud55c \uacbd\ud5d8\uc740 \"\uc801\uc808\ud55c \ucd94\uc0c1\ud654 \uc218\uc900\"\uc744 \ucc3e\ub294 \uac83\uc758 \uc911\uc694\uc131\uc744 \ubcf4\uc5ec\uc900\ub2e4. \uc778\ub371\uc2f1 \uc5d4\uc9c4\uc740 \uc778\ub371\uc2f1\ub9cc \uc798 \ud558\uba74 \ub418\uace0, \uc624\ucf00\uc2a4\ud2b8\ub808\uc774\uc158\uc740 \uc678\ubd80 \ub3c4\uad6c\uc758 \uc5ed\ud560\uc774\ub2e4.</li> <li><code>async-stream</code>\uc744 \ud65c\uc6a9\ud55c \uccad\ud06c \uc2a4\ud2b8\ub9bc \uc0dd\uc131\uc740 Rust\uc758 \ube44\ub3d9\uae30 \uc2a4\ud2b8\ub9bc \uc0dd\ud0dc\uacc4\uac00 \ucda9\ubd84\ud788 \uc131\uc219\ud588\uc74c\uc744 \ubcf4\uc5ec\uc900\ub2e4.</li> <li>Graceful Degradation\uc740 \uce90\uc2f1\ubfd0 \uc544\ub2c8\ub77c \uc778\ub371\uc2f1\uc5d0\uc11c\ub3c4 \uc911\uc694\ud558\ub2e4. \uc77c\ubd80 \uc544\uc774\ud15c\uc774 \uc2e4\ud328\ud574\ub3c4 \ub098\uba38\uc9c0\ub294 \uc815\uc0c1 \ucc98\ub9ac\ub418\uc5b4\uc57c \ud55c\ub2e4.</li> </ul> <p>\ud5a5\ud6c4 \uac1c\uc120 \ubc29\ud5a5:</p> <ul> <li>OpenSearch\uc758 <code>_bulk</code> \uc751\ub2f5\uc5d0\uc11c \ub290\ub9b0 \uc544\uc774\ud15c\uc744 \uac10\uc9c0\ud558\uc5ec \ub3d9\uc801\uc73c\ub85c \uccad\ud06c \ud06c\uae30\ub97c \uc870\uc808\ud558\ub294 \uc801\uc751\ud615 \ubc30\uce6d\uc744 \uac80\ud1a0 \uc911\uc774\ub2e4.</li> <li>Kafka \ub4f1\uc758 \uba54\uc2dc\uc9c0 \ud050\ub97c Producer-Consumer \uc0ac\uc774\uc5d0 \ub450\uc5b4, DB \uc870\ud68c\uc640 \uc778\ub371\uc2f1\uc744 \uc644\uc804\ud788 \ubd84\ub9ac\ud558\ub294 \uac83\ub3c4 \uace0\ub824\ud558\uace0 \uc788\ub2e4.</li> <li>\ubc30\uce58 \ub85c\uadf8\ub97c OpenSearch\uc5d0 \uc800\uc7a5\ud558\ub294 \uae30\ub2a5\uc740 \uc774\ubbf8 <code>ensure_batch_log_index_exists</code>\ub85c \uc778\ud504\ub77c\ub97c \uc900\ube44\ud574\ub450\uc5c8\uc73c\ubbc0\ub85c, \ub85c\uadf8 \uc218\uc9d1 \ud30c\uc774\ud504\ub77c\uc778\uc744 \uc5f0\uacb0\ud558\uba74 \ub41c\ub2e4.</li> </ul>","tags":["Rust","OpenSearch","\uc778\ub371\uc2f1","\uc2a4\ud2b8\ub9ac\ubc0d","\ubc30\uce58\ucc98\ub9ac","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/PostgreSQL%EA%B3%BC-MySQL-%EB%8F%99%EC%8B%9C-%EC%A7%80%EC%9B%90%ED%95%98%EB%8A%94-Rust-DB-%EC%B6%94%EC%83%81%ED%99%94-%EB%A0%88%EC%9D%B4%EC%96%B4-%EA%B5%AC%ED%98%84/","title":"PostgreSQL\uacfc MySQL \ub3d9\uc2dc \uc9c0\uc6d0\ud558\ub294 Rust DB \ucd94\uc0c1\ud654 \ub808\uc774\uc5b4 \uad6c\ud604","text":"","tags":["Rust","PostgreSQL","MySQL","\ucd94\uc0c1\ud654","\ud2b8\ub808\uc787"]},{"location":"search-engine/PostgreSQL%EA%B3%BC-MySQL-%EB%8F%99%EC%8B%9C-%EC%A7%80%EC%9B%90%ED%95%98%EB%8A%94-Rust-DB-%EC%B6%94%EC%83%81%ED%99%94-%EB%A0%88%EC%9D%B4%EC%96%B4-%EA%B5%AC%ED%98%84/#postgresql-mysql-rust-db","title":"PostgreSQL\uacfc MySQL \ub3d9\uc2dc \uc9c0\uc6d0\ud558\ub294 Rust DB \ucd94\uc0c1\ud654 \ub808\uc774\uc5b4 \uad6c\ud604","text":"","tags":["Rust","PostgreSQL","MySQL","\ucd94\uc0c1\ud654","\ud2b8\ub808\uc787"]},{"location":"search-engine/PostgreSQL%EA%B3%BC-MySQL-%EB%8F%99%EC%8B%9C-%EC%A7%80%EC%9B%90%ED%95%98%EB%8A%94-Rust-DB-%EC%B6%94%EC%83%81%ED%99%94-%EB%A0%88%EC%9D%B4%EC%96%B4-%EA%B5%AC%ED%98%84/#_1","title":"\uac1c\uc694","text":"<p>Rust \uac80\uc0c9 \uc5d4\uc9c4\uc744 \uc5ec\ub7ec \ucee4\uba38\uc2a4 \uace0\uac1d\uc0ac\uc5d0 \uc801\uc6a9\ud558\uba74\uc11c \uc608\uc0c1\uce58 \ubabb\ud55c \ubb38\uc81c\uc5d0 \uc9c1\uba74\ud588\ub2e4. \uace0\uac1d\uc0ac\ub9c8\ub2e4 \uc0ac\uc6a9\ud558\ub294 \ub370\uc774\ud130\ubca0\uc774\uc2a4\uac00 \ub2ec\ub790\ub2e4. \ub300\ubd80\ubd84\uc740 PostgreSQL\uc744 \uc0ac\uc6a9\ud558\uc9c0\ub9cc, \uc77c\ubd80 \ub808\uac70\uc2dc \uc2dc\uc2a4\ud15c\uc744 \uc6b4\uc601\ud558\ub294 \uace0\uac1d\uc0ac\ub294 MySQL\uc5d0\uc11c \uc0c1\ud488 \ub370\uc774\ud130\ub97c \uad00\ub9ac\ud558\uace0 \uc788\uc5c8\ub2e4. \uac80\uc0c9 \uc5d4\uc9c4\uc758 \uc778\ub371\uc2f1 \ud30c\uc774\ud504\ub77c\uc778\uc740 DB\uc5d0\uc11c \uc0c1\ud488 \ub370\uc774\ud130\ub97c \uc77d\uc5b4 OpenSearch\uc5d0 \uc0c9\uc778\ud558\ub294 \uad6c\uc870\uc774\ubbc0\ub85c, \ub450 \ub370\uc774\ud130\ubca0\uc774\uc2a4\ub97c \ubaa8\ub450 \uc9c0\uc6d0\ud574\uc57c \ud588\ub2e4.</p> <p>NestJS \ubc84\uc804\uc5d0\uc11c\ub294 TypeORM\uc73c\ub85c \uc774 \ubb38\uc81c\ub97c \ucc98\ub9ac\ud588\ub2e4. TypeORM\uc740 \uc5ec\ub7ec DB\ub97c \uc9c0\uc6d0\ud558\uc9c0\ub9cc, \uac80\uc0c9 \uc778\ub371\uc2f1\uc5d0 \ud544\uc694\ud55c \ubcf5\uc7a1\ud55c \ub124\uc774\ud2f0\ube0c \ucffc\ub9ac\ub97c \uc2e4\ud589\ud560 \ub54c\ub294 \uacb0\uad6d DB\ubcc4\ub85c \ub2e4\ub978 SQL\uc744 \uc791\uc131\ud574\uc57c \ud588\uace0, \ub7f0\ud0c0\uc784\uc5d0\uc11c\uc57c \ucffc\ub9ac \ud638\ud658\uc131 \ubb38\uc81c\ub97c \ubc1c\uacac\ud558\ub294 \uacbd\uc6b0\uac00 \ube48\ubc88\ud588\ub2e4.</p> <p>Rust\uc5d0\uc11c\ub294 \ud2b8\ub808\uc787(trait) \uc2dc\uc2a4\ud15c\uc744 \ud65c\uc6a9\ud574 \ucef4\ud30c\uc77c \ud0c0\uc784\uc5d0 DB \ucd94\uc0c1\ud654\uc758 \uacc4\uc57d\uc744 \uac15\uc81c\ud558\uba74\uc11c\ub3c4, \uac01 DB\uc758 \ub124\uc774\ud2f0\ube0c \uae30\ub2a5\uc744 \ud65c\uc6a9\ud560 \uc218 \uc788\ub294 \uad6c\uc870\ub97c \uc124\uacc4\ud588\ub2e4. 2025\ub144 6\uc6d4\uc758 \ub9ac\ud329\ud1a0\ub9c1 \ucee4\ubc0b(<code>Refactor database handling to support MySQL and PostgreSQL</code>, <code>Implement MySQL support and refactor database handling</code>)\uc5d0\uc11c \uc774 \uc791\uc5c5\uc744 \uc218\ud589\ud588\ub2e4.</p>","tags":["Rust","PostgreSQL","MySQL","\ucd94\uc0c1\ud654","\ud2b8\ub808\uc787"]},{"location":"search-engine/PostgreSQL%EA%B3%BC-MySQL-%EB%8F%99%EC%8B%9C-%EC%A7%80%EC%9B%90%ED%95%98%EB%8A%94-Rust-DB-%EC%B6%94%EC%83%81%ED%99%94-%EB%A0%88%EC%9D%B4%EC%96%B4-%EA%B5%AC%ED%98%84/#_2","title":"\ubb38\uc81c \ubd84\uc11d","text":"<p>\ucee4\uba38\uc2a4 \uac80\uc0c9 \uc778\ub371\uc2f1\uc5d0\uc11c DB \uc811\uadfc \ud328\ud134\uc740 \ud06c\uac8c \uc138 \uac00\uc9c0\ub2e4.</p> <p>\ub300\ub7c9 \ub370\uc774\ud130 \ud398\uce58: \uc218\uc2ed\ub9cc \uac74\uc758 \uc0c1\ud488 \ub370\uc774\ud130\ub97c \ud55c \ubc88\uc5d0 \uc77d\uc5b4\uc640\uc57c \ud55c\ub2e4. \uc804\uccb4 \uc778\ub371\uc2f1(full indexing) \uc2dc \uc0ac\uc6a9\ub41c\ub2e4.</p> <p>\uc99d\ubd84 \ub370\uc774\ud130 \ud398\uce58: \ub9c8\uc9c0\ub9c9 \uc778\ub371\uc2f1 \uc774\ud6c4 \ubcc0\uacbd\ub41c \ub370\uc774\ud130\ub9cc \uc77d\uc5b4\uc628\ub2e4. \ubcc0\uacbd \uc2dc\uac04(SYS_MOD_DTM) \uae30\ubc18\uc73c\ub85c \ud544\ud130\ub9c1\ud55c\ub2e4.</p> <p>\ucee4\ub125\uc158 \ud5ec\uc2a4 \uccb4\ud06c: \uc778\ub371\uc2f1 \uc2dc\uc791 \uc804 DB \uc5f0\uacb0 \uc0c1\ud0dc\ub97c \ud655\uc778\ud55c\ub2e4. \uc5f0\uacb0\uc774 \ub04a\uc5b4\uc9c4 \uc0c1\ud0dc\uc5d0\uc11c \uc778\ub371\uc2f1\uc744 \uc2dc\uc791\ud558\uba74 \uc218\uc2ed \ubd84\uc758 \uc2dc\uac04\uc774 \ub0ad\ube44\ub420 \uc218 \uc788\ub2e4.</p> <p>\uc774 \uc138 \ud328\ud134\uc744 PostgreSQL\uacfc MySQL\uc5d0\uc11c \ub3d9\uc77c\ud558\uac8c \uc9c0\uc6d0\ud574\uc57c \ud558\ub418, \uac01 DB\uc758 \ud2b9\uc131(PostgreSQL\uc758 COPY, MySQL\uc758 \uc11c\ubc84\uc0ac\uc774\ub4dc \ucee4\uc11c \ub4f1)\uc744 \ud65c\uc6a9\ud560 \uc218 \uc788\uc5b4\uc57c \ud55c\ub2e4.</p>","tags":["Rust","PostgreSQL","MySQL","\ucd94\uc0c1\ud654","\ud2b8\ub808\uc787"]},{"location":"search-engine/PostgreSQL%EA%B3%BC-MySQL-%EB%8F%99%EC%8B%9C-%EC%A7%80%EC%9B%90%ED%95%98%EB%8A%94-Rust-DB-%EC%B6%94%EC%83%81%ED%99%94-%EB%A0%88%EC%9D%B4%EC%96%B4-%EA%B5%AC%ED%98%84/#databaseclient","title":"DatabaseClient \ud2b8\ub808\uc787 \uc124\uacc4","text":"<p>\ucd94\uc0c1\ud654\uc758 \ud575\uc2ec\uc740 <code>DatabaseClient</code> \ud2b8\ub808\uc787\uc774\ub2e4.</p> <pre><code>#[async_trait]\npub trait DatabaseClient: Send + Sync {\n    /// \uc77c\ubc18 \ucffc\ub9ac \uc2e4\ud589 - \uc804\uccb4 \uacb0\uacfc\ub97c \uba54\ubaa8\ub9ac\uc5d0 \ub85c\ub4dc\n    async fn query_rows(&amp;self, sql: &amp;str) -&gt; Result&lt;Vec&lt;DatabaseRow&gt;, Box&lt;dyn Error&gt;&gt;;\n\n    /// \uc5f0\uacb0 \uc0c1\ud0dc \ud655\uc778\n    async fn check_connectivity(&amp;self) -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt;;\n\n    /// \uc2a4\ud2b8\ub9ac\ubc0d \ucffc\ub9ac - \ud55c \ud589\uc529 \ucc98\ub9ac\n    async fn stream_query(\n        &amp;self,\n        sql: &amp;str,\n    ) -&gt; Result&lt;\n        Pin&lt;Box&lt;dyn Stream&lt;Item = Result&lt;DatabaseRow, Box&lt;dyn Error + Send + Sync&gt;&gt;&gt; + Send&gt;&gt;,\n        Box&lt;dyn Error&gt;,\n    &gt;;\n\n    /// \uccad\ud06c \uae30\ubc18 \uc2a4\ud2b8\ub9ac\ubc0d - \ud2b8\ub79c\uc7ad\uc158 \ubd84\ud560\n    async fn stream_query_chunked(\n        &amp;self,\n        sql: &amp;str,\n        chunk_size: usize,\n    ) -&gt; Result&lt;\n        Pin&lt;Box&lt;dyn Stream&lt;Item = Result&lt;DatabaseRow, Box&lt;dyn Error + Send + Sync&gt;&gt;&gt; + Send&gt;&gt;,\n        Box&lt;dyn Error&gt;,\n    &gt;;\n}\n</code></pre> <p><code>Send + Sync</code> \ubc14\uc6b4\ub4dc\ub294 \ud544\uc218\ub2e4. \uc778\ub371\uc2f1 \uc11c\ube44\uc2a4\uc5d0\uc11c <code>DatabaseClient</code>\ub97c tokio \ud0dc\uc2a4\ud06c \uac04\uc5d0 \uacf5\uc720\ud574\uc57c \ud558\ubbc0\ub85c, \uc2a4\ub808\ub4dc \uac04 \uc548\uc804\ud55c \uc804\uc1a1\uc774 \ubcf4\uc7a5\ub418\uc5b4\uc57c \ud55c\ub2e4. <code>async_trait</code> \ud06c\ub808\uc774\ud2b8\ub97c \uc0ac\uc6a9\ud574 \ud2b8\ub808\uc787\uc5d0 \ube44\ub3d9\uae30 \uba54\uc11c\ub4dc\ub97c \uc815\uc758\ud588\ub2e4.</p> <p>\uc2a4\ud2b8\ub9ac\ubc0d \ucffc\ub9ac\uc758 \ubc18\ud658 \ud0c0\uc785\uc774 \ubcf5\uc7a1\ud574 \ubcf4\uc774\uc9c0\ub9cc, \ud480\uc5b4\uc11c \uc124\uba85\ud558\uba74 \uc774\ub807\ub2e4.</p> <pre><code>graph LR\n    A[stream_query] --&gt; B[Pin]\n    B --&gt; C[Box]\n    C --&gt; D[dyn Stream]\n    D --&gt; E[Item = Result]\n    E --&gt; F[DatabaseRow]\n    E --&gt; G[Error]</code></pre> <ul> <li><code>Pin&lt;Box&lt;...&gt;&gt;</code>: \uc2a4\ud2b8\ub9bc\uc740 \uc790\uae30 \ucc38\uc870\uc801(self-referential) \uad6c\uc870\ub97c \uac00\uc9c8 \uc218 \uc788\uc73c\ubbc0\ub85c Pin\uc73c\ub85c \uace0\uc815\ud55c\ub2e4.</li> <li><code>dyn Stream</code>: \uad6c\uccb4\uc801\uc778 \uc2a4\ud2b8\ub9bc \ud0c0\uc785\uc744 \uc228\uae34\ub2e4. PostgreSQL\uacfc MySQL\uc774 \uc11c\ub85c \ub2e4\ub978 \uc2a4\ud2b8\ub9bc \ud0c0\uc785\uc744 \ubc18\ud658\ud558\ubbc0\ub85c \ub3d9\uc801 \ub514\uc2a4\ud328\uce58\uac00 \ud544\uc694\ud558\ub2e4.</li> <li><code>Send</code>: \uc2a4\ud2b8\ub9bc\uc774 \ub2e4\ub978 \uc2a4\ub808\ub4dc\ub85c \uc804\ub2ec\ub420 \uc218 \uc788\uc5b4\uc57c \ud55c\ub2e4.</li> </ul> <p>\uc774 \ud0c0\uc785 \uc2dc\uadf8\ub2c8\ucc98\ub294 Rust\uc758 \ube44\ub3d9\uae30 \ud2b8\ub808\uc787 \uc124\uacc4\uc5d0\uc11c \uac00\uc7a5 \uae4c\ub2e4\ub85c\uc6b4 \ubd80\ubd84 \uc911 \ud558\ub098\ub2e4. \ucc98\uc74c\uc5d0\ub294 \uc81c\ub124\ub9ad\uc73c\ub85c \uad6c\ud604\ud558\ub824 \ud588\uc73c\ub098, <code>DatabaseClient</code>\ub97c <code>Box&lt;dyn DatabaseClient&gt;</code>\ub85c \uc0ac\uc6a9\ud574\uc57c \ud558\ub294 \uc0c1\ud669\uc5d0\uc11c\ub294 \ub3d9\uc801 \ub514\uc2a4\ud328\uce58\uac00 \ubd88\uac00\ud53c\ud588\ub2e4.</p>","tags":["Rust","PostgreSQL","MySQL","\ucd94\uc0c1\ud654","\ud2b8\ub808\uc787"]},{"location":"search-engine/PostgreSQL%EA%B3%BC-MySQL-%EB%8F%99%EC%8B%9C-%EC%A7%80%EC%9B%90%ED%95%98%EB%8A%94-Rust-DB-%EC%B6%94%EC%83%81%ED%99%94-%EB%A0%88%EC%9D%B4%EC%96%B4-%EA%B5%AC%ED%98%84/#databaserow","title":"DatabaseRow \uc5f4\uac70\ud615","text":"<p>PostgreSQL \ud589\uacfc MySQL \ud589\uc740 \uc804\ud600 \ub2e4\ub978 \ud0c0\uc785\uc774\ub2e4. \uc774\ub97c \ud1b5\ud569\ud558\uae30 \uc704\ud574 \uc5f4\uac70\ud615\uc744 \uc0ac\uc6a9\ud588\ub2e4.</p> <pre><code>#[derive(Debug)]\npub enum DatabaseRow {\n    PostgreSQL(PgRow),\n    MySQL(MysqlRow),\n}\n\nimpl DatabaseRow {\n    pub fn to_json(&amp;self, column_map: &amp;HashMap&lt;String, String&gt;) -&gt; HashMap&lt;String, Value&gt; {\n        match self {\n            DatabaseRow::PostgreSQL(pg_row) =&gt; {\n                row_to_json(pg_row, column_map)\n            }\n            DatabaseRow::MySQL(mysql_row) =&gt; {\n                mysql_row_to_json(mysql_row, column_map)\n            }\n        }\n    }\n\n    pub fn get_id(&amp;self) -&gt; Result&lt;String, Box&lt;dyn Error&gt;&gt; {\n        match self {\n            DatabaseRow::PostgreSQL(pg_row) =&gt; {\n                Ok(pg_row.try_get::&lt;_, String&gt;(\"id\")?)\n            }\n            DatabaseRow::MySQL(mysql_row) =&gt; {\n                // MySQL\uc740 \uceec\ub7fc \uc778\ub371\uc2a4 \uae30\ubc18\uc73c\ub85c \uc811\uadfc\n                let columns = mysql_row.columns();\n                for (i, column) in columns.iter().enumerate() {\n                    if column.name_str().to_lowercase() == \"id\" {\n                        if let Some(value) = mysql_row.as_ref(i) {\n                            match value {\n                                MysqlValue::Bytes(bytes) =&gt; {\n                                    return Ok(String::from_utf8(bytes.clone())?);\n                                }\n                                MysqlValue::Int(i) =&gt; return Ok(i.to_string()),\n                                MysqlValue::UInt(u) =&gt; return Ok(u.to_string()),\n                                _ =&gt; return Err(\"Unsupported ID type\".into()),\n                            }\n                        }\n                    }\n                }\n                Err(\"ID column not found\".into())\n            }\n        }\n    }\n}\n</code></pre> <p>\uc5ec\uae30\uc11c PostgreSQL\uacfc MySQL\uc758 \ud0c0\uc785 \uc2dc\uc2a4\ud15c \ucc28\uc774\uac00 \ub4dc\ub7ec\ub09c\ub2e4. PostgreSQL\uc758 <code>tokio-postgres</code>\ub294 \ud0c0\uc785 \uc548\uc804\ud55c <code>try_get::&lt;_, T&gt;(column_name)</code> \uc778\ud130\ud398\uc774\uc2a4\ub97c \uc81c\uacf5\ud558\uc9c0\ub9cc, MySQL\uc758 <code>mysql_async</code>\ub294 \uc778\ub371\uc2a4 \uae30\ubc18 \uc811\uadfc\uc774 \uae30\ubcf8\uc774\uace0 \uac12 \ud0c0\uc785\uc774 <code>MysqlValue</code> \uc5f4\uac70\ud615\uc73c\ub85c \ub798\ud551\ub41c\ub2e4. <code>get_id</code> \uba54\uc11c\ub4dc\uc5d0\uc11c MySQL \uce21 \ucf54\ub4dc\uac00 \ub354 \ubcf5\uc7a1\ud55c \uc774\uc720\uac00 \ubc14\ub85c \uc774\uac83\uc774\ub2e4.</p> <p><code>to_json</code> \uba54\uc11c\ub4dc\uc5d0\uc11c <code>column_map</code>\uc744 \uc778\uc790\ub85c \ubc1b\ub294 \uac83\uc740 DB \uceec\ub7fc\uba85\uacfc OpenSearch \ud544\ub4dc\uba85\uc758 \ub9e4\ud551 \ub54c\ubb38\uc774\ub2e4. DB\uc5d0\uc11c\ub294 <code>GOODS_NM</code>\uc774\uc9c0\ub9cc OpenSearch\uc5d0\uc11c\ub294 <code>goodsNm</code>\uc744 \uc0ac\uc6a9\ud55c\ub2e4. \uc774 \ub9e4\ud551 \uc815\ubcf4\ub294 JSON \ud30c\uc77c(<code>columns_map/goods_map.json</code>)\ub85c \uad00\ub9ac\ud55c\ub2e4.</p>","tags":["Rust","PostgreSQL","MySQL","\ucd94\uc0c1\ud654","\ud2b8\ub808\uc787"]},{"location":"search-engine/PostgreSQL%EA%B3%BC-MySQL-%EB%8F%99%EC%8B%9C-%EC%A7%80%EC%9B%90%ED%95%98%EB%8A%94-Rust-DB-%EC%B6%94%EC%83%81%ED%99%94-%EB%A0%88%EC%9D%B4%EC%96%B4-%EA%B5%AC%ED%98%84/#postgresql","title":"PostgreSQL \uad6c\ud604","text":"<p>PostgreSQL \uad6c\ud604\uccb4\ub294 <code>tokio-postgres</code>\ub97c \uc0ac\uc6a9\ud55c\ub2e4.</p> <pre><code>pub struct PostgreSQLDatabase {\n    client: PostgresClient,\n}\n\n#[async_trait]\nimpl DatabaseClient for PostgreSQLDatabase {\n    async fn query_rows(&amp;self, sql: &amp;str) -&gt; Result&lt;Vec&lt;DatabaseRow&gt;, Box&lt;dyn Error&gt;&gt; {\n        let rows = self.client\n            .execute_query(sql, &amp;[], |row| row.clone())\n            .await?;\n        Ok(rows.into_iter().map(DatabaseRow::PostgreSQL).collect())\n    }\n\n    async fn check_connectivity(&amp;self) -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {\n        self.client.check_connectivity().await\n    }\n\n    async fn stream_query(&amp;self, sql: &amp;str) -&gt; Result&lt;...&gt; {\n        let stream = self.client.stream_query(sql).await?;\n        let mapped_stream = stream.map(|row_result| {\n            row_result.map(DatabaseRow::PostgreSQL)\n        });\n        Ok(Box::pin(mapped_stream))\n    }\n\n    async fn stream_query_chunked(\n        &amp;self, sql: &amp;str, chunk_size: usize\n    ) -&gt; Result&lt;...&gt; {\n        let stream = self.client.stream_query_chunked(sql, chunk_size).await?;\n        let mapped_stream = stream.map(|row_result| {\n            row_result.map(DatabaseRow::PostgreSQL)\n        });\n        Ok(Box::pin(mapped_stream))\n    }\n}\n</code></pre> <p>PostgresClient \ub0b4\ubd80\uc5d0\uc11c\ub294 \uc5f0\uacb0 \ubb38\uc790\uc5f4\ub9cc \ubcf4\uad00\ud558\uace0, \ub9e4 \ucffc\ub9ac \uc2e4\ud589 \uc2dc \uc0c8\ub85c\uc6b4 \uc5f0\uacb0\uc744 \uc0dd\uc131\ud55c\ub2e4.</p> <pre><code>#[derive(Clone)]\npub struct PostgresClient {\n    conn_string: String,\n}\n\nimpl PostgresClient {\n    pub async fn connect(&amp;self) -&gt; Result&lt;Client, Box&lt;dyn Error&gt;&gt; {\n        let (client, connection) = tokio_postgres::connect(&amp;self.conn_string, NoTls).await?;\n\n        // \ucee4\ub125\uc158 \ud578\ub4e4\ub7ec\ub97c \ubcc4\ub3c4 \ud0dc\uc2a4\ud06c\uc5d0\uc11c \uc2e4\ud589\n        tokio::spawn(async move {\n            if let Err(e) = connection.await {\n                error!(\"Database connection error: {}\", e);\n            }\n        });\n\n        Ok(client)\n    }\n\n    fn mask_password(&amp;self, conn_string: &amp;str) -&gt; String {\n        // \ub85c\uadf8\uc5d0 \ube44\ubc00\ubc88\ud638 \ub178\ucd9c \ubc29\uc9c0\n        if let Some(start) = conn_string.find(':') {\n            if let Some(end) = conn_string[start + 1..].find('@') {\n                let prefix = &amp;conn_string[0..start + 1];\n                let suffix = &amp;conn_string[start + 1 + end..];\n                return format!(\"{}*****{}\", prefix, suffix);\n            }\n        }\n        \"postgresql://user:****@host:port/dbname\".to_string()\n    }\n}\n</code></pre> <p><code>mask_password</code> \uba54\uc11c\ub4dc\ub294 \uc0ac\uc18c\ud574 \ubcf4\uc774\uc9c0\ub9cc \uc911\uc694\ud558\ub2e4. \ub85c\uadf8\uc5d0 DB \ube44\ubc00\ubc88\ud638\uac00 \ub178\ucd9c\ub418\uba74 \ubcf4\uc548 \uc0ac\uace0\ub85c \uc774\uc5b4\uc9c8 \uc218 \uc788\ub2e4. \uc5f0\uacb0 \uc815\ubcf4\ub97c \ub85c\uae45\ud560 \ub54c\ub294 \ud56d\uc0c1 \ube44\ubc00\ubc88\ud638\ub97c \ub9c8\uc2a4\ud0b9\ud55c\ub2e4.</p> <p><code>tokio::spawn</code>\uc73c\ub85c \ucee4\ub125\uc158 \ud578\ub4e4\ub7ec\ub97c \ubd84\ub9ac\ud558\ub294 \uac83\uc740 <code>tokio-postgres</code>\uc758 \uc124\uacc4 \ud2b9\uc131\uc774\ub2e4. \ucee4\ub125\uc158 \uac1d\uccb4\ub294 \uc18c\ucf13 \ud1b5\uc2e0\uc744 \uc704\ud55c \ube44\ub3d9\uae30 \ub8e8\ud504\ub97c \ub3cc\ub824\uc57c \ud558\ubbc0\ub85c, \ubcc4\ub3c4 \ud0dc\uc2a4\ud06c\uc5d0\uc11c \uc2e4\ud589\ud574\uc57c \ud55c\ub2e4. \uc774 \ud0dc\uc2a4\ud06c\uac00 \uc885\ub8cc\ub418\uba74 \ucee4\ub125\uc158\uc774 \ub04a\uc5b4\uc9c4\ub2e4.</p>","tags":["Rust","PostgreSQL","MySQL","\ucd94\uc0c1\ud654","\ud2b8\ub808\uc787"]},{"location":"search-engine/PostgreSQL%EA%B3%BC-MySQL-%EB%8F%99%EC%8B%9C-%EC%A7%80%EC%9B%90%ED%95%98%EB%8A%94-Rust-DB-%EC%B6%94%EC%83%81%ED%99%94-%EB%A0%88%EC%9D%B4%EC%96%B4-%EA%B5%AC%ED%98%84/#mysql","title":"MySQL \uad6c\ud604","text":"<p>MySQL \uad6c\ud604\uccb4\ub294 <code>mysql_async</code>\ub97c \uc0ac\uc6a9\ud55c\ub2e4.</p> <pre><code>#[derive(Clone)]\npub struct MysqlClient {\n    pool: Pool,\n}\n\nimpl MysqlClient {\n    pub fn with_config(mysql_config: &amp;config::MysqlConfig) -&gt; Self {\n        let connection_string = config::get_mysql_connection_string(mysql_config);\n        let opts = Opts::from_url(&amp;connection_string)\n            .expect(\"Failed to create MySQL pool options\");\n        let pool = Pool::new(opts);\n        Self { pool }\n    }\n\n    pub async fn connect(&amp;self) -&gt; Result&lt;Conn, Box&lt;dyn Error&gt;&gt; {\n        let conn = self.pool.get_conn().await?;\n        Ok(conn)\n    }\n\n    pub async fn check_connectivity(&amp;self) -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {\n        let mut conn = self.connect().await?;\n        let result: Option&lt;i32&gt; = conn.query_first(\"SELECT 1\").await?;\n\n        match result {\n            Some(1) =&gt; Ok(()),\n            _ =&gt; Err(\"Database connectivity check failed\".into()),\n        }\n    }\n}\n</code></pre> <p>PostgreSQL\uacfc MySQL \ud074\ub77c\uc774\uc5b8\ud2b8\uc758 \uac00\uc7a5 \ud070 \ucc28\uc774\ub294 \ucee4\ub125\uc158 \ud480 \uad00\ub9ac\ub2e4. <code>mysql_async</code>\ub294 <code>Pool</code> \ud0c0\uc785\uc774 \ub0b4\uc7a5 \ucee4\ub125\uc158 \ud480\uc744 \uc81c\uacf5\ud558\ubbc0\ub85c <code>pool.get_conn().await?</code>\ub85c \ud480\uc5d0\uc11c \ucee4\ub125\uc158\uc744 \ube4c\ub824\uc62c \uc218 \uc788\ub2e4. \ubc18\uba74 <code>tokio-postgres</code>\ub294 \ucee4\ub125\uc158 \ud480\uc774 \ub0b4\uc7a5\ub418\uc5b4 \uc788\uc9c0 \uc54a\uc544, \ub9e4\ubc88 \uc0c8 \ucee4\ub125\uc158\uc744 \uc0dd\uc131\ud558\uac70\ub098 \ubcc4\ub3c4\uc758 \ud480 \ub77c\uc774\ube0c\ub7ec\ub9ac(deadpool-postgres \ub4f1)\ub97c \uc0ac\uc6a9\ud574\uc57c \ud55c\ub2e4.</p> <p>\ud604\uc7ac \uad6c\ud604\uc5d0\uc11c\ub294 PostgreSQL\ub3c4 \ub9e4 \ucffc\ub9ac\ub9c8\ub2e4 \uc0c8 \ucee4\ub125\uc158\uc744 \uc0dd\uc131\ud55c\ub2e4. \uac80\uc0c9 \ucffc\ub9ac \ucc98\ub9ac\ub294 OpenSearch\uac00 \ub2f4\ub2f9\ud558\uace0, DB \uc811\uadfc\uc740 \uc778\ub371\uc2f1 \uc2dc\uc5d0\ub9cc \ubc1c\uc0dd\ud558\ubbc0\ub85c \ucee4\ub125\uc158 \uc0dd\uc131 \uc624\ubc84\ud5e4\ub4dc\uac00 \ubcd1\ubaa9\uc774 \ub418\uc9c0 \uc54a\ub294\ub2e4. \uc778\ub371\uc2f1\uc740 \ubd84 \ub2e8\uc704\uc758 \uae34 \uc791\uc5c5\uc774\ubbc0\ub85c, \ucd08\ub2f9 \uc218\ucc9c \ubc88\uc758 DB \uc5f0\uacb0\uc774 \ud544\uc694\ud55c OLTP \uc6cc\ud06c\ub85c\ub4dc\uc640\ub294 \ub2e4\ub974\ub2e4.</p>","tags":["Rust","PostgreSQL","MySQL","\ucd94\uc0c1\ud654","\ud2b8\ub808\uc787"]},{"location":"search-engine/PostgreSQL%EA%B3%BC-MySQL-%EB%8F%99%EC%8B%9C-%EC%A7%80%EC%9B%90%ED%95%98%EB%8A%94-Rust-DB-%EC%B6%94%EC%83%81%ED%99%94-%EB%A0%88%EC%9D%B4%EC%96%B4-%EA%B5%AC%ED%98%84/#mysql-json","title":"MySQL \ud589 \u2192 JSON \ubcc0\ud658","text":"<p>MySQL\uc758 \ud589 \ub370\uc774\ud130\ub97c JSON\uc73c\ub85c \ubcc0\ud658\ud558\ub294 \uacfc\uc815\uc5d0\uc11c \ud0c0\uc785 \ub9e4\ud551\uc774 \uae4c\ub2e4\ub86d\ub2e4.</p> <pre><code>pub fn mysql_row_to_json(\n    row: &amp;MysqlRow,\n    column_map: &amp;HashMap&lt;String, String&gt;\n) -&gt; HashMap&lt;String, Value&gt; {\n    let mut result = HashMap::new();\n    let columns = row.columns();\n\n    for (i, column) in columns.iter().enumerate() {\n        let db_col_name = column.name_str().to_string();\n\n        // \uceec\ub7fc\ub9f5\uc5d0\uc11c OpenSearch \ud544\ub4dc\uba85 \uc870\ud68c\n        let field_name = column_map\n            .get(&amp;db_col_name)\n            .unwrap_or(&amp;db_col_name);\n\n        if let Some(value) = row.as_ref(i) {\n            let json_value = match value {\n                MysqlValue::NULL =&gt; Value::Null,\n                MysqlValue::Bytes(bytes) =&gt; {\n                    // UTF-8 \ubb38\uc790\uc5f4\ub85c \ubcc0\ud658 \uc2dc\ub3c4, \uc2e4\ud328\ud558\uba74 base64\n                    match String::from_utf8(bytes.clone()) {\n                        Ok(s) =&gt; Value::String(s),\n                        Err(_) =&gt; Value::String(base64::encode(bytes)),\n                    }\n                }\n                MysqlValue::Int(i) =&gt; json!(*i),\n                MysqlValue::UInt(u) =&gt; json!(*u),\n                MysqlValue::Float(f) =&gt; json!(*f),\n                MysqlValue::Double(d) =&gt; json!(*d),\n                MysqlValue::Date(y, m, d, h, mi, s, us) =&gt; {\n                    Value::String(format!(\n                        \"{:04}-{:02}-{:02} {:02}:{:02}:{:02}.{:06}\",\n                        y, m, d, h, mi, s, us\n                    ))\n                }\n                MysqlValue::Time(neg, d, h, m, s, us) =&gt; {\n                    let sign = if *neg { \"-\" } else { \"\" };\n                    Value::String(format!(\n                        \"{}{}:{:02}:{:02}.{:06}\",\n                        sign, d * 24 + *h as u32, m, s, us\n                    ))\n                }\n            };\n\n            result.insert(field_name.clone(), json_value);\n        }\n    }\n\n    result\n}\n</code></pre> <p>MySQL\uc758 <code>MysqlValue::Bytes</code> \ud0c0\uc785\uc740 \ubb38\uc790\uc5f4, BLOB, JSON \ub4f1 \ub2e4\uc591\ud55c \ud0c0\uc785\uc774 \ubc14\uc774\ud2b8 \ubc30\uc5f4\ub85c \ub4e4\uc5b4\uc628\ub2e4. UTF-8 \ubcc0\ud658\uc744 \uba3c\uc800 \uc2dc\ub3c4\ud558\uace0, \uc2e4\ud328\ud558\uba74 base64\ub85c \uc778\ucf54\ub529\ud55c\ub2e4. \uc774 \ubc29\uc5b4\uc801 \ucc98\ub9ac\uac00 \uc5c6\uc73c\uba74 \ud55c\uae00\uc774 \ud3ec\ud568\ub41c BLOB \ub370\uc774\ud130\uc5d0\uc11c \ud328\ub2c9\uc774 \ubc1c\uc0dd\ud560 \uc218 \uc788\ub2e4.</p> <p>\ub0a0\uc9dc/\uc2dc\uac04 \ud0c0\uc785\ub3c4 \uc8fc\uc758\uac00 \ud544\uc694\ud558\ub2e4. MySQL\uc758 <code>Date</code> \ud0c0\uc785\uc740 \uc5f0/\uc6d4/\uc77c/\uc2dc/\ubd84/\ucd08/\ub9c8\uc774\ud06c\ub85c\ucd08\uac00 \ud29c\ud50c\ub85c \uc804\ub2ec\ub418\ub294\ub370, OpenSearch\uc758 \ub0a0\uc9dc \ud3ec\ub9f7\uacfc \ub9de\ucd94\uae30 \uc704\ud574 \uba85\uc2dc\uc801\uc73c\ub85c \ud3ec\ub9e4\ud305\ud55c\ub2e4.</p>","tags":["Rust","PostgreSQL","MySQL","\ucd94\uc0c1\ud654","\ud2b8\ub808\uc787"]},{"location":"search-engine/PostgreSQL%EA%B3%BC-MySQL-%EB%8F%99%EC%8B%9C-%EC%A7%80%EC%9B%90%ED%95%98%EB%8A%94-Rust-DB-%EC%B6%94%EC%83%81%ED%99%94-%EB%A0%88%EC%9D%B4%EC%96%B4-%EA%B5%AC%ED%98%84/#sql-db","title":"SQL \ube4c\ub354: DB\ubcc4 \ucffc\ub9ac \ubd84\uae30","text":"<p>\ub3d9\uc77c\ud55c \ub370\uc774\ud130\ub97c \uc870\ud68c\ud558\ub354\ub77c\ub3c4 PostgreSQL\uacfc MySQL\uc758 SQL \ubb38\ubc95\uc5d0\ub294 \ucc28\uc774\uac00 \uc788\ub2e4. \uc774\ub97c \ucc98\ub9ac\ud558\ub294 SqlBuilder\ub97c \uad6c\ud604\ud588\ub2e4.</p> <pre><code>pub struct SqlBuilder {\n    db_type: DatabaseType,\n}\n\nimpl SqlBuilder {\n    pub fn new(db_type: DatabaseType) -&gt; Self {\n        Self { db_type }\n    }\n\n    pub fn build_goods_query(&amp;self, interval: &amp;str) -&gt; String {\n        let base_query = match self.db_type {\n            DatabaseType::PostgreSQL =&gt; {\n                r#\"\n                SELECT \n                    ID as \"id\",\n                    GOODS_NO as \"goodsNo\",\n                    GOODS_NM as \"goodsNm\",\n                    BRAND_NM as \"brandNm\",\n                    SALE_PRC as \"salePrc\",\n                    DC_RATE as \"dcRate\",\n                    -- ... (50+ \uceec\ub7fc)\n                    DISP_CTG_NO as \"dispCtgNo\",\n                    OPTION_LIST as \"optionList\"\n                FROM PR_GOODS_SEARCH_INTF\n                WHERE 1 = 1\"#\n            }\n            DatabaseType::MySQL =&gt; {\n                r#\"\n                SELECT \n                    ID as `id`,\n                    GOODS_NO as `goodsNo`,\n                    GOODS_NM as `goodsNm`,\n                    BRAND_NM as `brandNm`,\n                    SALE_PRC as `salePrc`,\n                    DC_RATE as `dcRate`,\n                    -- ... (50+ \uceec\ub7fc)\n                    DISP_CTG_NO as `dispCtgNo`,\n                    OPTION_LIST as `optionList`\n                FROM PR_GOODS_SEARCH_INTF\n                WHERE 1 = 1\"#\n            }\n        };\n\n        // interval \uc870\uac74 \ucd94\uac00\n        if !interval.is_empty() {\n            let interval_clause = match self.db_type {\n                DatabaseType::PostgreSQL =&gt; {\n                    format!(\n                        \" AND SYS_MOD_DTM &gt;= NOW() - INTERVAL '{}'\",\n                        interval\n                    )\n                }\n                DatabaseType::MySQL =&gt; {\n                    format!(\n                        \" AND SYS_MOD_DTM &gt;= DATE_SUB(NOW(), INTERVAL {})\",\n                        interval\n                    )\n                }\n            };\n            format!(\"{}{}\", base_query, interval_clause)\n        } else {\n            base_query.to_string()\n        }\n    }\n}\n</code></pre> <p>PostgreSQL\uacfc MySQL \uac04 \uc8fc\uc694 SQL \ucc28\uc774\uc810\uc740 \ub2e4\uc74c\uacfc \uac19\ub2e4.</p> \uc694\uc18c PostgreSQL MySQL \uceec\ub7fc \ubcc4\uce6d \uc778\uc6a9 \uc30d\ub530\uc634\ud45c <code>\"goodsNm\"</code> \ubc31\ud2f1 <code>`goodsNm`</code> \uc778\ud130\ubc8c \ubb38\ubc95 <code>INTERVAL '1 hour'</code> <code>INTERVAL 1 HOUR</code> JSON \ud0c0\uc785 \uc811\uadfc <code>column-&gt;&gt;'key'</code> <code>JSON_EXTRACT(column, '$.key')</code> \ubd88\ub9ac\uc5b8 \ud0c0\uc785 \ub124\uc774\ud2f0\ube0c <code>boolean</code> <code>TINYINT(1)</code> <p>\uceec\ub7fc \ubcc4\uce6d \uc778\uc6a9 \ubc29\uc2dd\uc774 \ub2e4\ub978 \uac83\uc740 \uac00\uc7a5 \ube48\ubc88\ud558\uac8c \ubb38\uc81c\ub97c \uc77c\uc73c\ud0a4\ub294 \ubd80\ubd84\uc774\ub2e4. PostgreSQL\uc740 \uc30d\ub530\uc634\ud45c \uc548\uc758 \ubcc4\uce6d\uc744 \ub300\uc18c\ubb38\uc790 \uad6c\ubd84\ud558\uc5ec \uc815\ud655\ud788 \uc0ac\uc6a9\ud558\uc9c0\ub9cc, MySQL\uc740 \ubc31\ud2f1\uc744 \uc0ac\uc6a9\ud55c\ub2e4. \uc774 \ucc28\uc774\ub97c \ubb34\uc2dc\ud558\uba74 \uceec\ub7fc \ub9e4\ud551\uc774 \uae68\uc838\uc11c OpenSearch\uc5d0 \uc798\ubabb\ub41c \ud544\ub4dc\uba85\uc73c\ub85c \uc778\ub371\uc2f1\ub418\ub294 \ucc38\uc0ac\uac00 \ubc8c\uc5b4\uc9c4\ub2e4.</p> <p>\uc778\ud130\ubc8c \ubb38\ubc95 \ucc28\uc774\ub3c4 \uc911\uc694\ud558\ub2e4. \uc99d\ubd84 \uc778\ub371\uc2f1\uc5d0\uc11c \"\ucd5c\uadfc 1\uc2dc\uac04 \uc774\ub0b4 \ubcc0\uacbd\ub41c \ub370\uc774\ud130\"\ub97c \uc870\ud68c\ud560 \ub54c, PostgreSQL\uc740 <code>INTERVAL '1 hour'</code>, MySQL\uc740 <code>INTERVAL 1 HOUR</code> \ud615\ud0dc\ub97c \uc0ac\uc6a9\ud55c\ub2e4. SqlBuilder\uc5d0\uc11c \uc774 \ucc28\uc774\ub97c \ud761\uc218\ud558\uc5ec \uc0c1\uc704 \uacc4\uce35\uc740 \ub2e8\uc21c\ud788 interval \ubb38\uc790\uc5f4\ub9cc \uc804\ub2ec\ud558\uba74 \ub41c\ub2e4.</p>","tags":["Rust","PostgreSQL","MySQL","\ucd94\uc0c1\ud654","\ud2b8\ub808\uc787"]},{"location":"search-engine/PostgreSQL%EA%B3%BC-MySQL-%EB%8F%99%EC%8B%9C-%EC%A7%80%EC%9B%90%ED%95%98%EB%8A%94-Rust-DB-%EC%B6%94%EC%83%81%ED%99%94-%EB%A0%88%EC%9D%B4%EC%96%B4-%EA%B5%AC%ED%98%84/#_3","title":"\ud329\ud1a0\ub9ac \ud328\ud134\uacfc \ucee4\ub125\uc158 \uce90\uc2f1","text":"<p><code>create_database_client</code> \ud568\uc218\ub294 \uc124\uc815\uc5d0 \ub530\ub77c \uc801\uc808\ud55c \uad6c\ud604\uccb4\ub97c \uc0dd\uc131\ud55c\ub2e4. \uc5ec\uae30\uc5d0 <code>lazy_static</code> \uae30\ubc18 \uce90\uc2f1\uc744 \uc801\uc6a9\ud574 \ubd88\ud544\uc694\ud55c \ud074\ub77c\uc774\uc5b8\ud2b8 \uc7ac\uc0dd\uc131\uc744 \ubc29\uc9c0\ud588\ub2e4.</p> <pre><code>lazy_static! {\n    static ref MYSQL_CLIENT_CACHE: Mutex&lt;Option&lt;Arc&lt;MysqlClient&gt;&gt;&gt; = Mutex::new(None);\n    static ref POSTGRES_CLIENT_CACHE: Mutex&lt;Option&lt;Arc&lt;PostgresClient&gt;&gt;&gt; = Mutex::new(None);\n}\n\npub fn create_database_client(config: &amp;AppConfig) -&gt; Box&lt;dyn DatabaseClient&gt; {\n    match config.database_type {\n        DatabaseType::PostgreSQL =&gt; {\n            let mut cache = POSTGRES_CLIENT_CACHE.lock().unwrap();\n            if let Some(cached) = cache.as_ref() {\n                return Box::new(PostgreSQLDatabase::new((**cached).clone()));\n            }\n\n            let client = PostgresClient::with_config(&amp;config.postgres);\n            *cache = Some(Arc::new(client.clone()));\n            Box::new(PostgreSQLDatabase::new(client))\n        }\n        DatabaseType::MySQL =&gt; {\n            let mut cache = MYSQL_CLIENT_CACHE.lock().unwrap();\n            if let Some(cached) = cache.as_ref() {\n                return Box::new(MySQLDatabase::new((**cached).clone()));\n            }\n\n            let client = MysqlClient::with_config(&amp;config.mysql);\n            *cache = Some(Arc::new(client.clone()));\n            Box::new(MySQLDatabase::new(client))\n        }\n    }\n}\n</code></pre> <p>\uce90\uc2f1\uc774 \ud544\uc694\ud55c \uc774\uc720\ub294 <code>MysqlClient</code>\uac00 \ub0b4\ubd80\uc5d0 \ucee4\ub125\uc158 \ud480(<code>Pool</code>)\uc744 \uac00\uc9c0\uace0 \uc788\uae30 \ub54c\ubb38\uc774\ub2e4. \ub9e4\ubc88 \uc0c8\ub85c\uc6b4 <code>MysqlClient</code>\ub97c \uc0dd\uc131\ud558\uba74 \ub9e4\ubc88 \uc0c8\ub85c\uc6b4 \ud480\uc774 \ub9cc\ub4e4\uc5b4\uc9c0\uace0, \uae30\uc874 \ucee4\ub125\uc158\uc774 \uc7ac\ud65c\uc6a9\ub418\uc9c0 \uc54a\ub294\ub2e4. <code>Arc</code>\ub85c \uac10\uc2f8\uc11c \uce90\uc2f1\ud558\uba74 \ub3d9\uc77c\ud55c \ud480\uc744 \uacf5\uc720\ud55c\ub2e4.</p> <p>\ubc18\ud658 \ud0c0\uc785\uc774 <code>Box&lt;dyn DatabaseClient&gt;</code>\uc778 \uac83\uc740 \uc774 \ud568\uc218\uc758 \ud638\ucd9c\uc790\uac00 \uad6c\uccb4\uc801\uc778 DB \ud0c0\uc785\uc744 \uc54c \ud544\uc694\uac00 \uc5c6\ub3c4\ub85d \ud558\uae30 \uc704\ud568\uc774\ub2e4. \uc11c\ube44\uc2a4 \uacc4\uce35\uc5d0\uc11c\ub294 \uc624\uc9c1 <code>DatabaseClient</code> \ud2b8\ub808\uc787\uc758 \uba54\uc11c\ub4dc\ub9cc \uc0ac\uc6a9\ud55c\ub2e4.</p> <pre><code>graph TD\n    A[DbFetchService] --&gt;|calls| B[create_database_client]\n    B --&gt;|config.database_type| C{DB Type?}\n    C --&gt;|PostgreSQL| D[POSTGRES_CLIENT_CACHE]\n    C --&gt;|MySQL| E[MYSQL_CLIENT_CACHE]\n    D --&gt;|cache hit| F[PostgreSQLDatabase]\n    D --&gt;|cache miss| G[\uc0c8 PostgresClient \uc0dd\uc131]\n    G --&gt; F\n    E --&gt;|cache hit| H[MySQLDatabase]\n    E --&gt;|cache miss| I[\uc0c8 MysqlClient \uc0dd\uc131]\n    I --&gt; H\n    F --&gt;|Box dyn DatabaseClient| A\n    H --&gt;|Box dyn DatabaseClient| A</code></pre>","tags":["Rust","PostgreSQL","MySQL","\ucd94\uc0c1\ud654","\ud2b8\ub808\uc787"]},{"location":"search-engine/PostgreSQL%EA%B3%BC-MySQL-%EB%8F%99%EC%8B%9C-%EC%A7%80%EC%9B%90%ED%95%98%EB%8A%94-Rust-DB-%EC%B6%94%EC%83%81%ED%99%94-%EB%A0%88%EC%9D%B4%EC%96%B4-%EA%B5%AC%ED%98%84/#dbfetchservice","title":"DbFetchService: \ucd94\uc0c1\ud654 \uacc4\uce35 \uc0ac\uc6a9","text":"<p>\uc778\ub371\uc2f1 \uc11c\ube44\uc2a4\uc5d0\uc11c DB \ucd94\uc0c1\ud654 \uacc4\uce35\uc744 \uc2e4\uc81c\ub85c \uc0ac\uc6a9\ud558\ub294 \ucf54\ub4dc\ub294 \ub2e4\uc74c\uacfc \uac19\ub2e4.</p> <pre><code>pub struct DbFetchService {\n    pg_client: PostgresClient,         // \uae30\ubcf8 PostgreSQL \ud074\ub77c\uc774\uc5b8\ud2b8\n    database_type: DatabaseType,\n    db_client: Option&lt;Box&lt;dyn DatabaseClient&gt;&gt;,  // MySQL\uc6a9 (\uc635\uc158)\n    config: Arc&lt;AppConfig&gt;,\n}\n\nimpl DbFetchService {\n    pub fn new(pg_client: PostgresClient) -&gt; Self {\n        let config = Arc::new(load_config());\n\n        // MySQL\uc778 \uacbd\uc6b0\uc5d0\ub9cc \ucd94\uac00 \ud074\ub77c\uc774\uc5b8\ud2b8 \uc0dd\uc131\n        let db_client = match config.database_type {\n            DatabaseType::MySQL =&gt; Some(create_database_client(&amp;config)),\n            DatabaseType::PostgreSQL =&gt; None,\n        };\n\n        Self {\n            pg_client,\n            database_type: config.database_type.clone(),\n            db_client,\n            config,\n        }\n    }\n\n    pub async fn fetch_data_for_indexing(\n        &amp;self,\n        index_type: &amp;str,\n        interval: &amp;str,\n    ) -&gt; Result&lt;Vec&lt;IndexingData&gt;, AppError&gt; {\n        match self.database_type {\n            DatabaseType::PostgreSQL =&gt; {\n                // PostgreSQL \uc5f0\uacb0 \uac80\uc99d\n                self.validate_connection().await?;\n\n                // Repository \ud328\ud134\uc73c\ub85c \ub370\uc774\ud130 \ud398\uce58\n                let repository = create_repository(index_type, self.pg_client.clone())?;\n                repository.fetch_data(interval).await\n            }\n            DatabaseType::MySQL =&gt; {\n                // DatabaseClient \ud2b8\ub808\uc787\uc73c\ub85c \ub370\uc774\ud130 \ud398\uce58\n                let client = self.db_client.as_ref()\n                    .ok_or(AppError::new(\"500\", \"MySQL client not initialized\"))?;\n\n                let sql_builder = SqlBuilder::new(DatabaseType::MySQL);\n                let sql = sql_builder.build_goods_query(interval);\n\n                let rows = client.query_rows(&amp;sql).await?;\n                self.convert_rows_to_indexing_data(rows, index_type)\n            }\n        }\n    }\n}\n</code></pre> <p>PostgreSQL \uacbd\ub85c\ub294 Repository \ud328\ud134\uc744 \uc0ac\uc6a9\ud558\uace0, MySQL \uacbd\ub85c\ub294 <code>DatabaseClient</code> \ud2b8\ub808\uc787\uc744 \uc9c1\uc811 \uc0ac\uc6a9\ud55c\ub2e4. \uc774 \ube44\ub300\uce6d\uc740 \uc758\ub3c4\uc801\uc774\ub2e4. PostgreSQL\uc740 \uba54\uc778 DB\uc774\ubbc0\ub85c \uc778\ub371\uc2a4 \ud0c0\uc785\ubcc4\ub85c \ud2b9\ud654\ub41c Repository(<code>GoodsRepository</code>, <code>MarketingRepository</code> \ub4f1)\uac00 \uc874\uc7ac\ud558\uc9c0\ub9cc, MySQL\uc740 \uc77c\ubd80 \uace0\uac1d\uc0ac\uc5d0\uc11c\ub9cc \uc0ac\uc6a9\ud558\ubbc0\ub85c \ubc94\uc6a9\uc801\uc778 \uc811\uadfc\uc73c\ub85c \ucda9\ubd84\ud558\ub2e4.</p>","tags":["Rust","PostgreSQL","MySQL","\ucd94\uc0c1\ud654","\ud2b8\ub808\uc787"]},{"location":"search-engine/PostgreSQL%EA%B3%BC-MySQL-%EB%8F%99%EC%8B%9C-%EC%A7%80%EC%9B%90%ED%95%98%EB%8A%94-Rust-DB-%EC%B6%94%EC%83%81%ED%99%94-%EB%A0%88%EC%9D%B4%EC%96%B4-%EA%B5%AC%ED%98%84/#_4","title":"\uc2a4\ud2b8\ub9ac\ubc0d \ucffc\ub9ac\uc758 \uc2e4\uc804 \uc801\uc6a9","text":"<p>\ub300\ub7c9 \ub370\uc774\ud130\ub97c \ucc98\ub9ac\ud560 \ub54c <code>query_rows</code>\ub85c \uc804\uccb4\ub97c \uba54\ubaa8\ub9ac\uc5d0 \uc62c\ub9ac\uba74 OOM \uc704\ud5d8\uc774 \uc788\ub2e4. \uc2a4\ud2b8\ub9ac\ubc0d \ucffc\ub9ac\ub97c \uc0ac\uc6a9\ud558\uba74 \ud55c \ud589\uc529(\ub610\ub294 \uccad\ud06c \ub2e8\uc704\ub85c) \ucc98\ub9ac\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>// PostgreSQL \uc2a4\ud2b8\ub9ac\ubc0d \ucffc\ub9ac\npub async fn stream_query(&amp;self, sql: &amp;str) -&gt; Result&lt;\n    Pin&lt;Box&lt;dyn Stream&lt;Item = Result&lt;Row, Box&lt;dyn Error + Send + Sync&gt;&gt;&gt; + Send&gt;&gt;,\n    Box&lt;dyn Error&gt;,\n&gt; {\n    let client = self.connect().await?;\n\n    // PostgreSQL\uc758 \uc11c\ubc84\uc0ac\uc774\ub4dc \ucee4\uc11c\ub97c \ud65c\uc6a9\n    let statement = client.prepare(sql).await?;\n    let row_stream = client.query_raw(&amp;statement, std::iter::empty::&lt;&amp;str&gt;()).await?;\n\n    Ok(Box::pin(row_stream.map(|r| r.map_err(|e| Box::new(e) as Box&lt;dyn Error + Send + Sync&gt;))))\n}\n\n// \uccad\ud06c \uae30\ubc18 \uc2a4\ud2b8\ub9ac\ubc0d (\ub354 \ud070 \ub2e8\uc704\ub85c \ucc98\ub9ac)\npub async fn stream_query_chunked(\n    &amp;self,\n    sql: &amp;str,\n    chunk_size: usize,\n) -&gt; Result&lt;...&gt; {\n    let client = self.connect().await?;\n    let statement = client.prepare(sql).await?;\n    let row_stream = client.query_raw(&amp;statement, std::iter::empty::&lt;&amp;str&gt;()).await?;\n\n    // chunks_timeout\uc73c\ub85c \uc77c\uc815 \ud06c\uae30 \ub610\ub294 \uc2dc\uac04 \ub2e8\uc704\ub85c \ubc30\uce58 \ucc98\ub9ac\n    let chunked = row_stream\n        .chunks(chunk_size)\n        .flat_map(|chunk| {\n            futures::stream::iter(chunk.into_iter())\n        });\n\n    Ok(Box::pin(chunked))\n}\n</code></pre> <p>\uc2a4\ud2b8\ub9ac\ubc0d\uacfc \uc2a4\ud2b8\ub9ac\ubc0d \ubc8c\ud06c \ud504\ub85c\uc138\uc11c\ub97c \uacb0\ud569\ud558\uba74 \uc804\uccb4 \ud30c\uc774\ud504\ub77c\uc778\uc774 \uc644\uc131\ub41c\ub2e4.</p> <pre><code>sequenceDiagram\n    participant DB as Database\n    participant DF as DbFetchService\n    participant CH as mpsc Channel\n    participant SP as StreamingBulkProcessor\n    participant OS as OpenSearch\n\n    DF-&gt;&gt;DB: stream_query_chunked(sql, 5000)\n    loop \uccad\ud06c \ub2e8\uc704\n        DB--&gt;&gt;DF: chunk (5000 rows)\n        DF-&gt;&gt;CH: send(IndexingData)\n        CH--&gt;&gt;SP: receive\n        SP-&gt;&gt;OS: bulk index\n        OS--&gt;&gt;SP: result\n    end</code></pre> <p>\uc774 \ud30c\uc774\ud504\ub77c\uc778\uc5d0\uc11c DB \ud398\uce58\uc640 OpenSearch \uc778\ub371\uc2f1\uc774 \ub3d9\uc2dc\uc5d0 \uc9c4\ud589\ub41c\ub2e4. DB\uc5d0\uc11c \ub2e4\uc74c \uccad\ud06c\ub97c \uc77d\ub294 \ub3d9\uc548 \uc774\uc804 \uccad\ud06c\ub294 OpenSearch\uc5d0 \uc778\ub371\uc2f1\ub418\uace0 \uc788\ub2e4. <code>mpsc</code> \ucc44\ub110\uc774 \uc774 \ub450 \uc791\uc5c5\uc744 \uc5f0\uacb0\ud558\ub294 \ubc84\ud37c \uc5ed\ud560\uc744 \ud55c\ub2e4.</p>","tags":["Rust","PostgreSQL","MySQL","\ucd94\uc0c1\ud654","\ud2b8\ub808\uc787"]},{"location":"search-engine/PostgreSQL%EA%B3%BC-MySQL-%EB%8F%99%EC%8B%9C-%EC%A7%80%EC%9B%90%ED%95%98%EB%8A%94-Rust-DB-%EC%B6%94%EC%83%81%ED%99%94-%EB%A0%88%EC%9D%B4%EC%96%B4-%EA%B5%AC%ED%98%84/#_5","title":"\uceec\ub7fc \ub9e4\ud551 \ud30c\uc77c","text":"<p>DB \uceec\ub7fc\uba85\uacfc OpenSearch \ud544\ub4dc\uba85\uc758 \ub9e4\ud551\uc740 JSON \ud30c\uc77c\ub85c \uad00\ub9ac\ud55c\ub2e4.</p> <pre><code>// columns_map/goods_map.json\n{\n    \"ID\": \"id\",\n    \"GOODS_NO\": \"goodsNo\",\n    \"GOODS_NM\": \"goodsNm\",\n    \"BRAND_NM\": \"brandNm\",\n    \"SALE_PRC\": \"salePrc\",\n    \"DC_RATE\": \"dcRate\",\n    \"DISP_CTG_NO\": \"dispCtgNo\",\n    \"OPTION_LIST\": \"optionList\"\n}\n</code></pre> <p>\uc774 \ub9e4\ud551 \ud30c\uc77c\uc774 \ud544\uc694\ud55c \uc774\uc720\ub294 DB \uc2a4\ud0a4\ub9c8\uc640 \uac80\uc0c9 \uc778\ub371\uc2a4 \uc2a4\ud0a4\ub9c8\uac00 \ub2e4\ub974\uae30 \ub54c\ubb38\uc774\ub2e4. DB\uc5d0\uc11c\ub294 <code>GOODS_NM</code>(\ub300\ubb38\uc790 \uc2a4\ub124\uc774\ud06c\ucf00\uc774\uc2a4)\uc744 \uc0ac\uc6a9\ud558\uc9c0\ub9cc, OpenSearch\uc5d0\uc11c\ub294 <code>goodsNm</code>(\uce74\uba5c\ucf00\uc774\uc2a4)\uc744 \uc0ac\uc6a9\ud55c\ub2e4. \ub610\ud55c DB\uc5d0\ub294 \uc874\uc7ac\ud558\uc9c0\ub9cc \uac80\uc0c9\uc5d0 \ubd88\ud544\uc694\ud55c \uceec\ub7fc\uc744 \ub9e4\ud551\uc5d0\uc11c \uc81c\uc678\ud558\uc5ec \uc778\ub371\uc2a4 \ud06c\uae30\ub97c \uc904\uc778\ub2e4.</p> <p>\uc778\ub371\uc2a4 \ud0c0\uc785\ubcc4\ub85c(goods, marketing, event, ranking, synonym) \ubcc4\ub3c4\uc758 \ub9e4\ud551 \ud30c\uc77c\uc774 \uc874\uc7ac\ud55c\ub2e4. \uc0c8\ub85c\uc6b4 \uc778\ub371\uc2a4 \ud0c0\uc785\uc744 \ucd94\uac00\ud560 \ub54c\ub294 \ub9e4\ud551 JSON \ud30c\uc77c\ub9cc \ucd94\uac00\ud558\uba74 \ub41c\ub2e4.</p>","tags":["Rust","PostgreSQL","MySQL","\ucd94\uc0c1\ud654","\ud2b8\ub808\uc787"]},{"location":"search-engine/PostgreSQL%EA%B3%BC-MySQL-%EB%8F%99%EC%8B%9C-%EC%A7%80%EC%9B%90%ED%95%98%EB%8A%94-Rust-DB-%EC%B6%94%EC%83%81%ED%99%94-%EB%A0%88%EC%9D%B4%EC%96%B4-%EA%B5%AC%ED%98%84/#_6","title":"\ud2b8\ub7ec\ube14\uc288\ud305","text":"","tags":["Rust","PostgreSQL","MySQL","\ucd94\uc0c1\ud654","\ud2b8\ub808\uc787"]},{"location":"search-engine/PostgreSQL%EA%B3%BC-MySQL-%EB%8F%99%EC%8B%9C-%EC%A7%80%EC%9B%90%ED%95%98%EB%8A%94-Rust-DB-%EC%B6%94%EC%83%81%ED%99%94-%EB%A0%88%EC%9D%B4%EC%96%B4-%EA%B5%AC%ED%98%84/#mysql_1","title":"MySQL \ud55c\uae00 \uc778\ucf54\ub529 \ubb38\uc81c","text":"<p>MySQL\uc5d0\uc11c \ud55c\uae00 \uc0c1\ud488\uba85\uc744 \uc77d\uc744 \ub54c <code>MysqlValue::Bytes</code>\ub85c \ub4e4\uc5b4\uc624\ub294\ub370, \uc77c\ubd80 \ub808\uac70\uc2dc \ud14c\uc774\ube14\uc774 <code>latin1</code> \uc778\ucf54\ub529\uc744 \uc0ac\uc6a9\ud558\uace0 \uc788\uc5b4 <code>String::from_utf8</code>\uc774 \uc2e4\ud328\ud558\ub294 \uacbd\uc6b0\uac00 \uc788\uc5c8\ub2e4. \uc5f0\uacb0 \ubb38\uc790\uc5f4\uc5d0 <code>charset=utf8mb4</code>\ub97c \uba85\uc2dc\ud558\uc5ec \ud574\uacb0\ud588\ub2e4.</p> <pre><code>mysql://user:pass@host:3306/db?charset=utf8mb4\n</code></pre>","tags":["Rust","PostgreSQL","MySQL","\ucd94\uc0c1\ud654","\ud2b8\ub808\uc787"]},{"location":"search-engine/PostgreSQL%EA%B3%BC-MySQL-%EB%8F%99%EC%8B%9C-%EC%A7%80%EC%9B%90%ED%95%98%EB%8A%94-Rust-DB-%EC%B6%94%EC%83%81%ED%99%94-%EB%A0%88%EC%9D%B4%EC%96%B4-%EA%B5%AC%ED%98%84/#postgresql_1","title":"PostgreSQL \ub300\ub7c9 \ucffc\ub9ac \ud0c0\uc784\uc544\uc6c3","text":"<p>\uc218\uc2ed\ub9cc \uac74\uc744 \ud55c \ubc88\uc5d0 \uc870\ud68c\ud560 \ub54c PostgreSQL\uc758 <code>statement_timeout</code>\uc5d0 \uac78\ub9ac\ub294 \ubb38\uc81c\uac00 \uc788\uc5c8\ub2e4. \uc778\ub371\uc2f1 \ucffc\ub9ac\ub294 \uc7a5\uc2dc\uac04 \uc2e4\ud589\ub418\ubbc0\ub85c config\uc5d0\uc11c \ubcc4\ub3c4\uc758 \ud0c0\uc784\uc544\uc6c3\uc744 \uc124\uc815\ud588\ub2e4.</p> <pre><code>pub struct PostgresConfig {\n    pub statement_timeout: Duration,     // \uc77c\ubc18 \ucffc\ub9ac: 30\ucd08\n    pub connection_timeout: Duration,    // \uc5f0\uacb0: 10\ucd08\n}\n</code></pre> <p>\uc778\ub371\uc2f1 \uc804\uc6a9 \uc5f0\uacb0\uc5d0\uc11c\ub294 <code>statement_timeout</code>\uc744 30\ubd84\uc73c\ub85c \uc124\uc815\ud588\ub2e4. \uc77c\ubc18 \ucffc\ub9ac \uc5f0\uacb0\uacfc \uc778\ub371\uc2f1 \uc5f0\uacb0\uc758 \ud0c0\uc784\uc544\uc6c3\uc744 \ubd84\ub9ac\ud558\ub294 \uac83\uc774 \ud575\uc2ec\uc774\ub2e4.</p>","tags":["Rust","PostgreSQL","MySQL","\ucd94\uc0c1\ud654","\ud2b8\ub808\uc787"]},{"location":"search-engine/PostgreSQL%EA%B3%BC-MySQL-%EB%8F%99%EC%8B%9C-%EC%A7%80%EC%9B%90%ED%95%98%EB%8A%94-Rust-DB-%EC%B6%94%EC%83%81%ED%99%94-%EB%A0%88%EC%9D%B4%EC%96%B4-%EA%B5%AC%ED%98%84/#mutex","title":"\ub3d9\uc2dc \uc811\uadfc \uc2dc Mutex \ub370\ub4dc\ub77d","text":"<p>\ucd08\uae30\uc5d0\ub294 <code>MYSQL_CLIENT_CACHE</code>\ub97c <code>RwLock</code>\uc73c\ub85c \uad6c\ud604\ud588\ub2e4\uac00 \ub3d9\uc2dc \uc778\ub371\uc2f1 \uc694\uccad\uc5d0\uc11c \ub370\ub4dc\ub77d\uc774 \ubc1c\uc0dd\ud588\ub2e4. \uc6d0\uc778\uc740 <code>RwLock</code>\uc758 \uc77d\uae30 \uc7a0\uae08\uc744 \ubcf4\uc720\ud55c \uc0c1\ud0dc\uc5d0\uc11c \uce90\uc2dc \ubbf8\uc2a4 \uc2dc \uc4f0\uae30 \uc7a0\uae08\uc744 \uc694\uccad\ud558\ub294 \ud328\ud134\uc774\uc5c8\ub2e4. <code>Mutex</code>\ub85c \ubcc0\uacbd\ud558\uace0, \uc7a0\uae08 \ubcf4\uc720 \uc2dc\uac04\uc744 \ucd5c\uc18c\ud654\ud558\uc5ec \ud574\uacb0\ud588\ub2e4.</p>","tags":["Rust","PostgreSQL","MySQL","\ucd94\uc0c1\ud654","\ud2b8\ub808\uc787"]},{"location":"search-engine/PostgreSQL%EA%B3%BC-MySQL-%EB%8F%99%EC%8B%9C-%EC%A7%80%EC%9B%90%ED%95%98%EB%8A%94-Rust-DB-%EC%B6%94%EC%83%81%ED%99%94-%EB%A0%88%EC%9D%B4%EC%96%B4-%EA%B5%AC%ED%98%84/#_7","title":"\uc131\uacfc\uc640 \ud68c\uace0","text":"<p>DB \ucd94\uc0c1\ud654 \ub808\uc774\uc5b4\ub97c \ub3c4\uc785\ud55c \ud6c4 \uc0c8\ub85c\uc6b4 \uace0\uac1d\uc0ac \uc628\ubcf4\ub529 \uc2dc\uac04\uc774 \ud06c\uac8c \ub2e8\ucd95\ub418\uc5c8\ub2e4. PostgreSQL \uace0\uac1d\uc0ac\ub294 \uc124\uc815 \ud30c\uc77c\ub9cc \ubcc0\uacbd\ud558\uba74 \ub418\uace0, MySQL \uace0\uac1d\uc0ac\ub294 <code>database_type</code>\uc744 <code>MySQL</code>\ub85c \uc124\uc815\ud558\uace0 \uc5f0\uacb0 \uc815\ubcf4\ub97c \ucd94\uac00\ud558\uba74 \ub3d9\uc77c\ud55c \uc778\ub371\uc2f1 \ud30c\uc774\ud504\ub77c\uc778\uc774 \ub3d9\uc791\ud55c\ub2e4. NestJS \ubc84\uc804\uc5d0\uc11c\ub294 \uace0\uac1d\uc0ac\ubcc4\ub85c \ucf54\ub4dc \ube0c\ub79c\uce58\ub97c \uad00\ub9ac\ud574\uc57c \ud588\ub358 \uac83\uacfc \ube44\uad50\ud558\uba74 \uc6b4\uc601 \ubcf5\uc7a1\ub3c4\uac00 \ud68d\uae30\uc801\uc73c\ub85c \uc904\uc5c8\ub2e4.</p> <p>Rust\uc758 \ud2b8\ub808\uc787 \uc2dc\uc2a4\ud15c\uc740 \uc774\ub7f0 \ucd94\uc0c1\ud654\uc5d0 \ub9e4\uc6b0 \uc801\ud569\ud588\ub2e4. \ucef4\ud30c\uc77c \ud0c0\uc784\uc5d0 <code>DatabaseClient</code>\ub97c \uad6c\ud604\ud558\ub294 \ubaa8\ub4e0 \ud0c0\uc785\uc774 \ud544\uc694\ud55c \uba54\uc11c\ub4dc\ub97c \uc81c\uacf5\ud558\ub294\uc9c0 \uac80\uc99d\ud558\ubbc0\ub85c, \uc0c8\ub85c\uc6b4 DB\ub97c \ucd94\uac00\ud560 \ub54c(\uc608: Oracle) \ub204\ub77d\ub418\ub294 \uba54\uc11c\ub4dc\uac00 \uc5c6\ub2e4. \ube44\ub3d9\uae30 \ud2b8\ub808\uc787\uc758 \ud0c0\uc785 \uc2dc\uadf8\ub2c8\ucc98\uac00 \ubcf5\uc7a1\ud55c \uac83\uc740 \ub2e8\uc810\uc774\uc9c0\ub9cc, \ud55c \ubc88 \uc815\uc758\ud558\uba74 \uc0ac\uc6a9\ud558\ub294 \ucabd\uc5d0\uc11c\ub294 DB \uc885\ub958\ub97c \uc804\ud600 \uc2e0\uacbd \uc4f0\uc9c0 \uc54a\uc544\ub3c4 \ub41c\ub2e4.</p> <p>\ub0a8\uc740 \uacfc\uc81c\ub85c\ub294 Oracle DB \uc9c0\uc6d0, \ucee4\ub125\uc158 \ud480 \ud1b5\ud569(PostgreSQL\uc5d0\ub3c4 \ub0b4\uc7a5 \ud480 \uc801\uc6a9), \uadf8\ub9ac\uace0 \uc2a4\ud0a4\ub9c8 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc790\ub3d9\ud654\uac00 \uc788\ub2e4. \ud2b9\ud788 \ucee4\uba38\uc2a4 \ub3c4\uba54\uc778\uc5d0\uc11c\ub294 \uace0\uac1d\uc0ac\ub9c8\ub2e4 \ud14c\uc774\ube14 \uc2a4\ud0a4\ub9c8\uac00 \ubbf8\ubb18\ud558\uac8c \ub2e4\ub978 \uacbd\uc6b0\uac00 \uc788\uc5b4, \ub9e4\ud551 \ud30c\uc77c\uc744 \uc790\ub3d9\uc73c\ub85c \uc0dd\uc131\ud558\ub294 \ub3c4\uad6c\uac00 \ud544\uc694\ud558\ub2e4.</p>","tags":["Rust","PostgreSQL","MySQL","\ucd94\uc0c1\ud654","\ud2b8\ub808\uc787"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90-Redis-%EC%BA%90%EC%8B%B1-%EC%A0%81%EC%9A%A9%EA%B8%B0/","title":"Rust \uac80\uc0c9 \uc5d4\uc9c4\uc5d0 Redis \uce90\uc2f1 \uc801\uc6a9\uae30","text":"","tags":["Rust","Redis","\uce90\uc2f1","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","\uc131\ub2a5\ucd5c\uc801\ud654"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90-Redis-%EC%BA%90%EC%8B%B1-%EC%A0%81%EC%9A%A9%EA%B8%B0/#rust-redis","title":"Rust \uac80\uc0c9 \uc5d4\uc9c4\uc5d0 Redis \uce90\uc2f1 \uc801\uc6a9\uae30","text":"","tags":["Rust","Redis","\uce90\uc2f1","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","\uc131\ub2a5\ucd5c\uc801\ud654"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90-Redis-%EC%BA%90%EC%8B%B1-%EC%A0%81%EC%9A%A9%EA%B8%B0/#_1","title":"\uac1c\uc694","text":"<p>\ucee4\uba38\uc2a4 \uac80\uc0c9 \uc5d4\uc9c4\uc744 Rust(Axum)\ub85c \uc6b4\uc601\ud558\uba74\uc11c, \uac80\uc0c9 \uc694\uccad\uc774 \ub4e4\uc5b4\uc62c \ub54c\ub9c8\ub2e4 OpenSearch\uc5d0 \uc778\ub371\uc2a4 \ub9e4\ud551 \uc815\ubcf4\ub97c \uc870\ud68c\ud558\ub294 \uc624\ubc84\ud5e4\ub4dc\uac00 \uc810\uc810 \ub208\uc5d0 \ub744\uae30 \uc2dc\uc791\ud588\ub2e4. \uc0c1\ud488 \uac80\uc0c9, \ub9c8\ucf00\ud305 \uac80\uc0c9, \uc774\ubca4\ud2b8 \uac80\uc0c9 \ub4f1 \ub2e4\uc591\ud55c \uc778\ub371\uc2a4 \ud0c0\uc785\ub9c8\ub2e4 \ud544\ub4dc \uc124\uc815(\uc5b4\ub5a4 \ud544\ub4dc\uac00 exact match\uc778\uc9c0, phrase match\uc778\uc9c0, primary/secondary\uc778\uc9c0)\uc744 \ub9e4\ubc88 OpenSearch \ud074\ub7ec\uc2a4\ud130\uc5d0 \uc9c8\uc758\ud558\uace0 \uc788\uc5c8\ub294\ub370, \uc774 \uc815\ubcf4\ub294 \uc778\ub371\uc2f1 \uc2dc\uc810\uc5d0\ub9cc \ubcc0\uacbd\ub418\uace0 \uac80\uc0c9 \uc2dc\uc810\uc5d0\ub294 \uc0ac\uc2e4\uc0c1 \ubd88\ubcc0 \ub370\uc774\ud130\ub2e4.</p> <p>Redis \uce90\uc2f1\uc744 \ub3c4\uc785\ud558\uae30\ub85c \uacb0\uc815\ud55c \uc774\uc720\ub294 \uba85\ud655\ud588\ub2e4:</p> <ul> <li>\ud544\ub4dc \uc124\uc815 \uc815\ubcf4\ub294 \ubcc0\uacbd \ube48\ub3c4\uac00 \uadf9\ud788 \ub0ae\ub2e4 (\uc778\ub371\uc2f1 \uc2dc\uc5d0\ub9cc \ubcc0\uacbd)</li> <li>\uac80\uc0c9 \uc694\uccad\ub9c8\ub2e4 \ub3d9\uc77c\ud55c \ub9e4\ud551 \uc815\ubcf4\ub97c \ubc18\ubcf5 \uc870\ud68c\ud558\ub294 \uac83\uc740 \ub0ad\ube44\ub2e4</li> <li>Redis\ub294 \uc774\ubbf8 \uc778\ud504\ub77c\uc5d0 \uc874\uc7ac\ud558\uace0 \uc788\uc5c8\ub2e4 (\uae30\uc874\uc5d0 \uac80\uc0c9 \uacb0\uacfc \uc784\uc2dc \uc800\uc7a5 \ub4f1\uc5d0 \ud65c\uc6a9)</li> <li>Rust\uc758 \ube44\ub3d9\uae30 Redis \ud074\ub77c\uc774\uc5b8\ud2b8\uac00 \ucda9\ubd84\ud788 \uc131\uc219\ud55c \uc0c1\ud0dc\uc600\ub2e4</li> </ul> <p>\uc774 \uae00\uc5d0\uc11c\ub294 Rust \uac80\uc0c9 \uc5d4\uc9c4\uc5d0 Redis \uce90\uc2f1 \ub808\uc774\uc5b4\ub97c \uc124\uacc4\ud558\uace0 \uc801\uc6a9\ud55c \uc804 \uacfc\uc815\uc744 \ub2e4\ub8ec\ub2e4.</p>","tags":["Rust","Redis","\uce90\uc2f1","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","\uc131\ub2a5\ucd5c\uc801\ud654"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90-Redis-%EC%BA%90%EC%8B%B1-%EC%A0%81%EC%9A%A9%EA%B8%B0/#_2","title":"\uc544\ud0a4\ud14d\ucc98 \uc124\uacc4","text":"","tags":["Rust","Redis","\uce90\uc2f1","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","\uc131\ub2a5\ucd5c\uc801\ud654"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90-Redis-%EC%BA%90%EC%8B%B1-%EC%A0%81%EC%9A%A9%EA%B8%B0/#_3","title":"\uce90\uc2f1 \ub300\uc0c1 \uc120\uc815","text":"<p>\uac80\uc0c9 \uc5d4\uc9c4\uc5d0\uc11c \uce90\uc2f1\ud560 \uc218 \uc788\ub294 \ub370\uc774\ud130\ub294 \uc5ec\ub7ec \uc885\ub958\uac00 \uc788\ub2e4. \ucc98\uc74c\uc5d0\ub294 \uac80\uc0c9 \uacb0\uacfc \uc790\uccb4\ub97c \uce90\uc2f1\ud558\ub294 \ubc29\uc548\ub3c4 \uace0\ub824\ud588\uc9c0\ub9cc, \ucee4\uba38\uc2a4 \ub370\uc774\ud130\ub294 \uac00\uaca9/\uc7ac\uace0 \ubcc0\ub3d9\uc774 \ube48\ubc88\ud558\uc5ec \uce90\uc2dc \ubb34\ud6a8\ud654 \uc804\ub7b5\uc774 \ubcf5\uc7a1\ud574\uc9c4\ub2e4. \uacb0\uad6d \uac00\uc7a5 \ud6a8\uacfc\uc801\uc778 \uce90\uc2f1 \ub300\uc0c1\uc73c\ub85c \ud544\ub4dc \uc124\uc815 \uc815\ubcf4(Field Configuration)\ub97c \uc120\ud0dd\ud588\ub2e4.</p> <p>\ud544\ub4dc \uc124\uc815\uc774\ub780 OpenSearch \uc778\ub371\uc2a4\uc758 \ub9e4\ud551 \uc815\ubcf4\ub97c \uae30\ubc18\uc73c\ub85c \uac80\uc0c9 \ucffc\ub9ac\ub97c \uad6c\uc131\ud560 \ub54c \uc0ac\uc6a9\ud558\ub294 \uba54\ud0c0\ub370\uc774\ud130\ub2e4. \uc5b4\ub5a4 \ud544\ub4dc\uc5d0 \ub300\ud574 exact match\ub97c \uc801\uc6a9\ud560\uc9c0, phrase match\ub97c \uc801\uc6a9\ud560\uc9c0, BM25 \uc2a4\ucf54\uc5b4\ub9c1\uc5d0\uc11c \uc5b4\ub5a4 \ud544\ub4dc\ub97c primary\ub85c \uc0ac\uc6a9\ud560\uc9c0 \ub4f1\uc758 \uc815\ubcf4\uac00 \uc5ec\uae30\uc5d0 \ud3ec\ud568\ub41c\ub2e4.</p>","tags":["Rust","Redis","\uce90\uc2f1","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","\uc131\ub2a5\ucd5c\uc801\ud654"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90-Redis-%EC%BA%90%EC%8B%B1-%EC%A0%81%EC%9A%A9%EA%B8%B0/#_4","title":"\uce90\uc2dc \ub124\uc784\uc2a4\ud398\uc774\uc2a4 \uc124\uacc4","text":"<p>Redis\uc5d0 \uc800\uc7a5\ud560 \ub54c \ud0a4 \ucda9\ub3cc\uc744 \ubc29\uc9c0\ud558\uace0 \uad00\ub9ac \ud3b8\uc758\uc131\uc744 \ub192\uc774\uae30 \uc704\ud574 \ub124\uc784\uc2a4\ud398\uc774\uc2a4 \uae30\ubc18\uc758 \ud0a4 \uad6c\uc870\ub97c \uc124\uacc4\ud588\ub2e4.</p> <pre><code>search_rust:\n  \u251c\u2500\u2500 field_config:{index_name}:{index_type}     # \ud544\ub4dc \uc124\uc815 \uce90\uc2dc\n  \u251c\u2500\u2500 search_result:{query_hash}:{index_name}    # \uac80\uc0c9 \uacb0\uacfc \uce90\uc2dc (\ud655\uc7a5\uc6a9)\n  \u251c\u2500\u2500 aggregation:{agg_hash}:{index_name}        # \uc9d1\uacc4 \uacb0\uacfc \uce90\uc2dc (\ud655\uc7a5\uc6a9)\n  \u251c\u2500\u2500 synonym:{lang_cd}                          # \ub3d9\uc758\uc5b4 \uce90\uc2dc (\ud655\uc7a5\uc6a9)\n  \u2514\u2500\u2500 user_dictionary:{lang_cd}                  # \uc0ac\uc6a9\uc790 \uc0ac\uc804 \uce90\uc2dc (\ud655\uc7a5\uc6a9)\n</code></pre> <p><code>search_rust</code>\ub77c\ub294 \ucd5c\uc0c1\uc704 \ub124\uc784\uc2a4\ud398\uc774\uc2a4\ub97c \ub450\uace0, \uadf8 \uc544\ub798\uc5d0 \ub370\uc774\ud130 \uc720\ud615\ubcc4 \uc811\ub450\uc0ac\ub97c \ubd99\uc774\ub294 \uad6c\uc870\ub2e4. \ud604\uc7ac Phase 1\uc5d0\uc11c\ub294 <code>field_config</code>\ub9cc \uad6c\ud604\ud558\uace0, \ub098\uba38\uc9c0\ub294 \ud5a5\ud6c4 \ud655\uc7a5 \ud3ec\uc778\ud2b8\ub85c \ub0a8\uaca8\ub450\uc5c8\ub2e4.</p> <pre><code>graph TD\n    A[\uac80\uc0c9 \uc694\uccad] --&gt; B{Redis \uce90\uc2dc \uc870\ud68c}\n    B --&gt;|Cache Hit| C[\uce90\uc2dc\ub41c \ud544\ub4dc \uc124\uc815 \ubc18\ud658]\n    B --&gt;|Cache Miss| D[OpenSearch \ub9e4\ud551 \uc870\ud68c]\n    D --&gt; E[\ud544\ub4dc \uc124\uc815 \ud30c\uc2f1]\n    E --&gt; F[Redis\uc5d0 \uce90\uc2dc \uc800\uc7a5]\n    F --&gt; C\n    C --&gt; G[\uac80\uc0c9 \ucffc\ub9ac \uad6c\uc131]\n    G --&gt; H[OpenSearch \uac80\uc0c9 \uc2e4\ud589]\n    H --&gt; I[\uacb0\uacfc \ubc18\ud658]</code></pre>","tags":["Rust","Redis","\uce90\uc2f1","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","\uc131\ub2a5\ucd5c\uc801\ud654"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90-Redis-%EC%BA%90%EC%8B%B1-%EC%A0%81%EC%9A%A9%EA%B8%B0/#_5","title":"\uc804\uccb4 \ud750\ub984","text":"<p>\uce90\uc2f1\uc774 \uc801\uc6a9\ub41c \uac80\uc0c9 \ud750\ub984\uc740 \ub2e4\uc74c\uacfc \uac19\ub2e4:</p> <ol> <li>\uac80\uc0c9 \uc694\uccad\uc774 \ub4e4\uc5b4\uc624\uba74, \uba3c\uc800 Redis\uc5d0\uc11c \ud574\ub2f9 \uc778\ub371\uc2a4+\ud0c0\uc785 \uc870\ud569\uc758 \ud544\ub4dc \uc124\uc815\uc744 \uc870\ud68c\ud55c\ub2e4.</li> <li>Cache Hit\uc774\uba74 \ubc14\ub85c \uce90\uc2dc\ub41c \ud544\ub4dc \uc124\uc815\uc744 \uc0ac\uc6a9\ud558\uc5ec \uac80\uc0c9 \ucffc\ub9ac\ub97c \uad6c\uc131\ud55c\ub2e4.</li> <li>Cache Miss\uc774\uba74 OpenSearch\uc5d0 \ub9e4\ud551 \uc815\ubcf4\ub97c \uc9c8\uc758\ud558\uace0, \ud30c\uc2f1\ud55c \uacb0\uacfc\ub97c Redis\uc5d0 TTL\uacfc \ud568\uaed8 \uc800\uc7a5\ud55c \ud6c4 \uc0ac\uc6a9\ud55c\ub2e4.</li> <li>\uc778\ub371\uc2f1\uc774 \uc2e4\ud589\ub418\uba74 \ud574\ub2f9 \uc778\ub371\uc2a4\uc758 \uce90\uc2dc\ub97c \ubb34\ud6a8\ud654\ud55c\ub2e4.</li> </ol>","tags":["Rust","Redis","\uce90\uc2f1","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","\uc131\ub2a5\ucd5c\uc801\ud654"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90-Redis-%EC%BA%90%EC%8B%B1-%EC%A0%81%EC%9A%A9%EA%B8%B0/#redis","title":"Redis \ud074\ub77c\uc774\uc5b8\ud2b8 \uad6c\ud604","text":"","tags":["Rust","Redis","\uce90\uc2f1","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","\uc131\ub2a5\ucd5c\uc801\ud654"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90-Redis-%EC%BA%90%EC%8B%B1-%EC%A0%81%EC%9A%A9%EA%B8%B0/#_6","title":"\uc758\uc874\uc131 \uc124\uc815","text":"<p>Cargo.toml\uc5d0 Redis \uc758\uc874\uc131\uc744 \ucd94\uac00\ud588\ub2e4. <code>tokio-comp</code> \ud53c\ucc98\ub97c \ud65c\uc131\ud654\ud558\uc5ec tokio \ub7f0\ud0c0\uc784\uacfc\uc758 \ud638\ud658\uc131\uc744 \ud655\ubcf4\ud55c\ub2e4.</p> <pre><code>[dependencies]\nredis = { version = \"0.24\", features = [\"tokio-comp\"] }\n</code></pre>","tags":["Rust","Redis","\uce90\uc2f1","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","\uc131\ub2a5\ucd5c\uc801\ud654"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90-Redis-%EC%BA%90%EC%8B%B1-%EC%A0%81%EC%9A%A9%EA%B8%B0/#_7","title":"\uae00\ub85c\ubc8c \ud074\ub77c\uc774\uc5b8\ud2b8 \ucd08\uae30\ud654","text":"<p>Redis \ud074\ub77c\uc774\uc5b8\ud2b8\ub294 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uc804\uccb4\uc5d0\uc11c \uacf5\uc720\ud574\uc57c \ud558\ubbc0\ub85c, <code>once_cell</code>\uc758 <code>OnceCell</code>\uc744 \uc0ac\uc6a9\ud558\uc5ec \uc2f1\uae00\ud134 \ud328\ud134\uc73c\ub85c \uad6c\ud604\ud588\ub2e4. <code>MultiplexedConnection</code>\uc744 \uc0ac\uc6a9\ud558\uba74 \ub2e8\uc77c TCP \uc5f0\uacb0 \uc704\uc5d0\uc11c \uc5ec\ub7ec \uc694\uccad\uc744 \ub2e4\uc911\ud654\ud560 \uc218 \uc788\uc5b4, \ucee4\ub125\uc158 \ud480 \uc5c6\uc774\ub3c4 \ub192\uc740 \ub3d9\uc2dc\uc131\uc744 \ud655\ubcf4\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>use once_cell::sync::OnceCell;\nuse redis::{aio::MultiplexedConnection, Client, RedisError};\nuse std::sync::Arc;\n\nstatic REDIS_CLIENT: OnceCell&lt;Arc&lt;MultiplexedConnection&gt;&gt; = OnceCell::new();\n\npub async fn init_redis_client(config: &amp;AppConfig) -&gt; Result&lt;(), RedisError&gt; {\n    let redis_url = config.redis_url.as_ref().ok_or_else(|| {\n        RedisError::from((\n            redis::ErrorKind::InvalidClientConfig,\n            \"Redis URL not configured\",\n        ))\n    })?;\n\n    let client = Client::open(redis_url.as_str())?;\n    let connection = client.get_multiplexed_async_connection().await?;\n\n    REDIS_CLIENT.set(Arc::new(connection)).map_err(|_| {\n        RedisError::from((\n            redis::ErrorKind::IoError,\n            \"Failed to initialize Redis client\",\n        ))\n    })?;\n\n    // \uc5f0\uacb0 \ud14c\uc2a4\ud2b8\n    match test_connection().await {\n        Ok(_) =&gt; info!(\"Redis connection test passed\"),\n        Err(e) =&gt; {\n            warn!(\"Redis connection test failed: {}\", e);\n            return Err(e);\n        }\n    }\n\n    Ok(())\n}\n\npub async fn get_redis_client() -&gt; Result&lt;Arc&lt;MultiplexedConnection&gt;, RedisError&gt; {\n    REDIS_CLIENT.get().cloned().ok_or_else(|| {\n        RedisError::from((redis::ErrorKind::IoError, \"Redis client not initialized\"))\n    })\n}\n</code></pre> <p>\uc5ec\uae30\uc11c \ud575\uc2ec\uc801\uc778 \uc124\uacc4 \uacb0\uc815\uc774 \ud558\ub098 \uc788\ub2e4. <code>MultiplexedConnection</code>\uc744 <code>Arc</code>\ub85c \uac10\uc2f8\uc11c \uacf5\uc720\ud558\ub294 \ubc29\uc2dd\uc744 \uc120\ud0dd\ud588\ub294\ub370, \uc774\ub294 redis crate\uc758 <code>MultiplexedConnection</code>\uc774 \ub0b4\ubd80\uc801\uc73c\ub85c \uc774\ubbf8 \ub3d9\uae30\ud654 \uba54\ucee4\ub2c8\uc998\uc744 \uac00\uc9c0\uace0 \uc788\uae30 \ub54c\ubb38\uc774\ub2e4. <code>clone()</code>\uc744 \ud638\ucd9c\ud558\uba74 \uc2e4\uc81c\ub85c\ub294 \uac19\uc740 \uc5f0\uacb0\uc744 \uacf5\uc720\ud558\ub294 \ud578\ub4e4\uc774 \ubcf5\uc81c\ub41c\ub2e4.</p>","tags":["Rust","Redis","\uce90\uc2f1","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","\uc131\ub2a5\ucd5c\uc801\ud654"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90-Redis-%EC%BA%90%EC%8B%B1-%EC%A0%81%EC%9A%A9%EA%B8%B0/#_8","title":"\uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uc2dc\uc791 \uc2dc \ucd08\uae30\ud654","text":"<p>main \ud568\uc218\uc5d0\uc11c Redis \ud074\ub77c\uc774\uc5b8\ud2b8\ub97c \ucd08\uae30\ud654\ud55c\ub2e4. \uc5ec\uae30\uc11c \uc911\uc694\ud55c \uc810\uc740 Redis \uc5f0\uacb0 \uc2e4\ud328\uac00 \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uc804\uccb4\ub97c \uc911\ub2e8\uc2dc\ud0a4\uc9c0 \uc54a\ub3c4\ub85d \ucc98\ub9ac\ud55c \uac83\uc774\ub2e4. Redis\ub294 \uce90\uc2f1 \ub808\uc774\uc5b4\uc774\ubbc0\ub85c, \uc0ac\uc6a9\ud560 \uc218 \uc5c6\ub354\ub77c\ub3c4 \uac80\uc0c9 \uae30\ub2a5 \uc790\uccb4\ub294 \uc815\uc0c1 \ub3d9\uc791\ud574\uc57c \ud55c\ub2e4.</p> <pre><code>#[tokio::main]\nasync fn main() {\n    let config = config::load_config();\n\n    // Redis \ud074\ub77c\uc774\uc5b8\ud2b8 \ucd08\uae30\ud654 (\uc2e4\ud328\ud574\ub3c4 \uc571\uc740 \uacc4\uc18d \ub3d9\uc791)\n    if let Err(e) = init_redis_client(&amp;config).await {\n        warn!(\n            \"Failed to initialize Redis client: {}. Caching will be disabled.\",\n            e\n        );\n    }\n\n    // ... \uc11c\ubc84 \uc2dc\uc791\n}\n</code></pre> <p><code>warn!</code> \ub808\ubca8\ub85c \ub85c\uadf8\ub97c \ub0a8\uae30\uace0 \uc815\uc0c1\uc801\uc73c\ub85c \uc11c\ubc84\ub97c \uc2dc\uc791\ud55c\ub2e4. \uc774 \ud328\ud134\uc740 \uce90\uc2f1 \ub808\uc774\uc5b4\uc5d0\uc11c \ubc18\ub4dc\uc2dc \uc9c0\ucf1c\uc57c \ud560 \uc6d0\uce59\uc774\ub2e4 - \uce90\uc2dc\uac00 \uc8fd\uc5b4\ub3c4 \uc11c\ube44\uc2a4\ub294 \uc0b4\uc544\uc57c \ud55c\ub2e4.</p>","tags":["Rust","Redis","\uce90\uc2f1","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","\uc131\ub2a5\ucd5c\uc801\ud654"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90-Redis-%EC%BA%90%EC%8B%B1-%EC%A0%81%EC%9A%A9%EA%B8%B0/#_9","title":"\uce90\uc2dc \ub808\uc774\uc5b4 \uad6c\ud604","text":"","tags":["Rust","Redis","\uce90\uc2f1","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","\uc131\ub2a5\ucd5c\uc801\ud654"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90-Redis-%EC%BA%90%EC%8B%B1-%EC%A0%81%EC%9A%A9%EA%B8%B0/#_10","title":"\uce90\uc2dc \ub370\uc774\ud130 \uad6c\uc870","text":"<p>\uce90\uc2dc\uc5d0 \uc800\uc7a5\ud560 \ud544\ub4dc \uc124\uc815 \uad6c\uc870\uccb4\ub97c \uc815\uc758\ud588\ub2e4. \uac80\uc0c9 \ucffc\ub9ac \ube4c\ub354\uac00 \ud544\uc694\ub85c \ud558\ub294 \ud544\ub4dc \ubd84\ub958 \uc815\ubcf4\ub97c \ubaa8\ub450 \ud3ec\ud568\ud55c\ub2e4.</p> <pre><code>#[derive(Debug, Clone, Serialize, Deserialize)]\npub struct CachedIndexFields {\n    pub title_field: Vec&lt;String&gt;,    // exact fields\n    pub exact_fields: Vec&lt;String&gt;,   // phrase fields\n    pub and_fields: Vec&lt;String&gt;,     // primary fields\n    pub or_fields: Vec&lt;String&gt;,      // secondary fields\n    pub like_fields: Vec&lt;String&gt;,    // \ud638\ud658\uc131 \uc720\uc9c0\n    pub analyze_fields: Vec&lt;String&gt;, // \ud638\ud658\uc131 \uc720\uc9c0\n    pub cached_at: u64,              // Unix timestamp\n}\n</code></pre> <p><code>cached_at</code> \ud544\ub4dc\ub294 \ub514\ubc84\uae45\uacfc \ubaa8\ub2c8\ud130\ub9c1\uc744 \uc704\ud574 \uce90\uc2dc \uc2dc\uc810\uc758 \ud0c0\uc784\uc2a4\ud0ec\ud504\ub97c \uae30\ub85d\ud55c\ub2e4. \uae30\uc874 \uc2dc\uc2a4\ud15c\uacfc\uc758 \ud638\ud658\uc131\uc744 \uc704\ud574 <code>like_fields</code>\uc640 <code>analyze_fields</code>\ub3c4 \uc720\uc9c0\ud558\ub418, \uc2e4\uc81c\ub85c\ub294 \uc0ac\uc6a9\ud558\uc9c0 \uc54a\ub294 \ud544\ub4dc\ub2e4.</p>","tags":["Rust","Redis","\uce90\uc2f1","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","\uc131\ub2a5\ucd5c\uc801\ud654"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90-Redis-%EC%BA%90%EC%8B%B1-%EC%A0%81%EC%9A%A9%EA%B8%B0/#_11","title":"\uce90\uc2dc \ud0a4 \uc0dd\uc131","text":"<pre><code>const CACHE_NAMESPACE: &amp;str = \"search_rust\";\nconst FIELD_CONFIG_PREFIX: &amp;str = \"field_config\";\n\nfn generate_cache_key(index_name: &amp;str, index_type: &amp;str) -&gt; String {\n    format!(\n        \"{}:{}:{}:{}\",\n        CACHE_NAMESPACE, FIELD_CONFIG_PREFIX, index_name, index_type\n    )\n}\n</code></pre> <p>\uc2e4\uc81c \uc0dd\uc131\ub418\ub294 \ud0a4 \uc608\uc2dc: <code>search_rust:field_config:test-local-goods-ko:goods</code></p>","tags":["Rust","Redis","\uce90\uc2f1","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","\uc131\ub2a5\ucd5c\uc801\ud654"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90-Redis-%EC%BA%90%EC%8B%B1-%EC%A0%81%EC%9A%A9%EA%B8%B0/#set-with-ttl","title":"\uce90\uc2dc \uc800\uc7a5 (SET with TTL)","text":"<pre><code>pub async fn cache_field_config(\n    index_name: &amp;str,\n    index_type: &amp;str,\n    fields: &amp;CachedIndexFields,\n    ttl_seconds: u64,\n) -&gt; Result&lt;(), Box&lt;dyn std::error::Error + Send + Sync&gt;&gt; {\n    match get_redis_client().await {\n        Ok(client) =&gt; {\n            let mut conn = client.as_ref().clone();\n            let cache_key = generate_cache_key(index_name, index_type);\n            let serialized = serde_json::to_string(fields)?;\n\n            conn.set_ex::&lt;_, _, ()&gt;(&amp;cache_key, &amp;serialized, ttl_seconds)\n                .await?;\n\n            debug!(\n                \"Cached field configuration for {}/{} (TTL: {}s)\",\n                index_name, index_type, ttl_seconds\n            );\n            Ok(())\n        }\n        Err(e) =&gt; {\n            warn!(\"Redis client not available, skipping cache: {}\", e);\n            Ok(()) // \uce90\uc2dc \uc2e4\ud328\ub294 \uce58\uba85\uc801\uc774\uc9c0 \uc54a\uc74c\n        }\n    }\n}\n</code></pre> <p><code>set_ex</code>\ub97c \uc0ac\uc6a9\ud558\uc5ec TTL\uc744 \uc124\uc815\ud55c\ub2e4. \ud544\ub4dc \uc124\uc815\uc740 \uc778\ub371\uc2f1 \uc2dc\uc5d0\ub9cc \ubcc0\uacbd\ub418\ubbc0\ub85c TTL\uc744 \uc0c1\ub2f9\ud788 \uae38\uac8c(1\uc2dc\uac04~24\uc2dc\uac04) \uc124\uc815\ud574\ub3c4 \ubb34\ubc29\ud558\ub2e4. \ub2e4\ub9cc \uc778\ub371\uc2f1 \uc2dc \uba85\uc2dc\uc801 \ubb34\ud6a8\ud654\ub3c4 \ud568\uaed8 \uad6c\ud604\ud588\ub2e4.</p> <p>\uc5d0\ub7ec \ucc98\ub9ac \ud328\ud134\uc5d0 \uc8fc\ubaa9\ud560 \ud544\uc694\uac00 \uc788\ub2e4. Redis \ud074\ub77c\uc774\uc5b8\ud2b8\ub97c \uac00\uc838\uc624\ub294 \ub370 \uc2e4\ud328\ud558\uba74 <code>Ok(())</code>\ub97c \ubc18\ud658\ud55c\ub2e4. \uce90\uc2dc \uc800\uc7a5 \uc2e4\ud328\ub294 \uae30\ub2a5\uc801 \uc624\ub958\uac00 \uc544\ub2c8\ubbc0\ub85c, \ud638\ucd9c\uc790\uc5d0\uac8c \uc5d0\ub7ec\ub97c \uc804\ud30c\ud558\uc9c0 \uc54a\ub294\ub2e4.</p>","tags":["Rust","Redis","\uce90\uc2f1","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","\uc131\ub2a5\ucd5c\uc801\ud654"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90-Redis-%EC%BA%90%EC%8B%B1-%EC%A0%81%EC%9A%A9%EA%B8%B0/#get-with-fallback","title":"\uce90\uc2dc \uc870\ud68c (GET with Fallback)","text":"<pre><code>pub async fn get_cached_field_config(\n    index_name: &amp;str,\n    index_type: &amp;str,\n) -&gt; Result&lt;Option&lt;CachedIndexFields&gt;, Box&lt;dyn std::error::Error + Send + Sync&gt;&gt; {\n    match get_redis_client().await {\n        Ok(client) =&gt; {\n            let mut conn = client.as_ref().clone();\n            let cache_key = generate_cache_key(index_name, index_type);\n\n            match conn.get::&lt;_, String&gt;(&amp;cache_key).await {\n                Ok(cached_data) =&gt; {\n                    match serde_json::from_str::&lt;CachedIndexFields&gt;(&amp;cached_data) {\n                        Ok(fields) =&gt; Ok(Some(fields)),\n                        Err(e) =&gt; {\n                            error!(\"Failed to deserialize cached data: {}\", e);\n                            // \uc190\uc0c1\ub41c \uce90\uc2dc \ub370\uc774\ud130 \uc0ad\uc81c\n                            let _ = conn.del::&lt;_, ()&gt;(&amp;cache_key).await;\n                            Ok(None)\n                        }\n                    }\n                }\n                Err(e) =&gt; {\n                    if e.kind() == redis::ErrorKind::TypeError {\n                        Ok(None) // Cache miss\n                    } else {\n                        error!(\"Redis GET failed: {}\", e);\n                        Ok(None) // \uc5d0\ub7ec \uc2dc\uc5d0\ub3c4 None \ubc18\ud658\ud558\uc5ec DB \ud3f4\ubc31\n                    }\n                }\n            }\n        }\n        Err(e) =&gt; {\n            warn!(\"Redis client not available: {}\", e);\n            Ok(None)\n        }\n    }\n}\n</code></pre> <p>\uc774 \ud568\uc218\uc5d0\uc11c \uc911\uc694\ud55c \ubc29\uc5b4 \ub85c\uc9c1\uc774 \ub450 \uac00\uc9c0 \uc788\ub2e4:</p> <ol> <li> <p>\uc5ed\uc9c1\ub82c\ud654 \uc2e4\ud328 \uc2dc \uce90\uc2dc \uc0ad\uc81c: \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uc5c5\ub370\uc774\ud2b8 \ub4f1\uc73c\ub85c <code>CachedIndexFields</code> \uad6c\uc870\uac00 \ubcc0\uacbd\ub418\uba74 \uae30\uc874 \uce90\uc2dc \ub370\uc774\ud130\ub97c \uc5ed\uc9c1\ub82c\ud654\ud560 \uc218 \uc5c6\ub2e4. \uc774 \uacbd\uc6b0 \uc190\uc0c1\ub41c \uce90\uc2dc\ub97c \uc0ad\uc81c\ud558\uace0 <code>None</code>\uc744 \ubc18\ud658\ud558\uc5ec DB\uc5d0\uc11c \ub2e4\uc2dc \uc870\ud68c\ud558\ub3c4\ub85d \ud55c\ub2e4.</p> </li> <li> <p>\ubaa8\ub4e0 \uc5d0\ub7ec \uacbd\ub85c\uc5d0\uc11c None \ubc18\ud658: Redis \uad00\ub828 \uc5b4\ub5a4 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud558\ub354\ub77c\ub3c4 <code>None</code>\uc744 \ubc18\ud658\ud55c\ub2e4. \ud638\ucd9c\uc790\ub294 <code>None</code>\uc744 \ubc1b\uc73c\uba74 \uc6d0\ub798 \uacbd\ub85c(OpenSearch \uc870\ud68c)\ub85c \ud3f4\ubc31\ud55c\ub2e4.</p> </li> </ol>","tags":["Rust","Redis","\uce90\uc2f1","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","\uc131\ub2a5\ucd5c\uc801\ud654"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90-Redis-%EC%BA%90%EC%8B%B1-%EC%A0%81%EC%9A%A9%EA%B8%B0/#_12","title":"\uce90\uc2dc \ubb34\ud6a8\ud654","text":"<p>\uac1c\ubcc4 \uc778\ub371\uc2a4 \uce90\uc2dc \ubb34\ud6a8\ud654\uc640 \uc804\uccb4 \ubb34\ud6a8\ud654, \ub450 \uac00\uc9c0 \uc218\uc900\uc744 \uad6c\ud604\ud588\ub2e4.</p> <pre><code>// \ud2b9\uc815 \uc778\ub371\uc2a4\uc758 \uce90\uc2dc \ubb34\ud6a8\ud654\npub async fn invalidate_field_config_cache(\n    index_name: &amp;str,\n    index_type: &amp;str,\n) -&gt; Result&lt;(), Box&lt;dyn std::error::Error + Send + Sync&gt;&gt; {\n    match get_redis_client().await {\n        Ok(client) =&gt; {\n            let mut conn = client.as_ref().clone();\n            let cache_key = generate_cache_key(index_name, index_type);\n            conn.del::&lt;_, u32&gt;(&amp;cache_key).await?;\n            Ok(())\n        }\n        Err(_) =&gt; Ok(())\n    }\n}\n\n// \ubaa8\ub4e0 \ud544\ub4dc \uc124\uc815 \uce90\uc2dc \ubb34\ud6a8\ud654 (Lua \uc2a4\ud06c\ub9bd\ud2b8 \uc0ac\uc6a9)\npub async fn invalidate_all_field_config_cache(\n) -&gt; Result&lt;(), Box&lt;dyn std::error::Error + Send + Sync&gt;&gt; {\n    match get_redis_client().await {\n        Ok(client) =&gt; {\n            let mut conn = client.as_ref().clone();\n            let pattern = format!(\"{}:{}:*\", CACHE_NAMESPACE, FIELD_CONFIG_PREFIX);\n\n            let script = Script::new(\n                r#\"\n                local keys = redis.call('KEYS', ARGV[1])\n                local deleted = 0\n                for i=1,#keys do\n                    deleted = deleted + redis.call('DEL', keys[i])\n                end\n                return deleted\n                \"#,\n            );\n\n            let deleted: u32 = script.arg(&amp;pattern).invoke_async(&amp;mut conn).await?;\n            debug!(\"Invalidated {} cache entries\", deleted);\n            Ok(())\n        }\n        Err(_) =&gt; Ok(())\n    }\n}\n</code></pre> <p>\uc804\uccb4 \ubb34\ud6a8\ud654\uc5d0\uc11c\ub294 Lua \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc0ac\uc6a9\ud55c\ub2e4. <code>KEYS</code> \uba85\ub839\uc73c\ub85c \ud328\ud134\uc5d0 \ub9e4\uce6d\ub418\ub294 \ud0a4\ub97c \ucc3e\uace0, <code>DEL</code>\ub85c \uc0ad\uc81c\ud558\ub294 \uacfc\uc815\uc744 Redis \uc11c\ubc84 \ub0b4\uc5d0\uc11c \uc6d0\uc790\uc801\uc73c\ub85c \uc218\ud589\ud55c\ub2e4. \ud504\ub85c\ub355\uc158\uc5d0\uc11c <code>KEYS</code> \uba85\ub839\uc740 \uc77c\ubc18\uc801\uc73c\ub85c \ud53c\ud574\uc57c \ud558\uc9c0\ub9cc, <code>search_rust:field_config:*</code> \ud328\ud134\uc5d0 \ub9e4\uce6d\ub418\ub294 \ud0a4 \uc218\uac00 \uc778\ub371\uc2a4 \ud0c0\uc785 \uc218\uc640 \uac19\uc73c\ubbc0\ub85c (\uc218\uc2ed \uac1c \uc774\ud558) \uc131\ub2a5 \ubb38\uc81c\ub294 \uc5c6\ub2e4.</p> <p>\ub124\uc784\uc2a4\ud398\uc774\uc2a4 \uc804\uccb4\ub97c \ub0a0\ub9ac\ub294 \ud568\uc218\ub3c4 \uc788\ub2e4:</p> <pre><code>pub async fn invalidate_all_search_rust_cache(\n) -&gt; Result&lt;(), Box&lt;dyn std::error::Error + Send + Sync&gt;&gt; {\n    // search_rust:* \ud328\ud134\uc73c\ub85c \uc804\uccb4 \uc0ad\uc81c\n    let pattern = format!(\"{}:*\", CACHE_NAMESPACE);\n    // ... Lua \uc2a4\ud06c\ub9bd\ud2b8 \uc2e4\ud589\n}\n</code></pre> <p>\uc774 \ud568\uc218\ub294 \ubc30\ud3ec \uc2dc\ub098 \uc804\uccb4 \uc124\uc815 \ubcc0\uacbd \uc2dc \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \ube44\uc0c1\uc6a9 \ud568\uc218\ub2e4.</p>","tags":["Rust","Redis","\uce90\uc2f1","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","\uc131\ub2a5\ucd5c\uc801\ud654"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90-Redis-%EC%BA%90%EC%8B%B1-%EC%A0%81%EC%9A%A9%EA%B8%B0/#graceful-degradation","title":"Graceful Degradation \uc804\ub7b5","text":"<p>\uce90\uc2f1 \ub808\uc774\uc5b4 \uc124\uacc4\uc5d0\uc11c \uac00\uc7a5 \uc911\uc694\ud558\uac8c \uc0dd\uac01\ud55c \uc6d0\uce59\uc740 Graceful Degradation\uc774\ub2e4. Redis\uac00 \uc5b4\ub5a4 \uc774\uc720\ub85c\ub4e0 \uc0ac\uc6a9 \ubd88\uac00\ub2a5\ud55c \uc0c1\ud669\uc5d0\uc11c\ub3c4 \uac80\uc0c9 \uc11c\ube44\uc2a4\ub294 \uc815\uc0c1 \ub3d9\uc791\ud574\uc57c \ud55c\ub2e4.</p> <pre><code>graph TD\n    A[Redis \ucd08\uae30\ud654] --&gt;|\uc131\uacf5| B[\uce90\uc2f1 \ud65c\uc131\ud654]\n    A --&gt;|\uc2e4\ud328| C[\uce90\uc2f1 \ube44\ud65c\uc131\ud654, \uc11c\ube44\uc2a4 \uc815\uc0c1 \uc6b4\uc601]\n\n    D[\uce90\uc2dc \uc870\ud68c] --&gt;|\uc131\uacf5 + Hit| E[\uce90\uc2dc \ub370\uc774\ud130 \uc0ac\uc6a9]\n    D --&gt;|\uc131\uacf5 + Miss| F[OpenSearch \uc870\ud68c \u2192 \uce90\uc2dc \uc800\uc7a5]\n    D --&gt;|\uc2e4\ud328| G[OpenSearch \uc870\ud68c, \uce90\uc2dc \uc800\uc7a5 \uc2a4\ud0b5]\n\n    H[\uce90\uc2dc \uc800\uc7a5] --&gt;|\uc131\uacf5| I[\uc815\uc0c1]\n    H --&gt;|\uc2e4\ud328| J[warn \ub85c\uadf8\ub9cc \ub0a8\uae30\uace0 \uacc4\uc18d]\n\n    K[\uce90\uc2dc \ubb34\ud6a8\ud654] --&gt;|\uc131\uacf5| L[\uc815\uc0c1]\n    K --&gt;|\uc2e4\ud328| M[\ub2e4\uc74c TTL \ub9cc\ub8cc \uc2dc \uc790\ub3d9 \uac31\uc2e0]</code></pre> <p>\uc774 \uc804\ub7b5\uc744 \ucf54\ub4dc \uc804\ubc18\uc5d0 \uc77c\uad00\ub418\uac8c \uc801\uc6a9\ud588\ub2e4:</p> <ul> <li>\ucd08\uae30\ud654 \uc2e4\ud328: <code>warn!</code> \ub85c\uadf8 \ud6c4 \uc11c\ubc84 \uc815\uc0c1 \uc2dc\uc791</li> <li>\uc870\ud68c \uc2e4\ud328: <code>None</code> \ubc18\ud658 \ud6c4 OpenSearch \ud3f4\ubc31</li> <li>\uc800\uc7a5 \uc2e4\ud328: <code>warn!</code> \ub85c\uadf8 \ud6c4 \uc815\uc0c1 \uc9c4\ud589</li> <li>\ubb34\ud6a8\ud654 \uc2e4\ud328: <code>warn!</code> \ub85c\uadf8 \ud6c4 TTL \ub9cc\ub8cc\uc5d0 \uc758\uc874</li> </ul> <p>\uc774 \ud328\ud134\uc758 \ud575\uc2ec\uc740 \uce90\uc2dc \uad00\ub828 \ucf54\ub4dc\uac00 \uc808\ub300\ub85c \uc5d0\ub7ec\ub97c \uc0c1\uc704\ub85c \uc804\ud30c\ud558\uc9c0 \uc54a\ub294\ub2e4\ub294 \uac83\uc774\ub2e4. \ubaa8\ub4e0 \uce90\uc2dc \ud568\uc218\uc758 \ubc18\ud658 \ud0c0\uc785\uc774 <code>Result</code>\uc774\uae34 \ud558\uc9c0\ub9cc, \uc2e4\uc81c\ub85c <code>Err</code>\ub97c \ubc18\ud658\ud558\ub294 \uacbd\uc6b0\ub294 \uac70\uc758 \uc5c6\ub2e4. \ub300\ubd80\ubd84\uc758 \uc5d0\ub7ec \uacbd\ub85c\uc5d0\uc11c \ub85c\uadf8\ub97c \ub0a8\uae30\uace0 <code>Ok</code>\ub97c \ubc18\ud658\ud55c\ub2e4.</p>","tags":["Rust","Redis","\uce90\uc2f1","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","\uc131\ub2a5\ucd5c\uc801\ud654"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90-Redis-%EC%BA%90%EC%8B%B1-%EC%A0%81%EC%9A%A9%EA%B8%B0/#redis-url","title":"Redis URL \uc124\uc815\uacfc \uc778\uc99d","text":"<p>Redis \uc5f0\uacb0 \uc815\ubcf4\ub294 Cargo.toml\uc758 \ud504\ub85c\ud544 \uc124\uc815\uc5d0\uc11c \uad00\ub9ac\ud55c\ub2e4. \ud504\ub85c\ud544\ubcc4\ub85c \ub2e4\ub978 Redis \uc778\uc2a4\ud134\uc2a4\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub3c4\ub85d \ud658\uacbd\ubcc4 \uc124\uc815\uc744 \ubd84\ub9ac\ud588\ub2e4.</p> <pre><code>[package.metadata.config.local]\nredis_url = \"redis://:password@host:port\"\n\n[package.metadata.config.stg]\nredis_url = \"redis://host:port?password=xxx\"\n\n[package.metadata.config.prd]\nredis_url = \"redis://:password@host:port\"\n</code></pre> <p>Redis URL \ud615\uc2dd\uc5d0\uc11c \uc778\uc99d \ubd80\ubd84\uc740 \ub450 \uac00\uc9c0 \ubc29\uc2dd\uc744 \uc9c0\uc6d0\ud55c\ub2e4:</p> <ul> <li><code>redis://:password@host:port</code> - URL userinfo \ud615\uc2dd</li> <li><code>redis://host:port?password=xxx</code> - \ucffc\ub9ac \ud30c\ub77c\ubbf8\ud130 \ud615\uc2dd</li> </ul> <p>\ud2b9\uc218 \ubb38\uc790\uac00 \ud3ec\ud568\ub41c \ube44\ubc00\ubc88\ud638\ub294 URL \uc778\ucf54\ub529\uc774 \ud544\uc694\ud558\ub2e4. \uc608\ub97c \ub4e4\uc5b4 <code>#</code>\uc740 <code>%23</code>, <code>$</code>\ub294 <code>%24</code>\ub85c \uc778\ucf54\ub529\ud55c\ub2e4.</p>","tags":["Rust","Redis","\uce90\uc2f1","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","\uc131\ub2a5\ucd5c\uc801\ud654"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90-Redis-%EC%BA%90%EC%8B%B1-%EC%A0%81%EC%9A%A9%EA%B8%B0/#_13","title":"\uc131\ub2a5 \uce21\uc815 \uacb0\uacfc","text":"<p>\uce90\uc2f1 \ub3c4\uc785 \uc804\ud6c4\uc758 \uc131\ub2a5 \ubcc0\ud654\ub97c \uce21\uc815\ud588\ub2e4. \uce21\uc815 \ud658\uacbd\uc740 \ub3d9\uc77c\ud55c \uc11c\ubc84\uc5d0\uc11c \ub2e8\uc77c \uac80\uc0c9 \uc694\uccad\uc744 \ucc98\ub9ac\ud558\ub294 \uc2dc\ub098\ub9ac\uc624\ub2e4.</p> \uad6c\ubd84 \uce90\uc2f1 \uc804 \uce90\uc2f1 \ud6c4 (Hit) \uac1c\uc120\uc728 \ud544\ub4dc \uc124\uc815 \uc870\ud68c 15~30ms 0.5~2ms 90%+ \uac80\uc0c9 \uc804\uccb4 \uc751\ub2f5 50~100ms 35~75ms 25~30% <p>\ud544\ub4dc \uc124\uc815 \uc870\ud68c \uc790\uccb4\ub294 90% \uc774\uc0c1 \ube68\ub77c\uc84c\ub2e4. \uc804\uccb4 \uac80\uc0c9 \uc751\ub2f5 \uc2dc\uac04\uc5d0\uc11c\uc758 \uac1c\uc120\uc740 25~30% \uc815\ub3c4\uc778\ub370, \uc774\ub294 OpenSearch \uac80\uc0c9 \uc2e4\ud589 \uc2dc\uac04\uc774 \uc804\uccb4\uc758 \ub300\ubd80\ubd84\uc744 \ucc28\uc9c0\ud558\uae30 \ub54c\ubb38\uc774\ub2e4. \uadf8\ub798\ub3c4 \ub9e4 \uc694\uccad\ub9c8\ub2e4 \ubd88\ud544\uc694\ud55c \ub124\ud2b8\uc6cc\ud06c \uc655\ubcf5\uc744 \uc81c\uac70\ud55c \uac83\ub9cc\uc73c\ub85c\ub3c4 \ucda9\ubd84\ud55c \uac00\uce58\uac00 \uc788\ub2e4.</p> <p>Cache Hit Rate\ub294 \uc6b4\uc601 \ud658\uacbd\uc5d0\uc11c 95% \uc774\uc0c1\uc744 \uae30\ub85d\ud588\ub2e4. \ud544\ub4dc \uc124\uc815\uc774 \ubcc0\uacbd\ub418\ub294 \uc2dc\uc810(\uc778\ub371\uc2f1)\uc740 \ud558\ub8e8\uc5d0 \uba87 \ubc88 \uc815\ub3c4\uc774\ubbc0\ub85c, \ub300\ubd80\ubd84\uc758 \uac80\uc0c9 \uc694\uccad\uc740 \uce90\uc2dc\uc5d0\uc11c \ud544\ub4dc \uc124\uc815\uc744 \uac00\uc838\uc628\ub2e4.</p>","tags":["Rust","Redis","\uce90\uc2f1","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","\uc131\ub2a5\ucd5c\uc801\ud654"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90-Redis-%EC%BA%90%EC%8B%B1-%EC%A0%81%EC%9A%A9%EA%B8%B0/#_14","title":"\ud2b8\ub7ec\ube14\uc288\ud305","text":"","tags":["Rust","Redis","\uce90\uc2f1","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","\uc131\ub2a5\ucd5c\uc801\ud654"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90-Redis-%EC%BA%90%EC%8B%B1-%EC%A0%81%EC%9A%A9%EA%B8%B0/#multiplexedconnection-clone","title":"MultiplexedConnection clone \uc774\uc288","text":"<p>\ucd08\uae30 \uad6c\ud604\uc5d0\uc11c <code>get_redis_client()</code>\uac00 <code>Arc&lt;MultiplexedConnection&gt;</code>\uc744 \ubc18\ud658\ud558\ub3c4\ub85d \ud588\ub294\ub370, \uc2e4\uc81c Redis \uba85\ub839\uc744 \uc2e4\ud589\ud558\ub824\uba74 <code>&amp;mut MultiplexedConnection</code>\uc774 \ud544\uc694\ud558\ub2e4. <code>Arc</code> \ub0b4\ubd80\uc758 \uac12\uc5d0 \ub300\ud574 <code>&amp;mut</code> \ucc38\uc870\ub97c \uc5bb\uc744 \uc218 \uc5c6\uc73c\ubbc0\ub85c, <code>client.as_ref().clone()</code>\uc73c\ub85c \uc5f0\uacb0 \ud578\ub4e4\uc744 \ubcf5\uc81c\ud558\ub294 \ud328\ud134\uc744 \uc0ac\uc6a9\ud588\ub2e4.</p> <pre><code>let client = get_redis_client().await?;\nlet mut conn = client.as_ref().clone();\nconn.set_ex::&lt;_, _, ()&gt;(&amp;key, &amp;value, ttl).await?;\n</code></pre> <p><code>MultiplexedConnection</code>\uc758 <code>clone()</code>\uc740 \uc2e4\uc81c TCP \uc5f0\uacb0\uc744 \ubcf5\uc81c\ud558\ub294 \uac83\uc774 \uc544\ub2c8\ub77c, \uac19\uc740 \uc5f0\uacb0\uc744 \uacf5\uc720\ud558\ub294 \ud578\ub4e4\uc744 \ub9cc\ub4dc\ub294 \uac83\uc774\ubbc0\ub85c \ube44\uc6a9\uc774 \ub9e4\uc6b0 \ub0ae\ub2e4.</p>","tags":["Rust","Redis","\uce90\uc2f1","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","\uc131\ub2a5\ucd5c\uc801\ud654"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90-Redis-%EC%BA%90%EC%8B%B1-%EC%A0%81%EC%9A%A9%EA%B8%B0/#typeerror-cache-miss","title":"TypeError\ub85c Cache Miss \ud310\ubcc4","text":"<p>Redis\uc5d0\uc11c \ud0a4\uac00 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc744 \ub54c <code>GET</code> \uba85\ub839\uc758 \uacb0\uacfc\ub97c <code>String</code>\uc73c\ub85c \ubcc0\ud658\ud558\ub824 \ud558\uba74 <code>TypeError</code>\uac00 \ubc1c\uc0dd\ud55c\ub2e4. \uc774\ub97c Cache Miss\ub85c \ud310\ubcc4\ud574\uc57c \ud55c\ub2e4.</p> <pre><code>Err(e) =&gt; {\n    if e.kind() == redis::ErrorKind::TypeError {\n        Ok(None) // Cache miss\n    } else {\n        error!(\"Unexpected Redis error: {}\", e);\n        Ok(None)\n    }\n}\n</code></pre> <p><code>nil</code> \uc751\ub2f5\uc744 <code>String</code>\uc73c\ub85c \ubcc0\ud658\ud560 \uc218 \uc5c6\uc5b4\uc11c <code>TypeError</code>\uac00 \ubc1c\uc0dd\ud558\ub294 \uac83\uc778\ub370, <code>Option&lt;String&gt;</code>\uc73c\ub85c \ubc1b\uc73c\uba74 \uc774 \ubb38\uc81c\ub97c \ud53c\ud560 \uc218 \uc788\ub2e4. \ub2e4\ub9cc \uae30\uc874 \ucf54\ub4dc\uc640\uc758 \ud638\ud658\uc131\uc744 \uc704\ud574 \ud604\uc7ac \ubc29\uc2dd\uc744 \uc720\uc9c0\ud588\ub2e4.</p>","tags":["Rust","Redis","\uce90\uc2f1","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","\uc131\ub2a5\ucd5c\uc801\ud654"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90-Redis-%EC%BA%90%EC%8B%B1-%EC%A0%81%EC%9A%A9%EA%B8%B0/#_15","title":"\uce90\uc2dc \ub370\uc774\ud130 \ubc84\uc804 \uad00\ub9ac","text":"<p>\uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc5c5\ub370\uc774\ud2b8\ud558\uba74\uc11c <code>CachedIndexFields</code> \uad6c\uc870\uccb4\uc5d0 \ud544\ub4dc\ub97c \ucd94\uac00\ud558\uac70\ub098 \ubcc0\uacbd\ud558\uba74, \uae30\uc874 \uce90\uc2dc \ub370\uc774\ud130\ub97c \uc5ed\uc9c1\ub82c\ud654\ud560 \uc218 \uc5c6\uac8c \ub41c\ub2e4. \uc774\ub97c \uc704\ud574 \ub450 \uac00\uc9c0 \ubc29\uc5b4 \uba54\ucee4\ub2c8\uc998\uc744 \ub450\uc5c8\ub2e4:</p> <ol> <li>\uc5ed\uc9c1\ub82c\ud654 \uc2e4\ud328 \uc2dc \uce90\uc2dc \uc0ad\uc81c: \uc704\uc5d0\uc11c \uc124\uba85\ud55c \ub300\ub85c, <code>serde_json::from_str</code> \uc2e4\ud328 \uc2dc \ud574\ub2f9 \ud0a4\ub97c \uc0ad\uc81c\ud55c\ub2e4.</li> <li>TTL \uae30\ubc18 \uc790\ub3d9 \ub9cc\ub8cc: \uc124\ub839 \uba85\uc2dc\uc801 \uc0ad\uc81c\uac00 \uc2e4\ud328\ud558\ub354\ub77c\ub3c4, TTL\uc774 \uc9c0\ub098\uba74 \uc790\ub3d9\uc73c\ub85c \ub9cc\ub8cc\ub41c\ub2e4.</li> </ol> <p>\ubcc4\ub3c4\uc758 \uce90\uc2dc \ubc84\uc804 \uad00\ub9ac \uba54\ucee4\ub2c8\uc998(\ud0a4\uc5d0 \ubc84\uc804 \ubc88\ud638\ub97c \ud3ec\ud568\ud558\ub294 \ub4f1)\ub3c4 \uace0\ub824\ud588\uc9c0\ub9cc, \uc704 \ub450 \uac00\uc9c0 \ubc29\uc5b4 \uba54\ucee4\ub2c8\uc998\uc73c\ub85c \ucda9\ubd84\ud558\ub2e4\uace0 \ud310\ub2e8\ud588\ub2e4.</p>","tags":["Rust","Redis","\uce90\uc2f1","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","\uc131\ub2a5\ucd5c\uc801\ud654"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90-Redis-%EC%BA%90%EC%8B%B1-%EC%A0%81%EC%9A%A9%EA%B8%B0/#_16","title":"\ud655\uc7a5 \uacc4\ud68d","text":"<p>\ud604\uc7ac Phase 1\uc5d0\uc11c\ub294 \ud544\ub4dc \uc124\uc815 \uce90\uc2f1\ub9cc \uad6c\ud604\ud588\uc9c0\ub9cc, \uce90\uc2dc \uc778\ud504\ub77c\uac00 \uac16\ucdb0\uc84c\uc73c\ubbc0\ub85c \ub2e4\uc74c \ub2e8\uacc4 \ud655\uc7a5\uc774 \uc6a9\uc774\ud558\ub2e4.</p> <pre><code>graph LR\n    subgraph \"Phase 1 (\ud604\uc7ac)\"\n        A[\ud544\ub4dc \uc124\uc815 \uce90\uc2dc]\n    end\n\n    subgraph \"Phase 2 (\uacc4\ud68d)\"\n        B[\uac80\uc0c9 \uacb0\uacfc \uce90\uc2dc]\n        C[\uc9d1\uacc4 \uacb0\uacfc \uce90\uc2dc]\n    end\n\n    subgraph \"Phase 3 (\uacc4\ud68d)\"\n        D[\ub3d9\uc758\uc5b4 \uc0ac\uc804 \uce90\uc2dc]\n        E[\uc0ac\uc6a9\uc790 \uc0ac\uc804 \uce90\uc2dc]\n    end\n\n    A --&gt; B\n    A --&gt; C\n    B --&gt; D\n    C --&gt; E</code></pre> <p>\uac80\uc0c9 \uacb0\uacfc \uce90\uc2f1\uc758 \uacbd\uc6b0, \ucffc\ub9ac \ud574\uc2dc\ub97c \ud0a4\ub85c \uc0ac\uc6a9\ud558\ub418 TTL\uc744 \uc9e7\uac8c(5~30\ucd08) \uc124\uc815\ud558\ub294 \ubc29\uc2dd\uc744 \uac80\ud1a0 \uc911\uc774\ub2e4. \ucee4\uba38\uc2a4 \ud658\uacbd\uc5d0\uc11c\ub294 \ub3d9\uc77c\ud55c \uac80\uc0c9\uc5b4\ub85c \uc9e7\uc740 \uc2dc\uac04 \ub0b4\uc5d0 \ubc18\ubcf5 \uc694\uccad\ud558\ub294 \uacbd\uc6b0(\ud398\uc774\uc9c0\ub124\uc774\uc158, \uc815\ub82c \ubcc0\uacbd \ub4f1)\uac00 \ube48\ubc88\ud558\ubbc0\ub85c, \uc9e7\uc740 TTL\uc758 \uacb0\uacfc \uce90\uc2f1\ub3c4 \ud6a8\uacfc\uc801\uc77c \uc218 \uc788\ub2e4.</p>","tags":["Rust","Redis","\uce90\uc2f1","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","\uc131\ub2a5\ucd5c\uc801\ud654"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90-Redis-%EC%BA%90%EC%8B%B1-%EC%A0%81%EC%9A%A9%EA%B8%B0/#_17","title":"\uacb0\uacfc \ubc0f \ud68c\uace0","text":"<p>Redis \uce90\uc2f1\uc744 \ub3c4\uc785\ud558\uba74\uc11c \uc5bb\uc740 \uad50\ud6c8\uc740 \ub2e4\uc74c\uacfc \uac19\ub2e4.</p> <p>\uc798\ud55c \uc810:</p> <ul> <li>Graceful Degradation \uc6d0\uce59\uc744 \uc77c\uad00\ub418\uac8c \uc801\uc6a9\ud558\uc5ec, Redis \uc7a5\uc560\uac00 \uc11c\ube44\uc2a4 \uc7a5\uc560\ub85c \uc774\uc5b4\uc9c0\uc9c0 \uc54a\ub3c4\ub85d \uc124\uacc4\ud588\ub2e4.</li> <li>\ub124\uc784\uc2a4\ud398\uc774\uc2a4 \uae30\ubc18\uc758 \ud0a4 \uad6c\uc870\ub97c \ucc98\uc74c\ubd80\ud130 \uc124\uacc4\ud558\uc5ec, \ud5a5\ud6c4 \ud655\uc7a5\uc774 \uc6a9\uc774\ud55c \uad6c\uc870\ub97c \ub9cc\ub4e4\uc5c8\ub2e4.</li> <li><code>OnceCell</code> + <code>Arc&lt;MultiplexedConnection&gt;</code> \uc870\ud569\uc73c\ub85c \uae00\ub85c\ubc8c \uc2f1\uae00\ud134\uc744 \uc548\uc804\ud558\uac8c \uad00\ub9ac\ud588\ub2e4.</li> <li>Lua \uc2a4\ud06c\ub9bd\ud2b8\ub97c \uc0ac\uc6a9\ud55c \uc6d0\uc790\uc801 \uce90\uc2dc \ubb34\ud6a8\ud654\ub85c \ub370\uc774\ud130 \uc77c\uad00\uc131\uc744 \ud655\ubcf4\ud588\ub2e4.</li> </ul> <p>\uc544\uc26c\uc6b4 \uc810:</p> <ul> <li><code>Option&lt;String&gt;</code> \ub300\uc2e0 <code>String</code>\uc73c\ub85c GET \uacb0\uacfc\ub97c \ubc1b\uc544\uc11c <code>TypeError</code> \ubd84\uae30\uac00 \ud544\uc694\ud574\uc9c4 \ubd80\ubd84\uc740 \uac1c\uc120 \uc5ec\uc9c0\uac00 \uc788\ub2e4.</li> <li>\uce90\uc2dc \uad00\ub828 \uba54\ud2b8\ub9ad(Hit Rate, Latency \ub4f1)\uc744 Prometheus \ub4f1\uc73c\ub85c \ub178\ucd9c\ud558\ub294 \uae30\ub2a5\uc774 \uc544\uc9c1 \uc5c6\ub2e4. \ud604\uc7ac\ub294 \ub85c\uadf8 \uae30\ubc18\uc73c\ub85c\ub9cc \ud655\uc778 \uac00\ub2a5\ud558\ub2e4.</li> <li>\ucee4\ub125\uc158 \ud480 \ub300\uc2e0 <code>MultiplexedConnection</code>\uc744 \uc0ac\uc6a9\ud588\ub294\ub370, \ud2b8\ub798\ud53d\uc774 \ub300\ud3ed \uc99d\uac00\ud558\uba74 \ucee4\ub125\uc158 \ud480(bb8-redis \ub4f1) \ub3c4\uc785\uc744 \uac80\ud1a0\ud574\uc57c \ud560 \uc218 \uc788\ub2e4.</li> </ul> <p>Rust\uc5d0\uc11c\uc758 Redis \ud65c\uc6a9\uc740 \ud0c0\uc785 \uc2dc\uc2a4\ud15c \ub355\ubd84\uc5d0 \ud0a4 \ucda9\ub3cc\uc774\ub098 \ub370\uc774\ud130 \ud0c0\uc785 \ubd88\uc77c\uce58 \uac19\uc740 \ubb38\uc81c\ub97c \ucef4\ud30c\uc77c \ud0c0\uc784\uc5d0 \uc0c1\ub2f9 \ubd80\ubd84 \uc7a1\uc544\ub0bc \uc218 \uc788\ub2e4\ub294 \uc7a5\uc810\uc774 \uc788\ub2e4. <code>Serialize</code>/<code>Deserialize</code> \ud2b8\ub808\uc787\uc744 \ud1b5\ud55c \uc790\ub3d9 \uc9c1\ub82c\ud654\ub3c4 \ud3b8\ub9ac\ud558\ub2e4. \uc804\uccb4\uc801\uc73c\ub85c Rust + Redis \uc870\ud569\uc740 \uace0\uc131\ub2a5 \uce90\uc2f1 \ub808\uc774\uc5b4\ub97c \uad6c\ud604\ud558\uae30\uc5d0 \ub9e4\uc6b0 \uc801\ud569\ud55c \uc870\ud569\uc774\ub2e4.</p>","tags":["Rust","Redis","\uce90\uc2f1","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","\uc131\ub2a5\ucd5c\uc801\ud654"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/","title":"Rust \uac80\uc0c9 \uc5d4\uc9c4\uc5d0\uc11c SSH \ud130\ub110\ub9c1\uc73c\ub85c \uc6d0\uaca9 DB \uc811\uadfc\ud558\uae30","text":"","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#rust-ssh-db","title":"Rust \uac80\uc0c9 \uc5d4\uc9c4\uc5d0\uc11c SSH \ud130\ub110\ub9c1\uc73c\ub85c \uc6d0\uaca9 DB \uc811\uadfc\ud558\uae30","text":"","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#_1","title":"\uac1c\uc694","text":"<p>\ucee4\uba38\uc2a4 \uac80\uc0c9 \uc5d4\uc9c4\uc5d0\uc11c \ub3d9\uc758\uc5b4 \uc0ac\uc804(Synonym Dictionary) \uad00\ub9ac\ub294 \uac80\uc0c9 \ud488\uc9c8\uc5d0 \uc9c1\uc811\uc801\uc778 \uc601\ud5a5\uc744 \ubbf8\uce58\ub294 \ud575\uc2ec \uae30\ub2a5\uc774\ub2e4. \"\ub178\ud2b8\ubd81\"\uc744 \uac80\uc0c9\ud588\uc744 \ub54c \"\ub7a9\ud0d1\"\ub3c4 \ud568\uaed8 \uac80\uc0c9\ub418\uc5b4\uc57c \ud558\uace0, \"\uc544\uc774\ud3f0\"\uc744 \uac80\uc0c9\ud588\uc744 \ub54c \"iPhone\"\ub3c4 \ub9e4\uce6d\ub418\uc5b4\uc57c \ud55c\ub2e4. \uc774\ub7f0 \ub3d9\uc758\uc5b4 \ub9e4\ud551\uc740 DB\uc5d0\uc11c \uad00\ub9ac\ub418\uc9c0\ub9cc, \uc2e4\uc81c\ub85c \uac80\uc0c9\uc5d0 \ubc18\uc601\ub418\ub824\uba74 OpenSearch \uc11c\ubc84\uc758 \ubd84\uc11d\uae30(Analyzer) \uc124\uc815\uc5d0 \ub3d9\uc758\uc5b4 \ud30c\uc77c\uc774 \ubc30\uce58\ub418\uc5b4\uc57c \ud55c\ub2e4.</p> <p>\ubb38\uc81c\ub294 OpenSearch \uc11c\ubc84\uac00 \ubcc4\ub3c4\uc758 \ub124\ud2b8\uc6cc\ud06c\uc5d0 \uc788\uc5b4\uc11c, \uac80\uc0c9 \uc5d4\uc9c4 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0\uc11c \uc9c1\uc811 \ud30c\uc77c\uc744 \ubcf5\uc0ac\ud560 \uc218 \uc5c6\ub2e4\ub294 \uac83\uc774\uc5c8\ub2e4. SSH\ub97c \ud1b5\ud55c \uc811\uadfc\ub9cc \uac00\ub2a5\ud55c \ud658\uacbd\uc774\ub2e4. \uc218\ub3d9\uc73c\ub85c SSH \uc811\uc18d\ud558\uc5ec \ud30c\uc77c\uc744 \ubcf5\uc0ac\ud558\ub358 \uae30\uc874 \ubc29\uc2dd\uc744 \uc790\ub3d9\ud654\ud558\uae30 \uc704\ud574, Rust\uc5d0\uc11c SSH/SFTP \ud074\ub77c\uc774\uc5b8\ud2b8\ub97c \uad6c\ud604\ud558\uc5ec \ub3d9\uc758\uc5b4 \uc0ac\uc804 \ubc30\ud3ec \ud30c\uc774\ud504\ub77c\uc778\uc744 \uc644\uc804 \uc790\ub3d9\ud654\ud588\ub2e4.</p> <p>\uc774 \uae00\uc5d0\uc11c\ub294 Rust\uc758 <code>ssh2</code> \ud06c\ub808\uc774\ud2b8\ub97c \ud65c\uc6a9\ud55c SSH/SFTP \uad6c\ud604, \ub3d9\uc758\uc5b4 \ub370\uc774\ud130 \ubcc0\ud658, OpenSearch \ubd84\uc11d\uae30 \uc7ac\ub85c\ub4dc\uae4c\uc9c0\uc758 \uc804\uccb4 \ud30c\uc774\ud504\ub77c\uc778\uc744 \ub2e4\ub8ec\ub2e4.</p>","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#_2","title":"\ub3d9\uc758\uc5b4 \uc0ac\uc804 \uad00\ub9ac\uc758 \ud544\uc694\uc131","text":"","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#opensearch","title":"OpenSearch\uc758 \ub3d9\uc758\uc5b4 \ucc98\ub9ac \ubc29\uc2dd","text":"<p>OpenSearch\uc5d0\uc11c \ub3d9\uc758\uc5b4\ub97c \uc801\uc6a9\ud558\ub294 \ubc29\ubc95\uc740 \ud06c\uac8c \ub450 \uac00\uc9c0\ub2e4:</p> <ol> <li>\uc778\ub77c\uc778 \ub3d9\uc758\uc5b4: \uc778\ub371\uc2a4 \uc124\uc815\uc5d0 \uc9c1\uc811 \ub3d9\uc758\uc5b4 \ubaa9\ub85d\uc744 \ud3ec\ud568</li> <li>\ud30c\uc77c \uae30\ubc18 \ub3d9\uc758\uc5b4: \uc11c\ubc84\uc758 \ud30c\uc77c \uc2dc\uc2a4\ud15c\uc5d0 \ub3d9\uc758\uc5b4 \ud30c\uc77c\uc744 \ubc30\uce58</li> </ol> <p>\uc778\ub77c\uc778 \ubc29\uc2dd\uc740 \uc778\ub371\uc2a4\ub97c \ub2eb\uc558\ub2e4 \uc5f4\uc5b4\uc57c(close/open) \ub3d9\uc758\uc5b4\uac00 \ubc18\uc601\ub418\ubbc0\ub85c \uc11c\ube44\uc2a4 \uc911\ub2e8\uc774 \ubc1c\uc0dd\ud55c\ub2e4. \ud30c\uc77c \uae30\ubc18 \ubc29\uc2dd\uc740 <code>_plugins/_refresh_search_analyzers</code> API\ub85c \ubb34\uc911\ub2e8 \uc7ac\ub85c\ub4dc\uac00 \uac00\ub2a5\ud558\ub2e4. \ub2f9\uc5f0\ud788 \ud30c\uc77c \uae30\ubc18\uc744 \uc120\ud0dd\ud588\ub2e4.</p>","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#_3","title":"\uc804\uccb4 \ud30c\uc774\ud504\ub77c\uc778","text":"<pre><code>sequenceDiagram\n    participant APP as Rust \uac80\uc0c9 \uc5d4\uc9c4\n    participant DB as PostgreSQL\n    participant LOCAL as \ub85c\uceec \ud30c\uc77c\uc2dc\uc2a4\ud15c\n    participant SSH as SSH/SFTP\n    participant OS as OpenSearch \uc11c\ubc84\n\n    APP-&gt;&gt;DB: \ub3d9\uc758\uc5b4 \ub370\uc774\ud130 \uc870\ud68c\n    DB--&gt;&gt;APP: ST_SYN_INFO \ud14c\uc774\ube14 \ub370\uc774\ud130\n    APP-&gt;&gt;APP: OpenSearch \ud615\uc2dd\uc73c\ub85c \ubcc0\ud658\n    APP-&gt;&gt;LOCAL: synonym.txt \uc800\uc7a5\n    APP-&gt;&gt;SSH: SFTP\ub85c /tmp/synonym.txt \uc5c5\ub85c\ub4dc\n    SSH-&gt;&gt;OS: sudo mv /tmp/synonym.txt \u2192 conf/analysis/\n    SSH-&gt;&gt;OS: sudo chmod 644 synonym.txt\n    APP-&gt;&gt;OS: POST /_plugins/_refresh_search_analyzers/{index}\n    OS--&gt;&gt;APP: \ubd84\uc11d\uae30 \uc7ac\ub85c\ub4dc \uc644\ub8cc</code></pre> <p>\ud558\ub098\uc758 API \ud638\ucd9c\ub85c DB \uc870\ud68c \u2192 \ud30c\uc77c \uc0dd\uc131 \u2192 SSH \uc5c5\ub85c\ub4dc \u2192 \ubd84\uc11d\uae30 \uc7ac\ub85c\ub4dc\uae4c\uc9c0 \uc790\ub3d9 \uc2e4\ud589\ub41c\ub2e4.</p>","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#_4","title":"\ud504\ub85c\uc81d\ud2b8 \uc124\uc815","text":"","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#_5","title":"\uc758\uc874\uc131 \ucd94\uac00","text":"<pre><code>[dependencies]\nssh2 = \"0.9.5\"\nlazy_static = \"1.4.0\"\ntempfile = \"3.8.0\"\n</code></pre> <p><code>ssh2</code>\ub294 libssh2\uc758 Rust \ubc14\uc778\ub529\uc774\ub2e4. libssh2 \uc790\uccb4\uac00 C \ub77c\uc774\ube0c\ub7ec\ub9ac\uc774\ubbc0\ub85c \ube4c\ub4dc \uc2dc <code>libssh2-sys</code>, <code>libz-sys</code>, <code>openssl-sys</code> \ub4f1\uc758 \uc2dc\uc2a4\ud15c \uc758\uc874\uc131\uc774 \ud544\uc694\ud558\ub2e4. Linux \ud658\uacbd\uc5d0\uc11c\ub294 \ubcf4\ud1b5 <code>libssl-dev</code>, <code>pkg-config</code> \ud328\ud0a4\uc9c0\uac00 \uc124\uce58\ub418\uc5b4 \uc788\uc73c\uba74 \ubb38\uc81c\uc5c6\ub2e4.</p>","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#ssh","title":"SSH \uc124\uc815","text":"<pre><code>[package.metadata.config.local]\nssh_host = \"192.168.2.171\"\nssh_port = 22\nssh_user = \"tech\"\nssh_password = \"tech\"\nsynonym_output_path = \"./synonym.txt\"\n</code></pre> <p>SSH \uc811\uc18d \uc815\ubcf4\ub97c \ud504\ub85c\ud544\ubcc4 \uc124\uc815\uc5d0 \ud3ec\ud568\uc2dc\ucf30\ub2e4. \ub85c\uceec/\uc2a4\ud14c\uc774\uc9d5/\ud504\ub85c\ub355\uc158 \ud658\uacbd\ub9c8\ub2e4 \ub2e4\ub978 OpenSearch \uc11c\ubc84\ub97c \uc0ac\uc6a9\ud558\ubbc0\ub85c, \ud504\ub85c\ud544 \uc804\ud658\ub9cc\uc73c\ub85c \ub300\uc0c1 \uc11c\ubc84\ub97c \ubcc0\uacbd\ud560 \uc218 \uc788\ub2e4.</p> <p>AppConfig \uad6c\uc870\uccb4\uc5d0\ub3c4 SSH \uad00\ub828 \ud544\ub4dc\ub97c \ucd94\uac00\ud588\ub2e4:</p> <pre><code>pub struct AppConfig {\n    // ... \uae30\uc874 \ud544\ub4dc\n    pub ssh_host: Option&lt;String&gt;,\n    pub ssh_port: Option&lt;u16&gt;,\n    pub ssh_user: Option&lt;String&gt;,\n    pub ssh_password: Option&lt;String&gt;,\n    pub synonym_output_path: Option&lt;String&gt;,\n    pub opensearch_synonym_index: Option&lt;Vec&lt;String&gt;&gt;,\n}\n</code></pre> <p>\ubaa8\ub4e0 SSH \ud544\ub4dc\ub97c <code>Option</code>\uc73c\ub85c \uc120\uc5b8\ud558\uc5ec, SSH\ub97c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\ub294 \ud658\uacbd\uc5d0\uc11c\ub294 \uc124\uc815\uc744 \uc0dd\ub7b5\ud560 \uc218 \uc788\ub3c4\ub85d \ud588\ub2e4.</p>","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#_6","title":"\ub3d9\uc758\uc5b4 \ub370\uc774\ud130 \ubaa8\ub378","text":"","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#db","title":"DB \uc2a4\ud0a4\ub9c8","text":"<p>\ub3d9\uc758\uc5b4 \ub370\uc774\ud130\ub294 <code>ST_SYN_INFO</code> \ud14c\uc774\ube14\uc5d0 \uc800\uc7a5\ub41c\ub2e4.</p> <pre><code>SELECT\n    SYN_SEQ AS id,\n    STD_WRD AS std_wrd,      -- \ud45c\uc900\uc5b4\n    SYN_NM AS syn_nm,        -- \ub3d9\uc758\uc5b4\n    USE_YN AS use_yn,        -- \uc0ac\uc6a9 \uc5ec\ubd80\n    CASE WHEN SSI.USE_YN = 'N' THEN 'D'\n         ELSE 'A'\n    END AS send_gb           -- \uc0c1\ud0dc (A: \ud65c\uc131, D: \uc0ad\uc81c)\nFROM ST_SYN_INFO SSI\nORDER BY SYN_SEQ\n</code></pre>","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#repository","title":"Repository \uad6c\ud604","text":"<p>\ub3d9\uc758\uc5b4 \uc804\uc6a9 Repository\ub97c <code>BaseRepository</code>\ub97c \uc0c1\uc18d\ud558\uc5ec \uad6c\ud604\ud588\ub2e4.</p> <pre><code>pub struct SynonymRepository {\n    base: BaseRepository,\n}\n\nimpl SynonymRepository {\n    pub fn new(pg_client: PostgresClient) -&gt; Self {\n        Self {\n            base: BaseRepository::new(\n                pg_client,\n                \"synonym\".to_string(),\n                \"./src/repositories/indexing/columns_map/synonym_map.json\".to_string(),\n            ),\n        }\n    }\n}\n\n#[async_trait]\nimpl IndexingRepository for SynonymRepository {\n    async fn fetch_data(&amp;self, interval: &amp;str) -&gt; Result&lt;Vec&lt;IndexingData&gt;, AppError&gt; {\n        let query = r#\"\n            SELECT\n                SYN_SEQ AS id,\n                STD_WRD AS std_wrd,\n                SYN_NM AS syn_nm,\n                USE_YN AS use_yn,\n                CASE WHEN SSI.USE_YN = 'N' THEN 'D'\n                     ELSE 'A'\n                END AS send_gb\n            FROM ST_SYN_INFO SSI\n            ORDER BY SYN_SEQ\n        \"#;\n        self.base.fetch_data_with_query(interval, query, self).await\n    }\n\n    fn transform_to_indexing_data(\n        &amp;self,\n        rows: &amp;[tokio_postgres::Row],\n    ) -&gt; Result&lt;Vec&lt;IndexingData&gt;, AppError&gt; {\n        self.base.transform_to_indexing_data_impl(rows)\n    }\n}\n</code></pre> <p>\uceec\ub7fc \ub9e4\ud551\uc740 JSON \ud30c\uc77c\ub85c \uad00\ub9ac\ud55c\ub2e4:</p> <pre><code>{\n    \"standardWord\": \"std_wrd\",\n    \"synonym\": \"syn_nm\",\n    \"useYn\": \"use_yn\",\n    \"sendGb\": \"send_gb\"\n}\n</code></pre> <p>\uc774 \ub9e4\ud551 \ud30c\uc77c\uc744 \ud1b5\ud574 DB \uceec\ub7fc\uba85(<code>std_wrd</code>)\uacfc \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ud544\ub4dc\uba85(<code>standardWord</code>)\uc744 \ubd84\ub9ac\ud55c\ub2e4. DB \uc2a4\ud0a4\ub9c8\uac00 \ubcc0\uacbd\ub418\uc5b4\ub3c4 \ub9e4\ud551 \ud30c\uc77c\ub9cc \uc218\uc815\ud558\uba74 \ub41c\ub2e4.</p>","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#synonymservice","title":"SynonymService \uad6c\ud604","text":"","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#_7","title":"\uc11c\ube44\uc2a4 \uad6c\uc870","text":"<pre><code>pub struct SynonymService {\n    client: Arc&lt;OpenSearch&gt;,\n    db_fetch_service: Arc&lt;DbFetchService&gt;,\n    config: Arc&lt;AppConfig&gt;,\n}\n</code></pre> <p>OpenSearch \ud074\ub77c\uc774\uc5b8\ud2b8(\ubd84\uc11d\uae30 \uc7ac\ub85c\ub4dc\uc6a9), DB \ud398\uce58 \uc11c\ube44\uc2a4(\ub3d9\uc758\uc5b4 \uc870\ud68c\uc6a9), \uc124\uc815(SSH \uc815\ubcf4 \ub4f1)\uc744 \uc8fc\uc785\ubc1b\ub294\ub2e4.</p>","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#_8","title":"\ub3d9\uc758\uc5b4 \ud3ec\ub9f7 \ubcc0\ud658","text":"<p>DB\uc5d0\uc11c \uac00\uc838\uc628 \ub3d9\uc758\uc5b4 \ub370\uc774\ud130\ub97c OpenSearch \ub3d9\uc758\uc5b4 \ud30c\uc77c \ud615\uc2dd\uc73c\ub85c \ubcc0\ud658\ud55c\ub2e4.</p> <pre><code>fn convert_to_synonym_format(\n    &amp;self,\n    synonym_data: &amp;[IndexingData],\n) -&gt; Result&lt;String, AppError&gt; {\n    let mut synonym_lines = Vec::new();\n\n    for item in synonym_data {\n        // USE_YN\uc774 'Y'\uc778 \uac83\ub9cc \ud3ec\ud568\n        if let Some(use_yn) = item.extra_fields\n            .get(\"useYn\")\n            .or_else(|| item.extra_fields.get(\"useyn\"))\n            .and_then(|v| v.as_str())\n        {\n            if use_yn != \"Y\" {\n                continue;\n            }\n        }\n\n        if let (Some(std_word), Some(synonym)) = (\n            item.extra_fields\n                .get(\"standardWord\")\n                .or_else(|| item.extra_fields.get(\"standardword\"))\n                .and_then(|v| v.as_str()),\n            item.extra_fields.get(\"synonym\").and_then(|v| v.as_str()),\n        ) {\n            let std_word_clean = std_word.trim();\n            let synonym_clean = synonym.trim();\n\n            if !std_word_clean.is_empty() &amp;&amp; !synonym_clean.is_empty() {\n                synonym_lines.push(format!(\"{},{}\", std_word_clean, synonym_clean));\n            }\n        }\n    }\n\n    Ok(synonym_lines.join(\"\\n\"))\n}\n</code></pre> <p>OpenSearch \ub3d9\uc758\uc5b4 \ud30c\uc77c \ud615\uc2dd\uc740 \ud55c \uc904\uc5d0 \ud558\ub098\uc758 \ub3d9\uc758\uc5b4 \uc30d\uc744 \uc27c\ud45c\ub85c \uad6c\ubd84\ud558\uc5ec \ub098\uc5f4\ud55c\ub2e4:</p> <pre><code>\ub178\ud2b8\ubd81,\ub7a9\ud0d1\n\uc544\uc774\ud3f0,iPhone\n\uc0bc\uc131,Samsung\n</code></pre> <p>\ud544\ub4dc\uba85\uc758 \ub300\uc18c\ubb38\uc790\uac00 \ud658\uacbd\uc5d0 \ub530\ub77c \ub2e4\ub97c \uc218 \uc788\uc5b4\uc11c, <code>get(\"useYn\").or_else(|| get(\"useyn\"))</code> \ud328\ud134\uc73c\ub85c \uc591\ucabd \ubaa8\ub450 \ud655\uc778\ud55c\ub2e4. PostgreSQL\uc758 \uacb0\uacfc \uceec\ub7fc\uba85\uc740 \uae30\ubcf8\uc801\uc73c\ub85c \uc18c\ubb38\uc790\ub85c \ubcc0\ud658\ub418\ub294\ub370, \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ub808\uc774\uc5b4\uc5d0\uc11c camelCase\ub85c \ubcc0\ud658\ud558\ub294 \uacfc\uc815\uc5d0\uc11c \ubd88\uc77c\uce58\uac00 \ubc1c\uc0dd\ud560 \uc218 \uc788\ub2e4.</p>","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#_9","title":"\ub85c\uceec \ud30c\uc77c \uc800\uc7a5","text":"<pre><code>fn write_to_file(&amp;self, synonym_content: &amp;str) -&gt; Result&lt;String, AppError&gt; {\n    let project_name = &amp;self.config.project_name;\n    let default_filename = format!(\"{}_synonym.txt\", project_name);\n    let default_path = format!(\"./dictionary/{}\", default_filename);\n\n    let output_path = self.config\n        .synonym_output_path\n        .clone()\n        .unwrap_or(default_path);\n\n    // \ub514\ub809\ud130\ub9ac \uc790\ub3d9 \uc0dd\uc131\n    if let Some(parent) = Path::new(&amp;output_path).parent() {\n        if !parent.exists() {\n            std::fs::create_dir_all(parent)?;\n        }\n    }\n\n    let mut file = File::create(&amp;output_path)?;\n    file.write_all(synonym_content.as_bytes())?;\n    file.flush()?;\n\n    Ok(output_path)\n}\n</code></pre> <p>\ud504\ub85c\uc81d\ud2b8 \uc774\ub984\uc744 \ud3ec\ud568\ud55c \ud30c\uc77c\uba85\uc73c\ub85c \uc800\uc7a5\ud558\uc5ec, \uc5ec\ub7ec \ud504\ub85c\uc81d\ud2b8\uc758 \ub3d9\uc758\uc5b4 \uc0ac\uc804\uc774 \ucda9\ub3cc\ud558\uc9c0 \uc54a\ub3c4\ub85d \ud55c\ub2e4. <code>dictionary/</code> \ub514\ub809\ud130\ub9ac\uc5d0 \ubc31\uc5c5\uc6a9 \uc0ac\ubcf8\ub3c4 \ud568\uaed8 \uc800\uc7a5\ud55c\ub2e4.</p>","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#sshsftp","title":"SSH/SFTP \ud30c\uc77c \uc5c5\ub85c\ub4dc","text":"<p>\uc774 \uae00\uc758 \ud575\uc2ec \ubd80\ubd84\uc774\ub2e4. <code>ssh2</code> \ud06c\ub808\uc774\ud2b8\ub97c \uc0ac\uc6a9\ud558\uc5ec \ub85c\uceec\uc5d0\uc11c \uc0dd\uc131\ud55c \ub3d9\uc758\uc5b4 \ud30c\uc77c\uc744 \uc6d0\uaca9 OpenSearch \uc11c\ubc84\uc5d0 \uc5c5\ub85c\ub4dc\ud55c\ub2e4.</p>","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#ssh_1","title":"SSH \uc5f0\uacb0 \ubc0f \uc778\uc99d","text":"<pre><code>fn upload_via_ssh(&amp;self, local_path: &amp;str, remote_path: &amp;str) -&gt; Result&lt;(), AppError&gt; {\n    let ssh_host = self.config.ssh_host.clone()\n        .unwrap_or_else(|| \"192.168.2.171\".to_string());\n    let ssh_port = self.config.ssh_port.unwrap_or(22);\n    let ssh_user = self.config.ssh_user.clone()\n        .unwrap_or_else(|| \"tech\".to_string());\n    let ssh_password = self.config.ssh_password.clone()\n        .unwrap_or_else(|| \"tech\".to_string());\n\n    // TCP \uc5f0\uacb0\n    let tcp = TcpStream::connect(format!(\"{}:{}\", ssh_host, ssh_port))?;\n\n    // SSH \uc138\uc158 \uc0dd\uc131\n    let mut sess = Session::new()?;\n    sess.set_tcp_stream(tcp);\n    sess.handshake()?;\n\n    // \ud328\uc2a4\uc6cc\ub4dc \uc778\uc99d\n    sess.userauth_password(&amp;ssh_user, &amp;ssh_password)?;\n    // ...\n}\n</code></pre> <p><code>ssh2::Session</code>\uc740 <code>TcpStream</code> \uc704\uc5d0 SSH \ud504\ub85c\ud1a0\ucf5c\uc744 \uad6c\ud604\ud55c\ub2e4. <code>set_tcp_stream</code> \u2192 <code>handshake</code> \u2192 <code>userauth_password</code> \uc21c\uc11c\ub85c \uc5f0\uacb0\uc744 \uc124\uc815\ud55c\ub2e4. \ud0a4 \uae30\ubc18 \uc778\uc99d\ub3c4 \uc9c0\uc6d0\ud558\uc9c0\ub9cc, \ud604\uc7ac \ud658\uacbd\uc5d0\uc11c\ub294 \ud328\uc2a4\uc6cc\ub4dc \uc778\uc99d\uc744 \uc0ac\uc6a9\ud588\ub2e4.</p>","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#sftp","title":"SFTP \uc5c5\ub85c\ub4dc","text":"<p>\uc9c1\uc811 \ub300\uc0c1 \uacbd\ub85c\uc5d0 \ud30c\uc77c\uc744 \uc4f0\uba74 \uad8c\ud55c \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud560 \uc218 \uc788\ub2e4. OpenSearch\uc758 \uc124\uc815 \ub514\ub809\ud130\ub9ac\ub294 \ubcf4\ud1b5 root \uc18c\uc720\uc774\ubbc0\ub85c, \uc77c\ubc18 \uc0ac\uc6a9\uc790\ub85c\ub294 \uc9c1\uc811 \uc4f8 \uc218 \uc5c6\ub2e4. \ub530\ub77c\uc11c <code>/tmp</code>\uc5d0 \uba3c\uc800 \uc5c5\ub85c\ub4dc\ud55c \ub4a4, <code>sudo mv</code>\ub85c \uc774\ub3d9\ud558\ub294 2\ub2e8\uacc4 \uc804\ub7b5\uc744 \uc0ac\uc6a9\ud55c\ub2e4.</p> <pre><code>// 1\ub2e8\uacc4: SFTP\ub85c /tmp\uc5d0 \uc5c5\ub85c\ub4dc\nlet sftp = sess.sftp()?;\nlet mut remote_file = sftp.create(&amp;Path::new(&amp;temp_remote_path))?;\nremote_file.write_all(&amp;file_contents)?;\n\n// 2\ub2e8\uacc4: sudo mv\ub85c \ucd5c\uc885 \uc704\uce58 \uc774\ub3d9\nlet mv_command = format!(\n    \"echo '{}' | sudo -S mv {} {}\",\n    ssh_password, temp_remote_path, remote_path\n);\nself.execute_ssh_command(&amp;sess, &amp;mv_command)?;\n\n// 3\ub2e8\uacc4: \ud30c\uc77c \uad8c\ud55c \uc124\uc815\nlet chmod_cmd = format!(\n    \"echo '{}' | sudo -S chmod 644 {}\",\n    ssh_password, remote_path\n);\nself.execute_ssh_command(&amp;sess, &amp;chmod_cmd)?;\n</code></pre> <pre><code>graph TD\n    A[\ub85c\uceec \ud30c\uc77c \uc77d\uae30] --&gt; B[SFTP: /tmp/synonym.txt \uc5c5\ub85c\ub4dc]\n    B --&gt; C[sudo mkdir -p \ub300\uc0c1 \ub514\ub809\ud130\ub9ac]\n    C --&gt; D[sudo mv /tmp/synonym.txt \u2192 conf/analysis/]\n    D --&gt; E[sudo chmod 644 synonym.txt]\n    E --&gt; F[ls -la\ub85c \ud30c\uc77c \uc874\uc7ac \ud655\uc778]</code></pre> <p><code>echo 'password' | sudo -S</code> \ud328\ud134\uc73c\ub85c stdin\uc744 \ud1b5\ud574 sudo \ud328\uc2a4\uc6cc\ub4dc\ub97c \uc804\ub2ec\ud55c\ub2e4. <code>sudo -S</code> \uc635\uc158\uc740 stdin\uc5d0\uc11c \ud328\uc2a4\uc6cc\ub4dc\ub97c \uc77d\ub3c4\ub85d \uc9c0\uc815\ud55c\ub2e4.</p>","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#ssh_2","title":"SSH \uba85\ub839 \uc2e4\ud589","text":"<pre><code>fn execute_ssh_command(\n    &amp;self,\n    session: &amp;Session,\n    command: &amp;str,\n) -&gt; Result&lt;(), AppError&gt; {\n    let mut channel = session.channel_session()?;\n\n    // \ubcf4\uc548: \ud328\uc2a4\uc6cc\ub4dc\uac00 \ud3ec\ud568\ub41c \uba85\ub839\uc740 \ub85c\uadf8\uc5d0\uc11c \ub9c8\uc2a4\ud0b9\n    let safe_command = if command.contains(\"echo\") {\n        \"echo '***' | sudo -S command\"\n    } else {\n        command\n    };\n    log::debug!(\"Executing SSH command: {}\", safe_command);\n\n    channel.exec(command)?;\n\n    // \ucd9c\ub825 \uc77d\uae30 (EOF\uae4c\uc9c0)\n    let mut output = Vec::new();\n    channel.read_to_end(&amp;mut output)?;\n\n    channel.wait_close()?;\n\n    let exit_status = channel.exit_status()?;\n    if exit_status != 0 {\n        return Err(AppError::new(\n            \"500\",\n            &amp;format!(\"Command failed with exit code: {}\", exit_status),\n        ));\n    }\n\n    Ok(())\n}\n</code></pre> <p>\ubcf4\uc548\uc744 \uc704\ud574 <code>echo</code> \uba85\ub839\uc774 \ud3ec\ud568\ub41c \uacbd\uc6b0(\ud328\uc2a4\uc6cc\ub4dc\uac00 \ub4e4\uc5b4\uc788\uc73c\ubbc0\ub85c) \ub85c\uadf8\uc5d0\uc11c \ub9c8\uc2a4\ud0b9 \ucc98\ub9ac\ud55c\ub2e4. \uc2e4\uc81c \uba85\ub839\uc740 \uadf8\ub300\ub85c \uc2e4\ud589\ud558\ub418, \ub85c\uadf8\uc5d0\ub294 <code>echo '***' | sudo -S command</code>\ub85c \ucd9c\ub825\ud55c\ub2e4.</p> <p><code>channel.read_to_end</code>\ub85c \ucd9c\ub825\uc744 \ubaa8\ub450 \uc77d\uc5b4\uc57c <code>wait_close</code>\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \ub3d9\uc791\ud55c\ub2e4. SSH \ucc44\ub110\uc5d0\uc11c \ucd9c\ub825\uc744 \uc77d\uc9c0 \uc54a\uc73c\uba74 \ubc84\ud37c\uac00 \ucc28\uc11c \ucc44\ub110\uc774 \ube14\ub85d\ub420 \uc218 \uc788\ub2e4.</p>","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#opensearch_1","title":"OpenSearch \ubd84\uc11d\uae30 \uc7ac\ub85c\ub4dc","text":"<p>\ub3d9\uc758\uc5b4 \ud30c\uc77c\uc744 \ubc30\uce58\ud55c \ud6c4, OpenSearch\uc5d0 \ubd84\uc11d\uae30\ub97c \uc7ac\ub85c\ub4dc\ud558\ub3c4\ub85d \uc694\uccad\ud55c\ub2e4. \uc774 API\ub294 \uc778\ub371\uc2a4\ub97c \ub2eb\uc9c0 \uc54a\uace0\ub3c4 \ub3d9\uc758\uc5b4\ub97c \ubc18\uc601\ud560 \uc218 \uc788\uac8c \ud574\uc8fc\ub294 \ud575\uc2ec \uae30\ub2a5\uc774\ub2e4.</p> <pre><code>async fn reload_search_analyzers(&amp;self) -&gt; Result&lt;(), AppError&gt; {\n    let index_names = self.config\n        .opensearch_synonym_index\n        .clone()\n        .unwrap_or_else(|| vec![\"test-ab\".to_string()]);\n\n    let mut success_count = 0;\n    let mut error_count = 0;\n    let mut errors = Vec::new();\n\n    for index_name in &amp;index_names {\n        match self.refresh_single_index(index_name).await {\n            Ok(_) =&gt; {\n                success_count += 1;\n            }\n            Err(e) =&gt; {\n                error_count += 1;\n                errors.push(format!(\"Index {}: {}\", index_name, e));\n                // \ud558\ub098 \uc2e4\ud328\ud574\ub3c4 \ub098\uba38\uc9c0 \uacc4\uc18d \ucc98\ub9ac\n            }\n        }\n    }\n\n    // \uc804\ubd80 \uc2e4\ud328\ud55c \uacbd\uc6b0\uc5d0\ub9cc \uc5d0\ub7ec \ubc18\ud658\n    if success_count == 0 &amp;&amp; !index_names.is_empty() {\n        return Err(AppError::new(\"500\", &amp;errors.join(\"; \")));\n    }\n\n    Ok(())\n}\n\nasync fn refresh_single_index(&amp;self, index_name: &amp;str) -&gt; Result&lt;(), AppError&gt; {\n    let transport = self.client.transport();\n    let refresh_url = format!(\n        \"/_plugins/_refresh_search_analyzers/{}\",\n        index_name\n    );\n\n    let response = transport\n        .send(\n            Method::Post,\n            &amp;refresh_url,\n            HeaderMap::new(),\n            None::&lt;&amp;()&gt;,\n            None::&lt;&amp;[u8]&gt;,\n            None,\n        )\n        .await?;\n\n    if !response.status_code().is_success() {\n        let error_body = response.text().await?;\n        return Err(AppError::new(\"500\", &amp;error_body));\n    }\n\n    Ok(())\n}\n</code></pre> <p>\uc5ec\ub7ec \uc778\ub371\uc2a4\uc5d0 \ub3d9\uc758\uc5b4\uac00 \uc801\uc6a9\ub420 \uc218 \uc788\uc73c\ubbc0\ub85c, \uc124\uc815\uc5d0\uc11c \uc778\ub371\uc2a4 \ubaa9\ub85d\uc744 \ubc1b\uc544 \uc21c\ucc28\uc801\uc73c\ub85c \uc7ac\ub85c\ub4dc\ud55c\ub2e4. \ubd80\ubd84 \uc2e4\ud328 \uc804\ub7b5\uc744 \uc801\uc6a9\ud558\uc5ec, \ud558\ub098\uc758 \uc778\ub371\uc2a4\uc5d0\uc11c \uc2e4\ud328\ud574\ub3c4 \ub098\uba38\uc9c0\ub294 \uacc4\uc18d \ucc98\ub9ac\ud55c\ub2e4. \uc804\ubd80 \uc2e4\ud328\ud55c \uacbd\uc6b0\uc5d0\ub9cc \uc5d0\ub7ec\ub97c \ubc18\ud658\ud55c\ub2e4.</p> <p><code>_plugins/_refresh_search_analyzers</code>\ub294 OpenSearch\uc758 \ud50c\ub7ec\uadf8\uc778 API\ub2e4. Elasticsearch\uc5d0\uc11c\ub294 <code>_cache/clear</code> + close/open\uc774 \ud544\uc694\ud558\uc9c0\ub9cc, OpenSearch\uc5d0\uc11c\ub294 \uc774 \ub2e8\uc77c API\ub85c \ubd84\uc11d\uae30 \uc124\uc815\uc744 \ud56b \ub9ac\ub85c\ub4dc\ud560 \uc218 \uc788\ub2e4.</p>","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#_10","title":"\uc804\uccb4 \ud30c\uc774\ud504\ub77c\uc778 \uc870\ub9bd","text":"<p>\ubaa8\ub4e0 \ub2e8\uacc4\ub97c \uc870\ub9bd\ud55c <code>index_synonym_data</code> \uba54\uc11c\ub4dc:</p> <pre><code>pub async fn index_synonym_data(&amp;self) -&gt; Result&lt;(), AppError&gt; {\n    // 1. DB\uc5d0\uc11c \ub3d9\uc758\uc5b4 \ub370\uc774\ud130 \uc870\ud68c\n    let synonym_data = self.db_fetch_service\n        .fetch_data_for_indexing(\"synonym\", \"1\")\n        .await?;\n\n    log::info!(\"Fetched {} synonym entries\", synonym_data.len());\n\n    // 2. OpenSearch \ud615\uc2dd\uc73c\ub85c \ubcc0\ud658\n    let synonym_txt = self.convert_to_synonym_format(&amp;synonym_data)?;\n\n    // \ube48 \uc0ac\uc804\uc774\uba74 \uc2a4\ud0b5\n    if synonym_txt.trim().is_empty() {\n        log::info!(\"Empty synonym dictionary, skipping\");\n        return Ok(());\n    }\n\n    // 3. \ub85c\uceec \ud30c\uc77c \uc800\uc7a5\n    let local_path = self.write_to_file(&amp;synonym_txt)?;\n\n    // 4. SSH/SFTP\ub85c \uc6d0\uaca9 \uc11c\ubc84\uc5d0 \uc5c5\ub85c\ub4dc\n    let remote_path = \"/data/opensearch-dir/docker-file/conf/analysis/synonym.txt\";\n    match self.upload_via_ssh(&amp;local_path, remote_path) {\n        Ok(_) =&gt; log::info!(\"Successfully uploaded synonym\"),\n        Err(e) =&gt; log::error!(\"Failed to upload synonym: {}\", e),\n    }\n\n    // 5. dictionary \ud3f4\ub354\uc5d0 \ubc31\uc5c5 \uc800\uc7a5\n    let dictionary_filename = format!(\n        \"{}_{}_synonym.txt\",\n        self.config.project_name,\n        self.config.env\n    );\n    if let Err(e) = self.save_to_dictionary(&amp;synonym_txt, &amp;dictionary_filename) {\n        log::error!(\"Failed to save to dictionary folder: {}\", e);\n    }\n\n    // 6. OpenSearch \ubd84\uc11d\uae30 \uc7ac\ub85c\ub4dc\n    self.reload_search_analyzers().await?;\n\n    log::info!(\"Successfully synonym indexing\");\n    Ok(())\n}\n</code></pre> <pre><code>graph TD\n    A[index_synonym_data \ud638\ucd9c] --&gt; B[DB\uc5d0\uc11c \ub3d9\uc758\uc5b4 \uc870\ud68c]\n    B --&gt; C{\ub370\uc774\ud130 \uc788\uc74c?}\n    C --&gt;|\uc5c6\uc74c| D[\uc2a4\ud0b5]\n    C --&gt;|\uc788\uc74c| E[OpenSearch \ud615\uc2dd \ubcc0\ud658]\n    E --&gt; F[\ub85c\uceec \ud30c\uc77c \uc800\uc7a5]\n    F --&gt; G[SSH/SFTP \uc5c5\ub85c\ub4dc]\n    G --&gt;|\uc131\uacf5| H[dictionary \ubc31\uc5c5 \uc800\uc7a5]\n    G --&gt;|\uc2e4\ud328| I[\uc5d0\ub7ec \ub85c\uadf8]\n    I --&gt; H\n    H --&gt; J[\ubd84\uc11d\uae30 \uc7ac\ub85c\ub4dc]\n    J --&gt; K[\uc644\ub8cc]</code></pre> <p>SSH \uc5c5\ub85c\ub4dc\uac00 \uc2e4\ud328\ud574\ub3c4 \ub85c\uadf8\ub9cc \ub0a8\uae30\uace0 \ubd84\uc11d\uae30 \uc7ac\ub85c\ub4dc\ub294 \uc2dc\ub3c4\ud55c\ub2e4. \uc774\uc804\uc5d0 \uc5c5\ub85c\ub4dc\ud55c \ud30c\uc77c\uc774 \ub0a8\uc544\uc788\uc744 \uc218 \uc788\uc73c\ubbc0\ub85c, \uc7ac\ub85c\ub4dc\uac00 \uc758\ubbf8 \uc788\uc744 \uc218 \uc788\ub2e4.</p>","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#_11","title":"\ud2b8\ub7ec\ube14\uc288\ud305","text":"","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#libssh2","title":"libssh2 \ube4c\ub4dc \uc758\uc874\uc131","text":"<p><code>ssh2</code> \ud06c\ub808\uc774\ud2b8\ub294 libssh2\uc758 Rust \ubc14\uc778\ub529\uc774\ubbc0\ub85c, \ube4c\ub4dc \uc2dc \uc2dc\uc2a4\ud15c \ub77c\uc774\ube0c\ub7ec\ub9ac\uac00 \ud544\uc694\ud558\ub2e4. CI/CD \ud658\uacbd\uc5d0\uc11c \ube4c\ub4dc\uac00 \uc2e4\ud328\ud558\ub294 \uacbd\uc6b0\uac00 \uc788\uc5c8\ub2e4.</p> <pre><code># Ubuntu/Debian\nsudo apt-get install -y libssl-dev pkg-config\n\n# CentOS/RHEL\nsudo yum install -y openssl-devel pkgconfig\n</code></pre> <p>Docker \ube4c\ub4dc \uc2dc\uc5d0\ub3c4 \uc774 \ud328\ud0a4\uc9c0\ub4e4\uc744 \uc124\uce58 \ub2e8\uacc4\uc5d0 \ud3ec\ud568\uc2dc\ucf1c\uc57c \ud55c\ub2e4.</p>","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#sftp_1","title":"SFTP \uad8c\ud55c \ubb38\uc81c","text":"<p>OpenSearch Docker \ucee8\ud14c\uc774\ub108\uc758 \uc124\uc815 \ub514\ub809\ud130\ub9ac\ub294 root \uc18c\uc720\uc778 \uacbd\uc6b0\uac00 \ub9ce\ub2e4. \uc77c\ubc18 \uc0ac\uc6a9\uc790\ub85c SFTP \uc811\uc18d\ud558\uba74 \ud574\ub2f9 \ub514\ub809\ud130\ub9ac\uc5d0 \uc9c1\uc811 \ud30c\uc77c\uc744 \uc0dd\uc131\ud560 \uc218 \uc5c6\ub2e4.</p> <p>\ucc98\uc74c\uc5d0\ub294 SFTP\ub85c \uc9c1\uc811 \ub300\uc0c1 \uacbd\ub85c\uc5d0 \uc4f0\ub824\uace0 \uc2dc\ub3c4\ud588\uc9c0\ub9cc \uad8c\ud55c \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud588\ub2e4. \ud574\uacb0\ucc45\uc73c\ub85c <code>/tmp</code>\uc5d0 \uba3c\uc800 \uc5c5\ub85c\ub4dc\ud55c \ub4a4 <code>sudo mv</code>\ub85c \uc774\ub3d9\ud558\ub294 2\ub2e8\uacc4 \ubc29\uc2dd\uc744 \ucc44\ud0dd\ud588\ub2e4. <code>/tmp</code>\ub294 \ubaa8\ub4e0 \uc0ac\uc6a9\uc790\uac00 \uc4f8 \uc218 \uc788\uc73c\ubbc0\ub85c SFTP \uc5c5\ub85c\ub4dc\uac00 \uc131\uacf5\ud558\uace0, <code>sudo mv</code>\ub294 SSH \ucc44\ub110 \uba85\ub839\uc73c\ub85c \uc2e4\ud589\ud558\uc5ec root \uad8c\ud55c\uc73c\ub85c \ud30c\uc77c\uc744 \uc774\ub3d9\uc2dc\ud0a8\ub2e4.</p>","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#_12","title":"\ub514\ub809\ud130\ub9ac \ubd80\uc7ac","text":"<p>\uc6d0\uaca9 \uc11c\ubc84\uc5d0 \ub300\uc0c1 \ub514\ub809\ud130\ub9ac(<code>conf/analysis/</code>)\uac00 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc744 \uc218 \uc788\ub2e4. \ud30c\uc77c \uc774\ub3d9 \uc804\uc5d0 <code>sudo mkdir -p</code>\ub85c \ub514\ub809\ud130\ub9ac\ub97c \uba3c\uc800 \uc0dd\uc131\ud55c\ub2e4.</p> <pre><code>let mkdir_cmd = format!(\n    \"echo '{}' | sudo -S mkdir -p {}\",\n    ssh_password, remote_dir\n);\nmatch self.execute_ssh_command(&amp;sess, &amp;mkdir_cmd) {\n    Ok(_) =&gt; log::info!(\"Directory created or already exists\"),\n    Err(e) =&gt; log::warn!(\"Failed to create directory, proceeding anyway: {}\", e),\n}\n</code></pre> <p><code>mkdir -p</code>\ub294 \uc774\ubbf8 \uc874\uc7ac\ud574\ub3c4 \uc5d0\ub7ec\ub97c \ubc1c\uc0dd\uc2dc\ud0a4\uc9c0 \uc54a\uc73c\ubbc0\ub85c \uc548\uc804\ud558\ub2e4. \ub514\ub809\ud130\ub9ac \uc0dd\uc131 \uc2e4\ud328 \uc2dc\uc5d0\ub3c4 <code>warn</code>\ub9cc \ub0a8\uae30\uace0 \uc9c4\ud589\ud55c\ub2e4. \uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \ub514\ub809\ud130\ub9ac\uc77c \ud655\ub960\uc774 \ub192\uae30 \ub54c\ubb38\uc774\ub2e4.</p>","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#ssh_3","title":"SSH \ucc44\ub110 \ucd9c\ub825 \ubc84\ud37c","text":"<p>SSH \ucc44\ub110\uc5d0\uc11c \uba85\ub839\uc744 \uc2e4\ud589\ud55c \ud6c4 \ucd9c\ub825\uc744 \uc77d\uc9c0 \uc54a\uc73c\uba74, \ucd9c\ub825 \ubc84\ud37c\uac00 \ucc28\uc11c \ucc44\ub110\uc774 \ube14\ub85d\ub418\uace0 \uacb0\uad6d \ud0c0\uc784\uc544\uc6c3\uc774 \ubc1c\uc0dd\ud55c\ub2e4. \ubc18\ub4dc\uc2dc <code>read_to_end</code>\ub85c \ucd9c\ub825\uc744 \ubaa8\ub450 \uc18c\ube44\ud574\uc57c \ud55c\ub2e4.</p> <pre><code>let mut output = Vec::new();\nchannel.read_to_end(&amp;mut output)?;  // \ubc18\ub4dc\uc2dc \ud638\ucd9c\n\nchannel.wait_close()?;\n</code></pre> <p>\uc774 \uc21c\uc11c\uac00 \uc911\uc694\ud558\ub2e4. <code>read_to_end</code> \u2192 <code>wait_close</code> \u2192 <code>exit_status</code>. <code>read_to_end</code>\ub97c \uac74\ub108\ub6f0\uba74 <code>wait_close</code>\uc5d0\uc11c \ubb34\ud55c \ub300\uae30\ud560 \uc218 \uc788\ub2e4.</p>","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#_13","title":"\ud55c\uae00 \ub3d9\uc758\uc5b4 \uc778\ucf54\ub529","text":"<p>\ub3d9\uc758\uc5b4 \ud30c\uc77c\uc5d0 \ud55c\uae00\uc774 \ud3ec\ud568\ub418\ubbc0\ub85c UTF-8 \uc778\ucf54\ub529\uc744 \ubcf4\uc7a5\ud574\uc57c \ud55c\ub2e4. Rust\uc758 <code>String</code>\uc740 \uae30\ubcf8\uc801\uc73c\ub85c UTF-8\uc774\uace0, <code>write_all(content.as_bytes())</code>\ub294 UTF-8 \ubc14\uc774\ud2b8 \uc2dc\ud000\uc2a4\ub97c \uadf8\ub300\ub85c \uc4f0\ubbc0\ub85c \ubcc4\ub3c4 \uc778\ucf54\ub529 \ucc98\ub9ac\uac00 \ud544\uc694 \uc5c6\ub2e4. \ub2e4\ub9cc OpenSearch \uc11c\ubc84 \uce21\uc5d0\uc11c \ud30c\uc77c\uc744 \uc77d\uc744 \ub54c UTF-8\ub85c \ud574\uc11d\ud558\ub294\uc9c0 \ud655\uc778\uc774 \ud544\uc694\ud588\ub2e4.</p>","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#opensearch_2","title":"OpenSearch \uc778\ub371\uc2a4 \ubd84\uc11d\uae30 \uc124\uc815","text":"<p>\ub3d9\uc758\uc5b4\uac00 \uc2e4\uc81c\ub85c \uac80\uc0c9\uc5d0 \ubc18\uc601\ub418\ub824\uba74, \uc778\ub371\uc2a4\uc758 \ubd84\uc11d\uae30 \uc124\uc815\uc5d0 \ub3d9\uc758\uc5b4 \ud544\ud130\uac00 \ud3ec\ud568\ub418\uc5b4\uc57c \ud55c\ub2e4. \uc778\ub371\uc2a4 \uc0dd\uc131 \uc2dc \uc124\uc815\ud558\ub294 \ubd84\uc11d\uae30 \uad6c\uc131\uc740 \ub2e4\uc74c\uacfc \uac19\ub2e4.</p> <pre><code>fn create_multi_analyzer_settings(&amp;self) -&gt; Value {\n    json!({\n        \"analysis\": {\n            \"filter\": {\n                \"oneway_synonym_filter\": {\n                    \"type\": \"synonym\",\n                    \"synonyms\": [\"\uc560\ud50c,apple\"],\n                    \"expand\": true\n                }\n            },\n            \"tokenizer\": {\n                \"nori_tokenizer\": {\n                    \"type\": \"nori_tokenizer\",\n                    \"decompound_mode\": \"mixed\",\n                    \"user_dictionary_rules\": [\"\uc560\ud50c\", \"\ud39c\uc2ac\"]\n                }\n            },\n            \"analyzer\": {\n                \"index_analyzer\": {\n                    \"tokenizer\": \"nori_tokenizer\",\n                    \"filter\": [\n                        \"lowercase\",\n                        \"oneway_synonym_filter\",\n                        \"custom_shingle\"\n                    ]\n                },\n                \"search_analyzer\": {\n                    \"tokenizer\": \"nori_tokenizer\",\n                    \"filter\": [\n                        \"lowercase\",\n                        \"oneway_synonym_filter\"\n                    ]\n                }\n            }\n        }\n    })\n}\n</code></pre> <p><code>oneway_synonym_filter</code>\ub294 \uc778\ub77c\uc778\uc73c\ub85c \uae30\ubcf8 \ub3d9\uc758\uc5b4\ub97c \ud3ec\ud568\ud558\uace0, \ud30c\uc77c \uae30\ubc18 \ub3d9\uc758\uc5b4\ub294 <code>synonyms_path</code> \uc635\uc158\uc73c\ub85c \ubcc4\ub3c4 \uc9c0\uc815\ud55c\ub2e4. <code>_refresh_search_analyzers</code> API\ub97c \ud638\ucd9c\ud558\uba74 \ud30c\uc77c\uc5d0\uc11c \ub3d9\uc758\uc5b4\ub97c \ub2e4\uc2dc \uc77d\uc5b4 \ubd84\uc11d\uae30\ub97c \uac31\uc2e0\ud55c\ub2e4.</p> <p><code>nori_tokenizer</code>\ub294 \ud55c\uad6d\uc5b4 \ud615\ud0dc\uc18c \ubd84\uc11d\uae30\ub85c, <code>decompound_mode: \"mixed\"</code>\ub97c \uc0ac\uc6a9\ud558\uba74 \ubcf5\ud569\uc5b4\ub97c \uc6d0\ud615\uacfc \ubd84\ud574\ub41c \ud615\ud0dc \ubaa8\ub450\ub85c \uc778\ub371\uc2f1\ud55c\ub2e4. <code>user_dictionary_rules</code>\uc5d0\ub294 \uae30\ubcf8 \uc0ac\uc804\uc5d0 \uc5c6\ub294 \ub2e8\uc5b4(\uc2e0\uc870\uc5b4, \ube0c\ub79c\ub4dc\uba85 \ub4f1)\ub97c \ub4f1\ub85d\ud55c\ub2e4.</p> <pre><code>graph LR\n    subgraph \"\uc778\ub371\uc2f1 \uc2dc\uc810\"\n        A[\uc6d0\ubcf8 \ud14d\uc2a4\ud2b8] --&gt; B[nori_tokenizer]\n        B --&gt; C[lowercase]\n        C --&gt; D[synonym_filter]\n        D --&gt; E[shingle]\n        E --&gt; F[\uc778\ub371\uc2a4 \uc800\uc7a5]\n    end\n\n    subgraph \"\uac80\uc0c9 \uc2dc\uc810\"\n        G[\uac80\uc0c9 \ucffc\ub9ac] --&gt; H[nori_tokenizer]\n        H --&gt; I[lowercase]\n        I --&gt; J[synonym_filter]\n        J --&gt; K[\uac80\uc0c9 \uc2e4\ud589]\n    end</code></pre> <p>\uc778\ub371\uc2f1 \uc2dc\uc810\uacfc \uac80\uc0c9 \uc2dc\uc810 \ubaa8\ub450\uc5d0\uc11c \ub3d9\uc758\uc5b4 \ud544\ud130\ub97c \uc801\uc6a9\ud55c\ub2e4. \uc778\ub371\uc2f1 \uc2dc\uc810\uc5d0 \uc801\uc6a9\ud558\uba74 \"\ub178\ud2b8\ubd81\"\uc73c\ub85c \uc778\ub371\uc2f1\ub41c \ubb38\uc11c\uc5d0 \"\ub7a9\ud0d1\"\uc73c\ub85c\ub3c4 \uac80\uc0c9\ud560 \uc218 \uc788\uace0, \uac80\uc0c9 \uc2dc\uc810\uc5d0 \uc801\uc6a9\ud558\uba74 \"\ub7a9\ud0d1\"\uc744 \uac80\uc0c9\ud588\uc744 \ub54c \"\ub178\ud2b8\ubd81\"\ub3c4 \ud568\uaed8 \uac80\uc0c9\ub41c\ub2e4. \uc591\ucabd \ubaa8\ub450 \uc801\uc6a9\ud558\uba74 \ucd5c\ub300\ud55c\uc758 \uc7ac\ud604\uc728(recall)\uc744 \ud655\ubcf4\ud560 \uc218 \uc788\ub2e4.</p>","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#_14","title":"\ub2e4\uc911 \ud504\ub85c\uc81d\ud2b8 \uc9c0\uc6d0","text":"<p>\ud558\ub098\uc758 OpenSearch \ud074\ub7ec\uc2a4\ud130\uc5d0\uc11c \uc5ec\ub7ec \ud504\ub85c\uc81d\ud2b8\uc758 \ub3d9\uc758\uc5b4\ub97c \uad00\ub9ac\ud574\uc57c \ud558\ub294 \uc0c1\ud669\ub3c4 \uace0\ub824\ud588\ub2e4. \ud504\ub85c\uc81d\ud2b8\uba85\uacfc \ud658\uacbd\uc744 \ud30c\uc77c\uba85\uc5d0 \ud3ec\ud568\uc2dc\ucf1c \ucda9\ub3cc\uc744 \ubc29\uc9c0\ud55c\ub2e4.</p> <pre><code>// dictionary \ud3f4\ub354\uc5d0\ub3c4 \ud504\ub85c\uc81d\ud2b8\ubcc4 \ubc31\uc5c5\nlet dictionary_filename = format!(\n    \"{}_{}_synonym.txt\",\n    self.config.project_name,\n    self.config.env\n);\nself.save_to_dictionary(&amp;synonym_txt, &amp;dictionary_filename)?;\n</code></pre> <p>\uc2e4\uc81c \ud30c\uc77c \uad6c\uc870:</p> <pre><code>./dictionary/\n  \u251c\u2500\u2500 osstem_local_synonym.txt\n  \u251c\u2500\u2500 osstem_stg_synonym.txt\n  \u2514\u2500\u2500 osstem_prd_synonym.txt\n</code></pre> <p>\uc774 \ubc31\uc5c5 \ud30c\uc77c\uc740 SSH \uc5c5\ub85c\ub4dc\uac00 \uc2e4\ud328\ud588\uc744 \ub54c \uc218\ub3d9 \ubcf5\uad6c\uc5d0 \ud65c\uc6a9\ud560 \uc218 \uc788\uace0, \ub3d9\uc758\uc5b4 \ubcc0\uacbd \uc774\ub825\uc744 \ucd94\uc801\ud558\ub294 \ub370\uc5d0\ub3c4 \uc720\uc6a9\ud558\ub2e4.</p>","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90%EC%84%9C-SSH-%ED%84%B0%EB%84%90%EB%A7%81%EC%9C%BC%EB%A1%9C-%EC%9B%90%EA%B2%A9-DB-%EC%A0%91%EA%B7%BC%ED%95%98%EA%B8%B0/#_15","title":"\uacb0\uacfc \ubc0f \ud68c\uace0","text":"<p>SSH/SFTP\ub97c \ud65c\uc6a9\ud55c \ub3d9\uc758\uc5b4 \uc0ac\uc804 \uc790\ub3d9 \ubc30\ud3ec \ud30c\uc774\ud504\ub77c\uc778\uc744 \uad6c\ud604\ud568\uc73c\ub85c\uc368, \uae30\uc874\uc5d0 \uc218\ub3d9\uc73c\ub85c \uc218\ud589\ud558\ub358 \uc791\uc5c5\uc744 API \ud638\ucd9c \ud558\ub098\ub85c \uc790\ub3d9\ud654\ud588\ub2e4.</p> <p>\uc815\ub7c9\uc801 \uc131\uacfc:</p> <ul> <li>\ub3d9\uc758\uc5b4 \ubc18\uc601 \uc2dc\uac04: 30\ubd84+ (\uc218\ub3d9) \u2192 30\ucd08 (\uc790\ub3d9)</li> <li>\uc6b4\uc601\uc790 \uac1c\uc785: \ud544\uc694 \u2192 \ubd88\ud544\uc694</li> <li>\uc2e4\uc218\ub85c \uc778\ud55c \uc7a5\uc560: \uac04\ud5d0\uc801 \ubc1c\uc0dd \u2192 0\uac74</li> </ul> <p>\uc124\uacc4 \uc6d0\uce59:</p> <ul> <li>2\ub2e8\uacc4 \uc5c5\ub85c\ub4dc \uc804\ub7b5(/tmp \u2192 sudo mv)\uc73c\ub85c \uad8c\ud55c \ubb38\uc81c\ub97c \uae54\ub054\ud558\uac8c \ud574\uacb0\ud588\ub2e4.</li> <li>\ubd80\ubd84 \uc2e4\ud328 \ud5c8\uc6a9: \uc5ec\ub7ec \uc778\ub371\uc2a4 \uc911 \uc77c\ubd80 \uc7ac\ub85c\ub4dc\uac00 \uc2e4\ud328\ud574\ub3c4 \ub098\uba38\uc9c0\ub294 \uc815\uc0c1 \ucc98\ub9ac\ub41c\ub2e4.</li> <li>\ubcf4\uc548 \uace0\ub824: \ub85c\uadf8\uc5d0\uc11c \ud328\uc2a4\uc6cc\ub4dc\ub97c \ub9c8\uc2a4\ud0b9\ud558\uc5ec, \ub85c\uadf8 \uc720\ucd9c \uc2dc\uc5d0\ub3c4 SSH \ud06c\ub808\ub374\uc15c\uc774 \ub178\ucd9c\ub418\uc9c0 \uc54a\ub294\ub2e4.</li> <li>\ubc31\uc5c5 \uc804\ub7b5: \ub85c\uceec dictionary \ud3f4\ub354\uc5d0 \ud504\ub85c\uc81d\ud2b8/\ud658\uacbd\ubcc4 \ubc31\uc5c5\uc744 \uc720\uc9c0\ud55c\ub2e4.</li> </ul> <p>\uac1c\uc120 \uc5ec\uc9c0:</p> <ul> <li>\ud604\uc7ac \ud328\uc2a4\uc6cc\ub4dc \uc778\uc99d\uc744 \uc0ac\uc6a9\ud558\uace0 \uc788\ub294\ub370, SSH \ud0a4 \uae30\ubc18 \uc778\uc99d\uc73c\ub85c \uc804\ud658\ud558\uba74 \ubcf4\uc548\uc774 \uac15\ud654\ub41c\ub2e4. <code>ssh2</code> \ud06c\ub808\uc774\ud2b8\ub294 <code>userauth_pubkey_file</code> \uba54\uc11c\ub4dc\ub97c \uc81c\uacf5\ud558\ubbc0\ub85c \uc804\ud658\uc774 \uc6a9\uc774\ud558\ub2e4.</li> <li>\ub3d9\uc758\uc5b4 \ud30c\uc77c\uc758 diff\ub97c \uacc4\uc0b0\ud558\uc5ec \ubcc0\uacbd\uc774 \uc5c6\uc73c\uba74 \uc5c5\ub85c\ub4dc\ub97c \uac74\ub108\ub6f0\ub294 \ucd5c\uc801\ud654\uac00 \uac00\ub2a5\ud558\ub2e4. \ub3d9\uc758\uc5b4\uac00 \uc218\ucc9c \uac74\uc774 \ub118\uc5b4\uac00\uba74 \ub9e4\ubc88 \uc804\uccb4\ub97c \uc5c5\ub85c\ub4dc\ud558\ub294 \uac83\ubcf4\ub2e4 \ubcc0\uacbd \uac10\uc9c0\uac00 \ud6a8\uc728\uc801\uc774\ub2e4.</li> <li><code>ssh2</code>\ub294 \ub3d9\uae30 API \uae30\ubc18(\ub0b4\ubd80\uc801\uc73c\ub85c \ube14\ub85c\ud0b9 I/O)\uc774\ubbc0\ub85c, <code>tokio::task::spawn_blocking</code>\uc73c\ub85c \uac10\uc2f8\uc11c \ube44\ub3d9\uae30 \ucee8\ud14d\uc2a4\ud2b8\uc5d0\uc11c \uc548\uc804\ud558\uac8c \uc0ac\uc6a9\ud558\ub294 \uac83\uc774 \ubc14\ub78c\uc9c1\ud558\ub2e4. \ud604\uc7ac\ub294 \ub3d9\uc758\uc5b4 \ubc30\ud3ec\uac00 \ube48\ubc88\ud558\uc9c0 \uc54a\uc544 \uc2e4\uc6a9\uc801 \ubb38\uc81c\ub294 \uc5c6\uc9c0\ub9cc, \uc6d0\uce59\uc801\uc73c\ub85c\ub294 \uac1c\uc120\ud574\uc57c \ud560 \ubd80\ubd84\uc774\ub2e4.</li> </ul> <p>Rust\uc5d0\uc11c SSH\ub97c \ub2e4\ub8e8\ub294 \uac83\uc740 Python\uc758 paramiko\ub098 Node.js\uc758 ssh2\uc5d0 \ube44\ud574 \ucd08\uae30 \uc124\uc815(\ube4c\ub4dc \uc758\uc874\uc131 \ub4f1)\uc774 \ub2e4\uc18c \ubc88\uac70\ub86d\uc9c0\ub9cc, \ud55c\ubc88 \uc14b\uc5c5\ud558\uba74 \ud0c0\uc785 \uc548\uc804\uc131\uacfc \uc5d0\ub7ec \ud578\ub4e4\ub9c1\uc758 \uba85\uc2dc\uc131 \ub355\ubd84\uc5d0 \uc548\uc815\uc801\uc778 \uad6c\ud604\uc744 \uc720\uc9c0\ud560 \uc218 \uc788\ub2e4.</p>","tags":["Rust","SSH","SFTP","OpenSearch","\ub3d9\uc758\uc5b4","\uac80\uc0c9\uc5d4\uc9c4"]},{"location":"search-engine/Rust%EB%A1%9C-%EC%BB%A4%EB%A8%B8%EC%8A%A4-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%9D%84-%EC%B2%98%EC%9D%8C%EB%B6%80%ED%84%B0-%EB%A7%8C%EB%93%A4%EA%B8%B0/","title":"Rust\ub85c \ucee4\uba38\uc2a4 \uac80\uc0c9 \uc5d4\uc9c4\uc744 \ucc98\uc74c\ubd80\ud130 \ub9cc\ub4e4\uae30","text":"","tags":["Rust","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","Axum","\uc774\ucee4\uba38\uc2a4"]},{"location":"search-engine/Rust%EB%A1%9C-%EC%BB%A4%EB%A8%B8%EC%8A%A4-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%9D%84-%EC%B2%98%EC%9D%8C%EB%B6%80%ED%84%B0-%EB%A7%8C%EB%93%A4%EA%B8%B0/#rust","title":"Rust\ub85c \ucee4\uba38\uc2a4 \uac80\uc0c9 \uc5d4\uc9c4\uc744 \ucc98\uc74c\ubd80\ud130 \ub9cc\ub4e4\uae30","text":"","tags":["Rust","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","Axum","\uc774\ucee4\uba38\uc2a4"]},{"location":"search-engine/Rust%EB%A1%9C-%EC%BB%A4%EB%A8%B8%EC%8A%A4-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%9D%84-%EC%B2%98%EC%9D%8C%EB%B6%80%ED%84%B0-%EB%A7%8C%EB%93%A4%EA%B8%B0/#_1","title":"\uac1c\uc694","text":"<p>2024\ub144\ubd80\ud130 \uc6b4\uc601\ud574 \uc628 NestJS \uae30\ubc18 \uc774\ucee4\uba38\uc2a4 \uac80\uc0c9 \uc11c\ube44\uc2a4(x2bee-nest-search)\ub294 \uc57d 300\uac1c \uc774\uc0c1\uc758 \ucee4\ubc0b\uc774 \uc313\uc77c \uc815\ub3c4\ub85c \uae30\ub2a5\uc774 \ubc29\ub300\ud588\ub2e4. \uc2dc\ub9e8\ud2f1 \uac80\uc0c9, GPT \uae30\ubc18 \ucffc\ub9ac \ubd84\uc11d, Reranker, \ubca1\ud130 \uac80\uc0c9 \ub4f1 \ub2e4\uc591\ud55c \uae30\ub2a5\uc744 \uc801\uc6a9\ud558\uba74\uc11c \uac80\uc0c9 \ud488\uc9c8\uc740 \ud06c\uac8c \uac1c\uc120\ub418\uc5c8\uc9c0\ub9cc, \uc2dc\uc2a4\ud15c \uce21\uba74\uc5d0\uc11c\ub294 \uc5ec\ub7ec \ud55c\uacc4\uac00 \ub4dc\ub7ec\ub0ac\ub2e4.</p> <p>\uccab\uc9f8, Node.js\uc758 \uc2f1\uae00 \uc2a4\ub808\ub4dc \ud2b9\uc131\uc0c1 \ub300\ub7c9\uc758 \uc778\ub371\uc2f1 \uc791\uc5c5\uc744 \ucc98\ub9ac\ud560 \ub54c \uc774\ubca4\ud2b8 \ub8e8\ud504\uac00 \ube14\ub85c\ud0b9\ub418\ub294 \ubb38\uc81c\uac00 \uc788\uc5c8\ub2e4. \ub458\uc9f8, \ud0c0\uc785 \uc548\uc815\uc131\uc774 \ubd80\uc871\ud574 \ub7f0\ud0c0\uc784\uc5d0\uc11c\uc57c \ubc1c\uacac\ub418\ub294 \uc624\ub958\uac00 \ube48\ubc88\ud588\ub2e4. \uc14b\uc9f8, \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9\uc774 \uc608\uce21\ud558\uae30 \uc5b4\ub824\uc6cc \ud504\ub85c\ub355\uc158 \ud658\uacbd\uc5d0\uc11c OOM(Out of Memory) \uc774\uc288\uac00 \uac04\ud5d0\uc801\uc73c\ub85c \ubc1c\uc0dd\ud588\ub2e4.</p> <p>2025\ub144 3\uc6d4, \uc774 \ubb38\uc81c\ub4e4\uc744 \uadfc\ubcf8\uc801\uc73c\ub85c \ud574\uacb0\ud558\uae30 \uc704\ud574 Rust\ub85c \uac80\uc0c9 \uc5d4\uc9c4\uc744 \uc644\uc804\ud788 \uc0c8\ub85c \uc791\uc131\ud558\uae30\ub85c \uacb0\uc815\ud588\ub2e4. \ub2e8\uc21c\ud788 \uc5b8\uc5b4\ub9cc \ubc14\uafb8\ub294 \uac83\uc774 \uc544\ub2c8\ub77c, \uae30\uc874 \uc2dc\uc2a4\ud15c\uc5d0\uc11c \ubc30\uc6b4 \uad50\ud6c8\uc744 \ubc18\uc601\ud55c \ub354 \ub098\uc740 \uc544\ud0a4\ud14d\ucc98\ub97c \ucc98\uc74c\ubd80\ud130 \uc124\uacc4\ud558\ub294 \uac83\uc774 \ubaa9\ud45c\uc600\ub2e4.</p>","tags":["Rust","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","Axum","\uc774\ucee4\uba38\uc2a4"]},{"location":"search-engine/Rust%EB%A1%9C-%EC%BB%A4%EB%A8%B8%EC%8A%A4-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%9D%84-%EC%B2%98%EC%9D%8C%EB%B6%80%ED%84%B0-%EB%A7%8C%EB%93%A4%EA%B8%B0/#rust_1","title":"\uc65c Rust\uc778\uac00","text":"<p>\uac80\uc0c9 \uc5d4\uc9c4\uc758 \uc5b8\uc5b4\ub97c \uc120\ud0dd\ud560 \ub54c \uace0\ub824\ud55c \uc694\uc18c\ub294 \ud06c\uac8c \uc138 \uac00\uc9c0\uc600\ub2e4.</p> <p>\uc131\ub2a5\uacfc \uba54\ubaa8\ub9ac \uc548\uc804\uc131: \uac80\uc0c9 \uc5d4\uc9c4\uc740 \ub300\ub7c9\uc758 \ub370\uc774\ud130\ub97c \ube60\ub974\uac8c \ucc98\ub9ac\ud574\uc57c \ud558\uba70, \ub3d9\uc2dc\uc5d0 \uba54\ubaa8\ub9ac \ub204\uc218\uac00 \uc5c6\uc5b4\uc57c \ud55c\ub2e4. Rust\ub294 \uc18c\uc720\uad8c \uc2dc\uc2a4\ud15c\uc744 \ud1b5\ud574 \ucef4\ud30c\uc77c \ud0c0\uc784\uc5d0 \uba54\ubaa8\ub9ac \uc548\uc804\uc131\uc744 \ubcf4\uc7a5\ud558\uba74\uc11c\ub3c4 C/C++ \uc218\uc900\uc758 \uc131\ub2a5\uc744 \uc81c\uacf5\ud55c\ub2e4. GC(Garbage Collector)\uac00 \uc5c6\uae30 \ub54c\ubb38\uc5d0 \uc77c\uc2dc \uc815\uc9c0(pause) \uc5c6\uc774 \uc77c\uad00\ub41c \uc751\ub2f5 \uc2dc\uac04\uc744 \ubcf4\uc7a5\ud560 \uc218 \uc788\ub2e4.</p> <p>\ub3d9\uc2dc\uc131 \ucc98\ub9ac: \uc778\ub371\uc2f1\uacfc \uac80\uc0c9\uc740 \ubcf8\uc9c8\uc801\uc73c\ub85c \ub3d9\uc2dc\uc131\uc774 \ub192\uc740 \uc791\uc5c5\uc774\ub2e4. Rust\uc758 async/await\uc640 tokio \ub7f0\ud0c0\uc784\uc740 \uc218\ucc9c \uac1c\uc758 \ub3d9\uc2dc \uc694\uccad\uc744 \ud6a8\uc728\uc801\uc73c\ub85c \ucc98\ub9ac\ud560 \uc218 \uc788\uc73c\uba70, Send/Sync \ud2b8\ub808\uc787\uc744 \ud1b5\ud574 \ub370\uc774\ud130 \ub808\uc774\uc2a4\ub97c \ucef4\ud30c\uc77c \ud0c0\uc784\uc5d0 \ubc29\uc9c0\ud55c\ub2e4.</p> <p>\ud0c0\uc785 \uc2dc\uc2a4\ud15c\uc758 \uc5c4\uaca9\ud568: OpenSearch\uc640 \ud1b5\uc2e0\ud560 \ub54c JSON \uad6c\uc870\uac00 \ubcf5\uc7a1\ud574\uc9c0\uba74 \ub7f0\ud0c0\uc784 \uc624\ub958\uac00 \ube48\ubc88\ud558\uac8c \ubc1c\uc0dd\ud55c\ub2e4. Rust\uc758 serde \uae30\ubc18 \uc9c1\ub82c\ud654/\uc5ed\uc9c1\ub82c\ud654\ub294 \ucef4\ud30c\uc77c \ud0c0\uc784\uc5d0 \ud0c0\uc785 \ubd88\uc77c\uce58\ub97c \uc7a1\uc544\uc8fc\uc5b4, \ud504\ub85c\ub355\uc158\uc5d0\uc11c\uc758 \uc608\uae30\uce58 \uc54a\uc740 \uc624\ub958\ub97c \ud06c\uac8c \uc904\uc5ec\uc900\ub2e4.</p> <p>Go\ub3c4 \ud6c4\ubcf4\uc5d0 \uc62c\ub790\uc73c\ub098, \uc81c\ub124\ub9ad \uc9c0\uc6d0\uc758 \ud55c\uacc4\uc640 \uc5d0\ub7ec \ucc98\ub9ac \ud328\ud134(if err != nil)\uc774 \uac80\uc0c9 \uc5d4\uc9c4\ucc98\ub7fc \ubcf5\uc7a1\ud55c \ub370\uc774\ud130 \ubcc0\ud658 \ub85c\uc9c1\uc5d0\ub294 \uc801\ud569\ud558\uc9c0 \uc54a\ub2e4\uace0 \ud310\ub2e8\ud588\ub2e4.</p>","tags":["Rust","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","Axum","\uc774\ucee4\uba38\uc2a4"]},{"location":"search-engine/Rust%EB%A1%9C-%EC%BB%A4%EB%A8%B8%EC%8A%A4-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%9D%84-%EC%B2%98%EC%9D%8C%EB%B6%80%ED%84%B0-%EB%A7%8C%EB%93%A4%EA%B8%B0/#_2","title":"\ud504\ub85c\uc81d\ud2b8 \uad6c\uc870 \uc124\uacc4","text":"<p>\ucd08\uae30 \ucee4\ubc0b(<code>test rust</code>, 2025-03-24)\uc5d0\uc11c \uc2dc\uc791\ud574 \uc774\ud2c0 \ub9cc\uc5d0 \uae30\ubcf8 \ud504\ub85c\uc81d\ud2b8 \uad6c\uc870\ub97c \uc7a1\uc558\ub2e4. \ud575\uc2ec\uc740 \uacc4\uce35\ud615 \uc544\ud0a4\ud14d\ucc98\ub97c \uc5c4\uaca9\ud558\uac8c \ubd84\ub9ac\ud558\ub294 \uac83\uc774\uc5c8\ub2e4.</p> <pre><code>search_rust/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 main.rs                    # \uc571 \uc9c4\uc785\uc810, \ub77c\uc6b0\ud130 \uad6c\uc131\n\u2502   \u251c\u2500\u2500 config.rs                  # \ud658\uacbd \uc124\uc815 \uad00\ub9ac\n\u2502   \u251c\u2500\u2500 error.rs                   # \ud1b5\ud569 \uc5d0\ub7ec \ud0c0\uc785\n\u2502   \u251c\u2500\u2500 models.rs                  # \uacf5\ud1b5 \ubaa8\ub378 \uc815\uc758\n\u2502   \u251c\u2500\u2500 routes/                    # HTTP \ub77c\uc6b0\ud2b8 \uacc4\uce35\n\u2502   \u2502   \u251c\u2500\u2500 indexing/              # \uc778\ub371\uc2f1 API\n\u2502   \u2502   \u251c\u2500\u2500 search/                # \uac80\uc0c9 API\n\u2502   \u2502   \u2514\u2500\u2500 pipeline/              # CI/CD \ud30c\uc774\ud504\ub77c\uc778 API\n\u2502   \u251c\u2500\u2500 services/                  # \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1 \uacc4\uce35\n\u2502   \u2502   \u251c\u2500\u2500 indexing/              # \uc778\ub371\uc2f1 \uc11c\ube44\uc2a4\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 indexing_service.rs\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 db_fetch_service.rs\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 tokenizer_service.rs\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 synonym_service.rs\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 ranking_service.rs\n\u2502   \u2502   \u251c\u2500\u2500 search/                # \uac80\uc0c9 \uc11c\ube44\uc2a4\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 search_service.rs\n\u2502   \u2502   \u2514\u2500\u2500 service_manager.rs     # \uc11c\ube44\uc2a4 \uc758\uc874\uc131 \uad00\ub9ac\n\u2502   \u251c\u2500\u2500 repositories/              # \ub370\uc774\ud130 \uc811\uadfc \uacc4\uce35\n\u2502   \u2502   \u2514\u2500\u2500 indexing/\n\u2502   \u2502       \u251c\u2500\u2500 base_repository.rs\n\u2502   \u2502       \u251c\u2500\u2500 goods_repository.rs\n\u2502   \u2502       \u251c\u2500\u2500 marketing_repository.rs\n\u2502   \u2502       \u251c\u2500\u2500 event_repository.rs\n\u2502   \u2502       \u2514\u2500\u2500 columns_map/       # \uc778\ub371\uc2a4\ubcc4 \uceec\ub7fc \ub9e4\ud551 JSON\n\u2502   \u251c\u2500\u2500 templates/                 # Handlebars \uac80\uc0c9 \ucffc\ub9ac \ud15c\ud50c\ub9bf\n\u2502   \u2502   \u251c\u2500\u2500 goods_search_template.hbs\n\u2502   \u2502   \u251c\u2500\u2500 marketing_search_template.hbs\n\u2502   \u2502   \u2514\u2500\u2500 event_search_template.hbs\n\u2502   \u2514\u2500\u2500 util/                      # \uc720\ud2f8\ub9ac\ud2f0 \uacc4\uce35\n\u2502       \u251c\u2500\u2500 database/              # DB \ucd94\uc0c1\ud654\n\u2502       \u251c\u2500\u2500 opensearch/            # OpenSearch \ud074\ub77c\uc774\uc5b8\ud2b8\n\u2502       \u251c\u2500\u2500 redis/                 # Redis \uce90\uc2dc\n\u2502       \u251c\u2500\u2500 mysql/                 # MySQL \ud074\ub77c\uc774\uc5b8\ud2b8\n\u2502       \u251c\u2500\u2500 postgresql/            # PostgreSQL \ud074\ub77c\uc774\uc5b8\ud2b8\n\u2502       \u2514\u2500\u2500 search/                # \uac80\uc0c9 \uc720\ud2f8\ub9ac\ud2f0\n\u251c\u2500\u2500 Cargo.toml\n\u251c\u2500\u2500 .gitlab-ci.yml\n\u2514\u2500\u2500 .env\n</code></pre> <p>\uc774 \uad6c\uc870\uc5d0\uc11c \uac00\uc7a5 \uc911\uc694\ud558\uac8c \uc0dd\uac01\ud55c \uc6d0\uce59\uc740 \uc758\uc874\uc131 \ubc29\ud5a5\uc758 \ub2e8\ubc29\ud5a5\uc131\uc774\ub2e4. routes\ub294 services\ub97c \ud638\ucd9c\ud558\uace0, services\ub294 repositories\uc640 util\uc744 \uc0ac\uc6a9\ud558\uba70, \uc5ed\ubc29\ud5a5 \ucc38\uc870\ub294 \uc874\uc7ac\ud558\uc9c0 \uc54a\ub294\ub2e4. Rust\uc758 \ubaa8\ub4c8 \uc2dc\uc2a4\ud15c(<code>mod.rs</code>)\uc740 \uc774 \uaddc\uce59\uc744 \uc790\uc5f0\uc2a4\ub7fd\uac8c \uac15\uc81c\ud55c\ub2e4.</p> <pre><code>graph TD\n    A[Routes Layer] --&gt; B[Services Layer]\n    B --&gt; C[Repositories Layer]\n    B --&gt; D[Util Layer]\n    D --&gt; E[OpenSearch Client]\n    D --&gt; F[PostgreSQL Client]\n    D --&gt; G[MySQL Client]\n    D --&gt; H[Redis Cache]\n    C --&gt; F\n    C --&gt; G</code></pre>","tags":["Rust","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","Axum","\uc774\ucee4\uba38\uc2a4"]},{"location":"search-engine/Rust%EB%A1%9C-%EC%BB%A4%EB%A8%B8%EC%8A%A4-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%9D%84-%EC%B2%98%EC%9D%8C%EB%B6%80%ED%84%B0-%EB%A7%8C%EB%93%A4%EA%B8%B0/#_3","title":"\ud575\uc2ec \uc758\uc874\uc131 \uc120\ud0dd","text":"<p>Cargo.toml\uc5d0 \uba85\uc2dc\ub41c \uc8fc\uc694 \uc758\uc874\uc131\uacfc \uac01\uac01\uc744 \uc120\ud0dd\ud55c \uc774\uc720\ub294 \ub2e4\uc74c\uacfc \uac19\ub2e4.</p> <pre><code>[dependencies]\nopensearch = \"2.0.0\"          # OpenSearch \uacf5\uc2dd Rust \ud074\ub77c\uc774\uc5b8\ud2b8\naxum = \"0.6.20\"               # \uc6f9 \ud504\ub808\uc784\uc6cc\ud06c\ntokio = { version = \"1\", features = [\"full\"] }  # \ube44\ub3d9\uae30 \ub7f0\ud0c0\uc784\nserde = { version = \"1.0\", features = [\"derive\"] }  # \uc9c1\ub82c\ud654/\uc5ed\uc9c1\ub82c\ud654\nhandlebars = \"4.3.1\"          # \uac80\uc0c9 \ucffc\ub9ac \ud15c\ud50c\ub9bf \uc5d4\uc9c4\nssh2 = \"0.9.5\"                # SSH \ud130\ub110\ub9c1\nsqlx = { version = \"0.7\", features = [\"runtime-tokio-rustls\", \"postgres\", \"json\"] }\nredis = { version = \"0.23\", features = [\"tokio-comp\"] }\n</code></pre> <p>Axum vs Actix-web: \ucd08\uae30\uc5d0\ub294 Actix-web\ub3c4 \uace0\ub824\ud588\uc73c\ub098, Axum\uc744 \uc120\ud0dd\ud588\ub2e4. tokio \uc0dd\ud0dc\uacc4\uc640\uc758 \ud1b5\ud569\uc774 \ub354 \uc790\uc5f0\uc2a4\ub7fd\uace0, Tower \ubbf8\ub4e4\uc6e8\uc5b4 \uc0dd\ud0dc\uacc4\ub97c \uadf8\ub300\ub85c \ud65c\uc6a9\ud560 \uc218 \uc788\uc73c\uba70, \ud0c0\uc785 \uc548\uc804\ud55c \ucd94\ucd9c\uae30(extractor) \ud328\ud134\uc774 \uac80\uc0c9 API\uc758 \ubcf5\uc7a1\ud55c \ud30c\ub77c\ubbf8\ud130 \ucc98\ub9ac\uc5d0 \uc801\ud569\ud588\ub2e4. \ubb34\uc5c7\ubcf4\ub2e4 Axum\uc758 Router \ud569\uc131(<code>merge</code>) \uae30\ub2a5\uc774 \ubaa8\ub4c8\ubcc4 \ub77c\uc6b0\ud2b8 \ubd84\ub9ac\uc5d0 \ub9e4\uc6b0 \ud3b8\ub9ac\ud588\ub2e4.</p> <p>Handlebars \ud15c\ud50c\ub9bf \uc5d4\uc9c4: OpenSearch \ucffc\ub9ac\ub294 JSON \ud615\ud0dc\uc774\uc9c0\ub9cc, \uac80\uc0c9 \uc870\uac74\uc5d0 \ub530\ub77c \ub3d9\uc801\uc73c\ub85c \uad6c\uc131\ud574\uc57c \ud55c\ub2e4. \ubb38\uc790\uc5f4 \uc5f0\uacb0\ub85c \ucffc\ub9ac\ub97c \ub9cc\ub4e4\uba74 \uc720\uc9c0\ubcf4\uc218\uac00 \ubd88\uac00\ub2a5\ud574\uc9c0\ubbc0\ub85c, Handlebars \ud15c\ud50c\ub9bf\uc744 \ub3c4\uc785\ud574 \ucffc\ub9ac\ub97c \uc120\uc5b8\uc801\uc73c\ub85c \uad00\ub9ac\ud558\uae30\ub85c \ud588\ub2e4. \uc774 \uacb0\uc815\uc740 \ub098\uc911\uc5d0 \uac80\uc0c9 \ud488\uc9c8 \ud29c\ub2dd \uacfc\uc815\uc5d0\uc11c \ud070 \ud6a8\uacfc\ub97c \ubc1c\ud718\ud588\ub2e4.</p>","tags":["Rust","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","Axum","\uc774\ucee4\uba38\uc2a4"]},{"location":"search-engine/Rust%EB%A1%9C-%EC%BB%A4%EB%A8%B8%EC%8A%A4-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%9D%84-%EC%B2%98%EC%9D%8C%EB%B6%80%ED%84%B0-%EB%A7%8C%EB%93%A4%EA%B8%B0/#_4","title":"\uc571 \uc9c4\uc785\uc810\uacfc \ub77c\uc6b0\ud130 \uad6c\uc131","text":"<p>main.rs\ub294 \ucd5c\ub300\ud55c \uac04\uacb0\ud558\uac8c \uc720\uc9c0\ud588\ub2e4. \uc124\uc815 \ub85c\ub4dc, \ud074\ub77c\uc774\uc5b8\ud2b8 \ucd08\uae30\ud654, \ub77c\uc6b0\ud130 \uc870\ud569, \uc11c\ubc84 \uc2e4\ud589 \u2014 \uc774 \ub124 \uac00\uc9c0 \uc5ed\ud560\ub9cc \uc218\ud589\ud55c\ub2e4.</p> <pre><code>#[tokio::main]\nasync fn main() {\n    // \ub85c\uae45 \ucd08\uae30\ud654 - \uc678\ubd80 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc758 \ub514\ubc84\uadf8 \ub85c\uadf8\ub294 \uc81c\uc678\n    env_logger::Builder::from_env(\n        Env::default()\n            .default_filter_or(\"debug,tokio_postgres=info,mysql_async=info,h2=info,hyper=info\"),\n    )\n    .format_timestamp_millis()\n    .init();\n\n    let config = config::load_config();\n\n    // Redis \ud074\ub77c\uc774\uc5b8\ud2b8 \ucd08\uae30\ud654 (\uc2e4\ud328\ud574\ub3c4 \uc11c\ubc84\ub294 \uae30\ub3d9)\n    if let Err(e) = init_redis_client(&amp;config).await {\n        warn!(\"Failed to initialize Redis client: {}. Caching will be disabled.\", e);\n    }\n\n    // Sentry \uc5f0\ub3d9 (\ud504\ub85c\ub355\uc158 \ud658\uacbd\uc5d0\uc11c\ub9cc)\n    let _guard = if config.env == \"prd\" {\n        Some(sentry::init((\"...\", ClientOptions { ... })))\n    } else {\n        None\n    };\n\n    let app = Router::new()\n        .route(\"/health\", get(health_check))\n        .merge(search_routes())\n        .merge(indexing_routes())\n        .merge(pipeline_routes())\n        .merge(swagger_routes());\n\n    let addr = SocketAddr::from_str(&amp;format!(\"{}:{}\", config.server_host, config.server_port))\n        .expect(\"Failed to parse socket address\");\n\n    Server::bind(&amp;addr).serve(app.into_make_service()).await.unwrap();\n}\n</code></pre> <p>\uc5ec\uae30\uc11c \uc8fc\ubaa9\ud560 \uc810\uc740 Redis \ucd08\uae30\ud654 \uc2e4\ud328 \uc2dc \uc11c\ubc84\uac00 \uc885\ub8cc\ub418\uc9c0 \uc54a\uace0 \uce90\uc2f1\ub9cc \ube44\ud65c\uc131\ud654\ub418\ub3c4\ub85d \ucc98\ub9ac\ud55c \ubd80\ubd84\uc774\ub2e4. \uac80\uc0c9 \uc5d4\uc9c4\uc740 Redis \uc5c6\uc774\ub3c4 \ub3d9\uc791\ud574\uc57c \ud55c\ub2e4. Redis\ub294 \uc131\ub2a5 \ucd5c\uc801\ud654\ub97c \uc704\ud55c \ubd80\uac00 \uae30\ub2a5\uc774\uc9c0 \ud544\uc218 \uc758\uc874\uc131\uc774 \uc544\ub2c8\ub2e4. \uc774\ub7f0 \uad00\uc810\uc740 NestJS \ubc84\uc804\uc5d0\uc11c Redis \uc7a5\uc560\ub85c \uc804\uccb4 \uc11c\ube44\uc2a4\uac00 \uc911\ub2e8\ub41c \uacbd\ud5d8\uc5d0\uc11c \ube44\ub86f\ub418\uc5c8\ub2e4.</p> <p>\ub610 \ud558\ub098\ub294 \ub85c\uadf8 \ud544\ud130\ub9c1\uc774\ub2e4. <code>tokio_postgres=info,mysql_async=info,h2=info,hyper=info</code>\ub85c \uc678\ubd80 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc758 \ub514\ubc84\uadf8 \ub85c\uadf8\ub97c \uac78\ub7ec\ub0c8\ub2e4. \uc774\uac78 \uc548 \ud558\uba74 OpenSearch\uc640 PostgreSQL \ud1b5\uc2e0 \uacfc\uc815\uc5d0\uc11c \ubc1c\uc0dd\ud558\ub294 \uc800\uc218\uc900 \ub85c\uadf8\uac00 \uc218\ucc9c \uc904\uc529 \ucd9c\ub825\ub418\uc5b4 \uc2e4\uc81c\ub85c \uc911\uc694\ud55c \ub85c\uadf8\ub97c \ucc3e\uae30 \uc5b4\ub824\uc6cc\uc9c4\ub2e4.</p>","tags":["Rust","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","Axum","\uc774\ucee4\uba38\uc2a4"]},{"location":"search-engine/Rust%EB%A1%9C-%EC%BB%A4%EB%A8%B8%EC%8A%A4-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%9D%84-%EC%B2%98%EC%9D%8C%EB%B6%80%ED%84%B0-%EB%A7%8C%EB%93%A4%EA%B8%B0/#_5","title":"\ud658\uacbd \uc124\uc815 \uad00\ub9ac \uc2dc\uc2a4\ud15c","text":"<p>\uac80\uc0c9 \uc5d4\uc9c4\uc740 OpenSearch, PostgreSQL, MySQL, Redis, SSH \ud130\ub110 \ub4f1 \uc678\ubd80 \uc2dc\uc2a4\ud15c\uacfc\uc758 \uc5f0\uacb0 \uc124\uc815\uc774 \ub9ce\ub2e4. \uc774\ub97c \uad00\ub9ac\ud558\uae30 \uc704\ud574 TOML \uae30\ubc18 \uc124\uc815 \ud30c\uc77c\uacfc \ud658\uacbd \ubcc0\uc218\ub97c \uacb0\ud569\ud558\ub294 \ubc29\uc2dd\uc744 \ucc44\ud0dd\ud588\ub2e4.</p> <pre><code>#[derive(Debug, Deserialize, Clone)]\npub struct AppConfig {\n    pub server_host: String,\n    pub server_port: u16,\n    pub env: String,\n    pub log_level: String,\n    pub opensearch_url: String,\n    pub opensearch_pool_size: Option&lt;usize&gt;,\n    pub database_type: DatabaseType,\n    pub postgres: PostgresConfig,\n    pub mysql: Option&lt;MysqlConfig&gt;,\n    pub redis: Option&lt;RedisConfig&gt;,\n    pub ssh: Option&lt;SshConfig&gt;,\n    // ...\n}\n</code></pre> <p>\uc124\uc815 \ub85c\ub4dc\ub294 <code>config</code> \ud06c\ub808\uc774\ud2b8\ub97c \uc0ac\uc6a9\ud558\ub418, Cargo.toml\uc758 <code>[profile]</code> \uc139\uc158\uc73c\ub85c \ube4c\ub4dc \ud504\ub85c\ud30c\uc77c(local, staging, production)\uc744 \uad6c\ubd84\ud588\ub2e4. \uc774 \uc811\uadfc\uc740 \uc77c\ubc18\uc801\uc774\uc9c0 \uc54a\uc9c0\ub9cc, \ucee4\uba38\uc2a4 \ud504\ub85c\uc81d\ud2b8\uc758 \ud2b9\uc131\uc0c1 \ud658\uacbd\ubcc4\ub85c \uc811\uc18d\ud574\uc57c \ud558\ub294 DB\uac00 \ub2e4\ub974\uace0, SSH \ud130\ub110 \uc124\uc815\ub3c4 \ud658\uacbd\ub9c8\ub2e4 \ub2e4\ub974\uae30 \ub54c\ubb38\uc5d0 \ube4c\ub4dc \uc2dc\uc810\uc5d0 \ud658\uacbd\uc744 \uacb0\uc815\ud558\ub294 \uac83\uc774 \ub354 \uc548\uc804\ud588\ub2e4.</p> <pre><code>[profile.local]\n# \ub85c\uceec \uac1c\ubc1c \ud658\uacbd\n[profile.stg]\n# \uc2a4\ud14c\uc774\uc9d5 \ud658\uacbd - SSH \ud130\ub110\uc744 \ud1b5\ud55c DB \uc811\uadfc\n[profile.prd]\n# \ud504\ub85c\ub355\uc158 \ud658\uacbd - Sentry \uc5f0\ub3d9 \ud65c\uc131\ud654\n</code></pre> <p>\ud658\uacbd\ubcc4 \uc124\uc815 \ubd84\ub9ac\uc5d0\uc11c \uac00\uc7a5 \uae4c\ub2e4\ub85c\uc6e0\ub358 \ubd80\ubd84\uc740 PostgreSQL\uc758 \uc774\ubca4\ud2b8 \uc804\uc6a9 \uc5f0\uacb0\uc774\ub2e4. \uc77c\ubd80 \ud14c\ub10c\ud2b8\ub294 \uc0c1\ud488(goods) \ub370\uc774\ud130\uc640 \uc774\ubca4\ud2b8(event) \ub370\uc774\ud130\uac00 \uc11c\ub85c \ub2e4\ub978 DB \uc11c\ubc84\uc5d0 \uc874\uc7ac\ud55c\ub2e4. \uc774\ub97c \uc704\ud574 PostgresConfig\uc5d0 \uc774\ubca4\ud2b8 \uc804\uc6a9 \ud638\uc2a4\ud2b8/\uc0ac\uc6a9\uc790/\ube44\ubc00\ubc88\ud638/DB\uba85\uc744 \uc635\uc158\uc73c\ub85c \ub450\uace0, \uc5c6\uc73c\uba74 \uae30\ubcf8\uac12\uc744 \uc0ac\uc6a9\ud558\ub3c4\ub85d \ud588\ub2e4.</p> <pre><code>impl PostgresConfig {\n    pub fn get_event_host(&amp;self) -&gt; String {\n        self.event_host.clone().unwrap_or_else(|| self.host.clone())\n    }\n\n    pub fn get_event_connection_string(&amp;self) -&gt; String {\n        format!(\n            \"postgresql://{}:{}@{}:{}/{}\",\n            self.get_event_user(),\n            self.get_event_password(),\n            self.get_event_host(),\n            self.port,\n            self.get_event_dbname()\n        )\n    }\n}\n</code></pre> <p>\uc774 \ud328\ud134\uc740 Option \ud0c0\uc785\uacfc <code>unwrap_or_else</code>\uc758 \uc870\ud569\uc73c\ub85c \ub9e4\uc6b0 \uc790\uc5f0\uc2a4\ub7fd\uac8c \ud45c\ud604\ub41c\ub2e4. NestJS\uc5d0\uc11c\ub294 \ube44\uc2b7\ud55c \ub85c\uc9c1\uc744 \uad6c\ud604\ud558\uae30 \uc704\ud574 \uc5ec\ub7ec \uacb9\uc758 if\ubb38\uc774 \ud544\uc694\ud588\ub358 \uac83\uacfc \ube44\uad50\ud558\uba74 \ud6e8\uc52c \uae54\ub054\ud558\ub2e4.</p>","tags":["Rust","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","Axum","\uc774\ucee4\uba38\uc2a4"]},{"location":"search-engine/Rust%EB%A1%9C-%EC%BB%A4%EB%A8%B8%EC%8A%A4-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%9D%84-%EC%B2%98%EC%9D%8C%EB%B6%80%ED%84%B0-%EB%A7%8C%EB%93%A4%EA%B8%B0/#opensearch","title":"OpenSearch \ud074\ub77c\uc774\uc5b8\ud2b8 \uc2f1\uae00\ud1a4","text":"<p>OpenSearch\uc640\uc758 \ud1b5\uc2e0\uc740 \uac80\uc0c9 \uc5d4\uc9c4\uc758 \ud575\uc2ec\uc774\ub2e4. \ub9e4 \uc694\uccad\ub9c8\ub2e4 \uc0c8\ub85c\uc6b4 \uc5f0\uacb0\uc744 \uc0dd\uc131\ud558\uba74 \uc131\ub2a5\uc774 \ud06c\uac8c \uc800\ud558\ub418\ubbc0\ub85c, \ucee4\ub125\uc158 \ud480\uc744 \ud3ec\ud568\ud55c \uc2f1\uae00\ud1a4 \ud074\ub77c\uc774\uc5b8\ud2b8\ub97c \uad6c\uc131\ud588\ub2e4.</p> <pre><code>pub struct OpenSearchClientManager {\n    client: Arc&lt;OpenSearch&gt;,\n    pool_size: usize,\n}\n\nstatic INSTANCE: OnceCell&lt;OpenSearchClientManager&gt; = OnceCell::const_new();\n\npub async fn get_client_manager() -&gt; &amp;'static OpenSearchClientManager {\n    INSTANCE\n        .get_or_init(|| async {\n            let config = config::load_config();\n            let url = Url::parse(&amp;config.opensearch_url).unwrap();\n            let conn_pool = SingleNodeConnectionPool::new(url);\n\n            // CPU \ucf54\uc5b4 \uc218 \uae30\ubc18 \ucd5c\uc801 \ud480 \ud06c\uae30 \uacc4\uc0b0\n            let available_cpus = num_cpus::get();\n            let pool_size = if available_cpus &lt;= 4 {\n                available_cpus * 2\n            } else if available_cpus &lt;= 8 {\n                available_cpus * 3\n            } else {\n                std::cmp::min(available_cpus * 4, 32)\n            };\n\n            let transport = TransportBuilder::new(conn_pool)\n                .cert_validation(CertificateValidation::None)\n                .timeout(Duration::from_secs(60))\n                .build()\n                .unwrap();\n\n            OpenSearchClientManager {\n                client: Arc::new(OpenSearch::new(transport)),\n                pool_size,\n            }\n        })\n        .await\n}\n</code></pre> <p>\ucee4\ub125\uc158 \ud480 \ud06c\uae30\ub97c \uc2dc\uc2a4\ud15c\uc758 CPU \ucf54\uc5b4 \uc218\uc5d0 \ub530\ub77c \ub3d9\uc801\uc73c\ub85c \uacb0\uc815\ud558\ub294 \ub85c\uc9c1\uc744 \ub123\uc5c8\ub2e4. 4\ucf54\uc5b4 \uc774\ud558\uc5d0\uc11c\ub294 \ucf54\uc5b4\ub2f9 2\uac1c, 8\ucf54\uc5b4 \uc774\ud558\uc5d0\uc11c\ub294 \ucf54\uc5b4\ub2f9 3\uac1c, \uadf8 \uc774\uc0c1\uc5d0\uc11c\ub294 \ucf54\uc5b4\ub2f9 4\uac1c(\ucd5c\ub300 32\uac1c)\ub85c \uc124\uc815\ud55c\ub2e4. \uc774 \uacf5\uc2dd\uc740 \uc2e4\uc81c \ubd80\ud558 \ud14c\uc2a4\ud2b8\ub97c \ud1b5\ud574 \ub3c4\ucd9c\ud55c \uac83\uc73c\ub85c, OpenSearch\uc758 thread pool \ud06c\uae30\uc640 \ub9de\ubb3c\ub824 \ucd5c\uc801\uc758 \uc131\ub2a5\uc744 \ub0b4\ub294 \uad6c\uac04\uc774\ub2e4.</p> <p>tokio\uc758 <code>OnceCell</code>\uc744 \uc0ac\uc6a9\ud55c \uc774\uc720\ub294 \ucd08\uae30\ud654 \uacfc\uc815 \uc790\uccb4\uac00 \ube44\ub3d9\uae30(\ub124\ud2b8\uc6cc\ud06c \uc5f0\uacb0)\uc774\uae30 \ub54c\ubb38\uc774\ub2e4. <code>lazy_static</code>\uc774\ub098 <code>once_cell::sync</code>\ub85c\ub294 \ube44\ub3d9\uae30 \ucd08\uae30\ud654\ub97c \ucc98\ub9ac\ud560 \uc218 \uc5c6\ub2e4.</p>","tags":["Rust","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","Axum","\uc774\ucee4\uba38\uc2a4"]},{"location":"search-engine/Rust%EB%A1%9C-%EC%BB%A4%EB%A8%B8%EC%8A%A4-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%9D%84-%EC%B2%98%EC%9D%8C%EB%B6%80%ED%84%B0-%EB%A7%8C%EB%93%A4%EA%B8%B0/#_6","title":"\uc2a4\ud2b8\ub9ac\ubc0d \ubc8c\ud06c \uc778\ub371\uc2f1","text":"<p>\uac80\uc0c9 \uc5d4\uc9c4\uc5d0\uc11c \uac00\uc7a5 \uc131\ub2a5\uc774 \uc911\uc694\ud55c \ubd80\ubd84\uc740 \ub300\ub7c9\uc758 \uc0c1\ud488 \ub370\uc774\ud130\ub97c OpenSearch\uc5d0 \uc778\ub371\uc2f1\ud558\ub294 \uacfc\uc815\uc774\ub2e4. NestJS \ubc84\uc804\uc5d0\uc11c\ub294 \uc804\uccb4 \ub370\uc774\ud130\ub97c \uba54\ubaa8\ub9ac\uc5d0 \uc62c\ub9b0 \ud6c4 \uc77c\uad04 \ucc98\ub9ac\ud558\ub294 \ubc29\uc2dd\uc774\uc5c8\ub294\ub370, \uc218\uc2ed\ub9cc \uac74\uc758 \uc0c1\ud488 \ub370\uc774\ud130\ub97c \ucc98\ub9ac\ud560 \ub54c \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9\uc774 \uae09\uc99d\ud558\ub294 \ubb38\uc81c\uac00 \uc788\uc5c8\ub2e4.</p> <p>Rust \ubc84\uc804\uc5d0\uc11c\ub294 \uc2a4\ud2b8\ub9ac\ubc0d \uae30\ubc18 \ubc8c\ud06c \ud504\ub85c\uc138\uc11c\ub97c \uad6c\ud604\ud588\ub2e4.</p> <pre><code>pub struct StreamingBulkProcessor {\n    client: Arc&lt;OpenSearch&gt;,\n    config: StreamingConfig,\n}\n\n#[derive(Clone, Debug)]\npub struct StreamingConfig {\n    pub chunk_size: usize,        // 5000\n    pub max_concurrent: usize,    // CPU \ucf54\uc5b4 * 2 (\ucd5c\ub300 16)\n    pub timeout_ms: u64,          // 3000\n    pub max_retries: usize,       // 3\n}\n</code></pre> <p>\ud575\uc2ec \uc544\uc774\ub514\uc5b4\ub294 <code>mpsc</code> \ucc44\ub110\uc744 \ud1b5\ud574 DB\uc5d0\uc11c \uc77d\uc740 \ub370\uc774\ud130\ub97c \uc2e4\uc2dc\uac04\uc73c\ub85c \uc218\uc2e0\ud558\uba74\uc11c, Semaphore\ub85c \ub3d9\uc2dc \ucc98\ub9ac \uc218\ub97c \uc81c\ud55c\ud558\ub294 \uac83\uc774\ub2e4. DB \ud398\uce58\uc640 OpenSearch \uc778\ub371\uc2f1\uc774 \ud30c\uc774\ud504\ub77c\uc778\ucc98\ub7fc \ubcd1\ub82c\ub85c \ub3d9\uc791\ud55c\ub2e4.</p> <pre><code>graph LR\n    A[DB Fetch] --&gt;|mpsc channel| B[Chunk Buffer]\n    B --&gt;|5000\uac74 \ub2e8\uc704| C[Semaphore]\n    C --&gt; D[Bulk Request 1]\n    C --&gt; E[Bulk Request 2]\n    C --&gt; F[Bulk Request N]\n    D --&gt; G[OpenSearch]\n    E --&gt; G\n    F --&gt; G</code></pre> <p><code>FuturesUnordered</code>\ub97c \uc0ac\uc6a9\ud574 \uc644\ub8cc\ub41c \ubc8c\ud06c \uc694\uccad\ubd80\ud130 \uc21c\uc11c \ubb34\uad00\ud558\uac8c \uacb0\uacfc\ub97c \uc218\uc9d1\ud55c\ub2e4. \uc774\ub807\uac8c \ud558\uba74 \ud558\ub098\uc758 \ub290\ub9b0 \ubc8c\ud06c \uc694\uccad\uc774 \uc804\uccb4 \ud30c\uc774\ud504\ub77c\uc778\uc744 \ub9c9\uc9c0 \uc54a\ub294\ub2e4.</p> <pre><code>pub async fn process_data_stream(\n    &amp;self,\n    rx: mpsc::Receiver&lt;IndexingData&gt;,\n) -&gt; Result&lt;usize, AppError&gt; {\n    let semaphore = Arc::new(Semaphore::new(self.config.max_concurrent));\n    let mut tasks = FuturesUnordered::new();\n    let mut total_processed = 0;\n\n    let chunk_stream = Self::create_chunk_stream(rx, self.config.clone());\n    tokio::pin!(chunk_stream);\n\n    loop {\n        tokio::select! {\n            biased;\n            permit = semaphore.clone().acquire_owned() =&gt; {\n                if let Some(chunk) = chunk_stream.next().await {\n                    let client = client.clone();\n                    tasks.push(tokio::spawn(async move {\n                        let result = Self::process_chunk(client, chunk, config).await;\n                        drop(permit);\n                        result\n                    }));\n                }\n            }\n            Some(result) = tasks.next() =&gt; {\n                total_processed += result??;\n            }\n        }\n    }\n}\n</code></pre> <p><code>tokio::select!</code>\uc758 <code>biased</code> \uc635\uc158\uc744 \uc0ac\uc6a9\ud55c \uc774\uc720\ub294 \uc0c8 chunk \ucc98\ub9ac\ub97c \uc6b0\uc120\ud558\uae30 \uc704\ud568\uc774\ub2e4. \uae30\ubcf8\uc801\uc73c\ub85c <code>select!</code>\ub294 \ub79c\ub364\ud558\uac8c \ube0c\ub79c\uce58\ub97c \uc120\ud0dd\ud558\uc9c0\ub9cc, \uc778\ub371\uc2f1\uc5d0\uc11c\ub294 \ub370\uc774\ud130 \uc218\uc2e0(producer) \uc18d\ub3c4\uc5d0 \ub9de\ucdb0 \ucc98\ub9ac(consumer)\ud558\ub294 \uac83\uc774 \uc804\uccb4 \ucc98\ub9ac\ub7c9\uc744 \ucd5c\ub300\ud654\ud55c\ub2e4.</p>","tags":["Rust","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","Axum","\uc774\ucee4\uba38\uc2a4"]},{"location":"search-engine/Rust%EB%A1%9C-%EC%BB%A4%EB%A8%B8%EC%8A%A4-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%9D%84-%EC%B2%98%EC%9D%8C%EB%B6%80%ED%84%B0-%EB%A7%8C%EB%93%A4%EA%B8%B0/#_7","title":"\uc778\ub371\uc2a4 \ucd5c\uc801\ud654 \uc804\ub7b5","text":"<p>\ub300\ub7c9 \uc778\ub371\uc2f1 \uc2dc OpenSearch\uc758 \uc131\ub2a5\uc744 \uadf9\ub300\ud654\ud558\uae30 \uc704\ud574 \uc778\ub371\uc2f1 \uc804\ud6c4\ub85c \uc124\uc815\uc744 \ubcc0\uacbd\ud558\ub294 \uc804\ub7b5\uc744 \uc801\uc6a9\ud588\ub2e4.</p> <pre><code>async fn optimize_index(&amp;self, index_name: &amp;str) -&gt; Result&lt;(), AppError&gt; {\n    let settings = json!({\n        \"index\": {\n            \"refresh_interval\": \"-1\",         // \uc778\ub371\uc2f1 \uc911 \ub9ac\ud504\ub808\uc2dc \ube44\ud65c\uc131\ud654\n            \"number_of_replicas\": 0,           // \ub808\ud50c\ub9ac\uce74 \ube44\ud65c\uc131\ud654\n            \"translog\": {\n                \"flush_threshold_size\": \"2gb\",  // \ud2b8\ub79c\uc2a4\ub85c\uadf8 \ud50c\ub7ec\uc2dc \uc784\uacc4\uac12 \uc99d\uac00\n                \"sync_interval\": \"30s\"          // \ub3d9\uae30\ud654 \uac04\uaca9 \ub298\ub9bc\n            },\n            \"max_result_window\": 50000\n        }\n    });\n\n    self.client.indices()\n        .put_settings(IndicesPutSettingsParts::Index(&amp;[index_name]))\n        .body(settings)\n        .send()\n        .await?;\n    Ok(())\n}\n</code></pre> <p>\uc778\ub371\uc2f1 \uc804\uc5d0 <code>refresh_interval</code>\uc744 <code>-1</code>\ub85c \uc124\uc815\ud558\uba74 \uc138\uadf8\uba3c\ud2b8 \ubcd1\ud569\uc774 \uc77c\uc5b4\ub098\uc9c0 \uc54a\uc544 \uc4f0\uae30 \uc131\ub2a5\uc774 \ud06c\uac8c \ud5a5\uc0c1\ub41c\ub2e4. \ub808\ud50c\ub9ac\uce74\ub97c 0\uc73c\ub85c \uc124\uc815\ud558\uba74 \ud504\ub77c\uc774\uba38\ub9ac \uc0e4\ub4dc\uc5d0\ub9cc \uae30\ub85d\ud558\ubbc0\ub85c \ub124\ud2b8\uc6cc\ud06c I/O\ub3c4 \uc808\ubc18\uc73c\ub85c \uc904\uc5b4\ub4e0\ub2e4. \uc778\ub371\uc2f1\uc774 \uc644\ub8cc\ub418\uba74 \uc6d0\ub798 \uc124\uc815\uc73c\ub85c \ubcf5\uc6d0\ud558\uace0 force merge\ub97c \uc2e4\ud589\ud55c\ub2e4.</p> <p>\uc774 \ucd5c\uc801\ud654\ub9cc\uc73c\ub85c 10\ub9cc \uac74 \uae30\uc900 \uc778\ub371\uc2f1 \uc2dc\uac04\uc774 \uc57d 40% \ub2e8\ucd95\ub418\uc5c8\ub2e4.</p>","tags":["Rust","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","Axum","\uc774\ucee4\uba38\uc2a4"]},{"location":"search-engine/Rust%EB%A1%9C-%EC%BB%A4%EB%A8%B8%EC%8A%A4-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%9D%84-%EC%B2%98%EC%9D%8C%EB%B6%80%ED%84%B0-%EB%A7%8C%EB%93%A4%EA%B8%B0/#swagger","title":"Swagger \ubb38\uc11c \uc790\ub3d9\ud654","text":"<p>API \ubb38\uc11c\ud654\uc5d0\ub294 <code>utoipa</code>\ub97c \uc0ac\uc6a9\ud588\ub2e4. Rust\uc758 \ub9e4\ud06c\ub85c \uc2dc\uc2a4\ud15c\uacfc \uacb0\ud569\ud558\uba74 \ucf54\ub4dc\uc640 \ubb38\uc11c\uac00 \ud56d\uc0c1 \ub3d9\uae30\ud654\ub41c \uc0c1\ud0dc\ub97c \uc720\uc9c0\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>pub fn swagger_routes() -&gt; Router {\n    let openapi = utoipa::openapi::OpenApiBuilder::new()\n        .info(utoipa::openapi::InfoBuilder::new()\n            .title(\"Search Rust API\")\n            .version(\"1.0.0\")\n            .build())\n        .build();\n\n    Router::new()\n        .merge(SwaggerUi::new(\"/swagger-ui/*tail\").url(\"/api-docs/openapi.json\", openapi))\n}\n</code></pre> <p>NestJS\uc758 <code>@nestjs/swagger</code>\uc5d0 \ube44\ud558\uba74 \uc124\uc815\uc774 \uc57d\uac04 \ub354 \ubc88\uac70\ub86d\uc9c0\ub9cc, \ucef4\ud30c\uc77c \ud0c0\uc784\uc5d0 API \uc2a4\ud399\uc758 \ud0c0\uc785 \ubd88\uc77c\uce58\ub97c \uc7a1\uc544\uc8fc\ub294 \uc810\uc5d0\uc11c \uac00\uce58\uac00 \uc788\uc5c8\ub2e4.</p>","tags":["Rust","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","Axum","\uc774\ucee4\uba38\uc2a4"]},{"location":"search-engine/Rust%EB%A1%9C-%EC%BB%A4%EB%A8%B8%EC%8A%A4-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%9D%84-%EC%B2%98%EC%9D%8C%EB%B6%80%ED%84%B0-%EB%A7%8C%EB%93%A4%EA%B8%B0/#_8","title":"\uc5d0\ub7ec \ucc98\ub9ac \uc804\ub7b5","text":"<p>\uac80\uc0c9 \uc5d4\uc9c4\uc5d0\uc11c \uc5d0\ub7ec \ucc98\ub9ac\ub294 \uc0ac\uc6a9\uc790 \uacbd\ud5d8\uc5d0 \uc9c1\uc811\uc801\uc778 \uc601\ud5a5\uc744 \ubbf8\uce5c\ub2e4. \uac80\uc0c9 \uacb0\uacfc\uac00 \uc5c6\ub294 \uac83\uacfc \uc11c\ubc84 \uc5d0\ub7ec\ub294 \uc644\uc804\ud788 \ub2e4\ub978 \uc0c1\ud669\uc774\uba70, \ud074\ub77c\uc774\uc5b8\ud2b8\uc5d0 \uba85\ud655\ud558\uac8c \uad6c\ubd84\ud574\uc11c \uc804\ub2ec\ud574\uc57c \ud55c\ub2e4.</p> <p>\ucee4\uc2a4\ud140 \uc5d0\ub7ec \ud0c0\uc785 <code>AppError</code>\ub97c \uc815\uc758\ud558\uace0, \ubaa8\ub4e0 \uacc4\uce35\uc5d0\uc11c \uc774\ub97c \ud1b5\uc77c\uc801\uc73c\ub85c \uc0ac\uc6a9\ud588\ub2e4.</p> <pre><code>pub struct AppError {\n    pub code: String,\n    pub message: String,\n}\n\nimpl AppError {\n    pub fn new(code: &amp;str, message: &amp;str) -&gt; Self {\n        Self {\n            code: code.to_string(),\n            message: message.to_string(),\n        }\n    }\n}\n</code></pre> <p>Rust\uc758 <code>?</code> \uc5f0\uc0b0\uc790\uc640 <code>From</code> \ud2b8\ub808\uc787 \uad6c\ud604\uc744 \ud1b5\ud574 OpenSearch \uc5d0\ub7ec, PostgreSQL \uc5d0\ub7ec, Redis \uc5d0\ub7ec \ub4f1\uc744 \uc790\uc5f0\uc2a4\ub7fd\uac8c <code>AppError</code>\ub85c \ubcc0\ud658\ud588\ub2e4. \uc774\ub807\uac8c \ud558\uba74 \uc11c\ube44\uc2a4 \ub85c\uc9c1\uc5d0\uc11c \uc5d0\ub7ec \ucc98\ub9ac \ucf54\ub4dc\uac00 \ucd5c\uc18c\ud654\ub418\uba74\uc11c\ub3c4 \uc5d0\ub7ec \uc815\ubcf4\ub97c \uc783\uc9c0 \uc54a\ub294\ub2e4.</p>","tags":["Rust","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","Axum","\uc774\ucee4\uba38\uc2a4"]},{"location":"search-engine/Rust%EB%A1%9C-%EC%BB%A4%EB%A8%B8%EC%8A%A4-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%9D%84-%EC%B2%98%EC%9D%8C%EB%B6%80%ED%84%B0-%EB%A7%8C%EB%93%A4%EA%B8%B0/#sentry","title":"\ud504\ub85c\ub355\uc158 \ubaa8\ub2c8\ud130\ub9c1: Sentry \uc5f0\ub3d9","text":"<p>\ud504\ub85c\ub355\uc158 \ud658\uacbd\uc5d0\uc11c\ub294 Sentry\ub97c \ud1b5\ud574 \uc5d0\ub7ec\ub97c \ucd94\uc801\ud55c\ub2e4. Sentry \uc5f0\ub3d9\uc740 \ud504\ub85c\ub355\uc158 \ube4c\ub4dc\uc5d0\uc11c\ub9cc \ud65c\uc131\ud654\ub418\ub3c4\ub85d \ud588\ub2e4.</p> <pre><code>let _guard = if config.env == \"prd\" {\n    Some(sentry::init((\n        \"https://...@sentry-dev.x2bee.com/31\",\n        ClientOptions {\n            release: sentry::release_name!(),\n            ..Default::default()\n        },\n    )))\n} else {\n    None\n};\n</code></pre> <p><code>_guard</code> \ubcc0\uc218\ub97c <code>main</code> \ud568\uc218\uc758 \uc2a4\ucf54\ud504\uc5d0 \uc720\uc9c0\ud558\ub294 \uac83\uc774 \uc911\uc694\ud558\ub2e4. \uc774 \ubcc0\uc218\uac00 \ub4dc\ub86d\ub418\uba74 Sentry \ud074\ub77c\uc774\uc5b8\ud2b8\uac00 \uc885\ub8cc\ub418\ubbc0\ub85c, \ubc18\ub4dc\uc2dc \ud504\ub85c\uadf8\ub7a8 \uc804\uccb4 \uc218\uba85 \ub3d9\uc548 \uc0b4\uc544\uc788\uc5b4\uc57c \ud55c\ub2e4.</p>","tags":["Rust","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","Axum","\uc774\ucee4\uba38\uc2a4"]},{"location":"search-engine/Rust%EB%A1%9C-%EC%BB%A4%EB%A8%B8%EC%8A%A4-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%9D%84-%EC%B2%98%EC%9D%8C%EB%B6%80%ED%84%B0-%EB%A7%8C%EB%93%A4%EA%B8%B0/#_9","title":"\ube4c\ub4dc\uc640 \ubc30\ud3ec","text":"<p>GitLab CI/CD\ub97c \ud1b5\ud574 EC2\uc5d0 \uc9c1\uc811 \ubc30\ud3ec\ud558\ub294 \ud30c\uc774\ud504\ub77c\uc778\uc744 \uad6c\uc131\ud588\ub2e4. Rust\ub294 \uc815\uc801 \ubc14\uc774\ub108\ub9ac\ub85c \ucef4\ud30c\uc77c\ub418\ubbc0\ub85c \ubc30\ud3ec\uac00 \ub9e4\uc6b0 \ub2e8\uc21c\ud558\ub2e4. Docker \uc774\ubbf8\uc9c0 \uc5c6\uc774 SCP\ub85c \ubc14\uc774\ub108\ub9ac\ub9cc \uc804\uc1a1\ud558\uba74 \ub41c\ub2e4.</p> <pre><code>stages:\n  - build\n  - deploy\n\nbuild:\n  stage: build\n  script:\n    - cargo build --release\n  artifacts:\n    paths:\n      - target/release/search_rust\n\ndeploy:\n  stage: deploy\n  script:\n    - scp target/release/search_rust $EC2_HOST:/opt/search/\n    - ssh $EC2_HOST 'systemctl restart search-rust'\n</code></pre> <p>\ube4c\ub4dc\ub41c \ubc14\uc774\ub108\ub9ac \ud06c\uae30\ub294 \uc57d 15MB \uc815\ub3c4\ub85c, Node.js\uc758 node_modules(\uc218\ubc31 MB)\uc640 \ube44\uad50\ud558\uba74 \uadf9\uc801\uc73c\ub85c \uc791\ub2e4. \ubc30\ud3ec \uc2dc\uac04\ub3c4 \ube4c\ub4dc\ub97c \uc81c\uc678\ud558\uba74 \uc218 \ucd08\uc5d0 \ubd88\uacfc\ud558\ub2e4.</p>","tags":["Rust","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","Axum","\uc774\ucee4\uba38\uc2a4"]},{"location":"search-engine/Rust%EB%A1%9C-%EC%BB%A4%EB%A8%B8%EC%8A%A4-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%9D%84-%EC%B2%98%EC%9D%8C%EB%B6%80%ED%84%B0-%EB%A7%8C%EB%93%A4%EA%B8%B0/#_10","title":"\uc131\uacfc\uc640 \uad50\ud6c8","text":"<p>Rust\ub85c \uac80\uc0c9 \uc5d4\uc9c4\uc744 \uc7ac\uc791\uc131\ud55c \ud6c4 \uc5bb\uc740 \uad6c\uccb4\uc801\uc778 \uc131\uacfc\ub294 \ub2e4\uc74c\uacfc \uac19\ub2e4.</p> <p>\uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9: NestJS \ubc84\uc804 \ub300\ube44 \uc57d 1/5 \uc218\uc900\uc73c\ub85c \uac10\uc18c\ud588\ub2e4. \ud2b9\ud788 \uc778\ub371\uc2f1 \uc911 \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9\uc774 \uc548\uc815\uc801\uc73c\ub85c \uc720\uc9c0\ub418\uc5b4 OOM \uc774\uc288\uac00 \uc644\uc804\ud788 \uc0ac\ub77c\uc84c\ub2e4.</p> <p>\uc751\ub2f5 \uc2dc\uac04: \ud3c9\uade0 \uac80\uc0c9 \uc751\ub2f5 \uc2dc\uac04\uc774 \uc57d 30% \uac1c\uc120\ub418\uc5c8\ub2e4. \ub300\ubd80\ubd84\uc758 \uc2dc\uac04\uc740 OpenSearch \uc790\uccb4\uc758 \ucc98\ub9ac \uc2dc\uac04\uc774\ubbc0\ub85c \uadf9\uc801\uc778 \ucc28\uc774\ub294 \uc544\ub2c8\uc9c0\ub9cc, P99 \ub808\uc774\ud134\uc2dc\uc5d0\uc11c \ud070 \ucc28\uc774\uac00 \ub0ac\ub2e4. GC \uc77c\uc2dc\uc815\uc9c0\uac00 \uc5c6\uae30 \ub54c\ubb38\uc774\ub2e4.</p> <p>\uc778\ub371\uc2f1 \ucc98\ub9ac\ub7c9: \uc2a4\ud2b8\ub9ac\ubc0d \ubc29\uc2dd + \uc2a4\ub808\ub4dc \ud480 \ucd5c\uc801\ud654\ub85c \ub3d9\uc77c\ud55c \ud558\ub4dc\uc6e8\uc5b4\uc5d0\uc11c \uc57d 2\ubc30\uc758 \ucc98\ub9ac\ub7c9\uc744 \ub2ec\uc131\ud588\ub2e4.</p> <p>\uac1c\ubc1c \uc0dd\uc0b0\uc131: \ucd08\uae30 \ud559\uc2b5 \uace1\uc120\uc740 \uac00\ud30c\ub974\uc9c0\ub9cc, \ucef4\ud30c\uc77c\uc774 \ud1b5\uacfc\ud558\uba74 \ub7f0\ud0c0\uc784 \uc5d0\ub7ec\uac00 \uac70\uc758 \ubc1c\uc0dd\ud558\uc9c0 \uc54a\ub294\ub2e4\ub294 \uc810\uc5d0\uc11c \uc7a5\uae30\uc801\uc73c\ub85c\ub294 \uc0dd\uc0b0\uc131\uc774 \ub192\uc544\uc84c\ub2e4. \"\ucef4\ud30c\uc77c\ub7ec\uac00 \ubc84\uadf8\ub97c \uc7a1\uc544\uc8fc\ub294\" \uacbd\ud5d8\uc740 \uac80\uc0c9 \ucffc\ub9ac\ucc98\ub7fc \ubcf5\uc7a1\ud55c JSON \uad6c\uc870\ub97c \ub2e4\ub8f0 \ub54c \ud2b9\ud788 \uc720\uc6a9\ud558\ub2e4.</p> <p>\uad50\ud6c8\ub3c4 \uc788\uc5c8\ub2e4. Rust\uc758 \uc18c\uc720\uad8c \uc2dc\uc2a4\ud15c\uacfc \ube44\ub3d9\uae30 \ud504\ub85c\uadf8\ub798\ubc0d\uc744 \ub3d9\uc2dc\uc5d0 \ub2e4\ub8e8\ub294 \uac83\uc740 \uc27d\uc9c0 \uc54a\ub2e4. \ud2b9\ud788 <code>Arc&lt;RwLock&lt;T&gt;&gt;</code>\uc640 <code>mpsc</code> \ucc44\ub110\uc758 \uc870\ud569\uc740 \ucd08\uae30\uc5d0 \ub9ce\uc740 \ucef4\ud30c\uc77c \uc5d0\ub7ec\ub97c \uc720\ubc1c\ud588\ub2e4. \ud558\uc9c0\ub9cc \uc774 \uacfc\uc815\uc5d0\uc11c \ub3d9\uc2dc\uc131 \ud504\ub85c\uadf8\ub798\ubc0d\uc5d0 \ub300\ud55c \uc774\ud574\uac00 \uae4a\uc5b4\uc84c\uace0, \uacb0\uacfc\uc801\uc73c\ub85c \ub354 \uc548\uc804\ud55c \ucf54\ub4dc\ub97c \uc791\uc131\ud560 \uc218 \uc788\uac8c \ub418\uc5c8\ub2e4.</p> <p>\ub610 \ud558\ub098\uc758 \uad50\ud6c8\uc740 NestJS \ubc84\uc804\uc758 \uacbd\ud5d8\uc774 \uc5c6\uc5c8\ub2e4\uba74 Rust \ubc84\uc804\uc744 \uc774\ub807\uac8c \ube60\ub974\uac8c \ub9cc\ub4e4 \uc218 \uc5c6\uc5c8\ub2e4\ub294 \uac83\uc774\ub2e4. \uac80\uc0c9 \ud488\uc9c8 \uac1c\uc120, \ub3d9\uc758\uc5b4 \ucc98\ub9ac, Aggregation \ud544\ud130\ub9c1 \ub4f1\uc758 \ub3c4\uba54\uc778 \uc9c0\uc2dd\uc774 \uc774\ubbf8 \ucd95\uc801\ub418\uc5b4 \uc788\uc5c8\uae30 \ub54c\ubb38\uc5d0 \uc5b8\uc5b4\uc640 \uc544\ud0a4\ud14d\ucc98\uc5d0\ub9cc \uc9d1\uc911\ud560 \uc218 \uc788\uc5c8\ub2e4. \uae30\uc874 \uc2dc\uc2a4\ud15c\uc744 \ub9ac\ub77c\uc774\ud2b8\ud560 \ub54c\ub294 \ub3c4\uba54\uc778 \uc9c0\uc2dd\uacfc \uae30\uc220\uc801 \uac1c\uc120\uc744 \ub3d9\uc2dc\uc5d0 \uc9c4\ud589\ud558\uc9c0 \ub9d0\uace0, \uae30\uc220\uc801 \uac1c\uc120\uc5d0\ub9cc \uc9d1\uc911\ud558\ub294 \uac83\uc774 \ud6a8\uc728\uc801\uc774\ub77c\ub294 \uc810\uc744 \ub2e4\uc2dc \ud55c\ubc88 \ud655\uc778\ud588\ub2e4.</p>","tags":["Rust","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","Axum","\uc774\ucee4\uba38\uc2a4"]},{"location":"search-engine/Rust%EB%A1%9C-%EC%BB%A4%EB%A8%B8%EC%8A%A4-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%9D%84-%EC%B2%98%EC%9D%8C%EB%B6%80%ED%84%B0-%EB%A7%8C%EB%93%A4%EA%B8%B0/#_11","title":"\ub2e4\uc74c \ub2e8\uacc4","text":"<p>\uc774 \uae00\uc5d0\uc11c\ub294 \ud504\ub85c\uc81d\ud2b8 \ucd08\uae30 \uc124\uacc4\uc640 \uae30\ubcf8 \uad6c\uc870\ub97c \ub2e4\ub8e8\uc5c8\ub2e4. \ub2e4\uc74c \uae00\uc5d0\uc11c\ub294 Axum + OpenSearch\ub97c \uacb0\ud569\ud55c \uac80\uc0c9 API\uc758 \uc0c1\uc138 \uc544\ud0a4\ud14d\ucc98, Handlebars \ud15c\ud50c\ub9bf \uae30\ubc18\uc758 \ub3d9\uc801 \ucffc\ub9ac \uc0dd\uc131, \uadf8\ub9ac\uace0 Redis \uce90\uc2f1 \uc804\ub7b5\uc5d0 \ub300\ud574 \ub354 \uae4a\uc774 \uc788\uac8c \ub2e4\ub8f0 \uc608\uc815\uc774\ub2e4.</p>","tags":["Rust","OpenSearch","\uac80\uc0c9\uc5d4\uc9c4","Axum","\uc774\ucee4\uba38\uc2a4"]},{"location":"search-engine/%EB%B2%A1%ED%84%B0%20%EA%B8%B0%EB%B0%98%20%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%20%EA%B5%AC%ED%98%84%EA%B8%B0/","title":"\ubca1\ud130 \uae30\ubc18 \uc2dc\ub9e8\ud2f1 \uac80\uc0c9 \uad6c\ud604\uae30","text":""},{"location":"search-engine/%EB%B2%A1%ED%84%B0%20%EA%B8%B0%EB%B0%98%20%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%20%EA%B5%AC%ED%98%84%EA%B8%B0/#_1","title":"\ubca1\ud130 \uae30\ubc18 \uc2dc\ub9e8\ud2f1 \uac80\uc0c9 \uad6c\ud604\uae30","text":""},{"location":"search-engine/%EB%B2%A1%ED%84%B0%20%EA%B8%B0%EB%B0%98%20%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%20%EA%B5%AC%ED%98%84%EA%B8%B0/#_2","title":"\ud504\ub85c\uc81d\ud2b8 \uac1c\uc694","text":"<p>2024\ub144 5\uc6d4\ubd80\ud130 9\uc6d4\uae4c\uc9c0 x2bee-nest-search, search-semantic-api, x2bee-api-goods \ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c \ubca1\ud130 \uae30\ubc18 \uc2dc\ub9e8\ud2f1 \uac80\uc0c9 \uc2dc\uc2a4\ud15c\uc744 \uad6c\ucd95\ud588\ub2e4. \uae30\uc874\uc758 \ud0a4\uc6cc\ub4dc \uae30\ubc18 \uac80\uc0c9\uc758 \ud55c\uacc4\ub97c \ubc97\uc5b4\ub098 \uc758\ubbf8\ub860\uc801 \uc720\uc0ac\uc131\uc744 \uae30\ubc18\uc73c\ub85c \ud558\ub294 \uac80\uc0c9 \uc5d4\uc9c4\uc744 \uac1c\ubc1c\ud558\uc5ec \uc0ac\uc6a9\uc790 \uacbd\ud5d8\uc744 \ud06c\uac8c \ud5a5\uc0c1\uc2dc\ucf30\ub2e4.</p> <p></p>"},{"location":"search-engine/%EB%B2%A1%ED%84%B0%20%EA%B8%B0%EB%B0%98%20%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%20%EA%B5%AC%ED%98%84%EA%B8%B0/#_3","title":"\uae30\uc220 \uc2a4\ud0dd","text":"<ul> <li>Backend: NestJS, TypeScript</li> <li>\ubca1\ud130 \ub370\uc774\ud130\ubca0\uc774\uc2a4: Pinecone, Chroma</li> <li>\uc784\ubca0\ub529 \ubaa8\ub378: OpenAI text-embedding-ada-002, Sentence-BERT</li> <li>\ud15c\ud50c\ub9bf \uc5d4\uc9c4: Handlebars</li> <li>\uc774\ubbf8\uc9c0 \ucc98\ub9ac: OpenCV, Pillow</li> <li>\uac80\uc0c9 \uc5d4\uc9c4: Elasticsearch (\ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9\uc6a9)</li> </ul>"},{"location":"search-engine/%EB%B2%A1%ED%84%B0%20%EA%B8%B0%EB%B0%98%20%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%20%EA%B5%AC%ED%98%84%EA%B8%B0/#_4","title":"\uc2dc\uc2a4\ud15c \uc544\ud0a4\ud14d\ucc98","text":"<p>\uc804\uccb4 \uc2dc\uc2a4\ud15c\uc740 \ub2e4\uc74c\uacfc \uac19\uc740 \uad6c\uc870\ub85c \uc124\uacc4\ud588\ub2e4:</p> <pre><code>\uc0ac\uc6a9\uc790 \ucffc\ub9ac \u2192 \ucffc\ub9ac \uc804\ucc98\ub9ac \u2192 \ubca1\ud130 \uc784\ubca0\ub529 \u2192 \ubca1\ud130 \uac80\uc0c9 \u2192 \uc7ac\uc21c\uc704\ud654 \u2192 \uacb0\uacfc \ubc18\ud658\n     \u2193\n\uc774\ubbf8\uc9c0 \uac80\uc0c9 \u2192 \uc774\ubbf8\uc9c0 \uc784\ubca0\ub529 \u2192 \uba40\ud2f0\ubaa8\ub2ec \ub9e4\uce6d \u2192 \ud1b5\ud569 \uacb0\uacfc\n</code></pre>"},{"location":"search-engine/%EB%B2%A1%ED%84%B0%20%EA%B8%B0%EB%B0%98%20%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%20%EA%B5%AC%ED%98%84%EA%B8%B0/#_5","title":"\uc8fc\uc694 \uad6c\ud604 \ub0b4\uc6a9","text":""},{"location":"search-engine/%EB%B2%A1%ED%84%B0%20%EA%B8%B0%EB%B0%98%20%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%20%EA%B5%AC%ED%98%84%EA%B8%B0/#1","title":"1. \ubca1\ud130 \uc784\ubca0\ub529 \uc11c\ube44\uc2a4","text":"<p>\uc758\ubbf8\ub860\uc801 \uac80\uc0c9\uc758 \ud575\uc2ec\uc778 \ud14d\uc2a4\ud2b8 \uc784\ubca0\ub529 \uc11c\ube44\uc2a4\ub97c \uad6c\ud604\ud588\ub2e4.</p> <pre><code>// embedding.service.ts\nimport { Injectable, Logger } from '@nestjs/common';\nimport { OpenAI } from 'openai';\nimport { SentenceTransformer } from '@huggingface/transformers';\n\n@Injectable()\nexport class EmbeddingService {\n  private readonly logger = new Logger(EmbeddingService.name);\n  private openai: OpenAI;\n  private sentenceBert: SentenceTransformer;\n\n  constructor() {\n    this.openai = new OpenAI({\n      apiKey: process.env.OPENAI_API_KEY,\n    });\n\n    // SentenceBERT \ubaa8\ub378 \ucd08\uae30\ud654\n    this.initializeSentenceBert();\n  }\n\n  private async initializeSentenceBert() {\n    try {\n      this.sentenceBert = await SentenceTransformer.from_pretrained(\n        'sentence-transformers/all-MiniLM-L6-v2'\n      );\n      this.logger.log('SentenceBERT model loaded successfully');\n    } catch (error) {\n      this.logger.error('Failed to load SentenceBERT model', error);\n    }\n  }\n\n  async createTextEmbedding(\n    text: string, \n    model: 'openai' | 'sentence-bert' = 'openai'\n  ): Promise&lt;number[]&gt; {\n\n    // \ud14d\uc2a4\ud2b8 \uc804\ucc98\ub9ac\n    const cleanText = this.preprocessText(text);\n\n    try {\n      if (model === 'openai') {\n        const response = await this.openai.embeddings.create({\n          model: 'text-embedding-ada-002',\n          input: cleanText,\n        });\n        return response.data[0].embedding;\n\n      } else if (model === 'sentence-bert') {\n        const embedding = await this.sentenceBert.encode([cleanText]);\n        return Array.from(embedding[0]);\n      }\n\n    } catch (error) {\n      this.logger.error(`Embedding creation failed for model ${model}:`, error);\n      throw new Error('Failed to create text embedding');\n    }\n  }\n\n  async createBatchEmbeddings(\n    texts: string[], \n    model: 'openai' | 'sentence-bert' = 'openai',\n    batchSize: number = 100\n  ): Promise&lt;number[][]&gt; {\n\n    const embeddings: number[][] = [];\n\n    // \ubc30\uce58 \ub2e8\uc704\ub85c \ucc98\ub9ac\n    for (let i = 0; i &lt; texts.length; i += batchSize) {\n      const batch = texts.slice(i, i + batchSize);\n      const cleanBatch = batch.map(text =&gt; this.preprocessText(text));\n\n      try {\n        if (model === 'openai') {\n          const response = await this.openai.embeddings.create({\n            model: 'text-embedding-ada-002',\n            input: cleanBatch,\n          });\n\n          const batchEmbeddings = response.data.map(item =&gt; item.embedding);\n          embeddings.push(...batchEmbeddings);\n\n        } else if (model === 'sentence-bert') {\n          const batchEmbeddings = await this.sentenceBert.encode(cleanBatch);\n          embeddings.push(...batchEmbeddings.map(emb =&gt; Array.from(emb)));\n        }\n\n        // API \ub808\uc774\ud2b8 \ub9ac\ubc0b \uace0\ub824\n        await this.delay(100);\n\n      } catch (error) {\n        this.logger.error(`Batch embedding failed at index ${i}:`, error);\n        throw error;\n      }\n    }\n\n    return embeddings;\n  }\n\n  private preprocessText(text: string): string {\n    return text\n      .toLowerCase()\n      .replace(/[^\\w\\s\uac00-\ud7a3]/g, '')\n      .trim()\n      .slice(0, 8000); // \ud1a0\ud070 \uc218 \uc81c\ud55c\n  }\n\n  private delay(ms: number): Promise&lt;void&gt; {\n    return new Promise(resolve =&gt; setTimeout(resolve, ms));\n  }\n}\n</code></pre>"},{"location":"search-engine/%EB%B2%A1%ED%84%B0%20%EA%B8%B0%EB%B0%98%20%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%20%EA%B5%AC%ED%98%84%EA%B8%B0/#2","title":"2. \ubca1\ud130 \uac80\uc0c9 \ucee8\ud2b8\ub864\ub7ec","text":"<p>NestJS \uae30\ubc18\uc758 RESTful API\ub85c \ubca1\ud130 \uac80\uc0c9 \uae30\ub2a5\uc744 \ub178\ucd9c\ud588\ub2e4.</p> <pre><code>// search.controller.ts\nimport { \n  Controller, \n  Post, \n  Body, \n  Query, \n  UseInterceptors,\n  Logger \n} from '@nestjs/common';\nimport { SemanticSearchService } from './semantic-search.service';\nimport { CacheInterceptor } from '@nestjs/cache-manager';\n\ninterface SearchRequest {\n  query: string;\n  filters?: Record&lt;string, any&gt;;\n  limit?: number;\n  threshold?: number;\n  includeImages?: boolean;\n}\n\ninterface SearchResult {\n  id: string;\n  title: string;\n  content: string;\n  score: number;\n  metadata: Record&lt;string, any&gt;;\n  imageUrl?: string;\n}\n\n@Controller('search')\n@UseInterceptors(CacheInterceptor)\nexport class SearchController {\n  private readonly logger = new Logger(SearchController.class);\n\n  constructor(\n    private readonly semanticSearchService: SemanticSearchService,\n  ) {}\n\n  @Post('semantic')\n  async semanticSearch(@Body() request: SearchRequest): Promise&lt;{\n    results: SearchResult[];\n    totalCount: number;\n    processingTime: number;\n  }&gt; {\n    const startTime = Date.now();\n\n    try {\n      this.logger.log(`Semantic search query: ${request.query}`);\n\n      // \ucffc\ub9ac \uac80\uc99d\n      if (!request.query || request.query.trim().length &lt; 2) {\n        throw new Error('Query must be at least 2 characters long');\n      }\n\n      // \uc2dc\ub9e8\ud2f1 \uac80\uc0c9 \uc2e4\ud589\n      const results = await this.semanticSearchService.search({\n        query: request.query,\n        filters: request.filters || {},\n        limit: request.limit || 20,\n        threshold: request.threshold || 0.7,\n        includeImages: request.includeImages || false,\n      });\n\n      const processingTime = Date.now() - startTime;\n\n      return {\n        results,\n        totalCount: results.length,\n        processingTime,\n      };\n\n    } catch (error) {\n      this.logger.error('Semantic search failed:', error);\n      throw error;\n    }\n  }\n\n  @Post('hybrid')\n  async hybridSearch(@Body() request: SearchRequest): Promise&lt;{\n    results: SearchResult[];\n    totalCount: number;\n    processingTime: number;\n  }&gt; {\n    const startTime = Date.now();\n\n    try {\n      // \ud0a4\uc6cc\ub4dc \uac80\uc0c9\uacfc \ubca1\ud130 \uac80\uc0c9 \uacb0\ud569\n      const [keywordResults, vectorResults] = await Promise.all([\n        this.semanticSearchService.keywordSearch(request.query, request.filters),\n        this.semanticSearchService.vectorSearch(request.query, request.filters),\n      ]);\n\n      // \uacb0\uacfc \uc735\ud569 \ubc0f \uc7ac\uc21c\uc704\ud654\n      const combinedResults = await this.semanticSearchService.combineAndRerank(\n        keywordResults,\n        vectorResults,\n        request.query\n      );\n\n      const processingTime = Date.now() - startTime;\n\n      return {\n        results: combinedResults.slice(0, request.limit || 20),\n        totalCount: combinedResults.length,\n        processingTime,\n      };\n\n    } catch (error) {\n      this.logger.error('Hybrid search failed:', error);\n      throw error;\n    }\n  }\n}\n</code></pre>"},{"location":"search-engine/%EB%B2%A1%ED%84%B0%20%EA%B8%B0%EB%B0%98%20%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%20%EA%B5%AC%ED%98%84%EA%B8%B0/#3","title":"3. \uc2dc\ub9e8\ud2f1 \uac80\uc0c9 \uc11c\ube44\uc2a4","text":"<p>\ud575\uc2ec \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\uc744 \ub2f4\ub2f9\ud558\ub294 \uc2dc\ub9e8\ud2f1 \uac80\uc0c9 \uc11c\ube44\uc2a4\ub97c \uad6c\ud604\ud588\ub2e4.</p> <pre><code>// semantic-search.service.ts\nimport { Injectable, Logger } from '@nestjs/common';\nimport { EmbeddingService } from './embedding.service';\nimport { VectorStoreService } from './vector-store.service';\n\ninterface SearchOptions {\n  query: string;\n  filters: Record&lt;string, any&gt;;\n  limit: number;\n  threshold: number;\n  includeImages: boolean;\n}\n\n@Injectable()\nexport class SemanticSearchService {\n  private readonly logger = new Logger(SemanticSearchService.name);\n\n  constructor(\n    private readonly embeddingService: EmbeddingService,\n    private readonly vectorStoreService: VectorStoreService,\n  ) {}\n\n  async search(options: SearchOptions): Promise&lt;SearchResult[]&gt; {\n\n    // 1. \ucffc\ub9ac \uc784\ubca0\ub529 \uc0dd\uc131\n    const queryEmbedding = await this.embeddingService.createTextEmbedding(\n      options.query\n    );\n\n    // 2. \ubca1\ud130 \uc720\uc0ac\ub3c4 \uac80\uc0c9\n    const vectorResults = await this.vectorStoreService.similaritySearch({\n      vector: queryEmbedding,\n      filters: options.filters,\n      topK: options.limit * 2, // \ud6c4\ucc98\ub9ac\ub97c \uc704\ud574 \ub354 \ub9ce\uc774 \uac00\uc838\uc634\n      threshold: options.threshold,\n    });\n\n    // 3. \uc774\ubbf8\uc9c0 \uac80\uc0c9 (\uc635\uc158)\n    let imageResults: SearchResult[] = [];\n    if (options.includeImages) {\n      imageResults = await this.searchImages(options.query, options.filters);\n    }\n\n    // 4. \uacb0\uacfc \ud1b5\ud569 \ubc0f \uc7ac\uc21c\uc704\ud654\n    const combinedResults = await this.rerank([\n      ...vectorResults,\n      ...imageResults\n    ], options.query);\n\n    // 5. \ucd5c\uc885 \uacb0\uacfc \uc81c\ud55c\n    return combinedResults.slice(0, options.limit);\n  }\n\n  async vectorSearch(\n    query: string, \n    filters: Record&lt;string, any&gt;\n  ): Promise&lt;SearchResult[]&gt; {\n\n    const queryEmbedding = await this.embeddingService.createTextEmbedding(query);\n\n    return await this.vectorStoreService.similaritySearch({\n      vector: queryEmbedding,\n      filters,\n      topK: 50,\n      threshold: 0.6,\n    });\n  }\n\n  async keywordSearch(\n    query: string, \n    filters: Record&lt;string, any&gt;\n  ): Promise&lt;SearchResult[]&gt; {\n\n    // Elasticsearch\ub97c \ud65c\uc6a9\ud55c \ud0a4\uc6cc\ub4dc \uac80\uc0c9\n    return await this.vectorStoreService.keywordSearch({\n      query,\n      filters,\n      size: 50,\n    });\n  }\n\n  async combineAndRerank(\n    keywordResults: SearchResult[],\n    vectorResults: SearchResult[],\n    originalQuery: string\n  ): Promise&lt;SearchResult[]&gt; {\n\n    // RRF (Reciprocal Rank Fusion) \uc54c\uace0\ub9ac\uc998 \uc801\uc6a9\n    const combinedScores = new Map&lt;string, {\n      result: SearchResult;\n      keywordRank?: number;\n      vectorRank?: number;\n      fusedScore: number;\n    }&gt;();\n\n    // \ud0a4\uc6cc\ub4dc \uac80\uc0c9 \uacb0\uacfc \ucc98\ub9ac\n    keywordResults.forEach((result, index) =&gt; {\n      combinedScores.set(result.id, {\n        result,\n        keywordRank: index + 1,\n        fusedScore: 0,\n      });\n    });\n\n    // \ubca1\ud130 \uac80\uc0c9 \uacb0\uacfc \ucc98\ub9ac\n    vectorResults.forEach((result, index) =&gt; {\n      if (combinedScores.has(result.id)) {\n        const existing = combinedScores.get(result.id)!;\n        existing.vectorRank = index + 1;\n      } else {\n        combinedScores.set(result.id, {\n          result,\n          vectorRank: index + 1,\n          fusedScore: 0,\n        });\n      }\n    });\n\n    // RRF \uc810\uc218 \uacc4\uc0b0\n    const k = 60; // RRF \uc0c1\uc218\n    combinedScores.forEach((item) =&gt; {\n      let score = 0;\n      if (item.keywordRank) {\n        score += 1 / (k + item.keywordRank);\n      }\n      if (item.vectorRank) {\n        score += 1 / (k + item.vectorRank);\n      }\n      item.fusedScore = score;\n    });\n\n    // \uc810\uc218\uc21c \uc815\ub82c\n    return Array.from(combinedScores.values())\n      .sort((a, b) =&gt; b.fusedScore - a.fusedScore)\n      .map(item =&gt; ({\n        ...item.result,\n        score: item.fusedScore,\n      }));\n  }\n\n  private async rerank(\n    results: SearchResult[], \n    query: string\n  ): Promise&lt;SearchResult[]&gt; {\n\n    // \ucffc\ub9ac\uc640 \uac01 \uacb0\uacfc\uc758 \ucf54\uc0ac\uc778 \uc720\uc0ac\ub3c4 \uc7ac\uacc4\uc0b0\n    const queryEmbedding = await this.embeddingService.createTextEmbedding(query);\n\n    const rerankedResults = await Promise.all(\n      results.map(async (result) =&gt; {\n        const contentEmbedding = await this.embeddingService.createTextEmbedding(\n          `${result.title} ${result.content}`\n        );\n\n        const similarity = this.cosineSimilarity(queryEmbedding, contentEmbedding);\n\n        return {\n          ...result,\n          score: similarity,\n        };\n      })\n    );\n\n    // \uc720\uc0ac\ub3c4\uc21c \uc815\ub82c\n    return rerankedResults.sort((a, b) =&gt; b.score - a.score);\n  }\n\n  private cosineSimilarity(vectorA: number[], vectorB: number[]): number {\n    const dotProduct = vectorA.reduce((sum, a, i) =&gt; sum + a * vectorB[i], 0);\n    const magnitudeA = Math.sqrt(vectorA.reduce((sum, a) =&gt; sum + a * a, 0));\n    const magnitudeB = Math.sqrt(vectorB.reduce((sum, b) =&gt; sum + b * b, 0));\n\n    return dotProduct / (magnitudeA * magnitudeB);\n  }\n\n  private async searchImages(\n    query: string, \n    filters: Record&lt;string, any&gt;\n  ): Promise&lt;SearchResult[]&gt; {\n\n    // CLIP \ubaa8\ub378\uc744 \ud65c\uc6a9\ud55c \uc774\ubbf8\uc9c0-\ud14d\uc2a4\ud2b8 \ub9e4\uce6d\n    return await this.vectorStoreService.imageSearch({\n      textQuery: query,\n      filters,\n      topK: 10,\n    });\n  }\n}\n</code></pre>"},{"location":"search-engine/%EB%B2%A1%ED%84%B0%20%EA%B8%B0%EB%B0%98%20%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%20%EA%B5%AC%ED%98%84%EA%B8%B0/#4","title":"4. \uc774\ubbf8\uc9c0 \uac80\uc0c9 \ucee8\ud2b8\ub864\ub7ec","text":"<p>\uba40\ud2f0\ubaa8\ub2ec \uac80\uc0c9\uc744 \uc704\ud55c \uc774\ubbf8\uc9c0 \uac80\uc0c9 \uae30\ub2a5\uc744 \uad6c\ud604\ud588\ub2e4.</p> <pre><code>// image-search.controller.ts\nimport { \n  Controller, \n  Post, \n  UploadedFile, \n  UseInterceptors, \n  Body \n} from '@nestjs/common';\nimport { FileInterceptor } from '@nestjs/platform-express';\nimport { ImageSearchService } from './image-search.service';\n\n@Controller('image-search')\nexport class ImageSearchController {\n\n  constructor(\n    private readonly imageSearchService: ImageSearchService,\n  ) {}\n\n  @Post('by-image')\n  @UseInterceptors(FileInterceptor('image'))\n  async searchByImage(\n    @UploadedFile() image: Express.Multer.File,\n    @Body() body: { limit?: number; threshold?: number }\n  ) {\n\n    if (!image) {\n      throw new Error('No image file provided');\n    }\n\n    // \uc774\ubbf8\uc9c0 \uc720\uc0ac\ub3c4 \uac80\uc0c9\n    const results = await this.imageSearchService.searchSimilarImages({\n      imageBuffer: image.buffer,\n      mimeType: image.mimetype,\n      limit: body.limit || 20,\n      threshold: body.threshold || 0.8,\n    });\n\n    return {\n      results,\n      totalCount: results.length,\n    };\n  }\n\n  @Post('by-text')\n  async searchImagesByText(@Body() body: {\n    query: string;\n    limit?: number;\n    threshold?: number;\n  }) {\n\n    // \ud14d\uc2a4\ud2b8 \uae30\ubc18 \uc774\ubbf8\uc9c0 \uac80\uc0c9\n    const results = await this.imageSearchService.searchImagesByText({\n      query: body.query,\n      limit: body.limit || 20,\n      threshold: body.threshold || 0.7,\n    });\n\n    return {\n      results,\n      totalCount: results.length,\n    };\n  }\n}\n</code></pre>"},{"location":"search-engine/%EB%B2%A1%ED%84%B0%20%EA%B8%B0%EB%B0%98%20%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%20%EA%B5%AC%ED%98%84%EA%B8%B0/#5-handlebars","title":"5. Handlebars \ud15c\ud50c\ub9bf \uc2dc\uc2a4\ud15c","text":"<p>\uac80\uc0c9 \uacb0\uacfc\ub97c \ub2e4\uc591\ud55c \ud615\ud0dc\ub85c \ub80c\ub354\ub9c1\ud558\uae30 \uc704\ud55c \ud15c\ud50c\ub9bf \uc2dc\uc2a4\ud15c\uc744 \uad6c\ucd95\ud588\ub2e4.</p> <pre><code>// template.service.ts\nimport { Injectable } from '@nestjs/common';\nimport * as handlebars from 'handlebars';\nimport * as fs from 'fs';\nimport * as path from 'path';\n\n@Injectable()\nexport class TemplateService {\n\n  constructor() {\n    this.registerHelpers();\n  }\n\n  private registerHelpers() {\n    // \uc810\uc218 \ud3ec\ub9f7\ud305 \ud5ec\ud37c\n    handlebars.registerHelper('formatScore', function(score: number) {\n      return (score * 100).toFixed(1) + '%';\n    });\n\n    // \ud14d\uc2a4\ud2b8 \ud558\uc774\ub77c\uc774\ud2b8 \ud5ec\ud37c\n    handlebars.registerHelper('highlight', function(text: string, query: string) {\n      const regex = new RegExp(`(${query})`, 'gi');\n      return new handlebars.SafeString(\n        text.replace(regex, '&lt;mark&gt;$1&lt;/mark&gt;')\n      );\n    });\n\n    // \uc0c1\ub300\uc2dc\uac04 \ud5ec\ud37c\n    handlebars.registerHelper('timeAgo', function(date: Date) {\n      const now = new Date();\n      const diffMs = now.getTime() - date.getTime();\n      const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));\n\n      if (diffDays === 0) return '\uc624\ub298';\n      if (diffDays === 1) return '\uc5b4\uc81c';\n      if (diffDays &lt; 7) return `${diffDays}\uc77c \uc804`;\n      if (diffDays &lt; 30) return `${Math.floor(diffDays / 7)}\uc8fc \uc804`;\n      return `${Math.floor(diffDays / 30)}\uac1c\uc6d4 \uc804`;\n    });\n\n    // \uc774\ubbf8\uc9c0 URL \ud5ec\ud37c\n    handlebars.registerHelper('imageUrl', function(url: string, width?: number, height?: number) {\n      if (!url) return '/images/placeholder.png';\n\n      // \uc774\ubbf8\uc9c0 \ub9ac\uc0ac\uc774\uc9d5 \ud30c\ub77c\ubbf8\ud130 \ucd94\uac00\n      const params = new URLSearchParams();\n      if (width) params.append('w', width.toString());\n      if (height) params.append('h', height.toString());\n\n      return url + (params.toString() ? '?' + params.toString() : '');\n    });\n  }\n\n  async renderSearchResults(\n    results: SearchResult[], \n    templateName: string = 'search-results',\n    context: Record&lt;string, any&gt; = {}\n  ): Promise&lt;string&gt; {\n\n    const templatePath = path.join(\n      __dirname, \n      '..', \n      'templates', \n      `${templateName}.hbs`\n    );\n\n    try {\n      const templateSource = fs.readFileSync(templatePath, 'utf-8');\n      const template = handlebars.compile(templateSource);\n\n      return template({\n        results,\n        resultCount: results.length,\n        query: context.query,\n        processingTime: context.processingTime,\n        ...context,\n      });\n\n    } catch (error) {\n      throw new Error(`Template rendering failed: ${error.message}`);\n    }\n  }\n\n  async renderEmailResults(\n    results: SearchResult[],\n    userEmail: string,\n    query: string\n  ): Promise&lt;string&gt; {\n\n    return await this.renderSearchResults(results, 'email-results', {\n      userEmail,\n      query,\n      timestamp: new Date(),\n    });\n  }\n}\n</code></pre>"},{"location":"search-engine/%EB%B2%A1%ED%84%B0%20%EA%B8%B0%EB%B0%98%20%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%20%EA%B5%AC%ED%98%84%EA%B8%B0/#_6","title":"\uc131\ub2a5 \ucd5c\uc801\ud654","text":""},{"location":"search-engine/%EB%B2%A1%ED%84%B0%20%EA%B8%B0%EB%B0%98%20%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%20%EA%B5%AC%ED%98%84%EA%B8%B0/#1_1","title":"1. \ubca1\ud130 \uc778\ub371\uc2a4 \ucd5c\uc801\ud654","text":"<p>\ubca1\ud130 \uac80\uc0c9 \uc131\ub2a5\uc744 \uc704\ud574 \ub2e4\uce35 \uc778\ub371\uc2a4 \uad6c\uc870\ub97c \uad6c\ud604\ud588\ub2e4.</p> <pre><code>// vector-store.service.ts\nimport { Injectable } from '@nestjs/common';\nimport { PineconeClient } from 'pinecone-client';\n\n@Injectable()\nexport class VectorStoreService {\n  private pinecone: PineconeClient;\n\n  constructor() {\n    this.pinecone = new PineconeClient({\n      apiKey: process.env.PINECONE_API_KEY,\n      environment: process.env.PINECONE_ENVIRONMENT,\n    });\n  }\n\n  async createIndex(indexName: string, dimension: number) {\n    await this.pinecone.createIndex({\n      name: indexName,\n      dimension,\n      metric: 'cosine',\n      pods: 1,\n      replicas: 1,\n      podType: 'p1.x1',\n      metadata: {\n        shards: 1,\n      }\n    });\n\n    // \uc778\ub371\uc2a4 \uc900\ube44 \ub300\uae30\n    while (true) {\n      const indexStats = await this.pinecone.describeIndex(indexName);\n      if (indexStats.status?.ready) break;\n      await new Promise(resolve =&gt; setTimeout(resolve, 1000));\n    }\n  }\n\n  async similaritySearch(options: {\n    vector: number[];\n    filters: Record&lt;string, any&gt;;\n    topK: number;\n    threshold: number;\n  }): Promise&lt;SearchResult[]&gt; {\n\n    const index = this.pinecone.Index('search-index');\n\n    const queryResponse = await index.query({\n      vector: options.vector,\n      filter: options.filters,\n      topK: options.topK,\n      includeMetadata: true,\n      includeValues: false,\n    });\n\n    return queryResponse.matches\n      ?.filter(match =&gt; (match.score || 0) &gt;= options.threshold)\n      .map(match =&gt; ({\n        id: match.id!,\n        title: match.metadata?.title || '',\n        content: match.metadata?.content || '',\n        score: match.score || 0,\n        metadata: match.metadata || {},\n        imageUrl: match.metadata?.imageUrl,\n      })) || [];\n  }\n\n  async upsertVectors(vectors: {\n    id: string;\n    values: number[];\n    metadata: Record&lt;string, any&gt;;\n  }[]) {\n\n    const index = this.pinecone.Index('search-index');\n\n    // \ubc30\uce58 \ub2e8\uc704\ub85c \uc5c5\uc11c\ud2b8 (Pinecone \uc81c\ud55c: 100\uac1c\uc529)\n    const batchSize = 100;\n    for (let i = 0; i &lt; vectors.length; i += batchSize) {\n      const batch = vectors.slice(i, i + batchSize);\n      await index.upsert({ vectors: batch });\n    }\n  }\n}\n</code></pre>"},{"location":"search-engine/%EB%B2%A1%ED%84%B0%20%EA%B8%B0%EB%B0%98%20%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%20%EA%B5%AC%ED%98%84%EA%B8%B0/#_7","title":"\ud2b8\ub7ec\ube14\uc288\ud305","text":""},{"location":"search-engine/%EB%B2%A1%ED%84%B0%20%EA%B8%B0%EB%B0%98%20%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%20%EA%B5%AC%ED%98%84%EA%B8%B0/#1_2","title":"1. \ubca1\ud130 \ucc28\uc6d0 \ubd88\uc77c\uce58 \ubb38\uc81c","text":"<p>\uc11c\ub85c \ub2e4\ub978 \uc784\ubca0\ub529 \ubaa8\ub378 \uac04\uc758 \ucc28\uc6d0 \ubd88\uc77c\uce58 \ubb38\uc81c\ub97c \ud574\uacb0\ud588\ub2e4.</p> <pre><code>// dimension-adapter.service.ts\nimport { Injectable } from '@nestjs/common';\nimport * as tf from '@tensorflow/tfjs';\n\n@Injectable()\nexport class DimensionAdapterService {\n\n  async adaptDimensions(\n    embedding: number[], \n    targetDimension: number\n  ): Promise&lt;number[]&gt; {\n\n    const currentDimension = embedding.length;\n\n    if (currentDimension === targetDimension) {\n      return embedding;\n    }\n\n    if (currentDimension &gt; targetDimension) {\n      // PCA\ub97c \ud1b5\ud55c \ucc28\uc6d0 \ucd95\uc18c\n      return await this.pcaReduce(embedding, targetDimension);\n    } else {\n      // Zero-padding\uc744 \ud1b5\ud55c \ucc28\uc6d0 \ud655\uc7a5\n      const padded = [...embedding];\n      while (padded.length &lt; targetDimension) {\n        padded.push(0);\n      }\n      return padded;\n    }\n  }\n\n  private async pcaReduce(\n    embedding: number[], \n    targetDimension: number\n  ): Promise&lt;number[]&gt; {\n\n    // TensorFlow.js\ub97c \ud65c\uc6a9\ud55c PCA\n    const tensor = tf.tensor2d([embedding]);\n    const reducedTensor = tf.layers.dense({\n      units: targetDimension,\n      activation: 'linear'\n    }).apply(tensor) as tf.Tensor;\n\n    const result = await reducedTensor.data();\n\n    tensor.dispose();\n    reducedTensor.dispose();\n\n    return Array.from(result);\n  }\n}\n</code></pre>"},{"location":"search-engine/%EB%B2%A1%ED%84%B0%20%EA%B8%B0%EB%B0%98%20%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%20%EA%B5%AC%ED%98%84%EA%B8%B0/#2_1","title":"2. \uac80\uc0c9 \uc18d\ub3c4 \ucd5c\uc801\ud654","text":"<p>\uce90\uc2f1\uacfc \ubc30\uce58 \ucc98\ub9ac\ub97c \ud1b5\ud574 \uac80\uc0c9 \uc18d\ub3c4\ub97c \uac1c\uc120\ud588\ub2e4.</p> <pre><code>// search-cache.service.ts\nimport { Injectable } from '@nestjs/common';\nimport { CacheService } from '@nestjs/cache-manager';\nimport { createHash } from 'crypto';\n\n@Injectable()\nexport class SearchCacheService {\n\n  constructor(private cacheService: CacheService) {}\n\n  private generateCacheKey(query: string, filters: Record&lt;string, any&gt;): string {\n    const data = JSON.stringify({ query, filters });\n    return createHash('md5').update(data).digest('hex');\n  }\n\n  async getCachedResults(\n    query: string, \n    filters: Record&lt;string, any&gt;\n  ): Promise&lt;SearchResult[] | null&gt; {\n\n    const cacheKey = this.generateCacheKey(query, filters);\n    return await this.cacheService.get&lt;SearchResult[]&gt;(cacheKey);\n  }\n\n  async setCachedResults(\n    query: string,\n    filters: Record&lt;string, any&gt;,\n    results: SearchResult[],\n    ttl: number = 300 // 5\ubd84\n  ): Promise&lt;void&gt; {\n\n    const cacheKey = this.generateCacheKey(query, filters);\n    await this.cacheService.set(cacheKey, results, ttl);\n  }\n}\n</code></pre>"},{"location":"search-engine/%EB%B2%A1%ED%84%B0%20%EA%B8%B0%EB%B0%98%20%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%20%EA%B5%AC%ED%98%84%EA%B8%B0/#_8","title":"\uc131\uacfc \ubc0f \uba54\ud2b8\ub9ad","text":"<p>\uc774 \ud504\ub85c\uc81d\ud2b8\ub97c \ud1b5\ud574 \ub2e4\uc74c\uacfc \uac19\uc740 \uc131\uacfc\ub97c \ub2ec\uc131\ud588\ub2e4:</p> <ol> <li>\uac80\uc0c9 \uc815\ud655\ub3c4 40% \ud5a5\uc0c1: \uc758\ubbf8\ub860\uc801 \uc720\uc0ac\uc131 \uae30\ubc18 \uac80\uc0c9\uc73c\ub85c \uad00\ub828\uc131 \ub192\uc740 \uacb0\uacfc \uc81c\uacf5</li> <li>\uc751\ub2f5 \uc2dc\uac04 \ud3c9\uade0 200ms: \ubca1\ud130 \uc778\ub371\uc2a4 \ucd5c\uc801\ud654\uc640 \uce90\uc2f1\uc744 \ud1b5\ud55c \ube60\ub978 \uc751\ub2f5</li> <li>\ub2e4\uad6d\uc5b4 \uc9c0\uc6d0: \uc784\ubca0\ub529 \ubaa8\ub378\uc758 \ub2e4\uad6d\uc5b4 \ud2b9\uc131\uc744 \ud65c\uc6a9\ud55c \uc5b8\uc5b4 \ub3c5\ub9bd\uc801 \uac80\uc0c9</li> <li>\uc774\ubbf8\uc9c0 \uac80\uc0c9 \uae30\ub2a5: \ud14d\uc2a4\ud2b8-\uc774\ubbf8\uc9c0 \uac04 \ud06c\ub85c\uc2a4\ubaa8\ub2ec \uac80\uc0c9 \uc9c0\uc6d0</li> </ol> <p>\ud2b9\ud788 \uae30\uc874 \ud0a4\uc6cc\ub4dc \uae30\ubc18 \uac80\uc0c9 \ub300\ube44 \uc0ac\uc6a9\uc790 \ub9cc\uc871\ub3c4\uac00 \ud06c\uac8c \ud5a5\uc0c1\ub418\uc5c8\uace0, \ub3d9\uc758\uc5b4\ub098 \uc720\uc0ac \ud45c\ud604\uc5d0 \ub300\ud55c \uac80\uc0c9 \uc131\ub2a5\uc774 \ub450\ub4dc\ub7ec\uc9c0\uac8c \uac1c\uc120\ub418\uc5c8\ub2e4.</p>"},{"location":"search-engine/%EB%B2%A1%ED%84%B0%20%EA%B8%B0%EB%B0%98%20%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%20%EA%B5%AC%ED%98%84%EA%B8%B0/#_9","title":"\ud5a5\ud6c4 \uac1c\uc120 \ubc29\uc548","text":"<p>\uc55e\uc73c\ub85c\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 \ubc29\ud5a5\uc73c\ub85c \uc2dc\uc2a4\ud15c\uc744 \ubc1c\uc804\uc2dc\ud0ac \uc608\uc815\uc774\ub2e4:</p> <ul> <li>\uc2e4\uc2dc\uac04 \ud559\uc2b5: \uc0ac\uc6a9\uc790 \ud53c\ub4dc\ubc31\uc744 \ubc14\ud0d5\uc73c\ub85c \ud55c \uc628\ub77c\uc778 \ud559\uc2b5 \uc2dc\uc2a4\ud15c</li> <li>\uac1c\uc778\ud654 \uac80\uc0c9: \uc0ac\uc6a9\uc790\ubcc4 \uc120\ud638\ub3c4\ub97c \ubc18\uc601\ud55c \ub9de\ucda4\ud615 \uac80\uc0c9 \uacb0\uacfc</li> <li>\uc74c\uc131 \uac80\uc0c9 \uc9c0\uc6d0: STT\uc640 \uc5f0\ub3d9\ud55c \uc74c\uc131 \uae30\ubc18 \uac80\uc0c9 \uc778\ud130\ud398\uc774\uc2a4</li> <li>GraphRAG \ud1b5\ud569: \uc9c0\uc2dd \uadf8\ub798\ud504\uc640 RAG\ub97c \uacb0\ud569\ud55c \uace0\ub3c4\ud654\ub41c \uac80\uc0c9 \uc2dc\uc2a4\ud15c</li> </ul>"},{"location":"search-engine/%EC%9D%B4%EB%AF%B8%EC%A7%80-%EA%B2%80%EC%83%89-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84%EA%B8%B0/","title":"\uc774\ubbf8\uc9c0 \uac80\uc0c9 \uae30\ub2a5 \uad6c\ud604\uae30 - \uc2dc\ub9e8\ud2f1 \uac80\uc0c9\uacfc AI \ubd84\ub958\uc758 \ub9cc\ub0a8","text":""},{"location":"search-engine/%EC%9D%B4%EB%AF%B8%EC%A7%80-%EA%B2%80%EC%83%89-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84%EA%B8%B0/#-ai","title":"\uc774\ubbf8\uc9c0 \uac80\uc0c9 \uae30\ub2a5 \uad6c\ud604\uae30 - \uc2dc\ub9e8\ud2f1 \uac80\uc0c9\uacfc AI \ubd84\ub958\uc758 \ub9cc\ub0a8","text":"<p>2024\ub144 7\uc6d4\ubd80\ud130 9\uc6d4\uae4c\uc9c0 \uc9c4\ud589\ud55c \uc774\ubbf8\uc9c0 \uae30\ubc18 \uc0c1\ud488 \uac80\uc0c9 \uc2dc\uc2a4\ud15c \uac1c\ubc1c\uae30\ub97c \uc815\ub9ac\ud55c\ub2e4. \ub2e8\uc21c\ud55c \uc774\ubbf8\uc9c0 \ub9e4\uce6d\uc744 \ub118\uc5b4 AI \ubd84\ub958\uc640 \ubc30\uacbd \uc81c\uac70 \uae30\uc220\uc744 \uc811\ubaa9\ud55c \uc2dc\ub9e8\ud2f1 \uc774\ubbf8\uc9c0 \uac80\uc0c9 \uad6c\ud604 \uacfc\uc815\uc774\ub2e4.</p>"},{"location":"search-engine/%EC%9D%B4%EB%AF%B8%EC%A7%80-%EA%B2%80%EC%83%89-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84%EA%B8%B0/#_1","title":"\ud504\ub85c\uc81d\ud2b8 \uac1c\uc694","text":"<p>\uae30\uc874 \ud14d\uc2a4\ud2b8 \uae30\ubc18 \uac80\uc0c9\uc758 \ud55c\uacc4\ub97c \uadf9\ubcf5\ud558\uace0\uc790 \uc774\ubbf8\uc9c0\ub97c \uc5c5\ub85c\ub4dc\ud558\uba74 \uc720\uc0ac\ud55c \uc0c1\ud488\uc744 \ucc3e\uc544\uc8fc\ub294 \uc2dc\uc2a4\ud15c\uc744 \uac1c\ubc1c\ud588\ub2e4. \uc0ac\uc6a9\uc790\uac00 SNS\uc5d0\uc11c \ubcf8 \uc637\uc774\ub098 \uc81c\ud488 \uc774\ubbf8\uc9c0\ub97c \uc5c5\ub85c\ub4dc\ud558\uba74, \uc6b0\ub9ac \uc1fc\ud551\ubab0\uc758 \uc720\uc0ac\ud55c \uc0c1\ud488\uc744 \ucd94\ucc9c\ud558\ub294 \uac83\uc774 \ubaa9\ud45c\uc600\ub2e4.</p> <p>\ud575\uc2ec \uae30\ub2a5: - \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc\ub97c \ud1b5\ud55c \uc0c1\ud488 \uac80\uc0c9 - AI \uae30\ubc18 \uce74\ud14c\uace0\ub9ac \uc790\ub3d9 \ubd84\ub958 - \ubc30\uacbd \uc81c\uac70\ub97c \ud1b5\ud55c \uc815\ud655\ub3c4 \ud5a5\uc0c1 - \uc2e4\uc2dc\uac04 \uc774\ubbf8\uc9c0 \ucc98\ub9ac \ud30c\uc774\ud504\ub77c\uc778</p>"},{"location":"search-engine/%EC%9D%B4%EB%AF%B8%EC%A7%80-%EA%B2%80%EC%83%89-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84%EA%B8%B0/#_2","title":"\uae30\uc220 \uc544\ud0a4\ud14d\ucc98","text":""},{"location":"search-engine/%EC%9D%B4%EB%AF%B8%EC%A7%80-%EA%B2%80%EC%83%89-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84%EA%B8%B0/#1","title":"1. \uc774\ubbf8\uc9c0 \ucc98\ub9ac \ud30c\uc774\ud504\ub77c\uc778","text":"<pre><code># imageClassification.py \ud575\uc2ec \uad6c\uc870\nclass ImageSearchPipeline:\n    def __init__(self):\n        self.background_remover = RemovalModel()\n        self.feature_extractor = ImageFeatureExtractor()\n        self.category_classifier = CategoryClassifier()\n        self.vector_search = VectorSearch()\n\n    def search_similar_products(self, image_path):\n        # 1. \ubc30\uacbd \uc81c\uac70\n        clean_image = self.remove_background(image_path)\n\n        # 2. \ud2b9\uc9d5 \ucd94\ucd9c\n        features = self.extract_features(clean_image)\n\n        # 3. \uce74\ud14c\uace0\ub9ac \uc608\uce21\n        category = self.classify_category(clean_image)\n\n        # 4. \uc720\uc0ac \uc0c1\ud488 \uac80\uc0c9\n        results = self.vector_search.find_similar(features, category)\n\n        return results\n</code></pre>"},{"location":"search-engine/%EC%9D%B4%EB%AF%B8%EC%A7%80-%EA%B2%80%EC%83%89-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84%EA%B8%B0/#2","title":"2. \ubc30\uacbd \uc81c\uac70 \uc2dc\uc2a4\ud15c","text":"<p>\uc774\ubbf8\uc9c0 \uac80\uc0c9\uc5d0\uc11c \uac00\uc7a5 \ud070 \ub3c4\uc804 \uacfc\uc81c\ub294 \ubc30\uacbd \ub178\uc774\uc988\uc600\ub2e4. \uc0ac\uc6a9\uc790\uac00 \uc5c5\ub85c\ub4dc\ud558\ub294 \uc774\ubbf8\uc9c0\ub294 \ub2e4\uc591\ud55c \ubc30\uacbd\uc744 \uac00\uc9c0\uace0 \uc788\uc5b4, \uc0c1\ud488 \uc790\uccb4\uc758 \ud2b9\uc9d5\uc744 \ucd94\ucd9c\ud558\uae30 \uc5b4\ub824\uc6e0\ub2e4.</p> <p>U-Net \uae30\ubc18 \ubc30\uacbd \uc81c\uac70 \ubaa8\ub378 \ub3c4\uc785:</p> <pre><code>def remove_background(self, image_path):\n    \"\"\"\n    \ubc30\uacbd \uc81c\uac70 \ub85c\uc9c1\n    - U-Net \uc138\uadf8\uba58\ud14c\uc774\uc158 \ubaa8\ub378 \uc0ac\uc6a9\n    - \uc804\ucc98\ub9ac: \ub9ac\uc0ac\uc774\uc988, \uc815\uaddc\ud654\n    - \ud6c4\ucc98\ub9ac: \ub9c8\uc2a4\ud06c \uc801\uc6a9, \uacbd\uacc4 \ubd80\ub4dc\ub7fd\uac8c \ucc98\ub9ac\n    \"\"\"\n    image = cv2.imread(image_path)\n    image_resized = cv2.resize(image, (512, 512))\n\n    # \ubaa8\ub378 \uc608\uce21\n    mask = self.segmentation_model.predict(image_resized)\n\n    # \ub9c8\uc2a4\ud06c \uc801\uc6a9\n    result = image * mask[..., np.newaxis]\n\n    # \ubc30\uacbd\uc744 \ud22c\uba85\ud558\uac8c \ucc98\ub9ac\n    result = self.add_transparency(result, mask)\n\n    return result\n</code></pre> <p>\uc131\ub2a5 \ucd5c\uc801\ud654 \uacfc\uc815: - \ucd08\uae30 \ubaa8\ub378: 2.3\ucd08/\uc774\ubbf8\uc9c0 \u2192 \ucd5c\uc801\ud654 \ud6c4: 0.8\ucd08/\uc774\ubbf8\uc9c0 - \ubc30\uce58 \ucc98\ub9ac \ub3c4\uc785\uc73c\ub85c \ub3d9\uc2dc \ucc98\ub9ac\ub7c9 5\ubc30 \uc99d\uac00 - GPU \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9 40% \uac10\uc18c</p>"},{"location":"search-engine/%EC%9D%B4%EB%AF%B8%EC%A7%80-%EA%B2%80%EC%83%89-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84%EA%B8%B0/#3","title":"3. \ubc30\uce58 \ucc98\ub9ac \uc2dc\uc2a4\ud15c","text":"<p>\ub300\uc6a9\ub7c9 \uc774\ubbf8\uc9c0 \ucc98\ub9ac\ub97c \uc704\ud55c \ubc30\uce58 \uc2dc\uc2a4\ud15c\uc744 \uad6c\ucd95\ud588\ub2e4. \uae30\uc874 \uc0c1\ud488 \uc774\ubbf8\uc9c0\ub4e4\uc744 \ubbf8\ub9ac \ubca1\ud130\ud654\ud558\uc5ec \uac80\uc0c9 \uc18d\ub3c4\ub97c \ud5a5\uc0c1\uc2dc\ucf30\ub2e4.</p> <pre><code># betchUtil.py - \ubc30\uce58 \ucc98\ub9ac \uc720\ud2f8\ub9ac\ud2f0\nclass BatchProcessor:\n    def __init__(self, batch_size=32):\n        self.batch_size = batch_size\n        self.processed_count = 0\n\n    def process_product_images(self, image_list):\n        \"\"\"\n        \uc0c1\ud488 \uc774\ubbf8\uc9c0 \ubc30\uce58 \ucc98\ub9ac\n        - \ubc30\uacbd \uc81c\uac70\n        - \ud2b9\uc9d5 \ubca1\ud130 \ucd94\ucd9c\n        - \uce74\ud14c\uace0\ub9ac \ubd84\ub958\n        - \ubca1\ud130 DB \uc800\uc7a5\n        \"\"\"\n        batches = self.create_batches(image_list)\n\n        for batch in batches:\n            # \ubcd1\ub82c \ucc98\ub9ac\n            with ThreadPoolExecutor(max_workers=4) as executor:\n                futures = [\n                    executor.submit(self.process_single_image, img)\n                    for img in batch\n                ]\n\n                results = [f.result() for f in futures]\n\n            # \uacb0\uacfc \uc800\uc7a5\n            self.save_to_vector_db(results)\n            self.processed_count += len(batch)\n\n            print(f\"Processed: {self.processed_count}/{len(image_list)}\")\n</code></pre>"},{"location":"search-engine/%EC%9D%B4%EB%AF%B8%EC%A7%80-%EA%B2%80%EC%83%89-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84%EA%B8%B0/#4","title":"4. \uce74\ud14c\uace0\ub9ac \ubd84\ub958 \ubaa8\ub378","text":"<p>\uc774\ubbf8\uc9c0\ub9cc\uc73c\ub85c\ub294 \uc815\ud655\ud55c \uac80\uc0c9\uc774 \uc5b4\ub824\uc6cc, AI \uae30\ubc18 \uce74\ud14c\uace0\ub9ac \ubd84\ub958\ub97c \ub3c4\uc785\ud588\ub2e4. ResNet-50\uc744 \ubca0\uc774\uc2a4\ub85c \ud55c \ubd84\ub958 \ubaa8\ub378\uc744 \ud30c\uc778\ud29c\ub2dd\ud558\uc5ec \uc0ac\uc6a9\ud588\ub2e4.</p> <p>\ubd84\ub958 \uce74\ud14c\uace0\ub9ac: - \uc758\ub958: \uc0c1\uc758, \ud558\uc758, \uc544\uc6b0\ud130, \uc2e0\ubc1c - \uc804\uc790\uc81c\ud488: \uc2a4\ub9c8\ud2b8\ud3f0, \ub178\ud2b8\ubd81, \uc774\uc5b4\ud3f0 - \uac00\uad6c: \uce68\ub300, \uc758\uc790, \ud14c\uc774\ube14 - \uae30\ud0c0: \uc7a1\ud654, \ubdf0\ud2f0, \uc2a4\ud3ec\uce20</p> <pre><code># categoryPredict \ubaa8\ub378\nclass CategoryClassifier:\n    def __init__(self, model_path):\n        self.model = self.load_model(model_path)\n        self.categories = self.load_categories()\n\n    def predict(self, image):\n        \"\"\"\n        \uc774\ubbf8\uc9c0 \uce74\ud14c\uace0\ub9ac \uc608\uce21\n        - \uc804\ucc98\ub9ac: 224x224 \ub9ac\uc0ac\uc774\uc988, ImageNet \uc815\uaddc\ud654\n        - \uc608\uce21: softmax \ucd9c\ub825\n        - \ud6c4\ucc98\ub9ac: \uc2e0\ub8b0\ub3c4 \ud544\ud130\ub9c1\n        \"\"\"\n        preprocessed = self.preprocess(image)\n\n        with torch.no_grad():\n            output = self.model(preprocessed)\n            probabilities = F.softmax(output, dim=1)\n\n        predicted_class = torch.argmax(probabilities, dim=1)\n        confidence = torch.max(probabilities, dim=1)[0]\n\n        # \uc2e0\ub8b0\ub3c4\uac00 \ub0ae\uc73c\uba74 '\uae30\ud0c0'\ub85c \ubd84\ub958\n        if confidence &lt; 0.7:\n            return \"\uae30\ud0c0\", confidence.item()\n\n        return self.categories[predicted_class], confidence.item()\n</code></pre>"},{"location":"search-engine/%EC%9D%B4%EB%AF%B8%EC%A7%80-%EA%B2%80%EC%83%89-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84%EA%B8%B0/#_3","title":"\ud575\uc2ec \ub3c4\uc804\uacfc\uc81c\uc640 \ud574\uacb0\ucc45","text":""},{"location":"search-engine/%EC%9D%B4%EB%AF%B8%EC%A7%80-%EA%B2%80%EC%83%89-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84%EA%B8%B0/#1_1","title":"1. \uac80\uc0c9 \uc815\ud655\ub3c4 \ubb38\uc81c","text":"<p>\ubb38\uc81c: \ucd08\uae30\uc5d0\ub294 \ubc30\uacbd\uc774 \ubcf5\uc7a1\ud55c \uc774\ubbf8\uc9c0\uc5d0\uc11c \uac80\uc0c9 \uc815\ud655\ub3c4\uac00 \ub5a8\uc5b4\uc84c\ub2e4.</p> <p>\ud574\uacb0:  - \ubc30\uacbd \uc81c\uac70 \ub85c\uc9c1 \uac15\ud654 - \ub2e4\uc591\ud55c \uac01\ub3c4/\uc870\uba85 \uc870\uac74\uc73c\ub85c \ud6c8\ub828 \ub370\uc774\ud130 \uc99d\uac15 - \uc559\uc0c1\ube14 \ubaa8\ub378\ub9c1\uc73c\ub85c \uac15\uac74\uc131 \ud5a5\uc0c1</p>"},{"location":"search-engine/%EC%9D%B4%EB%AF%B8%EC%A7%80-%EA%B2%80%EC%83%89-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84%EA%B8%B0/#2_1","title":"2. \uc2e4\uc2dc\uac04 \ucc98\ub9ac \uc131\ub2a5","text":"<p>\ubb38\uc81c: \uc774\ubbf8\uc9c0 \ucc98\ub9ac \uc2dc\uac04\uc774 3\ucd08 \uc774\uc0c1 \uc18c\uc694\ub418\uc5b4 \uc0ac\uc6a9\uc790 \uacbd\ud5d8\uc774 \ub098\ube74\ub2e4.</p> <p>\ud574\uacb0: </p><pre><code># \uc131\ub2a5 \ucd5c\uc801\ud654 \ubc29\uc548\n1. \ubaa8\ub378 \uc591\uc790\ud654 (FP32 \u2192 FP16)\n2. TensorRT \ucd94\ub860 \uc5d4\uc9c4 \ub3c4\uc785\n3. \uc774\ubbf8\uc9c0 \uc804\ucc98\ub9ac \ud30c\uc774\ud504\ub77c\uc778 \ucd5c\uc801\ud654\n4. Redis \uce90\uc2f1\uc73c\ub85c \uc911\ubcf5 \uc694\uccad \ucc98\ub9ac\n</code></pre><p></p>"},{"location":"search-engine/%EC%9D%B4%EB%AF%B8%EC%A7%80-%EA%B2%80%EC%83%89-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84%EA%B8%B0/#3-gpu","title":"3. GPU \uba54\ubaa8\ub9ac \uad00\ub9ac","text":"<p>\ubb38\uc81c: \ubc30\uce58 \ucc98\ub9ac \uc911 GPU \uba54\ubaa8\ub9ac \ubd80\uc871\uc73c\ub85c \ud504\ub85c\uc138\uc2a4\uac00 \uc885\ub8cc\ub418\ub294 \ubb38\uc81c</p> <p>\ud574\uacb0: </p><pre><code>def manage_gpu_memory(self):\n    \"\"\"\n    GPU \uba54\ubaa8\ub9ac \uad00\ub9ac\n    - \ubc30\uce58 \ud06c\uae30 \ub3d9\uc801 \uc870\uc808\n    - \uac00\ube44\uc9c0 \uceec\ub809\uc158 \ucd5c\uc801\ud654\n    - \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9 \ubaa8\ub2c8\ud130\ub9c1\n    \"\"\"\n    if torch.cuda.memory_allocated() &gt; 0.8 * torch.cuda.max_memory_allocated():\n        torch.cuda.empty_cache()\n        self.reduce_batch_size()\n</code></pre><p></p>"},{"location":"search-engine/%EC%9D%B4%EB%AF%B8%EC%A7%80-%EA%B2%80%EC%83%89-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84%EA%B8%B0/#_4","title":"\uc131\ub2a5 \uc9c0\ud45c \ubc0f \uacb0\uacfc","text":"<p>\uac80\uc0c9 \uc815\ud655\ub3c4 (Top-5 \uae30\uc900): - \uc758\ub958: 87% \u2192 92% (\ubc30\uacbd\uc81c\uac70 \ud6c4) - \uc804\uc790\uc81c\ud488: 91% \u2192 94% - \uac00\uad6c: 73% \u2192 85% - \uc804\uccb4 \ud3c9\uade0: 83% \u2192 89%</p> <p>\ucc98\ub9ac \uc131\ub2a5: - \ub2e8\uc77c \uc774\ubbf8\uc9c0 \uac80\uc0c9: \ud3c9\uade0 1.2\ucd08 - \ubc30\uce58 \ucc98\ub9ac: 150 images/minute - \ub3d9\uc2dc \uc0ac\uc6a9\uc790: 50\uba85 \uc9c0\uc6d0</p> <p>\uc0ac\uc6a9\uc790 \ub9cc\uc871\ub3c4: - \uac80\uc0c9 \uacb0\uacfc \ub9cc\uc871\ub3c4: 78% \u2192 89% - \uac80\uc0c9 \uc18d\ub3c4 \ub9cc\uc871\ub3c4: 65% \u2192 85%</p>"},{"location":"search-engine/%EC%9D%B4%EB%AF%B8%EC%A7%80-%EA%B2%80%EC%83%89-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84%EA%B8%B0/#_5","title":"\ud2b8\ub7ec\ube14\uc288\ud305 \uc0ac\ub840","text":""},{"location":"search-engine/%EC%9D%B4%EB%AF%B8%EC%A7%80-%EA%B2%80%EC%83%89-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84%EA%B8%B0/#1_2","title":"1. \ubaa8\ub378 \ub85c\ub529 \uc624\ub958 \ud574\uacb0","text":"<p>\ubaa8\ub378 \ud30c\uc77c \uacbd\ub85c \ubb38\uc81c\ub85c \uc11c\ubc84 \uc2dc\uc791 \uc2dc \ubaa8\ub378 \ub85c\ub529\uc774 \uc2e4\ud328\ud558\ub294 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud588\ub2e4.</p> <pre><code># \ud574\uacb0 \ubc29\ubc95: \uc808\ub300 \uacbd\ub85c\uc640 \uc608\uc678 \ucc98\ub9ac \uac15\ud654\ndef load_model_safely(self, model_path):\n    try:\n        # \uc808\ub300 \uacbd\ub85c\ub85c \ubcc0\ud658\n        abs_path = os.path.abspath(model_path)\n\n        if not os.path.exists(abs_path):\n            # fallback \ubaa8\ub378 \uacbd\ub85c\n            abs_path = os.path.join(self.model_dir, \"backup_model.pth\")\n\n        model = torch.load(abs_path, map_location=self.device)\n        logger.info(f\"Model loaded successfully: {abs_path}\")\n        return model\n\n    except Exception as e:\n        logger.error(f\"Model loading failed: {e}\")\n        return self.load_default_model()\n</code></pre>"},{"location":"search-engine/%EC%9D%B4%EB%AF%B8%EC%A7%80-%EA%B2%80%EC%83%89-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84%EA%B8%B0/#2_2","title":"2. \ubc30\uce58 \ucc98\ub9ac \uc911\ub2e8 \ubb38\uc81c","text":"<p>\ub300\uc6a9\ub7c9 \ub370\uc774\ud130 \ucc98\ub9ac \uc911 \uba54\ubaa8\ub9ac \ubd80\uc871\uc73c\ub85c \ud504\ub85c\uc138\uc2a4\uac00 \uc911\ub2e8\ub418\ub294 \ubb38\uc81c\ub97c \uccb4\ud06c\ud3ec\uc778\ud2b8 \uc2dc\uc2a4\ud15c\uc73c\ub85c \ud574\uacb0\ud588\ub2e4.</p> <pre><code>def resume_from_checkpoint(self):\n    \"\"\"\n    \uccb4\ud06c\ud3ec\uc778\ud2b8\uc5d0\uc11c \ubc30\uce58 \ucc98\ub9ac \uc7ac\uc2dc\uc791\n    \"\"\"\n    if os.path.exists(self.checkpoint_file):\n        with open(self.checkpoint_file, 'r') as f:\n            checkpoint = json.load(f)\n            self.processed_count = checkpoint['processed_count']\n            self.failed_images = checkpoint['failed_images']\n\n        print(f\"Resuming from checkpoint: {self.processed_count} processed\")\n</code></pre>"},{"location":"search-engine/%EC%9D%B4%EB%AF%B8%EC%A7%80-%EA%B2%80%EC%83%89-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84%EA%B8%B0/#_6","title":"\ud5a5\ud6c4 \uac1c\uc120 \uacc4\ud68d","text":"<ol> <li>\uba40\ud2f0\ubaa8\ub2ec \uac80\uc0c9: \ud14d\uc2a4\ud2b8 + \uc774\ubbf8\uc9c0 \uacb0\ud569 \uac80\uc0c9</li> <li>\uc2e4\uc2dc\uac04 \uac1c\uc778\ud654: \uc0ac\uc6a9\uc790 \uac80\uc0c9 \ud788\uc2a4\ud1a0\ub9ac \uae30\ubc18 \ucd94\ucc9c</li> <li>3D \uac1d\uccb4 \uc778\uc2dd: AR/VR \uc5f0\uacc4 \uae30\ub2a5</li> <li>\uc9c0\uc18d\uc801 \ud559\uc2b5: \uc0ac\uc6a9\uc790 \ud53c\ub4dc\ubc31 \uae30\ubc18 \ubaa8\ub378 \uc5c5\ub370\uc774\ud2b8</li> </ol> <p>\uc774\ubbf8\uc9c0 \uac80\uc0c9 \uc2dc\uc2a4\ud15c\uc744 \uad6c\ucd95\ud558\uba74\uc11c AI \ubaa8\ub378\uc758 \uc2e4\uc81c \uc11c\ube44\uc2a4 \uc801\uc6a9 \uc2dc \uace0\ub824\ud574\uc57c \ud560 \ub2e4\uc591\ud55c \uce21\uba74\uc744 \uacbd\ud5d8\ud560 \uc218 \uc788\uc5c8\ub2e4. \ub2e8\uc21c\ud55c \uae30\uc220 \uad6c\ud604\uc744 \ub118\uc5b4 \uc0ac\uc6a9\uc790 \uacbd\ud5d8\uacfc \uc2dc\uc2a4\ud15c \uc548\uc815\uc131\uc744 \ubaa8\ub450 \uace0\ub824\ud55c \uc885\ud569\uc801\uc778 \uc811\uadfc\uc774 \ud544\uc694\ud568\uc744 \uae68\ub2ec\uc558\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/Hybrid%20Search/","title":"Hybrid Search","text":"<p>OpenSearch 2.11\ubd80\ud130 \ub3c4\uc785\ub41c Hybrid Search(\ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9) \uae30\ub2a5\uc740 \ud0a4\uc6cc\ub4dc \uae30\ubc18 \uac80\uc0c9\uacfc \uc2dc\ub9e8\ud2f1(\uc758\ubbf8 \uae30\ubc18) \uac80\uc0c9\uc744 \uacb0\ud569\ud558\uc5ec \ubcf4\ub2e4 \uc815\ubc00\ud558\uace0 \uc720\uc5f0\ud55c \uac80\uc0c9 \uacb0\uacfc\ub97c \uc81c\uacf5\ud560 \uc218 \uc788\uac8c \ud574\uc90d\ub2c8\ub2e4. \uc774 \uae00\uc5d0\uc11c\ub294 \ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9\uc758 \uac1c\ub150\ubd80\ud130 \uc790\ub3d9\ud654\ub41c \uc124\uc815 \ubc29\ubc95, \uc218\ub3d9 \uc124\uc815 \ubc29\uc2dd\uae4c\uc9c0 \uc804 \uacfc\uc815\uc744 \uc0c1\uc138\ud788 \uc18c\uac1c\ud569\ub2c8\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/Hybrid%20Search/#_1","title":"\ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9\uc774\ub780?","text":"<p>\ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9\uc740 \uc804\ud1b5\uc801\uc778 \ud0a4\uc6cc\ub4dc \uac80\uc0c9(Query DSL \uae30\ubc18)\uacfc \uc2e0\uacbd\ub9dd \uc784\ubca0\ub529\uc744 \ud65c\uc6a9\ud55c \uc758\ubbf8 \uae30\ubc18 \uac80\uc0c9(Neural Search)\uc758 \uacb0\uacfc\ub97c \uacb0\ud569\ud558\uc5ec \uac80\uc0c9 \uc815\ud655\ub3c4\ub97c \ud5a5\uc0c1\uc2dc\ud0a4\ub294 \ubc29\uc2dd\uc774\ub2e4.</p> <p>\uc774\ub97c \uc704\ud574 OpenSearch\ub294 search pipeline\uc744 \ud1b5\ud574 \ucffc\ub9ac \uc2e4\ud589 \uc911\uac04 \uacb0\uacfc\ub97c \uac00\ub85c\ucc44\uace0 \uc810\uc218(score)\ub97c \uc870\uc815\ud558\uac70\ub098 \uc7ac\uc815\ub82c\ud558\ub294 \ubc29\uc2dd\uc73c\ub85c \ub3d9\uc791\ud55c\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/Hybrid%20Search/#processor","title":"\uc81c\uacf5\ub418\ub294 Processor \uc720\ud615","text":"Processor \uc885\ub958 \ub3c4\uc785 \ubc84\uc804 \uc124\uba85 Normalization Processor 2.10 \uc5ec\ub7ec \ucffc\ub9ac \uacb0\uacfc\uc758 \uc810\uc218\ub97c \uc815\uaddc\ud654 \ubc0f \uacb0\ud569 (\uc608: min-max, mean \ub4f1) Score Ranker Processor 2.19 \ub7ad\ud06c \uae30\ubc18 \uacb0\uacfc\ub97c \uacb0\ud569\ud558\ub294 Rank Fusion \uae30\ubc95 \uc0ac\uc6a9"},{"location":"search-engine/OpenSearch/Hybrid%20Search/Hybrid%20Search/#_2","title":"\uc0ac\uc804 \uc900\ube44","text":"<p>\ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9\uc744 \uc0ac\uc6a9\ud558\ub824\uba74 \uba3c\uc800 \ud14d\uc2a4\ud2b8 \uc784\ubca0\ub529 \ubaa8\ub378(text embedding model)\uc774 \uc124\uc815\ub418\uc5b4 \uc788\uc5b4\uc57c \ud55c\ub2e4. \uc774\ubbf8 \ubca1\ud130 \uc784\ubca0\ub529\uc774 \uc0dd\uc131\ub41c \uc0c1\ud0dc\ub77c\uba74 \ubc14\ub85c \uac80\uc0c9 \ud30c\uc774\ud504\ub77c\uc778 \uad6c\ucd95\uc73c\ub85c \ub118\uc5b4\uac08 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/Hybrid%20Search/#_3","title":"\uad6c\uc131 \ubc29\ubc95","text":"<p>\ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9 \uc124\uc815\uc740 \ub450 \uac00\uc9c0 \ubc29\uc2dd\uc73c\ub85c \uad6c\uc131\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/Hybrid%20Search/#1","title":"1. \uc790\ub3d9\ud654 \uc6cc\ud06c\ud50c\ub85c\uc6b0 (\ucd94\ucc9c)","text":"<p>OpenSearch\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 <code>hybrid_search</code> \ud15c\ud50c\ub9bf\uc744 \ud65c\uc6a9\ud558\uc5ec \ub2e4\uc74c\uc744 \uc790\ub3d9 \uc0dd\uc131\ud560 \uc218 \uc788\ub2e4.</p> <ul> <li> <p>Ingest pipeline (\ud14d\uc2a4\ud2b8 \uc784\ubca0\ub529 \ucc98\ub9ac)</p> </li> <li> <p>Vector index</p> </li> <li> <p>Search pipeline</p> </li> </ul> <pre><code>POST /_plugins/_flow_framework/workflow?use_case=hybrid_search&amp;provision=true\n{\n  \"create_ingest_pipeline.model_id\": \"\ubaa8\ub378_ID\"\n}\n</code></pre> <p>\uc131\uacf5 \uc2dc \ubc18\ud658\ub418\ub294 workflow_id \ub85c \uc0dd\uc131 \uc0c1\ud0dc\ub97c \ud655\uc778 \ud560 \uc218 \uc788\ub2e4.</p> <pre><code>GET /_plugins/_flow_framework/workflow/&lt;workflow_id&gt;/_status\n</code></pre>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/Hybrid%20Search/#2","title":"2. \uc218\ub3d9 \uad6c\uc131 (\ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5 \uac00\ub2a5)","text":""},{"location":"search-engine/OpenSearch/Hybrid%20Search/Hybrid%20Search/#step-1-ingest-pipeline","title":"Step 1. Ingest Pipeline \uc0dd\uc131","text":"<pre><code>PUT /_ingest/pipeline/nlp-ingest-pipeline\n{\n  \"description\": \"\ud14d\uc2a4\ud2b8 \uc784\ubca0\ub529 \ud30c\uc774\ud504\ub77c\uc778\",\n  \"processors\": [\n    {\n      \"text_embedding\": {\n        \"model_id\": \"\ubaa8\ub378_ID\",\n        \"field_map\": {\n          \"passage_text\": \"passage_embedding\"\n        }\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/Hybrid%20Search/#step-2-vector-index","title":"Step 2. Vector Index \uc0dd\uc131","text":"<pre><code>PUT /my-nlp-index\n{\n  \"settings\": {\n    \"index.knn\": true,\n    \"default_pipeline\": \"nlp-ingest-pipeline\"\n  },\n  \"mappings\": {\n    \"properties\": {\n      \"id\": { \"type\": \"text\" },\n      \"passage_text\": { \"type\": \"text\" },\n      \"passage_embedding\": {\n        \"type\": \"knn_vector\",\n        \"dimension\": 768,\n        \"method\": {\n          \"engine\": \"lucene\",\n          \"space_type\": \"l2\",\n          \"name\": \"hnsw\",\n          \"parameters\": {}\n        }\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/Hybrid%20Search/#step-3-search-pipeline","title":"Step 3. Search Pipeline \uc124\uc815","text":"<pre><code>PUT /_search/pipeline/nlp-search-pipeline\n{\n  \"description\": \"Hybrid Search\uc6a9 \ud3ec\uc2a4\ud2b8 \ud504\ub85c\uc138\uc11c\",\n  \"phase_results_processors\": [\n    {\n      \"normalization-processor\": {\n        \"normalization\": {\n          \"technique\": \"min_max\"\n        },\n        \"combination\": {\n          \"technique\": \"arithmetic_mean\",\n          \"parameters\": {\n            \"weights\": [0.3, 0.7]\n          }\n        }\n      }\n    }\n  ]\n}\n</code></pre> `"},{"location":"search-engine/OpenSearch/Hybrid%20Search/Hybrid%20Search/#step-4","title":"Step 4. \ubb38\uc11c \uc0c9\uc778","text":"<pre><code>PUT /my-nlp-index/_doc/1\n{\n  \"passage_text\": \"Hello world\",\n  \"id\": \"s1\"\n}\n\nPUT /my-nlp-index/_doc/2\n{\n  \"passage_text\": \"Hi planet\",\n  \"id\": \"s2\"\n}\n</code></pre> <p>\uc0c9\uc778 \uc2dc ingest pipeline\uc774 \uc2e4\ud589\ub418\uc5b4 <code>passage_embedding</code> \ud544\ub4dc\uc5d0 \ubca1\ud130\uac00 \uc0dd\uc131\ub41c\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/Hybrid%20Search/#step-5-hybrid-search","title":"Step 5. Hybrid Search \uc2e4\ud589","text":"<pre><code>GET /my-nlp-index/_search?search_pipeline=nlp-search-pipeline\n{\n  \"_source\": {\n    \"exclude\": [\"passage_embedding\"]\n  },\n  \"query\": {\n    \"hybrid\": {\n      \"queries\": [\n        {\n          \"match\": {\n            \"passage_text\": {\n              \"query\": \"Hi world\"\n            }\n          }\n        },\n        {\n          \"neural\": {\n            \"passage_embedding\": {\n              \"query_text\": \"Hi world\",\n              \"model_id\": \"\ubaa8\ub378_ID\",\n              \"k\": 5\n            }\n          }\n        }\n      ]\n    }\n  }\n}\n</code></pre> <p>\ub2e4\uc74c\uc740 match \ucffc\ub9ac\uc640 neural \ucffc\ub9ac\ub97c \uacb0\ud569\ud55c \uc608\uc2dc\uc774\ub2e4. </p><pre><code>GET /my-nlp-index/_search?search_pipeline=nlp-search-pipeline\n{\n  \"_source\": {\n    \"exclude\": [\"passage_embedding\"]\n  },\n  \"query\": {\n    \"hybrid\": {\n      \"queries\": [\n        {\n          \"match\": {\n            \"passage_text\": {\n              \"query\": \"Hi world\"\n            }\n          }\n        },\n        {\n          \"neural\": {\n            \"passage_embedding\": {\n              \"query_text\": \"Hi world\",\n              \"model_id\": \"\ubaa8\ub378_ID\",\n              \"k\": 5\n            }\n          }\n        }\n      ]\n    }\n  }\n}\n</code></pre><p></p> <p>\uacb0\uacfc\uc5d0\ub294 \ud0a4\uc6cc\ub4dc \uae30\ubc18\uacfc \uc758\ubbf8 \uae30\ubc18 \ucffc\ub9ac \ubaa8\ub450\ub97c \uace0\ub824\ud55c \ubb38\uc11c\uac00 \ubc18\ud658\ub41c\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/Hybrid%20Search/#_4","title":"\ud655\uc7a5 \uc608\uc2dc","text":""},{"location":"search-engine/OpenSearch/Hybrid%20Search/Hybrid%20Search/#match-term","title":"Match + Term \ucffc\ub9ac \uacb0\ud569","text":"<pre><code>\"query\": {\n  \"hybrid\": {\n    \"queries\": [\n      { \"match\": { \"passage_text\": \"hello\" } },\n      { \"term\": { \"passage_text\": { \"value\": \"planet\" } } }\n    ]\n  }\n}\n</code></pre> <p>\uc774 \ubc29\uc2dd\uc73c\ub85c \ub2e4\uc591\ud55c \ucffc\ub9ac \uc720\ud615\uc744 \uc870\ud569\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/Hybrid%20Search/#_5","title":"\ub9c8\ubb34\ub9ac","text":"<p>OpenSearch\uc758 \ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9 \uae30\ub2a5\uc740 \uc815\ubcf4 \uac80\uc0c9 \uc2dc\uc2a4\ud15c\uc5d0\uc11c \uc815\ud655\ub3c4 \ud5a5\uc0c1\uacfc \ub2e4\uc591\ud55c \uc0ac\uc6a9\uc790 \uc9c8\uc758 \ub300\uc751\uc744 \uac00\ub2a5\ud558\uac8c \ud558\ub294 \uac15\ub825\ud55c \ub3c4\uad6c\uc785\ub2c8\ub2e4. \ud0a4\uc6cc\ub4dc \uac80\uc0c9\ub9cc\uc73c\ub85c\ub294 \ucc3e\uae30 \uc5b4\ub824\uc6b4 \ubb38\uc11c\ub3c4 \uc2dc\ub9e8\ud2f1 \uac80\uc0c9\uacfc \uacb0\ud569\ud558\uc5ec \ub354 \uc815\ubc00\ud558\uac8c \ucc3e\uc544\ub0bc \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/","title":"OpenAI API \uc784\ubca0\ub529 \ubaa8\ub378 \ub4f1\ub85d \ubc0f \uc0ac\uc6a9 \uac00\uc774\ub4dc","text":"<p>\uc774 \uac00\uc774\ub4dc\ub294 OpenSearch\uc5d0\uc11c OpenAI API\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc784\ubca0\ub529 \ubaa8\ub378\uc744 \ub4f1\ub85d\ud558\uace0 \uc790\ub3d9 \uc784\ubca0\ub529 \uc0dd\uc131\uc744 \uc124\uc815\ud558\ub294 \uac80\uc99d\ub41c \ubc29\ubc95\uc744 \uc124\uba85\ud569\ub2c8\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_1","title":"\uc0ac\uc804 \uc900\ube44\uc0ac\ud56d","text":""},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#1-opensearch","title":"1. OpenSearch \ud074\ub7ec\uc2a4\ud130 \uc124\uc815","text":"<pre><code>PUT _cluster/settings\n{\n  \"persistent\": {\n    \"plugins.ml_commons.only_run_on_ml_node\": \"false\",\n    \"plugins.ml_commons.model_access_control_enabled\": \"true\",\n    \"plugins.ml_commons.native_memory_threshold\": \"99\"\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#2-openai-api","title":"2. OpenAI API \ud0a4 \uc900\ube44","text":"<ul> <li>OpenAI API \ud0a4\ub97c \ubc1c\uae09\ubc1b\uc544 \uc900\ube44\ud569\ub2c8\ub2e4</li> <li>\uc0ac\uc6a9\ud560 \uc784\ubca0\ub529 \ubaa8\ub378\uc744 \uacb0\uc815\ud569\ub2c8\ub2e4 (\uc608: text-embedding-3-small, text-embedding-3-large)</li> </ul>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_2","title":"\ub2e8\uacc4\ubcc4 \uc124\uc815 (\uac80\uc99d\ub41c \ubc29\ubc95)","text":""},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#step-1-openai","title":"Step 1: OpenAI \ucee4\ub125\ud130 \uc0dd\uc131","text":"<p>\uba3c\uc800 OpenAI API\uc640\uc758 \uc5f0\uacb0\uc744 \uc704\ud55c \ucee4\ub125\ud130\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4. \uc911\uc694: <code>pre_process_function</code>\uacfc <code>post_process_function</code>\uc744 \ubc18\ub4dc\uc2dc \ud3ec\ud568\ud574\uc57c \ud569\ub2c8\ub2e4.</p> <pre><code>POST /_plugins/_ml/connectors/_create\n{\n  \"name\": \"OpenAI Embedding Connector Fixed\",\n  \"description\": \"Fixed OpenAI API connector\",\n  \"version\": \"1.0.0\",\n  \"protocol\": \"http\",\n  \"parameters\": {\n    \"endpoint\": \"api.openai.com\",\n    \"model\": \"text-embedding-3-small\"\n  },\n  \"credential\": {\n    \"openAI_key\": \"\"\n  },\n  \"actions\": [\n    {\n      \"action_type\": \"predict\",\n      \"method\": \"POST\",\n      \"url\": \"https://api.openai.com/v1/embeddings\",\n      \"headers\": {\n        \"Authorization\": \"Bearer ${credential.openAI_key}\",\n        \"Content-Type\": \"application/json\"\n      },\n      \"request_body\": \"{ \\\"model\\\": \\\"${parameters.model}\\\", \\\"input\\\": ${parameters.input} }\",\n      \"pre_process_function\": \"connector.pre_process.openai.embedding\",\n      \"post_process_function\": \"connector.post_process.openai.embedding\"\n    }\n  ]\n}\n</code></pre> <p>\uc751\ub2f5 \uc608\uc2dc:</p> <pre><code>{\n  \"connector_id\": \"tc3IoJcBZGLRABg1c7Qo\"\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#step-2","title":"Step 2: \ubaa8\ub378 \ub4f1\ub85d \ubc0f \ubc30\ud3ec","text":"<p>\uc704\uc5d0\uc11c \uc0dd\uc131\ub41c \ucee4\ub125\ud130 ID\ub97c \uc0ac\uc6a9\ud558\uc5ec \ubaa8\ub378\uc744 \ub4f1\ub85d\ud569\ub2c8\ub2e4:</p> <pre><code>POST /_plugins/_ml/models/_register?deploy=true\n{\n  \"name\": \"openai-embedding-fixed\",\n  \"function_name\": \"remote\",\n  \"connector_id\": \"tc3IoJcBZGLRABg1c7Qo\",\n  \"description\": \"Fixed OpenAI embedding model\"\n}\n</code></pre> <p>\uc751\ub2f5 \uc608\uc2dc:</p> <pre><code>{\n  \"task_id\": \"uc3IoJcBZGLRABg13rT2\",\n  \"status\": \"CREATED\",\n  \"model_id\": \"us3IoJcBZGLRABg137RI\"\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#step-3","title":"Step 3: \ubaa8\ub378 \ud14c\uc2a4\ud2b8","text":"<p>\ubaa8\ub378\uc774 \uc815\uc0c1\uc801\uc73c\ub85c \uc791\ub3d9\ud558\ub294\uc9c0 \ud14c\uc2a4\ud2b8\ud569\ub2c8\ub2e4:</p> <pre><code>POST /_plugins/_ml/models/us3IoJcBZGLRABg137RI/_predict\n{\n  \"parameters\": {\n    \"input\": [\"\ud14c\uc2a4\ud2b8 \ud14d\uc2a4\ud2b8\"]\n  }\n}\n</code></pre> <p>\uc131\uacf5 \uc2dc 1536\ucc28\uc6d0\uc758 \uc784\ubca0\ub529 \ubca1\ud130\uac00 \ubc18\ud658\ub429\ub2c8\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#step-4","title":"Step 4: \uc778\uc81c\uc2a4\ud2b8 \ud30c\uc774\ud504\ub77c\uc778 \uc0dd\uc131","text":"<p>\uc704\uc5d0\uc11c \uc0dd\uc131\ub41c \ubaa8\ub378 ID\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc778\uc81c\uc2a4\ud2b8 \ud30c\uc774\ud504\ub77c\uc778\uc744 \uc0dd\uc131\ud569\ub2c8\ub2e4:</p> <pre><code>PUT /_ingest/pipeline/openai-nlp\n{\n  \"description\": \"OpenAI NLP\",\n  \"processors\": [\n    {\n      \"text_embedding\": {\n        \"model_id\": \"us3IoJcBZGLRABg137RI\",\n        \"field_map\": {\n          \"text\": \"passage_embedding\"\n        },\n        \"description\": \"Generate embeddings for text field\"\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#step-5","title":"Step 5: \ubca1\ud130 \uc778\ub371\uc2a4 \uc0dd\uc131","text":"<p>\uc911\uc694: OpenSearch\uc5d0\uc11c\ub294 <code>space_type</code>\uc744 <code>cosinesimil</code>\ub85c \uc124\uc815\ud574\uc57c \ud569\ub2c8\ub2e4 (<code>cosine</code>\uc774 \uc544\ub2d8):</p> <pre><code>PUT /my-openai-nlp-index\n{\n  \"settings\": {\n    \"index.knn\": true,\n    \"default_pipeline\": \"openai-nlp\"\n  },\n  \"mappings\": {\n    \"properties\": {\n      \"passage_embedding\": {\n        \"type\": \"knn_vector\",\n        \"dimension\": 1536,\n        \"space_type\": \"cosinesimil\"\n      },\n      \"text\": {\n        \"type\": \"text\"\n      },\n      \"title\": {\n        \"type\": \"text\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#step-6","title":"Step 6: \ubb38\uc11c \uc778\ub371\uc2f1 \ubc0f \ud14c\uc2a4\ud2b8","text":"<p>\uc774\uc81c \ubb38\uc11c\ub97c \uc778\ub371\uc2f1\ud558\uba74 \uc790\ub3d9\uc73c\ub85c \uc784\ubca0\ub529\uc774 \uc0dd\uc131\ub429\ub2c8\ub2e4:</p> <pre><code>PUT /my-openai-nlp-index/_doc/1\n{\n  \"title\": \"\ud14c\uc2a4\ud2b8\",\n  \"text\": \"\uac04\ub2e8\ud55c \ud14c\uc2a4\ud2b8 \ubb38\uc11c\uc785\ub2c8\ub2e4.\"\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#step-7","title":"Step 7: \ud30c\uc774\ud504\ub77c\uc778 \ud14c\uc2a4\ud2b8 (\uc120\ud0dd\uc0ac\ud56d)","text":"<p>\ud30c\uc774\ud504\ub77c\uc778\uc774 \uc815\uc0c1 \uc791\ub3d9\ud558\ub294\uc9c0 \uc2dc\ubbac\ub808\uc774\uc158\uc73c\ub85c \ud655\uc778</p> <pre><code>POST /_ingest/pipeline/openai-nlp/_simulate\n{\n  \"docs\": [\n    {\n      \"_source\": {\n        \"text\": \"\uac04\ub2e8\ud55c \ud14c\uc2a4\ud2b8 \ubb38\uc11c\uc785\ub2c8\ub2e4.\"\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#step-8","title":"Step 8: \uc2dc\ub9e8\ud2f1 \uac80\uc0c9 \uc218\ud589","text":"<pre><code>GET /my-openai-nlp-index/_search\n{\n  \"_source\": {\n    \"excludes\": [\"passage_embedding\"]\n  },\n  \"query\": {\n    \"neural\": {\n      \"passage_embedding\": {\n        \"query_text\": \"AI \uae30\uc220\uc758 \ucd5c\uc2e0 \ub3d9\ud5a5\",\n        \"model_id\": \"us3IoJcBZGLRABg137RI\",\n        \"k\": 5\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_3","title":"\ud575\uc2ec \ubb38\uc81c \ud574\uacb0 \uc0ac\ud56d","text":""},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#1","title":"1. \ucee4\ub125\ud130 \uc124\uc815 \uc2dc \ud544\uc218 \uc694\uc18c","text":"<ul> <li><code>pre_process_function</code>: <code>connector.pre_process.openai.embedding</code></li> <li><code>post_process_function</code>: <code>connector.post_process.openai.embedding</code></li> <li>\uc774 \ud568\uc218\ub4e4\uc774 \uc5c6\uc73c\uba74 \uc751\ub2f5 \ucc98\ub9ac \uc624\ub958\uac00 \ubc1c\uc0dd\ud569\ub2c8\ub2e4.</li> </ul>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#2-opensearch","title":"2. OpenSearch \uac70\ub9ac \uba54\ud2b8\ub9ad","text":"<ul> <li><code>cosine</code> \u274c (\uc624\ub958 \ubc1c\uc0dd)</li> <li><code>cosinesimil</code> \u2705 (\uc62c\ubc14\ub978 \uc124\uc815)</li> </ul>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#3","title":"3. \ubaa8\ub378 \ucc28\uc6d0 \uc124\uc815","text":"<ul> <li>text-embedding-3-small: 1536\ucc28\uc6d0</li> <li>text-embedding-3-large: 3072\ucc28\uc6d0</li> <li>text-embedding-ada-002: 1536\ucc28\uc6d0</li> </ul>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_4","title":"\uc2e4\uc81c \uc0ac\uc6a9 \uc608\uc81c","text":""},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_5","title":"\ub2e4\uc911 \ubb38\uc11c \uc778\ub371\uc2f1","text":"<pre><code>PUT /my-openai-nlp-index/_doc/1\n{\n  \"title\": \"\uc778\uacf5\uc9c0\ub2a5 \uae30\uc220 \ub3d9\ud5a5\",\n  \"text\": \"2024\ub144 \uc778\uacf5\uc9c0\ub2a5 \uae30\uc220\uc740 \ub300\uaddc\ubaa8 \uc5b8\uc5b4 \ubaa8\ub378\uc744 \uc911\uc2ec\uc73c\ub85c \ube60\ub974\uac8c \ubc1c\uc804\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.\"\n}\n\nPUT /my-openai-nlp-index/_doc/2\n{\n  \"title\": \"\uba38\uc2e0\ub7ec\ub2dd \uc751\uc6a9 \ubd84\uc57c\", \n  \"text\": \"\uba38\uc2e0\ub7ec\ub2dd\uc740 \uc790\uc5f0\uc5b4 \ucc98\ub9ac, \ucef4\ud4e8\ud130 \ube44\uc804, \ucd94\ucc9c \uc2dc\uc2a4\ud15c \ub4f1 \ub2e4\uc591\ud55c \ubd84\uc57c\uc5d0\uc11c \ud65c\uc6a9\ub418\uace0 \uc788\uc2b5\ub2c8\ub2e4.\"\n}\n\nPUT /my-openai-nlp-index/_doc/3\n{\n  \"title\": \"\uac80\uc0c9 \uae30\uc220\uc758 \uc9c4\ud654\",\n  \"text\": \"\uc2dc\ub9e8\ud2f1 \uac80\uc0c9 \uae30\uc220\uc758 \ubc1c\uc804\uc73c\ub85c \uc0ac\uc6a9\uc790\uc758 \uc758\ub3c4\ub97c \ub354 \uc815\ud655\ud558\uac8c \ud30c\uc545\ud560 \uc218 \uc788\uac8c \ub418\uc5c8\uc2b5\ub2c8\ub2e4.\"\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_6","title":"\uace0\uae09 \uc124\uc815 \uc635\uc158","text":""},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_bulk-api","title":"\ubc30\uce58 \ucc98\ub9ac (<code>_bulk</code> API \uc0ac\uc6a9)","text":"<pre><code>POST /my-openai-nlp-index/_bulk?pipeline=openai-nlp\n{\"index\":{\"_id\":\"4\"}}\n{\"title\":\"AI \uc5f0\uad6c\",\"text\":\"\ucd5c\uc2e0 AI \uc5f0\uad6c \ub3d9\ud5a5\uc5d0 \ub300\ud55c \ubd84\uc11d\uc785\ub2c8\ub2e4.\"}\n{\"index\":{\"_id\":\"5\"}}\n{\"title\":\"\uae30\uc220 \ud601\uc2e0\",\"text\":\"\uae30\uc220 \ud601\uc2e0\uc774 \uc0b0\uc5c5\uc5d0 \ubbf8\uce58\ub294 \uc601\ud5a5\uc744 \uc0b4\ud3b4\ubd05\ub2c8\ub2e4.\"}\n</code></pre>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_7","title":"\ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9 (\ud0a4\uc6cc\ub4dc + \uc2dc\ub9e8\ud2f1)","text":"<pre><code>GET /my-openai-nlp-index/_search\n{\n  \"_source\": {\n    \"excludes\": [\"passage_embedding\"]\n  },\n  \"query\": {\n    \"hybrid\": {\n      \"queries\": [\n        {\n          \"match\": {\n            \"text\": \"AI \uae30\uc220\"\n          }\n        },\n        {\n          \"neural\": {\n            \"passage_embedding\": {\n              \"query_text\": \"AI \uae30\uc220\uc758 \ucd5c\uc2e0 \ub3d9\ud5a5\",\n              \"model_id\": \"us3IoJcBZGLRABg137RI\",\n              \"k\": 5\n            }\n          }\n        }\n      ]\n    }\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_8","title":"\ubaa8\ub2c8\ud130\ub9c1 \ubc0f \ub514\ubc84\uae45","text":""},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_9","title":"\ubaa8\ub378 \uc0c1\ud0dc \ud655\uc778","text":"<pre><code>GET /_plugins/_ml/models/us3IoJcBZGLRABg137RI\nGET /_plugins/_ml/models/us3IoJcBZGLRABg137RI/_stats\n</code></pre>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_10","title":"\ucee4\ub125\ud130 \uc0c1\ud0dc \ud655\uc778","text":"<pre><code>GET /_plugins/_ml/connectors/tc3IoJcBZGLRABg1c7Qo\n</code></pre>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_11","title":"\ud30c\uc774\ud504\ub77c\uc778 \ud14c\uc2a4\ud2b8","text":"<pre><code>POST /_ingest/pipeline/openai-nlp/_simulate\n{\n  \"docs\": [\n    {\n      \"_source\": {\n        \"text\": \"\ud14c\uc2a4\ud2b8\ud560 \ud14d\uc2a4\ud2b8\"\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_12","title":"\uc131\ub2a5 \ucd5c\uc801\ud654 \ubc0f \ube44\uc6a9 \uad00\ub9ac","text":""},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#openai","title":"OpenAI \ubaa8\ub378\ubcc4 \ube44\uad50","text":"\ubaa8\ub378\uba85 \ucc28\uc6d0 \ucd5c\ub300 \ud1a0\ud070 \uc131\ub2a5 \ube44\uc6a9 \uad8c\uc7a5 \uc6a9\ub3c4 text-embedding-3-small 1536 8191 \ub192\uc74c \ub0ae\uc74c \uc77c\ubc18\uc801\uc778 \uc6a9\ub3c4 text-embedding-3-large 3072 8191 \ucd5c\uace0 \ub192\uc74c \uace0\ud488\uc9c8 \uac80\uc0c9 text-embedding-ada-002 1536 8191 \uc911\uac04 \uc911\uac04 \uae30\ubcf8 \uc784\ubca0\ub529"},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_13","title":"\ube44\uc6a9 \ucd5c\uc801\ud654 \ud301","text":"<ol> <li>\ubc30\uce58 \ucc98\ub9ac: \uc5ec\ub7ec \ubb38\uc11c\ub97c \ud55c \ubc88\uc5d0 \ucc98\ub9ac\ud558\uc5ec API \ud638\ucd9c \ud69f\uc218 \ucd5c\uc18c\ud654</li> <li>\uce90\uc2f1: \uc790\uc8fc \uc0ac\uc6a9\ub418\ub294 \uc784\ubca0\ub529 \uacb0\uacfc \uce90\uc2dc</li> <li>\ubaa8\ub378 \uc120\ud0dd: \uc6a9\ub3c4\uc5d0 \ub9de\ub294 \uc801\uc808\ud55c \ubaa8\ub378 \uc120\ud0dd</li> <li>\ud14d\uc2a4\ud2b8 \uae38\uc774 \ucd5c\uc801\ud654: \ubd88\ud544\uc694\ud55c \ud14d\uc2a4\ud2b8 \uc81c\uac70\ub85c \ud1a0\ud070 \uc0ac\uc6a9\ub7c9 \uc808\uc57d</li> </ol>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_14","title":"\ubcf4\uc548 \ubc0f \uc6b4\uc601 \uace0\ub824\uc0ac\ud56d","text":""},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#api","title":"API \ud0a4 \ubcf4\uc548","text":"<ul> <li>\ud658\uacbd \ubcc0\uc218 \ub610\ub294 \ubcf4\uc548 \uc800\uc7a5\uc18c \uc0ac\uc6a9</li> <li>\uc815\uae30\uc801\uc778 API \ud0a4 \uad50\uccb4</li> <li>\ucd5c\uc18c \uad8c\ud55c \uc6d0\uce59 \uc801\uc6a9</li> </ul>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_15","title":"\ubaa8\ub2c8\ud130\ub9c1 \uc9c0\ud45c","text":"<ul> <li>API \ud638\ucd9c \uc131\uacf5\ub960</li> <li>\uc751\ub2f5 \uc2dc\uac04</li> <li>\ube44\uc6a9 \ucd94\uc801</li> <li>\uc624\ub958\uc728 \ubaa8\ub2c8\ud130\ub9c1</li> </ul>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_16","title":"\ubb38\uc81c \ud574\uacb0 \uac00\uc774\ub4dc","text":""},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_17","title":"\uc77c\ubc18\uc801\uc778 \uc624\ub958\uc640 \ud574\uacb0\ubc29\ubc95","text":"<ol> <li> <p>\"Unable to find space: cosine\" \uc624\ub958</p> <ul> <li>\ud574\uacb0: <code>space_type</code>\uc744 <code>cosinesimil</code>\ub85c \ubcc0\uacbd</li> <li> <p>\"failed while calling model\" \uc624\ub958</p> </li> <li> <p>\ud574\uacb0: \ucee4\ub125\ud130\uc5d0 <code>pre_process_function</code>\uacfc <code>post_process_function</code> \ucd94\uac00</p> </li> <li> <p>API \ud0a4 \uc778\uc99d \uc624\ub958</p> </li> <li> <p>\ud574\uacb0: OpenAI API \ud0a4 \uc720\ud6a8\uc131 \ubc0f \uc794\uc561 \ud655\uc778</p> </li> <li> <p>\ucc28\uc6d0 \ubd88\uc77c\uce58 \uc624\ub958</p> </li> <li> <p>\ud574\uacb0: \uc778\ub371\uc2a4 \ub9e4\ud551\uc758 <code>dimension</code> \uac12\uc744 \ubaa8\ub378 \ucc28\uc6d0\uacfc \uc77c\uce58\uc2dc\ud0a4\uae30</p> </li> </ul> </li> </ol>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_18","title":"\ub85c\uadf8 \ud655\uc778 \ubc29\ubc95","text":"<pre><code># OpenSearch \ub85c\uadf8 \ubaa8\ub2c8\ud130\ub9c1\ntail -f /var/log/opensearch/opensearch.log | grep -i \"embedding\\|neural\\|ml\"\n</code></pre>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_19","title":"\uacb0\ub860","text":"<p>\uc774 \uac00\uc774\ub4dc\ub97c \ud1b5\ud574 OpenSearch\uc5d0\uc11c OpenAI API\ub97c \uc0ac\uc6a9\ud55c \uace0\ud488\uc9c8 \uc2dc\ub9e8\ud2f1 \uac80\uc0c9 \uc2dc\uc2a4\ud15c\uc744 \uc131\uacf5\uc801\uc73c\ub85c \uad6c\ucd95\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ud575\uc2ec\uc740 \uc62c\ubc14\ub978 \ucee4\ub125\ud130 \uc124\uc815(\uc804\ucc98\ub9ac/\ud6c4\ucc98\ub9ac \ud568\uc218 \ud3ec\ud568)\uacfc \uc801\uc808\ud55c \uac70\ub9ac \uba54\ud2b8\ub9ad(<code>cosinesimil</code>) \uc0ac\uc6a9\uc785\ub2c8\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_20","title":"\uac80\uc99d\ub41c \uc131\uacf5 \uc694\uc18c","text":"<p>\ucee4\ub125\ud130: <code>pre_process_function</code>\uacfc <code>post_process_function</code> \ud544\uc218 \uac70\ub9ac \uba54\ud2b8\ub9ad: <code>cosinesimil</code> \uc0ac\uc6a9 (<code>cosine</code> \uc544\ub2d8) \ucc28\uc6d0 \uc124\uc815: text-embedding-3-small = 1536\ucc28\uc6d0 \ubaa8\ub378 \ud14c\uc2a4\ud2b8: \ud30c\uc774\ud504\ub77c\uc778 \uc801\uc6a9 \uc804 \uac1c\ubcc4 \ubaa8\ub378 \ud638\ucd9c \ud14c\uc2a4\ud2b8</p> <p>\uc774\uc81c OpenAI\uc758 \uac15\ub825\ud55c \uc784\ubca0\ub529 \uae30\uc220\uc744 \ud65c\uc6a9\ud55c \uace0\ud488\uc9c8 \uac80\uc0c9 \uc2dc\uc2a4\ud15c\uc744 \uc6b4\uc601\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4!</p>"},{"location":"search-engine/OpenSearch/Learning%20to%20Rank/What%20is%20LTR/","title":"What is LTR","text":"<p>\ub2e4\uc74c\uc740 OpenSearch\uc758 Learning to Rank (LTR)\uc758 \ud575\uc2ec \uac1c\ub150\uc744 \uc124\uba85\ud558\ub294 \u201cML Ranking Core Concepts\u201d \ub0b4\uc6a9\uc744 \uc815\ub9ac\ud55c \uac83\uc774\ub2e4.</p> <p>\uc774 \uac00\uc774\ub4dc\ub294 OpenSearch\uc5d0\uc11c \uba38\uc2e0\ub7ec\ub2dd\uc744 \uc774\uc6a9\ud574 \uac80\uc0c9 \uacb0\uacfc\uc758 \uad00\ub828\ub3c4\ub97c \ud5a5\uc0c1\uc2dc\ud0a4\uace0\uc790 \ud558\ub294 \uac1c\ubc1c\uc790 \ubc0f \ub370\uc774\ud130 \uacfc\ud559\uc790\ub97c \uc704\ud55c \uae30\ucd08 \uac1c\ub150\uc744 \ub2f4\uace0 \uc788\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Learning%20to%20Rank/What%20is%20LTR/#1-ltr","title":"1. LTR\uc774\ub780?","text":"<p>Learning to Rank\ub294 \uac80\uc0c9 \uacb0\uacfc\ub97c \uc0ac\uc6a9\uc790 \uad00\uc810\uc5d0\uc11c \ub354 \uc720\uc758\ubbf8\ud55c \uc21c\uc11c\ub85c \uc815\ub82c\ud558\uae30 \uc704\ud574 \uba38\uc2e0\ub7ec\ub2dd\uc744 \ud65c\uc6a9\ud558\ub294 \uae30\ubc95\uc785\ub2c8\ub2e4.  </p> <p>\ub2e4\ub978 \uba38\uc2e0\ub7ec\ub2dd \ubb38\uc81c\uc640\uc758 \ucc28\uc774\uc810\uc740 \ub2e4\uc74c\uacfc \uac19\ub2e4.</p> <ul> <li> <p>\ud68c\uadc0(Regression): \uc218\uce58 \uc608\uce21 (\uc608: \uc8fc\uac00 \uc608\uce21)</p> </li> <li> <p>\ubd84\ub958(Classification): \ubc94\uc8fc \uc608\uce21 (\uc608: \uc2a4\ud338 \uc5ec\ubd80)</p> </li> <li> <p>\ub7ad\ud0b9(LTR): \ud2b9\uc815 \ucffc\ub9ac\uc5d0 \ub300\ud574 \ubb38\uc11c\ub97c \uc5b4\ub5a4 \uc21c\uc11c\ub85c \uc815\ub82c\ud574\uc57c \uac00\uc7a5 \uc720\uc6a9\ud55c\uac00\ub97c \ud559\uc2b5</p> </li> </ul> <p>LTR\uc758 \ubaa9\uc801\uc740 \"\ubb38\uc11c\uac00 \uc5bc\ub9c8\ub098 \uc720\uc6a9\ud55c\uac00\"\ub97c \uc9c1\uc811 \uc608\uce21\ud558\ub294 \uac83\uc774 \uc544\ub2c8\ub77c,  \uc0c1\ub300\uc801 \uc21c\uc11c\ub97c \uc608\uce21\ud558\ub294 \ud568\uc218 f(query, document features)\ub97c \ud559\uc2b5\ud558\ub294 \uac83\uc785\ub2c8\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Learning%20to%20Rank/What%20is%20LTR/#2-judgment-list","title":"2. \uc815\ub2f5 \uc21c\uc11c \uc815\uc758: Judgment List (\uace8\ub4e0 \uc14b)","text":"<p>Judgment list\ub294 \ucffc\ub9ac\uc640 \uadf8\uc5d0 \ub300\ud55c \ubb38\uc11c \ubaa9\ub85d \ubc0f \ub4f1\uae09(grade)\uc744 \ud3ec\ud568\ud55c \ub370\uc774\ud130\ub85c, \"\uc774 \ucffc\ub9ac\uc5d0\ub294 \uc774 \ubb38\uc11c\ub4e4\uc774 \uc774\ub7f0 \uc21c\uc11c\ub85c \ub098\uc624\ub294 \uac83\uc774 \uc774\uc0c1\uc801\uc774\ub2e4\"\ub77c\ub294 \uae30\uc900\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4.</p> <p>\uc608\uc2dc (\ucffc\ub9ac: Rambo):</p> <pre><code>grade,keywords,movie\n4,Rambo,First Blood       \u2192 \ub9e4\uc6b0 \uad00\ub828 \uc788\uc74c\n4,Rambo,Rambo\n3,Rambo,Rambo III         \u2192 \uc5b4\ub290 \uc815\ub3c4 \uad00\ub828 \uc788\uc74c\n2,Rambo,Rocky             \u2192 \uc57d\uac04 \uad00\ub828 \uc788\uc74c\n0,Rambo,Bambi             \u2192 \uc804\ud600 \ubb34\uad00\n</code></pre> <p>\uc774 \ub9ac\uc2a4\ud2b8\ub97c \uae30\uc900\uc73c\ub85c \ubaa8\ub378\uc758 \uc815\ub82c \ud488\uc9c8\uc744 NDCG, ERR \uac19\uc740 \ub7ad\ud0b9 \ud3c9\uac00 \uc9c0\ud45c\ub85c \uce21\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Learning%20to%20Rank/What%20is%20LTR/#3-feature","title":"3. \ub7ad\ud0b9 \ubaa8\ub378\uc758 \uc785\ub825: Feature","text":"<p>LTR \ubaa8\ub378\uc740 \uac80\uc0c9 \ucffc\ub9ac\uc640 \ubb38\uc11c \uac04\uc758 \uad00\ub828\ub3c4\ub97c \ud310\ub2e8\ud560 \uc218 \uc788\ub294 \ud53c\ucc98(\ud2b9\uc9d5\uac12)\uc744 \uc785\ub825\uc73c\ub85c \uc0ac\uc6a9\ud55c\ub2e4. \uc608\ub97c \ub4e4\uc5b4 \uc601\ud654 \uac80\uc0c9 \uc2dc\uc2a4\ud15c\uc774\ub77c\uba74 \ub2e4\uc74c\uacfc \uac19\uc740 \ud53c\ucc98\uac00 \uc0ac\uc6a9\ub420 \uc218 \uc788\ub2e4.</p> <ul> <li> <p><code>titleScore</code>: \uc81c\ubaa9\uc5d0 \uac80\uc0c9\uc5b4\uac00 \uc5bc\ub9c8\ub098 \uc798 \ub9e4\uce6d\ub418\ub294\uc9c0</p> </li> <li> <p><code>descScore</code>: \uc124\uba85\uc5d0 \uc5bc\ub9c8\ub098 \ub9e4\uce6d\ub418\ub294\uc9c0</p> </li> <li> <p><code>popularity</code>: \uc601\ud654\uc758 \uc778\uae30\ub3c4</p> </li> <li> <p><code>rating</code>: \uc0ac\uc6a9\uc790 \ud3c9\uc810</p> </li> <li> <p><code>numKeywords</code>: \uac80\uc0c9\uc5b4 \uac1c\uc218</p> </li> <li> <p>(\uc608: <code>isSequel</code>: \uc18d\ud3b8 \uc5ec\ubd80 \ub4f1 \uc0c8\ub85c \uc815\uc758\ud55c \ud2b9\uc131\ub3c4 \uac00\ub2a5)</p> </li> </ul> <p>\uc774\ub7ec\ud55c \ud53c\ucc98\ub97c \uc774\uc6a9\ud574 \ud568\uc218 f(titleScore, descScore, popularity, rating, ...) \ud615\ud0dc\ub85c \uacb0\uacfc\ub97c \uc810\uc218\ud654\ud558\uace0, \uadf8 \uc810\uc218\ub97c \uae30\ubc18\uc73c\ub85c \ubb38\uc11c\ub97c \uc815\ub82c\ud569\ub2c8\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Learning%20to%20Rank/What%20is%20LTR/#4-feature","title":"4. \ud559\uc2b5 \ub370\uc774\ud130 \uad6c\ucd95: Feature \uac12 \ub85c\uae45","text":"<p>\ud559\uc2b5\uc744 \uc704\ud574\uc11c\ub294 judgment list\uc5d0 \uac01 \ubb38\uc11c\uc758 \ud53c\ucc98 \uac12\uc774 \ucd94\uac00\ub418\uc5b4\uc57c \ud55c\ub2e4.\\</p> <p>\uc608\ub97c \ub4e4\uc5b4,</p> <pre><code>grade,keywords,movie,titleScore,descScore,popularity\n4,Rambo,First Blood,0.0,21.5,100\n4,Rambo,Rambo,42.5,21.5,95\n3,Rambo,Rambo III,53.1,40.1,50\n</code></pre> <p>\ubaa8\ub378 \ud559\uc2b5\uc744 \uc704\ud55c \ub300\ud45c\uc801\uc778 \ud3ec\ub9f7\uc740 SVMRank \ud615\uc2dd\uc774\uba70 \ub2e4\uc74c\uacfc \uac19\uc740 \uad6c\uc870\ub85c \ud45c\ud604\ub41c\ub2e4.</p> <pre><code>4  qid:1  1:0.0  2:21.5  3:100\n4  qid:1  1:42.5 2:21.5  3:95\n3  qid:1  1:53.1 2:40.1  3:50\n</code></pre> <p>\uc774 \ub370\uc774\ud130\ub294 \ub85c\uadf8 \uae30\ubc18 \uc790\ub3d9 \uc218\uc9d1 \ub610\ub294 \uc218\ub3d9 \uc8fc\uc11d \ubc29\uc2dd\uc73c\ub85c \uc218\uc9d1\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Learning%20to%20Rank/What%20is%20LTR/#5","title":"5. \ub7ad\ud0b9 \ubaa8\ub378 \ud6c8\ub828","text":"<p>LTR\uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \ub300\ud45c\uc801\uc778 \ubaa8\ub378\uc740 \ub2e4\uc74c\uacfc \uac19\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Learning%20to%20Rank/What%20is%20LTR/#_1","title":"\ud2b8\ub9ac \uae30\ubc18 \ubaa8\ub378 (\ucd94\ucc9c)","text":"<ul> <li> <p>LambdaMART, XGBoost \ub4f1</p> </li> <li> <p>\ub192\uc740 \uc815\ud655\ub3c4</p> </li> <li> <p>\ud559\uc2b5 \ubc0f \uc6b4\uc601 \ube44\uc6a9\uc740 \ud07c</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Learning%20to%20Rank/What%20is%20LTR/#svm","title":"SVM \uae30\ubc18 \ubaa8\ub378","text":"<ul> <li> <p>SVMRank</p> </li> <li> <p>\uc0c1\ub300\uc801\uc73c\ub85c \ub2e8\uc21c\ud558\uace0 \uac00\ubccd\uc9c0\ub9cc \uc815\ud655\ub3c4\ub294 \ub0ae\uc74c</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Learning%20to%20Rank/What%20is%20LTR/#_2","title":"\uc120\ud615 \ubaa8\ub378","text":"<ul> <li> <p>\uae30\ubcf8 \uc120\ud615 \ud68c\uadc0 \uae30\ubc18</p> </li> <li> <p>\ub300\ubd80\ubd84\uc758 \uc2e4\uc81c \ud658\uacbd\uc5d0\uc11c\ub294 \ubd80\uc815\ud655\ud558\ubbc0\ub85c \uad8c\uc7a5\ub418\uc9c0 \uc54a\uc74c</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Learning%20to%20Rank/What%20is%20LTR/#6","title":"6. \ubaa8\ub378 \ud488\uc9c8 \ud3c9\uac00 \ubc0f \uc77c\ubc18\ud654","text":"<p>\ubaa8\ub378\uc758 \uc131\ub2a5\uc744 \uc62c\ubc14\ub974\uac8c \ud3c9\uac00\ud558\ub824\uba74 \ub2e4\uc74c\uc744 \uace0\ub824\ud574\uc57c \ud55c\ub2e4.</p> <ul> <li> <p>\ud14c\uc2a4\ud2b8\uc6a9 Judgment List \uc720\uc9c0: \ud559\uc2b5\uc5d0 \uc0ac\uc6a9\ub418\uc9c0 \uc54a\uc740 \ub370\uc774\ud130\ub97c \ub530\ub85c \ud3c9\uac00\uc6a9\uc73c\ub85c \uc720\uc9c0</p> </li> <li> <p>Overfitting \ubc29\uc9c0: \ud6c8\ub828 \ub370\uc774\ud130\uc5d0\ub9cc \uc798 \ub9de\uace0 \uc2e4\uc81c \uc131\ub2a5\uc774 \ub5a8\uc5b4\uc9c0\ub294 \ubb38\uc81c\ub97c \ud53c\ud558\uae30 \uc704\ud574 \ud14c\uc2a4\ud2b8 NDCG \ucd94\uc801</p> </li> <li> <p>\uc2dc\uac04\uc801 \uc77c\ubc18\ud654(Temporal Generalization): \uacc4\uc808\uc131, \uc774\ubca4\ud2b8 \uae30\ubc18 \ucffc\ub9ac\uc5d0 \ub9de\ucdb0 \uc9c0\uc18d\uc801\uc778 \ud14c\uc2a4\ud2b8 \ud544\uc694</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Learning%20to%20Rank/What%20is%20LTR/#7","title":"7. \uc2e4\uc81c \uc2dc\uc2a4\ud15c\uc5d0\uc11c\uc758 \uace0\ub824\uc0ac\ud56d","text":"<ul> <li> <p>\uc815\ud655\ud55c judgment list \uc0dd\uc131 \ubc29\ubc95: \uc0ac\uc6a9\uc790 \ud53c\ub4dc\ubc31, \ud074\ub9ad \ub85c\uadf8 \ub4f1 \ud65c\uc6a9</p> </li> <li> <p>\ud488\uc9c8 \uce21\uc815 \uc9c0\ud45c \uc120\uc815: NDCG, Precision@k \ub4f1</p> </li> <li> <p>\ub370\uc774\ud130 \uc218\uc9d1 \uc778\ud504\ub77c: \uc0ac\uc6a9\uc790 \ud589\ub3d9 \ubc0f \ud53c\ucc98 \ub85c\uae45 \uad6c\uc870 \ud544\uc694</p> </li> <li> <p>\ubaa8\ub378 \uc7ac\ud559\uc2b5 \uae30\uc900: \uc131\ub2a5 \uc800\ud558 \uac10\uc9c0 \uc2dc \uc7ac\ud6c8\ub828 \uc8fc\uae30 \uc124\uc815</p> </li> <li> <p>A/B \ud14c\uc2a4\ud2b8 \uc804\ub7b5: \uae30\uc874 \uc2dc\uc2a4\ud15c\uacfc \ube44\uad50 \ud3c9\uac00 \ubc0f KPI \uc815\uc758 \ud544\uc694</p> </li> </ul>"},{"location":"search-engine/OpenSearch/ML/ml%20%EB%AA%A8%EB%8D%B8%20deploy%20%EC%8B%9C%20%EB%A9%94%EB%AA%A8%EB%A6%AC%2099%25%20%EC%B0%A8%EC%A7%80%20%EC%9B%90%EC%9D%B8/","title":"Ml \ubaa8\ub378 deploy \uc2dc \uba54\ubaa8\ub9ac 99% \ucc28\uc9c0 \uc6d0\uc778","text":"<p>Hugging Face embedding \ubaa8\ub378\uc744 OpenSearch\uc5d0 \ubc30\ud3ec(deploy)\ud55c \ud6c4 \uba54\ubaa8\ub9ac\uac00 \uae09\uaca9\ud788 \ucc28\uc624\ub974\uac70\ub098 \uaf49 \ucc28\ub294 \ud604\uc0c1\uc740 \ub2e4\uc74c\uacfc \uac19\uc740 \uc774\uc720\uc5d0\uc11c \ubc1c\uc0dd\ud560 \uc218 \uc788\ub2e4. </p> <p>\ud2b9\ud788 ML Commons \uae30\ubc18 \ucd94\ub860 \ub610\ub294 <code>text_embedding</code> processor\ub97c \uc0ac\uc6a9\ud560 \ub54c \ub2e4\uc74c \uc694\uc18c\ub4e4\uc744 \ubc18\ub4dc\uc2dc \ud655\uc778\ud574\uc57c \ud55c\ub2e4.</p>"},{"location":"search-engine/OpenSearch/ML/ml%20%EB%AA%A8%EB%8D%B8%20deploy%20%EC%8B%9C%20%EB%A9%94%EB%AA%A8%EB%A6%AC%2099%25%20%EC%B0%A8%EC%A7%80%20%EC%9B%90%EC%9D%B8/#_1","title":"\uc8fc\uc694 \uc6d0\uc778 \uc815\ub9ac","text":""},{"location":"search-engine/OpenSearch/ML/ml%20%EB%AA%A8%EB%8D%B8%20deploy%20%EC%8B%9C%20%EB%A9%94%EB%AA%A8%EB%A6%AC%2099%25%20%EC%B0%A8%EC%A7%80%20%EC%9B%90%EC%9D%B8/#1","title":"1. \ubaa8\ub378 \uc790\uccb4\uc758 \uba54\ubaa8\ub9ac \uc810\uc720\uac00 \ud07c","text":"<ul> <li> <p>Hugging Face \ubaa8\ub378(<code>sentence-transformers</code>, <code>bert-base</code>, <code>all-MiniLM</code> \ub4f1)\uc740 \uae30\ubcf8\uc801\uc73c\ub85c \uc218\ubc31 MB ~ \uc218 GB \ud06c\uae30\uc758 \ud30c\ub77c\ubbf8\ud130\ub97c \uac16\ub294\ub2e4.</p> </li> <li> <p>TorchScript\ub098 ONNX \ubaa8\ub378\uc740 \ub85c\ub4dc\ub420 \ub54c \uc804\uccb4 \ubaa8\ub378 \uac00\uc911\uce58\uac00 JVM \ud799 \ub610\ub294 native heap\uc5d0 \uc0c1\uc8fc\ud558\uac8c \ub418\uba70, \uc77c\ubc18\uc801\uc73c\ub85c</p> <ul> <li> <p><code>all-MiniLM-L6-v2</code>: \uc57d 400MB</p> </li> <li> <p><code>bert-base-uncased</code>: \uc57d 1.3GB</p> </li> </ul> </li> <li> <p>\ubaa8\ub378 \ud558\ub098\ub2f9 \ucd5c\uc18c 1~2GB \uba54\ubaa8\ub9ac\uac00 \ud544\uc694\ud558\uba70, \uc5ec\ub7ec \ud0dc\uc2a4\ud06c\ub098 \ub3d9\uc2dc \uc694\uccad\uc774 \uc788\uc73c\uba74 \uae09\uaca9\ud788 \uc99d\uac00\ud568.</p> </li> </ul>"},{"location":"search-engine/OpenSearch/ML/ml%20%EB%AA%A8%EB%8D%B8%20deploy%20%EC%8B%9C%20%EB%A9%94%EB%AA%A8%EB%A6%AC%2099%25%20%EC%B0%A8%EC%A7%80%20%EC%9B%90%EC%9D%B8/#2","title":"2. \ubaa8\ub378\uc774 \uc5b8\ub85c\ub4dc\ub418\uc9c0 \uc54a\uace0 \uacc4\uc18d \uc0c1\uc8fc\ud568","text":"<ul> <li> <p>OpenSearch ML Commons\ub294 \ubaa8\ub378\uc744 \ub85c\ub4dc\ud558\uba74 \uc5b8\ub85c\ub4dc(unload)\ud558\uc9c0 \uc54a\uace0 \uba54\ubaa8\ub9ac\uc5d0 \uacc4\uc18d \uc720\uc9c0\ud568.</p> </li> <li> <p>\ub530\ub77c\uc11c</p> <ul> <li> <p>\uc784\ubca0\ub529 \uc694\uccad\uc774 \ud55c \ubc88\ub9cc \uc624\ub354\ub77c\ub3c4 \u2192 \ubaa8\ub378\uc774 \uba54\ubaa8\ub9ac\uc5d0 \uc62c\ub77c\uac10</p> </li> <li> <p>\ub2e4\uc2dc \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc544\ub3c4 \uba54\ubaa8\ub9ac\ub97c \ucc28\uc9c0\ud55c \ucc44\ub85c \uc720\uc9c0\ub428</p> </li> </ul> </li> <li> <p>\uc774\ub294 <code>persistent=True</code> \uc0c1\ud0dc\ub85c \uc11c\ube59\ub418\uae30 \ub54c\ubb38\uc774\ub2e4.</p> </li> </ul>"},{"location":"search-engine/OpenSearch/ML/ml%20%EB%AA%A8%EB%8D%B8%20deploy%20%EC%8B%9C%20%EB%A9%94%EB%AA%A8%EB%A6%AC%2099%25%20%EC%B0%A8%EC%A7%80%20%EC%9B%90%EC%9D%B8/#3-jvm-native","title":"3. JVM \ud799\uc774 \uc544\ub2cc native \uba54\ubaa8\ub9ac\ub97c \uc0ac\uc6a9\ud568","text":"<ul> <li> <p>embedding \ucc98\ub9ac\ub294 Java \ub0b4\ubd80 \ud799\uc774 \uc544\ub2cc native PyTorch \ub808\ubca8\uc5d0\uc11c \uc218\ud589\ub41c\ub2e4.</p> </li> <li> <p>\ub530\ub77c\uc11c <code>OPENSEARCH_JAVA_OPTS=-Xmx4g</code> \ub85c \uc81c\ud55c\ud574\ub3c4 \uc2e4\uc81c \uba54\ubaa8\ub9ac\ub294 \ucee8\ud14c\uc774\ub108/OS \uc804\uccb4 \uba54\ubaa8\ub9ac\ub97c \uc0ac\uc6a9\ud55c\ub2e4.</p> </li> </ul>"},{"location":"search-engine/OpenSearch/ML/ml%20%EB%AA%A8%EB%8D%B8%20deploy%20%EC%8B%9C%20%EB%A9%94%EB%AA%A8%EB%A6%AC%2099%25%20%EC%B0%A8%EC%A7%80%20%EC%9B%90%EC%9D%B8/#4","title":"4. \ucd94\ub860 \ud0dc\uc2a4\ud06c \uc218 \uc99d\uac00 / \ube44\ub3d9\uae30 \uc313\uc784","text":"<ul> <li> <p>embedding \uc791\uc5c5\uc774 batch \ub610\ub294 \ube44\ub3d9\uae30\ub85c \uacc4\uc18d \uc313\uc77c \uacbd\uc6b0, \uc791\uc5c5 \ud050\uac00 \ube44\uc6cc\uc9c0\uc9c0 \uc54a\uc73c\uba74 \uba54\ubaa8\ub9ac \ub204\uc801 \ud604\uc0c1 \ubc1c\uc0dd</p> </li> <li> <p>\ud2b9\ud788:</p> <ul> <li> <p><code>/_predict</code> API \ub610\ub294</p> </li> <li> <p>ingest pipeline\uc5d0\uc11c <code>text_embedding</code> processor\ub85c \ubb38\uc11c\ub97c \ub2e4\ub7c9 \uc0c9\uc778\ud560 \ub54c</p> </li> </ul> </li> </ul>"},{"location":"search-engine/OpenSearch/ML/ml%20%EB%AA%A8%EB%8D%B8%20deploy%20%EC%8B%9C%20%EB%A9%94%EB%AA%A8%EB%A6%AC%2099%25%20%EC%B0%A8%EC%A7%80%20%EC%9B%90%EC%9D%B8/#5-ml-task","title":"5. ML task \uc124\uc815\uac12 \ubbf8\uc870\uc815","text":"<ul> <li>\ud0dc\uc2a4\ud06c \uc81c\ud55c \uc5c6\uc774 \ub9ce\uc740 \uc591\uc758 ML \uc694\uccad\uc744 \ucc98\ub9ac\ud558\uba74 \uc791\uc5c5\ubcc4 \ubaa8\ub378 \ub85c\ub529 + \uc784\uc2dc \ubc84\ud37c\ub85c \uc778\ud574 OOM \ubc1c\uc0dd \uac00\ub2a5</li> </ul>"},{"location":"search-engine/OpenSearch/ML/ml%20%EB%AA%A8%EB%8D%B8%20deploy%20%EC%8B%9C%20%EB%A9%94%EB%AA%A8%EB%A6%AC%2099%25%20%EC%B0%A8%EC%A7%80%20%EC%9B%90%EC%9D%B8/#_2","title":"\ud655\uc778\ud560 \uc218 \uc788\ub294 \uc9c0\ud45c","text":"<ol> <li>\uc2e4\ud589 \uc911\uc778 ML \ud0dc\uc2a4\ud06c</li> </ol> <pre><code>GET /_plugins/_ml/tasks\n</code></pre> <ol> <li>\ub85c\ub4dc\ub41c \ubaa8\ub378 \ud655\uc778</li> </ol> <pre><code>GET /_plugins/_ml/models/_all\n</code></pre> <ol> <li>\ub178\ub4dc \uc790\uc6d0 \ud655\uc778</li> </ol> <pre><code>GET /_nodes/stats/jvm,os,process\n</code></pre>"},{"location":"search-engine/OpenSearch/ML/ml%20%EB%AA%A8%EB%8D%B8%20deploy%20%EC%8B%9C%20%EB%A9%94%EB%AA%A8%EB%A6%AC%2099%25%20%EC%B0%A8%EC%A7%80%20%EC%9B%90%EC%9D%B8/#_3","title":"\ud574\uacb0 \ubc29\ubc95","text":""},{"location":"search-engine/OpenSearch/ML/ml%20%EB%AA%A8%EB%8D%B8%20deploy%20%EC%8B%9C%20%EB%A9%94%EB%AA%A8%EB%A6%AC%2099%25%20%EC%B0%A8%EC%A7%80%20%EC%9B%90%EC%9D%B8/#1-ml","title":"(1) ML \uc804\uc6a9 \ub178\ub4dc\ub85c \ubd84\ub9ac","text":"<ul> <li> <p><code>node.roles=ml</code> \uc804\uc6a9 \ub178\ub4dc \uad6c\uc131</p> </li> <li> <p><code>plugins.ml_commons.only_run_on_ml_node=true</code> \uc124\uc815</p> </li> <li> <p>\uc77c\ubc18 \uc0c9\uc778/\uac80\uc0c9 \ub178\ub4dc \uc790\uc6d0 \uce68\ud574 \ubc29\uc9c0</p> </li> </ul>"},{"location":"search-engine/OpenSearch/ML/ml%20%EB%AA%A8%EB%8D%B8%20deploy%20%EC%8B%9C%20%EB%A9%94%EB%AA%A8%EB%A6%AC%2099%25%20%EC%B0%A8%EC%A7%80%20%EC%9B%90%EC%9D%B8/#2-task","title":"(2) \ubaa8\ub378 task \uc81c\ud55c \uc124\uc815","text":"<pre><code>- plugins.ml_commons.max_ml_task_per_node=2\n- plugins.ml_commons.native_memory_threshold=85\n</code></pre> <ul> <li> <p>\ub3d9\uc2dc\uc5d0 \uc2e4\ud589\ud560 \uc218 \uc788\ub294 ML \ud0dc\uc2a4\ud06c \uc218\ub97c \uc81c\ud55c\ud568</p> </li> <li> <p>85% \uc774\uc0c1 \uba54\ubaa8\ub9ac \uc0ac\uc6a9 \uc2dc \ucd94\uac00 \ud0dc\uc2a4\ud06c \ucc28\ub2e8</p> </li> </ul>"},{"location":"search-engine/OpenSearch/ML/ml%20%EB%AA%A8%EB%8D%B8%20deploy%20%EC%8B%9C%20%EB%A9%94%EB%AA%A8%EB%A6%AC%2099%25%20%EC%B0%A8%EC%A7%80%20%EC%9B%90%EC%9D%B8/#3","title":"(3) \ubaa8\ub378 \uc218\ub3d9 \uc5b8\ub85c\ub4dc","text":"<pre><code>POST /_plugins/_ml/models/{model_id}/unload\n</code></pre> <ul> <li>\uc0ac\uc6a9\ud558\uc9c0 \uc54a\ub294 \ubaa8\ub378\uc740 \uc218\ub3d9\uc73c\ub85c \uc5b8\ub85c\ub4dc\ud558\uc5ec \uba54\ubaa8\ub9ac \ud655\ubcf4</li> </ul>"},{"location":"search-engine/OpenSearch/ML/ml%20%EB%AA%A8%EB%8D%B8%20deploy%20%EC%8B%9C%20%EB%A9%94%EB%AA%A8%EB%A6%AC%2099%25%20%EC%B0%A8%EC%A7%80%20%EC%9B%90%EC%9D%B8/#4-embedding-batch-ingest-pipeline","title":"(4) embedding batch \uc218 \uc81c\ud55c (ingest pipeline)","text":"<ul> <li> <p>\ub300\ub7c9 \ubb38\uc11c \uc0c9\uc778\uc744 \ud55c \ubc88\uc5d0 \ud558\uc9c0 \uc54a\ub3c4\ub85d \uc870\uc808</p> </li> <li> <p>\uc608: 100~200\uac1c \ub2e8\uc704\ub85c \ub098\ub204\uc5b4\uc11c \uc0c9\uc778</p> </li> </ul>"},{"location":"search-engine/OpenSearch/ML/ml%20%EB%AA%A8%EB%8D%B8%20deploy%20%EC%8B%9C%20%EB%A9%94%EB%AA%A8%EB%A6%AC%2099%25%20%EC%B0%A8%EC%A7%80%20%EC%9B%90%EC%9D%B8/#_4","title":"\uc694\uc57d","text":"\uc6d0\uc778 \uc124\uba85 \ubaa8\ub378\uc774 \ud06c\uace0 \ub85c\ub529 \ud6c4 \uc0c1\uc8fc \uae30\ubcf8\uc801\uc73c\ub85c \ubaa8\ub378\uc740 \uc5b8\ub85c\ub4dc\ub418\uc9c0 \uc54a\uc74c JVM \ud799\uc774 \uc544\ub2cc native \uba54\ubaa8\ub9ac \uc0ac\uc6a9 PyTorch\uac00 OS \uba54\ubaa8\ub9ac\ub97c \uc9c1\uc811 \uc0ac\uc6a9\ud568 \ucd94\ub860 \uc694\uccad \uc313\uc784 ML \ud0dc\uc2a4\ud06c \ud050\uac00 \uacfc\ubd80\ud558\ub418\uba74 memory leak\ucc98\ub7fc \ubcf4\uc784 \ud0dc\uc2a4\ud06c \uc81c\ud55c \uc124\uc815 \uc5c6\uc74c \ud55c \ub178\ub4dc\uc5d0\uc11c \uacfc\ub3c4\ud55c ML \uc694\uccad \ucc98\ub9ac \uc911"},{"location":"search-engine/OpenSearch/Plugin/UBI%20Schema/","title":"OpenSearch UBI Schema \uc815\ub9ac","text":""},{"location":"search-engine/OpenSearch/Plugin/UBI%20Schema/#opensearch-ubi-schema","title":"OpenSearch UBI Schema \uc815\ub9ac","text":""},{"location":"search-engine/OpenSearch/Plugin/UBI%20Schema/#_1","title":"\uac1c\uc694","text":"<p>UBI(Universal Business Insights)\ub294 \uc0ac\uc6a9\uc790 \ud589\ub3d9 \ub370\uc774\ud130\ub97c \uad6c\uc870\ud654\ud558\uace0 \uac80\uc0c9\uc5d0 \ud65c\uc6a9\ud560 \uc218 \uc788\ub3c4\ub85d \uc815\uc758\ub41c \uacf5\ud1b5 \uc2a4\ud0a4\ub9c8 \uccb4\uacc4\uc785\ub2c8\ub2e4. \uc774 \uc2a4\ud0a4\ub9c8\ub294 \uc0ac\uc6a9\uc790 \ud589\ub3d9 \ub85c\uadf8(\uc608: \ud074\ub9ad, \ubdf0, \uad6c\ub9e4 \ub4f1)\ub97c \uc815\ud615\ud654\ud558\uc5ec OpenSearch \ub0b4\uc5d0\uc11c \uac1c\uc120\ub41c \uac80\uc0c9 \ud488\uc9c8\uacfc \ucd94\ucc9c \uc2dc\uc2a4\ud15c\uc744 \uad6c\ucd95\ud558\ub294 \ub370 \ub3c4\uc6c0\uc744 \uc90d\ub2c8\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Plugin/UBI%20Schema/#_2","title":"\uc8fc\uc694 \uc2a4\ud0a4\ub9c8 \uce74\ud14c\uace0\ub9ac","text":""},{"location":"search-engine/OpenSearch/Plugin/UBI%20Schema/#1-event-schema","title":"1. Event schema (\uc774\ubca4\ud2b8 \uc2a4\ud0a4\ub9c8)","text":"<p>\uc0ac\uc6a9\uc790 \ud65c\ub3d9 \ub370\uc774\ud130\ub97c \uc815\uc758\ud569\ub2c8\ub2e4.</p> <ul> <li> <p>\ud544\ub4dc \uc608\uc2dc:</p> <ul> <li> <p><code>event_type</code>: \uc774\ubca4\ud2b8 \uc720\ud615 (click, view, purchase \ub4f1)</p> </li> <li> <p><code>event_timestamp</code>: \uc774\ubca4\ud2b8 \ubc1c\uc0dd \uc2dc\uc810</p> </li> <li> <p><code>session_id</code>: \uc138\uc158 \uc2dd\ubcc4\uc790</p> </li> <li> <p><code>user_id</code>: \uc0ac\uc6a9\uc790 \uc2dd\ubcc4\uc790</p> </li> <li> <p><code>item_id</code>: \ud074\ub9ad/\ub178\ucd9c\ub41c \ud56d\ubaa9 ID</p> </li> </ul> </li> </ul>"},{"location":"search-engine/OpenSearch/Plugin/UBI%20Schema/#2-item-schema","title":"2. Item schema (\uc544\uc774\ud15c \uc2a4\ud0a4\ub9c8)","text":"<p>\uac80\uc0c9/\ucd94\ucc9c \ub300\uc0c1\uc774 \ub418\ub294 \uc0c1\ud488, \ubb38\uc11c \ub4f1\uc758 \ud56d\ubaa9 \uc815\uc758\uc785\ub2c8\ub2e4.</p> <ul> <li> <p>\ud544\ub4dc \uc608\uc2dc:</p> <ul> <li> <p><code>item_id</code>: \ud56d\ubaa9 \uace0\uc720 ID</p> </li> <li> <p><code>title</code>, <code>description</code>: \ucf58\ud150\uce20 \uc815\ubcf4</p> </li> <li> <p><code>category</code>, <code>brand</code>, <code>price</code>: \uba54\ud0c0 \uc815\ubcf4</p> </li> <li> <p><code>embedding</code>: \ubca1\ud130 \uc784\ubca0\ub529 \uc815\ubcf4</p> </li> </ul> </li> </ul>"},{"location":"search-engine/OpenSearch/Plugin/UBI%20Schema/#3-query-schema","title":"3. Query schema (\uac80\uc0c9 \uc9c8\uc758 \uc2a4\ud0a4\ub9c8)","text":"<p>\uc0ac\uc6a9\uc790\uac00 \uc2e4\uc81c \uc785\ub825\ud55c \ucffc\ub9ac \uc815\ubcf4\uc785\ub2c8\ub2e4.</p> <ul> <li> <p>\ud544\ub4dc \uc608\uc2dc:</p> <ul> <li> <p><code>query_id</code>: \uace0\uc720 \ucffc\ub9ac ID</p> </li> <li> <p><code>query_text</code>: \uc0ac\uc6a9\uc790\uac00 \uc785\ub825\ud55c \ucffc\ub9ac</p> </li> <li> <p><code>query_vector</code>: \ubca1\ud130\ud654\ub41c \ucffc\ub9ac</p> </li> <li> <p><code>timestamp</code>: \uc785\ub825 \uc2dc\uac01</p> </li> </ul> </li> </ul>"},{"location":"search-engine/OpenSearch/Plugin/UBI%20Schema/#_3","title":"\uc65c \uc0ac\uc6a9\ud558\ub294\uac00?","text":"<ul> <li> <p>\uc0ac\uc6a9\uc790 \ud589\ub3d9 \uae30\ubc18 \ubd84\uc11d \ubc0f \ubaa8\ub378 \ud559\uc2b5\uc744 \uc704\ud55c \uc77c\uad00\ub41c \ub370\uc774\ud130 \uc218\uc9d1 \ud3ec\ub9f7 \uc81c\uacf5</p> </li> <li> <p>\ubca1\ud130 \uac80\uc0c9, \ud074\ub9ad \ubaa8\ub378, \ucd94\ucc9c \uc2dc\uc2a4\ud15c \ub4f1 \uace0\uae09 \uac80\uc0c9 \uae30\ub2a5\uacfc\uc758 \ud1b5\ud569 \uc6a9\uc774</p> </li> <li> <p>OpenSearch Neural Search \ubc0f LTR \ub4f1\uacfc \uc5f0\uacc4\ud558\uc5ec \uc0ac\uc6a9 \uac00\ub2a5</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Plugin/UBI%20Schema/#_4","title":"\uc5f0\ub3d9 \uc608","text":"<ul> <li> <p>UBI \uc2a4\ud0a4\ub9c8 \uae30\ubc18\uc73c\ub85c \ub85c\uadf8 \ub370\uc774\ud130\ub97c \uc0c9\uc778\ud558\uc5ec,</p> <ul> <li> <p>Neural Search\uc5d0\uc11c \uc0ac\uc6a9\uc790 \uc9c8\uc758 \uae30\ubc18 \ubca1\ud130 \uac80\uc0c9 \uc218\ud589</p> </li> <li> <p>LTR\uc5d0\uc11c \ud074\ub9ad \ub85c\uadf8\ub97c \ud559\uc2b5 \ub370\uc774\ud130\ub85c \ud65c\uc6a9</p> </li> </ul> </li> </ul>"},{"location":"search-engine/OpenSearch/Plugin/UBI%20Schema/#_5","title":"\uc694\uc57d","text":"\uad6c\uc131 \uc694\uc18c \uc124\uba85 Event Schema \uc0ac\uc6a9\uc790 \ud589\ub3d9(\ud074\ub9ad, \uad6c\ub9e4 \ub4f1) \uc815\uc758 Item Schema \ubb38\uc11c/\uc0c1\ud488 \ub4f1\uc758 \ub300\uc0c1 \uc815\uc758 Query Schema \uc0ac\uc6a9\uc790\uc758 \uac80\uc0c9 \uc9c8\uc758 \uc815\ubcf4 \uc815\uc758 \ubaa9\uc801 \ud589\ub3d9 \ub85c\uadf8 \uad6c\uc870\ud654 \u2192 \uac80\uc0c9 \ud488\uc9c8 \ud5a5\uc0c1, \ubaa8\ub378 \ud559\uc2b5 \uc9c0\uc6d0 <p>\ud574\ub2f9 \uc2a4\ud0a4\ub9c8\ub294 \uac80\uc0c9 \ubc0f \ucd94\ucc9c \uc2dc\uc2a4\ud15c\uc744 \uad6c\ucd95\ud560 \ub54c \ub370\uc774\ud130 \ud45c\uc900\ud654\ub97c \uac00\ub2a5\ud558\uac8c \ud558\uba70, OpenSearch AI \uae30\ub2a5\uacfc\uc758 \ud1b5\ud569\uc744 \uc27d\uac8c \ud574\uc8fc\ub294 \uae30\ubc18 \uc5ed\ud560\uc744 \ud569\ub2c8\ub2e4. \ub370\uc774\ud130 \ud300\uacfc \uac80\uc0c9\ud300\uc774 \uacf5\ud1b5 \ud3ec\ub9f7\uc73c\ub85c \ud611\uc5c5\ud560 \uc218 \uc788\ub3c4\ub85d \ub3c4\uc640\uc8fc\ub294 \uad6c\uc870\uc785\ub2c8\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Approximate%20k-NN/","title":"Approximate k NN","text":"<p>OpenSearch\ub294 \uae30\ubcf8\uc801\uc73c\ub85c \uc815\ud655\ud55c k-NN \uac80\uc0c9\uc744 \uc9c0\uc6d0\ud558\uc9c0\ub9cc, \ub370\uc774\ud130 \uc591\uc774 \ub9ce\uace0 \ubca1\ud130\uc758 \ucc28\uc6d0\uc774 \ub192\uc544\uc9c8\uc218\ub85d \uc131\ub2a5 \uc800\ud558 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud569\ub2c8\ub2e4. \uc774 \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud55c \ub300\uc548\uc73c\ub85c Approximate k-NN \uac80\uc0c9 \uae30\ub2a5\uc774 \uc81c\uacf5\ub41c\ub2e4.</p> <p>Approximate k-NN \uac80\uc0c9\uc740 \uc77c\ubd80 \uc815\ud655\uc131\uc744 \ud76c\uc0dd\ud558\ub294 \ub300\uc2e0, \uac80\uc0c9 \uc18d\ub3c4\ub97c \ud68d\uae30\uc801\uc73c\ub85c \ub192\uc774\ub294 \ubc29\uc2dd\uc73c\ub85c \uc218\uc2ed\ub9cc \uac1c \uc774\uc0c1\uc758 \ubca1\ud130 \ub370\uc774\ud130\ub97c \ub2e4\ub8f0 \ub54c \ud2b9\ud788 \uc720\uc6a9\ud558\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Approximate%20k-NN/#1-approximate-k-nn","title":"1. Approximate k-NN\uc774\ub780?","text":"<ul> <li> <p>\uc815\ud655\ud55c k-NN: \ubaa8\ub4e0 \ubca1\ud130 \uac04 \uac70\ub9ac \uacc4\uc0b0 \u2192 \uc815\ud655\ud558\uc9c0\ub9cc \ub290\ub9bc</p> </li> <li> <p>\uadfc\uc0ac k-NN (ANN): \uc778\ub371\uc2a4 \uad6c\uc870\ub97c \ucd5c\uc801\ud654\ud558\uc5ec \uc77c\ubd80 \uc815\ud655\ub3c4\ub97c \ud76c\uc0dd\ud558\uace0 \uc18d\ub3c4 \ud5a5\uc0c1</p> </li> </ul> <p>OpenSearch\ub294 \ub2e4\uc74c \ub77c\uc774\ube0c\ub7ec\ub9ac \uae30\ubc18 ANN \uc54c\uace0\ub9ac\uc998\uc744 \ud65c\uc6a9\ud55c\ub2e4.</p> <ul> <li> <p>NMSLIB</p> </li> <li> <p>Faiss</p> </li> <li> <p>Lucene</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/Approximate%20k-NN/#2","title":"2. \ubca1\ud130 \uc778\ub371\uc2a4 \uc0dd\uc131","text":"<p>\uba3c\uc800 \ubca1\ud130 \uc778\ub371\uc2a4\ub97c \uc0dd\uc131\ud560 \ub54c <code>index.knn</code> \uc124\uc815\uc744 <code>true</code>\ub85c \uc9c0\uc815\ud574\uc57c \ud55c\ub2e4. \uc774\ub294 \ubca1\ud130\ub97c \uc778\ub371\uc2f1\ud560 \ub54c \ub124\uc774\ud2f0\ube0c \ub77c\uc774\ube0c\ub7ec\ub9ac \uc778\ub371\uc2a4\ub97c \uc0dd\uc131\ud558\uaca0\ub2e4\ub294 \ub73b\uc774\ub2e4.</p> <pre><code>PUT my-knn-index-1\n{\n  \"settings\": {\n    \"index\": {\n      \"knn\": true,\n      \"knn.algo_param.ef_search\": 100\n    }\n  },\n  \"mappings\": {\n    \"properties\": {\n      \"my_vector1\": {\n        \"type\": \"knn_vector\",\n        \"dimension\": 2,\n        \"space_type\": \"l2\",\n        \"method\": {\n          \"name\": \"hnsw\",\n          \"engine\": \"faiss\",\n          \"parameters\": {\n            \"ef_construction\": 128,\n            \"m\": 24\n          }\n        }\n      }\n    }\n  }\n}\n</code></pre> <ul> <li> <p><code>engine</code>: faiss, nmslib, lucene \uc911 \uc120\ud0dd</p> </li> <li> <p><code>space_type</code>: \uc720\uc0ac\ub3c4 \uacc4\uc0b0 \ubc29\uc2dd (\uc608: <code>l2</code>, <code>innerproduct</code>)</p> </li> <li> <p><code>dimension</code>: \ubca1\ud130 \ucc28\uc6d0 \uc218</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/Approximate%20k-NN/#3","title":"3. \ub370\uc774\ud130 \uc0c9\uc778 \ubc0f \uac80\uc0c9 \uc608\uc2dc","text":"<pre><code>POST _bulk\n{ \"index\": { \"_index\": \"my-knn-index-1\", \"_id\": \"1\" } }\n{ \"my_vector1\": [1.5, 2.5], \"price\": 12.2 }\n...\n</code></pre> <pre><code>GET my-knn-index-1/_search\n{\n  \"size\": 2,\n  \"query\": {\n    \"knn\": {\n      \"my_vector1\": {\n        \"vector\": [2.0, 3.0],\n        \"k\": 2\n      }\n    }\n  }\n}\n</code></pre> <ul> <li> <p><code>k</code>: \uc720\uc0ac \ubca1\ud130 \uc218</p> </li> <li> <p><code>size</code>: \ucd5c\uc885 \ubc18\ud658\ud560 \uacb0\uacfc \uc218 (\uc0e4\ub4dc \uc218\uc5d0 \ub530\ub77c \uacf1\ud574\uc9d0)</p> </li> </ul> <p>Lucene, Faiss, NMSLIB \uc5d4\uc9c4\ubcc4\ub85c <code>k</code>\uc640 <code>size</code> \ud574\uc11d \ubc29\uc2dd\uc5d0 \ucc28\uc774\uac00 \uc788\uc74c</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Approximate%20k-NN/#4-training","title":"4. \ubaa8\ub378 \uae30\ubc18 \uc778\ub371\uc2a4 \uad6c\uc131 (Training \uae30\ubc18)","text":"<p>\ud2b9\uc815 \uc54c\uace0\ub9ac\uc998(\uc608: IVF, PQ \ub4f1)\uc744 \uc0ac\uc6a9\ud560 \uacbd\uc6b0 \uc778\ub371\uc2f1 \uc804\uc5d0 \ubaa8\ub378 \ud559\uc2b5(Train API)\uc774 \ud544\uc694\ud558\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Approximate%20k-NN/#step-1","title":"Step 1: \ud559\uc2b5\uc6a9 \uc778\ub371\uc2a4 \uc0dd\uc131 \ubc0f \ub370\uc774\ud130 \uc0bd\uc785","text":"<pre><code>PUT /train-index\n{\n  \"mappings\": {\n    \"properties\": {\n      \"train-field\": {\n        \"type\": \"knn_vector\",\n        \"dimension\": 4\n      }\n    }\n  }\n}\n</code></pre> <pre><code>POST _bulk\n{ \"index\": { \"_index\": \"train-index\", \"_id\": \"1\" } }\n{ \"train-field\": [1.5, 5.5, 4.5, 6.4] }\n...\n</code></pre> <p><code>index.knn</code>\uc740 \uc124\uc815\ud558\uc9c0 \uc54a\uc544\uc57c \ud559\uc2b5 \uc804\uc6a9\uc73c\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc74c</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Approximate%20k-NN/#step-2-train-api","title":"Step 2: Train API \ud638\ucd9c","text":"<pre><code>POST /_plugins/_knn/models/my-model/_train\n{\n  \"training_index\": \"train-index\",\n  \"training_field\": \"train-field\",\n  \"dimension\": 4,\n  \"description\": \"My model description\",\n  \"method\": {\n    \"name\": \"ivf\",\n    \"engine\": \"faiss\",\n    \"parameters\": {\n      \"encoder\": {\n        \"name\": \"pq\",\n        \"parameters\": {\n          \"code_size\": 2,\n          \"m\": 2\n        }\n      }\n    }\n  }\n}\n</code></pre> <p>\ud559\uc2b5\uc774 \uc644\ub8cc\ub418\uba74 <code>state: created</code>\ub85c \ubcc0\uacbd\ub41c\ub2e4.</p> <pre><code>GET /_plugins/_knn/models/my-model?filter_path=state&amp;pretty\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/Approximate%20k-NN/#step-3","title":"Step 3: \ubaa8\ub378\uc744 \uc0ac\uc6a9\ud558\ub294 \uc778\ub371\uc2a4 \uc0dd\uc131","text":"<pre><code>PUT /target-index\n{\n  \"settings\": {\n    \"index.knn\": true\n  },\n  \"mappings\": {\n    \"properties\": {\n      \"target-field\": {\n        \"type\": \"knn_vector\",\n        \"model_id\": \"my-model\"\n      }\n    }\n  }\n}\n</code></pre> <p>\uc774\uc81c \uc774 \uc778\ub371\uc2a4\uc5d0 \ub370\uc774\ud130\ub97c \uc0bd\uc785\ud558\uba74 \ubaa8\ub378 \uae30\ubc18 \uc778\ub371\uc2a4\uac00 \uc790\ub3d9\uc73c\ub85c \uad6c\uc131\ub41c\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Approximate%20k-NN/#5","title":"5. \uace0\uae09 \uae30\ub2a5 \ubc0f \uc8fc\uc758 \uc0ac\ud56d","text":"<ul> <li> <p>ANN \ubc29\uc2dd\uc740 \uc815\ud655\ub3c4\ubcf4\ub2e4 \uc18d\ub3c4\uc640 \ud655\uc7a5\uc131\uc5d0 \uc911\uc810</p> </li> <li> <p>\ud544\ud130 \uc870\uac74\uc740 \uac80\uc0c9 \ud6c4 \uacb0\uacfc\uc5d0 \uc801\uc6a9\ub428 (\uc0ac\uc804 \ud544\ud130\ub9c1 \ubd88\uac00)</p> </li> <li> <p>\ubca1\ud130\ub294 \ucd5c\ub300 16,000\ucc28\uc6d0\uae4c\uc9c0 \uc9c0\uc6d0</p> </li> <li> <p>\ubca1\ud130 \uc778\ub371\uc2a4\ub294 \ub124\uc774\ud2f0\ube0c \uba54\ubaa8\ub9ac\uc5d0 \ub85c\ub529\ub418\uba70 Warmup API\ub85c \uc0ac\uc804 \ub85c\ub529 \uac00\ub2a5</p> </li> <li> <p>\uac80\uc0c9 \uc131\ub2a5\uc744 \ud655\uc778\ud558\ub824\uba74 Stats API \ud65c\uc6a9</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/Approximate%20k-NN/#_1","title":"\ub9c8\ubb34\ub9ac","text":"<p>OpenSearch\uc758 Approximate k-NN \uac80\uc0c9 \uae30\ub2a5\uc740 \ub300\uc6a9\ub7c9 \ubca1\ud130 \ub370\uc774\ud130\ub97c \ube60\ub974\uac8c \uac80\uc0c9\ud574\uc57c \ud558\ub294 \ubaa8\ub4e0 \uc0c1\ud669\uc5d0\uc11c \ud575\uc2ec \ub3c4\uad6c\uc774\ub2e4. \ud2b9\ud788 \uc218\uc2ed\ub9cc \uac1c \uc774\uc0c1\uc758 \uace0\ucc28\uc6d0 \ubca1\ud130 \ub370\uc774\ud130\ub97c \ub2e4\ub8e8\ub294 \ucd94\ucc9c \uc2dc\uc2a4\ud15c, \ubb38\uc11c \uc720\uc0ac\ub3c4 \uac80\uc0c9, \uc774\ubbf8\uc9c0 \uac80\uc0c9 \ub4f1\uc5d0\uc11c \ud0c1\uc6d4\ud55c \uc131\ub2a5\uc744 \ubc1c\ud718\ud55c\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/","title":"Embeddings model","text":"<p>\uc774 \uac00\uc774\ub4dc\ub294 OpenSearch\uc5d0\uc11c OpenAI API\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc784\ubca0\ub529 \ubaa8\ub378\uc744 \ub4f1\ub85d\ud558\uace0 \uc790\ub3d9 \uc784\ubca0\ub529 \uc0dd\uc131\uc744 \uc124\uc815\ud558\ub294 \uac80\uc99d\ub41c \ubc29\ubc95\uc744 \uc124\uba85\ud569\ub2c8\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#_1","title":"\uc0ac\uc804 \uc900\ube44\uc0ac\ud56d","text":""},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#1-opensearch","title":"1. OpenSearch \ud074\ub7ec\uc2a4\ud130 \uc124\uc815","text":"<pre><code>PUT _cluster/settings\n{\n  \"persistent\": {\n    \"plugins.ml_commons.only_run_on_ml_node\": \"false\",\n    \"plugins.ml_commons.model_access_control_enabled\": \"true\",\n    \"plugins.ml_commons.native_memory_threshold\": \"99\"\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#2-openai-api","title":"2. OpenAI API \ud0a4 \uc900\ube44","text":"<ul> <li>OpenAI API \ud0a4\ub97c \ubc1c\uae09\ubc1b\uc544 \uc900\ube44\ud569\ub2c8\ub2e4</li> <li>\uc0ac\uc6a9\ud560 \uc784\ubca0\ub529 \ubaa8\ub378\uc744 \uacb0\uc815\ud569\ub2c8\ub2e4 (\uc608: text-embedding-3-small, text-embedding-3-large)</li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#_2","title":"\ub2e8\uacc4\ubcc4 \uc124\uc815 (\uac80\uc99d\ub41c \ubc29\ubc95)","text":""},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#step-1-openai","title":"Step 1: OpenAI \ucee4\ub125\ud130 \uc0dd\uc131","text":"<p>\uba3c\uc800 OpenAI API\uc640\uc758 \uc5f0\uacb0\uc744 \uc704\ud55c \ucee4\ub125\ud130\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4. \uc911\uc694: <code>pre_process_function</code>\uacfc <code>post_process_function</code>\uc744 \ubc18\ub4dc\uc2dc \ud3ec\ud568\ud574\uc57c \ud569\ub2c8\ub2e4.</p> <pre><code>POST /_plugins/_ml/connectors/_create\n{\n  \"name\": \"OpenAI Embedding Connector Fixed\",\n  \"description\": \"Fixed OpenAI API connector\",\n  \"version\": \"1.0.0\",\n  \"protocol\": \"http\",\n  \"parameters\": {\n    \"endpoint\": \"api.openai.com\",\n    \"model\": \"text-embedding-3-small\"\n  },\n  \"credential\": {\n    \"openAI_key\": \"\"\n  },\n  \"actions\": [\n    {\n      \"action_type\": \"predict\",\n      \"method\": \"POST\",\n      \"url\": \"https://api.openai.com/v1/embeddings\",\n      \"headers\": {\n        \"Authorization\": \"Bearer ${credential.openAI_key}\",\n        \"Content-Type\": \"application/json\"\n      },\n      \"request_body\": \"{ \\\"model\\\": \\\"${parameters.model}\\\", \\\"input\\\": ${parameters.input} }\",\n      \"pre_process_function\": \"connector.pre_process.openai.embedding\",\n      \"post_process_function\": \"connector.post_process.openai.embedding\"\n    }\n  ]\n}\n</code></pre> <p>\uc751\ub2f5 \uc608\uc2dc:</p> <pre><code>{\n  \"connector_id\": \"tc3IoJcBZGLRABg1c7Qo\"\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#step-2","title":"Step 2: \ubaa8\ub378 \ub4f1\ub85d \ubc0f \ubc30\ud3ec","text":"<p>\uc704\uc5d0\uc11c \uc0dd\uc131\ub41c \ucee4\ub125\ud130 ID\ub97c \uc0ac\uc6a9\ud558\uc5ec \ubaa8\ub378\uc744 \ub4f1\ub85d\ud569\ub2c8\ub2e4:</p> <pre><code>POST /_plugins/_ml/models/_register?deploy=true\n{\n  \"name\": \"openai-embedding-fixed\",\n  \"function_name\": \"remote\",\n  \"connector_id\": \"tc3IoJcBZGLRABg1c7Qo\",\n  \"description\": \"Fixed OpenAI embedding model\"\n}\n</code></pre> <p>\uc751\ub2f5 \uc608\uc2dc:</p> <pre><code>{\n  \"task_id\": \"uc3IoJcBZGLRABg13rT2\",\n  \"status\": \"CREATED\",\n  \"model_id\": \"us3IoJcBZGLRABg137RI\"\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#step-3","title":"Step 3: \ubaa8\ub378 \ud14c\uc2a4\ud2b8","text":"<p>\ubaa8\ub378\uc774 \uc815\uc0c1\uc801\uc73c\ub85c \uc791\ub3d9\ud558\ub294\uc9c0 \ud14c\uc2a4\ud2b8\ud569\ub2c8\ub2e4:</p> <pre><code>POST /_plugins/_ml/models/us3IoJcBZGLRABg137RI/_predict\n{\n  \"parameters\": {\n    \"input\": [\"\ud14c\uc2a4\ud2b8 \ud14d\uc2a4\ud2b8\"]\n  }\n}\n</code></pre> <p>\uc131\uacf5 \uc2dc 1536\ucc28\uc6d0\uc758 \uc784\ubca0\ub529 \ubca1\ud130\uac00 \ubc18\ud658\ub429\ub2c8\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#step-4","title":"Step 4: \uc778\uc81c\uc2a4\ud2b8 \ud30c\uc774\ud504\ub77c\uc778 \uc0dd\uc131","text":"<p>\uc704\uc5d0\uc11c \uc0dd\uc131\ub41c \ubaa8\ub378 ID\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc778\uc81c\uc2a4\ud2b8 \ud30c\uc774\ud504\ub77c\uc778\uc744 \uc0dd\uc131\ud569\ub2c8\ub2e4:</p> <pre><code>PUT /_ingest/pipeline/openai-nlp\n{\n  \"description\": \"OpenAI NLP\",\n  \"processors\": [\n    {\n      \"text_embedding\": {\n        \"model_id\": \"us3IoJcBZGLRABg137RI\",\n        \"field_map\": {\n          \"text\": \"passage_embedding\"\n        },\n        \"description\": \"Generate embeddings for text field\"\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#step-5","title":"Step 5: \ubca1\ud130 \uc778\ub371\uc2a4 \uc0dd\uc131","text":"<p>\uc911\uc694: OpenSearch\uc5d0\uc11c\ub294 <code>space_type</code>\uc744 <code>cosinesimil</code>\ub85c \uc124\uc815\ud574\uc57c \ud569\ub2c8\ub2e4 (<code>cosine</code>\uc774 \uc544\ub2d8):</p> <pre><code>PUT /my-openai-nlp-index\n{\n  \"settings\": {\n    \"index.knn\": true,\n    \"default_pipeline\": \"openai-nlp\"\n  },\n  \"mappings\": {\n    \"properties\": {\n      \"passage_embedding\": {\n        \"type\": \"knn_vector\",\n        \"dimension\": 1536,\n        \"space_type\": \"cosinesimil\"\n      },\n      \"text\": {\n        \"type\": \"text\"\n      },\n      \"title\": {\n        \"type\": \"text\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#step-6","title":"Step 6: \ubb38\uc11c \uc778\ub371\uc2f1 \ubc0f \ud14c\uc2a4\ud2b8","text":"<p>\uc774\uc81c \ubb38\uc11c\ub97c \uc778\ub371\uc2f1\ud558\uba74 \uc790\ub3d9\uc73c\ub85c \uc784\ubca0\ub529\uc774 \uc0dd\uc131\ub429\ub2c8\ub2e4:</p> <pre><code>PUT /my-openai-nlp-index/_doc/1\n{\n  \"title\": \"\ud14c\uc2a4\ud2b8\",\n  \"text\": \"\uac04\ub2e8\ud55c \ud14c\uc2a4\ud2b8 \ubb38\uc11c\uc785\ub2c8\ub2e4.\"\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#step-7","title":"Step 7: \ud30c\uc774\ud504\ub77c\uc778 \ud14c\uc2a4\ud2b8 (\uc120\ud0dd\uc0ac\ud56d)","text":"<p>\ud30c\uc774\ud504\ub77c\uc778\uc774 \uc815\uc0c1 \uc791\ub3d9\ud558\ub294\uc9c0 \uc2dc\ubbac\ub808\uc774\uc158\uc73c\ub85c \ud655\uc778:</p> <pre><code>POST /_ingest/pipeline/openai-nlp/_simulate\n{\n  \"docs\": [\n    {\n      \"_source\": {\n        \"text\": \"\uac04\ub2e8\ud55c \ud14c\uc2a4\ud2b8 \ubb38\uc11c\uc785\ub2c8\ub2e4.\"\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#step-8","title":"Step 8: \uc2dc\ub9e8\ud2f1 \uac80\uc0c9 \uc218\ud589","text":"<pre><code>GET /my-openai-nlp-index/_search\n{\n  \"_source\": {\n    \"excludes\": [\"passage_embedding\"]\n  },\n  \"query\": {\n    \"neural\": {\n      \"passage_embedding\": {\n        \"query_text\": \"AI \uae30\uc220\uc758 \ucd5c\uc2e0 \ub3d9\ud5a5\",\n        \"model_id\": \"us3IoJcBZGLRABg137RI\",\n        \"k\": 5\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#_3","title":"\ud575\uc2ec \ubb38\uc81c \ud574\uacb0 \uc0ac\ud56d","text":""},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#1","title":"1. \ucee4\ub125\ud130 \uc124\uc815 \uc2dc \ud544\uc218 \uc694\uc18c","text":"<ul> <li><code>pre_process_function</code>: <code>connector.pre_process.openai.embedding</code></li> <li><code>post_process_function</code>: <code>connector.post_process.openai.embedding</code></li> <li>\uc774 \ud568\uc218\ub4e4\uc774 \uc5c6\uc73c\uba74 \uc751\ub2f5 \ucc98\ub9ac \uc624\ub958\uac00 \ubc1c\uc0dd\ud569\ub2c8\ub2e4.</li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#2","title":"2. \ubaa8\ub378 \ucc28\uc6d0 \uc124\uc815","text":"<ul> <li>text-embedding-3-small: 1536\ucc28\uc6d0</li> <li>text-embedding-3-large: 3072\ucc28\uc6d0</li> <li>text-embedding-ada-002: 1536\ucc28\uc6d0</li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#_4","title":"\uc2e4\uc81c \uc0ac\uc6a9 \uc608\uc81c","text":""},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#_5","title":"\ub2e4\uc911 \ubb38\uc11c \uc778\ub371\uc2f1","text":"<pre><code>PUT /my-openai-nlp-index/_doc/1\n{\n  \"title\": \"\uc778\uacf5\uc9c0\ub2a5 \uae30\uc220 \ub3d9\ud5a5\",\n  \"text\": \"2024\ub144 \uc778\uacf5\uc9c0\ub2a5 \uae30\uc220\uc740 \ub300\uaddc\ubaa8 \uc5b8\uc5b4 \ubaa8\ub378\uc744 \uc911\uc2ec\uc73c\ub85c \ube60\ub974\uac8c \ubc1c\uc804\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4.\"\n}\n\nPUT /my-openai-nlp-index/_doc/2\n{\n  \"title\": \"\uba38\uc2e0\ub7ec\ub2dd \uc751\uc6a9 \ubd84\uc57c\", \n  \"text\": \"\uba38\uc2e0\ub7ec\ub2dd\uc740 \uc790\uc5f0\uc5b4 \ucc98\ub9ac, \ucef4\ud4e8\ud130 \ube44\uc804, \ucd94\ucc9c \uc2dc\uc2a4\ud15c \ub4f1 \ub2e4\uc591\ud55c \ubd84\uc57c\uc5d0\uc11c \ud65c\uc6a9\ub418\uace0 \uc788\uc2b5\ub2c8\ub2e4.\"\n}\n\nPUT /my-openai-nlp-index/_doc/3\n{\n  \"title\": \"\uac80\uc0c9 \uae30\uc220\uc758 \uc9c4\ud654\",\n  \"text\": \"\uc2dc\ub9e8\ud2f1 \uac80\uc0c9 \uae30\uc220\uc758 \ubc1c\uc804\uc73c\ub85c \uc0ac\uc6a9\uc790\uc758 \uc758\ub3c4\ub97c \ub354 \uc815\ud655\ud558\uac8c \ud30c\uc545\ud560 \uc218 \uc788\uac8c \ub418\uc5c8\uc2b5\ub2c8\ub2e4.\"\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#_6","title":"\uace0\uae09 \uc124\uc815 \uc635\uc158","text":""},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#_bulk-api","title":"\ubc30\uce58 \ucc98\ub9ac (<code>_bulk</code> API \uc0ac\uc6a9)","text":"<pre><code>POST /my-openai-nlp-index/_bulk?pipeline=openai-nlp\n{\"index\":{\"_id\":\"4\"}}\n{\"title\":\"AI \uc5f0\uad6c\",\"text\":\"\ucd5c\uc2e0 AI \uc5f0\uad6c \ub3d9\ud5a5\uc5d0 \ub300\ud55c \ubd84\uc11d\uc785\ub2c8\ub2e4.\"}\n{\"index\":{\"_id\":\"5\"}}\n{\"title\":\"\uae30\uc220 \ud601\uc2e0\",\"text\":\"\uae30\uc220 \ud601\uc2e0\uc774 \uc0b0\uc5c5\uc5d0 \ubbf8\uce58\ub294 \uc601\ud5a5\uc744 \uc0b4\ud3b4\ubd05\ub2c8\ub2e4.\"}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#_7","title":"\ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9 (\ud0a4\uc6cc\ub4dc + \uc2dc\ub9e8\ud2f1)","text":"<pre><code>GET /my-openai-nlp-index/_search\n{\n  \"_source\": {\n    \"excludes\": [\"passage_embedding\"]\n  },\n  \"query\": {\n    \"hybrid\": {\n      \"queries\": [\n        {\n          \"match\": {\n            \"text\": \"AI \uae30\uc220\"\n          }\n        },\n        {\n          \"neural\": {\n            \"passage_embedding\": {\n              \"query_text\": \"AI \uae30\uc220\uc758 \ucd5c\uc2e0 \ub3d9\ud5a5\",\n              \"model_id\": \"us3IoJcBZGLRABg137RI\",\n              \"k\": 5\n            }\n          }\n        }\n      ]\n    }\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#_8","title":"\ubaa8\ub2c8\ud130\ub9c1 \ubc0f \ub514\ubc84\uae45","text":""},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#_9","title":"\ubaa8\ub378 \uc0c1\ud0dc \ud655\uc778","text":"<pre><code>GET /_plugins/_ml/models/us3IoJcBZGLRABg137RI\nGET /_plugins/_ml/models/us3IoJcBZGLRABg137RI/_stats\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#_10","title":"\ucee4\ub125\ud130 \uc0c1\ud0dc \ud655\uc778","text":"<pre><code>GET /_plugins/_ml/connectors/tc3IoJcBZGLRABg1c7Qo\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#_11","title":"\ud30c\uc774\ud504\ub77c\uc778 \ud14c\uc2a4\ud2b8","text":"<pre><code>POST /_ingest/pipeline/openai-nlp/_simulate\n{\n  \"docs\": [\n    {\n      \"_source\": {\n        \"text\": \"\ud14c\uc2a4\ud2b8\ud560 \ud14d\uc2a4\ud2b8\"\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#_12","title":"\uc131\ub2a5 \ucd5c\uc801\ud654 \ubc0f \ube44\uc6a9 \uad00\ub9ac","text":""},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#openai","title":"OpenAI \ubaa8\ub378\ubcc4 \ube44\uad50","text":"\ubaa8\ub378\uba85 \ucc28\uc6d0 \ucd5c\ub300 \ud1a0\ud070 \uc131\ub2a5 \ube44\uc6a9 \uad8c\uc7a5 \uc6a9\ub3c4 text-embedding-3-small 1536 8191 \ub192\uc74c \ub0ae\uc74c \uc77c\ubc18\uc801\uc778 \uc6a9\ub3c4 text-embedding-3-large 3072 8191 \ucd5c\uace0 \ub192\uc74c \uace0\ud488\uc9c8 \uac80\uc0c9 text-embedding-ada-002 1536 8191 \uc911\uac04 \uc911\uac04 \uae30\ubcf8 \uc784\ubca0\ub529"},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#_13","title":"\ube44\uc6a9 \ucd5c\uc801\ud654 \ud301","text":"<ol> <li>\ubc30\uce58 \ucc98\ub9ac: \uc5ec\ub7ec \ubb38\uc11c\ub97c \ud55c \ubc88\uc5d0 \ucc98\ub9ac\ud558\uc5ec API \ud638\ucd9c \ud69f\uc218 \ucd5c\uc18c\ud654</li> <li>\uce90\uc2f1: \uc790\uc8fc \uc0ac\uc6a9\ub418\ub294 \uc784\ubca0\ub529 \uacb0\uacfc \uce90\uc2dc</li> <li>\ubaa8\ub378 \uc120\ud0dd: \uc6a9\ub3c4\uc5d0 \ub9de\ub294 \uc801\uc808\ud55c \ubaa8\ub378 \uc120\ud0dd</li> <li>\ud14d\uc2a4\ud2b8 \uae38\uc774 \ucd5c\uc801\ud654: \ubd88\ud544\uc694\ud55c \ud14d\uc2a4\ud2b8 \uc81c\uac70\ub85c \ud1a0\ud070 \uc0ac\uc6a9\ub7c9 \uc808\uc57d</li> </ol>"},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#_14","title":"\ubcf4\uc548 \ubc0f \uc6b4\uc601 \uace0\ub824\uc0ac\ud56d","text":""},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#api","title":"API \ud0a4 \ubcf4\uc548","text":"<ul> <li>\ud658\uacbd \ubcc0\uc218 \ub610\ub294 \ubcf4\uc548 \uc800\uc7a5\uc18c \uc0ac\uc6a9</li> <li>\uc815\uae30\uc801\uc778 API \ud0a4 \uad50\uccb4</li> <li>\ucd5c\uc18c \uad8c\ud55c \uc6d0\uce59 \uc801\uc6a9</li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#_15","title":"\ubaa8\ub2c8\ud130\ub9c1 \uc9c0\ud45c","text":"<ul> <li>API \ud638\ucd9c \uc131\uacf5\ub960</li> <li>\uc751\ub2f5 \uc2dc\uac04</li> <li>\ube44\uc6a9 \ucd94\uc801</li> <li>\uc624\ub958\uc728 \ubaa8\ub2c8\ud130\ub9c1</li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#_16","title":"\ubb38\uc81c \ud574\uacb0 \uac00\uc774\ub4dc","text":""},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#_17","title":"\uc77c\ubc18\uc801\uc778 \uc624\ub958\uc640 \ud574\uacb0\ubc29\ubc95","text":"<ol> <li> <p>\"Unable to find space: cosine\" \uc624\ub958</p> <ul> <li>\ud574\uacb0: <code>space_type</code>\uc744 <code>cosinesimil</code>\ub85c \ubcc0\uacbd</li> <li> <p>\"failed while calling model\" \uc624\ub958</p> </li> <li> <p>\ud574\uacb0: \ucee4\ub125\ud130\uc5d0 <code>pre_process_function</code>\uacfc <code>post_process_function</code> \ucd94\uac00</p> </li> <li> <p>API \ud0a4 \uc778\uc99d \uc624\ub958</p> </li> <li> <p>\ud574\uacb0: OpenAI API \ud0a4 \uc720\ud6a8\uc131 \ubc0f \uc794\uc561 \ud655\uc778</p> </li> <li> <p>\ucc28\uc6d0 \ubd88\uc77c\uce58 \uc624\ub958</p> </li> <li> <p>\ud574\uacb0: \uc778\ub371\uc2a4 \ub9e4\ud551\uc758 <code>dimension</code> \uac12\uc744 \ubaa8\ub378 \ucc28\uc6d0\uacfc \uc77c\uce58\uc2dc\ud0a4\uae30</p> </li> </ul> </li> </ol>"},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#_18","title":"\ub85c\uadf8 \ud655\uc778 \ubc29\ubc95","text":"<pre><code># OpenSearch \ub85c\uadf8 \ubaa8\ub2c8\ud130\ub9c1\ntail -f /var/log/opensearch/opensearch.log | grep -i \"embedding\\|neural\\|ml\"\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#_19","title":"\uacb0\ub860","text":"<p>\uc774 \uac00\uc774\ub4dc\ub97c \ud1b5\ud574 OpenSearch\uc5d0\uc11c OpenAI API\ub97c \uc0ac\uc6a9\ud55c \uace0\ud488\uc9c8 \uc2dc\ub9e8\ud2f1 \uac80\uc0c9 \uc2dc\uc2a4\ud15c\uc744 \uc131\uacf5\uc801\uc73c\ub85c \uad6c\ucd95\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ud575\uc2ec\uc740 \uc62c\ubc14\ub978 \ucee4\ub125\ud130 \uc124\uc815(\uc804\ucc98\ub9ac/\ud6c4\ucc98\ub9ac \ud568\uc218 \ud3ec\ud568)\uacfc \uc801\uc808\ud55c \uac70\ub9ac \uba54\ud2b8\ub9ad(<code>cosinesimil</code>) \uc0ac\uc6a9\uc785\ub2c8\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Embeddings%20model/#_20","title":"\uac80\uc99d\ub41c \uc131\uacf5 \uc694\uc18c","text":"<p>\ucee4\ub125\ud130: <code>pre_process_function</code>\uacfc <code>post_process_function</code> \ud544\uc218 \uac70\ub9ac \uba54\ud2b8\ub9ad: <code>cosinesimil</code> \uc0ac\uc6a9 (<code>cosine</code> \uc544\ub2d8) \ucc28\uc6d0 \uc124\uc815: text-embedding-3-small = 1536\ucc28\uc6d0 \ubaa8\ub378 \ud14c\uc2a4\ud2b8: \ud30c\uc774\ud504\ub77c\uc778 \uc801\uc6a9 \uc804 \uac1c\ubcc4 \ubaa8\ub378 \ud638\ucd9c \ud14c\uc2a4\ud2b8</p> <p>\uc774\uc81c OpenAI\uc758 \uac15\ub825\ud55c \uc784\ubca0\ub529 \uae30\uc220\uc744 \ud65c\uc6a9\ud55c \uace0\ud488\uc9c8 \uac80\uc0c9 \uc2dc\uc2a4\ud15c\uc744 \uc6b4\uc601\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4!</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Exact%20k-NN%20Seach/","title":"Exact k NN Seach","text":"<p>\ub300\uaddc\ubaa8 \ubca1\ud130 \uae30\ubc18 \uac80\uc0c9\uc5d0\uc11c \ub300\ubd80\ubd84\uc740 \uc18d\ub3c4\ub97c \uc704\ud574 Approximate k-NN(\uadfc\uc0ac \ucd5c\uadfc\uc811 \uc774\uc6c3) \uac80\uc0c9\uc744 \uc0ac\uc6a9\ud55c\ub2e4.</p> <p>\ud558\uc9c0\ub9cc \ud544\ud130\ub9c1\uc774 \ud544\uc694\ud558\uac70\ub098 \ub354 \ub192\uc740 \uc815\ud655\ub3c4\uac00 \uc694\uad6c\ub418\ub294 \uacbd\uc6b0\uc5d0\ub294 OpenSearch\uc758 Scoring Script \uae30\ubc18 Exact k-NN \uac80\uc0c9\uc744 \ud65c\uc6a9\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Exact%20k-NN%20Seach/#1-scoring-script-k-nn","title":"1. \uc65c Scoring Script \uae30\ubc18 k-NN\uc744 \uc0ac\uc6a9\ud560\uae4c?","text":"<ul> <li> <p>\ud544\ud130\ub9c1 \uc870\uac74\uacfc \ud568\uaed8 \ubca1\ud130 \uac80\uc0c9\uc774 \ud544\uc694\ud55c \uacbd\uc6b0</p> </li> <li> <p>\ubca1\ud130 \uc218\uac00 \uc801\uace0 \uc815\ud655\ub3c4\uac00 \uc911\uc694\ud55c \uacbd\uc6b0</p> </li> <li> <p>\uae30\uc874 Approximate k-NN \uad6c\uc870\uc5d0\uc11c\ub294 \ud544\ud130\ub97c \uc0ac\ud6c4(post) \uc801\uc6a9\ud558\uc9c0\ub9cc, Scoring Script\ub294 \uac80\uc0c9 \uc804 \ud544\ud130(pre-filter) \uc801\uc6a9\uc774 \uac00\ub2a5</p> </li> </ul> <p>\ub2e8\uc810: \ube0c\ub8e8\ud2b8\ud3ec\uc2a4 \ubc29\uc2dd\uc774\ub77c \ub300\uaddc\ubaa8 \ub370\uc774\ud130\uc14b\uc5d0\uc11c\ub294 \uc18d\ub3c4\uac00 \ub290\ub9b4 \uc218 \uc788\uc74c</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Exact%20k-NN%20Seach/#2","title":"2. \uc778\ub371\uc2a4 \uc0dd\uc131 \ubc0f \ub370\uc774\ud130 \uc0bd\uc785","text":""},{"location":"search-engine/OpenSearch/Vector%20Search/Exact%20k-NN%20Seach/#_1","title":"\uc778\ub371\uc2a4 \uc0dd\uc131","text":"<pre><code>PUT my-knn-index-1\n{\n  \"mappings\": {\n    \"properties\": {\n      \"my_vector1\": {\n        \"type\": \"knn_vector\",\n        \"dimension\": 2\n      },\n      \"my_vector2\": {\n        \"type\": \"knn_vector\",\n        \"dimension\": 4\n      }\n    }\n  }\n}\n</code></pre> <p><code>index.knn</code> \uc124\uc815\uc740 \uc0dd\ub7b5 \uac00\ub2a5. \uc774\ub294 Approximate \ubc29\uc2dd \uc0ac\uc6a9 \uc548 \ud560 \uacbd\uc6b0\uc5d0 \uc720\ub9ac (\uc18d\ub3c4, \uba54\ubaa8\ub9ac \uce21\uba74)</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Exact%20k-NN%20Seach/#_2","title":"\ub370\uc774\ud130 \uc0bd\uc785","text":"<pre><code>POST _bulk\n{ \"index\": { \"_index\": \"my-knn-index-1\", \"_id\": \"1\" } }\n{ \"my_vector1\": [1.5, 2.5], \"price\": 12.2 }\n...\n{ \"index\": { \"_index\": \"my-knn-index-1\", \"_id\": \"9\" } }\n{ \"my_vector2\": [1.5, 5.5, 4.5, 6.4], \"price\": 8.9 }\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/Exact%20k-NN%20Seach/#3-k-nn","title":"3. \uc815\ud655\ud55c k-NN \uac80\uc0c9 \uc2e4\ud589","text":"<pre><code>GET my-knn-index-1/_search\n{\n  \"size\": 4,\n  \"query\": {\n    \"script_score\": {\n      \"query\": {\n        \"match_all\": {}\n      },\n      \"script\": {\n        \"lang\": \"knn\",\n        \"source\": \"knn_score\",\n        \"params\": {\n          \"field\": \"my_vector2\",\n          \"query_value\": [2.0, 3.0, 5.0, 6.0],\n          \"space_type\": \"cosinesimil\"\n        }\n      }\n    }\n  }\n}\n</code></pre> <ul> <li> <p><code>lang</code>: \ubc18\ub4dc\uc2dc <code>knn</code> \uc0ac\uc6a9</p> </li> <li> <p><code>source</code>: <code>\"knn_score\"</code></p> </li> <li> <p><code>field</code>: \ubca1\ud130 \ud544\ub4dc\uba85</p> </li> <li> <p><code>query_value</code>: \ucffc\ub9ac \ubca1\ud130</p> </li> <li> <p><code>space_type</code>: \uac70\ub9ac \ud568\uc218 (<code>l2</code>, <code>cosinesimil</code>, <code>hammingbit</code> \ub4f1)</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/Exact%20k-NN%20Seach/#4-pre-filter","title":"4. Pre-filter \uc801\uc6a9 \uc608\uc2dc","text":"<p>Scoring Script\ub294 \uac80\uc0c9 \uc804\uc5d0 \uc870\uac74 \ud544\ud130\ub9c1\uc744 \uac78 \uc218 \uc788\ub2e4\ub294 \uc810\uc774 \ud070 \uc7a5\uc810\uc774\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Exact%20k-NN%20Seach/#_3","title":"\uc778\ub371\uc2a4 \uc0dd\uc131","text":"<pre><code>PUT my-knn-index-2\n{\n  \"mappings\": {\n    \"properties\": {\n      \"my_vector\": { \"type\": \"knn_vector\", \"dimension\": 2 },\n      \"color\": { \"type\": \"keyword\" }\n    }\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/Exact%20k-NN%20Seach/#_4","title":"\ubb38\uc11c \uc0bd\uc785","text":"<pre><code>POST _bulk\n{ \"index\": { \"_index\": \"my-knn-index-2\", \"_id\": \"1\" } }\n{ \"my_vector\": [1, 1], \"color\": \"RED\" }\n{ \"index\": { \"_index\": \"my-knn-index-2\", \"_id\": \"4\" } }\n{ \"my_vector\": [10, 10], \"color\": \"BLUE\" }\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/Exact%20k-NN%20Seach/#pre-filter","title":"Pre-filter + \ubca1\ud130 \uac80\uc0c9","text":"<pre><code>GET my-knn-index-2/_search\n{\n  \"size\": 2,\n  \"query\": {\n    \"script_score\": {\n      \"query\": {\n        \"bool\": {\n          \"filter\": {\n            \"term\": { \"color\": \"BLUE\" }\n          }\n        }\n      },\n      \"script\": {\n        \"lang\": \"knn\",\n        \"source\": \"knn_score\",\n        \"params\": {\n          \"field\": \"my_vector\",\n          \"query_value\": [9.9, 9.9],\n          \"space_type\": \"l2\"\n        }\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/Exact%20k-NN%20Seach/#5-binary-hamming-distance","title":"5. Binary \ub370\uc774\ud130\uc5d0 \ub300\ud55c Hamming Distance \uac80\uc0c9","text":"<p>Scoring Script\ub294 Binary \ub610\ub294 Long \ud0c0\uc785 \ud544\ub4dc\uc5d0 \ub300\ud574 Hamming Distance \uae30\ubc18 \ubca1\ud130 \uac80\uc0c9\ub3c4 \uc9c0\uc6d0\ud55c\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Exact%20k-NN%20Seach/#_5","title":"\uc778\ub371\uc2a4 \uc0dd\uc131","text":"<pre><code>PUT my-index\n{\n  \"mappings\": {\n    \"properties\": {\n      \"my_binary\": {\n        \"type\": \"binary\",\n        \"doc_values\": true\n      },\n      \"color\": {\n        \"type\": \"keyword\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/Exact%20k-NN%20Seach/#base64","title":"Base64 \uc778\ucf54\ub529\ub41c \ub370\uc774\ud130 \uc0bd\uc785","text":"<pre><code>POST _bulk\n{ \"index\": { \"_index\": \"my-index\", \"_id\": \"1\" } }\n{ \"my_binary\": \"SGVsbG8gV29ybGQh\", \"color\": \"RED\" }\n...\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/Exact%20k-NN%20Seach/#hamming-distance","title":"\uac80\uc0c9 (Hamming distance \uae30\ubc18)","text":"<pre><code>GET my-index/_search\n{\n  \"size\": 2,\n  \"query\": {\n    \"script_score\": {\n      \"query\": {\n        \"bool\": {\n          \"filter\": {\n            \"term\": { \"color\": \"BLUE\" }\n          }\n        }\n      },\n      \"script\": {\n        \"lang\": \"knn\",\n        \"source\": \"knn_score\",\n        \"params\": {\n          \"field\": \"my_binary\",\n          \"query_value\": \"U29tZXRoaW5nIEltIGxvb2tpbmcgZm9y\",\n          \"space_type\": \"hammingbit\"\n        }\n      }\n    }\n  }\n}\n</code></pre> <p><code>query_value</code>\ub294 base64 \ubb38\uc790\uc5f4 (\ub610\ub294 long \uc815\uc218)</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Exact%20k-NN%20Seach/#_6","title":"\ub9c8\ubb34\ub9ac","text":"<p>OpenSearch\uc758 Scoring Script \uae30\ubc18 k-NN \uac80\uc0c9\uc740 \ub2e4\uc74c\uacfc \uac19\uc740 \uc0c1\ud669\uc5d0\uc11c \uac15\ub825\ud55c \ub3c4\uad6c\uac00 \ub41c\ub2e4.</p> <ul> <li> <p>\ud544\ud130\ub97c \uba3c\uc800 \uc801\uc6a9\ud55c \ud6c4 \ubca1\ud130 \uac80\uc0c9\uc774 \ud544\uc694\ud55c \uacbd\uc6b0</p> </li> <li> <p>\uc815\ud655\ud55c \uc720\uc0ac\ub3c4 \uacc4\uc0b0\uc774 \ud544\uc218\uc778 \ud658\uacbd</p> </li> <li> <p>Binary \ub370\uc774\ud130\uc5d0 \ub300\ud55c \ubca1\ud130 \uc720\uc0ac\ub3c4 \uacc4\uc0b0\uc774 \ud544\uc694\ud55c \uacbd\uc6b0</p> </li> </ul> <p>\ub2e8, \ub300\uaddc\ubaa8 \ub370\uc774\ud130\uc14b\uc5d0\ub294 \uc801\ud569\ud558\uc9c0 \uc54a\uc73c\uba70 Approximate k-NN \ubc29\uc2dd\uacfc \ud568\uaed8 \ud558\uc774\ube0c\ub9ac\ub4dc\ub85c \uc0ac\uc6a9\ud558\ub294 \uac83\uc774 \ubc14\ub78c\uc9c1\ud558\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/GPU%20%EA%B8%B0%EB%B0%98%20%EC%9B%90%EA%B2%A9%20%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8A%A4%20%EA%B5%AC%EC%B6%95%20%EA%B0%80%EC%9D%B4%EB%93%9C/","title":"GPU \uae30\ubc18 \uc6d0\uaca9 \ubca1\ud130 \uc778\ub371\uc2a4 \uad6c\ucd95 \uac00\uc774\ub4dc","text":"<p>OpenSearch(v3.0.0)\ub294 GPU \uac00\uc18d \uc6d0\uaca9 \uc778\ub371\uc2a4 \ube4c\ub4dc \uc11c\ube44\uc2a4\ub97c \ud1b5\ud574 \ubca1\ud130 \uc778\ub371\uc2a4\ub97c \ub354 \ube60\ub974\uace0 \ud6a8\uc728\uc801\uc73c\ub85c \uad6c\ucd95\ud560 \uc218 \uc788\ub2e4.</p> <p>\uc774 \uae30\ub2a5\uc740 Faiss \uc5d4\uc9c4 + HNSW \uc54c\uace0\ub9ac\uc998 + FP32(32-bit float) \ubca1\ud130\uc5d0 \ub300\ud574 \uc9c0\uc6d0\ub41c\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/GPU%20%EA%B8%B0%EB%B0%98%20%EC%9B%90%EA%B2%A9%20%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8A%A4%20%EA%B5%AC%EC%B6%95%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_1","title":"\uc8fc\uc694 \uc774\uc810","text":"<ul> <li> <p>GPU \uc0ac\uc6a9\uc73c\ub85c \uc0c9\uc778 \uc18d\ub3c4 \ub300\ud3ed \ud5a5\uc0c1</p> </li> <li> <p>CPU \uae30\ubc18 \uc0c9\uc778 \ub300\ube44 \ube44\uc6a9 \uc808\uac10</p> </li> <li> <p>\uc0c9\uc778 \ucc98\ub9ac\uac00 OpenSearch \uc678\ubd80\uc5d0\uc11c \ube44\ub3d9\uae30\uc801\uc73c\ub85c \uc218\ud589\ub428</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/GPU%20%EA%B8%B0%EB%B0%98%20%EC%9B%90%EA%B2%A9%20%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8A%A4%20%EA%B5%AC%EC%B6%95%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_2","title":"\uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d","text":"<ol> <li> <p>Faiss \uc5d4\uc9c4 + HNSW \uba54\uc11c\ub4dc\ub97c \uc0ac\uc6a9\ud558\ub294 \uc778\ub371\uc2a4\ub9cc \uc9c0\uc6d0</p> </li> <li> <p>\ubca1\ud130 \ud0c0\uc785: FP32 (32-bit float)</p> </li> <li> <p>AWS S3 \uc800\uc7a5\uc18c \ud544\uc218 (\uc911\uac04 \uc800\uc7a5\uc18c \uc5ed\ud560)</p> </li> </ol>"},{"location":"search-engine/OpenSearch/Vector%20Search/GPU%20%EA%B8%B0%EB%B0%98%20%EC%9B%90%EA%B2%A9%20%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8A%A4%20%EA%B5%AC%EC%B6%95%20%EA%B0%80%EC%9D%B4%EB%93%9C/#1","title":"1\ub2e8\uacc4: \uc6d0\uaca9 \uc778\ub371\uc2a4 \ube4c\ub4dc \uae30\ub2a5 \ud65c\uc131\ud654","text":""},{"location":"search-engine/OpenSearch/Vector%20Search/GPU%20%EA%B8%B0%EB%B0%98%20%EC%9B%90%EA%B2%A9%20%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8A%A4%20%EA%B5%AC%EC%B6%95%20%EA%B0%80%EC%9D%B4%EB%93%9C/#dynamic","title":"\ud074\ub7ec\uc2a4\ud130 \uc124\uc815 (Dynamic)","text":"<pre><code>PUT /_cluster/settings\n{\n  \"persistent\": {\n    \"knn.remote_index_build.enabled\": true\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/GPU%20%EA%B8%B0%EB%B0%98%20%EC%9B%90%EA%B2%A9%20%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8A%A4%20%EA%B5%AC%EC%B6%95%20%EA%B0%80%EC%9D%B4%EB%93%9C/#dynamic_1","title":"\uc778\ub371\uc2a4 \uc124\uc815 (Dynamic)","text":"<pre><code>PUT /my-index/_settings\n{\n  \"index\": {\n    \"knn.remote_index_build.enabled\": true\n  }\n}\n</code></pre> <p>\ub450 \uc124\uc815\uc774 \ubaa8\ub450 true\uc5ec\uc57c \uc778\ub371\uc2a4\uc5d0 \ub300\ud574 \uc6d0\uaca9 \ube4c\ub4dc\uac00 \ud65c\uc131\ud654\ub428</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/GPU%20%EA%B8%B0%EB%B0%98%20%EC%9B%90%EA%B2%A9%20%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8A%A4%20%EA%B5%AC%EC%B6%95%20%EA%B0%80%EC%9D%B4%EB%93%9C/#2-s3","title":"2\ub2e8\uacc4: \uc6d0\uaca9 \ubca1\ud130 \uc800\uc7a5\uc18c(S3) \ub4f1\ub85d","text":"<p>OpenSearch \ud074\ub7ec\uc2a4\ud130\ub294 \ubca1\ud130\uc640 \ubb38\uc11c ID\ub97c S3 \uc800\uc7a5\uc18c\uc5d0 \uc5c5\ub85c\ub4dc\ud558\uba70, \uc6d0\uaca9 GPU \ube4c\ub354\ub294 \uc774\ub97c \uac00\uc838\uc640 \uc678\ubd80\uc5d0\uc11c \uc778\ub371\uc2a4\ub97c \uc0dd\uc131\ud55c \ub4a4 \uacb0\uacfc\ub97c \ub2e4\uc2dc \uc800\uc7a5\uc18c\uc5d0 \uc5c5\ub85c\ub4dc\ud55c\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/GPU%20%EA%B8%B0%EB%B0%98%20%EC%9B%90%EA%B2%A9%20%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8A%A4%20%EA%B5%AC%EC%B6%95%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_3","title":"\uc800\uc7a5\uc18c \ub4f1\ub85d \uc608\uc2dc","text":"<pre><code>PUT _snapshot/remote-knn-repo\n{\n  \"type\": \"s3\",\n  \"settings\": {\n    \"bucket\": \"my-knn-bucket\",\n    \"region\": \"us-west-2\"\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/GPU%20%EA%B8%B0%EB%B0%98%20%EC%9B%90%EA%B2%A9%20%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8A%A4%20%EA%B5%AC%EC%B6%95%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_4","title":"\ud074\ub7ec\uc2a4\ud130\uc5d0 \uc800\uc7a5\uc18c \uc9c0\uc815","text":"<pre><code>PUT /_cluster/settings\n{\n  \"persistent\": {\n    \"knn.remote_index_build.repository\": \"remote-knn-repo\"\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/GPU%20%EA%B8%B0%EB%B0%98%20%EC%9B%90%EA%B2%A9%20%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8A%A4%20%EA%B5%AC%EC%B6%95%20%EA%B0%80%EC%9D%B4%EB%93%9C/#3-endpoint","title":"3\ub2e8\uacc4: \uc6d0\uaca9 \uc778\ub371\uc2a4 \ube4c\ub4dc \uc11c\ube44\uc2a4(endpoint) \uc124\uc815","text":"<ul> <li>GPU \ube4c\ub4dc \uc11c\ubc84\ub97c \uc9c1\uc811 \uc6b4\uc601\ud558\uace0 \uc788\ub2e4\uba74, \uc544\ub798\uc640 \uac19\uc774 \uc124\uc815</li> </ul> <pre><code>PUT /_cluster/settings\n{\n  \"persistent\": {\n    \"knn.remote_index_build.service.endpoint\": \"https://my-knn-builder.example.com\"\n  }\n}\n</code></pre> <p>GPU \ube4c\ub354 \uc11c\ube44\uc2a4 \uad6c\uc131\uc5d0 \ub300\ud55c \uc790\uc138\ud55c \ub0b4\uc6a9\uc740 \uacf5\uc2dd User Guide \ucc38\uc870</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/GPU%20%EA%B8%B0%EB%B0%98%20%EC%9B%90%EA%B2%A9%20%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8A%A4%20%EA%B5%AC%EC%B6%95%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_5","title":"\ub3d9\uc791 \ubc29\uc2dd","text":"<ul> <li> <p>Flush \ub610\ub294 Merge \uc2dc, \ub2e4\uc74c \uc870\uac74\uc744 \ub9cc\uc871\ud558\ub294 \uacbd\uc6b0 GPU \ube4c\ub4dc \uacbd\ub85c\ub85c \uc804\ud658:</p> <ol> <li> <p>\uc778\ub371\uc2a4 \uc124\uc815\uc774 \uc9c0\uc6d0 \uad6c\uc131\uc744 \ub530\ub984 (Faiss + HNSW + FP32)</p> </li> <li> <p>\uc138\uadf8\uba3c\ud2b8 \ud06c\uae30\uac00 \uc124\uc815\ub41c \ubc94\uc704 \ub0b4\uc5d0 \uc788\uc74c</p> <ul> <li> <p>\ucd5c\uc18c: <code>index.knn.remote_index_build.size.min</code></p> </li> <li> <p>\ucd5c\ub300: <code>knn.remote_index_build.size.max</code></p> </li> </ul> </li> </ol> </li> <li> <p>\ube4c\ub4dc \uc791\uc5c5\uc740 \ubc31\uadf8\ub77c\uc6b4\ub4dc\uc5d0\uc11c \uc790\ub3d9 \uc2e4\ud589\ub428</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/GPU%20%EA%B8%B0%EB%B0%98%20%EC%9B%90%EA%B2%A9%20%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8A%A4%20%EA%B5%AC%EC%B6%95%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_6","title":"\ubaa8\ub2c8\ud130\ub9c1 \ubc29\ubc95","text":"<p>k-NN Stats API\ub97c \uc0ac\uc6a9\ud574 \uc6d0\uaca9 \uc778\ub371\uc2a4 \ube4c\ub4dc \uc791\uc5c5 \uc0c1\ud0dc\ub97c \ud655\uc778 \uac00\ub2a5:</p> <pre><code>GET /_plugins/_knn/stats\n</code></pre> <ul> <li><code>remote_index_build</code> \ud56d\ubaa9\uc5d0\uc11c \ud604\uc7ac \uc791\uc5c5\ub7c9, \uc131\uacf5/\uc2e4\ud328 \ud1b5\uacc4 \ub4f1\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc74c</li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/GPU%20%EA%B8%B0%EB%B0%98%20%EC%9B%90%EA%B2%A9%20%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8A%A4%20%EA%B5%AC%EC%B6%95%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_7","title":"\uc815\ud655\ud788 \ubb50\uac00 \uc88b\ub098?","text":""},{"location":"search-engine/OpenSearch/Vector%20Search/GPU%20%EA%B8%B0%EB%B0%98%20%EC%9B%90%EA%B2%A9%20%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8A%A4%20%EA%B5%AC%EC%B6%95%20%EA%B0%80%EC%9D%B4%EB%93%9C/#1_1","title":"1. \uc778\ub371\uc2f1 \uc18d\ub3c4 \ub300\ud3ed \ud5a5\uc0c1","text":"<ul> <li> <p>\uae30\uc874\uc5d0\ub294 \ubca1\ud130\ub97c \uc0c9\uc778\ud560 \ub54c OpenSearch \ub178\ub4dc\uac00 CPU\ub85c \uc9c1\uc811 \ubca1\ud130 \uc778\ub371\uc2a4(HNSW \ub4f1)\ub97c \uc0dd\uc131\ud574\uc57c \ud588\uc74c.</p> </li> <li> <p>\uc774 \uc791\uc5c5\uc740 \ud2b9\ud788 \uc218\uc2ed\ub9cc~\uc218\ubc31\ub9cc \uac1c\uc758 \ubca1\ud130\ub97c \uc0c9\uc778\ud560 \ub54c \ubcd1\ubaa9\uc774 \ubc1c\uc0dd\ud568.</p> </li> <li> <p>GPU\ub97c \uc0ac\uc6a9\ud558\uba74 \ubcd1\ub82c \uc5f0\uc0b0\uc73c\ub85c \uc218\uc2ed \ubc30 \ube60\ub974\uac8c \uc778\ub371\uc2a4\ub97c \uc0dd\uc131\ud560 \uc218 \uc788\uc74c.</p> <ul> <li>\uc608: \uc218\ubc31\ub9cc \uac1c \ubca1\ud130\ub97c \uc218 \ubd84 \ub0b4 \uc0c9\uc778 \uac00\ub2a5 (CPU\ubcf4\ub2e4 \uc218\uc2ed~\uc218\ubc31 \ubc30 \ube60\ub984)</li> </ul> </li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/GPU%20%EA%B8%B0%EB%B0%98%20%EC%9B%90%EA%B2%A9%20%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8A%A4%20%EA%B5%AC%EC%B6%95%20%EA%B0%80%EC%9D%B4%EB%93%9C/#2-opensearch-cpu","title":"2. OpenSearch \ub178\ub4dc\uc758 CPU \uc790\uc6d0 \uc808\uc57d","text":"<ul> <li> <p>\uc778\ub371\uc2a4 \uc0dd\uc131 \uc791\uc5c5\uc740 CPU\ub97c \ub9ce\uc774 \uc18c\ubaa8\ud568 \u2192 \uac80\uc0c9 \uc131\ub2a5\uc5d0\ub3c4 \uc601\ud5a5</p> </li> <li> <p>GPU \uae30\ubc18 \uc6d0\uaca9 \ube4c\ub4dc\ub294 \uc0c9\uc778 \uc791\uc5c5\uc744 OpenSearch \uc678\ubd80\uc758 \ubcc4\ub3c4 GPU \uc11c\ubc84\uc5d0\uc11c \ucc98\ub9ac\ud558\ubbc0\ub85c</p> <ul> <li> <p>OpenSearch \ub178\ub4dc\uc758 CPU \uc0ac\uc6a9\ub960\uc774 \ub0ae\uc544\uc9d0</p> </li> <li> <p>\uac80\uc0c9 \uc131\ub2a5 \uc720\uc9c0 + \uc778\ub371\uc2f1 \uc791\uc5c5 \ubcd1\ub82c\ud654 \uac00\ub2a5</p> </li> </ul> </li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/GPU%20%EA%B8%B0%EB%B0%98%20%EC%9B%90%EA%B2%A9%20%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8A%A4%20%EA%B5%AC%EC%B6%95%20%EA%B0%80%EC%9D%B4%EB%93%9C/#3","title":"3. \ub300\uaddc\ubaa8 \uc0c9\uc778 \uc791\uc5c5\uc5d0 \ucd5c\uc801\ud654","text":"<ul> <li> <p>\ubca1\ud130\uac00 \uc218\uc2ed\ub9cc~\uc218\ucc9c\ub9cc \uac1c \uc774\uc0c1\uc778 \uacbd\uc6b0, \uc77c\ubc18 \uc0c9\uc778\uc740 \uc2dc\uac04\ub3c4 \uc624\ub798 \uac78\ub9ac\uace0 \ub178\ub4dc\uc5d0 \uacfc\ubd80\ud558\ub97c \uc904 \uc218 \uc788\uc74c</p> </li> <li> <p>\uc774 \uae30\ub2a5\uc740 \ucd08\uae30 \ub300\ub7c9 \uc5c5\ub85c\ub4dc \ub610\ub294 \uc815\uae30 \ubc30\uce58 \uc0c9\uc778 \uc791\uc5c5\uc5d0 \ud2b9\ud788 \uc720\uc6a9</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/GPU%20%EA%B8%B0%EB%B0%98%20%EC%9B%90%EA%B2%A9%20%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8A%A4%20%EA%B5%AC%EC%B6%95%20%EA%B0%80%EC%9D%B4%EB%93%9C/#4","title":"4. \uc790\ub3d9 \uc5f0\ub3d9 \ubc0f \ubcd1\ub82c \ucc98\ub9ac \uad6c\uc870","text":"<ul> <li> <p>OpenSearch\uc5d0\uc11c \uc138\uadf8\uba3c\ud2b8\uac00 \uc77c\uc815 \ud06c\uae30\ub97c \ub118\uc744 \uacbd\uc6b0 \uc790\ub3d9\uc73c\ub85c GPU \ube4c\ub4dc \uacbd\ub85c \uc0ac\uc6a9</p> </li> <li> <p>\uc0ac\uc6a9\uc790\ub294 \ubcc4\ub3c4 \uc791\uc5c5 \uc5c6\uc774 \uc124\uc815\ub9cc \ud574\ub450\uba74 \uc790\ub3d9 \uc804\ud658\ub428</p> </li> <li> <p>Amazon S3 \uae30\ubc18\uc758 \uc911\uac04 \uc800\uc7a5\uc18c(Snapshot repository)\ub97c \ud1b5\ud574 \ube44\ub3d9\uae30 \ucc98\ub9ac \uac00\ub2a5</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/GPU%20%EA%B8%B0%EB%B0%98%20%EC%9B%90%EA%B2%A9%20%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8A%A4%20%EA%B5%AC%EC%B6%95%20%EA%B0%80%EC%9D%B4%EB%93%9C/#5","title":"5. \uc778\ud504\ub77c \ud655\uc7a5\uc131 \ud655\ubcf4","text":"<ul> <li> <p>GPU \uc778\ub371\uc2a4 \ube4c\ub4dc \uc11c\ubc84\ub294 OpenSearch \ud074\ub7ec\uc2a4\ud130\uc640 \ub3c5\ub9bd\uc801\uc774\ubbc0\ub85c</p> <ul> <li> <p>\ud544\uc694 \uc2dc \ubcc4\ub3c4 \ud655\uc7a5 \uac00\ub2a5</p> </li> <li> <p>GPU \uc11c\ubc84 \ube44\uc6a9\ub9cc \ubcc4\ub3c4\ub85c \uad00\ub9ac\ud558\uba74 \ub428 (OpenSearch\uc5d0 \ubb34\ub9ac \uc5c6\uc74c)</p> </li> </ul> </li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/GPU%20%EA%B8%B0%EB%B0%98%20%EC%9B%90%EA%B2%A9%20%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8A%A4%20%EA%B5%AC%EC%B6%95%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_8","title":"\uc694\uc57d","text":"\ud56d\ubaa9 \uc124\uba85 \uc9c0\uc6d0 \uc5d4\uc9c4 Faiss (HNSW + FP32) \uc800\uc7a5\uc18c Amazon S3 (\uc911\uac04 \uc800\uc7a5\uc18c \uc5ed\ud560) \uc131\ub2a5 \ud5a5\uc0c1 GPU \uc0ac\uc6a9\uc73c\ub85c \uc778\ub371\uc2a4 \uc18d\ub3c4 \ub300\ud3ed \ud5a5\uc0c1 \ud65c\uc6a9 \uc870\uac74 \ud2b9\uc815 \uc138\uadf8\uba3c\ud2b8 \ud06c\uae30 \ubc94\uc704 + \uc9c0\uc6d0 \uad6c\uc131 \uc0ac\uc6a9 API Warm-up, Stats API \ud65c\uc6a9 \uac00\ub2a5"},{"location":"search-engine/OpenSearch/Vector%20Search/Nested%20Field%EB%A1%9C%20%EB%8B%A4%EC%A4%91%20%EB%B2%A1%ED%84%B0%20%EB%8B%A4%EB%A3%A8%EA%B8%B0/","title":"Nested Field\ub85c \ub2e4\uc911 \ubca1\ud130 \ub2e4\ub8e8\uae30","text":"<p>\ubca1\ud130 \uae30\ubc18 \uac80\uc0c9 \uc2dc\uc2a4\ud15c\uc744 \uad6c\ucd95\ud560 \ub54c, \ud558\ub098\uc758 \ubb38\uc11c\uac00 \uc5ec\ub7ec \uac1c\uc758 \uad6c\uc131 \uc694\uc18c(\uc608: \ubb38\ub2e8, \uc774\ubbf8\uc9c0, \uc124\uba85 \ub4f1)\ub85c \uc774\ub904\uc838 \uc788\ub2e4\uba74 \uac01 \uc694\uc18c\ub9c8\ub2e4 \ubca1\ud130\ub97c \uc0dd\uc131\ud558\uc5ec \ubb38\uc11c \ub0b4\uc5d0 \ud568\uaed8 \uc800\uc7a5\ud558\uace0 \uc2f6\uc744 \uc218 \uc788\ub2e4.</p> <p>OpenSearch\ub294 \uc774\ub97c \uc704\ud574 nested \ud544\ub4dc \uae30\ubc18 \ubca1\ud130 \uac80\uc0c9 \uae30\ub2a5\uc744 \uc81c\uacf5\ud55c\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Nested%20Field%EB%A1%9C%20%EB%8B%A4%EC%A4%91%20%EB%B2%A1%ED%84%B0%20%EB%8B%A4%EB%A3%A8%EA%B8%B0/#1-nested-field","title":"1. Nested Field\ub780?","text":"<ul> <li> <p>\ud558\ub098\uc758 \ubb38\uc11c \ub0b4\uc5d0 \ubc30\uc5f4 \ud615\ud0dc\ub85c \uac1d\uccb4\ub97c \ud3ec\ud568\ud560 \uc218 \uc788\ub294 \uad6c\uc870</p> </li> <li> <p>\uac01 \uac1d\uccb4 \uc548\uc5d0 <code>knn_vector</code>\ub97c \ud3ec\ud568\ud558\uc5ec \ub2e4\uc218\uc758 \ubca1\ud130\ub97c \ud55c \ubb38\uc11c\uc5d0 \uc800\uc7a5 \uac00\ub2a5</p> </li> <li> <p>\uac80\uc0c9 \uc2dc \uac01 \ubb38\uc11c\uc758 \uac00\uc7a5 \uc720\uc0ac\ud55c \ubca1\ud130\ub9cc \uae30\uc900\uc73c\ub85c \uc2a4\ucf54\uc5b4 \uacb0\uc815</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/Nested%20Field%EB%A1%9C%20%EB%8B%A4%EC%A4%91%20%EB%B2%A1%ED%84%B0%20%EB%8B%A4%EB%A3%A8%EA%B8%B0/#2","title":"2. \uc778\ub371\uc2a4 \uc0dd\uc131 \uc608\uc2dc","text":"<pre><code>PUT my-knn-index-1\n{\n  \"settings\": {\n    \"index\": {\n      \"knn\": true\n    }\n  },\n  \"mappings\": {\n    \"properties\": {\n      \"nested_field\": {\n        \"type\": \"nested\",\n        \"properties\": {\n          \"my_vector\": {\n            \"type\": \"knn_vector\",\n            \"dimension\": 3,\n            \"space_type\": \"l2\",\n            \"method\": {\n              \"name\": \"hnsw\",\n              \"engine\": \"lucene\",\n              \"parameters\": {\n                \"ef_construction\": 100,\n                \"m\": 16\n              }\n            }\n          },\n          \"color\": {\n            \"type\": \"text\",\n            \"index\": false\n          }\n        }\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/Nested%20Field%EB%A1%9C%20%EB%8B%A4%EC%A4%91%20%EB%B2%A1%ED%84%B0%20%EB%8B%A4%EB%A3%A8%EA%B8%B0/#3","title":"3. \ubb38\uc11c \uc0c9\uc778 \uc608\uc2dc","text":"<pre><code>PUT _bulk?refresh=true\n{ \"index\": { \"_index\": \"my-knn-index-1\", \"_id\": \"1\" } }\n{\n  \"nested_field\": [\n    { \"my_vector\": [1,1,1], \"color\": \"blue\" },\n    { \"my_vector\": [2,2,2], \"color\": \"yellow\" },\n    { \"my_vector\": [3,3,3], \"color\": \"white\" }\n  ]\n}\n{ \"index\": { \"_index\": \"my-knn-index-1\", \"_id\": \"2\" } }\n{\n  \"nested_field\": [\n    { \"my_vector\": [10,10,10], \"color\": \"red\" },\n    { \"my_vector\": [20,20,20], \"color\": \"green\" },\n    { \"my_vector\": [30,30,30], \"color\": \"black\" }\n  ]\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/Nested%20Field%EB%A1%9C%20%EB%8B%A4%EC%A4%91%20%EB%B2%A1%ED%84%B0%20%EB%8B%A4%EB%A3%A8%EA%B8%B0/#4","title":"4. \uae30\ubcf8 \ubca1\ud130 \uac80\uc0c9 \ucffc\ub9ac","text":"<pre><code>GET my-knn-index-1/_search\n{\n  \"query\": {\n    \"nested\": {\n      \"path\": \"nested_field\",\n      \"query\": {\n        \"knn\": {\n          \"nested_field.my_vector\": {\n            \"vector\": [1, 1, 1],\n            \"k\": 2\n          }\n        }\n      }\n    }\n  }\n}\n</code></pre> <p>\uc774 \ucffc\ub9ac\ub294 \ubca1\ud130 \uc720\uc0ac\ub3c4\uac00 \ub192\uc740 \uc0c1\uc704 2\uac1c \ubca1\ud130\uac00 \ud3ec\ud568\ub41c \ubb38\uc11c\ub97c \ubc18\ud658 \u2192 \ubca1\ud130\uac00 \ubaa8\ub450 \ubb38\uc11c 1\uc5d0 \uc788\ub354\ub77c\ub3c4 \uc11c\ub85c \ub2e4\ub978 \ubb38\uc11c\uac00 \ud3ec\ud568\ub420 \uc218 \uc788\uc74c</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Nested%20Field%EB%A1%9C%20%EB%8B%A4%EC%A4%91%20%EB%B2%A1%ED%84%B0%20%EB%8B%A4%EB%A3%A8%EA%B8%B0/#5-inner-hits-nested","title":"5. Inner Hits\ub85c \ub9e4\uce6d\ub41c Nested \uac1d\uccb4 \ud655\uc778","text":"<p>\uae30\ubcf8\uc801\uc73c\ub85c \uc5b4\ub5a4 \ud558\uc704 \uac1d\uccb4\uac00 \ub9e4\uce6d\ub418\uc5c8\ub294\uc9c0 \uc54c \uc218 \uc5c6\ub2e4. <code>inner_hits</code>\ub97c \ud1b5\ud574 \ud574\ub2f9 \uc815\ubcf4\ub97c \ud655\uc778\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>GET my-knn-index-1/_search\n{\n  \"_source\": false,\n  \"query\": {\n    \"nested\": {\n      \"path\": \"nested_field\",\n      \"query\": {\n        \"knn\": {\n          \"nested_field.my_vector\": {\n            \"vector\": [1,1,1],\n            \"k\": 2\n          }\n        }\n      },\n      \"inner_hits\": {\n        \"_source\": false,\n        \"fields\": [\"nested_field.color\"]\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/Nested%20Field%EB%A1%9C%20%EB%8B%A4%EC%A4%91%20%EB%B2%A1%ED%84%B0%20%EB%8B%A4%EB%A3%A8%EA%B8%B0/#6-nested","title":"6. \ubaa8\ub4e0 Nested \ubca1\ud130 \uc810\uc218 \ud655\uc778 (\ud655\uc7a5 \uac80\uc0c9)","text":"<p>\uae30\ubcf8 \uc124\uc815\uc5d0\uc11c\ub294 \ubb38\uc11c \ub0b4\uc5d0\uc11c \uac00\uc7a5 \ub192\uc740 \ubca1\ud130 \uc810\uc218\ub9cc \uc0ac\uc6a9\ud55c\ub2e4. \ubaa8\ub4e0 \ubca1\ud130 \uc2a4\ucf54\uc5b4\ub97c \ubc18\uc601\ud558\ub824\uba74 <code>expand_nested_docs: true</code>\ub97c \uc124\uc815\ud558\uace0, \ubb38\uc11c \uc810\uc218\ub85c \uc5b4\ub5a4 \uac12\uc744 \uc0ac\uc6a9\ud560\uc9c0 <code>score_mode</code>\ub85c \uc9c0\uc815\ud569\ub2c8\ub2e4.</p> <pre><code>\"score_mode\": \"max\" // \ub610\ub294 \"avg\", \"sum\", \"none\"\n</code></pre> <pre><code>\"knn\": {\n  \"nested_field.my_vector\": {\n    \"vector\": [1,1,1],\n    \"k\": 2,\n    \"expand_nested_docs\": true\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/Nested%20Field%EB%A1%9C%20%EB%8B%A4%EC%A4%91%20%EB%B2%A1%ED%84%B0%20%EB%8B%A4%EB%A3%A8%EA%B8%B0/#7-top-level-nested","title":"7. Top-level \ub610\ub294 Nested \ud544\ub4dc \ud544\ud130\ub9c1","text":"<p><code>knn</code> \ucffc\ub9ac\uc5d0 <code>filter</code>\ub97c \ucd94\uac00\ud558\uc5ec \ubb38\uc11c \ub2e8\uc704\ub85c \ud544\ud130\ub9c1\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>GET my-knn-index-1/_search\n{\n  \"query\": {\n    \"nested\": {\n      \"path\": \"nested_field\",\n      \"query\": {\n        \"knn\": {\n          \"nested_field.my_vector\": {\n            \"vector\": [1,1,1],\n            \"k\": 3,\n            \"filter\": {\n              \"term\": {\n                \"parking\": true\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n</code></pre> <p>\uc704 \uc608\uc2dc\uc5d0\uc11c\ub294 <code>parking: true</code> \uc870\uac74\uc744 \ub9cc\uc871\ud558\ub294 \ubb38\uc11c\ub9cc \ubca1\ud130 \uc720\uc0ac\ub3c4\ub85c \uac80\uc0c9</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Nested%20Field%EB%A1%9C%20%EB%8B%A4%EC%A4%91%20%EB%B2%A1%ED%84%B0%20%EB%8B%A4%EB%A3%A8%EA%B8%B0/#_1","title":"\uc694\uc57d","text":"\uae30\ub2a5 \uc124\uba85 nested_field \ubca1\ud130 \uc5ec\ub7ec \ubca1\ud130\ub97c \ud558\ub098\uc758 \ubb38\uc11c\uc5d0 \uc800\uc7a5 \uac00\ub2a5 inner_hits \uc5b4\ub5a4 \ud558\uc704 \uac1d\uccb4\uac00 \ub9e4\uce6d\ub418\uc5c8\ub294\uc9c0 \ud655\uc778 expand_nested_docs \ubaa8\ub4e0 \ubca1\ud130 \uc810\uc218 \uace0\ub824 \uac00\ub2a5 filter \ubca1\ud130 \uac80\uc0c9 \uc2dc \uc870\uac74 \ud544\ud130 \uac00\ub2a5 (top-level \ubc0f nested)"},{"location":"search-engine/OpenSearch/Vector%20Search/Radial%20Search/","title":"Radial Search","text":"<p>OpenSearch\ub294 \ubca1\ud130 \uac80\uc0c9\uc5d0\uc11c \uc77c\ubc18\uc801\uc73c\ub85c \uc0ac\uc6a9\ud558\ub294 Top-k \uac80\uc0c9 \ubc29\uc2dd \uc678\uc5d0\ub3c4, \ud2b9\uc815 \uac70\ub9ac\ub098 \uc720\uc0ac\ub3c4 \uc784\uacc4\uac12 \uae30\uc900\uc73c\ub85c \uac80\uc0c9\ud558\ub294 Radial Search(\ubc18\uacbd \uac80\uc0c9) \uae30\ub2a5\uc744 \uc9c0\uc6d0\ud55c\ub2e4,</p> <p>\uc774\ub294 \uacf5\uac04\uc801 \uadfc\uc811\uc131\uc774\ub098 \uc720\uc0ac\ub3c4 \uc784\uacc4\uac12 \uae30\ubc18 \ud544\ud130\ub9c1\uc774 \ud544\uc694\ud55c \uacbd\uc6b0\uc5d0 \ub9e4\uc6b0 \uc720\uc6a9\ud558\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Radial%20Search/#1-radial-search","title":"1. Radial Search\ub780?","text":"<p>Radial Search\ub294 \ucffc\ub9ac \ubca1\ud130\ub97c \uc911\uc2ec\uc73c\ub85c \uc9c0\uc815\ub41c \ubc18\uacbd \uc774\ub0b4 \ub610\ub294 \uc720\uc0ac\ub3c4 \uc810\uc218\uac00 \uc77c\uc815 \uae30\uc900 \uc774\uc0c1\uc778 \ubb38\uc11c\ub97c \ubc18\ud658\ud558\ub294 \ubca1\ud130 \uac80\uc0c9 \ubc29\uc2dd\uc774\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Radial%20Search/#_1","title":"\uc8fc\uc694 \ud30c\ub77c\ubbf8\ud130","text":"\ud30c\ub77c\ubbf8\ud130 \uc124\uba85 <code>max_distance</code> \ucffc\ub9ac \ubca1\ud130\uc640\uc758 \uac70\ub9ac(l2 \ub4f1) \uae30\uc900\uc73c\ub85c \uac70\ub9ac \uc774\ub0b4\uc5d0 \uc788\ub294 \ubca1\ud130 \uac80\uc0c9 <code>min_score</code> \uc720\uc0ac\ub3c4 \uc810\uc218\uac00 \ud2b9\uc815 \uae30\uc900 \uc774\uc0c1\uc778 \ubca1\ud130 \uac80\uc0c9 <code>k</code> Top-k \uac80\uc0c9 (\uc120\ud0dd\uc801\uc73c\ub85c \uc0ac\uc6a9, \uc704 \ub450 \uac12 \uc911 \ud558\ub098\ub9cc \ud544\uc694) <p>\uc774 \uc911 \ud558\ub098\ub9cc \uc9c0\uc815\ud558\uba74 \ub3d9\uc791\ud568 (<code>k</code>, <code>max_distance</code>, <code>min_score</code> \uc911 \ud0dd1)</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Radial%20Search/#2","title":"2. \uc9c0\uc6d0 \ubc94\uc704","text":"\uc5d4\uc9c4 \ud544\ud130 \uc9c0\uc6d0 Nested \uc9c0\uc6d0 \uac80\uc0c9 \ubc29\uc2dd Lucene \u2705 \u274c Approximate Faiss \u2705 \u2705 Approximate <p>\uc989, \ud544\ud130 \uc870\uac74, Nested Field, \uacf5\uac04 \uae30\ubc18 \uac70\ub9ac \uc870\uac74\uacfc \ud568\uaed8 \ud65c\uc6a9 \uac00\ub2a5</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Radial%20Search/#3","title":"3. \uc778\ub371\uc2a4 \uc0dd\uc131","text":"<pre><code>PUT knn-index-test\n{\n  \"settings\": {\n    \"index.knn\": true\n  },\n  \"mappings\": {\n    \"properties\": {\n      \"my_vector\": {\n        \"type\": \"knn_vector\",\n        \"dimension\": 2,\n        \"space_type\": \"l2\",\n        \"method\": {\n          \"name\": \"hnsw\",\n          \"engine\": \"faiss\",\n          \"parameters\": {\n            \"ef_construction\": 100,\n            \"m\": 16,\n            \"ef_search\": 100\n          }\n        }\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/Radial%20Search/#4","title":"4. \ub370\uc774\ud130 \uc0c9\uc778","text":"<pre><code>PUT _bulk?refresh=true\n{\"index\": {\"_index\": \"knn-index-test\", \"_id\": \"1\"}}\n{\"my_vector\": [7.0, 8.2], \"price\": 4.4}\n{\"index\": {\"_index\": \"knn-index-test\", \"_id\": \"2\"}}\n{\"my_vector\": [7.1, 7.4], \"price\": 14.2}\n{\"index\": {\"_index\": \"knn-index-test\", \"_id\": \"3\"}}\n{\"my_vector\": [7.3, 8.3], \"price\": 19.1}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/Radial%20Search/#5-max_distance","title":"5. \uc608\uc2dc: max_distance \uae30\ubc18 \uac80\uc0c9","text":"<pre><code>GET knn-index-test/_search\n{\n  \"query\": {\n    \"knn\": {\n      \"my_vector\": {\n        \"vector\": [7.1, 8.3],\n        \"max_distance\": 2\n      }\n    }\n  }\n}\n</code></pre> <ul> <li>\uc124\uba85: \ucffc\ub9ac \ubca1\ud130\uc640\uc758 l2 \uac70\ub9ac \uc81c\uacf1\uc774 2 \uc774\ud558\uc778 \ubca1\ud130\ub9cc \uac80\uc0c9</li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/Radial%20Search/#6-max_distance","title":"6. \uc608\uc2dc: max_distance + \ud544\ud130 \uacb0\ud569","text":"<pre><code>GET knn-index-test/_search\n{\n  \"query\": {\n    \"knn\": {\n      \"my_vector\": {\n        \"vector\": [7.1, 8.3],\n        \"max_distance\": 2,\n        \"filter\": {\n          \"range\": {\n            \"price\": {\n              \"gte\": 1,\n              \"lte\": 5\n            }\n          }\n\n        }\n      }\n    }\n  }\n}\n</code></pre> <ul> <li>\uc124\uba85: \uac70\ub9ac \uc870\uac74 + <code>price</code> \ud544\ub4dc \ubc94\uc704 \ud544\ud130 \uc801\uc6a9</li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/Radial%20Search/#7-min_score","title":"7. \uc608\uc2dc: min_score \uae30\ubc18 \uac80\uc0c9","text":"<pre><code>GET knn-index-test/_search\n{\n  \"query\": {\n    \"knn\": {\n      \"my_vector\": {\n        \"vector\": [7.1, 8.3],\n        \"min_score\": 0.95\n      }\n    }\n  }\n}\n</code></pre> <ul> <li>\uc124\uba85: \uc720\uc0ac\ub3c4 \uc810\uc218\uac00 0.95 \uc774\uc0c1\uc778 \ubca1\ud130\ub9cc \uac80\uc0c9     (\uc8fc\ub85c cosine similarity \ub4f1 \uc720\uc0ac\ub3c4 \uae30\ubc18 \uacf5\uac04\uc5d0\uc11c \ud65c\uc6a9)</li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/Radial%20Search/#8-min_score","title":"8. \uc608\uc2dc: min_score + \ud544\ud130 \uacb0\ud569","text":"<pre><code>GET knn-index-test/_search\n{\n  \"query\": {\n    \"knn\": {\n      \"my_vector\": {\n        \"vector\": [7.1, 8.3],\n        \"min_score\": 0.95,\n        \"filter\": {\n          \"range\": {\n            \"price\": {\n              \"gte\": 1,\n              \"lte\": 5\n            }\n          }\n        }\n      }\n    }\n  }\n}\n</code></pre> <ul> <li>\uacb0\uacfc: \uc720\uc0ac\ub3c4 \uc810\uc218 \uc870\uac74 + \uac00\uaca9 \ud544\ud130\ub97c \ubaa8\ub450 \ub9cc\uc871\ud558\ub294 \ubb38\uc11c \ubc18\ud658</li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/Radial%20Search/#9","title":"9. \uc2e4\uc804 \ud301","text":"<ul> <li> <p><code>max_distance</code>\ub294 \uac70\ub9ac \uae30\ubc18 \ud544\ud130\ub9c1\uc774 \ud544\uc694\ud560 \ub54c \uc720\uc6a9</p> </li> <li> <p><code>min_score</code>\ub294 \uc720\uc0ac\ub3c4 \uae30\ubc18 \ucd94\ucc9c/\uac80\uc0c9\uc5d0\uc11c \ub9e4\uc6b0 \uc9c1\uad00\uc801</p> </li> <li> <p><code>filter</code>\ub97c \ud568\uaed8 \uc0ac\uc6a9\ud558\uba74 \uc18d\ub3c4 \uac1c\uc120 \ubc0f \uc815\ubc00\ud55c \uac80\uc0c9 \uc81c\uc5b4 \uac00\ub2a5</p> </li> <li> <p><code>nested_field</code>, <code>hybrid</code>, <code>binary</code>, <code>hamming</code> \uac80\uc0c9\uacfc \ud568\uaed8 \uc751\uc6a9 \uac00\ub2a5</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/Radial%20Search/#_2","title":"\ub9c8\ubb34\ub9ac","text":"<p>Radial Search\ub294 \ub2e8\uc21c\ud55c Top-k \uac80\uc0c9\uc744 \ub118\uc5b4\uc11c \ubca1\ud130 \uacf5\uac04\uc758 \ubc94\uc704 \uae30\ubc18 \uac80\uc0c9\uc744 \uac00\ub2a5\ud558\uac8c \ud55c\ub2e4.</p> <p>\uac70\ub9ac \uc81c\ud55c \ub610\ub294 \uc720\uc0ac\ub3c4 \uc784\uacc4\uac12\uc744 \uae30\uc900\uc73c\ub85c \ubb38\uc11c\ub97c \uc120\ubcc4\ud558\ub294 \ub370 \ud0c1\uc6d4\ud55c \ubc29\uc2dd\uc774\uba70, \ucd94\ucc9c \uc2dc\uc2a4\ud15c, \uc704\uce58 \uae30\ubc18 \uac80\uc0c9, \uc815\ubc00 \ud544\ud130\ub9c1 \uac80\uc0c9 \ub4f1\uc5d0 \ud65c\uc6a9\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Vector%20Sech%20%EA%B0%80%EC%9D%B4%EB%93%9C/","title":"Vector Sech \uac00\uc774\ub4dc","text":"<p>\ubca1\ud130 \uac80\uc0c9\uc740 \ud14d\uc2a4\ud2b8, \uc774\ubbf8\uc9c0, \uc81c\ud488 \uc124\uba85 \ub4f1 \ubcf5\uc7a1\ud55c \ub370\uc774\ud130\ub97c \ubca1\ud130(\uc22b\uc790 \ubc30\uc5f4)\ub85c \ubcc0\ud658\ud558\uc5ec \uc758\ubbf8 \uae30\ubc18 \uac80\uc0c9\uc744 \uac00\ub2a5\ud558\uac8c \ud558\ub294 \ucd5c\uc2e0 \uac80\uc0c9 \ubc29\uc2dd\uc774\ub2e4. </p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Vector%20Sech%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_1","title":"\ubca1\ud130 \uac80\uc0c9 \ubc29\uc2dd \ube44\uad50","text":"\uae30\ub2a5 \ucffc\ub9ac \ud0c0\uc785 \uc785\ub825 \ud615\uc2dd \uc784\ubca0\ub529 \ubaa8\ub378 \ud544\uc694 \uc5ec\ubd80 \uc8fc\uc694 \uc0ac\uc6a9 \uc0ac\ub840 Raw Vector \uac80\uc0c9 <code>knn</code> \ubca1\ud130 \ubc30\uc5f4 (vector) \ud544\uc694 \uc5c6\uc74c \uae30\uc874 \ubca1\ud130\ub97c \ud65c\uc6a9\ud55c \uac80\uc0c9 \uc790\ub3d9 \uc0dd\uc131 \uc784\ubca0\ub529 \uac80\uc0c9 <code>neural</code> \ud14d\uc2a4\ud2b8 \ub610\ub294 \uc774\ubbf8\uc9c0 \ud544\uc694 AI \uae30\ubc18 \uc758\ubbf8 \uac80\uc0c9"},{"location":"search-engine/OpenSearch/Vector%20Search/Vector%20Sech%20%EA%B0%80%EC%9D%B4%EB%93%9C/#1-raw-vector","title":"1. Raw Vector \uac80\uc0c9","text":"<p>\ubca1\ud130\uac00 \uc774\ubbf8 \uc0dd\uc131\ub418\uc5b4 \uc788\uace0, \uc774\ub97c \uc9c1\uc811 \ud65c\uc6a9\ud558\uc5ec \uac80\uc0c9\ud558\uace0\uc790 \ud560 \uacbd\uc6b0\uc5d0\ub294 <code>knn</code> \ucffc\ub9ac\ub97c \uc0ac\uc6a9\ud55c\ub2e4.  \ubca1\ud130 \ud544\ub4dc\uc5d0 \ubc30\uc5f4\uc744 \uc9c1\uc811 \uc785\ub825\ud558\uace0 <code>k</code> \uac12\uc744 \uc9c0\uc815\ud558\uc5ec \uc720\uc0ac\ud55c \ubb38\uc11c N\uac1c\ub97c \uac80\uc0c9\ud55c\ub2e4.</p> <pre><code>GET /my-raw-vector-index/_search\n{\n  \"query\": {\n    \"knn\": {\n      \"my_vector\": {\n        \"vector\": [0.1, 0.2, 0.3],\n        \"k\": 2\n      }\n    }\n  }\n}\n</code></pre> <ul> <li> <p><code>my_vector</code>: \uc0c9\uc778\ub41c \ubb38\uc11c\uc758 \ubca1\ud130 \ud544\ub4dc</p> </li> <li> <p><code>vector</code>: \ucffc\ub9ac \ubca1\ud130 \ubc30\uc5f4 (\uc9c1\uc811 \uc785\ub825)</p> </li> <li> <p><code>k</code>: \ubc18\ud658\ud560 \ubb38\uc11c \uac1c\uc218</p> </li> </ul> <p>\uc801\ud569\ud55c \uacbd\uc6b0: \uc678\ubd80\uc5d0\uc11c \uc784\ubca0\ub529\ud55c \ubca1\ud130 \ub370\uc774\ud130\ub97c \uc9c1\uc811 \uc778\ub371\uc2f1\ud558\uc5ec \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Vector%20Sech%20%EA%B0%80%EC%9D%B4%EB%93%9C/#2-neural-search","title":"2. \uc790\ub3d9 \uc0dd\uc131 \uc784\ubca0\ub529 \uac80\uc0c9 (Neural Search)","text":"<p>OpenSearch\ub294 AI \uac80\uc0c9\uc744 \uc704\ud574 \ucffc\ub9ac \uc785\ub825\uac12(\ud14d\uc2a4\ud2b8, \uc774\ubbf8\uc9c0 \ub4f1)\uc744 \uc784\ubca0\ub529\uc73c\ub85c \uc790\ub3d9 \ubcc0\ud658\ud574\uc8fc\ub294 \uae30\ub2a5\uc744 \uc81c\uacf5\ud55c\ub2e4. \uc774\ub54c \uc0ac\uc6a9\ud558\ub294 \ucffc\ub9ac \ud0c0\uc785\uc740 <code>neural</code> \uc774\ub2e4.</p> <pre><code>GET /my-ai-search-index/_search\n{\n  \"_source\": {\n    \"excludes\": [\n      \"output_embedding\"\n    ]\n  },\n  \"query\": {\n    \"neural\": {\n      \"output_embedding\": {\n        \"query_text\": \"What is AI search?\",\n        \"model_id\": \"mBGzipQB2gmRjlv_dOoB\",\n        \"k\": 2\n      }\n    }\n  }\n}\n</code></pre> <ul> <li> <p><code>query_text</code>: \uac80\uc0c9\uc5b4(\uc790\uc5f0\uc5b4 \ub4f1)</p> </li> <li> <p><code>model_id</code>: \ud14d\uc2a4\ud2b8 \uc784\ubca0\ub529 \ubaa8\ub378 ID (Ingest pipeline\uc5d0\uc11c \uc0ac\uc6a9\ud55c \uac83\uacfc \ub3d9\uc77c\ud574\uc57c \ud568)</p> </li> <li> <p><code>output_embedding</code>: \uc784\ubca0\ub529 \uacb0\uacfc\uac00 \uc800\uc7a5\ub41c \ubca1\ud130 \ud544\ub4dc</p> </li> <li> <p><code>_source.excludes</code>: \uac80\uc0c9 \uacb0\uacfc\uc5d0\uc11c \uc784\ubca0\ub529 \ubca1\ud130\ub97c \uc81c\uc678\ud558\uace0 \uc2f6\uc744 \uacbd\uc6b0</p> </li> </ul> <p>\uc801\ud569\ud55c \uacbd\uc6b0: \uc790\uc5f0\uc5b4 \uc9c8\uc758\uc5d0 \ub300\ud55c \uc758\ubbf8 \uae30\ubc18 \uac80\uc0c9\uc774 \ud544\uc694\ud55c \uacbd\uc6b0 \uc608: \u201c\uc774 \uc81c\ud488\uacfc \uc720\uc0ac\ud55c \ub2e4\ub978 \uc81c\ud488 \ubcf4\uc5ec\uc918\u201d, \u201cAI \uac80\uc0c9\uc774 \ubb50\uc57c?\u201d \ub4f1\uc758 \uc9c8\ubb38</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Vector%20Sech%20%EA%B0%80%EC%9D%B4%EB%93%9C/#3-sparse-vector","title":"3. \ud76c\uc18c \ubca1\ud130(Sparse Vector) \uac80\uc0c9","text":"<p>OpenSearch\ub294 \ud76c\uc18c \ubca1\ud130(sparse vector)\ub97c \ud65c\uc6a9\ud55c \uac80\uc0c9\ub3c4 \uc9c0\uc6d0\ud569\ub2c8\ub2e4. \uc774\ub294 \ub2e8\uc5b4 \ube48\ub3c4 \uae30\ubc18\uc758 BoW(Bag of Words), TF-IDF, BM25 \ub4f1 \uc804\ud1b5\uc801\uc778 \ubc29\uc2dd\uacfc \uc720\uc0ac\ud55c \ud76c\uc18c \ud45c\ud604\uc744 \ubca1\ud130\ud654\ud558\uc5ec \uc0ac\uc6a9\ud558\ub294 \uad6c\uc870\uc785\ub2c8\ub2e4.</p> <p>\ucc38\uace0: \ud76c\uc18c \ubca1\ud130 \uac80\uc0c9\uc740 Neural Sparse Search \uae30\ub2a5\uc744 \ud1b5\ud574 \uc0ac\uc6a9\ud560 \uc218 \uc788\uc73c\uba70, \ubcc4\ub3c4 \ubaa8\ub378\uacfc \uc124\uc815\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/Vector%20Sech%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_2","title":"\ub9c8\ubb34\ub9ac","text":"<p>OpenSearch\uc758 \ubca1\ud130 \uac80\uc0c9 \uae30\ub2a5\uc740 \ub2e8\uc21c\ud55c \ud0a4\uc6cc\ub4dc \ub9e4\uce6d\uc744 \ub118\uc5b4\uc11c \uc758\ubbf8\uc640 \ub9e5\ub77d\uc744 \uc774\ud574\ud558\ub294 \uac80\uc0c9\uc744 \uac00\ub2a5\ud558\uac8c \ud55c\ub2e4. \ud544\uc694\uc5d0 \ub530\ub77c raw vector \uac80\uc0c9 \ub610\ub294 AI \uae30\ubc18 neural search\ub97c \uc120\ud0dd\ud558\uc5ec \uc0ac\uc6a9\ud560 \uc218 \uc788\uc73c\uba70, \ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9\uacfc \uacb0\ud569\ud558\uba74 \ub354\uc6b1 \uac15\ub825\ud55c \uac80\uc0c9 \uc5d4\uc9c4\uc744 \uad6c\ud604\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/%EA%B2%80%EC%83%89%20%EC%84%B1%EB%8A%A5%20%EC%B5%9C%EC%A0%81%ED%99%94%20%EA%B0%80%EC%9D%B4%EB%93%9C/","title":"\uac80\uc0c9 \uc131\ub2a5 \ucd5c\uc801\ud654 \uac00\uc774\ub4dc","text":"<p>OpenSearch\uc5d0\uc11c \ubca1\ud130 \uae30\ubc18 \uac80\uc0c9\uc744 \ube60\ub974\uac8c \ucc98\ub9ac\ud558\uae30 \uc704\ud574\uc11c\ub294 \ucffc\ub9ac \ucc98\ub9ac \ube44\uc6a9\uc744 \uc904\uc774\uace0, \uce90\uc2dc\ub97c \uc801\uadf9 \ud65c\uc6a9\ud558\uba70, \ub124\ud2b8\uc6cc\ud06c \uc804\uc1a1\ub7c9\uc744 \ucd5c\uc18c\ud654\ud558\ub294 \uac83\uc774 \uc911\uc694\ud569\ub2c8\ub2e4. \ub2e4\uc74c\uc740 \uc8fc\uc694 \uc131\ub2a5 \ud5a5\uc0c1 \uc804\ub7b5\uc774\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/%EA%B2%80%EC%83%89%20%EC%84%B1%EB%8A%A5%20%EC%B5%9C%EC%A0%81%ED%99%94%20%EA%B0%80%EC%9D%B4%EB%93%9C/#1-reduce-segment-count","title":"1. \uc138\uadf8\uba3c\ud2b8 \uc218 \uc904\uc774\uae30 (Reduce Segment Count)","text":"<ul> <li> <p>Lucene\uc740 \ubaa8\ub4e0 \uc138\uadf8\uba3c\ud2b8\uc5d0 \ub300\ud574 \uac1c\ubcc4 \uac80\uc0c9 \ud6c4 \uacb0\uacfc\ub97c \ubcd1\ud569\ud558\uc5ec \uc0c1\uc704 <code>size</code> \uac1c \uacb0\uacfc\ub97c \ubc18\ud658</p> </li> <li> <p>\uc138\uadf8\uba3c\ud2b8 \uc218\uac00 \ub9ce\uc744\uc218\ub85d \uac80\uc0c9 \uc2dc\uac04\uc774 \ub298\uc5b4\ub0a8</p> </li> <li> <p>\ucd5c\uc801 \uc131\ub2a5\uc740 \"\uc0e4\ub4dc \ub2f9 1\uac1c \uc138\uadf8\uba3c\ud2b8\"\uc77c \ub54c \ub2ec\uc131</p> </li> <li> <p>\uc138\uadf8\uba3c\ud2b8 \uc218 \uc81c\uc5b4 \ubc29\ubc95</p> <ul> <li> <p><code>refresh_interval</code>\uc744 \ub298\ub9ac\uac70\ub098</p> </li> <li> <p>\uc0c9\uc778 \uc911 <code>refresh_interval: -1</code>\ub85c \ube44\ud65c\uc131\ud654</p> </li> </ul> </li> </ul> <pre><code>PUT /&lt;index_name&gt;/_settings\n{\n  \"index\": {\n    \"refresh_interval\": \"-1\"\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/%EA%B2%80%EC%83%89%20%EC%84%B1%EB%8A%A5%20%EC%B5%9C%EC%A0%81%ED%99%94%20%EA%B0%80%EC%9D%B4%EB%93%9C/#2-warm-up-the-index","title":"2. \uc778\ub371\uc2a4 \uc608\uc5f4 (Warm up the Index)","text":"<ul> <li> <p>\ubca1\ud130 \uc0c9\uc778 \uc2dc \uc0dd\uc131\ub41c native library index\ub294 \ucc98\uc74c \uac80\uc0c9 \uc2dc \uba54\ubaa8\ub9ac\uc5d0 \ub85c\ub529\ub428</p> </li> <li> <p>\uccab \ucffc\ub9ac\ub294 \uc218 \ucd08, \uc774\ud6c4 \ucffc\ub9ac\ub294 \ubc00\ub9ac\ucd08 \uc218\uc900\uc73c\ub85c \ub2e8\ucd95\ub428 (\uce90\uc2dc \ub54c\ubb38)</p> </li> <li> <p>OpenSearch 3.1\ubd80\ud130\ub294 memory-optimized search mode\uac00 \ub3c4\uc785\ub418\uc5b4 \ud544\uc694\ud55c \ubc14\uc774\ud2b8\ub9cc \ub85c\ub529 \uac00\ub2a5</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/%EA%B2%80%EC%83%89%20%EC%84%B1%EB%8A%A5%20%EC%B5%9C%EC%A0%81%ED%99%94%20%EA%B0%80%EC%9D%B4%EB%93%9C/#warmup-api","title":"Warmup API \uc0ac\uc6a9","text":"<pre><code>GET /_plugins/_knn/warmup/index1,index2,index3?pretty\n</code></pre> <ul> <li> <p>\ubaa8\ub4e0 primary/replica shard\uc758 \ubca1\ud130 \uc778\ub371\uc2a4\ub97c \uba54\ubaa8\ub9ac \uce90\uc2dc\uc5d0 \uc0ac\uc804 \ub85c\ub529</p> </li> <li> <p>\uc0c9\uc778 \ucd94\uac00, refresh, merge \uc774\ud6c4\uc5d0\ub294 \ub2e4\uc2dc \uc2e4\ud589 \ud544\uc694</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/%EA%B2%80%EC%83%89%20%EC%84%B1%EB%8A%A5%20%EC%B5%9C%EC%A0%81%ED%99%94%20%EA%B0%80%EC%9D%B4%EB%93%9C/#3-stored-fields","title":"3. Stored Fields \ube44\ud65c\uc6a9 (\ubd88\ud544\uc694\ud55c \ub370\uc774\ud130 \uc77d\uae30 \ucd5c\uc18c\ud654)","text":""},{"location":"search-engine/OpenSearch/Vector%20Search/%EA%B2%80%EC%83%89%20%EC%84%B1%EB%8A%A5%20%EC%B5%9C%EC%A0%81%ED%99%94%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_1","title":"\ubb38\uc11c \ub0b4\uc6a9\uc774 \ud544\uc694 \uc5c6\ub294 \uacbd\uc6b0","text":"<ul> <li> <p><code>_source: false</code> \uc124\uc815\uc73c\ub85c ID, score\ub9cc \ubc18\ud658</p> </li> <li> <p>\uac00\uc7a5 \ube60\ub978 \uac80\uc0c9 \ubc29\uc2dd</p> </li> </ul> <pre><code>GET /my-index/_search\n{\n  \"_source\": false,\n  \"query\": {\n    \"knn\": {\n      \"vector_field\": {\n        \"vector\": [0.1, 0.2, 0.3],\n        \"k\": 10\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/%EA%B2%80%EC%83%89%20%EC%84%B1%EB%8A%A5%20%EC%B5%9C%EC%A0%81%ED%99%94%20%EA%B0%80%EC%9D%B4%EB%93%9C/#4-vector","title":"4. \ubca1\ud130 \ud544\ub4dc\ub9cc \uc81c\uc678 (Vector \uc81c\uc678, \ub2e4\ub978 \ud544\ub4dc\ub294 \uc720\uc9c0)","text":"<ul> <li> <p>\uc804\uccb4 \ubb38\uc11c \ub0b4\uc6a9\uc740 \ud544\uc694\ud558\uc9c0\ub9cc, \ubca1\ud130 \ud544\ub4dc\ub294 \uc751\ub2f5\uc5d0 \ud3ec\ud568\ud558\uc9c0 \uc54a\uc544\ub3c4 \ub420 \uacbd\uc6b0 \uc720\uc6a9</p> </li> <li> <p>\ub124\ud2b8\uc6cc\ud06c \ud2b8\ub798\ud53d \uac10\uc18c \ud6a8\uacfc \uc788\uc74c</p> </li> </ul> <pre><code>GET /my-index/_search\n{\n  \"_source\": {\n    \"excludes\": [\n      \"vector_field\"\n    ]\n  },\n  \"query\": {\n    \"knn\": {\n      \"vector_field\": {\n        \"vector\": [0.1, 0.2, 0.3],\n        \"k\": 10\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/%EA%B2%80%EC%83%89%20%EC%84%B1%EB%8A%A5%20%EC%B5%9C%EC%A0%81%ED%99%94%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_2","title":"\uc694\uc57d: \uc131\ub2a5 \ud5a5\uc0c1 \uccb4\ud06c\ub9ac\uc2a4\ud2b8","text":"\ud56d\ubaa9 \uc124\uba85 \uc138\uadf8\uba3c\ud2b8 \uc218 \ucd5c\uc18c\ud654 \uc0c9\uc778 \uc911 refresh \ube44\ud65c\uc131\ud654\ub85c \uc138\uadf8\uba3c\ud2b8 \ubcd1\ud569 \uc720\ub3c4 Warmup API \uc0ac\uc6a9 \uccab \ucffc\ub9ac \uc9c0\uc5f0 \ubc29\uc9c0, \uba54\ubaa8\ub9ac \uce90\uc2dc \uc0ac\uc804 \ub85c\ub529 <code>_source: false</code> ID\uc640 \uc810\uc218\ub9cc \ud544\uc694\ud55c \uacbd\uc6b0 <code>_source.excludes</code> \ubca1\ud130 \ud544\ub4dc\ub9cc \uc81c\uc678\ud558\uace0 \ub098\uba38\uc9c0 \uc815\ubcf4 \uc720\uc9c0"},{"location":"search-engine/OpenSearch/Vector%20Search/%EB%B2%A1%ED%84%B0%20%EC%9C%A0%EC%82%AC%EB%8F%84%20%EA%B3%84%EC%82%B0%EC%9D%84%20%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A1%9C%28Painless%20Scripting%20Extension%29/","title":"\ubca1\ud130 \uc720\uc0ac\ub3c4 \uacc4\uc0b0\uc744 \uc2a4\ud06c\ub9bd\ud2b8\ub85c(Painless Scripting Extension)","text":"<p>OpenSearch\ub294 <code>knn_vector</code> \ud544\ub4dc\uc5d0 \ub300\ud574 \ubca1\ud130 \uac70\ub9ac \uacc4\uc0b0 \ud568\uc218\ub97c Painless \uc2a4\ud06c\ub9bd\ud2b8 \ub0b4\uc5d0\uc11c \uc9c1\uc811 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub3c4\ub85d \ud655\uc7a5 \uae30\ub2a5\uc744 \uc81c\uacf5\ud55c\ub2e4. </p> <p>\uc774 \uae30\ub2a5\uc740 \uae30\uc874\uc758 <code>knn_score</code> \uc2a4\ud06c\ub9bd\ud2b8 \ub300\uc2e0 \ubcf4\ub2e4 \uc720\uc5f0\ud558\uace0 \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5 \uac00\ub2a5\ud55c \ubc29\uc2dd\uc73c\ub85c \ubca1\ud130 \uc720\uc0ac\ub3c4\ub97c \uacc4\uc0b0\ud560 \uc218 \uc788\uac8c \ud574\uc900\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/%EB%B2%A1%ED%84%B0%20%EC%9C%A0%EC%82%AC%EB%8F%84%20%EA%B3%84%EC%82%B0%EC%9D%84%20%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A1%9C%28Painless%20Scripting%20Extension%29/#1-painless","title":"1. Painless \ud655\uc7a5 \uae30\ub2a5\uc774\ub780?","text":"<p>\uae30\ubcf8\uc801\uc73c\ub85c OpenSearch\uc758 Painless \uc2a4\ud06c\ub9bd\ud2b8\ub294 \ubcf4\uc548\uc0c1\uc758 \uc774\uc720\ub85c \uc81c\ud55c\ub41c \ud568\uc218\ub9cc \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.  \ud558\uc9c0\ub9cc k-NN \ud50c\ub7ec\uadf8\uc778\uc744 \ud1b5\ud574 \ub2e4\uc74c\uacfc \uac19\uc740 \uac70\ub9ac/\uc720\uc0ac\ub3c4 \ud568\uc218\uac00 \ucd94\uac00\ub85c \uc9c0\uc6d0\ub41c\ub2e4.</p> \ud568\uc218\uba85 \uc124\uba85 <code>l2Squared()</code> L2 \uac70\ub9ac(\uc720\ud074\ub9ac\ub4dc \uac70\ub9ac)\uc758 \uc81c\uacf1 \uacc4\uc0b0 <code>l1Norm()</code> L1 \uac70\ub9ac(\ub9e8\ud574\ud2bc \uac70\ub9ac) \uacc4\uc0b0 <code>cosineSimilarity()</code> \ucf54\uc0ac\uc778 \uc720\uc0ac\ub3c4 \uacc4\uc0b0 <code>hamming()</code> \ud574\ubc0d \uac70\ub9ac \uacc4\uc0b0 (2.16 \uc774\uc0c1, binary \ud544\ub4dc\uc6a9)"},{"location":"search-engine/OpenSearch/Vector%20Search/%EB%B2%A1%ED%84%B0%20%EC%9C%A0%EC%82%AC%EB%8F%84%20%EA%B3%84%EC%82%B0%EC%9D%84%20%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A1%9C%28Painless%20Scripting%20Extension%29/#2","title":"2. \uae30\ubcf8 \uc0ac\uc6a9 \uc608\uc2dc","text":"<pre><code>GET my-knn-index-2/_search\n{\n  \"size\": 2,\n  \"query\": {\n    \"script_score\": {\n      \"query\": {\n        \"bool\": {\n          \"filter\": {\n            \"term\": { \"color\": \"BLUE\" }\n          }\n        }\n      },\n      \"script\": {\n        \"source\": \"1.0 + cosineSimilarity(params.query_value, doc[params.field])\",\n        \"params\": {\n          \"field\": \"my_vector\",\n          \"query_value\": [9.9, 9.9]\n        }\n      }\n    }\n  }\n}\n</code></pre> <ul> <li> <p><code>field</code>: <code>knn_vector</code> \ud0c0\uc785 \ud544\ub4dc</p> </li> <li> <p><code>query_value</code>: \ucffc\ub9ac \ubca1\ud130 (\ud544\ub4dc\uc640 \ub3d9\uc77c\ud55c \ucc28\uc6d0 \ud544\uc694)</p> </li> <li> <p><code>cosineSimilarity</code>, <code>l2Squared</code>, <code>l1Norm</code> \ub4f1\uc744 \ud65c\uc6a9\ud574 \uc720\uc0ac\ub3c4/\uac70\ub9ac \uacc4\uc0b0 \uac00\ub2a5</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/%EB%B2%A1%ED%84%B0%20%EC%9C%A0%EC%82%AC%EB%8F%84%20%EA%B3%84%EC%82%B0%EC%9D%84%20%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A1%9C%28Painless%20Scripting%20Extension%29/#3","title":"3. \uac01 \ud568\uc218 \uc124\uba85","text":"\ud568\uc218 \uc2dc\uadf8\ub2c8\ucc98 \uc124\uba85 <code>l2Squared</code> <code>float l2Squared(float[] query, doc['vec'])</code> \uc720\ud074\ub9ac\ub4dc \uac70\ub9ac\uc758 \uc81c\uacf1. \uac12\uc774 \uc791\uc744\uc218\ub85d \uc720\uc0ac. <code>l1Norm</code> <code>float l1Norm(float[] query, doc['vec'])</code> \ub9e8\ud574\ud2bc \uac70\ub9ac. <code>cosineSimilarity</code> <code>float cosineSimilarity(float[] query, doc['vec'])</code> \ucf54\uc0ac\uc778 \uc720\uc0ac\ub3c4. \uc77c\ubc18\uc801\uc73c\ub85c 0~1 \ubc94\uc704. <code>cosineSimilarity</code> (\ucd5c\uc801\ud654) <code>float cosineSimilarity(query, doc, norm)</code> \ucffc\ub9ac \ubca1\ud130\uc758 \ud06c\uae30\ub97c \ubcc4\ub3c4\ub85c \ub118\uaca8 \ubc18\ubcf5 \uacc4\uc0b0 \ubc29\uc9c0 <code>hamming</code> <code>float hamming(float[] query, doc['vec'])</code> \ud574\ubc0d \uac70\ub9ac. \ubca1\ud130 \uac12\uc774 \uc815\uc218\uc5ec\uc57c \ud558\uba70, binary \ub610\ub294 long \ud0c0\uc785 \uc9c0\uc6d0 (2.16+)"},{"location":"search-engine/OpenSearch/Vector%20Search/%EB%B2%A1%ED%84%B0%20%EC%9C%A0%EC%82%AC%EB%8F%84%20%EA%B3%84%EC%82%B0%EC%9D%84%20%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A1%9C%28Painless%20Scripting%20Extension%29/#4","title":"4. \uc608\uc678 \ubc0f \uc8fc\uc758\uc0ac\ud56d","text":"<ul> <li> <p>\ubca1\ud130 \ucc28\uc6d0\uc774 \ub2e4\ub974\uba74: <code>IllegalArgumentException</code> \ubc1c\uc0dd</p> </li> <li> <p>\ubca1\ud130 \ud544\ub4dc\uac00 \ube44\uc5b4 \uc788\uc73c\uba74: <code>IllegalStateException</code> \ubc1c\uc0dd     \u2192 \uc544\ub798\uc640 \uac19\uc774 size \uccb4\ud06c\ub85c \ud68c\ud53c \uac00\ub2a5:</p> </li> </ul> <pre><code>\"doc[params.field].size() == 0 ? 0 : 1 / (1 + l2Squared(params.query_value, doc[params.field]))\"\n</code></pre> <ul> <li>\ucf54\uc0ac\uc778 \uc720\uc0ac\ub3c4\ub294 0 \ubca1\ud130 \uc0ac\uc6a9 \uae08\uc9c0     \u2192 \ud06c\uae30\uac00 0\uc778 \ubca1\ud130\ub294 \uacc4\uc0b0 \ubd88\uac00 \u2192 \uc608\uc678 \ubc1c\uc0dd</li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/%EB%B2%A1%ED%84%B0%20%EC%9C%A0%EC%82%AC%EB%8F%84%20%EA%B3%84%EC%82%B0%EC%9D%84%20%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A1%9C%28Painless%20Scripting%20Extension%29/#5","title":"5. \uc2e4\uc804 \ud65c\uc6a9 \ud301","text":"<ul> <li> <p>\ud544\ud130 \uc870\uac74\uc774 \uc788\ub294 \ubca1\ud130 \uac80\uc0c9\uc5d0 \ub9e4\uc6b0 \uc720\uc6a9 (<code>bool</code> + <code>script_score</code> \uc870\ud569)</p> </li> <li> <p>\ubca1\ud130 \uac04 \uac70\ub9ac\ub97c \uae30\ubc18\uc73c\ub85c \ucee4\uc2a4\ud140 \ub7ad\ud0b9 \uacc4\uc0b0 \ub85c\uc9c1 \uad6c\ud604 \uac00\ub2a5</p> </li> <li> <p><code>cosineSimilarity</code>\ub294 \uc790\uc8fc \uc4f0\uc774\ub294 \uacbd\uc6b0 norm \ubbf8\ub9ac \uacc4\uc0b0\ud558\uc5ec \uc18d\ub3c4 \uac1c\uc120 \uac00\ub2a5</p> </li> <li> <p>\uc2a4\ucf54\uc5b4\uac00 <code>0~1</code> \ubc94\uc704\ub85c \uc81c\ud55c\ub418\uc9c0 \uc54a\uc73c\ubbc0\ub85c \uacb0\uacfc \uc815\uaddc\ud654 \ud544\uc694 \uc2dc \uc218\uc2dd \ucd94\uac00</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/%EB%B2%A1%ED%84%B0%20%EC%9C%A0%EC%82%AC%EB%8F%84%20%EA%B3%84%EC%82%B0%EC%9D%84%20%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A1%9C%28Painless%20Scripting%20Extension%29/#_1","title":"\ub9c8\ubb34\ub9ac","text":"<p>OpenSearch\uc758 Painless \uc2a4\ud06c\ub9bd\ud305 \ud655\uc7a5 \uae30\ub2a5\uc740 \ub2e8\uc21c\ud55c \ubca1\ud130 \uac80\uc0c9\uc744 \ub118\uc5b4\uc11c \ubcf5\uc7a1\ud55c \ub7ad\ud0b9 \ub85c\uc9c1, \uc870\uac74\ubd80 \ubca1\ud130 \uc2a4\ucf54\uc5b4\ub9c1, \ucee4\uc2a4\ud140 \uc810\uc218 \uc870\uc815 \ub4f1\uc758 \uace0\uae09 \uae30\ub2a5 \uad6c\ud604\uc744 \uac00\ub2a5\ud558\uac8c \ud55c\ub2e4.</p> <p>Approximate k-NN\uc774\ub098 <code>knn_score</code> \uae30\ubc18 \uc2a4\ud06c\ub9bd\ud2b8\ubcf4\ub2e4 \ub354 \ub192\uc740 \uc720\uc5f0\uc131\uc774 \ud544\uc694\ud55c \uacbd\uc6b0\uc5d0 \uc801\uadf9 \ud65c\uc6a9\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8B%B1%20%EC%84%B1%EB%8A%A5%20%EC%B5%9C%EC%A0%81%ED%99%94%20%EA%B0%80%EC%9D%B4%EB%93%9C/","title":"\ubca1\ud130 \uc778\ub371\uc2f1 \uc131\ub2a5 \ucd5c\uc801\ud654 \uac00\uc774\ub4dc","text":"<p>\ubca1\ud130 \uae30\ubc18 \uac80\uc0c9 \uc2dc\uc2a4\ud15c\uc5d0\uc11c\ub294 \ub300\ub7c9\uc758 \ubca1\ud130 \ub370\uc774\ud130\ub97c \ube60\ub974\uac8c \uc0c9\uc778\ud558\ub294 \uac83\uc774 \uc911\uc694\ud558\ub2e4. OpenSearch\ub294 \uc774\ub7ec\ud55c \uc791\uc5c5\uc758 \uc131\ub2a5\uc744 \ud5a5\uc0c1\uc2dc\ud0a4\uae30 \uc704\ud55c \ub2e4\uc591\ud55c \uc124\uc815\uc744 \uc81c\uacf5\ud55c\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8B%B1%20%EC%84%B1%EB%8A%A5%20%EC%B5%9C%EC%A0%81%ED%99%94%20%EA%B0%80%EC%9D%B4%EB%93%9C/#1-refresh-interval","title":"1. Refresh Interval \ube44\ud65c\uc131\ud654","text":"<ul> <li> <p>\uae30\ubcf8\uac12: <code>1\ucd08\ub9c8\ub2e4</code> \uc778\ub371\uc2a4\uac00 \uc790\ub3d9\uc73c\ub85c refresh</p> </li> <li> <p>\ub300\ub7c9 \uc0c9\uc778 \uc2dc, \uc5ec\ub7ec \uac1c\uc758 \uc791\uc740 \uc138\uadf8\uba3c\ud2b8\uac00 \uc0dd\uc131\ub418\uc5b4 \uc624\ubc84\ud5e4\ub4dc \uc99d\uac00</p> </li> <li> <p>\uc0c9\uc778 \uc911\uc5d0\ub294 refresh\ub97c \ube44\ud65c\uc131\ud654\ud558\uace0 \uc644\ub8cc \ud6c4 \uc7ac\ud65c\uc131\ud654 \uad8c\uc7a5</p> </li> </ul> <pre><code># \ube44\ud65c\uc131\ud654\nPUT /&lt;index_name&gt;/_settings\n{\n  \"index\": {\n    \"refresh_interval\": \"-1\"\n  }\n}\n\n# \uc0c9\uc778 \uc644\ub8cc \ud6c4 \ubcf5\uc6d0\nPUT /&lt;index_name&gt;/_settings\n{\n  \"index\": {\n    \"refresh_interval\": \"1s\"\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8B%B1%20%EC%84%B1%EB%8A%A5%20%EC%B5%9C%EC%A0%81%ED%99%94%20%EA%B0%80%EC%9D%B4%EB%93%9C/#2-replica-0","title":"2. Replica \uc218 0\uc73c\ub85c \uc124\uc815","text":"<ul> <li> <p>\uc0c9\uc778 \uc911\uc5d0\ub294 Replica\ub97c 0\uc73c\ub85c \uc124\uc815\ud574 \ubd88\ud544\uc694\ud55c \ubcf5\uc81c \uc778\ub371\uc2a4 \uc0dd\uc131 \ubc29\uc9c0</p> </li> <li> <p>\uc0c9\uc778 \uc644\ub8cc \ud6c4 Replicas\ub97c \ub2e4\uc2dc \uc124\uc815\ud558\uba74 \uc778\ub371\uc2a4\uac00 \ubcf5\uc81c\ub420 \ub54c \ubca1\ud130 \uc778\ub371\uc2a4\ub3c4 \ud568\uaed8 \ubcf5\uc0ac</p> </li> </ul> <pre><code>PUT /&lt;index_name&gt;/_settings\n{\n  \"index\": {\n    \"number_of_replicas\": 0\n  }\n}\n</code></pre> <p>\u26a0\ufe0f \uc7a5\uc560 \uc2dc \ub370\uc774\ud130 \uc190\uc2e4 \ubc29\uc9c0\ub97c \uc704\ud574 \uc678\ubd80 \ubc31\uc5c5 \uad8c\uc7a5</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8B%B1%20%EC%84%B1%EB%8A%A5%20%EC%B5%9C%EC%A0%81%ED%99%94%20%EA%B0%80%EC%9D%B4%EB%93%9C/#3","title":"3. \uc0c9\uc778 \uc2a4\ub808\ub4dc \uc218 \uc99d\uac00","text":"<ul> <li><code>index_thread_qty</code>\ub97c \ud1b5\ud574 \ubcd1\ub82c \uc0c9\uc778 \uc791\uc5c5 \uc218\ud589 \uac00\ub2a5</li> </ul> <p>\uc124\uc815\uac12 \uc608\uc2dc </p><pre><code>PUT /_cluster/settings\n{\n  \"persistent\": {\n    \"knn.algo_param.index_thread_qty\": 4\n  }\n}\n</code></pre><p></p> <p>CPU \uc0ac\uc6a9\ub960\uc744 \ubaa8\ub2c8\ud130\ub9c1\ud558\uba70 \uc801\uc808\ud55c \uac12\uc73c\ub85c \uc870\uc815</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8B%B1%20%EC%84%B1%EB%8A%A5%20%EC%B5%9C%EC%A0%81%ED%99%94%20%EA%B0%80%EC%9D%B4%EB%93%9C/#4-opensearch-30-derived-vector-source","title":"4. (OpenSearch 3.0+) Derived Vector Source\ub85c \uc800\uc7a5 \uacf5\uac04 \uc808\uc57d","text":"<ul> <li> <p>\ubca1\ud130 \ud544\ub4dc\ub97c <code>_source</code>\uc5d0 \uc800\uc7a5\ud558\uc9c0 \uc54a\uace0\ub3c4 \uac80\uc0c9 \uae30\ub2a5 \uc720\uc9c0</p> </li> <li> <p>\uae30\ubcf8\uac12: \ud65c\uc131\ud654\ub428</p> </li> <li> <p>\uc7a5\uc810</p> <ul> <li> <p>\uc800\uc7a5 \uc6a9\ub7c9 \uc808\uc57d</p> </li> <li> <p><code>update</code>, <code>update_by_query</code>, <code>reindex</code> \ubaa8\ub450 \uac00\ub2a5</p> </li> </ul> </li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8B%B1%20%EC%84%B1%EB%8A%A5%20%EC%B5%9C%EC%A0%81%ED%99%94%20%EA%B0%80%EC%9D%B4%EB%93%9C/#5","title":"5. (\uace0\uae09) \ubca1\ud130 \ub370\uc774\ud130 \uad6c\uc870 \uc9c0\uc5f0 \uc0dd\uc131 \uc804\ub7b5","text":""},{"location":"search-engine/OpenSearch/Vector%20Search/%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8B%B1%20%EC%84%B1%EB%8A%A5%20%EC%B5%9C%EC%A0%81%ED%99%94%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_1","title":"\uac1c\uc694","text":"<ul> <li> <p>\ubca1\ud130 \uac80\uc0c9\uc6a9 \ub370\uc774\ud130 \uad6c\uc870(HNSW \ub4f1)\ub294 \uc0c9\uc778 \uc2dc \uc790\ub3d9 \uc0dd\uc131\ub428</p> </li> <li> <p>\ub300\ub7c9 \ucd08\uae30 \uc5c5\ub85c\ub4dc \uc774\ud6c4 \uac80\uc0c9\ub9cc \uc218\ud589\ud558\ub294 \uacbd\uc6b0, \uc774 \uad6c\uc870 \uc0dd\uc131\uc744 \ub098\uc911\uc5d0 \uc218\ud589\ud558\uba74 \uc18d\ub3c4 \uac1c\uc120 \uac00\ub2a5</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Vector%20Search/%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8B%B1%20%EC%84%B1%EB%8A%A5%20%EC%B5%9C%EC%A0%81%ED%99%94%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_2","title":"\ub2e8\uacc4\ubcc4 \uad6c\uc131","text":""},{"location":"search-engine/OpenSearch/Vector%20Search/%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8B%B1%20%EC%84%B1%EB%8A%A5%20%EC%B5%9C%EC%A0%81%ED%99%94%20%EA%B0%80%EC%9D%B4%EB%93%9C/#1","title":"1. \uc0c9\uc778 \uc2dc \ubca1\ud130 \uad6c\uc870 \uc0dd\uc131 \ube44\ud65c\uc131\ud654","text":"<pre><code>PUT /test-index/\n{\n  \"settings\": {\n    \"index.knn.advanced.approximate_threshold\": \"-1\"\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8B%B1%20%EC%84%B1%EB%8A%A5%20%EC%B5%9C%EC%A0%81%ED%99%94%20%EA%B0%80%EC%9D%B4%EB%93%9C/#2-bulk","title":"2. Bulk \uc0c9\uc778 \uc218\ud589","text":"<pre><code>POST _bulk\n{ \"index\": { \"_index\": \"test-index\", \"_id\": \"1\" } }\n{ \"my_vector1\": [1.5, 2.5], \"price\": 12.2 }\n...\n</code></pre> <p>\u26a0\ufe0f \uc774 \uc0c1\ud0dc\uc5d0\uc11c \uac80\uc0c9\ud558\uba74 \uc815\ud655\ud55c k-NN \ubc29\uc2dd\uc73c\ub85c \uc218\ud589\ub428 (\ub290\ub9bc)</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8B%B1%20%EC%84%B1%EB%8A%A5%20%EC%B5%9C%EC%A0%81%ED%99%94%20%EA%B0%80%EC%9D%B4%EB%93%9C/#3_1","title":"3. \ubca1\ud130 \uad6c\uc870 \uc0dd\uc131 \ud65c\uc131\ud654","text":"<pre><code>PUT /test-index/_settings\n{\n  \"index.knn.advanced.approximate_threshold\": \"0\"\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Vector%20Search/%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8B%B1%20%EC%84%B1%EB%8A%A5%20%EC%B5%9C%EC%A0%81%ED%99%94%20%EA%B0%80%EC%9D%B4%EB%93%9C/#4-force-merge-1","title":"4. Force Merge \uc218\ud589 (\uc138\uadf8\uba3c\ud2b8 1\uac1c\ub85c \ud1b5\ud569)","text":"<pre><code>POST /test-index/_forcemerge?max_num_segments=1\n</code></pre> <p>\uc774\ud6c4 \uc0dd\uc131\ub41c \ubca1\ud130 \uad6c\uc870\ub97c \ud1b5\ud574 \ube60\ub978 \uadfc\uc0ac \uac80\uc0c9\uc774 \uac00\ub2a5</p>"},{"location":"search-engine/OpenSearch/Vector%20Search/%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8B%B1%20%EC%84%B1%EB%8A%A5%20%EC%B5%9C%EC%A0%81%ED%99%94%20%EA%B0%80%EC%9D%B4%EB%93%9C/#_3","title":"\uc815\ub9ac: \uc131\ub2a5 \ud29c\ub2dd \uccb4\ud06c\ub9ac\uc2a4\ud2b8","text":"\ud56d\ubaa9 \uc124\uba85 Refresh Interval \ube44\ud65c\uc131\ud654 \uc0c9\uc778 \uc911 \uc791\uc740 \uc138\uadf8\uba3c\ud2b8 \uc0dd\uc131 \ubc29\uc9c0 Replica 0 \uc124\uc815 \ubcf5\uc81c \uc778\ub371\uc2a4 \uc0dd\uc131 \uc624\ubc84\ud5e4\ub4dc \uc81c\uac70 \uc0c9\uc778 \uc2a4\ub808\ub4dc \uc218 \uc870\uc808 \ubcd1\ub82c \uc778\ub371\uc2f1 \ucd5c\uc801\ud654 Derived Source \uc0ac\uc6a9 \uc800\uc7a5 \uacf5\uac04 \uc808\uac10 \ubca1\ud130 \uad6c\uc870 \uc9c0\uc5f0 \uc0dd\uc131 Bulk \uc778\ub371\uc2f1 \uc18d\ub3c4 \ud5a5\uc0c1 + \ud6a8\uc728\uc801 \uac80\uc0c9 \uad6c\uc131"},{"location":"search-engine/OpenSearch/Version%20history/3.0.0/%EC%9A%94%EC%95%BD/","title":"OpenSearch 3.0.0 \ub9b4\ub9ac\uc988 \ud558\uc774\ub77c\uc774\ud2b8 \u2013 \uc131\ub2a5, \ubca1\ud130 \uac80\uc0c9, \ubcf4\uc548, AI \uae30\ub2a5 \ub300\ud3ed \uac15\ud654","text":""},{"location":"search-engine/OpenSearch/Version%20history/3.0.0/%EC%9A%94%EC%95%BD/#opensearch-300-ai","title":"OpenSearch 3.0.0 \ub9b4\ub9ac\uc988 \ud558\uc774\ub77c\uc774\ud2b8 \u2013 \uc131\ub2a5, \ubca1\ud130 \uac80\uc0c9, \ubcf4\uc548, AI \uae30\ub2a5 \ub300\ud3ed \uac15\ud654","text":"<p>OpenSearch 3.0\uc740 \uac80\uc0c9, \ubd84\uc11d, \ubaa8\ub2c8\ud130\ub9c1 \ubc0f AI \uae30\ubc18 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc704\ud55c \uace0\uc131\ub2a5 \ub370\uc774\ud130 \ud50c\ub7ab\ud3fc\uc73c\ub85c \uac70\ub4ed\ub0ac\uc2b5\ub2c8\ub2e4. \uc774 \ubc84\uc804\uc5d0\uc11c\ub294 \ubc94\uc6a9 \uc131\ub2a5 \ud5a5\uc0c1, \ubca1\ud130 \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uae30\ub2a5 \uac1c\uc120, \ubcf4\uc548 \ud504\ub808\uc784\uc6cc\ud06c \uad50\uccb4, AI \uc5f0\ub3d9\uc131 \uac15\ud654 \ub4f1 \ub2e4\uc591\ud55c \uc601\uc5ed\uc5d0 \uac78\uccd0 \ub300\uaddc\ubaa8 \uac1c\uc120\uc774 \uc774\ub8e8\uc5b4\uc84c\uc2b5\ub2c8\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Version%20history/3.0.0/%EC%9A%94%EC%95%BD/#_1","title":"\uc8fc\uc694 \uae30\ub2a5 \uc694\uc57d","text":""},{"location":"search-engine/OpenSearch/Version%20history/3.0.0/%EC%9A%94%EC%95%BD/#_2","title":"\uc131\ub2a5 \ud5a5\uc0c1","text":"<ul> <li> <p>Range Query \uc131\ub2a5 \ud5a5\uc0c1     \uc22b\uc790 \ubc0f \ub0a0\uc9dc \ud544\ub4dc\uc5d0 \ucd5c\uc801\ud654 \uc804\ub7b5 \uc801\uc6a9 \u2192 \ucd5c\ub300 25% \uc131\ub2a5 \ud5a5\uc0c1 (Big5 \ubca4\uce58\ub9c8\ud06c \uae30\uc900)</p> </li> <li> <p>\uace0\uce74\ub514\ub110\ub9ac\ud2f0 \ucffc\ub9ac \ucd5c\uc801\ud654     cardinality aggregation\uc5d0 \uc2e4\ud589 \ud78c\ud2b8 \ucd94\uac00 \u2192 p90 \ucffc\ub9ac \uc9c0\uc5f0 75% \uac10\uc18c</p> </li> <li> <p>k-NN \ub3d9\uc2dc \uc138\uadf8\uba3c\ud2b8 \uac80\uc0c9 \uae30\ubcf8 \ud65c\uc131\ud654     \u2192 \ucd5c\ub300 2.5\ubc30 \ube60\ub978 \ubca1\ud130 \uac80\uc0c9</p> </li> <li> <p>Cold Start \uac1c\uc120     k-NN \ubca1\ud130\uc5d0 \ub300\ud55c derived source \ub3c4\uc785 \u2192 \ucd5c\ub300 30\ubc30 \ube60\ub978 \ucffc\ub9ac \uc751\ub2f5, 3\ubc30 \uc800\uc7a5 \uacf5\uac04 \uc808\uac10</p> </li> <li> <p>Star-tree Index \uae30\ub2a5 \ud655\uc7a5     metric aggregation\uacfc filter \uc9c0\uc6d0 \u2192 \ucd5c\ub300 100\ubc30\uc758 \ucffc\ub9ac \uc791\uc5c5\ub7c9 \uac10\uc18c</p> </li> <li> <p>Date Histogram \ucd5c\uc801\ud654     filter rewrite \uc131\ub2a5 \ud5a5\uc0c1\uc73c\ub85c multi-level \uc9d1\uacc4\uc5d0\ub3c4 \ub300\uc751</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Version%20history/3.0.0/%EC%9A%94%EC%95%BD/#ai","title":"AI \ubc0f \uc2dc\ub9e8\ud2f1 \uac80\uc0c9 \uae30\ub2a5","text":"<ul> <li> <p>Semantic Sentence Highlighting     \uc758\ubbf8 \uae30\ubc18 \ubb38\uc7a5 \uac15\uc870 \uae30\ub2a5 \u2192 \uac80\uc0c9 \uacb0\uacfc\uc5d0 \uc5f0\uad00 \ubb38\uc7a5\uc744 \uc790\ub3d9 \ud558\uc774\ub77c\uc774\ud305</p> </li> <li> <p>Z-score \uc815\uaddc\ud654 &amp; \ucd5c\uc18c\uac12 \uae30\ubc18 \uc815\uaddc\ud654     \ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9\uc5d0\uc11c outlier\ub97c \uc815\uaddc\ud654\ud558\uc5ec \ub354 \uc548\uc815\uc801\uc778 \uc810\uc218 \uacc4\uc0b0</p> </li> <li> <p>Neural Search \uac1c\uc120     embedding \ucd5c\uc801\ud654, inner_hits \uc9c0\uc6d0, sparse encoding \uac1c\uc120 \ub4f1</p> </li> <li> <p>MCP (Model Context Protocol) \uc5f0\ub3d9 \uc2e4\ud5d8\uc801 \ub3c4\uc785     \uc678\ubd80 AI \uc5d0\uc774\uc804\ud2b8(\uc608: OpenAI, LangChain \ub4f1)\uc640\uc758 \uc5f0\ub3d9 \uac00\ub2a5</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Version%20history/3.0.0/%EC%9A%94%EC%95%BD/#opensearch-dashboards","title":"OpenSearch Dashboards \uac1c\uc120","text":"<ul> <li> <p>Query Insights     \uc2e4\uc2dc\uac04 live query API, verbose mode, \ub3d9\uc801 \uceec\ub7fc \uc81c\uacf5</p> </li> <li> <p>PPL (Piped Processing Language)     lookup, join, subsearch \uba85\ub839\uc5b4 \ucd94\uac00 \u2192 \ub85c\uadf8 \uc0c1\uad00 \ubd84\uc11d \ud5a5\uc0c1</p> </li> <li> <p>Observability \uac1c\uc120     Anomaly Detection\uc5d0\uc11c Discover\uc640 \uc5f0\ub3d9\ud574 \uc774\uc0c1 \ud0d0\uc9c0 \uc2dc \ubc14\ub85c \ub85c\uadf8 \ud655\uc778 \uac00\ub2a5</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Version%20history/3.0.0/%EC%9A%94%EC%95%BD/#_3","title":"\ubcf4\uc548 \uae30\ub2a5 \ub300\ud3ed \uac1c\uc120","text":"<ul> <li> <p>Java Security Manager \uc81c\uac70 \u2192 Java Agent \uae30\ubc18 \ubcf4\uc548 \ud504\ub808\uc784\uc6cc\ud06c \ub3c4\uc785</p> <ul> <li> <p>\ud2b9\uad8c \uc561\uc158 \ud638\ucd9c \uac10\uc9c0 \ubc0f \uac80\uc99d</p> </li> <li> <p>\ub3d9\uc77c\ud55c \uc815\ucc45 \ud30c\uc77c \ubc29\uc2dd \uc0ac\uc6a9</p> </li> </ul> </li> <li> <p>Privilege \ud3c9\uac00 \ucd5c\uc801\ud654</p> <ul> <li> <p>\ubcf4\uc548 \ud074\ub7ec\uc2a4\ud130 \uc131\ub2a5 \ud5a5\uc0c1</p> </li> <li> <p>\uc9c1\ub82c\ud654 \ube44\uc6a9 \uac10\uc18c</p> </li> </ul> </li> <li> <p>PGP \ud0a4 \uac31\uc2e0 (\uc720\ud6a8: 2027\ub144 3\uc6d4 6\uc77c\uae4c\uc9c0)</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Version%20history/3.0.0/%EC%9A%94%EC%95%BD/#_4","title":"\ub370\uc774\ud130 \uad00\ub9ac \ubc0f \uc778\ub371\uc2f1","text":"<ul> <li> <p>Remote Store \ubd84\ub9ac \ucc98\ub9ac     \uc778\ub371\uc2f1 \ud2b8\ub798\ud53d\uacfc \uac80\uc0c9 \ud2b8\ub798\ud53d \ubd84\ub9ac \uac00\ub2a5 \u2192 \ub3c5\ub9bd\uc801 \uc2a4\ucf00\uc77c\ub9c1 \ubc0f \uc7a5\uc560 \uaca9\ub9ac</p> </li> <li> <p>_scale API \ub3c4\uc785     write-once-read-many \ud328\ud134\uc5d0\uc11c index\ub97c read-only \uc0c1\ud0dc\ub85c \uc804\ud658 \uac00\ub2a5</p> </li> <li> <p>\ub178\ub4dc \uc218\uc900 Circuit Breaker \uc124\uc815     k-NN \ud658\uacbd\uc5d0\uc11c \ud558\ub4dc\uc6e8\uc5b4 \ubcc4 \uba54\ubaa8\ub9ac \ud55c\uacc4 \ub9de\ucda4 \uc124\uc815 \uc9c0\uc6d0</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Version%20history/3.0.0/%EC%9A%94%EC%95%BD/#experimental","title":"\uc2e4\ud5d8\uc801 \uae30\ub2a5 (Experimental)","text":"<ul> <li> <p>GPU \uac00\uc18d \ubca1\ud130 \uc778\ub371\uc2f1/\uac80\uc0c9     \ucd5c\ub300 9.3\ubc30 \ube60\ub978 \uc778\ub371\uc2f1, 3.75\ubc30 \ube44\uc6a9 \uc808\uac10</p> </li> <li> <p>gRPC + protobuf \uc804\uc1a1 \ud504\ub85c\ud1a0\ucf5c     JSON \ub300\ube44 \uc9c1\ub82c\ud654 \ube44\uc6a9 \uac10\uc18c, \uace0\uc131\ub2a5 \ud1b5\uc2e0 \uac00\ub2a5</p> </li> <li> <p>Pull-based ingestion     Kafka, Kinesis \ub4f1\uc5d0\uc11c \uc9c1\uc811 \ub370\uc774\ud130 \uc218\uc2e0 \uac00\ub2a5 (\uc5ed\ubc29\ud5a5 \uc218\uc9d1)</p> </li> <li> <p>\uacc4\ud68d-\uc2e4\ud589-\ubc18\uc601 Agent (plan-execute-reflect)     \ubb38\uc81c \ud574\uacb0\uc744 \uc704\ud55c \uc790\uc728 \uc5d0\uc774\uc804\ud2b8 \ud504\ub808\uc784\uc6cc\ud06c \ub3c4\uc785</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Version%20history/3.0.0/%EC%9A%94%EC%95%BD/#breaking-changes","title":"\uc8fc\uc694 \ubcc0\uacbd \uc0ac\ud56d (Breaking Changes)","text":"<ul> <li> <p>Lucene 10.1 \uc5c5\uadf8\ub808\uc774\ub4dc</p> </li> <li> <p>JDK 21 \uc774\uc0c1 \ud544\uc218</p> </li> <li> <p>Security Manager \uc81c\uac70 \u2192 Java Agent \ub300\uccb4</p> </li> <li> <p>Bulk API\uc5d0\uc11c _id \uae38\uc774 \uc81c\ud55c (512 bytes)</p> </li> <li> <p>mmap.extensions, transport-nio plugin \uc81c\uac70</p> </li> <li> <p>CamelCase PathHierarchy tokenizer \uc0ac\uc6a9 \uc911\ub2e8 \uc608\uc815</p> </li> <li> <p>\ub9ce\uc740 API \ubc0f \uc124\uc815 \uba85\uce6d \ubcc0\uacbd \ub610\ub294 \uc81c\uac70</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Version%20history/3.0.0/%EC%9A%94%EC%95%BD/#_5","title":"\uc9c0\uc6d0 \uc911\ub2e8 \ubc0f \uc774\uc804 \uacf5\uc9c0","text":"<ul> <li> <p>Ubuntu 20.04 \uc9c0\uc6d0 \uc885\ub8cc \uc608\uc815 (2025\ub144 4\uc6d4 \uc774\ud6c4 EOL)</p> </li> <li> <p>Amazon Linux 2 \uc9c0\uc6d0 \uc885\ub8cc \uc608\uc815 (Node.js 18 EOL \ub300\uc751)</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Version%20history/3.0.0/%EC%9A%94%EC%95%BD/#pgp","title":"PGP \ud0a4 \ubcc0\uacbd \uc548\ub0b4","text":"<ul> <li> <p>\uc0c8 \ud0a4: <code>release@opensearch.org</code> (OpenSearch 3.0.0 \uc774\uc0c1)</p> </li> <li> <p>\uae30\uc874 \ud0a4(<code>opensearch@amazon.com</code>)\ub294 2.x \ub9b4\ub9ac\uc988\uc5d0\ub9cc \uc0ac\uc6a9</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Version%20history/3.0.0/%EC%9A%94%EC%95%BD/#_6","title":"\uc815\ub9ac","text":"\uc601\uc5ed \uc8fc\uc694 \uac1c\uc120 \uc0ac\ud56d \uac80\uc0c9 \uc131\ub2a5 k-NN, Range Query, Star-tree, Cold Start \uac1c\uc120 AI \ud1b5\ud569 MCP \uc5f0\ub3d9, \uc2dc\ub9e8\ud2f1 \ud558\uc774\ub77c\uc774\ud305, \ud558\uc774\ube0c\ub9ac\ub4dc \uc815\uaddc\ud654 \ubcf4\uc548 Java Agent \uae30\ubc18 \ubcf4\uc548 \ud504\ub808\uc784\uc6cc\ud06c, \uad8c\ud55c \ucc98\ub9ac \ucd5c\uc801\ud654 \ub300\uc2dc\ubcf4\ub4dc Query Insights, PPL \uac15\ud654, Anomaly \ub85c\uadf8 \uc5f0\ub3d9 \uc2e4\ud5d8 \uae30\ub2a5 GPU \uac00\uc18d, gRPC, pull-based ingestion \ub4f1"},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/Star-tree%20Index/","title":"Star tree Index","text":"<p>\uc9d1\uacc4(Aggregation)\ub294 \ub370\uc774\ud130 \uaddc\ubaa8\uac00 \ucee4\uc9c8\uc218\ub85d \uc9d1\uacc4 \uc131\ub2a5\uc740 \uae09\uaca9\ud788 \uc800\ud558\ub418\uba70, \uc774\ub85c \uc778\ud574 \ucffc\ub9ac \uc9c0\uc5f0(latency)\uacfc \ub9ac\uc18c\uc2a4 \uc18c\ube44\uac00 \uc99d\uac00\ud558\ub294 \ubb38\uc81c\uac00 \uc788\uc2b5\ub2c8\ub2e4. \uc774\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574 OpenSearch 2.18\ubd80\ud130 \uc2e0\uaddc \uae30\ub2a5\uc778 Star-tree Index\uac00 \uc2e4\ud5d8\uc801\uc73c\ub85c \ub3c4\uc785\ub418\uc5c8\uc2b5\ub2c8\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/Star-tree%20Index/#star-tree-index","title":"Star-tree Index\ub780?","text":"<p>Star-tree Index\ub294 \ubbf8\ub9ac \uc9d1\uacc4\ub41c(Aggregated) \uac12\uc744 \ub2e4\uc591\ud55c \ucc28\uc6d0 \uc870\ud569\uc5d0 \ub530\ub77c \uc800\uc7a5\ud558\ub294 \uc778\ub371\uc2a4 \uad6c\uc870\uc785\ub2c8\ub2e4. \uae30\uc874\uc5d0\ub294 \ucffc\ub9ac \uc2dc\uc810\uc5d0 \uc9d1\uacc4\ub97c \uc218\ud589\ud588\uc9c0\ub9cc, Star-tree\ub294 \uc778\ub371\uc2f1 \uc2dc\uc810\uc5d0 \uac01 \uc870\ud569\ubcc4 \uc9d1\uacc4\ub97c \ubbf8\ub9ac \uacc4\uc0b0\ud574 \uc800\uc7a5\ud558\ubbc0\ub85c, \uac80\uc0c9 \ucffc\ub9ac \uc2dc \ube60\ub974\uac8c \uc751\ub2f5\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/Star-tree%20Index/#_1","title":"\uc8fc\uc694 \ud2b9\uc9d5","text":"<ul> <li> <p>\uba40\ud2f0 \ud544\ub4dc \uc9d1\uacc4 \ucd5c\uc801\ud654: \uc5ec\ub7ec \ud544\ub4dc\uc758 \uc870\ud569\uc5d0 \ub300\ud55c \uc9d1\uacc4\ub3c4 \ud6a8\uc728\uc801\uc73c\ub85c \ucc98\ub9ac</p> </li> <li> <p>\uc2e4\uc2dc\uac04 \ub3d9\uc791: \uc778\ub371\uc2f1 \uc911 segment flush/refresh \uc2dc\ub9c8\ub2e4 star-tree \uad6c\uc870 \uc0dd\uc131</p> </li> <li> <p>\ucffc\ub9ac \ubb38\ubc95 \ubcc0\uacbd \uc5c6\uc74c: \uae30\uc874 \ucffc\ub9ac \uadf8\ub300\ub85c \uc0ac\uc6a9 \uac00\ub2a5\ud558\uba70, \uc790\ub3d9 \ucd5c\uc801\ud654 \uc801\uc6a9</p> </li> <li> <p>\ud398\uc774\uc9d5 \ubc0f \ub514\uc2a4\ud06c I/O \ud6a8\uc728 \ud5a5\uc0c1: \uc801\uc740 \ub9ac\ud504 \ud0d0\uc0c9\uc73c\ub85c \ube60\ub978 \uc751\ub2f5 \uac00\ub2a5</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/Star-tree%20Index/#star-tree-index_1","title":"Star-tree Index \uad6c\uc870","text":"<p>Star-tree\ub294 \ud2b8\ub9ac \ud615\ud0dc\ub85c \uad6c\uc131\ub418\uba70, \ub2e4\uc74c\uacfc \uac19\uc740 \uad6c\uc131\uc694\uc18c\ub97c \ud3ec\ud568\ud569\ub2c8\ub2e4:</p>"},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/Star-tree%20Index/#dimension-ordered_dimensions","title":"Dimension \ub178\ub4dc (ordered_dimensions)","text":"<ul> <li> <p>\uc608: <code>status</code>, <code>port</code>, <code>method</code></p> </li> <li> <p>\ud2b8\ub9ac\uc758 \uacbd\ub85c\ub97c \uad6c\uc131\ud558\ub294 \ud544\ub4dc\ub4e4</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/Star-tree%20Index/#metric-metrics","title":"Metric \ub178\ub4dc (metrics)","text":"<ul> <li> <p>\uc608: <code>sum(size)</code>, <code>avg(latency)</code></p> </li> <li> <p>\ub9ac\ud504 \ub178\ub4dc\uc5d0 \uc800\uc7a5\ub418\ub294 \uc0ac\uc804 \uacc4\uc0b0\ub41c \uac12\ub4e4</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/Star-tree%20Index/#star","title":"Star \ub178\ub4dc (<code>*</code>)","text":"<ul> <li> <p>\ud2b9\uc815 \ucc28\uc6d0\uc5d0 \ub300\ud574 \ubaa8\ub4e0 \uac12\uc744 \uc9d1\uacc4\ud55c \ub178\ub4dc</p> </li> <li> <p>\ucffc\ub9ac \uc870\uac74\uc774 \uc5c6\ub294 \ucc28\uc6d0\uc744 \uac74\ub108\ub6f8 \uc218 \uc788\ub3c4\ub85d \ucd5c\uc801\ud654</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/Star-tree%20Index/#leaf","title":"Leaf \ub178\ub4dc","text":"<ul> <li> <p>\uc9c0\uc815\ub41c \uc870\ud569\uc5d0 \ub300\ud55c \ucd5c\uc885 metric \uac12 \uc800\uc7a5</p> </li> <li> <p><code>max_leaf_docs</code> \uac12\uc73c\ub85c \ubb38\uc11c \uc218 \uc81c\ud55c \uac00\ub2a5</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/Star-tree%20Index/#_2","title":"\uc124\uc815 \uc608\uc2dc","text":"<pre><code>PUT /logs\n{\n  \"settings\": {\n    \"index.composite_index\": true,\n    \"index.append_only.enabled\": true\n  },\n  \"mappings\": {\n    \"composite\": {\n      \"request_aggs\": {\n        \"type\": \"star_tree\",\n        \"config\": {\n          \"ordered_dimensions\": [\n            { \"name\": \"status\" },\n            { \"name\": \"port\" },\n            { \"name\": \"method\" }\n          ],\n          \"metrics\": [\n            { \"name\": \"size\", \"stats\": [\"sum\"] },\n            { \"name\": \"latency\", \"stats\": [\"avg\"] }\n          ],\n          \"date_dimension\": {\n            \"name\": \"@timestamp\",\n            \"calendar_intervals\": [\"month\", \"day\"]\n          }\n        }\n      }\n    },\n    \"properties\": {\n      \"status\": { \"type\": \"integer\" },\n      \"port\": { \"type\": \"integer\" },\n      \"method\": { \"type\": \"keyword\" },\n      \"size\": { \"type\": \"integer\" },\n      \"latency\": { \"type\": \"scaled_float\", \"scaling_factor\": 10 }\n    }\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/Star-tree%20Index/#_3","title":"\ucffc\ub9ac \uc608\uc2dc \ubc0f \ucd5c\uc801\ud654 \ubc29\uc2dd","text":"<p>\ucffc\ub9ac\ub294 \uae30\uc874 OpenSearch \ucffc\ub9ac\uc640 \ub3d9\uc77c\ud558\uba70, star-tree\uac00 \uc790\ub3d9 \uc801\uc6a9\ub429\ub2c8\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/Star-tree%20Index/#1","title":"1. \ub2e8\uc77c \uc870\uac74 \uc9d1","text":"<pre><code>{\n  \"query\": { \"term\": { \"status\": 500 } },\n  \"aggs\": { \"sum_size\": { \"sum\": { \"field\": \"size\" } } }\n}\n</code></pre> <p>\u2192 <code>status=500</code> \ub178\ub4dc\uc5d0 \ubbf8\ub9ac \uc800\uc7a5\ub41c \uac12\uc5d0\uc11c <code>sum(size)</code>\ub97c \uc989\uc2dc \ubc18\ud658</p>"},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/Star-tree%20Index/#2","title":"2. \ub0a0\uc9dc \uae30\ubc18 \uc9d1\uacc4","text":"<pre><code>{\n  \"size\": 0,\n  \"query\": { \"range\": { \"status\": { \"gte\": \"200\", \"lte\": \"400\" } } },\n  \"aggs\": {\n    \"by_month\": {\n      \"date_histogram\": {\n        \"field\": \"@timestamp\",\n        \"calendar_interval\": \"month\"\n      },\n      \"aggs\": {\n        \"sum_size\": {\n          \"sum\": {\n            \"field\": \"size\"\n          }\n        }\n      }\n    }\n  }\n}\n</code></pre> <p>\u2192 \uc6d4 \ub2e8\uc704\ub85c <code>status</code> \ud544\ud130\ub97c \uc801\uc6a9\ud55c <code>sum(size)</code>\ub97c \ube60\ub974\uac8c \ubc18\ud658</p>"},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/Star-tree%20Index/#3-terms","title":"3. Terms \uc9d1\uacc4","text":"<pre><code>{\n  \"aggs\": {\n    \"users\": {\n      \"terms\": {\n        \"field\": \"user_id\"\n      }\n    }\n  }\n}\n</code></pre> <p>\u2192 <code>user_id</code>\uac00 dimension\uc5d0 \ud3ec\ud568\ub41c \uacbd\uc6b0 star-tree\ub85c \ucd5c\uc801\ud654</p>"},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/Star-tree%20Index/#4-range","title":"4. Range \uc9d1\uacc4","text":"<pre><code>{\n  \"aggs\": {\n    \"price_ranges\": {\n      \"range\": {\n        \"field\": \"price\",\n        \"ranges\": [\n          { \"to\": 100 },\n          { \"from\": 100, \"to\": 500 },\n          { \"from\": 500 }\n        ]\n      },\n      \"aggs\": {\n        \"total_quantity\": {\n          \"sum\": {\n            \"field\": \"quantity\"\n          }\n        }\n      }\n    }\n  }\n}\n</code></pre> <p>\u2192 \ubc94\uc704 \uae30\ubc18 \ubc84\ud0b7 \uc9d1\uacc4\ub3c4 star-tree\ub85c \ucc98\ub9ac \uac00\ub2a5</p>"},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/Star-tree%20Index/#_4","title":"\uc8fc\uc758\uc0ac\ud56d \ubc0f \uc81c\ud55c","text":"\ud56d\ubaa9 \uc81c\ud55c \ub0b4\uc6a9 \u274c \ubb38\uc11c \uc218\uc815/\uc0ad\uc81c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc74c (append-only \uc778\ub371\uc2a4 \ud544\uc694) \u274c _id\uc640 \uac19\uc740 \uace0\uc720 \ud544\ub4dc dimension\uc73c\ub85c \uc0ac\uc6a9 \uae08\uc9c0 (\uace0\uce74\ub514\ub110\ub9ac\ud2f0\ub85c \uc778\ud55c \uc131\ub2a5 \uc800\ud558) \u274c array \ud544\ub4dc \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc74c \u274c must_not, minimum_should_match Boolean \ucffc\ub9ac\uc5d0\uc11c \uc9c0\uc6d0\ub418\uc9c0 \uc54a\uc74c \u2705 \uc9c0\uc6d0 \ucffc\ub9ac term, terms, range, match_all, \uc77c\ubd80 bool \ucffc\ub9ac \u2705 \uc9c0\uc6d0 \uc9d1\uacc4 sum, avg, min, max, value_count, date_histogram, terms, range"},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/%EC%9A%94%EC%95%BD/","title":"OpenSearch &amp; Dashboards 3.1.0 \ub9b4\ub9ac\uc988 \ub178\ud2b8","text":""},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/%EC%9A%94%EC%95%BD/#opensearch-dashboards-310","title":"OpenSearch &amp; Dashboards 3.1.0 \ub9b4\ub9ac\uc988 \ub178\ud2b8","text":"<p>OpenSearch 3.1\uc740 \uc131\ub2a5, \uac80\uc0c9 \ud488\uc9c8, AI \uc5d0\uc774\uc804\ud2b8 \uc9c0\uc6d0, Observability, \ubcf4\uc548 \uce21\uba74\uc5d0\uc11c \ub300\ub300\uc801\uc778 \uc5c5\uadf8\ub808\uc774\ub4dc\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4.</p>"},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/%EC%9A%94%EC%95%BD/#_1","title":"\uc8fc\uc694 \uae30\ub2a5 \uc694\uc57d","text":""},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/%EC%9A%94%EC%95%BD/#gpu","title":"GPU \uac00\uc18d \uc778\ub371\uc2f1 (\uc815\uc2dd \uc801\uc6a9)","text":"<ul> <li> <p>\ucd5c\ub300 9.3\ubc30 \ube60\ub978 \uc778\ub371\uc2a4 \ube4c\ub4dc \uc18d\ub3c4, 3.75\ubc30 \ube44\uc6a9 \uc808\uac10</p> </li> <li> <p>\ub300\uaddc\ubaa8 \ubca1\ud130 \uc778\ub371\uc2f1\uc5d0 \uc774\uc0c1\uc801</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/%EC%9A%94%EC%95%BD/#agent-api","title":"Agent \uad00\ub9ac API \uc81c\uacf5","text":"<ul> <li> <p>\ubaa8\ub378 ID, \ud504\ub86c\ud504\ud2b8 \ub4f1 \uc124\uc815\uc744 \uc9c1\uc811 \uc218\uc815 \uac00\ub2a5</p> </li> <li> <p>\uc2e0\uaddc \uc5d0\uc774\uc804\ud2b8 \uc0dd\uc131 \uc5c6\uc774 \uad6c\uc131 \uc218\uc815 \uac00\ub2a5</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/%EC%9A%94%EC%95%BD/#ml-commons-metrics","title":"ML Commons Metrics \ud1b5\ud569","text":"<ul> <li> <p>OpenTelemetry \ud638\ud658 \uc9c0\ud45c \uc218\uc9d1 \uae30\ub2a5</p> </li> <li> <p>\uc2e4\uc2dc\uac04 \ubc0f \uc815\uae30 \ubc29\uc2dd \ubaa8\ub450 \uc9c0\uc6d0</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/%EC%9A%94%EC%95%BD/#search-relevance-workbench","title":"Search Relevance Workbench (\uc2e4\ud5d8\uc801 \ub3c4\uad6c)","text":"<ul> <li> <p>\ub2e4\uc591\ud55c \uac80\uc0c9 \uc804\ub7b5 \ube44\uad50 \ubc0f \ud29c\ub2dd</p> </li> <li> <p>\uc0ac\uc6a9\uc790 \ud589\ub3d9 \uae30\ubc18 \uac80\uc0c9 \ud488\uc9c8 \ud3c9\uac00 \uac00\ub2a5</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/%EC%9A%94%EC%95%BD/#lucene-hnsw-on-faiss","title":"Lucene HNSW on Faiss","text":"<ul> <li> <p>Faiss \uc778\ub371\uc2a4 \uc704\uc5d0\uc11c Lucene \uadf8\ub798\ud504 \uac80\uc0c9 \uc2e4\ud589 \uac00\ub2a5</p> </li> <li> <p>\uba54\ubaa8\ub9ac \ud6a8\uc728 \ud5a5\uc0c1 \ubc0f \ucd5c\ub300 2\ubc30 \uc131\ub2a5 \uac1c\uc120</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/%EC%9A%94%EC%95%BD/#star-tree-index","title":"Star-tree Index \uc815\uc2dd \uc9c0\uc6d0","text":"<ul> <li> <p>\ucd5c\ub300 100\ubc30 \ube60\ub978 \uc9d1\uacc4 \uc131\ub2a5</p> </li> <li> <p>\ub2e4\uc591\ud55c \uc9d1\uacc4 \ubc0f \ucffc\ub9ac \uc720\ud615 \uc9c0\uc6d0</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/%EC%9A%94%EC%95%BD/#_2","title":"\uac80\uc0c9 \ubc0f \ubca1\ud130 \uae30\ub2a5 \uac15\ud654","text":"<ul> <li> <p>\uc0c8\ub85c\uc6b4 Semantic Field Type: \ubaa8\ub378 ID\ub85c \uc9c1\uc811 \ub9e4\ud551, \uc784\ubca0\ub529 \uc790\ub3d9 \ucc98\ub9ac</p> </li> <li> <p>Hybrid Search \uc131\ub2a5 \ud5a5\uc0c1: \ucd5c\ub300 65% \ube60\ub978 \uc751\ub2f5, 3.5\ubc30 \ucc98\ub9ac\ub7c9 \uac1c\uc120</p> </li> <li> <p>Collapse \uc9c0\uc6d0 \ucd94\uac00: \ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9\uc5d0\uc11c\ub3c4 \ubb38\uc11c \uadf8\ub8f9\ud551 \uac00\ub2a5</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/%EC%9A%94%EC%95%BD/#ai-observability","title":"AI \ubc0f Observability \uae30\ub2a5","text":"<ul> <li> <p>OpenSearch Flow \uac1c\uc120: sparse encoder \uae30\ubc18 \uc2dc\ub9e8\ud2f1 \uac80\uc0c9 \ud15c\ud50c\ub9bf \ucd94\uac00</p> </li> <li> <p>\uc2dc\uacc4\uc5f4 \uc608\uce21 \ubaa8\ub378 \ub0b4\uc7a5 (RCF \uae30\ubc18): Alerting\uacfc \uc5f0\ub3d9 \uac00\ub2a5</p> </li> <li> <p>PPL JSON \ud568\uc218 \ucd94\uac00: \uc911\ucca9 JSON \ucc98\ub9ac \uac04\uc18c\ud654</p> </li> <li> <p>OpenTelemetry \uae30\ubc18 \ub85c\uadf8/\ud2b8\ub808\uc774\uc2a4 \uc5f0\ub3d9 \uac15\ud654: Cross-cluster \uac80\uc0c9 \ubc0f \uc0ac\uc6a9\uc790 \uc9c0\uc815 \ud544\ub4dc \ub9e4\ud551 \uc9c0\uc6d0</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/%EC%9A%94%EC%95%BD/#_3","title":"\ubcf4\uc548 \uae30\ub2a5 \ud5a5\uc0c1","text":"<ul> <li> <p>\ubd88\ubcc0 \uc0ac\uc6a9\uc790 \uac1d\uccb4: \uc9c1\ub82c\ud654/\uc5ed\uc9c1\ub82c\ud654 \ucd5c\uc18c\ud654\ub85c \uc131\ub2a5 \ucd5c\uc801\ud654</p> </li> <li> <p>Tenant \uad8c\ud55c \ud3c9\uac00 \ucd5c\uc801\ud654: \uba40\ud2f0\ud14c\ub10c\uc2dc \ud658\uacbd\uc5d0\uc11c \ud074\ub7ec\uc2a4\ud130 \uc131\ub2a5 \ud5a5\uc0c1</p> </li> <li> <p>\uc790\uc6d0 \uacf5\uc720 \uad8c\ud55c \ud1b5\ud569 (\uc2e4\ud5d8\uc801): \ud50c\ub7ec\uadf8\uc778\ubcc4 \uac1c\ubcc4 \uc124\uc815 \ub300\uc2e0 \ubcf4\uc548 \ud50c\ub7ec\uadf8\uc778\uc5d0\uc11c \uc77c\uad04 \ucc98\ub9ac</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/%EC%9A%94%EC%95%BD/#_4","title":"\uc2e4\ud5d8\uc801 \uae30\ub2a5","text":"<ul> <li> <p>\uc790\uc6d0 \uacf5\uc720 \ubc0f \uc811\uadfc \uc81c\uc5b4 \ud504\ub808\uc784\uc6cc\ud06c (Anomaly Detection \ud50c\ub7ec\uadf8\uc778 \uc801\uc6a9 \uc644\ub8cc)</p> </li> <li> <p>MCP \ub3c4\uad6c \uc5c5\ub370\uc774\ud2b8 \ubc0f \uc2dc\uc2a4\ud15c \uc778\ub371\uc2a4 \uae30\ubc18 \uc601\uc18d\ud654</p> </li> </ul>"},{"location":"search-engine/OpenSearch/Version%20history/3.1.0/%EC%9A%94%EC%95%BD/#_5","title":"\uae30\ud0c0 \uc8fc\uc694 \ubcc0\uacbd \uc0ac\ud56d","text":"<ul> <li> <p>Lucene BPV 21 \uc778\ucf54\ub529 \ub3c4\uc785: BKD \uc778\ub371\uc2a4\uc758 docId \uc800\uc7a5 \ucd5c\uc801\ud654</p> </li> <li> <p>Workload \uc790\ub3d9 \ud0dc\uae45: \uc694\uccad \ud5e4\ub354 \uc5c6\uc774\ub3c4 \ub9ac\uc18c\uc2a4 \uc790\ub3d9 \ubd84\ubc30</p> </li> <li> <p>PPL 20\uac1c \uc774\uc0c1\uc758 \uc2e0\uaddc \ud568\uc218 \ubc0f \uba85\ub839\uc5b4 \ucd94\uac00</p> </li> <li> <p>Dashboards \ubc0f Assistant \uc0ac\uc6a9\uc131 \uac1c\uc120 \ub2e4\uc218 \ud3ec\ud568</p> </li> </ul> <p>\uc774 \uc678\uc5d0\ub3c4 \ub2e4\uc218\uc758 \ubc84\uadf8 \uc218\uc815, \ubcf4\uc548 \uac1c\uc120, \ud14c\uc2a4\ud2b8 \uc548\uc815\ud654, \ubb38\uc11c \ubcf4\uc644, \ub0b4\ubd80 \uad6c\uc870 \ub9ac\ud329\ud1a0\ub9c1 \ub4f1\uc774 \ud3ec\ud568\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4. \ub2e4\uc74c \ub9b4\ub9ac\uc988(3.1.1 \ub610\ub294 3.2)\uc5d0\uc11c\ub294 \ub354\uc6b1 \ud5a5\uc0c1\ub41c GPU \ud65c\uc6a9, \ubca1\ud130 \uac80\uc0c9, AI \uae30\ubc18 \uc2dc\ub9e8\ud2f1 \uac80\uc0c9 \uae30\ub2a5\uc774 \uae30\ub300\ub429\ub2c8\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/","title":"\ubaa9\uc801\uc5d0 \ub9de\ub294 OpenSearch Docker Compose \uad6c\uc131","text":""},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#opensearch-docker-compose","title":"\ubaa9\uc801\uc5d0 \ub9de\ub294 OpenSearch Docker Compose \uad6c\uc131","text":""},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#1-poc-docker-compose-pocyml","title":"1. \uac1c\ubc1c/PoC \uc6a9 \ub2e8\uc77c \ub178\ub4dc (<code>docker-compose-poc.yml</code>)","text":"<pre><code>version: \"3.8\"\nservices:\n  os:\n    image: opensearchproject/opensearch:latest\n    container_name: os-poc\n    environment:\n      - discovery.type=single-node\n      - bootstrap.memory_lock=true\n      - OPENSEARCH_JAVA_OPTS=-Xms1g -Xmx1g\n      - DISABLE_SECURITY_PLUGIN=true\n    ports:\n      - \"9200:9200\"\n    ulimits:\n      memlock: { soft: -1, hard: -1 }\n</code></pre> <p>\uc124\uba85: \ucd5c\uc18c \uad6c\uc131\uc73c\ub85c \ube60\ub974\uac8c \uae30\ub2a5 \uc2dc\uc5f0, \ud14c\uc2a4\ud2b8\uc5d0 \uc801\ud569\ud558\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#2-poc-performance-analyzer","title":"2. \uac1c\ubc1c/PoC + Performance Analyzer","text":"<pre><code>version: \"3.8\"\nservices:\n  os:\n    image: opensearchproject/opensearch:latest\n    container_name: os-poc-pa\n    environment:\n      - discovery.type=single-node\n      - bootstrap.memory_lock=true\n      - OPENSEARCH_JAVA_OPTS=-Xms1g -Xmx1g\n      - DISABLE_SECURITY_PLUGIN=true\n    ports:\n      - \"9200:9200\"\n      - \"9600:9600\"\n    ulimits:\n      memlock: { soft: -1, hard: -1 }\n</code></pre> <p>\uc124\uba85: <code>9600</code> \ud3ec\ud2b8\ub97c \uc5f4\uc5b4 \uc131\ub2a5 \ubd84\uc11d \ubaa8\ub4c8 \uc0ac\uc6a9 \uac00\ub2a5\ud558\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#3","title":"3. \ud14c\uc2a4\ud2b8\uc6a9 \ubcf4\uc548 \ube44\ud65c\uc131 \ub2e8\uc77c \ub178\ub4dc","text":"<pre><code>version: \"3.8\"\nservices:\n  os:\n    image: opensearchproject/opensearch:latest\n    container_name: os-nosec\n    environment:\n      - discovery.type=single-node\n      - bootstrap.memory_lock=true\n      - OPENSEARCH_JAVA_OPTS=-Xms1g -Xmx1g\n      - DISABLE_INSTALL_DEMO_CONFIG=true\n      - DISABLE_SECURITY_PLUGIN=true\n      - DISABLE_SECURITY_DASHBOARDS_PLUGIN=true\n    ports:\n      - \"9200:9200\"\n    ulimits:\n      memlock: { soft: -1, hard: -1 }\n</code></pre> <p>\uc124\uba85: \ubcf4\uc548 \ubaa8\ub4c8\uc744 \uc644\uc804\ud788 \ube44\ud65c\uc131\ud654\ud558\uc5ec \uac1c\ubc1c \ud658\uacbd \uc811\uadfc\uc131\uc744 \ub192\uc778\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#4-poc","title":"4. \ubca1\ud130 \uac80\uc0c9 PoC \ub2e8\uc77c \ub178\ub4dc","text":"<pre><code>version: \"3.8\"\nservices:\n  os:\n    image: opensearchproject/opensearch:latest\n    container_name: os-vector-poc\n    environment:\n      - discovery.type=single-node\n      - bootstrap.memory_lock=true\n      - OPENSEARCH_JAVA_OPTS=-Xms2g -Xmx2g\n    ports:\n      - \"9200:9200\"\n    ulimits:\n      memlock: { soft: -1, hard: -1 }\n</code></pre> <p>\uc124\uba85: \ud50c\ub7ec\uadf8\uc778\uc744 Dockerfile\uc5d0\uc11c \ucd94\uac00 \ube4c\ub4dc\ud558\uace0 \ubca1\ud130 \uac80\uc0c9 \ud14c\uc2a4\ud2b8 \uac00\ub2a5\ud558\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#5","title":"5. \uc911\uaddc\ubaa8 \uc6b4\uc601: \ud074\ub7ec\uc2a4\ud130 \uad00\ub9ac\uc790 \u00b7 \ub370\uc774\ud130 \ub178\ub4dc \ubd84\ub9ac","text":"<pre><code>version: \"3.8\"\nservices:\n  master:\n    image: opensearchproject/opensearch:latest\n    container_name: os-master\n    environment:\n      - node.name=master\n      - node.roles=cluster_manager\n      - discovery.seed_hosts=master,data\n      - cluster.initial_cluster_manager_nodes=master\n      - bootstrap.memory_lock=true\n      - OPENSEARCH_JAVA_OPTS=-Xms1g -Xmx1g\n    ulimits:\n      memlock: { soft: -1, hard: -1 }\n\n  data:\n    image: opensearchproject/opensearch:latest\n    container_name: os-data\n    environment:\n      - node.name=data\n      - node.roles=data,ingest\n      - discovery.seed_hosts=master,data\n      - cluster.initial_cluster_manager_nodes=master\n      - bootstrap.memory_lock=true\n      - OPENSEARCH_JAVA_OPTS=-Xms4g -Xmx4g\n    ulimits:\n      memlock: { soft: -1, hard: -1 }\n</code></pre> <p>\uc124\uba85: \uc5ed\ud560 \ubd84\ub9ac\ub97c \ud1b5\ud574 \uc548\uc815\uc131\uacfc \ucc98\ub9ac \uac00\ub2a5 \uc131\ub2a5 \ud655\ubcf4\uac00 \uac00\ub2a5\ud558\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#6-dashboards","title":"6. \uc911\uaddc\ubaa8 \uc6b4\uc601: \ub2e4\uc911 \ub370\uc774\ud130 \ub178\ub4dc + Dashboards","text":"<pre><code>version: \"3.8\"\nservices:\n  master:\n    &lt;&lt;: *master-def\n\n  data1:\n    image: opensearchproject/opensearch:latest\n    container_name: os-data1\n    environment:\n      - node.name=data1\n      - node.roles=data,ingest\n      - discovery.seed_hosts=master,data1,data2\n      - cluster.initial_cluster_manager_nodes=master\n      - bootstrap.memory_lock=true\n      - OPENSEARCH_JAVA_OPTS=-Xms4g -Xmx4g\n    ulimits:\n      memlock: { soft: -1, hard: -1 }\n    volumes:\n      - data1-vol:/usr/share/opensearch/data\n\n  data2:\n    &lt;&lt;: *data1\n    container_name: os-data2\n    environment:\n      - node.name=data2\n      - discovery.seed_hosts=master,data1,data2\n\n  dashboards:\n    image: opensearchproject/opensearch-dashboards:latest\n    container_name: os-dash\n    environment:\n      - OPENSEARCH_HOSTS=[\"http://master:9200\"]\n    depends_on:\n      - master\n      - data1\n      - data2\n    ports:\n      - \"5601:5601\"\n\nvolumes:\n  data1-vol:\n  data2-vol:\n</code></pre> <p>\uc124\uba85: \uc5ec\ub7ec \ub370\uc774\ud130 \ub178\ub4dc\ub85c \uc0c9\uc778\u00b7\uac80\uc0c9 \uc694\uccad \ubcd1\ub82c \ucc98\ub9ac \uac00\ub2a5\ud558\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#7-3-docker-compose-hayml","title":"7. \uace0\uac00\uc6a9\uc131 3\ub178\ub4dc \ud074\ub7ec\uc2a4\ud130 (<code>docker-compose-ha.yml</code>)","text":"<pre><code>version: \"3.8\"\nservices:\n  node1, node2, node3:\n    image: opensearchproject/opensearch:latest\n    environment:\n      - node.name=&lt;\uac01\uac01&gt;\n      - node.roles=cluster_manager,data,ingest\n      - discovery.seed_hosts=node1,node2,node3\n      - cluster.initial_cluster_manager_nodes=node1,node2,node3\n      - bootstrap.memory_lock=true\n      - OPENSEARCH_JAVA_OPTS=-Xms2g -Xmx2g\n    ulimits:\n      memlock: { soft: -1, hard: -1 }\n    networks:\n      - os-net\n\nnetworks:\n  os-net:\n    driver: bridge\n</code></pre> <p>\uc124\uba85: \ubcf5\uc81c(shard replica) \uc124\uc815 \uc2dc \ud55c \ub178\ub4dc \uc7a5\uc560\uc5d0\ub3c4 \uc790\ub3d9 \ubcf5\uad6c \uac00\ub2a5\ud558\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#8-ml","title":"8. ML/\ubca1\ud130 \uac80\uc0c9 \ubd84\ub9ac \ud074\ub7ec\uc2a4\ud130","text":"<pre><code>version: \"3.8\"\nservices:\n  data:\n    image: opensearchproject/opensearch:latest\n    container_name: os-data\n    environment:\n      - node.roles=data,ingest\n      - bootstrap.memory_lock=true\n      - OPENSEARCH_JAVA_OPTS=-Xms4g -Xmx4g\n    ulimits:\n      memlock: { soft: -1, hard: -1 }\n\n  ml:\n    image: opensearchproject/opensearch:latest\n    container_name: os-ml\n    environment:\n      - node.roles=ml\n      - bootstrap.memory_lock=true\n      - OPENSEARCH_JAVA_OPTS=-Xms2g -Xmx2g\n      - plugins.ml_commons.only_run_on_ml_node=true\n    ulimits:\n      memlock: { soft: -1, hard: -1 }\n</code></pre> <p>\uc124\uba85: \ubca1\ud130\u00b7ML \uc784\ubca0\ub529 \ucc98\ub9ac\ub9cc \uc804\ub2f4\ud558\ub294 ML \ub178\ub4dc\ub97c \ubd84\ub9ac\ud574 \uc790\uc6d0 \ucda9\ub3cc \ubc29\uc9c0\ud55c\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#9-ondisk","title":"9. \ub300\uc6a9\ub7c9 \ubca1\ud130: on\u2011disk \ubaa8\ub4dc","text":"<pre><code>version: \"3.8\"\nservices:\n  os:\n    image: opensearchproject/opensearch:latest\n    environment:\n      - discovery.type=single-node\n      - NODE_OPTIONS=-Dknn.engine=faissOnDisk\n      - bootstrap.memory_lock=true\n      - OPENSEARCH_JAVA_OPTS=-Xms4g -Xmx4g\n    ports:\n      - \"9200:9200\"\n    ulimits:\n      memlock: { soft: -1, hard: -1 }\n</code></pre> <p>\uc124\uba85: <code>faissOnDisk</code> \ubaa8\ub4dc\ub85c \uba54\ubaa8\ub9ac \uc808\uc57d\ud558\uba74\uc11c\ub3c4 P90 \uc751\ub2f5 100\u2013200ms \uc218\uc900 \uc720\uc9c0 \uac00\ub2a5\ud558\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#10-tls","title":"10. TLS \ubc0f \ubcf4\uc548 \uad6c\uc131 \ud3ec\ud568","text":"<pre><code>version: \"3.8\"\nservices:\n  os:\n    image: opensearchproject/opensearch:latest\n    environment:\n      - discovery.type=single-node\n      - bootstrap.memory_lock=true\n      - OPENSEARCH_JAVA_OPTS=-Xms2g -Xmx2g\n      - plugins.security.ssl.http.enabled=true\n      - plugins.security.ssl.http.keystore.type=jks\n      - plugins.security.ssl.http.keystore.path=certs/http.jks\n      - plugins.security.ssl.http.keystore.password=changeme\n      - plugins.security.ssl.http.truststore.type=jks\n      - plugins.security.ssl.http.truststore.path=certs/http.jks\n      - plugins.security.ssl.http.truststore.password=changeme\n    volumes:\n      - ./certs:/usr/share/opensearch/config/certs:ro\n    ports:\n      - \"9200:9200\"\n    ulimits:\n      memlock: { soft: -1, hard: -1 }\n</code></pre> <p>\uc124\uba85: TLS \uc778\uc99d\uc11c\ub97c \ub9c8\uc6b4\ud2b8\ud558\uc5ec \ubcf4\uc548 \ud14c\uc2a4\ud2b8 \ud658\uacbd \uad6c\ucd95\uc774 \uac00\ub2a5\ud558\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#_1","title":"\uad6c\uc131 \uc694\uc57d \ud45c","text":"# \uad6c\uc131 \ubaa9\uc801 1 \ub2e8\uc77c \ub178\ub4dc PoC \uae30\ub2a5 \uac80\uc99d, \ube60\ub978 \ubc30\ud3ec 2 \ub2e8\uc77c \ub178\ub4dc + Performance \uc131\ub2a5 \uc9c4\ub2e8 \uc2dc\uc2a4\ud15c 3 \ub2e8\uc77c \ub178\ub4dc + \ubcf4\uc548 \ube44\ud65c\uc131 \uc811\uadfc\uc774 \uc26c\uc6b4 \ud14c\uc2a4\ud2b8 \ud658\uacbd 4 \ub2e8\uc77c \ub178\ub4dc + \ubca1\ud130 PoC \ubca1\ud130 \uac80\uc0c9 \uae30\ub2a5 \ud14c\uc2a4\ud2b8 5 \uc911\uaddc\ubaa8(role \ubd84\ub9ac) \uc5ed\ud560 \uad6c\ubd84\uc73c\ub85c \uc548\uc815\uc801 \uc6b4\uc601 \uad6c\uc870 \ud655\ubcf4 6 \ub2e4\uc911 \ub370\uc774\ud130 \ub178\ub4dc + Dashboards \ubd80\ud558 \ubd84\uc0b0 \uc2dc\uc2a4\ud15c \uad6c\ucd95 7 HA 3\ub178\ub4dc \ud074\ub7ec\uc2a4\ud130 \uc7a5\uc560 \ubcf5\uad6c \ubc0f \uac00\uc6a9\uc131 \uac15\ud654 8 \ub370\uc774\ud130 + ML \ubd84\ub9ac \ubca1\ud130/ML \uc6cc\ud06c\ub85c\ub4dc \uc790\uc6d0 \ubd84\ub9ac \ucd5c\uc801\ud654 9 \ubca1\ud130 on\u2011disk \ubaa8\ub4dc \ub300\uc6a9\ub7c9 \ubca1\ud130 \uc0c9\uc778 \uc2dc \uba54\ubaa8\ub9ac \uc808\uc57d \ubc0f \uc131\ub2a5 \uc720\uc9c0 10 TLS \ubcf4\uc548 \uad6c\uc131 \ud3ec\ud568 \ubcf4\uc548 \ud14c\uc2a4\ud2b8 \ud658\uacbd \uad6c\ucd95"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#_2","title":"\uacb0\ub860 \ubc0f \ud65c\uc6a9 \ud301","text":"<ul> <li> <p>\uac01\uac01\uc758 \uad6c\uc131 \ud30c\uc77c\uc740 \ubaa9\uc801\uc5d0 \ub530\ub77c \ubc14\ub85c \uc0ac\uc6a9 \uac00\ub2a5\ud558\uba70 \ubcf5\uc0ac\ud558\uc5ec \uc0ac\uc6a9\ud558\uba74 \ub41c\ub2e4.</p> </li> <li> <p>\uc6b4\uc601 \ud658\uacbd\uc5d0\uc11c\ub294 TLS \uad6c\uc131, \uc790\uc6d0 \uc81c\ud55c \uc124\uc815, \ubc31\uc5c5 \uc815\ucc45, \ubaa8\ub2c8\ud130\ub9c1 \ucd94\uac00\uac00 \ud544\uc694\ud558\ub2e4.</p> </li> <li> <p>\ubca1\ud130 \uac80\uc0c9 \uc131\ub2a5, \uc0e4\ub4dc \uc804\ub7b5 \ub4f1 \uace0\ub3c4 \uc124\uc815\uc740 \ucd94\uac00 \uc790\ub8cc \uc694\uccad\ud560 \uacbd\uc6b0 \uc81c\uacf5 \uac00\ub2a5\ud558\ub2e4.</p> </li> </ul>"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#docker-composeyml","title":"\ud604\uc7ac \uc4f0\uace0 \uc788\ub294 docker-compose.yml","text":"<pre><code>#\n# sudo swapoff -a\n# sudo vi /etc/sysctl.conf =&gt; vm.max_map_count=262144\n# sudo sysctl -w vm.max_map_count=262144\n# sudo sysctl -p\n---\nx-opensearch-environment: &amp;opensearch-environment\n  cluster.name: opensearch-cluster\n  bootstrap.memory_lock: \"true\"\n  OPENSEARCH_JAVA_OPTS: \"-Xms4g -Xmx4g\"\n  OPENSEARCH_INITIAL_ADMIN_PASSWORD: \"X2commerce!1\"\n  plugins.security.ssl.http.enabled: false\n\nservices:\n  opensearch-node1:\n    image: opensearchproject/opensearch:3\n    container_name: opensearch-node1\n    environment:\n      &lt;&lt;: *opensearch-environment\n      - node.name=opensearch-node1\n      - discovery.seed_hosts=opensearch-node1,opensearch-node2\n      - cluster.initial_cluster_manager_nodes=opensearch-node1,opensearch-node2\n      - bootstrap.memory_lock=true\n    ulimits:\n      memlock:\n        soft: -1\n        hard: -1\n      nofile:\n        soft: 65536  # maximum number of open files for the OpenSearch user, set to at least 65536 on modern systems\n        hard: 65536\n    volumes:\n      - opensearch-data1:/usr/share/opensearch/data\n    ports:\n      - 9200:9200\n      - 9600:9600  # required for Performance Analyzer\n    networks:\n      - opensearch-net\n  opensearch-node2:\n    image: opensearchproject/opensearch:3\n    container_name: opensearch-node2\n    environment:\n      &lt;&lt;: *opensearch-environment\n      - node.name=opensearch-node2\n      - discovery.seed_hosts=opensearch-node1,opensearch-node2\n      - cluster.initial_cluster_manager_nodes=opensearch-node1,opensearch-node2\n      - bootstrap.memory_lock=true\n    ulimits:\n      memlock:\n        soft: -1\n        hard: -1\n      nofile:\n        soft: 65536\n        hard: 65536\n    volumes:\n      - opensearch-data2:/usr/share/opensearch/data\n    networks:\n      - opensearch-net\n  opensearch-dashboards:\n    image: opensearchproject/opensearch-dashboards:3\n    container_name: opensearch-dashboards\n    ports:\n      - 5601:5601\n    expose:\n      - '5601'\n    environment:\n      OPENSEARCH_HOSTS: '[\"https://opensearch-node1:9200\",\"https://opensearch-node2:9200\"]'\n    networks:\n      - opensearch-net\n\nvolumes:\n  opensearch-data1:\n    driver: local\n    driver_opts:\n      type: none\n      o: bind\n      device: /home/tech/data/opensearch-dir/data-d1\n  opensearch-data2:\n    driver: local\n    driver_opts:\n      type: none\n      o: bind\n      device: /home/tech/data/opensearch-dir/data-d2\n\nnetworks:\n  opensearch-net:\n</code></pre> <p>\uc544\ub798\ub294 \uc81c\uacf5\ud558\uc2e0 OpenSearch Docker Compose \uad6c\uc131 \ud30c\uc77c\uc744 \uc694\uc18c\ubcc4\ub85c \ubd84\ud574\ud558\uace0 \uac01 \uc124\uc815\uc758 \uc758\ubbf8\uc640 \ubaa9\uc801\uc744 \uc0c1\uc138\ud788 \uc124\uba85\ud55c \uc815\ub9ac\uc774\ub2e4. \uc2dc\uc2a4\ud15c \ucee4\ub110 \uc124\uc815\ubd80\ud130 \uac01 \uc11c\ube44\uc2a4 \uad6c\uc131, \ub178\ub4dc \uc124\uc815, \ub124\ud2b8\uc6cc\ud06c, \ubcfc\ub968\uae4c\uc9c0 \uc804\ubc18\uc801\uc73c\ub85c \ubd84\uc11d\ud558\uc600\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#1","title":"1. \ucee4\ub110 \uc124\uc815 (\ud638\uc2a4\ud2b8 \uce21)","text":"<pre><code>sudo swapoff -a\n</code></pre> <ul> <li> <p>\uc758\ubbf8: \uc2a4\uc651 \uba54\ubaa8\ub9ac\ub97c \ube44\ud65c\uc131\ud654\ud55c\ub2e4.</p> </li> <li> <p>\ubaa9\uc801: OpenSearch\ub294 \uc548\uc815\uc801\uc778 \uc131\ub2a5\uc744 \uc704\ud574 \uc2a4\uc651 \uc0ac\uc6a9\uc744 \uad8c\uc7a5\ud558\uc9c0 \uc54a\ub294\ub2e4.</p> </li> </ul> <pre><code>sudo vi /etc/sysctl.conf\n# \ucd94\uac00: vm.max_map_count=262144\n</code></pre> <ul> <li> <p>\uc758\ubbf8: \ud55c \ud504\ub85c\uc138\uc2a4\uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 memory map \uc601\uc5ed \uc218 \uc81c\ud55c\uc744 \uc99d\uac00\uc2dc\ud0a8\ub2e4.</p> </li> <li> <p>\ubaa9\uc801: Lucene \uc5d4\uc9c4\uc774 \uba54\ubaa8\ub9ac \ub9f5 \ud30c\uc77c\uc744 \ub2e4\uc218 \uc0ac\uc6a9\ud558\ub294\ub370, \uae30\ubcf8\uac12(65530)\uc73c\ub85c\ub294 \ubd80\uc871\ud558\ub2e4.</p> </li> </ul> <pre><code>sudo sysctl -w vm.max_map_count=262144\nsudo sysctl -p\n</code></pre> <ul> <li> <p>\uc758\ubbf8: \uc124\uc815\uc744 \uc989\uc2dc \uc801\uc6a9\ud558\uace0 \uc601\uad6c\uc801\uc73c\ub85c \ubc18\uc601\ud55c\ub2e4.</p> </li> <li> <p>\ucc38\uace0: OpenSearch \ubc0f Elasticsearch \ub4f1\uc740 \ubc18\ub4dc\uc2dc \uc774 \uc124\uc815\uc774 \uc801\uc6a9\ub418\uc5b4\uc57c \ud55c\ub2e4.</p> </li> </ul>"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#2-x-opensearch-environment","title":"2. \uacf5\ud1b5 \ud658\uacbd \ubcc0\uc218 \uc815\uc758 (<code>x-opensearch-environment</code>)","text":"<pre><code>x-opensearch-environment: &amp;opensearch-environment\n  cluster.name: opensearch-cluster\n  bootstrap.memory_lock: \"true\"\n  OPENSEARCH_JAVA_OPTS: \"-Xms4g -Xmx4g\"\n  OPENSEARCH_INITIAL_ADMIN_PASSWORD: \"X2commerce!1\"\n  plugins.security.ssl.http.enabled: false\n</code></pre> \ud56d\ubaa9 \uc124\uba85 <code>cluster.name</code> \ud074\ub7ec\uc2a4\ud130 \uc774\ub984. \uc5ec\ub7ec \ub178\ub4dc\uac00 \ub3d9\uc77c\ud55c \ud074\ub7ec\uc2a4\ud130\ub85c \uc778\uc2dd\ub418\ub3c4\ub85d \uc124\uc815 <code>bootstrap.memory_lock</code> \uba54\ubaa8\ub9ac\ub97c \ub77d(lock) \uac78\uc5b4 \uc2a4\uc651 \ubc29\uc9c0. \uc131\ub2a5 \uc548\uc815\uc131 \ud655\ubcf4 <code>OPENSEARCH_JAVA_OPTS</code> JVM \ud799 \uba54\ubaa8\ub9ac \uc124\uc815 (4GB\ub85c \uace0\uc815). \uc2dc\uc2a4\ud15c \uba54\ubaa8\ub9ac\uc758 \uc808\ubc18 \uc774\ud558\ub85c \uc124\uc815 \uad8c\uc7a5 <code>OPENSEARCH_INITIAL_ADMIN_PASSWORD</code> \ucd08\uae30 admin \uacc4\uc815 \ube44\ubc00\ubc88\ud638 \uc124\uc815 <code>plugins.security.ssl.http.enabled</code> HTTP \ubcf4\uc548 \ube44\ud65c\uc131\ud654 (\uae30\ubcf8 TLS OFF)"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#3-opensearch","title":"3. OpenSearch \ub178\ub4dc \uc124\uc815","text":""},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#1-opensearch-node1-opensearch-node2","title":"(1) <code>opensearch-node1</code> / <code>opensearch-node2</code>","text":"<p>\uacf5\ud1b5</p> <pre><code>image: opensearchproject/opensearch:3\ncontainer_name: ...\nenvironment:\n  &lt;&lt;: *opensearch-environment\n  - node.name=opensearch-nodeX\n  - discovery.seed_hosts=opensearch-node1,opensearch-node2\n  - cluster.initial_cluster_manager_nodes=opensearch-node1,opensearch-node2\n  - bootstrap.memory_lock=true\nulimits:\n  memlock:\n    soft: -1\n    hard: -1\n  nofile:\n    soft: 65536\n    hard: 65536\n</code></pre> \ud56d\ubaa9 \uc124\uba85 <code>node.name</code> \ub178\ub4dc \uc2dd\ubcc4 \uc774\ub984. \ud074\ub7ec\uc2a4\ud130 \ub0b4 \uace0\uc720\ud574\uc57c \ud568 <code>discovery.seed_hosts</code> \ucd08\uae30 \ud074\ub7ec\uc2a4\ud130 \ud0d0\uc0c9 \ub300\uc0c1 \ub178\ub4dc \ubaa9\ub85d. \ud074\ub7ec\uc2a4\ud130 \uc870\uc778\uc744 \uc704\ud574 \ubc18\ub4dc\uc2dc \uc124\uc815 <code>cluster.initial_cluster_manager_nodes</code> \ud074\ub7ec\uc2a4\ud130 \ucd08\uae30 \ub9e4\ub2c8\uc800 \ub178\ub4dc \ubaa9\ub85d. \ud074\ub7ec\uc2a4\ud130 \uc0dd\uc131 \uc2dc \ud544\uc218 <code>ulimits.memlock</code> \uba54\ubaa8\ub9ac \ub77d \uc81c\ud55c\uc744 \ubb34\uc81c\ud55c\uc73c\ub85c \uc124\uc815\ud558\uc5ec \ud799 \uba54\ubaa8\ub9ac \uace0\uc815 \uac00\ub2a5\ud558\uac8c \ud568 <code>ulimits.nofile</code> OpenSearch\uac00 \uc5f4 \uc218 \uc788\ub294 \ud30c\uc77c \uc218. 65536 \uc774\uc0c1 \uad8c\uc7a5"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#node1","title":"\ucd94\uac00 \ud56d\ubaa9 (node1)","text":"<pre><code>ports:\n  - 9200:9200\n  - 9600:9600\n</code></pre> \ud3ec\ud2b8 \uc124\uba85 <code>9200</code> REST API \ubc0f \ud074\ub77c\uc774\uc5b8\ud2b8 \uc694\uccad \ud3ec\ud2b8 <code>9600</code> Performance Analyzer(\uc131\ub2a5 \ubd84\uc11d \ub3c4\uad6c)\uc6a9 \ud3ec\ud2b8"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#volumes","title":"\ucd94\uac00 \ud56d\ubaa9 (volumes)","text":"<pre><code>volumes:\n  - opensearch-dataX:/usr/share/opensearch/data\n</code></pre> <ul> <li>\ub370\uc774\ud130 \ub514\ub809\ud1a0\ub9ac\ub97c \ub85c\uceec \uacbd\ub85c\uc5d0 \ubc14\uc778\ub529\ud558\uc5ec \ub370\uc774\ud130 \uc9c0\uc18d\uc131\uc744 \ud655\ubcf4</li> </ul>"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#4-dashboards","title":"4. Dashboards \uc124\uc815","text":"<pre><code>image: opensearchproject/opensearch-dashboards:3\ncontainer_name: opensearch-dashboards\nports:\n  - 5601:5601\nexpose:\n  - '5601'\nenvironment:\n  OPENSEARCH_HOSTS: '[\"https://opensearch-node1:9200\",\"https://opensearch-node2:9200\"]'\n</code></pre> \ud56d\ubaa9 \uc124\uba85 <code>OPENSEARCH_HOSTS</code> \uc5f0\uacb0 \ub300\uc0c1 OpenSearch \ub178\ub4dc\uc758 \uc8fc\uc18c. HTTPS \uc0ac\uc6a9 \uc2dc TLS \uc778\uc99d\uc11c \ud544\uc694 <code>5601</code> Dashboards UI \ud3ec\ud2b8 (Kibana\uc640 \uc720\uc0ac) <code>expose</code> \ub0b4\ubd80 Docker \ub124\ud2b8\uc6cc\ud06c\uc5d0\uc11c \uc5f4\ub9ac\ub294 \ud3ec\ud2b8 (\ud638\uc2a4\ud2b8\uc5d0\ub294 \uc9c1\uc811 \ub178\ucd9c\ub418\uc9c0 \uc54a\uc74c)"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#5_1","title":"5. \ubcfc\ub968 \uc124\uc815","text":"<pre><code>volumes:\n  opensearch-data1:\n    driver: local\n    driver_opts:\n      type: none\n      o: bind\n      device: /home/tech/data/opensearch-dir/data-d1\n  opensearch-data2:\n    ...\n</code></pre> \ud56d\ubaa9 \uc124\uba85 <code>driver: local</code> \uc77c\ubc18\uc801\uc778 Docker \ud638\uc2a4\ud2b8 \ubcfc\ub968 \uc0ac\uc6a9 <code>type: none</code> + <code>o: bind</code> Docker\uc5d0\uc11c \uc678\ubd80 \ub514\ub809\ud1a0\ub9ac\ub97c \uc9c1\uc811 \ub9c8\uc6b4\ud2b8 <code>device</code> \uc2e4\uc81c \ud638\uc2a4\ud2b8 \ud30c\uc77c \uc2dc\uc2a4\ud15c \uacbd\ub85c. \ub514\uc2a4\ud06c \ubd84\ub9ac/\ubc31\uc5c5\uc774 \uac00\ub2a5\ud558\uac8c \uad6c\uc131\ub428"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#6","title":"6. \ub124\ud2b8\uc6cc\ud06c \uc124\uc815","text":"<pre><code>networks:\n  opensearch-net:\n</code></pre> <ul> <li> <p>\ubaa8\ub4e0 \ucee8\ud14c\uc774\ub108\uac00 \ub3d9\uc77c\ud55c Docker bridge \ub124\ud2b8\uc6cc\ud06c\uc5d0 \uc18d\ud568</p> </li> <li> <p>\uac01 \ub178\ub4dc\ub294 \uc774 \ub124\ud2b8\uc6cc\ud06c \uc0c1\uc5d0\uc11c <code>opensearch-node1</code>, <code>opensearch-node2</code> \ub4f1\uc758 \uc774\ub984\uc73c\ub85c \uc11c\ub85c\ub97c \uc778\uc2dd\ud568</p> </li> </ul>"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#_3","title":"\uc885\ud569 \ud310\ub2e8","text":"\ud56d\ubaa9 \uc124\uc815 \uc218\uc900 \ud3c9\uac00 \ud074\ub7ec\uc2a4\ud130 \uad6c\uc131 2\ub178\ub4dc \ub2e4\uc911 \ub178\ub4dc \uae30\ubc18 \ucd5c\uc18c \ud074\ub7ec\uc2a4\ud130 \uad6c\uc131 \uc790\uc6d0 \uc124\uc815 JVM \ud799 4GB \uc911\uac04 \uaddc\ubaa8 \uc774\uc0c1 \ucc98\ub9ac\ub7c9 \uac00\ub2a5 \uc131\ub2a5 \ubaa8\ub2c8\ud130\ub9c1 9600 \ud3ec\ud2b8 \ud65c\uc131\ud654 Performance Analyzer \uc0ac\uc6a9 \uac00\ub2a5 \ubcf4\uc548 \uc124\uc815 TLS \ube44\ud65c\uc131 \ub0b4\ubd80\ub9dd \uc804\uc6a9 \ub610\ub294 \uac1c\ubc1c\uc6a9 \ud658\uacbd\uc5d0 \uc801\ud569 \ub514\uc2a4\ud06c \ub9c8\uc6b4\ud2b8 \ub85c\uceec \uacbd\ub85c \uc9c0\uc815 \uc6b4\uc601 \ub370\uc774\ud130 \uc9c0\uc18d\uc131 \ud655\ubcf4 \ud655\uc7a5\uc131 \ub192\uc74c 3\ubc88\uc9f8 \ub178\ub4dc \ucd94\uac00 \uc2dc \uace0\uac00\uc6a9\uc131 \uad6c\uc131 \uc644\uc131 \uac00\ub2a5 <p>\ud544\uc694 \uc2dc \ub2e4\uc74c \ud56d\ubaa9\ub3c4 \ucd94\uac00 \uad6c\uc131 \uac00\ub2a5\ud558\ub2e4.</p> <ul> <li> <p><code>node.roles</code> \ubd84\ub9ac (cluster_manager, data, ingest, ml)</p> </li> <li> <p><code>plugins.security.*</code>\ub85c TLS \uc778\uc99d \ubc0f \ub85c\uadf8\uc778 \uc124\uc815</p> </li> <li> <p><code>replica</code>, <code>shard</code> \uc218 \uc124\uc815</p> </li> <li> <p>\ubca1\ud130 \uac80\uc0c9/ML \uae30\ub2a5 \ud655\uc7a5 (\uc608: <code>ml</code> \ub178\ub4dc \ucd94\uac00)</p> </li> </ul>"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#ml","title":"\uc5ec\uae30\uc5d0 ML \ub178\ub4dc\ub97c \ucd94\uac00\ud558\uba74?","text":"<p>\ud604\uc7ac \uad6c\uc131\uc5d0 ML \uc804\uc6a9 \ub178\ub4dc (<code>opensearch-ml-node</code>)\ub97c \ud558\ub098 \ucd94\uac00\ud558\ub824\uba74, \uc544\ub798\uc640 \uac19\uc774 Docker Compose\uc5d0 \ub178\ub4dc\ub97c \ud558\ub098 \ub354 \uc815\uc758\ud558\uace0 <code>node.roles=ml</code>\uc744 \uc124\uc815\ud558\uba74 \ub41c\ub2e4. </p> <p>\uc774 \ub178\ub4dc\ub294 ML \ucd94\ub860 \uc804\uc6a9\uc774\uba70, text embedding, \ubca1\ud130 \uc0dd\uc131 \ub4f1\uc5d0 \ud65c\uc6a9\ub41c\ub2e4.</p> <pre><code>services:\n  opensearch-node1:\n    image: opensearchproject/opensearch:3\n    container_name: opensearch-node1\n    environment:\n      &lt;&lt;: *opensearch-environment\n      - node.name=opensearch-node1\n      - discovery.seed_hosts=opensearch-node1,opensearch-node2,opensearch-ml-node\n      - cluster.initial_cluster_manager_nodes=opensearch-node1,opensearch-node2\n    ...\n\n  opensearch-node2:\n    image: opensearchproject/opensearch:3\n    container_name: opensearch-node2\n    environment:\n      &lt;&lt;: *opensearch-environment\n      - node.name=opensearch-node2\n      - discovery.seed_hosts=opensearch-node1,opensearch-node2,opensearch-ml-node\n      - cluster.initial_cluster_manager_nodes=opensearch-node1,opensearch-node2\n    ...\n\n  opensearch-ml-node:\n    image: opensearchproject/opensearch:3\n    container_name: opensearch-ml-node\n    environment:\n      &lt;&lt;: *opensearch-environment\n      - node.name=opensearch-ml-node\n      - node.roles=ml\n      - discovery.seed_hosts=opensearch-node1,opensearch-node2,opensearch-ml-node\n      - cluster.initial_cluster_manager_nodes=opensearch-node1,opensearch-node2\n      - plugins.ml_commons.only_run_on_ml_node=true\n      - plugins.ml_commons.task_dispatch_policy=round_robin\n    ulimits:\n      memlock:\n        soft: -1\n        hard: -1\n      nofile:\n        soft: 65536\n        hard: 65536\n    volumes:\n      - opensearch-data-ml:/usr/share/opensearch/data\n    networks:\n      - opensearch-net\n\nvolumes:\n  opensearch-data1:\n    driver: local\n    driver_opts:\n      type: none\n      o: bind\n      device: /home/tech/data/opensearch-dir/data-d1\n  opensearch-data2:\n    driver: local\n    driver_opts:\n      type: none\n      o: bind\n      device: /home/tech/data/opensearch-dir/data-d2\n  opensearch-data-ml:\n    driver: local\n    driver_opts:\n      type: none\n      o: bind\n      device: /home/tech/data/opensearch-dir/data-ml\n</code></pre>"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#_4","title":"\uc8fc\uc694 \ubcc0\uacbd\uc0ac\ud56d \uc694\uc57d","text":"\ud56d\ubaa9 \uc124\uba85 <code>node.roles=ml</code> ML \uc804\uc6a9 \ub178\ub4dc\ub85c \uc124\uc815\ud558\uc5ec \uc0c9\uc778, \uac80\uc0c9 \ub4f1\uc758 \uc791\uc5c5\uc740 \ud558\uc9c0 \uc54a\uace0 ML \ud0dc\uc2a4\ud06c\ub9cc \ucc98\ub9ac\ud568 <code>plugins.ml_commons.only_run_on_ml_node=true</code> ML \ud0dc\uc2a4\ud06c\uac00 \uc774 \ub178\ub4dc\uc5d0\uc11c\ub9cc \uc2e4\ud589\ub418\ub3c4\ub85d \uc81c\ud55c <code>discovery.seed_hosts</code> \ubaa8\ub4e0 \ub178\ub4dc\uc5d0\uc11c ml \ub178\ub4dc\ub97c \ud3ec\ud568\ud558\uc5ec \ud074\ub7ec\uc2a4\ud130\uc5d0 \uc870\uc778\ud558\ub3c4\ub85d \uc124\uc815 <code>cluster.initial_cluster_manager_nodes</code> ML \ub178\ub4dc\ub294 manager\uac00 \uc544\ub2c8\ubbc0\ub85c \uc5ec\uae30\uc5d0 \ud3ec\ud568\ub418\uc9c0 \uc54a\uc74c <code>plugins.ml_commons.task_dispatch_policy=round_robin</code> ML \ud0dc\uc2a4\ud06c \ubd84\uc0b0 \ubc29\uc2dd \uc124\uc815 (\uc635\uc158) <p>OpenSearch\uc5d0\uc11c ML \uc804\uc6a9 \ub178\ub4dc\ub9cc \uc0ac\uc6a9\ub418\ub3c4\ub85d \uc124\uc815\ud558\ub824\uba74, \ub2e4\uc74c 2\uac00\uc9c0 \uc124\uc815\uc774 \ud575\uc2ec\uc774\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#1-noderoles-ml","title":"1. <code>node.roles: ml</code>","text":"<pre><code>- node.roles=ml\n</code></pre> <ul> <li> <p>\uc774 \ub178\ub4dc\ub294 \uc0c9\uc778(indexing), \uac80\uc0c9(query), cluster manager \uc5ed\ud560\uc744 \ud558\uc9c0 \uc54a\uace0, ML \uc791\uc5c5\ub9cc \uc218\ud589\ud558\ub3c4\ub85d \uc9c0\uc815\ub41c\ub2e4.</p> </li> <li> <p>OpenSearch 2.x \uc774\uc0c1\ubd80\ud130\ub294 \ub178\ub4dc \uc5ed\ud560(role)\uc744 \uba85\uc2dc\ud558\uc9c0 \uc54a\uc73c\uba74 \uae30\ubcf8\uc801\uc73c\ub85c <code>[\"data\", \"ingest\", \"cluster_manager\", \"remote_cluster_client\", \"ml\"]</code> \uc5ed\ud560\uc744 \ubaa8\ub450 \uc218\ud589\ud55c\ub2e4.</p> </li> <li> <p>\ub530\ub77c\uc11c <code>node.roles=ml</code>\uc744 \uba85\uc2dc\uc801\uc73c\ub85c \uc124\uc815\ud574\uc57c \uc9c4\uc9dc \uc804\uc6a9 ML \ub178\ub4dc\uac00 \ub41c\ub2e4.</p> </li> </ul>"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#2-pluginsml_commonsonly_run_on_ml_node-true","title":"2. <code>plugins.ml_commons.only_run_on_ml_node: true</code>","text":"<pre><code>- plugins.ml_commons.only_run_on_ml_node=true\n</code></pre> <ul> <li> <p>\uc774 \uc124\uc815\uc774 <code>true</code>\uc774\uba74 ML Commons\ub294 <code>node.roles</code>\uc5d0 <code>ml</code>\ub9cc \ud3ec\ud568\ub41c \ub178\ub4dc\uc5d0\uc11c\ub9cc ML \ud0dc\uc2a4\ud06c\ub97c \uc2e4\ud589\ud55c\ub2e4.</p> </li> <li> <p>\uc77c\ubc18 data \ub178\ub4dc\uac00 ML \ud0dc\uc2a4\ud06c\ub97c \ucc98\ub9ac\ud558\uc9c0 \uc54a\uac8c \ub41c\ub2e4.</p> </li> <li> <p>\ub530\ub77c\uc11c \uc774 \uc124\uc815\uc744 \ubc18\ub4dc\uc2dc \ucd94\uac00\ud574\uc57c ML \uc804\uc6a9 \ub178\ub4dc\uac00 \uc544\ub2cc \ub2e4\ub978 \ub178\ub4dc\uc5d0\uc11c embedding \uc0dd\uc131, \ubaa8\ub378 \ucd94\ub860 \ub4f1\uc758 ML \uc791\uc5c5\uc774 \ubc1c\uc0dd\ud558\uc9c0 \uc54a\ub294\ub2e4.</p> </li> </ul>"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#_5","title":"\uc608\uc2dc \uc694\uc57d","text":"<pre><code>  opensearch-ml-node:\n    environment:\n      - node.roles=ml\n      - plugins.ml_commons.only_run_on_ml_node=true\n</code></pre> <p>\uc774\ub807\uac8c \uc124\uc815\ud558\uba74 ML \ud0dc\uc2a4\ud06c(<code>text_embedding</code>, <code>model_predict</code>, <code>model_train</code>) \ub4f1\uc740 \uc624\uc9c1 <code>opensearch-ml-node</code>\uc5d0\uc11c\ub9cc \ucc98\ub9ac\ub41c\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#_6","title":"\ucd94\uac00 \uc635\uc158 (\uc120\ud0dd)","text":"\uc124\uc815 \ud0a4 \uc124\uba85 \uc608\uc2dc <code>plugins.ml_commons.task_dispatch_policy</code> \uc5ec\ub7ec ML \ub178\ub4dc\uac00 \uc788\uc744 \ub54c \ud0dc\uc2a4\ud06c \ubd84\uc0b0 \ubc29\uc2dd <code>round_robin</code> \ub610\ub294 <code>least_load</code> <code>plugins.ml_commons.native_memory_threshold</code> ML \ud0dc\uc2a4\ud06c \uc2e4\ud589 \uc804, \uba54\ubaa8\ub9ac \uc810\uc720\uc728 \uae30\uc900 <code>90</code> (90% \uc774\uc0c1\uc774\uba74 \uac70\ubd80) <code>plugins.ml_commons.max_ml_task_per_node</code> \ub3d9\uc2dc\uc5d0 \uc218\ud589\ud560 \uc218 \uc788\ub294 ML \ud0dc\uc2a4\ud06c \uac1c\uc218 <code>2</code> \ub4f1\ub4f1"},{"location":"search-engine/OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/#_7","title":"\uacb0\ub860","text":"<p>\"\ud574\ub2f9 ML \ub178\ub4dc\ub9cc ML \ud0dc\uc2a4\ud06c\ub97c \uc218\ud589\" \ud558\ub3c4\ub85d \ud558\ub824\uba74 \ubc18\ub4dc\uc2dc \ub2e4\uc74c \ub450 \uac00\uc9c0\ub97c \uac19\uc774 \uc124\uc815\ud574\uc57c \ud55c\ub2e4.</p> <ol> <li> <p><code>node.roles=ml</code> \u2192 ML \uc774\uc678\uc758 \uc5ed\ud560 \uc81c\uac70</p> </li> <li> <p><code>plugins.ml_commons.only_run_on_ml_node=true</code> \u2192 ML \ub178\ub4dc\uc5d0\uc11c\ub9cc \ud0dc\uc2a4\ud06c \uc2e4\ud589 \uc81c\ud55c</p> </li> </ol> <p>\uc774 \uad6c\uc131\uc744 \ud1b5\ud574 \uc6b4\uc601 \ud074\ub7ec\uc2a4\ud130\uc758 \uc0c9\uc778\u00b7\uac80\uc0c9 \uc131\ub2a5\uc5d0 \uc601\ud5a5\uc744 \uc8fc\uc9c0 \uc54a\uace0 ML \uae30\ub2a5\uc744 \uc548\uc815\uc801\uc73c\ub85c \ubd84\ub9ac\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EC%83%A4%EB%93%9C%20%EA%B5%AC%EC%84%B1/","title":"\uc0e4\ub4dc \uad6c\uc131","text":"<p><code>number_of_shards</code>\ub294 OpenSearch\uc5d0\uc11c \uc778\ub371\uc2a4\ub97c \ubb3c\ub9ac\uc801\uc73c\ub85c \ubd84\uc0b0 \uc800\uc7a5\ud558\uace0 \ubcd1\ub82c \ucc98\ub9ac \uc131\ub2a5\uc744 \ud655\ubcf4\ud558\uae30 \uc704\ud55c \ud575\uc2ec \uc124\uc815\uc774\ub2e4. \uc774 \uac12\uc740 \uc778\ub371\uc2a4 \uc0dd\uc131 \ud6c4\uc5d0\ub294 \ubcc0\uacbd\ud560 \uc218 \uc5c6\uae30 \ub54c\ubb38\uc5d0, \uc778\ub371\uc2a4 \uc124\uacc4 \uc2dc \uc2e0\uc911\ud558\uac8c \uacb0\uc815\ud574\uc57c \ud55c\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EC%83%A4%EB%93%9C%20%EA%B5%AC%EC%84%B1/#1-number_of_shards","title":"1. <code>number_of_shards</code>\uc758 \uc5ed\ud560","text":"\uc5ed\ud560 \uc124\uba85 \ub370\uc774\ud130 \ubd84\uc0b0 \uc800\uc7a5 \ud558\ub098\uc758 \uc778\ub371\uc2a4\ub97c \uc5ec\ub7ec \ub178\ub4dc\uc5d0 \ub098\ub204\uc5b4 \uc800\uc7a5\ud568\uc73c\ub85c\uc368 \ub514\uc2a4\ud06c I/O \ubcd1\ubaa9\uc744 \uc904\uc774\uace0 \ubd80\ud558\ub97c \ubd84\uc0b0\uc2dc\ud0ac \uc218 \uc788\ub2e4. \ubcd1\ub82c \uac80\uc0c9 \ucc98\ub9ac \uc5ec\ub7ec \uc0e4\ub4dc\uac00 \ub3d9\uc2dc\uc5d0 \ucffc\ub9ac\ub97c \ucc98\ub9ac\ud560 \uc218 \uc788\uc5b4 \uac80\uc0c9 \uc751\ub2f5 \uc18d\ub3c4\ub97c \ud5a5\uc0c1\uc2dc\ud0ac \uc218 \uc788\ub2e4. \uc218\ud3c9 \ud655\uc7a5 \uc9c0\uc6d0 \ud074\ub7ec\uc2a4\ud130\uc5d0 \ub178\ub4dc\uac00 \ucd94\uac00\ub418\uba74 \uc0e4\ub4dc\uac00 \uc790\ub3d9\uc73c\ub85c \ubd84\uc0b0\ub418\uc5b4 \ud655\uc7a5\uc131\uc774 \ud5a5\uc0c1\ub41c\ub2e4."},{"location":"search-engine/OpenSearch/docker/%EC%83%A4%EB%93%9C%20%EA%B5%AC%EC%84%B1/#2","title":"2. \uc124\uc815 \uae30\uc900","text":"<p>\uc0e4\ub4dc\ub294 \ub108\ubb34 \uc801\uc5b4\ub3c4 \ud655\uc7a5\uc131\uacfc \ucc98\ub9ac \uc131\ub2a5\uc5d0 \uc81c\uc57d\uc774 \uc0dd\uae30\uba70, \ubc18\ub300\ub85c \ub108\ubb34 \ub9ce\uc544\ub3c4 \ub9ac\uc18c\uc2a4 \ub0ad\ube44\uc640 \uc131\ub2a5 \uc800\ud558\ub97c \uc720\ubc1c\ud560 \uc218 \uc788\ub2e4. \uc77c\ubc18\uc801\uc73c\ub85c \uc0e4\ub4dc \ud558\ub098\uc758 \ud06c\uae30\ub294 \uc57d 10~30GB\uac00 \uc774\uc0c1\uc801\uc774\ub2e4.</p> \uc608\uc0c1 \uc778\ub371\uc2a4 \ub370\uc774\ud130 \ud06c\uae30 \uad8c\uc7a5 \uc0e4\ub4dc \uc218 \ube44\uace0 10GB \uc774\ud558 1 \ub2e8\uc77c \uc0e4\ub4dc\ub85c \ucda9\ubd84\ud558\ub2e4. 10~50GB 2~3 \uc911\uc18c \uaddc\ubaa8 \ub370\uc774\ud130\uc5d0 \uc801\ud569\ud558\ub2e4. 50~200GB 3~5 \ub2e4\uc911 \ub178\ub4dc \ud658\uacbd\uc5d0\uc11c\uc758 \uc548\uc815\uc801\uc778 \ubd84\uc0b0\uc744 \ub3c4\ubaa8\ud560 \uc218 \uc788\ub2e4. 200GB \uc774\uc0c1 5~10 \uc774\uc0c1 \ub300\uc6a9\ub7c9 \ucc98\ub9ac \ubc0f \ud655\uc7a5\uc131\uc744 \uace0\ub824\ud574\uc57c \ud55c\ub2e4. <p>\uacfc\ub3c4\ud55c \uc0e4\ub4dc\ub294 file descriptor \uc18c\ubaa8, heap memory \uc99d\uac00, segment \ubcd1\ud569 \ube44\uc6a9 \ub4f1\uc744 \uc720\ubc1c\ud558\ubbc0\ub85c \uc8fc\uc758\uac00 \ud544\uc694\ud558\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EC%83%A4%EB%93%9C%20%EA%B5%AC%EC%84%B1/#3","title":"3. \uc124\uc815 \uc608\uc2dc","text":"<pre><code>{\n  \"settings\": {\n    \"number_of_shards\": 3,\n    \"number_of_replicas\": 1\n  }\n}\n</code></pre> <ul> <li> <p>Primary Shard 3\uac1c\ub97c \ud1b5\ud574 \ub370\uc774\ud130\ub97c \uc138 \ubd80\ubd84\uc73c\ub85c \ubd84\uc0b0 \uc800\uc7a5\ud55c\ub2e4.</p> </li> <li> <p>Replica 1\uac1c\ub97c \ub450\uba74 \uac01 Primary Shard\uc758 \ubcf5\uc81c\ubcf8\uc774 \ud558\ub098\uc529 \uc0dd\uae30\ubbc0\ub85c \ucd1d \uc0e4\ub4dc \uc218\ub294 6\uac1c\uc774\ub2e4.</p> </li> <li> <p>\ucd5c\uc18c 2\uac1c\uc758 \ub370\uc774\ud130 \ub178\ub4dc\uac00 \ud544\uc694\ud558\uba70, \uac00\uc6a9\uc131\uacfc \uac80\uc0c9 \uc131\ub2a5\uc774 \ud655\ubcf4\ub41c\ub2e4.</p> </li> </ul>"},{"location":"search-engine/OpenSearch/docker/%EC%83%A4%EB%93%9C%20%EA%B5%AC%EC%84%B1/#4","title":"4. \ucd5c\uc801 \uc124\uacc4 \uc694\ub839","text":"<ul> <li> <p>\uc0e4\ub4dc\ub294 \ub370\uc774\ud130 \ubd84\uc0b0\uacfc \uc131\ub2a5\uc744 \uc870\uc728\ud558\ub294 \ub2e8\uc704\uc774\ubbc0\ub85c \uc804\uccb4 \uc778\ub371\uc2a4 \ud06c\uae30\ub97c \uae30\uc900\uc73c\ub85c \ub098\ub204\ub294 \uac83\uc774 \ubc14\ub78c\uc9c1\ud558\ub2e4.</p> </li> <li> <p>\uc778\ub371\uc2a4 \uc0dd\uc131 \uc2dc \ub2e4\uc74c\uacfc \uac19\uc740 \uacf5\uc2dd\uc774 \ub3c4\uc6c0\uc774 \ub41c\ub2e4.</p> </li> </ul> <pre><code>\uc0e4\ub4dc \uc218 \u00d7 (replica \uc218 + 1) \u2248 \ucd1d \ub370\uc774\ud130 \ub178\ub4dc \uc218\n</code></pre> <ul> <li>\ub610\ud55c, \ud074\ub7ec\uc2a4\ud130 \uc804\uccb4 \uae30\uc900\uc73c\ub85c\ub294 \ub2e4\uc74c \ubc94\uc704\ub97c \uad8c\uc7a5\ud55c\ub2e4.</li> </ul> <pre><code>\ucd1d \uc0e4\ub4dc \uc218 \u2264 \ub370\uc774\ud130 \ub178\ub4dc \uc218 \u00d7 20\n</code></pre> <p>\uc774 \uae30\uc900\uc744 \ucd08\uacfc\ud560 \uacbd\uc6b0, \ub178\ub4dc\ub2f9 \ub9ac\uc18c\uc2a4 \ud55c\uacc4\ub97c \ucd08\uacfc\ud558\uac70\ub098 GC, \uac80\uc0c9 \uc9c0\uc5f0 \ub4f1\uc758 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EC%83%A4%EB%93%9C%20%EA%B5%AC%EC%84%B1/#5","title":"5. \uacb0\ub860","text":"<p><code>number_of_shards</code> \uc124\uc815\uc740 \ub2e8\uc21c\ud55c \uc22b\uc790\uac00 \uc544\ub2cc, \uc778\ub371\uc2a4 \uc131\ub2a5, \ud655\uc7a5\uc131, \uc548\uc815\uc131\uc5d0 \uc601\ud5a5\uc744 \ubbf8\uce58\ub294 \uc911\uc694\ud55c \uc694\uc18c\uc774\ub2e4. \uc6b4\uc601 \ud658\uacbd\uc5d0 \ub9de\ub294 \ub370\uc774\ud130 \uaddc\ubaa8\uc640 \ub178\ub4dc \uc218\ub97c \uace0\ub824\ud558\uc5ec \uc801\uc808\ud55c \uc218\uce58\ub97c \uc124\uc815\ud558\ub294 \uac83\uc774 \ud074\ub7ec\uc2a4\ud130\uc758 \uc7a5\uae30\uc801\uc778 \uc548\uc815\uc131\uacfc \uc131\ub2a5 \uc720\uc9c0\uc5d0 \ub3c4\uc6c0\uc774 \ub41c\ub2e4.</p> <p>\ud544\uc694\ud558\ub2e4\uba74 \uc608\uc0c1 \ub370\uc774\ud130 \ud06c\uae30\ub97c \uc785\ub825\ubc1b\uc544 \uc790\ub3d9\uc73c\ub85c \uc0e4\ub4dc \uc218\ub97c \ucd94\ucc9c\ud574\uc8fc\ub294 \uacc4\uc0b0 \ub3c4\uad6c\ub3c4 \ud568\uaed8 \uad6c\ucd95\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EC%84%B1%EB%8A%A5%20%EC%B2%B4%ED%81%AC/","title":"\uc131\ub2a5 \uccb4\ud06c","text":""},{"location":"search-engine/OpenSearch/docker/%EC%84%B1%EB%8A%A5%20%EC%B2%B4%ED%81%AC/#tps","title":"\uc6cc\ud06c\ub85c\ub4dc \uae30\uc900(TPS)\uc5d0 \ub530\ub978 \uad6c\uc131 \uc0ac\ub840","text":"\uc608\uc0c1 TPS \uc0ac\uc6a9 \uc0ac\ub840 CPU RAM \uad6c\uc131 \ud615\ud0dc \ubca4\uce58\ub9c8\ud06c \ucc38\uace0 ~10 TPS \ub0b4\ubd80 PoC, \ud300 \ubb38\uc11c \uac80\uc0c9 4 vCPU 8\u202fGB \ub2e8\uc77c \ub178\ub4dc \uc77c\ubc18\uc801\uc73c\ub85c \uac80\uc0c9 \uc751\ub2f5 \uc18d\ub3c4 \uc57d 30\u2013100ms\uc774\ub2e4 10\u201350 TPS \uc1fc\ud551\ubab0, \uc0ac\ub0b4 \uac80\uc0c9 \ub4f1 8 vCPU 16\u202fGB \ub2e8\uc77c \ud074\ub7ec\uc2a4\ud130, \ubca1\ud130 \uac00\ub2a5 OpenSearch 3.0\uc5d0\uc11c \ubca1\ud130 \ucc98\ub9ac \uc131\ub2a5 2.5\ubc30 \ud5a5\uc0c1\ub428 (OpenSearch) 50\u2013300 TPS \uc2e4\uc2dc\uac04 \ub85c\uadf8 \ubd84\uc11d, \uc2e4\uc2dc\uac04 \uc0c1\ud488 \uac80\uc0c9 16 vCPU 32\u202fGB \ub2e4\uc911 \ub178\ub4dc \uad6c\uc131 \uad8c\uc7a5 2.17\uc5d0\uc11c \uc800\uc9c0\uc5f0 \uc751\ub2f5 \uc704\ud574 \ub3d9\uc2dc \uc138\uadf8\uba3c\ud2b8 \uac80\uc0c9 \ub3c4\uc785 300+ TPS \uc2e4\uc2dc\uac04 \uad11\uace0 \ub4f1 \ucd08\uace0\uc18d \uac80\uc0c9 32+ vCPU 64\u202fGB \uc774\uc0c1 \uc0e4\ub4dc \ubd84\uc0b0, ML/GPU \ub178\ub4dc \ubd84\ub9ac \ud544\uc218 CCR \ud14c\uc2a4\ud2b8\uc5d0\uc11c leader CPU \uc0ac\uc6a9\ub7c9\ub9cc 12% \uc99d\uac00"},{"location":"search-engine/OpenSearch/docker/%EC%84%B1%EB%8A%A5%20%EC%B2%B4%ED%81%AC/#gpu-knn","title":"GPU: \ub2e8\uc21c \uc784\ubca0\ub529 \uae30\ubc18 K\u2011NN \uac80\uc0c9\uc6a9","text":"TPS \ubc94\uc704 GPU \uc608\uc2dc \uc0ac\uc591 RTX 4090 \ub300\ube44 \uc131\ub2a5 \uc8fc\uc694 \uc6a9\ub3c4 \uac00\uaca9 (\uc628\ud504\ub808\ubbf8\uc2a4, 2025\ub144 \uae30\uc900) ~10 TPS NVIDIA T4 / L4 (16GB) 20\u201330% \uc218\uc900 \uc18c\uaddc\ubaa8 \ubb38\uc11c \uac80\uc0c9, \ud300 \ub0b4 \uac80\uc0c9 T4: \uc57d\u202f$700(\uc911\uace0) (\uc544\ub9c8\uc874), L4: \uc57d\u202f$2,000 \ucd94\uc815 | 10\u201350 TPS NVIDIA A10 (24GB) / RTX 6000 Ada (48GB) 90\u2013110% \uc218\uc900 \uc911\uc18c\ud615 \uc1fc\ud551\ubab0 \ubc0f FAQ \uac80\uc0c9 A10: \uc57d\u202f$3,000 (\ucd94\uc815), RTX 6000 Ada: $5,000\u20136,000 | 50\u2013300 TPS NVIDIA A100 40GB / 2\u00d7L40s 200\u2013250% \uc774\uc0c1 \ub300\uc6a9\ub7c9 \uc0c1\ud488 \uac80\uc0c9, \ubcd1\ub82c ANN \ucc98\ub9ac A100 40GB: $10,000\u201312,000 (simplepod.ai), L40s: $7,500\u20139,600 | 300+ TPS 2\u00d7A100\u202f80GB / 4\u00d7L40s / H100 300\u2013400% \uc774\uc0c1 \ucd08\uace0\uc18d \uac80\uc0c9, \uae00\ub85c\ubc8c \uc11c\ube44\uc2a4 A100 80GB: $13,000\u201315,000 (Massed Compute); H100: $25,000 (Cyfuture Cloud, docs.jarvislabs.ai)"},{"location":"search-engine/OpenSearch/docker/%EC%84%B1%EB%8A%A5%20%EC%B2%B4%ED%81%AC/#gpu-reranker-llm","title":"GPU: Reranker \ud3ec\ud568 (LLM \ud6c4\ucc98\ub9ac) \uac80\uc0c9\uc6a9","text":"TPS \ubc94\uc704 GPU \uc608\uc2dc \uc0ac\uc591 RTX 4090 \ub300\ube44 \uc131\ub2a5 \uc8fc\uc694 \uc6a9\ub3c4 \uac00\uaca9 (\uc628\ud504\ub808\ubbf8\uc2a4, 2025\ub144 \uae30\uc900) ~10 TPS RTX\u202f4090 (24GB) / NVIDIA L40 \uae30\uc900 \uc131\ub2a5 (100%) Q&amp;A \uae30\ubc18 \uac80\uc0c9, \ub2e8\ubb38 rerank RTX 4090: $1,600 (MSRP) (Reddit, PC Gamer, Cyfuture Cloud); L40: $3,500\u20134,500 | 10\u201350 TPS A100 40GB / RTX 6000 Ada \u00d72 200\u2013250% \uc218\uc900 \uc0c1\ud488 \uac80\uc0c9 + LLM reranker \uc870\ud569 A100: $10,000\u201312,000 (Business Insider, simplepod.ai); RTX 6000 Ada\u00d72: $10,000\u201312,000 | 50\u2013300 TPS 2\u00d7A100 80GB / 4\u00d7L40s / H100 300\u2013400% \uc774\uc0c1 \uace0\ub09c\ub3c4 \ubb38\uc11c \ubd84\ub958, \uba40\ud2f0\ud134 rerank A100 80GB: $13,000\u201315,000 (PC Gamer); H100: $25,000 (Cyfuture Cloud, docs.jarvislabs.ai) 300+ TPS H100 4\uc7a5 \uc774\uc0c1 \ub610\ub294 GPU \ud31c \uad6c\uc131 400% \uc774\uc0c1 \ub300\uaddc\ubaa8 \uad11\uace0, \uc2e4\uc2dc\uac04 \uc815\ubc00 rerank \ub4f1 H100\u00d74: $100,000+ (estimated from $25k each) (Massed Compute)"},{"location":"search-engine/OpenSearch/docker/%EC%84%B1%EB%8A%A5%20%EC%B2%B4%ED%81%AC/#_1","title":"\uc0c9\uc778 \uaddc\ubaa8 \uae30\uc900 \uc0ac\ub840","text":"\uc0c9\uc778 \uaddc\ubaa8 \ubb38\uc11c \uc218 \uad6c\uc131 \ucd94\ucc9c &lt;\u202f1\u202fM \uc218\uc2ed\ub9cc \ubb38\uc11c 4 vCPU, 8\u202fGB 1\u201310\u202fM \ub274\uc2a4\u00b7\uc0c1\ud488 8 vCPU, 16\u202fGB 10\u2013100\u202fM \ub85c\uadf8, \ub300\uaddc\ubaa8 \uc0c1\ud488 16 vCPU, 64\u202fGB, \ubcf5\uc218 \ub178\ub4dc &gt;\u202f100\u202fM SIEM, \ube45\ub370\uc774\ud130 32+ vCPU, 128\u202fGB+, \uc644\uc804 \ubd84\uc0b0 <ul> <li> <p>\ubca4\uce58\ub9c8\ud06c\uc5d0 \ub530\ub974\uba74 OpenSearch 2.17\uc740 1.3 \ub300\ube44 \ucd5c\ub300 6\ubc30 \ud5a5\uc0c1\ub41c \uc131\ub2a5\uc744 \ubcf4\uc600\ub2e4 (AWS Documentation, OpenSearch, Instaclustr, Elastic, Cloudchipr, Redis, OpenSearch).</p> </li> <li> <p>Vector Engine\uc758 on\u2011disk \ubaa8\ub4dc \uc0ac\uc6a9 \uc2dc \uba54\ubaa8\ub9ac\ub97c 97% \uc808\uac10\ud558\uba74\uc11c\ub3c4 P90 \uc9c0\uc5f0 100\u2013200ms \uc218\uc900 \uc720\uc9c0\ub428 (Amazon Web Services, Inc.).</p> </li> </ul>"},{"location":"search-engine/OpenSearch/docker/%EC%84%B1%EB%8A%A5%20%EC%B2%B4%ED%81%AC/#_2","title":"\ubca1\ud130 \uac80\uc0c9 \ubc0f \uc5d4\uc9c4 \ube44\uad50 \uc131\ub2a5","text":"<ul> <li> <p>OpenSearch 3.0\uc5d0\uc11c \ubca1\ud130 \uac80\uc0c9 \uc131\ub2a5\uc774 2.5\ubc30 \ud5a5\uc0c1\ub428 (OpenSearch).</p> </li> <li> <p>Elastic \u793e BBQ vs OpenSearch FAISS \ube44\uad50 \uacb0\uacfc, Elastic \uc81c\ud488\uc774 \ucd5c\ub300 5\ubc30 \ube60\ub984 (Elastic).</p> </li> <li> <p>\uadf8\ub7ec\ub098 \ub3c5\ub9bd \ubca4\uce58\ub9c8\ud06c \uacb0\uacfc OpenSearch 2.17.1\uc774 Elastic 8.15.4 \ub300\ube44 \ubca1\ud130 \uac80\uc0c9\uc5d0\uc11c P90 \uae30\uc900 11% \ube60\ub984 (The Trail of Bits Blog).</p> </li> </ul>"},{"location":"search-engine/OpenSearch/docker/%EC%84%B1%EB%8A%A5%20%EC%B2%B4%ED%81%AC/#_3","title":"\uc2e4\uc81c \uc0ac\ub840 \ucd94\uac00","text":""},{"location":"search-engine/OpenSearch/docker/%EC%84%B1%EB%8A%A5%20%EC%B2%B4%ED%81%AC/#1-elastic-vs-opensearch","title":"\uc0ac\ub840 1: Elastic vs OpenSearch \ube44\uad50 \ud14c\uc2a4\ud2b8","text":"<p>Trail of Bits \ud14c\uc2a4\ud2b8\uc5d0\uc11c OpenSearch 2.17.1\uc740 Big5 \uc6cc\ud06c\ub85c\ub4dc\uc5d0\uc11c Elastic \ubcf4\ub2e4 1.6\ubc30 \ube60\ub974\uace0, \ubca1\ud130 \uc6cc\ud06c\ub85c\ub4dc\uc5d0\uc11c\ub294 11% \ub354 \ube60\ub978 \uc131\ub2a5\uc744 \ubcf4\uc600\ub2e4 (The Trail of Bits Blog).</p>"},{"location":"search-engine/OpenSearch/docker/%EC%84%B1%EB%8A%A5%20%EC%B2%B4%ED%81%AC/#2-ccr","title":"\uc0ac\ub840 2: CCR(\uad50\ucc28 \ud074\ub7ec\uc2a4\ud130 \ubcf5\uc81c) \uc601\ud5a5","text":"<p>AWS \ubca4\uce58\ub9c8\ud06c\uc5d0 \ub530\ub974\uba74, leader \ub178\ub4dc\uc758 CPU \uc0ac\uc6a9\ub960\uc774 +12.4%, 90th percentile \uc778\ub371\uc2f1 \uc9c0\uc5f0\uc774 +3.9% \uc99d\uac00\ud588\uc9c0\ub9cc \uac80\uc0c9 \uc131\ub2a5\uc740 \uac70\uc758 \uc601\ud5a5 \uc5c6\uc5c8\ub2e4 (Instaclustr).</p>"},{"location":"search-engine/OpenSearch/docker/%EC%84%B1%EB%8A%A5%20%EC%B2%B4%ED%81%AC/#3-diskoptimized","title":"\uc0ac\ub840 3: Disk\u2011optimized \ubca1\ud130 \uc5d4\uc9c4 \uc0ac\ub840","text":"<p>Amazon OpenSearch Service\uc5d0\uc11c disk \ubaa8\ub4dc \uc0ac\uc6a9 \uc2dc \uba54\ubaa8\ub9ac 97% \uc808\uac10, P90 \uc751\ub2f5 100\u2013200ms\ub85c \uc720\uc9c0\ub418\uba70 \ube44\uc6a9 \ud6a8\uc728\uc801\uc784 (Amazon Web Services, Inc.).</p>"},{"location":"search-engine/OpenSearch/docker/%EC%84%B1%EB%8A%A5%20%EC%B2%B4%ED%81%AC/#_4","title":"\uc694\uc57d: \uae30\uc900 \ubc0f \uad6c\uc131 \uc608\uc2dc \uc815\ub9ac","text":"<ol> <li> <p>TPS(\ud2b8\ub798\ud53d)</p> <ul> <li> <p>~10 TPS: 4 vCPU/8GB</p> </li> <li> <p>50\u2013300 TPS: 16 vCPU/32GB, \ub2e4\uc911 \ub178\ub4dc</p> </li> <li> <p>300+ TPS: 32+ vCPU/64GB \uc774\uc0c1, \ud074\ub7ec\uc2a4\ud130 \ubd84\ub9ac</p> </li> </ul> </li> <li> <p>\uc0c9\uc778 \uaddc\ubaa8</p> <ul> <li> <p>&lt;\u202f1M: 4 vCPU/8GB</p> </li> <li> <p>1\u201310M: 8 vCPU/16GB</p> </li> <li> <p>10\u2013100M: 16 vCPU/64GB</p> </li> <li> <p>100M: 32+ vCPU/128GB+, \ubd84\uc0b0 \ub178\ub4dc</p> </li> </ul> </li> <li> <p>\uac80\uc0c9 \uc720\ud615</p> <ul> <li> <p>BM25: \uacbd\ub7c9 \uad6c\uc131 \uac00\ub2a5</p> </li> <li> <p>\ubca1\ud130/\ud558\uc774\ube0c\ub9ac\ub4dc: CPU \uc911\uc2ec 2.5\ubc30 \uc18d\ub3c4 \ud5a5\uc0c1</p> </li> <li> <p>RAG/AI \uc7ac\ub7ad\ud0b9: GPU \ud3ec\ud568 ML \uc11c\ubc84 \ubcc4\ub3c4 \uad6c\uc131 \ucd94\ucc9c</p> </li> </ul> </li> <li> <p>\uc5d4\uc9c4\u00b7\ubaa8\ub4dc \uc120\ud0dd</p> <ul> <li> <p>on\u2011disk \ubaa8\ub4dc\ub85c \uba54\ubaa8\ub9ac \ucd5c\uc801\ud654 (P90 200ms)</p> </li> <li> <p>concurrent segment search, disk\u2011optimized vector engine \uc0ac\uc6a9</p> </li> </ul> </li> </ol>"},{"location":"search-engine/OpenSearch/docker/%EC%98%A4%ED%94%88%EC%84%9C%EC%B9%98%20%EC%84%A4%EC%B9%98%20%EC%A0%84%20%EC%82%AC%EC%96%91%20%ED%99%95%EC%9D%B8/","title":"\uc624\ud508\uc11c\uce58 \uc124\uce58 \uc804 \uc0ac\uc591 \ud655\uc778","text":"<p>\ub2e4\uc74c\uc740 OpenSearch\ub97c <code>192.168.2.171</code> \ub2e8\uc77c \uc11c\ubc84\uc5d0 \uc124\uce58 \ubc0f \uc6b4\uc601\ud558\uae30 \uc704\ud55c \uc790\uc6d0 \ud655\uc778 \uba85\ub839\uc5b4 \ubaa9\ub85d\uc774\ub2e4. \uc774 \ubaa9\ub85d\uc740 CPU, \uba54\ubaa8\ub9ac, \ub514\uc2a4\ud06c, \ucee4\ub110 \ud30c\ub77c\ubbf8\ud130, Docker \ud658\uacbd, GPU \uc790\uc6d0 \ub4f1 OpenSearch \uc124\uce58 \ubc0f ML \uae30\ub2a5\uc744 \uc548\uc815\uc801\uc73c\ub85c \uc2e4\ud589\ud558\uae30 \uc704\ud55c \ud575\uc2ec \uc815\ubcf4\ub97c \uc810\uac80\ud558\ub294 \ub370 \ud544\uc694\ud55c \ubaa8\ub4e0 \uba85\ub839\uc5b4\ub97c \ud3ec\ud568\ud558\uace0 \uc788\ub2e4. </p> <p>\uba85\ub839\uc5b4 \uc2e4\ud589 \uc21c\uc11c\ub300\ub85c \uc810\uac80\ud558\uba74 \ucda9\ubd84\ud558\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EC%98%A4%ED%94%88%EC%84%9C%EC%B9%98%20%EC%84%A4%EC%B9%98%20%EC%A0%84%20%EC%82%AC%EC%96%91%20%ED%99%95%EC%9D%B8/#opensearch","title":"OpenSearch \uc124\uce58 \ubc0f \ube4c\ub4dc\ub97c \uc704\ud55c \uc11c\ubc84 \uc790\uc6d0 \ud655\uc778 \uc808\ucc28","text":""},{"location":"search-engine/OpenSearch/docker/%EC%98%A4%ED%94%88%EC%84%9C%EC%B9%98%20%EC%84%A4%EC%B9%98%20%EC%A0%84%20%EC%82%AC%EC%96%91%20%ED%99%95%EC%9D%B8/#1","title":"1. \uc6b4\uc601\uccb4\uc81c \ubc0f \ucee4\ub110 \uc815\ubcf4 \ud655\uc778","text":"<pre><code># OS \ubc84\uc804 \ud655\uc778\ncat /etc/os-release\n\n# \ucee4\ub110 \ubc84\uc804 \ud655\uc778\nuname -r\n</code></pre> <p>\ud574\ub2f9 \uc815\ubcf4\ub97c \ud1b5\ud574 OpenSearch\uc5d0\uc11c \uc694\uad6c\ud558\ub294 Linux \ud658\uacbd\uacfc \ucee4\ub110 \ubc84\uc804\uc744 \ucda9\uc871\ud558\ub294\uc9c0 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EC%98%A4%ED%94%88%EC%84%9C%EC%B9%98%20%EC%84%A4%EC%B9%98%20%EC%A0%84%20%EC%82%AC%EC%96%91%20%ED%99%95%EC%9D%B8/#2-cpu","title":"2. CPU \uc790\uc6d0 \ud655\uc778","text":"<pre><code># CPU \uc544\ud0a4\ud14d\ucc98 \ubc0f \ub17c\ub9ac \ucf54\uc5b4 \uc815\ubcf4 \ud655\uc778\nlscpu\n\n# \uc0ac\uc6a9 \uac00\ub2a5\ud55c \ucf54\uc5b4 \uc218 \ud655\uc778\nnproc\n</code></pre> <p>OpenSearch\ub294 \uc77c\ubc18\uc801\uc73c\ub85c 4\ucf54\uc5b4 \uc774\uc0c1\uc744 \uad8c\uc7a5\ud558\uba70, ML \uae30\ub2a5\uc774\ub098 \ub300\ub7c9 \uc0c9\uc778 \uc791\uc5c5\uc744 \uc218\ud589\ud560 \uacbd\uc6b0 \ub354 \ub9ce\uc740 \ucf54\uc5b4\uac00 \ud544\uc694\ud558\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EC%98%A4%ED%94%88%EC%84%9C%EC%B9%98%20%EC%84%A4%EC%B9%98%20%EC%A0%84%20%EC%82%AC%EC%96%91%20%ED%99%95%EC%9D%B8/#3","title":"3. \uba54\ubaa8\ub9ac \uc6a9\ub7c9 \ud655\uc778","text":"<pre><code># \ucd1d \uba54\ubaa8\ub9ac \ubc0f \uc0ac\uc6a9 \uac00\ub2a5\ud55c \uba54\ubaa8\ub9ac \ud655\uc778\nfree -h\n\n# kB \ub2e8\uc704\ub85c \ud655\uc778\ud560 \uacbd\uc6b0\ngrep MemTotal /proc/meminfo\n</code></pre> <p>ML \ucd94\ub860 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0 16GB \uc774\uc0c1\uc758 \uba54\ubaa8\ub9ac\ub97c \uad8c\uc7a5\ud558\uba70, \uc77c\ubc18 \uac80\uc0c9 \ud074\ub7ec\uc2a4\ud130 \uad6c\uc131\uc5d0\ub294 8GB \uc774\uc0c1\uc774 \ud544\uc694\ud558\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EC%98%A4%ED%94%88%EC%84%9C%EC%B9%98%20%EC%84%A4%EC%B9%98%20%EC%A0%84%20%EC%82%AC%EC%96%91%20%ED%99%95%EC%9D%B8/#4","title":"4. \ub514\uc2a4\ud06c \uc6a9\ub7c9 \ud655\uc778","text":"<pre><code># \ub8e8\ud2b8 \ud30c\ud2f0\uc158 \ub514\uc2a4\ud06c \uc0ac\uc6a9\ub7c9 \ud655\uc778\ndf -h /\n\n# \ub514\uc2a4\ud06c \uc77d\uae30 \uc18d\ub3c4 \uce21\uc815 (\uc635\uc158)\nsudo hdparm -Tt /dev/sda\n</code></pre> <p>\uc0c9\uc778 \ubc0f \ubca1\ud130 \uc800\uc7a5 \uc6a9\ub7c9 \ud655\ubcf4\ub97c \uc704\ud574 \ucd5c\uc18c 10GB \uc774\uc0c1\uc758 \uc5ec\uc720 \uacf5\uac04\uc774 \uc788\uc5b4\uc57c \ud558\uba70, \ub514\uc2a4\ud06c I/O \uc131\ub2a5\ub3c4 \uc911\uc694\ud558\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EC%98%A4%ED%94%88%EC%84%9C%EC%B9%98%20%EC%84%A4%EC%B9%98%20%EC%A0%84%20%EC%82%AC%EC%96%91%20%ED%99%95%EC%9D%B8/#5","title":"5. \uac00\uc0c1 \uba54\ubaa8\ub9ac \ubc0f \ucee4\ub110 \ud30c\ub77c\ubbf8\ud130 \ud655\uc778","text":"<pre><code># \uc2a4\uc651 \uc601\uc5ed \ud65c\uc131\ud654 \uc5ec\ubd80\nswapon --summary\n\n# \uba54\ubaa8\ub9ac \ub9f5 \ucd5c\ub300\uac12 \ud655\uc778 (\ucd5c\uc18c 262144 \uc774\uc0c1\uc774\uc5b4\uc57c \ud568)\nsysctl vm.max_map_count\n</code></pre> <p><code>vm.max_map_count</code>\ub294 OpenSearch\uac00 Lucene \uc778\ub371\uc2a4\ub97c \ub85c\ub4dc\ud558\ub294 \ub370 \ud544\uc694\ud55c \uc124\uc815\uc73c\ub85c, \ubbf8\ub9cc\uc77c \uacbd\uc6b0 \uc2e4\ud589 \uc624\ub958\uac00 \ubc1c\uc0dd\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EC%98%A4%ED%94%88%EC%84%9C%EC%B9%98%20%EC%84%A4%EC%B9%98%20%EC%A0%84%20%EC%82%AC%EC%96%91%20%ED%99%95%EC%9D%B8/#6-docker","title":"6. Docker \uc124\uce58 \ubc0f \uc2e4\ud589 \uc0c1\ud0dc \ud655\uc778","text":"<pre><code># Docker \ubc84\uc804 \ud655\uc778\ndocker --version\n\n# Docker \ub370\ubaac \uc2e4\ud589 \uc5ec\ubd80 \ud655\uc778\nsudo systemctl status docker\n</code></pre> <p>Docker Compose \uae30\ubc18 \ubc30\ud3ec\ub97c \uc704\ud574 Docker\uac00 \uc124\uce58\ub418\uc5b4 \uc788\uc5b4\uc57c \ud558\uba70, \uc2e4\ud589 \uc911\uc774\uc5b4\uc57c \ud55c\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EC%98%A4%ED%94%88%EC%84%9C%EC%B9%98%20%EC%84%A4%EC%B9%98%20%EC%A0%84%20%EC%82%AC%EC%96%91%20%ED%99%95%EC%9D%B8/#7","title":"7. \ud3ec\ud2b8 \ubc14\uc778\ub529 \uc0c1\ud0dc \ud655\uc778","text":"<pre><code># 9200 (OpenSearch), 9600 (metrics), 5601 (Dashboards) \ud3ec\ud2b8 \ud655\uc778\nsudo ss -tuln | grep -E '9200|9600|5601'\n</code></pre> <p>\ud574\ub2f9 \ud3ec\ud2b8\uac00 \ubc29\ud654\ubcbd \ub610\ub294 \ub2e4\ub978 \uc11c\ube44\uc2a4\uc5d0 \uc758\ud574 \ub9c9\ud600 \uc788\uc9c0 \uc54a\uc544\uc57c OpenSearch\uc640 Dashboard\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uc678\ubd80\uc5d0 \ub178\ucd9c\ub41c\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EC%98%A4%ED%94%88%EC%84%9C%EC%B9%98%20%EC%84%A4%EC%B9%98%20%EC%A0%84%20%EC%82%AC%EC%96%91%20%ED%99%95%EC%9D%B8/#8-java","title":"8. Java \ub7f0\ud0c0\uc784 \ud655\uc778 (\ube4c\ub4dc \uc804\uc6a9 \uc2dc)","text":"<pre><code># Java \ubc84\uc804 \ud655\uc778\njava -version\n</code></pre> <p>OpenSearch\ub294 \uae30\ubcf8\uc801\uc73c\ub85c Java 11+\ub97c \ud3ec\ud568\ud558\uc9c0\ub9cc, \uc218\ub3d9 \ube4c\ub4dc\ub098 \uac1c\ubc1c \ud658\uacbd\uc5d0\uc11c\ub294 Java \uc124\uce58 \uc5ec\ubd80\ub97c \ud655\uc778\ud574\uc57c \ud55c\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EC%98%A4%ED%94%88%EC%84%9C%EC%B9%98%20%EC%84%A4%EC%B9%98%20%EC%A0%84%20%EC%82%AC%EC%96%91%20%ED%99%95%EC%9D%B8/#9-gpu","title":"9. GPU \uc790\uc6d0 \ud655\uc778 (\uc120\ud0dd \uc0ac\ud56d)","text":"<pre><code># NVIDIA GPU \uc815\ubcf4 \ud655\uc778 (CUDA \uae30\ubc18)\nnvidia-smi\n\n# AMD ROCm \uae30\ubc18 GPU \ud655\uc778\nrocminfo\n\n# GPU \uc7a5\uce58 \uc815\ubcf4 \ud655\uc778\nlshw -C display\n</code></pre> <p>ML \ubaa8\ub378 \ucd94\ub860 \uc131\ub2a5\uc744 \ub192\uc774\uae30 \uc704\ud574 GPU\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4\uba74, \ud574\ub2f9 GPU\uc758 \uc885\ub958 \ubc0f VRAM \uc6a9\ub7c9\uc744 \ud655\uc778\ud574\uc57c \ud55c\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EC%98%A4%ED%94%88%EC%84%9C%EC%B9%98%20%EC%84%A4%EC%B9%98%20%EC%A0%84%20%EC%82%AC%EC%96%91%20%ED%99%95%EC%9D%B8/#10-cgroup-docker","title":"10. cgroup \ubc0f Docker \uc790\uc6d0 \uaca9\ub9ac \uac00\ub2a5 \uc5ec\ubd80 \ud655\uc778","text":"<pre><code># \uc2dc\uc2a4\ud15c\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 cgroup \ubc84\uc804 \ud655\uc778\nmount | grep cgroup\n\n# cgroup2 \uc0ac\uc6a9 \uc5ec\ubd80 \ud655\uc778\nstat -fc %T /sys/fs/cgroup\n</code></pre> <p>Docker\uac00 cgroup v2\ub97c \uc0ac\uc6a9\ud558\uace0 \uc788\ub2e4\uba74, \uba54\ubaa8\ub9ac \ubc0f CPU \uc81c\ud55c \uae30\ub2a5\uc774 \ub354 \uc815\ubc00\ud558\uac8c \uc791\ub3d9\ud55c\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EC%98%A4%ED%94%88%EC%84%9C%EC%B9%98%20%EC%84%A4%EC%B9%98%20%EC%A0%84%20%EC%82%AC%EC%96%91%20%ED%99%95%EC%9D%B8/#11-ulimit","title":"11. \uc0ac\uc6a9\uc790 \uc790\uc6d0 \uc81c\ud55c (ulimit) \ud655\uc778","text":"<pre><code># \ud604\uc7ac \uc720\uc800\uc758 \ub9ac\uc18c\uc2a4 \uc81c\ud55c \ud655\uc778\nulimit -a\n\n# \uba54\ubaa8\ub9ac lock \uc81c\ud55c \ud655\uc778\nulimit -l\n</code></pre> <p>OpenSearch\ub294 \uba54\ubaa8\ub9ac \ub77d(lock)\uc774 \ud544\uc694\ud558\ubbc0\ub85c <code>ulimit -l</code>\uc774 <code>unlimited</code> \uc0c1\ud0dc\uc774\uac70\ub098 \ucda9\ubd84\ud788 \ub192\uc740 \uac12\uc73c\ub85c \uc124\uc815\ub418\uc5b4 \uc788\uc5b4\uc57c \ud55c\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EC%98%A4%ED%94%88%EC%84%9C%EC%B9%98%20%EC%84%A4%EC%B9%98%20%EC%A0%84%20%EC%82%AC%EC%96%91%20%ED%99%95%EC%9D%B8/#_1","title":"\uc694\uc57d","text":"<p>\uc544\ub798\ub294 OpenSearch \uc124\uce58 \ubc0f ML \uae30\ub2a5\uc744 \uc548\uc815\uc801\uc73c\ub85c \uc6b4\uc601\ud558\uae30 \uc704\ud55c \ucd5c\uc18c \uc694\uad6c \uc870\uac74\uc774\ub2e4.</p> \ud56d\ubaa9 \uad8c\uc7a5 \uac12 CPU 4 \ucf54\uc5b4 \uc774\uc0c1 \uba54\ubaa8\ub9ac 8GB \uc774\uc0c1 (ML \uae30\ub2a5 \uc2dc 16GB \uc774\uc0c1) \ub514\uc2a4\ud06c 10GB \uc774\uc0c1 \uc5ec\uc720 \uacf5\uac04 vm.max_map_count 262144 \uc774\uc0c1 Docker \uc124\uce58 \ubc0f \uc2e4\ud589 \uc0c1\ud0dc \ud3ec\ud2b8 9200, 9600, 5601 \uac1c\ubc29 \uc0c1\ud0dc GPU (\uc120\ud0dd) CUDA \ub610\ub294 ROCm \ud638\ud658 GPU"},{"location":"search-engine/OpenSearch/docker/%EC%B5%9C%EC%A0%81%EC%9D%98%20%EB%8B%A8%EC%9D%BC%20%EC%84%9C%EB%B2%84%20%EC%98%A4%ED%94%88%EC%84%9C%EC%B9%98%20%EB%B0%B0%ED%8F%AC/","title":"\ucd5c\uc801\uc758 \ub2e8\uc77c \uc11c\ubc84 \uc624\ud508\uc11c\uce58 \ubc30\ud3ec","text":"<p>OpenSearch \ud074\ub7ec\uc2a4\ud130 \ud658\uacbd\uc5d0\uc11c ML(\uba38\uc2e0\ub7ec\ub2dd) \uae30\ubc18 \ubca1\ud130 \uc784\ubca0\ub529 \uae30\ub2a5\uc744 \uc548\uc815\uc801\uc73c\ub85c \uc81c\uacf5\ud558\ub824\uba74 \ub178\ub4dc \uc5ed\ud560 \ubd84\ub9ac\uc640 \uc790\uc6d0 \uaca9\ub9ac \uc124\uc815\uc774 \ud544\uc218\ub2e4. </p> <p>\ubcf8 \uae00\uc5d0\uc11c\ub294 Docker Compose \uae30\ubc18\uc73c\ub85c \uc774\ub97c \uad6c\ud604\ud558\ub294 \ucd5c\uc801\ud654\ub41c \uc608\uc2dc\uc640 \ud568\uaed8, \uacf5\uc2dd \ubb38\uc11c \ubc0f \uc2e4\ubb34 \ud301\uc744 \uc0c1\uc138\ud788 \uc815\ub9ac\ud55c\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%EC%B5%9C%EC%A0%81%EC%9D%98%20%EB%8B%A8%EC%9D%BC%20%EC%84%9C%EB%B2%84%20%EC%98%A4%ED%94%88%EC%84%9C%EC%B9%98%20%EB%B0%B0%ED%8F%AC/#1","title":"1. \uc0ac\uc804 \uc900\ube44","text":"<ul> <li> <p>Docker \ubc0f Docker Compose \uc124\uce58 (OpenSearch Docs)</p> </li> <li> <p>Linux \ucee4\ub110 \uc138\ud305: <code>vm.max_map_count=262144</code>, <code>swapoff -a</code>\ub294 \ud544\uc218\ub85c, \ud504\ub85c\ub355\uc158 \uc131\ub2a5 \uc800\ud558 \ubc29\uc9c0\uc6a9\uc774\ub2e4 (OpenSearch Docs)</p> </li> <li> <p>\ucee8\ud14c\uc774\ub108\uc758 <code>/dev/shm</code> \uae30\ubcf8 \ud06c\uae30\ub294 64\u202fMB\uc774\ubbc0\ub85c, Performance Analyzer\ub97c \uc4f8 \uacbd\uc6b0 <code>--shm-size=1gb</code> \uc124\uc815\uc774 \uad8c\uace0\ub41c\ub2e4 (OpenSearch Docs)</p> </li> </ul>"},{"location":"search-engine/OpenSearch/docker/%EC%B5%9C%EC%A0%81%EC%9D%98%20%EB%8B%A8%EC%9D%BC%20%EC%84%9C%EB%B2%84%20%EC%98%A4%ED%94%88%EC%84%9C%EC%B9%98%20%EB%B0%B0%ED%8F%AC/#2-docker-compose","title":"2. Docker Compose \uc608\uc2dc","text":"<pre><code>services:\n  opensearch-data:\n    image: opensearchproject/opensearch:latest\n    container_name: opensearch-data\n    environment:\n      - cluster.name=opensearch-cluster\n      - node.name=opensearch-data\n      - node.roles=data,ingest,remote_cluster_client\n      - bootstrap.memory_lock=true\n      - OPENSEARCH_JAVA_OPTS=-Xms4g -Xmx4g\n      - discovery.seed_hosts=opensearch-data,opensearch-ml\n      - cluster.initial_cluster_manager_nodes=opensearch-data\n    ulimits:\n      memlock:\n        soft: -1\n        hard: -1\n      nofile:\n        soft: 65536\n        hard: 65536\n    deploy:\n      resources:\n        limits:\n          memory: 6g\n          cpus: \"2.0\"\n    ports:\n      - 9200:9200\n      - 9600:9600\n    networks:\n      - opensearch-net\n\n  opensearch-ml:\n    image: opensearchproject/opensearch:latest\n    container_name: opensearch-ml\n    environment:\n      - cluster.name=opensearch-cluster\n      - node.name=opensearch-ml\n      - node.roles=ml,remote_cluster_client\n      - bootstrap.memory_lock=true\n      - OPENSEARCH_JAVA_OPTS=-Xms2g -Xmx2g\n      - discovery.seed_hosts=opensearch-data,opensearch-ml\n      - cluster.initial_cluster_manager_nodes=opensearch-data\n      - plugins.ml_commons.only_run_on_ml_node=true\n      - plugins.ml_commons.task_dispatch_policy=least_load\n      - plugins.ml_commons.max_ml_task_per_node=2\n      - plugins.ml_commons.native_memory_threshold=90\n      - plugins.ml_commons.jvm_heap_memory_threshold=85\n    ulimits:\n      memlock:\n        soft: -1\n        hard: -1\n      nofile:\n        soft: 65536\n        hard: 65536\n    deploy:\n      resources:\n        limits:\n          memory: 4g\n          cpus: \"1.0\"\n    networks:\n      - opensearch-net\n\n  opensearch-dashboards:\n    image: opensearchproject/opensearch-dashboards:latest\n    container_name: opensearch-dashboards\n    depends_on:\n      - opensearch-data\n    environment:\n      - OPENSEARCH_HOSTS=[\"https://opensearch-data:9200\"]\n      - OPENSEARCH_INITIAL_ADMIN_PASSWORD=ChangeMeStrong\n    ports:\n      - 5601:5601\n    networks:\n      - opensearch-net\n\nvolumes:\n  opensearch-data-vol:\n\nnetworks:\n  opensearch-net:\n    driver: bridge\n</code></pre>"},{"location":"search-engine/OpenSearch/docker/%EC%B5%9C%EC%A0%81%EC%9D%98%20%EB%8B%A8%EC%9D%BC%20%EC%84%9C%EB%B2%84%20%EC%98%A4%ED%94%88%EC%84%9C%EC%B9%98%20%EB%B0%B0%ED%8F%AC/#3","title":"3. \uc8fc\uc694 \uc124\uc815 \ubd84\uc11d","text":""},{"location":"search-engine/OpenSearch/docker/%EC%B5%9C%EC%A0%81%EC%9D%98%20%EB%8B%A8%EC%9D%BC%20%EC%84%9C%EB%B2%84%20%EC%98%A4%ED%94%88%EC%84%9C%EC%B9%98%20%EB%B0%B0%ED%8F%AC/#31-jvm","title":"3.1 \uc5ed\ud560 \ubd84\ub9ac \ubc0f JVM \ud799 \uc124\uc815","text":"<ul> <li> <p><code>opensearch-data</code>: <code>data, ingest</code> \uc5ed\ud560\ub85c \uc0c9\uc778 \ubc0f \uac80\uc0c9 \ucc98\ub9ac, JVM \ud799 4GB</p> </li> <li> <p><code>opensearch-ml</code>: <code>ml</code> \uc5ed\ud560\ub85c ML \ucd94\ub860 \uc804\uc6a9, JVM \ud799 2GB (OpenSearch Docs)</p> </li> </ul>"},{"location":"search-engine/OpenSearch/docker/%EC%B5%9C%EC%A0%81%EC%9D%98%20%EB%8B%A8%EC%9D%BC%20%EC%84%9C%EB%B2%84%20%EC%98%A4%ED%94%88%EC%84%9C%EC%B9%98%20%EB%B0%B0%ED%8F%AC/#32","title":"3.2 \uc790\uc6d0 \uaca9\ub9ac \uc124\uc815","text":"<ul> <li> <p>Docker <code>deploy.resources.limits</code>\ub85c \uac01\uac01 CPU, \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9 \uc81c\ud55c</p> </li> <li> <p><code>bootstrap.memory_lock=true</code>\uc640 <code>nofile</code> \uc81c\ud55c\uc73c\ub85c \uc2a4\uc651 \ubc0f \ud30c\uc77c \ub514\uc2a4\ud06c\ub9bd\ud130 \uc774\uc288 \ub300\uc751 (OpenSearch, OpenSearch)</p> </li> </ul>"},{"location":"search-engine/OpenSearch/docker/%EC%B5%9C%EC%A0%81%EC%9D%98%20%EB%8B%A8%EC%9D%BC%20%EC%84%9C%EB%B2%84%20%EC%98%A4%ED%94%88%EC%84%9C%EC%B9%98%20%EB%B0%B0%ED%8F%AC/#33-ml-commons","title":"3.3 ML Commons \uc124\uc815","text":"<ul> <li> <p><code>only_run_on_ml_node=true</code>: ML \uc791\uc5c5\uc744 ML \ub178\ub4dc\uc5d0 \uad6d\ud55c (OpenSearch Docs)</p> </li> <li> <p><code>task_dispatch_policy=least_load</code>: \ubd80\ud558 \uc0c1\ud0dc \uae30\ubc18 \ud0dc\uc2a4\ud06c \ubd84\ubc30</p> </li> <li> <p><code>max_ml_task_per_node=2</code>, \uba54\ubaa8\ub9ac\u00b7\ud799 threshold \uc124\uc815\uc73c\ub85c \uc548\uc815\uc131 \uac15\ud654 (OpenSearch Docs)</p> </li> </ul>"},{"location":"search-engine/OpenSearch/docker/%EC%B5%9C%EC%A0%81%EC%9D%98%20%EB%8B%A8%EC%9D%BC%20%EC%84%9C%EB%B2%84%20%EC%98%A4%ED%94%88%EC%84%9C%EC%B9%98%20%EB%B0%B0%ED%8F%AC/#34","title":"3.4 \ud37c\ud3ec\uba3c\uc2a4 \ubd84\uc11d","text":"<ul> <li> <p><code>dev\u2018/dev/shm</code> \uc124\uc815\uc744 \uc704\ud574 \ucd94\uac00 \uc124\uc815 \ud544\uc694\ud560 \uc218 \uc788\uc74c</p> </li> <li> <p><code>environment</code>\uc5d0 <code>OPENSEARCH_JAVA_OPTS</code> \ub85c concurrent-segment-search \ud50c\ub798\uadf8 \uc124\uc815 \ucd94\ucc9c \uc2dc \ucd94\uac00 \uac00\ub2a5 (OpenSearch Docs)</p> </li> </ul>"},{"location":"search-engine/OpenSearch/docker/%EC%B5%9C%EC%A0%81%EC%9D%98%20%EB%8B%A8%EC%9D%BC%20%EC%84%9C%EB%B2%84%20%EC%98%A4%ED%94%88%EC%84%9C%EC%B9%98%20%EB%B0%B0%ED%8F%AC/#4","title":"4. \uc2e4\ud589 \ubc0f \ud655\uc778","text":"<ol> <li> <p>\ucee4\ub110 \uc124\uc815 \ud655\uc778:</p> <pre><code>sudo sysctl -w vm.max_map_count=262144\nsudo swapoff -a\n</code></pre> </li> <li> <p>\ud074\ub7ec\uc2a4\ud130 \uc2e4\ud589:</p> <pre><code>docker compose up -d\n</code></pre> </li> <li> <p>\ub178\ub4dc \uc0c1\ud0dc \uac80\uc99d:</p> <ul> <li> <p><code>curl localhost:9200/_cat/nodes?v</code> \ub85c \ub370\uc774\ud130\u00b7ML \ub178\ub4dc \ubd84\ub9ac \ud655\uc778</p> </li> <li> <p><code>curl localhost:9200/_cluster/settings?include_defaults=true</code> \ub85c ML \uc124\uc815 \ud655\uc778</p> </li> </ul> </li> <li> <p>ML \ud0dc\uc2a4\ud06c \ud14c\uc2a4\ud2b8:     \uc608: <code>/_plugins/_ml/_predict</code> \ud638\ucd9c \uc2dc ML \ub178\ub4dc \uc2e4\ud589 \ud655\uc778 \uac00\ub2a5</p> </li> </ol>"},{"location":"search-engine/OpenSearch/docker/%EC%B5%9C%EC%A0%81%EC%9D%98%20%EB%8B%A8%EC%9D%BC%20%EC%84%9C%EB%B2%84%20%EC%98%A4%ED%94%88%EC%84%9C%EC%B9%98%20%EB%B0%B0%ED%8F%AC/#5","title":"5. \uc6b4\uc601 \ud658\uacbd \uad8c\uc7a5 \uc0ac\ud56d","text":"\uad6c\uc131 \uc0c1\ud669 \uad8c\uc7a5 \ubc29\uc2dd \ud14c\uc2a4\ud2b8/\uac1c\ubc1c \uc704 \uad6c\uc131\uc73c\ub85c \ub2e8\uc77c \uc11c\ubc84 \uba40\ud2f0 \ub178\ub4dc \uac00\ub2a5 \uc18c\uaddc\ubaa8 \ud504\ub85c\ub355\uc158 \uac19\uc740 \uc11c\ubc84\ub77c\ub3c4 \ucee8\ud14c\uc774\ub108 \ub9ac\uc18c\uc2a4 \uc81c\ud55c \ud544\uc694 \uace0\uc131\ub2a5/\ub300\uaddc\ubaa8 \uacbd\uc6b0 ML \ub178\ub4dc\ub294 \ubb3c\ub9ac \uc11c\ubc84 \ub610\ub294 \ubcc4 VM \ubd84\ub9ac"},{"location":"search-engine/OpenSearch/docker/%EC%B5%9C%EC%A0%81%EC%9D%98%20%EB%8B%A8%EC%9D%BC%20%EC%84%9C%EB%B2%84%20%EC%98%A4%ED%94%88%EC%84%9C%EC%B9%98%20%EB%B0%B0%ED%8F%AC/#6","title":"6. \uc694\uc57d","text":"<ul> <li> <p>\ub178\ub4dc \uc5ed\ud560 \ubd84\ub9ac\uc640 Docker \uc790\uc6d0 \uc81c\ud55c \uc124\uc815\uc774 \ud575\uc2ec\uc774\ub2e4.</p> </li> <li> <p>ML \uc791\uc5c5\uc774 \ub370\uc774\ud130 \ucc98\ub9ac\uc5d0 \ubbf8\uce58\ub294 \uc601\ud5a5\uc744 \ucd5c\uc18c\ud654\ud558\uae30 \uc704\ud574 <code>ml</code> \ub178\ub4dc\ub97c \ubd84\ub9ac\ud558\uace0, threshold \uc124\uc815\uc744 \uc0ac\uc6a9\ud55c\ub2e4.</p> </li> <li> <p>\uc6b4\uc601 \ud658\uacbd\uc5d0\uc11c\ub294 \uac00\ub2a5\ud558\uba74 ML \uc804\uc6a9 \uba38\uc2e0\uc73c\ub85c \ud655\uc7a5\ud558\ub294 \uac83\uc774 \uc548\uc815\uacfc \ud655\uc7a5\uc131 \uce21\uba74\uc5d0\uc11c \ucd5c\uc120\uc774\ub2e4.</p> </li> </ul>"},{"location":"search-engine/OpenSearch/docker/%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0%20%EA%B5%AC%EC%84%B1%20%EC%A0%84%EB%9E%B5%20-%20%EC%83%A4%EB%93%9C%20%EB%B6%84%EC%82%B0%20%EC%84%A4%EA%B3%84/","title":"\ud074\ub7ec\uc2a4\ud130 \uad6c\uc131 \uc804\ub7b5   \uc0e4\ub4dc \ubd84\uc0b0 \uc124\uacc4","text":""},{"location":"search-engine/OpenSearch/docker/%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0%20%EA%B5%AC%EC%84%B1%20%EC%A0%84%EB%9E%B5%20-%20%EC%83%A4%EB%93%9C%20%EB%B6%84%EC%82%B0%20%EC%84%A4%EA%B3%84/#1-noderoles","title":"1. <code>node.roles</code> \u2013 \ub178\ub4dc \uc5ed\ud560 \uc815\uc758","text":"<p>OpenSearch \ud074\ub7ec\uc2a4\ud130\ub294 \uac01 \ub178\ub4dc\uc5d0 \uc5ed\ud560\uc744 \ubd80\uc5ec\ud568\uc73c\ub85c\uc368 \uae30\ub2a5\uc744 \ubd84\ub9ac\ud558\uace0 \ub9ac\uc18c\uc2a4\ub97c \ud6a8\uc728\uc801\uc73c\ub85c \ubd84\uc0b0\uc2dc\ud0ac \uc218 \uc788\ub2e4.</p> \uc5ed\ud560 \ud0a4\uc6cc\ub4dc \uc124\uba85 \ud074\ub7ec\uc2a4\ud130 \uad00\ub9ac\uc790 <code>\"cluster_manager\"</code> \ud074\ub7ec\uc2a4\ud130 \uba54\ud0c0\ub370\uc774\ud130(\ub178\ub4dc \ub4f1\ub85d, \ub9c8\uc2a4\ud130 \uc120\ucd9c \ub4f1)\ub97c \uad00\ub9ac\ud558\ub294 \ub178\ub4dc\uc774\ub2e4. \ub370\uc774\ud130 \ub178\ub4dc <code>\"data\"</code> \uc778\ub371\uc2a4\uc758 \uc0e4\ub4dc \ub370\uc774\ud130\ub97c \uc800\uc7a5\ud558\uace0 \uc77d\uae30 \ubc0f \uc4f0\uae30 \uc694\uccad\uc744 \ucc98\ub9ac\ud55c\ub2e4. \uc778\uc81c\uc2a4\ud2b8 \ub178\ub4dc <code>\"ingest\"</code> \ub370\uc774\ud130 \uc218\uc9d1 \uc2dc \uc804\ucc98\ub9ac \ud30c\uc774\ud504\ub77c\uc778\uc744 \uc801\uc6a9\ud558\ub294 \ub178\ub4dc\uc774\ub2e4. \uba38\uc2e0\ub7ec\ub2dd \ub178\ub4dc <code>\"ml\"</code> \ubaa8\ub378 \uc11c\ube59, \uc774\uc0c1 \ud0d0\uc9c0 \ub4f1\uc758 ML \uae30\ub2a5\uc744 \uc218\ud589\ud558\ub294 \ub178\ub4dc\uc774\ub2e4. \uac80\uc0c9 \uc804\uc6a9 \ub178\ub4dc <code>\"search\"</code> \uc77d\uae30(\uac80\uc0c9) \uc791\uc5c5\ub9cc \uc218\ud589\ud558\ub3c4\ub85d \uc81c\ud55c\ud560 \uc218 \uc788\ub294 \ub178\ub4dc\uc774\ub2e4. \uc870\uc815 \uc804\uc6a9 \ub178\ub4dc \ube48 \ubc30\uc5f4 <code>[]</code> \ucffc\ub9ac \ub77c\uc6b0\ud305 \ub4f1\ub9cc \uc218\ud589\ud558\uba70 \ud074\ub7ec\uc2a4\ud130 \uba54\ud0c0\ub370\uc774\ud130\ub098 \ub370\uc774\ud130 \uc0e4\ub4dc\ub97c \uac00\uc9c0\uc9c0 \uc54a\ub294\ub2e4. \uc8fc\ub85c OpenSearch Dashboards\uc5d0\uc11c \uc0ac\uc6a9\ud55c\ub2e4."},{"location":"search-engine/OpenSearch/docker/%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0%20%EA%B5%AC%EC%84%B1%20%EC%A0%84%EB%9E%B5%20-%20%EC%83%A4%EB%93%9C%20%EB%B6%84%EC%82%B0%20%EC%84%A4%EA%B3%84/#_1","title":"\uad8c\uc7a5 \ub178\ub4dc \ubc30\uce58","text":"<ul> <li> <p><code>m1</code>: <code>[\"cluster_manager\"]</code></p> </li> <li> <p><code>d1</code>, <code>d2</code>: <code>[\"data\", \"ingest\"]</code></p> </li> <li> <p><code>ml1</code>: <code>[\"ml\"]</code></p> </li> <li> <p><code>c1</code>: <code>[]</code></p> </li> </ul>"},{"location":"search-engine/OpenSearch/docker/%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0%20%EA%B5%AC%EC%84%B1%20%EC%A0%84%EB%9E%B5%20-%20%EC%83%A4%EB%93%9C%20%EB%B6%84%EC%82%B0%20%EC%84%A4%EA%B3%84/#2-nodeattr","title":"2. <code>node.attr</code> \u2013 \uc0ac\uc6a9\uc790 \uc815\uc758 \ub178\ub4dc \uc18d\uc131","text":"<p><code>node.attr.&lt;\uc18d\uc131\uba85&gt;=&lt;\uac12&gt;</code> \ud615\uc2dd\uc73c\ub85c \ub178\ub4dc\uc5d0 \uba54\ud0c0\ub370\uc774\ud130\ub97c \uc124\uc815\ud560 \uc218 \uc788\uc73c\uba70, \uc0e4\ub4dc \ubd84\uc0b0 \uc815\ucc45, \uc218\uba85 \uae30\ubc18 \ud2f0\uc5b4\ub9c1(Hot/Warm/Cold), \uc7a5\uc560 \ub3c4\uba54\uc778 \ubd84\uc0b0 \ub4f1\uc5d0 \ud65c\uc6a9\ub41c\ub2e4.</p> \uc18d\uc131\uba85 \uc608\uc2dc \uc6a9\ub3c4 <code>zone</code> <code>zone-a</code>, <code>zone-b</code> \uac00\uc6a9 \uc601\uc5ed(AZ) \uae30\ubc18\uc73c\ub85c \uc0e4\ub4dc \ubcf5\uc81c\ubcf8 \ubd84\uc0b0\uc5d0 \uc0ac\uc6a9\ub41c\ub2e4. <code>temp</code> <code>hot</code>, <code>warm</code>, <code>cold</code> \ub370\uc774\ud130\uc758 \uc218\uba85 \uc8fc\uae30\uc5d0 \ub530\ub77c \ud56b/\uc6dc/\ucf5c\ub4dc \ud2f0\uc5b4\ub97c \uc9c0\uc815\ud55c\ub2e4. <code>rack</code> <code>rack1</code>, <code>rack2</code> \ubb3c\ub9ac\uc801 \uc7a5\uc560 \ub3c4\uba54\uc778 \ubd84\uc0b0\uc744 \uc704\ud574 \uc124\uc815\ud560 \uc218 \uc788\ub2e4."},{"location":"search-engine/OpenSearch/docker/%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0%20%EA%B5%AC%EC%84%B1%20%EC%A0%84%EB%9E%B5%20-%20%EC%83%A4%EB%93%9C%20%EB%B6%84%EC%82%B0%20%EC%84%A4%EA%B3%84/#_2","title":"\uc608\uc2dc \uc124\uc815","text":"<pre><code>node.attr.zone: zone-a\nnode.attr.temp: hot\n</code></pre>"},{"location":"search-engine/OpenSearch/docker/%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0%20%EA%B5%AC%EC%84%B1%20%EC%A0%84%EB%9E%B5%20-%20%EC%83%A4%EB%93%9C%20%EB%B6%84%EC%82%B0%20%EC%84%A4%EA%B3%84/#3","title":"3. \uc0e4\ub4dc \ubc0f \ubcf5\uc81c \uc124\uc815 \uc815\ucc45","text":"<p>OpenSearch\ub294 \uc778\ub371\uc2a4\ub97c \uc0dd\uc131\ud560 \ub54c Primary Shard\uc640 Replica Shard\ub97c \uc9c0\uc815\ud558\uc5ec \ub370\uc774\ud130\ub97c \ubd84\uc0b0 \uc800\uc7a5\ud558\uace0, \uace0\uac00\uc6a9\uc131\uacfc \ubcd1\ub82c\ucc98\ub9ac\ub97c \ubcf4\uc7a5\ud55c\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0%20%EA%B5%AC%EC%84%B1%20%EC%A0%84%EB%9E%B5%20-%20%EC%83%A4%EB%93%9C%20%EB%B6%84%EC%82%B0%20%EC%84%A4%EA%B3%84/#_3","title":"\uc8fc\uc694 \uac1c\ub150","text":"<ul> <li> <p>Primary Shard: \uc6d0\ubcf8 \ub370\uc774\ud130\ub97c \uc800\uc7a5\ud558\ub294 \uc0e4\ub4dc\uc774\ub2e4.</p> </li> <li> <p>Replica Shard: Primary\uc758 \ubcf5\uc81c\ubcf8\uc73c\ub85c, \uc7a5\uc560 \ubcf5\uad6c \ubc0f \uc77d\uae30 \ucc98\ub9ac\uc5d0 \ud65c\uc6a9\ub41c\ub2e4.</p> </li> </ul>"},{"location":"search-engine/OpenSearch/docker/%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0%20%EA%B5%AC%EC%84%B1%20%EC%A0%84%EB%9E%B5%20-%20%EC%83%A4%EB%93%9C%20%EB%B6%84%EC%82%B0%20%EC%84%A4%EA%B3%84/#_4","title":"\uc0e4\ub4dc \ubc30\uce58 \uacf5\uc2dd","text":"<pre><code>\uc0e4\ub4dc \uc218 \u00d7 (\ubcf5\uc81c \uc218 + 1) = \ud074\ub7ec\uc2a4\ud130\uac00 \ud544\uc694\ub85c \ud558\ub294 \ucd1d \uc0e4\ub4dc \uc218\n</code></pre> <p>\uc774 \uacf5\uc2dd\uc740 \ub370\uc774\ud130 \ub178\ub4dc \uc218\uc5d0 \uae30\ubc18\ud558\uc5ec \uc801\uc808\ud55c \uc0e4\ub4dc \uad6c\uc131\uc744 \ud310\ub2e8\ud558\ub294 \uae30\uc900\uc774 \ub41c\ub2e4.</p> \uc0e4\ub4dc \uc218 \ubcf5\uc81c \uc218 \ucd1d \uc0e4\ub4dc \uc218 \ucd5c\uc18c \uad8c\uc7a5 \ub370\uc774\ud130 \ub178\ub4dc \uc218 3 1 6 2\uac1c \uc774\uc0c1 5 2 15 3\uac1c \uc774\uc0c1"},{"location":"search-engine/OpenSearch/docker/%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0%20%EA%B5%AC%EC%84%B1%20%EC%A0%84%EB%9E%B5%20-%20%EC%83%A4%EB%93%9C%20%EB%B6%84%EC%82%B0%20%EC%84%A4%EA%B3%84/#_5","title":"\uc778\ub371\uc2a4 \uc0dd\uc131 \uc2dc \uc124\uc815 \uc608\uc2dc","text":"<pre><code>PUT /my-index\n{\n  \"settings\": {\n    \"number_of_shards\": 3,\n    \"number_of_replicas\": 1\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/docker/%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0%20%EA%B5%AC%EC%84%B1%20%EC%A0%84%EB%9E%B5%20-%20%EC%83%A4%EB%93%9C%20%EB%B6%84%EC%82%B0%20%EC%84%A4%EA%B3%84/#4","title":"4. \uc0e4\ub4dc \ud560\ub2f9 \uc778\uc2dd \uc124\uc815","text":"<p><code>cluster.routing.allocation.awareness</code> \uc124\uc815\uc740 \uc0e4\ub4dc\uac00 \ud2b9\uc815 <code>node.attr</code> \uac12(zone, rack \ub4f1)\uc744 \uae30\uc900\uc73c\ub85c \uace0\ub974\uac8c \ubd84\uc0b0\ub418\ub3c4\ub85d \uac15\uc81c\ud558\ub294 \uae30\ub2a5\uc774\ub2e4. \uc774\ub97c \ud1b5\ud574 \ud2b9\uc815 zone\uc774\ub098 rack\uc5d0 \ubaa8\ub4e0 primary/replica\uac00 \ubab0\ub9ac\ub294 \uac83\uc744 \ubc29\uc9c0\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0%20%EA%B5%AC%EC%84%B1%20%EC%A0%84%EB%9E%B5%20-%20%EC%83%A4%EB%93%9C%20%EB%B6%84%EC%82%B0%20%EC%84%A4%EA%B3%84/#_6","title":"\ud074\ub7ec\uc2a4\ud130 \uc218\uc900 \uc124\uc815 \uc608\uc2dc","text":"<pre><code>PUT /_cluster/settings\n{\n  \"persistent\": {\n    \"cluster.routing.allocation.awareness.attributes\": \"zone\"\n  }\n}\n</code></pre> <p>\uc774 \uc124\uc815\uc744 \ud1b5\ud574 OpenSearch\ub294 \uc0e4\ub4dc\ub97c <code>zone</code> \uc18d\uc131\uc5d0 \ub530\ub77c \uc790\ub3d9\uc73c\ub85c \uade0\ub4f1 \ubd84\uc0b0\ud558\uac8c \ub41c\ub2e4.</p>"},{"location":"search-engine/OpenSearch/docker/%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0%20%EA%B5%AC%EC%84%B1%20%EC%A0%84%EB%9E%B5%20-%20%EC%83%A4%EB%93%9C%20%EB%B6%84%EC%82%B0%20%EC%84%A4%EA%B3%84/#5","title":"5. \uc2e4\uc804 \uc608\uc2dc \uc2dc\ub098\ub9ac\uc624","text":"<p>\ud074\ub7ec\uc2a4\ud130\ub97c \ub2e4\uc74c\uacfc \uac19\uc774 \uad6c\uc131\ud558\uace0\uc790 \ud55c\ub2e4.</p> <ul> <li> <p><code>m1</code> \ub178\ub4dc\ub294 \ud074\ub7ec\uc2a4\ud130 \uad00\ub9ac\uc790 \uc5ed\ud560\ub9cc \uc218\ud589\ud55c\ub2e4.</p> </li> <li> <p><code>d1</code>, <code>d2</code>\ub294 \ub370\uc774\ud130 \uc800\uc7a5 \ubc0f \uc778\uc81c\uc2a4\ud2b8 \uc791\uc5c5\uc744 \ucc98\ub9ac\ud55c\ub2e4.</p> </li> <li> <p><code>ml1</code>\uc740 ML \uae30\ub2a5\ub9cc \uc218\ud589\ud55c\ub2e4.</p> </li> <li> <p><code>c1</code>\uc740 \ub300\uc2dc\ubcf4\ub4dc \uc5f0\uacb0 \uc804\uc6a9\uc774\ub2e4.</p> </li> <li> <p><code>zone-a</code>, <code>zone-b</code>\ub85c \ub098\ub220 \uc774\uc911\ud654\ud558\uace0, hot/warm \ud2f0\uc5b4\ub3c4 \uc801\uc6a9\ud55c\ub2e4. </p> </li> </ul> <p>\uc774\ub54c \ub178\ub4dc \uc124\uc815\uc740 \ub2e4\uc74c\uacfc \uac19\ub2e4.</p> \ub178\ub4dc <code>node.roles</code> <code>node.attr.zone</code> <code>node.attr.temp</code> m1 <code>[\"cluster_manager\"]</code> <code>zone-a</code> \uc5c6\uc74c d1 <code>[\"data\", \"ingest\"]</code> <code>zone-a</code> <code>hot</code> d2 <code>[\"data\", \"ingest\"]</code> <code>zone-b</code> <code>warm</code> ml1 <code>[\"ml\"]</code> <code>zone-b</code> \uc5c6\uc74c c1 <code>[]</code> (coordinating only) <code>zone-a</code> \uc5c6\uc74c <p>\uadf8\ub9ac\uace0 \ud074\ub7ec\uc2a4\ud130 \uc124\uc815\uc740 \ub2e4\uc74c\uacfc \uac19\uc774 \uc801\uc6a9\ud55c\ub2e4.</p> <pre><code>PUT /_cluster/settings\n{\n  \"persistent\": {\n    \"cluster.routing.allocation.awareness.attributes\": \"zone\"\n  }\n}\n</code></pre> <p>\uc778\ub371\uc2a4\ub97c \ub9cc\ub4e4 \ub54c\ub294 \ub2e4\uc74c\uacfc \uac19\uc774 \uc0e4\ub4dc\uc640 \ubcf5\uc81c\ubcf8 \uc218\ub97c \uc124\uc815\ud55c\ub2e4.</p> <pre><code>PUT /your-index\n{\n  \"settings\": {\n    \"number_of_shards\": 3,\n    \"number_of_replicas\": 1\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/docker/%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0%20%EA%B5%AC%EC%84%B1%20%EC%A0%84%EB%9E%B5%20-%20%EC%83%A4%EB%93%9C%20%EB%B6%84%EC%82%B0%20%EC%84%A4%EA%B3%84/#_7","title":"\uc694\uc57d","text":"\ud56d\ubaa9 \uc124\uba85 \uc608\uc2dc <code>node.roles</code> \ub178\ub4dc\uc758 \uc5ed\ud560 \uc815\uc758 <code>[\"data\", \"ingest\"]</code>, <code>[\"ml\"]</code>, <code>[]</code> <code>node.attr</code> \uc0e4\ub4dc \ubd84\uc0b0 \ubc0f \ud2f0\uc5b4\ub9c1 \uc815\ucc45 <code>zone: zone-a</code>, <code>temp: hot</code> <code>number_of_shards</code> \uc778\ub371\uc2a4\uc758 \uae30\ubcf8 \uc0e4\ub4dc \uc218 <code>3</code> <code>number_of_replicas</code> \ubcf5\uc81c\ubcf8 \uc218 <code>1</code> <code>cluster.routing.allocation.awareness</code> zone/rack \uae30\ubc18 \ubd84\uc0b0 \uc0e4\ub4dc \ubc30\uce58 <code>\"zone\"</code>"},{"location":"search-engine/OpenSearch/indexing/vector%20indexing/","title":"Vector indexing","text":"<p>OpenSearch\ub294 \ubca1\ud130 \uae30\ubc18\uc758 \uac80\uc0c9 \uae30\ub2a5\uc744 \uc9c0\uc6d0\ud558\uba70, \uc774\ub97c \uc704\ud574 k-NN(k-nearest neighbor) \uc778\ub371\uc2a4\ub97c \uc0dd\uc131\ud560 \uc218 \uc788\ub2e4. </p> <p>\ubca1\ud130 \uc778\ub371\uc2a4\ub294 \ub2e4\uc591\ud55c \uac80\uc0c9 \ubc29\uc2dd\uc5d0 \ub530\ub77c \uc57d\uac04\uc758 \uc124\uc815 \ucc28\uc774\ub294 \uc788\uc9c0\ub9cc, \uacf5\ud1b5\ub41c \ud575\uc2ec \uc694\uc18c\ub97c \uae30\ubc18\uc73c\ub85c \uad6c\uc131\ub41c\ub2e4.</p>"},{"location":"search-engine/OpenSearch/indexing/vector%20indexing/#1","title":"1. \ubca1\ud130 \uc778\ub371\uc2a4 \uc0dd\uc131 \uac1c\uc694","text":"<p>\ubca1\ud130 \uc778\ub371\uc2a4\ub97c \uc0dd\uc131\ud558\uae30 \uc704\ud574\uc11c\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 \uae30\ubcf8 \ub2e8\uacc4\ub97c \ub530\ub978\ub2e4.</p> <pre><code>PUT /test-index\n{\n  \"settings\": {\n    \"index.knn\": true\n  },\n  \"mappings\": {\n    \"properties\": {\n      \"my_vector\": {\n        \"type\": \"knn_vector\",\n        \"dimension\": 3,\n        \"space_type\": \"l2\",\n        \"mode\": \"on_disk\",\n        \"method\": {\n          \"name\": \"hnsw\"\n        }     \n      }\n    }\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/indexing/vector%20indexing/#_1","title":"\ud575\uc2ec \ub2e8\uacc4 \uc694\uc57d","text":"<ol> <li> <p>k-NN \uac80\uc0c9 \ud65c\uc131\ud654 <code>index.knn: true</code> \uc124\uc815\uc744 \ud1b5\ud574 \uc778\ub371\uc2a4\uc5d0 k-NN \uac80\uc0c9 \uae30\ub2a5\uc744 \ud65c\uc131\ud654\ud55c\ub2e4.</p> </li> <li> <p>\ubca1\ud130 \ud544\ub4dc \uc815\uc758 <code>knn_vector</code> \ud0c0\uc785\uc758 \ud544\ub4dc\ub97c \uc815\uc758\ud558\uace0, \ud574\ub2f9 \ud544\ub4dc\uac00 \ubca1\ud130 \ub370\uc774\ud130\ub97c \uc800\uc7a5\ud558\ub3c4\ub85d \uc124\uc815\ud55c\ub2e4. \uae30\ubcf8\uc801\uc73c\ub85c float \ubca1\ud130\uc774\uba70, \uc800\uc7a5 \ucd5c\uc801\ud654\ub97c \uc704\ud574 byte \ub610\ub294 binary\ub3c4 \uc120\ud0dd \uac00\ub2a5\ud558\ub2e4.</p> </li> <li> <p>\ubca1\ud130 \ucc28\uc6d0 \uc9c0\uc815 <code>dimension</code> \uc18d\uc131\uc740 \uc0ac\uc6a9\ub418\ub294 \ubca1\ud130\uc758 \ucc28\uc6d0 \uc218\uc640 \uc77c\uce58\ud574\uc57c \ud55c\ub2e4.</p> </li> <li> <p>\uac70\ub9ac \uce21\uc815 \ubc29\uc2dd \uc120\ud0dd (\uc120\ud0dd \uc0ac\ud56d) <code>space_type</code>\uc744 \ud1b5\ud574 \uc720\uc0ac\ub3c4 \uce21\uc815 \ubc29\uc2dd\uc744 \uc120\ud0dd\ud560 \uc218 \uc788\ub2e4. \ub300\ud45c\uc801\uc73c\ub85c <code>l2</code>(\uc720\ud074\ub9ac\ub514\uc548 \uac70\ub9ac) \ub610\ub294 <code>cosinesimil</code>\uc774 \uc788\ub2e4.</p> </li> <li> <p>\uc800\uc7a5 \ucd5c\uc801\ud654 \ubaa8\ub4dc \uc9c0\uc815 (\uc120\ud0dd \uc0ac\ud56d) <code>mode</code> \ub610\ub294 \uc555\ucd95 \uc218\uc900\uc744 \uc120\ud0dd\ud558\uc5ec \ub514\uc2a4\ud06c \uc0ac\uc6a9\ub7c9 \ubc0f \uc131\ub2a5\uc744 \uc870\uc808\ud560 \uc218 \uc788\ub2e4.</p> </li> <li> <p>\uc0c9\uc778\ud654 \uc54c\uace0\ub9ac\uc998 \uc120\ud0dd (\uc120\ud0dd \uc0ac\ud56d) <code>method</code> \ud56d\ubaa9\uc744 \ud1b5\ud574 <code>hnsw</code>, <code>ivf</code> \ub4f1\uc758 \uc0c9\uc778\ud654 \uae30\ubc95\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.</p> </li> </ol>"},{"location":"search-engine/OpenSearch/indexing/vector%20indexing/#2","title":"2. \uc784\ubca0\ub529 \ucc98\ub9ac \ubc29\uc2dd\uc5d0 \ub530\ub978 \uad6c\ud604 \uc635\uc158","text":"<p>\uc784\ubca0\ub529 \uc0dd\uc131 \ubc29\uc2dd\uc5d0 \ub530\ub77c \ub450 \uac00\uc9c0 \uc8fc\uc694 \uad6c\ud604 \uacbd\ub85c\uac00 \uc874\uc7ac\ud55c\ub2e4.</p> \uad6c\ud604 \ubc29\uc2dd \ubca1\ud130 \ud544\ub4dc \ud0c0\uc785 \ud30c\uc774\ud504\ub77c\uc778 \ubcc0\ud658 \ubc29\uc2dd \uc0ac\uc6a9 \uc0ac\ub840 \uc678\ubd80\uc5d0\uc11c \uc0dd\uc131\ub41c \ubca1\ud130 \uc800\uc7a5 <code>knn_vector</code> \ud544\uc694 \uc5c6\uc74c \uc9c1\uc811 \uc0bd\uc785 Raw vector search \uc778\ub371\uc2f1 \uc911 \ubca1\ud130 \uc790\ub3d9 \uc0dd\uc131 <code>knn_vector</code> \ud544\uc694\ud568 \uc790\ub3d9 \uc0dd\uc131 AI \uae30\ubc18 \uc2dc\ub9e8\ud2f1 \uac80\uc0c9"},{"location":"search-engine/OpenSearch/indexing/vector%20indexing/#2-1","title":"2-1. \uc678\ubd80\uc5d0\uc11c \uc0dd\uc131\ub41c \ubca1\ud130\ub97c \uc800\uc7a5\ud558\ub294 \uacbd\uc6b0","text":"<p>\uae30\uc874\uc5d0 \uc0dd\uc131\ub41c \uc784\ubca0\ub529 \ubca1\ud130\ub97c \uc778\ub371\uc2a4\uc5d0 \uc800\uc7a5\ud558\ub294 \uacbd\uc6b0 \ub2e4\uc74c\uacfc \uac19\uc774 \uc124\uc815\ud55c\ub2e4.</p> <pre><code>PUT /my-raw-vector-index\n{\n  \"settings\": {\n    \"index.knn\": true\n  },\n  \"mappings\": {\n    \"properties\": {\n      \"my_vector\": {\n        \"type\": \"knn_vector\",\n        \"dimension\": 3\n      }\n    }\n  }\n}\n</code></pre> <p>\uc774 \ubc29\uc2dd\uc740 \ubca1\ud130\ub97c \uc678\ubd80\uc5d0\uc11c \uc0dd\uc131\ud55c \ud6c4 OpenSearch\uc5d0 \uc0bd\uc785\ud558\ub294 \ubc29\uc2dd\uc73c\ub85c, \ubaa8\ub378 \ucd94\ub860\uc774 \ud544\uc694\ud55c \uc0c1\ud669\uc5d0\uc11c\ub294 \uc801\ud569\ud558\uc9c0 \uc54a\ub2e4.</p>"},{"location":"search-engine/OpenSearch/indexing/vector%20indexing/#2-2","title":"2-2. \uc778\ub371\uc2f1 \uc911 \uc784\ubca0\ub529\uc744 \uc790\ub3d9 \uc0dd\uc131\ud558\ub294 \uacbd\uc6b0","text":"<p>OpenSearch\uc758 ingest pipeline\uc744 \ud1b5\ud574 \ud14d\uc2a4\ud2b8\ub97c \uc784\ubca0\ub529\uc73c\ub85c \uc790\ub3d9 \ubcc0\ud658\ud560 \uc218 \uc788\ub2e4. \uc774\ub54c <code>text_embedding</code> \ud504\ub85c\uc138\uc11c\ub97c \uc0ac\uc6a9\ud558\uba70, \ub2e4\uc74c\uacfc \uac19\uc774 \ud30c\uc774\ud504\ub77c\uc778\uc744 \uc815\uc758\ud55c\ub2e4.</p> <pre><code>PUT /_ingest/pipeline/auto-embed-pipeline\n{\n  \"description\": \"AI search ingest pipeline that automatically converts text to embeddings\",\n  \"processors\": [\n    {\n      \"text_embedding\": {\n        \"model_id\": \"mBGzipQB2gmRjlv_dOoB\",\n        \"field_map\": {\n          \"input_text\": \"output_embedding\"\n        }\n      }\n    }\n  ]\n}\n</code></pre> <p>\uc774\ud6c4 \uc778\ub371\uc2a4\ub97c \uc0dd\uc131\ud560 \ub54c <code>default_pipeline</code>\uc744 \uc9c0\uc815\ud558\uc5ec \ud574\ub2f9 \ud30c\uc774\ud504\ub77c\uc778\uc744 \uc0ac\uc6a9\ud55c\ub2e4. \ubca1\ud130 \ud544\ub4dc\uc758 <code>dimension</code> \uac12\uc740 \ud30c\uc774\ud504\ub77c\uc778\uc5d0 \uc0ac\uc6a9\ub41c \ubaa8\ub378\uc758 \ucd9c\ub825 \ucc28\uc6d0\uacfc \uc77c\uce58\ud574\uc57c \ud55c\ub2e4.</p> <pre><code>PUT /my-ai-search-index\n{\n  \"settings\": {\n    \"index.knn\": true,\n    \"default_pipeline\": \"auto-embed-pipeline\"\n  },\n  \"mappings\": {\n    \"properties\": {\n      \"input_text\": {\n        \"type\": \"text\"\n      },\n      \"output_embedding\": {\n        \"type\": \"knn_vector\",\n        \"dimension\": 768\n      }\n    }\n  }\n}\n</code></pre> <p>\uc774 \ubc29\uc2dd\uc740 \ubca1\ud130 \uc804\ucc98\ub9ac \uacfc\uc815\uc744 \uc790\ub3d9\ud654\ud558\uace0, \uac80\uc0c9 \ud488\uc9c8\uc744 \uc77c\uc815 \uc218\uc900 \uc774\uc0c1\uc73c\ub85c \uc720\uc9c0\ud558\ub294 \ub370 \uc720\ub9ac\ud558\ub2e4.</p>"},{"location":"search-engine/OpenSearch/indexing/vector%20indexing/#3-sparse-vector","title":"3. \ud76c\uc18c \ubca1\ud130(sparse vector) \uc9c0\uc6d0","text":"<p>OpenSearch\ub294 <code>dense</code> \ubca1\ud130\ubfd0 \uc544\ub2c8\ub77c <code>sparse</code> \ubca1\ud130\ub3c4 \uc9c0\uc6d0\ud55c\ub2e4. \ud76c\uc18c \ubca1\ud130\ub294 Neural Sparse Search\uc5d0 \uc0ac\uc6a9\ub418\uba70, \uba54\ubaa8\ub9ac \uc808\uc57d \ubc0f \ud6a8\uc728\uc801\uc778 \uac80\uc0c9 \ubc29\uc2dd\uc73c\ub85c \ud65c\uc6a9\ub420 \uc218 \uc788\ub2e4.</p> <p>\uad00\ub828 \ub0b4\uc6a9\uc740 Neural sparse search \uacf5\uc2dd \ubb38\uc11c\ub97c \ucc38\uace0\ud558\uba74 \ub41c\ub2e4.</p>"},{"location":"search-engine/OpenSearch/indexing/vector%20indexing/#4","title":"4. \ucc38\uace0 \uc790\ub8cc \ubc0f \ub2e4\uc74c \ub2e8\uacc4","text":"<ul> <li> <p>Preparing vectors</p> </li> <li> <p>k-NN vector \ud544\ub4dc \uc124\uba85</p> </li> <li> <p>Methods and engines</p> </li> </ul> <p>\ubca1\ud130 \uc778\ub371\uc2a4 \uc0dd\uc131 \uc774\ud6c4\uc5d0\ub294 \uc2e4\uc81c \ub370\uc774\ud130\ub97c \uc778\ub371\uc2f1\ud558\uace0 \uac80\uc0c9\uc744 \uc218\ud589\ud558\ub294 \ub2e8\uacc4\ub85c \uc774\uc5b4\uc9c0\uba70, \ubca1\ud130 \uc778\ub371\uc2a4\uc758 \uc124\uacc4\ub294 \uac80\uc0c9 \uc815\ud655\ub3c4\uc640 \uc131\ub2a5\uc5d0 \uacb0\uc815\uc801\uc778 \uc601\ud5a5\uc744 \uc900\ub2e4. \ub530\ub77c\uc11c \uc6a9\ub3c4\uc5d0 \ub530\ub77c \uc801\uc808\ud55c \uc124\uc815\uc744 \uc120\ud0dd\ud558\ub294 \uac83\uc774 \uc911\uc694\ud558\ub2e4.</p> <p>\uc544\ub798\ub294 <code>goodsNM</code> \ud544\ub4dc\ub97c \ub300\uc0c1\uc73c\ub85c Hugging Face \uc784\ubca0\ub529 \ubaa8\ub378\uc744 \ud65c\uc6a9\ud574 \ubca1\ud130\ub97c \uc790\ub3d9 \uc0dd\uc131\ud558\uc5ec \uc800\uc7a5\ud558\ub294 \uacfc\uc815\uc744 \uc124\uba85\ud55c \uae30\uc220 \ube14\ub85c\uadf8 \uae00\uc774\ub2e4. Rust \ucf54\ub4dc \uc608\uc2dc\uc640 \ud568\uaed8, OpenSearch \uc124\uc815 \ubc0f \ucef4\ud4e8\ud305 \uc790\uc6d0 \uc694\uad6c \uc0ac\ud56d\uc5d0 \ub300\ud55c \ub0b4\uc6a9\ub3c4 \ud3ec\ud568\ud558\uc600\ub2e4.</p>"},{"location":"search-engine/OpenSearch/indexing/vector%20indexing/#rust-opensearch","title":"Rust\uc640 OpenSearch\ub97c \ud65c\uc6a9\ud55c \uc790\ub3d9 \ubca1\ud130 \uc784\ubca0\ub529 \ucc98\ub9ac \uad6c\uc131","text":"<p>OpenSearch\uc758 Ingest Pipeline \uae30\ub2a5\uc744 \ud65c\uc6a9\ud558\uba74 <code>goodsNM</code> \uc0c1\ud488\uba85 \ud544\ub4dc\ub97c \uae30\ubc18\uc73c\ub85c \ubca1\ud130\ub97c \uc790\ub3d9 \uc0dd\uc131\ud558\uc5ec <code>goods_vector</code> \ud544\ub4dc\uc5d0 \uc800\uc7a5\ud560 \uc218 \uc788\ub2e4. \ubcf8 \uae00\uc5d0\uc11c\ub294 Hugging Face \uc0ac\uc804 \ud559\uc2b5 \uc784\ubca0\ub529 \ubaa8\ub378\uc744 OpenSearch ML Commons\uc5d0 \ub4f1\ub85d\ud558\uace0, \ud544\uc694\ud55c \ud074\ub7ec\uc2a4\ud130 \uc124\uc815 \ubc0f \ub178\ub4dc \uc694\uad6c \uc0ac\uc591\uae4c\uc9c0 \ud3ec\ud568\ud574 \uc124\uba85\ud55c\ub2e4.</p>"},{"location":"search-engine/OpenSearch/indexing/vector%20indexing/#1-hugging-face","title":"1. Hugging Face \uc784\ubca0\ub529 \ubaa8\ub378 \uc900\ube44","text":"<p>OpenSearch\ub294 Hugging Face\uc758 Text Embedding \ubaa8\ub378\uc744 \uc9c0\uc6d0\ud558\uba70, \uc0ac\uc804 \ud559\uc2b5\ub41c \ubaa8\ub378(\uc608: all\u2011MiniLM\u2011L6\u2011v2, 384 \ucc28\uc6d0)\uc744 TorchScript \ub610\ub294 ONNX \ud615\uc2dd\uc73c\ub85c \uc5c5\ub85c\ub4dc\ud558\uc5ec \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4 (OpenSearch, OpenSearch).</p> <p>\uba3c\uc800 TorchScript\ub85c \ubcc0\ud658\ud558\uc5ec Zip \ud30c\uc77c\ub85c \uc555\ucd95\ud55c \ud6c4 \uccb4\ud06c\uc12c\uc744 \uacc4\uc0b0\ud55c\ub2e4.</p> <pre><code>torch.jit.script(model).save(\"model.ts\")\nzip model.zip model.ts\nsha256sum model.zip\n</code></pre>"},{"location":"search-engine/OpenSearch/indexing/vector%20indexing/#_2","title":"\ubaa8\ub378 \ub4f1\ub85d \uc608\uc2dc","text":"<pre><code>POST /_plugins/_ml/models/_register\n{\n  \"name\": \"all-MiniLM-L6-v2\",\n  \"version\": \"1.0.0\",\n  \"model_format\": \"TORCH_SCRIPT\",\n  \"model_config\": {\n    \"model_type\": \"bert\",\n    \"embedding_dimension\": 384,\n    \"framework_type\": \"sentence_transformers\"\n  },\n  \"url\": \"https://my-bucket/model.zip\"\n}\n</code></pre> <p><code>embedding_dimension</code> \uac12\uc740 \uc0ac\uc6a9\ud558\ub294 \ubaa8\ub378 \ucc28\uc6d0\uacfc \uc77c\uce58\ud574\uc57c \ud55c\ub2e4 (OpenSearch Documentation).</p>"},{"location":"search-engine/OpenSearch/indexing/vector%20indexing/#2-ml","title":"2. \ud074\ub7ec\uc2a4\ud130 \uc124\uc815 \ubc0f ML \ub178\ub4dc \uad6c\uc131","text":"<p>\uc778\ub371\uc2f1 \uacfc\uc815\uc5d0\uc11c \uc784\ubca0\ub529\uc744 \uc790\ub3d9 \uc0dd\uc131\ud558\ub824\uba74 ML Commons \uad00\ub828 \uc124\uc815\uc744 \uc870\uc815\ud574\uc57c \ud55c\ub2e4.</p> <pre><code>PUT _cluster/settings\n{\n  \"persistent\": {\n    \"plugins.ml_commons.allow_registering_model_via_url\": \"true\",\n    \"plugins.ml_commons.only_run_on_ml_node\": \"false\",\n    \"plugins.ml_commons.native_memory_threshold\": \"99\"\n  }\n}\n</code></pre> <p>GPU \uac00\uc18d\uc774 \uac00\ub2a5\ud55c ML \ub178\ub4dc\ub97c \uad6c\uc131\ud558\uba74 \ucd94\ub860 \uc131\ub2a5\uc744 \ud06c\uac8c \ud5a5\uc0c1\ud560 \uc218 \uc788\ub2e4. NVIDIA CUDA 11.6 \ub610\ub294 AWS Inferentia \ub4f1\uc774 \uc9c0\uc6d0\ub41c\ub2e4 (OpenSearch, OpenSearch Docs).</p> <p>\ub178\ub4dc \uba54\ubaa8\ub9ac \uc6a9\ub7c9\uc740 \ubaa8\ub378 \ud30c\uc77c(\uc218\ubc31 MB) \ubc0f \ubc30\uce58 \ucd94\ub860 \uc2dc\uc810 \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9\uc744 \uace0\ub824\ud574 \ucda9\ubd84\ud788 \ud655\ubcf4\ud574\uc57c \ud55c\ub2e4 .</p>"},{"location":"search-engine/OpenSearch/indexing/vector%20indexing/#3-ingest-pipeline","title":"3. Ingest Pipeline \uc124\uc815","text":"<p><code>goodsNM</code> \ud14d\uc2a4\ud2b8\ub97c \uc790\ub3d9\uc73c\ub85c \uc784\ubca0\ub529\ud574 <code>goods_vector</code>\uc5d0 \uc800\uc7a5\ud558\ub3c4\ub85d \ud30c\uc774\ud504\ub77c\uc778\uc744 \uc815\uc758\ud55c\ub2e4.</p> <pre><code>PUT /_ingest/pipeline/goods-embed-pipeline\n{\n  \"description\": \"Auto-generate embedding for goodsNM\",\n  \"processors\": [\n    {\n      \"text_embedding\": {\n        \"model_id\": \"all-MiniLM-L6-v2\",\n        \"field_map\": {\n          \"goodsNM\": \"goods_vector\"\n        }\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/indexing/vector%20indexing/#4_1","title":"4. \ubca1\ud130 \uc778\ub371\uc2a4 \uc0dd\uc131","text":"<p>\ubca1\ud130 \ud544\ub4dc\ub97c \ud3ec\ud568\ud558\ub3c4\ub85d \uc778\ub371\uc2a4\ub97c \uc0dd\uc131\ud558\uace0 \ud30c\uc774\ud504\ub77c\uc778\uc744 \uae30\ubcf8\uac12\uc73c\ub85c \uc9c0\uc815\ud55c\ub2e4.</p> <pre><code>PUT /goods-index\n{\n  \"settings\": {\n    \"index.knn\": true,\n    \"default_pipeline\": \"goods-embed-pipeline\"\n  },\n  \"mappings\": {\n    \"properties\": {\n      \"goodsNM\": { \"type\": \"text\" },\n      \"goods_vector\": { \"type\": \"knn_vector\", \"dimension\": 384, \"method\": { \"name\": \"hnsw\", \"space_type\": \"cosinesimil\" } }\n    }\n  }\n}\n</code></pre>"},{"location":"search-engine/OpenSearch/indexing/vector%20indexing/#5-rust","title":"5. Rust \ucf54\ub4dc\ub85c \ubb38\uc11c \uc0c9\uc778\ud558\uae30","text":"<p>Rust\uc5d0\uc11c <code>goodsNM</code>\ub9cc \ud3ec\ud568\ud55c \uac1d\uccb4\ub97c \uc0c9\uc778\ud558\uba74 \uc790\ub3d9\uc73c\ub85c <code>goods_vector</code> \ud544\ub4dc\uac00 \ucc44\uc6cc\uc9c4\ub2e4.</p> <pre><code>use reqwest::Client;\nuse serde::Serialize;\n\n#[derive(Serialize)]\nstruct GoodsDoc {\n    goodsNM: String,\n}\n\n#[tokio::main]\nasync fn main() -&gt; Result&lt;(), Box&lt;dyn std::error::Error&gt;&gt; {\n    let client = Client::new();\n    let doc = GoodsDoc { goodsNM: \"\uc0bc\uc131 \uac24\ub7ed\uc2dc \ub178\ud2b810\".to_string() };\n\n    let res = client\n        .post(\"http://localhost:9200/goods-index/_doc?refresh=true\")\n        .json(&amp;doc)\n        .send()\n        .await?;\n\n    println!(\"Status: {}\", res.status());\n    println!(\"Body: {}\", res.text().await?);\n    Ok(())\n}\n</code></pre> <p>\ubb38\uc11c \uc870\ud68c \uc2dc <code>goods_vector</code> \ud544\ub4dc\uac00 \ubca1\ud130 \uac12\uc73c\ub85c \uc800\uc7a5\ub41c \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/OpenSearch/indexing/vector%20indexing/#6","title":"6. \ucef4\ud4e8\ud305 \uc790\uc6d0 \ubc0f \uc131\ub2a5 \uace0\ub824\uc0ac\ud56d","text":"<ul> <li> <p>CPU-only \uad6c\uc131: \uc18c\uaddc\ubaa8 \ub370\uc774\ud130 \ucc98\ub9ac\uc6a9\uc73c\ub85c \uac00\ub2a5\ud558\ub098, \uc784\ubca0\ub529 \ucc98\ub9ac\ub7c9\uc774 \ub0ae\uace0 \uc751\ub2f5 \uc2dc\uac04\uc774 \ub290\ub9b4 \uc218 \uc788\ub2e4. dense \ubaa8\ub4dc\uc5d0\uc11c\ub294 \uc218\ubc31 ms \uc815\ub3c4 \uc18c\uc694\ub420 \uc218 \uc788\uc74c.</p> </li> <li> <p>GPU \uad6c\uc131: CUDA\u2011enabled NVIDIA \ub610\ub294 AWS Inferentia ML \ub178\ub4dc\uc5d0\uc11c TorchScript \ubaa8\ub378 \ucd94\ub860\uc744 \uac00\uc18d\ud654 \uac00\ub2a5 (eliatra.com, OpenSearch Docs), \ub300\ub7c9 \uc0c9\uc778 \uc2dc GPU \uad6c\uc131 \uad8c\uc7a5.</p> </li> <li> <p>\uba54\ubaa8\ub9ac \uc694\uad6c: \ubaa8\ub378 \ud30c\uc77c\uacfc \ubcd1\ub82c \ucd94\ub860\uc744 \uace0\ub824\ud574 ML \ub178\ub4dc\ub2f9 \ucd5c\uc18c 16GB, \uad8c\uc7a5 32GB \uc774\uc0c1 \ud655\ubcf4.</p> </li> <li> <p>\uc2a4\ucf00\uc77c\ub9c1: \uc0c9\uc778\ub7c9\uc774 \uc99d\uac00\ud560 \uacbd\uc6b0 ML \ub178\ub4dc\ub97c \ubcc4\ub3c4\ub85c \ubd84\ub9ac\ud558\uc5ec \uc218\ud3c9 \ud655\uc7a5 \uac00\ub2a5.</p> </li> </ul>"},{"location":"search-engine/Qdrant/LangChain%EA%B3%BC%20Qdrant/","title":"LangChain\uacfc Qdrant","text":""},{"location":"search-engine/Qdrant/LangChain%EA%B3%BC%20Qdrant/#1","title":"1. \uac1c\uc694","text":"<p>Qdrant\ub294 \uace0\uc131\ub2a5\uc758 \ubca1\ud130 \uc720\uc0ac\ub3c4 \uac80\uc0c9 \uc5d4\uc9c4\uc73c\ub85c, REST \ubc0f gRPC API\ub97c \ud1b5\ud574 \ubca1\ud130 \uc800\uc7a5, \uac80\uc0c9, \ud544\ud130\ub9c1\uc744 \uc81c\uacf5\ud55c\ub2e4. LangChain\uc740 \ub300\ud615 \uc5b8\uc5b4 \ubaa8\ub378(LLM)\uc758 \uc751\uc6a9\uc744 \uc704\ud55c \ud504\ub808\uc784\uc6cc\ud06c\ub85c, \ub2e4\uc591\ud55c \ubca1\ud130 \uc800\uc7a5\uc18c(Vector Store)\uc640\uc758 \ud1b5\ud569\uc744 \uc9c0\uc6d0\ud55c\ub2e4. </p> <p>\uc774 \ubb38\uc11c\uc5d0\uc11c\ub294 <code>langchain-qdrant</code> \ubaa8\ub4c8\uc744 \uc0ac\uc6a9\ud558\uc5ec Qdrant\ub97c LangChain\uacfc \uc5f0\ub3d9\ud558\uace0, Dense Vector Search, Sparse Vector Search, Hybrid Search, \uba54\ud0c0\ub370\uc774\ud130 \ud544\ud130\ub9c1, Retriever \ubcc0\ud658 \ub4f1\uc758 \uae30\ub2a5\uc744 \ubaa8\ub450 \ud65c\uc6a9\ud558\ub294 \uc608\uc81c\ub97c \uc18c\uac1c\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/LangChain%EA%B3%BC%20Qdrant/#2","title":"2. \uc2e4\ud5d8 \ud658\uacbd \ubc0f \ub77c\uc774\ube0c\ub7ec\ub9ac \uc124\uce58","text":"<p>\ub2e4\uc74c \ud658\uacbd\uc5d0\uc11c \uc2e4\ud5d8\uc744 \uc9c4\ud589\ud55c\ub2e4.</p> <ul> <li> <p>Python 3.12+</p> </li> <li> <p>Qdrant \uc11c\ubc84: \ub85c\uceec Docker \ud658\uacbd\uc5d0\uc11c \uc2e4\ud589</p> </li> <li> <p>LangChain \ubaa8\ub4c8: <code>langchain-openai</code>, <code>langchain-qdrant</code>, <code>fastembed</code> \uc0ac\uc6a9</p> </li> </ul> <p>\ud544\uc218 \ud328\ud0a4\uc9c0 \uc124\uce58\ub294 \ub2e4\uc74c\uacfc \uac19\ub2e4.</p> <pre><code>pip install -U langchain-openai langchain-qdrant qdrant-client fastembed\n</code></pre>"},{"location":"search-engine/Qdrant/LangChain%EA%B3%BC%20Qdrant/#3-qdrant","title":"3. Qdrant \uc11c\ubc84 \uc900\ube44","text":"<p>Qdrant\ub294 Docker\ub85c \uc27d\uac8c \uc2e4\ud589\ud560 \uc218 \uc788\ub2e4. \ub85c\uceec\uc5d0\uc11c \uc2e4\ud589 \uc2dc \ub2e4\uc74c \uba85\ub839\uc5b4\ub97c \uc0ac\uc6a9\ud55c\ub2e4.</p> <pre><code>docker run -d \\\n  -p 6333:6333 \\\n  -v $(pwd)/qdrant_data:/qdrant/storage \\\n  --name qdrant \\\n  qdrant/qdrant\n</code></pre>"},{"location":"search-engine/Qdrant/LangChain%EA%B3%BC%20Qdrant/#4-langchain-qdrant","title":"4. LangChain + Qdrant \uc5f0\ub3d9 \uc804\uccb4 \ucf54\ub4dc","text":"<p>\uc544\ub798 \ucf54\ub4dc\ub294 \ubaa8\ub4e0 \uc8fc\uc694 \uae30\ub2a5\uc744 \ud3ec\ud568\ud55c \ud1b5\ud569 \uc608\uc81c\uc774\ub2e4. \uc774 \ucf54\ub4dc\ub97c \uae30\ubc18\uc73c\ub85c \ub2e4\uc591\ud55c \uac80\uc0c9 \uc2e4\ud5d8\uc774 \uac00\ub2a5\ud558\ub2e4.</p>"},{"location":"search-engine/Qdrant/LangChain%EA%B3%BC%20Qdrant/#41","title":"4.1 \uc804\uccb4 \ucf54\ub4dc","text":"<pre><code>import os\nfrom uuid import uuid4\nfrom langchain_openai import OpenAIEmbeddings\nfrom langchain_qdrant import QdrantVectorStore, RetrievalMode, FastEmbedSparse\nfrom qdrant_client import QdrantClient, models\nfrom qdrant_client.http.models import Distance, VectorParams, SparseVectorParams\nfrom langchain_core.documents import Document\n\n# 1) \uc784\ubca0\ub529\nembeddings = OpenAIEmbeddings(\n    model=\"text-embedding-3-small\",\n    api_key=os.environ[\"OPENAI_API_KEY\"],\n)\nsparse_embeddings = FastEmbedSparse(model_name=\"Qdrant/bm25\")\n\n# 2) Qdrant \uc5f0\uacb0\nclient = QdrantClient(url=\"http://localhost:6333\")\n\n# 3) \uceec\ub809\uc158( dense + sparse ) \uc0dd\uc131\nif client.collection_exists(\"my_documents\"):\n    client.delete_collection(\"my_documents\")\n\nclient.create_collection(\n    collection_name=\"my_documents\",\n    vectors_config={\"dense\": VectorParams(size=1536, distance=Distance.COSINE)},\n    sparse_vectors_config={\"sparse\": SparseVectorParams(index=models.SparseIndexParams(on_disk=False))},\n)\n\n# 4) \ubb38\uc11c \uc900\ube44\nraw_texts = [\n    (\"I had chocolate chip pancakes and scrambled eggs for breakfast this morning.\", \"tweet\"),\n    (\"The weather forecast for tomorrow is cloudy and overcast, with a high of 62 degrees Fahrenheit.\", \"news\"),\n    (\"Building an exciting new project with LangChain - come check it out!\", \"tweet\"),\n    (\"Robbers broke into the city bank and stole $1 million in cash.\", \"news\"),\n    (\"Wow! That was an amazing movie. I can't wait to see it again.\", \"tweet\"),\n    (\"Is the new iPhone worth the price? Read this review to find out.\", \"website\"),\n    (\"The top 10 soccer players in the world right now.\", \"website\"),\n    (\"LangGraph is the best framework for building stateful, agentic applications!\", \"tweet\"),\n    (\"The stock market is down 500 points today due to fears of a recession.\", \"news\"),\n    (\"I have a bad feeling I am going to get deleted :(\", \"tweet\"),\n]\ndocuments = [Document(page_content=t, metadata={\"source\": s}) for t, s in raw_texts]\nuuids = [str(uuid4()) for _ in documents]\n\n# 5) Hybrid \uc800\uc7a5\nhybrid_store = QdrantVectorStore(\n    client=client,\n    collection_name=\"my_documents\",\n    embedding=embeddings,\n    sparse_embedding=sparse_embeddings,\n    retrieval_mode=RetrievalMode.HYBRID,\n    vector_name=\"dense\",\n    sparse_vector_name=\"sparse\",\n)\nhybrid_store.add_documents(documents=documents, ids=uuids)\n\n# 6) Dense / Sparse / Hybrid \uac80\uc0c9 \ubc0f \ucd9c\ub825\ndense_store = QdrantVectorStore(client, \"my_documents\", embedding=embeddings,\n                                retrieval_mode=RetrievalMode.DENSE, vector_name=\"dense\")\nsparse_store = QdrantVectorStore(client, \"my_documents\", sparse_embedding=sparse_embeddings,\n                                 retrieval_mode=RetrievalMode.SPARSE, sparse_vector_name=\"sparse\")\n\nprint(\"\ud83d\udd0d Dense \uac80\uc0c9:\", [d.page_content for d in dense_store.similarity_search(\"LangChain project\", k=2)])\nprint(\"\ud83d\udd0d Sparse \uac80\uc0c9:\", [d.page_content for d in sparse_store.similarity_search(\"soccer players\", k=1)])\nprint(\"\ud83d\udd0d Hybrid \uac80\uc0c9:\",\n      [(d.page_content, f\"{s:.6f}\") for d, s in hybrid_store.similarity_search_with_score(\"Will it be hot tomorrow\", k=1)])\n\n# 7) Metadata \ud544\ud130\ub9c1 \uac80\uc0c9\nflt = models.Filter(should=[models.FieldCondition(\n    key=\"page_content\",\n    match=models.MatchValue(value=\"The top 10 soccer players in the world right now.\")\n)])\nprint(\"\ud83d\udd0d Metadata \ud544\ud130:\", [d.page_content for d in hybrid_store.similarity_search(\"best soccer players\", k=1, filter=flt)])\n\n# 8) \ubb38\uc11c \uc0ad\uc81c\nhybrid_store.delete(ids=[uuids[-1]])\n\n# 9) Retriever \ubcc0\ud658\nretriever = hybrid_store.as_retriever(search_type=\"mmr\", search_kwargs={\"k\": 1})\nprint(\"\ud83d\udd0d Retriever \uacb0\uacfc:\", [d.page_content for d in retriever.invoke(\"Stealing from the bank is a crime\")])\n\n# 10) Named vector + \ucee4\uc2a4\ud140 \ud0a4\nQdrantVectorStore.from_documents(\n    documents[:2],\n    embeddings,\n    sparse_embedding=sparse_embeddings,\n    location=\":memory:\",\n    collection_name=\"my_documents_custom\",\n    content_payload_key=\"my_page_content\",\n    metadata_payload_key=\"my_meta\",\n    vector_name=\"custom_vector\",\n    sparse_vector_name=\"custom_sparse_vector\",\n    retrieval_mode=RetrievalMode.HYBRID,\n)\nprint(\"\u2705 \ucee4\uc2a4\ud140 \ud544\ub4dc \uc778\ub371\uc2f1 \uc644\ub8cc\")\n</code></pre> <p>\ucf54\ub4dc\uc5d0\uc11c \uc218\ud589\ub418\ub294 \uc8fc\uc694 \uae30\ub2a5\ub4e4\uc740 \ub2e4\uc74c\uacfc \uac19\ub2e4.</p>"},{"location":"search-engine/Qdrant/LangChain%EA%B3%BC%20Qdrant/#5","title":"5. \uc8fc\uc694 \uae30\ub2a5\ubcc4 \uc124\uba85","text":""},{"location":"search-engine/Qdrant/LangChain%EA%B3%BC%20Qdrant/#51-dense-vector-search","title":"5.1 Dense Vector Search","text":"<p>Dense \uac80\uc0c9\uc740 \uc784\ubca0\ub529\ub41c \ubca1\ud130 \uac04\uc758 \ucf54\uc0ac\uc778 \uc720\uc0ac\ub3c4\ub97c \uacc4\uc0b0\ud558\uc5ec \uac00\uc7a5 \uc720\uc0ac\ud55c \ubb38\uc11c\ub97c \ubc18\ud658\ud55c\ub2e4. LangChain\uc5d0\uc11c\ub294 <code>OpenAIEmbeddings</code>\ub97c \ud65c\uc6a9\ud558\uc5ec dense \ubca1\ud130\ub97c \uc0dd\uc131\ud558\uace0, Qdrant\uc5d0 \uc800\uc7a5\ub41c dense \ubca1\ud130\uc640 \ube44\uad50\ud558\uc5ec \uc720\uc0ac\ub3c4 \uac80\uc0c9\uc744 \uc218\ud589\ud55c\ub2e4.</p> <pre><code>dense_store.similarity_search(\"LangChain project\", k=2)\n</code></pre> <p>\uac80\uc0c9 \uacb0\uacfc\ub294 LLM \uad00\ub828 \ubb38\uc7a5\ub4e4\uc774 \uc6b0\uc120\uc801\uc73c\ub85c \ubc18\ud658\ub418\uba70, \uc758\ubbf8\uc801 \uc720\uc0ac\uc131\uc744 \uae30\ubc18\uc73c\ub85c \uc815\ud655\ud55c \uacb0\uacfc\ub97c \uc81c\uacf5\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/LangChain%EA%B3%BC%20Qdrant/#52-sparse-vector-search-bm25","title":"5.2 Sparse Vector Search (BM25)","text":"<p>\ud76c\uc18c \ubca1\ud130 \uac80\uc0c9\uc740 \ud0a4\uc6cc\ub4dc \uae30\ubc18\uc758 \ud14d\uc2a4\ud2b8 \uac80\uc0c9\uc73c\ub85c, BM25 \uc54c\uace0\ub9ac\uc998\uc5d0 \uae30\ubc18\ud55c\ub2e4. <code>FastEmbedSparse</code>\ub97c \ud1b5\ud574 sparse vector\ub97c \uc0dd\uc131\ud558\uba70, Qdrant\ub294 \uc774\ub97c \ubcc4\ub3c4 \uc778\ub371\uc2a4\ub85c \uad00\ub9ac\ud55c\ub2e4.</p> <pre><code>sparse_store.similarity_search(\"soccer players\", k=1)\n</code></pre> <p>\uc774 \ubc29\uc2dd\uc740 \uc804\ud1b5\uc801\uc778 \uc815\ubcf4 \uac80\uc0c9(IR)\uacfc \uc720\uc0ac\ud558\uba70, \uba85\uc2dc\uc801\uc778 \ud0a4\uc6cc\ub4dc\ub97c \ud3ec\ud568\ud558\ub294 \ubb38\uc11c \uac80\uc0c9\uc5d0 \uc720\ub9ac\ud558\ub2e4.</p>"},{"location":"search-engine/Qdrant/LangChain%EA%B3%BC%20Qdrant/#53-hybrid-search","title":"5.3 Hybrid Search","text":"<p>Hybrid \uac80\uc0c9\uc740 Dense\uc640 Sparse \uac80\uc0c9\uc744 \ub3d9\uc2dc\uc5d0 \uc218\ud589\ud558\uace0, \uc720\uc0ac\ub3c4 \uc810\uc218\ub97c \ud1b5\ud569\ud558\uc5ec \uacb0\uacfc\ub97c \uc815\ub82c\ud55c\ub2e4. \uc758\ubbf8 \uae30\ubc18\uacfc \ud0a4\uc6cc\ub4dc \uae30\ubc18 \uac80\uc0c9\uc758 \uc7a5\uc810\uc744 \uacb0\ud569\ud55c\ub2e4.</p> <pre><code>results = hybrid_vector_store.similarity_search_with_score(\n    \"Will it be hot tomorrow\", k=1\n)\n</code></pre> <p><code>RetrievalMode.HYBRID</code>\ub85c \uc124\uc815 \uc2dc \ub450 \uc885\ub958\uc758 \ubca1\ud130\uac00 \ubaa8\ub450 \uc800\uc7a5\ub418\uace0 \uac80\uc0c9 \uc2dc \ud65c\uc6a9\ub41c\ub2e4.</p>"},{"location":"search-engine/Qdrant/LangChain%EA%B3%BC%20Qdrant/#54","title":"5.4 \uba54\ud0c0\ub370\uc774\ud130 \ud544\ud130\ub9c1","text":"<p>Qdrant\ub294 JSON \uae30\ubc18\uc758 Payload\uc5d0 \ub300\ud574 \ud544\ud130\ub9c1 \uae30\ub2a5\uc744 \uc81c\uacf5\ud558\uba70, LangChain\uc5d0\uc11c\ub3c4 \uc774\ub97c \uadf8\ub300\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4. \ud2b9\uc815 \ud0a4 \ub610\ub294 \uac12 \uae30\uc900\uc73c\ub85c \uac80\uc0c9 \uacb0\uacfc\ub97c \uc81c\ud55c\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>filter=models.Filter(\n    should=[\n        models.FieldCondition(\n            key=\"page_content\",\n            match=models.MatchValue(value=\"The top 10 soccer players in the world right now.\")\n        )\n    ]\n)\n</code></pre> <p>\uc774\ub294 Faceted Search \ub610\ub294 \uc870\uac74 \uae30\ubc18 \ud544\ud130\ub9c1\uc774 \ud544\uc694\ud55c RAG \ud30c\uc774\ud504\ub77c\uc778\uc5d0\uc11c \ub9e4\uc6b0 \uc720\uc6a9\ud558\ub2e4.</p>"},{"location":"search-engine/Qdrant/LangChain%EA%B3%BC%20Qdrant/#55","title":"5.5 \ubb38\uc11c \uc0ad\uc81c","text":"<p>\ucd94\uac00\ub41c \ubb38\uc11c\ub294 UUID\ub97c \uae30\ubc18\uc73c\ub85c \uc81c\uac70\ud560 \uc218 \uc788\ub2e4. \ud574\ub2f9 \uae30\ub2a5\uc740 \ubb38\uc11c \uac31\uc2e0 \ub610\ub294 RAG \ubb38\ub9e5 \uad00\ub9ac \uc2dc \uc720\uc6a9\ud558\uac8c \ud65c\uc6a9\ub41c\ub2e4.</p> <pre><code>hybrid_vector_store.delete(ids=[target_id])\n</code></pre>"},{"location":"search-engine/Qdrant/LangChain%EA%B3%BC%20Qdrant/#56-retriever","title":"5.6 Retriever \ubcc0\ud658","text":"<p><code>QdrantVectorStore</code>\ub294 <code>.as_retriever()</code> \uba54\uc11c\ub4dc\ub97c \ud1b5\ud574 LangChain\uc758 <code>Retriever</code>\ub85c \ubcc0\ud658\ud560 \uc218 \uc788\ub2e4. \ubcc0\ud658\ub41c Retriever\ub294 LLM \uccb4\uc778 \ub610\ub294 Agent \ub0b4\ubd80\uc5d0\uc11c \uc9c1\uc811 \uc0ac\uc6a9 \uac00\ub2a5\ud558\ub2e4.</p> <pre><code>retriever = hybrid_vector_store.as_retriever(search_type=\"mmr\", search_kwargs={\"k\": 1})\ndocs = retriever.invoke(\"Stealing from the bank is a crime\")\n</code></pre> <p>MMR(Maximal Marginal Relevance)\uc744 \ud65c\uc6a9\ud558\uba74 \ub2e4\uc591\ud55c \uad00\uc810\uc758 \ubb38\uc11c\ub97c \ud63c\ud569\ud574 \ubc18\ud658\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/LangChain%EA%B3%BC%20Qdrant/#57-named-vector-payload","title":"5.7 Named Vector \ubc0f \ucee4\uc2a4\ud140 Payload \ud0a4 \ud65c\uc6a9","text":"<p>Qdrant\ub294 \ub3d9\uc77c\ud55c \ubb38\uc11c\uc5d0 \uc5ec\ub7ec named vector\ub97c \uc800\uc7a5\ud560 \uc218 \uc788\ub2e4. \ub610\ud55c <code>page_content</code>, <code>metadata</code> \uc678\uc5d0 \ucee4\uc2a4\ud140 \ud0a4\ub85c\ub3c4 \uc800\uc7a5\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>QdrantVectorStore.from_documents(\n    docs,\n    embeddings,\n    sparse_embedding=sparse_embeddings,\n    location=\":memory:\",\n    collection_name=\"my_documents_custom\",\n    content_payload_key=\"my_page_content\",\n    metadata_payload_key=\"my_meta\",\n    vector_name=\"custom_vector\",\n    sparse_vector_name=\"custom_sparse_vector\",\n    retrieval_mode=RetrievalMode.HYBRID,\n)\n</code></pre> <p>\uc774\ub294 \uc678\ubd80\uc5d0\uc11c \uc0dd\uc131\ub41c Qdrant \uceec\ub809\uc158\uc744 LangChain\uc5d0 \uadf8\ub300\ub85c \uc5f0\uacb0\ud560 \ub54c \ub9e4\uc6b0 \uc720\uc6a9\ud558\ub2e4.</p>"},{"location":"search-engine/Qdrant/LangChain%EA%B3%BC%20Qdrant/#6","title":"6. \uacb0\ub860","text":"<p>Qdrant\ub294 LangChain\uacfc\uc758 \ud1b5\ud569\uc744 \ud1b5\ud574 \ub2e4\uc591\ud55c \uac80\uc0c9 \uc2dc\ub098\ub9ac\uc624\ub97c \uc720\uc5f0\ud558\uac8c \uc9c0\uc6d0\ud558\uba70, Dense, Sparse, Hybrid \uac80\uc0c9 \ubaa8\ub4dc\ub97c \uae30\ubc18\uc73c\ub85c \ud558\ub294 \uac15\ub825\ud55c RAG \uc2dc\uc2a4\ud15c \uad6c\ucd95\uc774 \uac00\ub2a5\ud558\ub2e4. \uba54\ud0c0\ub370\uc774\ud130 \uae30\ubc18 \ud544\ud130\ub9c1, \ub2e4\uc911 \ubca1\ud130 \uc800\uc7a5, \ubb38\uc11c \uc0ad\uc81c \ubc0f Retriever \ubcc0\ud658\uae4c\uc9c0 \ud3ec\ud568\ud55c \uc804\uccb4 \uae30\ub2a5\uc744 \uc190\uc27d\uac8c \ud65c\uc6a9\ud560 \uc218 \uc788\ub2e4.</p> <p>Qdrant + LangChain\uc740 \ub2e8\uc21c\ud55c \ubca1\ud130 DB \uadf8 \uc774\uc0c1\uc73c\ub85c, LLM \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc704\ud55c \uc2e4\uc9c8\uc801\uc778 \uac80\uc0c9/\ub9ac\ud2b8\ub9ac\ubc8c \uc778\ud504\ub77c\ub85c \uc0ac\uc6a9\ub420 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/Qdrant%EC%9D%98%20Semantic%20Chunk/","title":"Qdrant\uc758 Semantic Chunk","text":"<p>\ub300\ud45c\uc801\uc778 \ubc29\ubc95\uc740 \ubb38\uc7a5\uc744 \ub2e8\uc704\ub85c \ub098\ub208 \ub4a4, \uac01 \ubb38\uc7a5\uc758 \uc784\ubca0\ub529(\ubca1\ud130)\uc744 \uacc4\uc0b0\ud574 \u201c\uc758\ubbf8\uc801\uc73c\ub85c \uc720\uc0ac\ud55c\u201d \ubb38\uc7a5\ub4e4\uc744 \ud558\ub098\uc758 \uccad\ud06c\ub85c \ubb36\ub294 \ubc29\uc2dd\uc785\ub2c8\ub2e4. </p> <p>\uc544\ub798 \uc608\uc2dc\ub294 OpenAIEmbeddings\ub97c \uc774\uc6a9\ud574 \uac04\ub2e8\ud55c semantic chunking \ud568\uc218\ub97c \uad6c\ud604\ud558\uace0, \uae30\uc874 \uace0\uc815 \uae38\uc774 \uccad\ud06c \ub300\uc2e0 \uc801\uc6a9\ud558\ub294 \ubc29\ubc95\uc744 \ubcf4\uc5ec\uc90d\ub2c8\ub2e4.</p> <pre><code>import nltk\nimport numpy as np\nfrom nltk.tokenize import sent_tokenize\nfrom langchain_core.documents import Document\nfrom langchain_openai import OpenAIEmbeddings\n\nnltk.download('punkt')  # \ucd5c\ucd08 1\ud68c\ub9cc\n\n# 1) \uc784\ubca0\ub529 \uac1d\uccb4 (\uae30\uc874 \uc124\uc815 \uadf8\ub300\ub85c \uc7ac\uc0ac\uc6a9)\nembedder = OpenAIEmbeddings(\n    model=\"text-embedding-3-small\",\n    api_key=\"YOUR_OPENAI_API_KEY\",\n)\n\ndef semantic_chunk(text: str,\n                   embedder: OpenAIEmbeddings,\n                   threshold: float = 0.75\n                  ) -&gt; list[str]:\n    \"\"\"\n    1) \ubb38\uc7a5 \ub2e8\uc704\ub85c \ubd84\ud560\n    2) \uac01 \ubb38\uc7a5 \uc784\ubca0\ub529 \uacc4\uc0b0\n    3) \uc21c\ucc28\uc801\uc73c\ub85c \uc720\uc0ac\ub3c4\uac00 threshold \uc774\uc0c1\uc774\uba74 \uac19\uc740 \uccad\ud06c\uc5d0 \ucd94\uac00,\n       \uc544\ub2c8\uba74 \uc0c8 \uccad\ud06c\ub85c \ubd84\ub9ac\n    \"\"\"\n    sents = sent_tokenize(text)\n    embs = embedder.embed_documents(sents)  # \ubb38\uc7a5\ubcc4 \ubca1\ud130 \ub9ac\uc2a4\ud2b8\n\n    chunks = []\n    curr_sents, curr_embs = [], []\n    for sent, emb in zip(sents, embs):\n        if not curr_sents:\n            curr_sents, curr_embs = [sent], [emb]\n        else:\n            avg_emb = np.mean(curr_embs, axis=0)\n            sim = np.dot(emb, avg_emb) / (np.linalg.norm(emb) * np.linalg.norm(avg_emb))\n            if sim &gt;= threshold:\n                curr_sents.append(sent)\n                curr_embs.append(emb)\n            else:\n                chunks.append(\" \".join(curr_sents))\n                curr_sents, curr_embs = [sent], [emb]\n    if curr_sents:\n        chunks.append(\" \".join(curr_sents))\n\n    return chunks\n\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# \uae30\uc874 \uccad\ud06c \ucf54\ub4dc \ub300\uc2e0 \uc774 semantic_chunk\ub97c \uc801\uc6a9\n\nfrom langchain.document_loaders import TextLoader\nfrom qdrant_client import QdrantClient\nfrom qdrant_client.http.models import VectorParams, SparseVectorParams, Distance\nfrom langchain_qdrant import QdrantVectorStore, RetrievalMode, FastEmbedSparse\n\n# (1) \ubb38\uc11c \ub85c\ub4dc\nloader = TextLoader(\"example.pdf\")  \ndocs = loader.load()  # Page \ub2e8\uc704 Document \ub9ac\uc2a4\ud2b8\n\n# (2) \uc758\ubbf8 \uae30\ubc18 \uccad\ud06c \uc0dd\uc131\nsemantic_docs = []\nfor doc in docs:\n    chunks = semantic_chunk(doc.page_content, embedder, threshold=0.70)\n    for chunk in chunks:\n        semantic_docs.append(\n            Document(page_content=chunk, metadata=doc.metadata)\n        )\n\n# (3) Qdrant\uc5d0 \uc0c9\uc778\nclient = QdrantClient(url=\"http://localhost:6333\")\nstore = QdrantVectorStore(\n    client=client,\n    collection_name=\"my_semantic_docs\",\n    embedding=embedder,\n    sparse_embedding=FastEmbedSparse(model_name=\"Qdrant/bm25\"),\n    retrieval_mode=RetrievalMode.HYBRID,\n    vector_name=\"dense\",\n    sparse_vector_name=\"sparse\",\n)\nstore.add_documents(documents=semantic_docs)\n</code></pre> <p>\uc694\uc57d</p> <ol> <li> <p>\ubb38\uc7a5\ubcc4 \ubd84\ud560: <code>nltk.sent_tokenize</code> \ub4f1\uc744 \uc774\uc6a9\ud574 \ubb38\uc7a5 \ub9ac\uc2a4\ud2b8\ub85c \ubd84\ub9ac</p> </li> <li> <p>\ubb38\uc7a5 \uc784\ubca0\ub529: <code>embedder.embed_documents(sentences)</code> \ud638\ucd9c</p> </li> <li> <p>\uc720\uc0ac\ub3c4 \uae30\ubc18 \ubb36\uae30: \uc774\uc804 \uccad\ud06c\uc758 \ud3c9\uade0 \uc784\ubca0\ub529\uacfc \uc0c8 \ubb38\uc7a5 \ubca1\ud130 \uac04 cosine \uc720\uc0ac\ub3c4 \ube44\uad50\ud574, threshold \uc774\uc0c1\uc774\uba74 \uac19\uc740 \uccad\ud06c\uc5d0 \ud3ec\ud568</p> </li> <li> <p>Qdrant \uc0c9\uc778: \uae30\uc874\ucc98\ub7fc <code>QdrantVectorStore.add_documents</code>\uc5d0 semantic \uccad\ud06c\ub97c \ub118\uaca8\uc8fc\uba74 \ub05d</p> </li> </ol> <p>\uc774\ub807\uac8c \ud558\uba74 \u201c\uace0\uc815 \ud1a0\ud070 \uc218\u201d\uac00 \uc544\ub2c8\ub77c \u201c\uc758\ubbf8\uc801\uc73c\ub85c \uc77c\uad00\ub41c\u201d \ub2e8\uc704\ub85c \ubb38\uc11c\ub97c \ubd84\ud560\ud574\uc11c \uc0c9\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"search-engine/Qdrant/Qdrant%EC%9D%98%20Semantic%20Chunk/#_1","title":"\uc7a5\uc810\uacfc \ub2e8\uc810","text":""},{"location":"search-engine/Qdrant/Qdrant%EC%9D%98%20Semantic%20Chunk/#_2","title":"\uc7a5\uc810","text":"<ol> <li> <p>\uc758\ubbf8\uc801 \uc77c\uad00\uc131 \uc720\uc9c0</p> <ul> <li> <p>\uc758\ubbf8 \ub2e8\uc704(\ubb38\uc7a5\u00b7\uc808\u00b7\uac1c\ub150)\ub85c \ubb36\uae30 \ub54c\ubb38\uc5d0 \ud55c \uccad\ud06c \uc548\uc758 \ub0b4\uc6a9\uc774 \uc8fc\uc81c\uc801\uc73c\ub85c \uc751\uc9d1\ub418\uc5b4 \uc788\ub2e4.</p> </li> <li> <p>LLM\uc774\ub098 \ubca1\ud130 \uac80\uc0c9 \uc5d4\uc9c4\uc774 \u201c\ud55c \ub369\uc5b4\ub9ac\uc758 \uc758\ubbf8\u201d\ub97c \ubcf4\ub2e4 \uba85\ud655\ud788 \ud30c\uc545\ud560 \uc218 \uc788\uc5b4, \uac80\uc0c9\u00b7\uc720\uc0ac\ub3c4 \ud3c9\uac00\u00b7\uc694\uc57d \uc815\ud655\ub3c4\uac00 \ud5a5\uc0c1\ub41c\ub2e4.</p> </li> </ul> </li> <li> <p>\uc911\uc694 \uc815\ubcf4 \uc190\uc2e4 \ucd5c\uc18c\ud654</p> <ul> <li> <p>fixed-length splitting\uc740 \ubb38\uc7a5 \uc911\uac04\uc744 \uc790\ub97c \uc218 \uc788\uc5b4 \ubb38\uc7a5\uc774 \ubd84\uc808\ub418\uac70\ub098 \ud575\uc2ec \uc5b4\uad6c\uac00 \uc798\ub9b4 \uc704\ud5d8\uc774 \uc788\ub2e4.</p> </li> <li> <p>semantic chunking\uc740 \ubb38\uc7a5 \uacbd\uacc4(\ub610\ub294 \uc758\ubbf8 \ub2e8\uc704) \ub2e8\uc704\ub85c \ubb36\uc73c\ubbc0\ub85c, \ub9e5\ub77d\uc774 \ub04a\uae30\uc9c0 \uc54a\ub294\ub2e4.</p> </li> </ul> </li> <li> <p>\uc720\uc5f0\ud55c \uccad\ud06c \ud06c\uae30</p> <ul> <li> <p>\ub0b4\uc6a9\uc774 \ub2e8\uc21c\ud55c \ubd80\ubd84\uc740 \ud55c \uccad\ud06c\uac00 \uc791\uac8c, \ubcf5\uc7a1\ud55c \ubd80\ubd84\uc740 \ub354 \uae38\uac8c \uc790\ub3d9 \uc870\uc815\ub418\uc5b4 \uc800\uc7a5\u00b7\ucc98\ub9ac \ud6a8\uc728\uc744 \ub192\uc778\ub2e4.</p> </li> <li> <p>\uc720\uc0ac\ub3c4 \uacc4\uc0b0 \uc2dc\uc5d0\ub3c4 \u201c\ubd88\ud544\uc694\ud55c \ud328\ub529\u201d\uc774\ub098 \u201c\ube48 \uacf5\uac04\u201d\uc774 \uc904\uc5b4\ub4e4\uc5b4 \ubca1\ud130 \ucc28\uc6d0\uc758 \ub0ad\ube44\uac00 \uac10\uc18c\ud55c\ub2e4.</p> </li> </ul> </li> <li> <p>\uac80\uc0c9 \ud488\uc9c8 \uac1c\uc120</p> <ul> <li> <p>\uc758\ubbf8\uc801\uc73c\ub85c \uc751\uc9d1\ub41c \ub2e8\uc704\ub85c \ubca1\ud130\ub97c \ub9cc\ub4e4\uba74, \ud0a4\uc6cc\ub4dc\uac00 \ubd84\uc0b0\ub418\uc9c0 \uc54a\uc544 BM25 \uac19\uc740 sparse \uac80\uc0c9\uc5d0\uc11c\ub3c4 \ub354 \ub192\uc740 \uc815\ud655\ub3c4\ub97c \uae30\ub300\ud560 \uc218 \uc788\ub2e4.</p> </li> <li> <p>Hybrid \uac80\uc0c9 \uc2dc dense\u00b7sparse \ubca1\ud130\uac00 \ubaa8\ub450 \ud1b5\uc77c\ub41c \uc758\ubbf8 \ub2e8\uc704\ub85c \uc815\ub82c\ub418\ubbc0\ub85c, \uacb0\uacfc\uc758 \uc77c\uad00\uc131\uacfc \ub2e4\uc591\uc131\uc774 \ud5a5\uc0c1\ub41c\ub2e4.</p> </li> </ul> </li> </ol>"},{"location":"search-engine/Qdrant/Qdrant%EC%9D%98%20Semantic%20Chunk/#_3","title":"\ub2e8\uc810","text":"<ol> <li> <p>\ucd94\uac00 \uacc4\uc0b0 \ube44\uc6a9</p> <ul> <li> <p>\ubb38\uc7a5 \ud1a0\ud06c\ub098\uc774\uc800(Punkt, spaCy \ub4f1)\ub85c \ubd84\ud560 \ud6c4, \uac01 \ubb38\uc7a5\uc5d0 \ub300\ud574 \uc784\ubca0\ub529\uc744 \uacc4\uc0b0\ud574\uc57c \ud558\ubbc0\ub85c API \ud638\ucd9c \ud69f\uc218\u00b7\uc5f0\uc0b0\ub7c9\uc774 \ud06c\uac8c \ub298\uc5b4\ub09c\ub2e4.</p> </li> <li> <p>\uc804\uccb4 \ubb38\uc11c\uc5d0 \ubb38\uc7a5 \uc218\ub9cc\ud07c \ubca1\ud130 \uc5f0\uc0b0\uc744 \uc218\ud589\ud558\ubbc0\ub85c, \uace0\uc815 \uae38\uc774 \uccad\ud06c \ub300\ube44 \uc9c0\uc5f0(latency)\uacfc \ube44\uc6a9\uc774 \uc0c1\uc2b9\ud55c\ub2e4.</p> </li> </ul> </li> <li> <p>\ud30c\ub77c\ubbf8\ud130 \ud29c\ub2dd \ubcf5\uc7a1\uc131</p> <ul> <li> <p>\uc720\uc0ac\ub3c4 \uc784\uacc4\uac12(threshold), \ubb38\uc7a5 \uadf8\ub8f9\ud654 \ub85c\uc9c1 \ub4f1 \ud558\uc774\ud37c\ud30c\ub77c\ubbf8\ud130\ub97c \uc801\uc808\ud788 \uc124\uc815\ud574\uc57c \ud55c\ub2e4.</p> </li> <li> <p>threshold\uac00 \ub108\ubb34 \ub192\uc73c\uba74 \uccad\ud06c\uac00 \uc791\uac8c \ucabc\uac1c\uc9c0\uace0(\uacfc\ub3c4 \ubd84\ud560), \ub0ae\uc73c\uba74 \ubb36\uc74c\uc774 \uacfc\ub3c4\ud574\uc838(\uacfc\ub2e4 \ubcd1\ud569) \uc758\ubbf8 \uc9d1\uc911\ub3c4\uac00 \ub5a8\uc5b4\uc9c8 \uc218 \uc788\ub2e4.</p> </li> </ul> </li> <li> <p>\ubcc0\ub3d9\ud558\ub294 \uccad\ud06c \ud06c\uae30</p> <ul> <li> <p>\uccad\ud06c \uae38\uc774\uac00 \uace0\uc815\ub418\uc9c0 \uc54a\uc544, Q&amp;A\ub098 LLM \uccb4\uc778\uc5d0 \ub118\uae38 \ub54c \ud1a0\ud070 \uc218 \uad00\ub9ac\uac00 \uc5b4\ub835\ub2e4.</p> </li> <li> <p>\uc608\uce21 \ubd88\uac00\ub2a5\ud55c \uae38\uc774\ub85c \uc778\ud574 \ud55c \ubc88\uc5d0 \ucc98\ub9ac\ud560 \uc218 \uc788\ub294 \ucee8\ud14d\uc2a4\ud2b8 \ud06c\uae30\ub97c \ucd08\uacfc\ud560 \uc704\ud5d8\uc774 \uc788\ub2e4.</p> </li> </ul> </li> <li> <p>\uc784\ubca0\ub529 \ud488\uc9c8 \uc758\uc874\uc131</p> <ul> <li> <p>semantic chunking\uc758 \ud575\uc2ec\uc740 \uc784\ubca0\ub529\uc758 \ud488\uc9c8\uc5d0 \ub2ec\ub824 \uc788\ub2e4.</p> </li> <li> <p>\uc784\ubca0\ub529 \ubaa8\ub378 \uc131\ub2a5\uc774 \ub0ae\uac70\ub098 \ub3c4\uba54\uc778\uacfc \ub9de\uc9c0 \uc54a\uc73c\uba74, \uc720\uc0ac\ub3c4 \uacc4\uc0b0 \uc790\uccb4\uac00 \ubd80\uc815\ud655\ud574\uc838 \uc624\ud788\ub824 \uc798\ubabb\ub41c \uccad\ud06c\uac00 \uc0dd\uc131\ub420 \uc218 \uc788\ub2e4.</p> </li> </ul> </li> </ol>"},{"location":"search-engine/Qdrant/%EB%AC%B8%EC%84%9C%20%EA%B8%B0%EB%B0%98%20RAG%20%EA%B5%AC%EC%84%B1/","title":"\ubb38\uc11c \uae30\ubc18 RAG \uad6c\uc131","text":"<p>\uc544\ub798\ub294 FastAPI\ub97c \uc774\uc6a9\ud574 \u201c\ud30c\uc77c \uc5c5\ub85c\ub4dc \u2192 \ub85c\ub4dc(\ud655\uc7a5\uc790\ubcc4) \u2192 \uccad\ud06c(split) \u2192 Qdrant\uc5d0 \uc0c9\uc778(index) \u2192 \uac80\uc0c9(\uc77c\ubc18\u00b7\ud76c\uc18c\u00b7\ud558\uc774\ube0c\ub9ac\ub4dc)\u201d\uae4c\uc9c0 \uc804 \uacfc\uc815\uc744 \ubcf4\uc5ec\uc8fc\ub294 \uc608\uc81c \ucf54\ub4dc\uc774\ub2e4.</p> <pre><code>from fastapi import FastAPI, UploadFile, File, HTTPException\nfrom fastapi.responses import JSONResponse\nfrom tempfile import TemporaryDirectory\nfrom pathlib import Path\nfrom typing import List\nimport uvicorn\n\nfrom langchain.document_loaders import (\n    TextLoader,\n    PyPDFLoader,\n    UnstructuredWordDocumentLoader,\n    UnstructuredPowerPointLoader,\n    UnstructuredMarkdownLoader,\n)\nfrom langchain.text_splitter import RecursiveCharacterTextSplitter\nfrom langchain_openai import OpenAIEmbeddings\nfrom langchain_qdrant import QdrantVectorStore, RetrievalMode, FastEmbedSparse\nfrom qdrant_client import QdrantClient\nfrom qdrant_client.http.models import Distance, VectorParams, SparseVectorParams, Filter, FieldCondition, MatchValue\nfrom langchain_core.documents import Document\n\napp = FastAPI()\n\n# 1) \uc784\ubca0\ub529 &amp; Qdrant \ud074\ub77c\uc774\uc5b8\ud2b8 \uc124\uc815\nOPENAI_API_KEY = \"YOUR_OPENAI_API_KEY\"\nQDRANT_URL = \"http://localhost:6333\"\nCOLLECTION = \"uploaded_docs\"\n\n# dense, sparse embedding \uc778\uc2a4\ud134\uc2a4\ndense_embed = OpenAIEmbeddings(model=\"text-embedding-3-small\", api_key=OPENAI_API_KEY)\nsparse_embed = FastEmbedSparse(model_name=\"Qdrant/bm25\")\n\n# Qdrant \ud074\ub77c\uc774\uc5b8\ud2b8\nclient = QdrantClient(url=QDRANT_URL)\n# \uceec\ub809\uc158 \uc0dd\uc131 (\uc5c6\uc73c\uba74)\nif not client.collection_exists(COLLECTION):\n    client.create_collection(\n        collection_name=COLLECTION,\n        vectors_config={\"dense\": VectorParams(size=dense_embed.dim, distance=Distance.COSINE)},\n        sparse_vectors_config={\"sparse\": SparseVectorParams(index=models.SparseIndexParams(on_disk=False))},\n    )\n\n# 2) \ud30c\uc77c \u2192 Document \ub85c\ub354 \uc120\ud0dd \ud568\uc218\ndef load_document(path: Path) -&gt; List[Document]:\n    suffix = path.suffix.lower()\n    if suffix == \".txt\":\n        loader = TextLoader(str(path), encoding=\"utf-8\")\n    elif suffix in {\".pdf\"}:\n        loader = PyPDFLoader(str(path))\n    elif suffix in {\".docx\", \".doc\"}:\n        loader = UnstructuredWordDocumentLoader(str(path))\n    elif suffix in {\".pptx\", \".ppt\"}:\n        loader = UnstructuredPowerPointLoader(str(path))\n    elif suffix in {\".md\", \".markdown\"}:\n        loader = UnstructuredMarkdownLoader(str(path))\n    else:\n        raise ValueError(f\"\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud30c\uc77c \ud655\uc7a5\uc790: {suffix}\")\n    return loader.load()\n\n# 3) \ud14d\uc2a4\ud2b8 \uccad\ud06c(split)\ntext_splitter = RecursiveCharacterTextSplitter(\n    chunk_size=1000,\n    chunk_overlap=200\n)\n\n# 4) \uc0c9\uc778 \ud568\uc218\ndef index_documents(docs: List[Document]):\n    # \ubaa8\ub4e0 \uccad\ud06c \uc0dd\uc131\n    chunks = []\n    for doc in docs:\n        chunks += text_splitter.split_documents([doc])\n    # Qdrant VectorStore\n    store = QdrantVectorStore(\n        client=client,\n        collection_name=COLLECTION,\n        embedding=dense_embed,\n        sparse_embedding=sparse_embed,\n        retrieval_mode=RetrievalMode.HYBRID,\n        vector_name=\"dense\",\n        sparse_vector_name=\"sparse\",\n    )\n    # bulk upsert\n    ids = store.add_documents(documents=chunks)\n    return ids\n\n# 5) \uc5c5\ub85c\ub4dc \uc5d4\ub4dc\ud3ec\uc778\ud2b8\n@app.post(\"/upload\")\nasync def upload(files: List[UploadFile] = File(...)):\n    try:\n        all_docs = []\n        with TemporaryDirectory() as tmp:\n            tmp_path = Path(tmp)\n            for f in files:\n                dest = tmp_path / f.filename\n                content = await f.read()\n                dest.write_bytes(content)\n                all_docs += load_document(dest)\n        ids = index_documents(all_docs)\n        return JSONResponse({\"indexed_ids\": ids, \"count\": len(ids)})\n    except ValueError as e:\n        raise HTTPException(status_code=400, detail=str(e))\n\n# 6) \uac80\uc0c9 \uc5d4\ub4dc\ud3ec\uc778\ud2b8\n@app.get(\"/search\")\ndef search(\n    q: str,\n    mode: str = \"hybrid\",  # 'dense', 'sparse', 'hybrid'\n    k: int = 3,\n    filter_text: str = None\n):\n    # \uc801\uc808\ud55c RetrievalMode \ubc0f VectorStore \uc120\ud0dd\n    mode = mode.lower()\n    if mode == \"dense\":\n        store = QdrantVectorStore(client, COLLECTION, embedding=dense_embed,\n                                  retrieval_mode=RetrievalMode.DENSE, vector_name=\"dense\")\n        results = store.similarity_search(q, k=k)\n    elif mode == \"sparse\":\n        store = QdrantVectorStore(client, COLLECTION, sparse_embedding=sparse_embed,\n                                  retrieval_mode=RetrievalMode.SPARSE, sparse_vector_name=\"sparse\")\n        results = store.similarity_search(q, k=k)\n    elif mode == \"hybrid\":\n        store = QdrantVectorStore(client, COLLECTION, embedding=dense_embed, sparse_embedding=sparse_embed,\n                                  retrieval_mode=RetrievalMode.HYBRID, vector_name=\"dense\", sparse_vector_name=\"sparse\")\n        # \uba54\ud0c0\ud544\ud130 \uc608\uc81c\n        flt = None\n        if filter_text:\n            flt = Filter(should=[FieldCondition(\n                key=\"page_content\",\n                match=MatchValue(value=filter_text)\n            )])\n        # \uc810\uc218\uae4c\uc9c0 \ubc18\ud658\n        results = store.similarity_search_with_score(q, k=k, filter=flt)\n    else:\n        raise HTTPException(status_code=400, detail=\"mode\ub294 dense, sparse, hybrid \uc911 \ud558\ub098\uc5ec\uc57c \ud569\ub2c8\ub2e4.\")\n    # \ubc18\ud658 \ud3ec\ub9f7\n    return JSONResponse({\n        \"mode\": mode,\n        \"query\": q,\n        \"results\": [\n            {\"text\": d.page_content, \"score\": float(s) if isinstance(s, (int, float)) else None}\n            for d, s in (results if mode==\"hybrid\" else [(d, None) for d in results])\n        ]\n    })\n\nif __name__ == \"__main__\":\n    uvicorn.run(app, host=\"0.0.0.0\", port=8000)\n</code></pre> <p>\uc124\uba85 \uc815\ub9ac</p> <ol> <li> <p>\ud30c\uc77c \uc5c5\ub85c\ub4dc(<code>/upload</code>)</p> <ul> <li> <p>\ub2e4\uc591\ud55c \ud655\uc7a5\uc790(<code>.txt</code>, <code>.pdf</code>, <code>.docx</code>, <code>.pptx</code>, <code>.md</code>) \uc9c0\uc6d0</p> </li> <li> <p>\uc784\uc2dc \ub514\ub809\ud130\ub9ac\uc5d0 \uc800\uc7a5 \ud6c4 \uac01 \ub85c\ub354\ub85c <code>Document</code> \uac1d\uccb4 \uc0dd\uc131</p> </li> </ul> </li> <li> <p>\uccad\ud06c(split)</p> <ul> <li><code>RecursiveCharacterTextSplitter</code>\ub85c <code>chunk_size=1000</code>, <code>overlap=200</code> \uc124\uc815</li> </ul> </li> <li> <p>\uc0c9\uc778(index)</p> <ul> <li><code>RetrievalMode.HYBRID</code>\ub85c \uceec\ub809\uc158\uc5d0 dense+sparse \ubca1\ud130 \ud568\uaed8 \uc800\uc7a5</li> </ul> </li> <li> <p>\uac80\uc0c9(<code>/search</code>)</p> <ul> <li> <p><code>mode=dense|sparse|hybrid</code> \uc635\uc158</p> </li> <li> <p>hybrid \ubaa8\ub4dc \uc2dc score \ubc18\ud658, optional metadata \ud544\ud130\ub9c1 \uc9c0\uc6d0</p> </li> </ul> </li> </ol>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Capacity%20Planning/","title":"Capacity Planning","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Capacity%20Planning/#1-ram","title":"1. \uba54\ubaa8\ub9ac(RAM) \uc0b0\uc815","text":"<p>\ubca1\ud130\ub97c \ubaa8\ub450 \uba54\ubaa8\ub9ac\uc5d0 \uc801\uc7ac\ud574 \ucd5c\uc801\uc758 \uac80\uc0c9 \uc18d\ub3c4\ub97c \ub0b4\uace0 \uc2f6\ub2e4\uba74 \ub2e4\uc74c \uc2dd\uc73c\ub85c \ub300\ub7b5\uc801\uc778 RAM \uc6a9\ub7c9\uc744 \uacc4\uc0b0\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>\uba54\ubaa8\ub9ac = \ubca1\ud130 \uc218 \u00d7 \ucc28\uc6d0 \uc218 \u00d7 4\ubc14\uc774\ud2b8 \u00d7 1.5\n</code></pre> <p>\ub9c8\uc9c0\ub9c9 1.5\ubc30\ub294 HNSW \uadf8\ub798\ud504\u00b7\uba54\ud0c0\ub370\uc774\ud130\u00b7\uc784\uc2dc \uc138\uadf8\uba3c\ud2b8 \ub4f1 \ubd80\uac00 \uc624\ubc84\ud5e4\ub4dc\ub97c \uace0\ub824\ud55c \uac12\uc774\ub2e4. \uc608\ub97c \ub4e4\uc5b4 1,000,000\uac1c\uc758 1,024\ucc28\uc6d0 \ubca1\ud130\ub97c \uba54\ubaa8\ub9ac\uc5d0 \uc62c\ub9b0\ub2e4\uba74</p> <pre><code>1,000,000 \u00d7 1,024 \u00d7 4 \u00d7 1.5 \u2252 5.7 GB\n</code></pre> <p>\ud301</p> <ul> <li> <p>\uc591\uc774 \ubc29\ub300\ud558\ub2e4\uba74 \uc591\uc790\ud654(Quantization)\ub97c \uc801\uc6a9\ud574 \ud544\uc694\ud55c RAM\uc744 \ucd94\uac00\ub85c \uc904\uc77c \uc218 \uc788\ub2e4.</p> </li> <li> <p>\uba54\ubaa8\ub9ac\uc5d0 \uc62c\ub9b4 \ubca1\ud130 \uc591\uc744 \uc808\ubc18\uc73c\ub85c \uc904\uc774\uba74 \uc9c0\uc5f0 \uc2dc\uac04(latency)\uc774 \ub300\ub7b5 2\ubc30 \uc99d\uac00\ud55c\ub2e4\uace0 \uac00\uc815\ud558\uba74 \ub41c\ub2e4.</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Capacity%20Planning/#2","title":"2. \ud398\uc774\ub85c\ub4dc \ud06c\uae30 \uc0b0\uc815","text":"<p>\ud398\uc774\ub85c\ub4dc\ub294 \ub370\uc774\ud130 \uad6c\uc870\uc5d0 \ub530\ub77c \ud3b8\ucc28\uac00 \ud06c\ub2e4.</p> \ud0c0\uc785 \uc608\uc2dc \ud06c\uae30 \uc124\uba85 \ubb38\uc790\uc5f4 \uae38\uc774\uc5d0 \ube44\ub840 \ud14d\uc2a4\ud2b8 \uae38\uc774\uc640 \uc778\ucf54\ub529 \ubc29\uc2dd\uc5d0 \uc601\ud5a5 int64/float64 8 B \uc22b\uc790\ud615 bool 1 B \ubd88\ub9ac\uc5b8 <p>\ud398\uc774\ub85c\ub4dc \ucd1d \ud06c\uae30\ub294 \ub2e4\uc74c \uc2dd\uc73c\ub85c \ucd94\uc815\ud55c\ub2e4.</p> <pre><code>\ucd1d \ud398\uc774\ub85c\ub4dc = \ud3ec\uc778\ud2b8 \uc218 \u00d7 \ub2e8\uc77c \ud398\uc774\ub85c\ub4dc \ud06c\uae30 \u00d7 1.5\n</code></pre> <p>\uc608\ub97c \ub4e4\uc5b4 5 KB JSON \ud398\uc774\ub85c\ub4dc\ub97c \uac00\uc9c4 1 M \ud3ec\uc778\ud2b8\ub77c\uba74 \uc57d 4.77 GB\ub97c \uc608\uc0c1\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Capacity%20Planning/#3-ram","title":"3. RAM \u2194 \ub514\uc2a4\ud06c \ubc30\uce58 \uc804\ub7b5","text":"\uc2dc\ub098\ub9ac\uc624 \uad8c\uc7a5 \uc124\uc815 \ub300\uaddc\ubaa8 \ubca1\ud130, \ud3c9\uade0 \uc9c0\uc5f0 \ud5c8\uc6a9 \uba54\ubaa8\ub9ac \ub9e4\ud551(mmap). \ubca1\ud130\ub294 \ub514\uc2a4\ud06c\uc5d0 \ub450\uace0 \uc790\uc8fc \uc870\ud68c\ub418\ub294 \uc77c\ubd80\ub9cc \uce90\uc2dc \ub2e4\uc911 \ud14c\ub10c\ud2b8/\uc11c\ube0c\uadf8\ub8f9 \uac80\uc0c9 \uba54\ubaa8\ub9ac \ub9e4\ud551 + \ud14c\ub10c\ud2b8\ubcc4 \uc11c\ube0c\uc14b\ub9cc \uce90\uc2dc \uc804\uccb4\ub97c \uba54\ubaa8\ub9ac\uc5d0 \ucda9\ubd84\ud55c RAM \ud655\ubcf4, \uc55e\uc758 \uacc4\uc0b0\uc2dd \ucc38\uace0 <p>\ub514\uc2a4\ud06c I/O \uc18d\ub3c4 \uc5ed\uc2dc \uc131\ub2a5\uc5d0 \ud070 \uc601\ud5a5\uc744 \ubbf8\uce5c\ub2e4. Qdrant Cloud \uace0\uc6a9\ub7c9 \uac80\uc0c9\uc774 \ud544\uc694\ud558\ub2e4\uba74 \ubb38\uc758\ub97c \uad8c\uc7a5\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Capacity%20Planning/#4-qdrant-cloud","title":"4. \ub514\uc2a4\ud06c \ud655\uc7a5(Qdrant Cloud)","text":"<p>UI\uc5d0\uc11c Scale Up \uae30\ub2a5\uc73c\ub85c \ub514\uc2a4\ud06c\ub97c \ub298\ub9b4 \uc218 \uc788\ub2e4. \ud55c \ubc88 \ub298\ub9b0 \ub514\uc2a4\ud06c\ub294 \uc904\uc77c \uc218 \uc5c6\uc73c\ubbc0\ub85c \uacc4\ud68d\uc801\uc73c\ub85c \uacb0\uc815\ud574\uc57c \ud55c\ub2e4.</p> <p>\ud655\uc7a5 \uc774\uc810</p> <ul> <li> <p>\ub354 \ud070 \ub370\uc774\ud130\uc14b \uc800\uc7a5 \u2192 \uac80\uc0c9 \ud488\uc9c8 \ud5a5\uc0c1</p> </li> <li> <p>HNSW \ub4f1 \uace0\uae09 \uc778\ub371\uc2a4 \uc801\uc6a9</p> </li> <li> <p>RAM \uc5ec\uc720 \uc99d\uac00 \u2192 \uce90\uc2f1 \ud6a8\uc728 \ud5a5\uc0c1</p> </li> <li> <p>\ubc31\uc5c5 \ubc0f \uc911\ubcf5\uc131 \ud655\ubcf4</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Capacity%20Planning/#5","title":"5. \uc694\uc57d \uacc4\uc0b0 \uc2dd","text":"\ud56d\ubaa9 \uc2dd \ubca1\ud130 \uba54\ubaa8\ub9ac <code>N_vectors \u00d7 dim \u00d7 4B \u00d7 1.5</code> \ud398\uc774\ub85c\ub4dc \uba54\ubaa8\ub9ac <code>N_points \u00d7 payload_size \u00d7 1.5</code> \uc11c\ube0c\uadf8\ub8f9 \uba54\ubaa8\ub9ac <code>N_active_vectors \u00d7 dim \u00d7 4B \u00d7 1.5</code> <p>\ubaa8\ub4e0 \uc218\uce58\ub294 \ucd94\uc815\uce58\uc774\ubbc0\ub85c \uc2e4\uc81c \ub370\uc774\ud130\ub85c \ud504\ub85c\ud30c\uc77c\ub9c1\ud558\uc5ec \uac80\uc99d\ud558\ub294 \uac83\uc774 \uac00\uc7a5 \uc815\ud655\ud558\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Codebase%20with%20Semantic%20Search/","title":"Codebase with Semantic Search","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Codebase%20with%20Semantic%20Search/#1","title":"1. \ubaa9\ud45c \ubc0f \uc811\uadfc \ubc29\uc2dd","text":"<ol> <li> <p>\uc790\uc5f0\uc5b4 \uc9c8\uc758 \u2192 \uc2dc\ub9e8\ud2f1 \uac80\uc0c9</p> <ul> <li>\uc77c\ubc18 \ubb38\uc7a5\uc6a9 \uc784\ubca0\ub529 \ubaa8\ub378: <code>sentence-transformers/all-MiniLM-L6-v2</code></li> </ul> </li> <li> <p>\ucf54\ub4dc \u2194 \ucf54\ub4dc \uc720\uc0ac\ub3c4 \uac80\uc0c9</p> <ul> <li>\ucf54\ub4dc \ud2b9\ud654 \uc784\ubca0\ub529 \ubaa8\ub378: <code>jinaai/jina-embeddings-v2-base-code</code></li> </ul> </li> <li> <p>\ucf54\ub4dc \uc815\uc81c</p> <ul> <li> <p>\uc790\uc5f0\uc5b4 \ubaa8\ub378\uc744 \uc704\ud574 \ud568\uc218\u2006\u00b7\u2006\uad6c\uc870\uccb4 \uc2dc\uadf8\ub2c8\ucc98, \uc8fc\uc11d, \ubaa8\ub4c8 \uc815\ubcf4\ub97c \ubb38\uc7a5 \ud615\ud0dc\ub85c \ubcc0\ud658</p> </li> <li> <p>\ucf54\ub4dc \ud2b9\ud654 \ubaa8\ub378\uc740 \uc6d0\ubcf8 \ucf54\ub4dc\ub97c \uadf8\ub300\ub85c \uc0ac\uc6a9</p> </li> </ul> </li> <li> <p>Qdrant \uceec\ub809\uc158</p> <ul> <li><code>text</code> \ubca1\ud130 \uacf5\uac04\uacfc <code>code</code> \ubca1\ud130 \uacf5\uac04\uc744 \ub3d9\uc2dc\uc5d0 \uc800\uc7a5</li> </ul> </li> <li> <p>\uc9c8\uc758 \uc2dc\ub098\ub9ac\uc624</p> <ul> <li> <p>\uc0ac\uc6a9\uc790 \uc9c8\uc758\ub97c \ub450 \ubaa8\ub378\ub85c \ubaa8\ub450 \uc784\ubca0\ub529 \u2192 \uac01\uac01 \uc0c1\uc704 k\uac1c \uc2a4\ub2c8\ud3ab \uac80\uc0c9</p> </li> <li> <p>\ud544\uc694 \uc2dc \uacb0\uacfc\ub97c \ubcd1\ud569\ud558\uac70\ub098 \uadf8\ub8f9\ud551\ud558\uc5ec \ub2e4\uc591\uc131\uacfc \uc815\ud655\ub3c4\ub97c \ud5a5\uc0c1</p> </li> </ul> </li> </ol>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Codebase%20with%20Semantic%20Search/#2","title":"2. \uc18c\uc2a4 \ucf54\ub4dc \ud30c\uc2f1 \u00b7 \uccad\ud06c \ubd84\ud560","text":"\ub2e8\uacc4 \ub0b4\uc6a9 LSIF \ucd94\ucd9c <code>rust-analyzer</code>\ub97c \uc774\uc6a9\ud574 LSP \u2192 LSIF \ud3ec\ub9f7\uc73c\ub85c \ub0b4\ubcf4\ub0c4 \uccad\ud06c \uc815\uc758 \ud568\uc218\u00b7\uba54\uc11c\ub4dc\u00b7struct\u00b7enum \ub4f1 \uc5b8\uc5b4 \ub2e8\uc704\ubcc4\ub85c \ubd84\ud560 JSON \ubb38\uc11c\ud654 \ucf54\ub4dc, \uc2dc\uadf8\ub2c8\ucc98, docstring, \ubaa8\ub4c8\u00b7\ud30c\uc77c \uacbd\ub85c, \ud589 \ubc88\ud638 \ub4f1\uc744 \ud3ec\ud568 <p>\uc608\uc2dc JSON \ud56d\ubaa9</p> <pre><code>{\n  \"name\": \"await_ready_for_timeout\",\n  \"signature\": \"fn await_ready_for_timeout(&amp;self, timeout: Duration) -&gt; bool\",\n  \"code_type\": \"Function\",\n  \"docstring\": \"Return `true` if ready, `false` if timed out.\",\n  \"line_from\": 43,\n  \"line_to\": 51,\n  \"context\": {\n    \"module\": \"common\",\n    \"file_name\": \"is_ready.rs\",\n    \"struct_name\": \"IsReady\",\n    \"snippet\": \"/// Return `true` if ready ... }\"\n  }\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Codebase%20with%20Semantic%20Search/#3-textify","title":"3. \uc790\uc5f0\uc5b4 \ubcc0\ud658 \ud568\uc218 <code>textify</code>","text":"<ol> <li> <p>\ud45c\uae30 \uc815\uaddc\ud654</p> <ul> <li>CamelCase \u2192 snake_case \u2192 \uc790\uc5f0\uc5b4 \ud615\ud0dc</li> </ul> </li> <li> <p>\uc8fc\uc11d\u00b7docstring \ud3ec\ud568</p> </li> <li> <p>\ud15c\ud50c\ub9bf \uc870\ud569</p> <pre><code>\"Function await ready for timeout defined as fn \u2026 in struct Is ready module common file is_ready rs\"\n</code></pre> </li> <li> <p>\ud2b9\uc218\ubb38\uc790 \uc81c\uac70 \ud6c4 \uacf5\ubc31\uc73c\ub85c \uc5f0\uacb0</p> </li> </ol>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Codebase%20with%20Semantic%20Search/#4-qdrant","title":"4. Qdrant \uceec\ub809\uc158 \uc0dd\uc131 \ubc0f \uc5c5\ub85c\ub4dc","text":"<pre><code>from qdrant_client import QdrantClient, models\n\nclient = QdrantClient(\"http://localhost:6333\")   # \ub610\ub294 \ud074\ub77c\uc6b0\ub4dc URL+API Key\n\nclient.create_collection(\n    \"qdrant-sources\",\n    vectors_config={\n        \"text\": models.VectorParams(\n            size=client.get_embedding_size(\"sentence-transformers/all-MiniLM-L6-v2\"),\n            distance=models.Distance.COSINE\n        ),\n        \"code\": models.VectorParams(\n            size=client.get_embedding_size(\"jinaai/jina-embeddings-v2-base-code\"),\n            distance=models.Distance.COSINE\n        )\n    }\n)\n</code></pre> <p>\uc5c5\ub85c\ub4dc \uc608\uc2dc</p> <pre><code>points = [\n    models.PointStruct(\n        id=uuid.uuid4().hex,\n        vector={\n            \"text\":  models.Document(text=text_repr, model=\"sentence-transformers/all-MiniLM-L6-v2\"),\n            \"code\":  models.Document(text=code_src,  model=\"jinaai/jina-embeddings-v2-base-code\")\n        },\n        payload=meta_dict\n    )\n    for text_repr, code_src, meta_dict in zip(text_reprs, code_snippets, structures)\n]\n\nclient.upload_points(\"qdrant-sources\", points=points, batch_size=64)\n</code></pre> <p><code>qdrant-client[fastembed]</code> \ud328\ud0a4\uc9c0\uac00 Document \uac1d\uccb4\ub97c \uc790\ub3d9\uc73c\ub85c \uc784\ubca0\ub529\ud558\uc5ec \uc804\uc1a1\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Codebase%20with%20Semantic%20Search/#5","title":"5. \uc9c8\uc758 \ubc0f \uacb0\uacfc \ubcd1\ud569","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Codebase%20with%20Semantic%20Search/#51","title":"5.1 \ub2e8\uc77c \ubaa8\ub378 \uac80\uc0c9","text":"<pre><code>query = \"How do I count points in a collection?\"\n\nhits_text = client.query_points(\n    \"qdrant-sources\",\n    query=models.Document(text=query, model=\"sentence-transformers/all-MiniLM-L6-v2\"),\n    using=\"text\",\n    limit=5\n).points\n\nhits_code = client.query_points(\n    \"qdrant-sources\",\n    query=models.Document(text=query, model=\"jinaai/jina-embeddings-v2-base-code\"),\n    using=\"code\",\n    limit=5\n).points\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Codebase%20with%20Semantic%20Search/#52","title":"5.2 \ubc30\uce58 \ucffc\ub9ac\ub85c \ub3d9\uc2dc \uac80\uc0c9","text":"<pre><code>responses = client.query_batch_points(\n    \"qdrant-sources\",\n    requests=[\n        models.QueryRequest(\n            query=models.Document(text=query, model=\"sentence-transformers/all-MiniLM-L6-v2\"),\n            using=\"text\", limit=5, with_payload=True\n        ),\n        models.QueryRequest(\n            query=models.Document(text=query, model=\"jinaai/jina-embeddings-v2-base-code\"),\n            using=\"code\", limit=5, with_payload=True\n        ),\n    ],\n)\n# responses[0].points + responses[1].points -&gt; \uacb0\uacfc \ud6c4\ucc98\ub9ac\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Codebase%20with%20Semantic%20Search/#53","title":"5.3 \ubaa8\ub4c8 \ub2e8\uc704 \uadf8\ub8f9\ud551","text":"<pre><code>grouped = client.query_points_groups(\n    collection_name=\"qdrant-sources\",\n    query=models.Document(text=query, model=\"jinaai/jina-embeddings-v2-base-code\"),\n    using=\"code\",\n    group_by=\"context.module\",\n    limit=5, group_size=1\n)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Codebase%20with%20Semantic%20Search/#6","title":"6. \uc6f9 \ub370\ubaa8 \ub3d9\uc791 \ud750\ub984","text":"<ol> <li> <p>\uc0ac\uc6a9\uc790\uac00 \uc790\uc5f0\uc5b4 \uc9c8\uc758 \uc785\ub825</p> </li> <li> <p>\ub450 \ubaa8\ub378 \ubcd1\ub82c \uc784\ubca0\ub529</p> </li> <li> <p><code>text</code> 5\uac74 + <code>code</code> 20\uac74 \uac80\uc0c9</p> </li> <li> <p>\uacb0\uacfc \uc911\ubcf5\u00b7\uacb9\uce68 \uc2a4\ub2c8\ud3ab \ubcd1\ud569</p> </li> <li> <p>\ud504\ub7f0\ud2b8\uc5d4\ub4dc\uc5d0\uc11c \ucf54\ub4dc \ud558\uc774\ub77c\uc774\ud2b8 \ud45c\uc2dc</p> </li> </ol>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Codebase%20with%20Semantic%20Search/#7","title":"7. \uc815\ub9ac \ubc0f \uad8c\uc7a5 \uc0ac\ud56d","text":"<ul> <li> <p>\uccad\ud06c \ud06c\uae30: \ud568\uc218\u00b7\uba54\uc11c\ub4dc \ub4f1 \ub17c\ub9ac \ub2e8\uc704\ub85c \ub098\ub204\uc5b4\uc57c \ucee8\ud14d\uc2a4\ud2b8 \uc190\uc2e4\uc774 \uc801\ub2e4.</p> </li> <li> <p>\ubaa8\ub378 \uc774\uc911\ud654: \uc790\uc5f0\uc5b4 \ubaa8\ub378\uc740 \uc2dc\uadf8\ub2c8\ucc98\u00b7\uc8fc\uc11d \uae30\ubc18 \ub9e4\uce6d\uc5d0 \uac15\ud558\uace0, \ucf54\ub4dc \ubaa8\ub378\uc740 \ub85c\uc9c1 \uc720\uc0ac\ub3c4\uc5d0 \uac15\ud558\ub2e4.</p> </li> <li> <p>\uacb0\uacfc \ud6c4\ucc98\ub9ac:</p> <ul> <li> <p>\ub7ad\ud0b9 \ud569\uc0b0, \uc911\ubcf5 \uc81c\uac70, \uadf8\ub8f9\ud551\uc73c\ub85c \ub2e4\uc591\uc131\uacfc \uc815\ud655\ub3c4\ub97c \uc870\uc815\ud55c\ub2e4.</p> </li> <li> <p>UI\uc5d0\uc11c \ucf54\ub4dc \uc704\uce58(\ud30c\uc77c\u00b7\ud589 \ubc88\ud638)\uc640 \uc2a4\ub2c8\ud3ab\uc744 \ud568\uaed8 \ud45c\uae30\ud558\uba74 \ud0d0\uc0c9\uc131\uc774 \ub192\uc544\uc9c4\ub2e4.</p> </li> </ul> </li> <li> <p>\uc131\ub2a5: FastEmbed \ub0b4\uc7a5 \uc778\ud37c\ub7f0\uc2a4\ub294 CPU \ubcd1\ub82c\ud654\uac00 \uac00\ub2a5\ud558\ub098, \ud504\ub85c\uc138\uc2a4 \uc218\uac00 \uacfc\ud558\uba74 \uc2a4\uc651\uc774 \ubc1c\uc0dd\ud560 \uc218 \uc788\uc73c\ubbc0\ub85c \uc8fc\uc758\uac00 \ud544\uc694\ud558\ub2e4.</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Collection/","title":"Collection","text":"<p>Qdrant\ub294 \uace0\uc131\ub2a5 \ubca1\ud130 \uac80\uc0c9 \uc5d4\uc9c4\uc774\uba70, \ub2e4\uc591\ud55c \ubca1\ud130 \uae30\ubc18 \uac80\uc0c9 \uae30\ub2a5\uc744 \uc81c\uacf5\ud55c\ub2e4. \uc774 \uae00\uc5d0\uc11c\ub294 Qdrant\uc758 \ud575\uc2ec \uac1c \uc911 \ud558\ub098\uc778 \uceec\ub809\uc158(Collection)\uc5d0 \ub300\ud574 \uc124\uba85\ud558\uace0, \uc124\uc815 \ubc29\ubc95\uacfc \uace0\uae09 \uae30\ub2a5\uae4c\uc9c0 \uc815\ub9ac\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Collection/#collection","title":"\uceec\ub809\uc158(Collection)\uc774\ub780 \ubb34\uc5c7\uc778\uac00","text":"<p>Qdrant\uc5d0\uc11c \uceec\ub809\uc158\uc740 \ubca1\ud130(Point)\uc640 \uadf8\uc5d0 \ub530\ub978 Payload\uc758 \ub17c\ub9ac\uc801 \uc9d1\ud569\uc774\ub2e4. \uceec\ub809\uc158 \ub0b4\ubd80\uc758 \ubaa8\ub4e0 \ubca1\ud130\ub294 \ub3d9\uc77c\ud55c \ucc28\uc6d0(dimensionality)\uacfc \ub3d9\uc77c\ud55c \uac70\ub9ac \uce21\uc815 \ubc29\uc2dd(metric)\uc744 \uc0ac\uc6a9\ud574\uc57c \ud558\uba70, \uac80\uc0c9\uc740 \uceec\ub809\uc158 \ub2e8\uc704\ub85c \uc218\ud589\ub41c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Collection/#_1","title":"\uc9c0\uc6d0 \uac70\ub9ac \uce21\uc815 \ubc29\uc2dd","text":"<ul> <li> <p>Dot Product (\ub0b4\uc801)</p> </li> <li> <p>Cosine Similarity (\ucf54\uc0ac\uc778 \uc720\uc0ac\ub3c4)</p> </li> <li> <p>Euclidean Distance (\uc720\ud074\ub9ac\ub514\uc548 \uac70\ub9ac)</p> </li> <li> <p>Manhattan Distance (\ub9e8\ud574\ud2bc \uac70\ub9ac)</p> </li> </ul> <p>Cosine \ubc29\uc2dd\uc740 \ub0b4\ubd80\uc801\uc73c\ub85c \uc815\uaddc\ud654\ub41c \ubca1\ud130\uc5d0 \ub300\ud55c Dot Product\ub85c \uad6c\ud604\ub418\uba70, \uc5c5\ub85c\ub4dc \uc2dc \ubca1\ud130\ub294 \uc790\ub3d9\uc73c\ub85c \uc815\uaddc\ud654\ub41c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Collection/#_2","title":"\uceec\ub809\uc158 \uc0dd\uc131 \uc608\uc2dc","text":"<pre><code>PUT /collections/:collection_name\n{\n  \"vectors\": {\n    \"size\": 300,\n    \"distance\": \"Cosine\"\n  }\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Collection/#_3","title":"\uc120\ud0dd \uac00\ub2a5\ud55c \ucd94\uac00 \uc124\uc815","text":"\uc124\uc815 \ud0a4 \uc124\uba85 <code>hnsw_config</code> HNSW \uc778\ub371\uc2a4 \uad6c\uc870 \uc124\uc815 <code>wal_config</code> Write-Ahead Log \uad00\ub828 \uc124\uc815 <code>optimizers_config</code> \uc778\ub371\uc2a4 \ucd5c\uc801\ud654 \uc124\uc815 <code>shard_number</code> \uc0e4\ub4dc \uac1c\uc218 <code>on_disk_payload</code> Payload\ub97c \ub514\uc2a4\ud06c\uc5d0\ub9cc \uc800\uc7a5\ud560\uc9c0 \uc5ec\ubd80 <code>quantization_config</code> \ubca1\ud130 \uc591\uc790\ud654 \uc124\uc815 <code>strict_mode_config</code> Strict \ubaa8\ub4dc \uc124\uc815"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Collection/#_4","title":"\uba40\ud2f0\ud14c\ub10c\uc2dc \uad6c\uc131 \ubc29\ubc95","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Collection/#_5","title":"\ub2e8\uc77c \uceec\ub809\uc158 \uae30\ubc18 \uba40\ud2f0\ud14c\ub10c\uc2dc","text":"<p>\ub300\ubd80\ubd84\uc758 \uacbd\uc6b0\uc5d0\ub294 \ud558\ub098\uc758 \uceec\ub809\uc158\uc5d0\uc11c payload \uae30\ubc18 \ubd84\ub9ac \ubc29\uc2dd\uc73c\ub85c \uba40\ud2f0\ud14c\ub10c\uc2dc\ub97c \uad6c\uc131\ud558\ub294 \uac83\uc774 \uac00\uc7a5 \ud6a8\uc728\uc801\uc774\ub2e4. \uc774 \ubc29\ubc95\uc740 \uc0ac\uc6a9\uc790 \uac04\uc758 \ub17c\ub9ac\uc801 \uad6c\ubd84\uc774 \uac00\ub2a5\ud558\uba70, \uc2dc\uc2a4\ud15c \uc790\uc6d0\uc744 \uc808\uc57d\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Collection/#_6","title":"\ub2e4\uc911 \uceec\ub809\uc158 \uc0ac\uc6a9\uc774 \uc801\ud569\ud55c \uacbd\uc6b0","text":"<p>\uc0ac\uc6a9\uc790 \uc218\uac00 \uc801\uace0, \uc0ac\uc6a9\uc790 \uac04 \uc644\uc804\ud55c \uc131\ub2a5 \ub610\ub294 \ub370\uc774\ud130 \uaca9\ub9ac\uac00 \ud544\uc694\ud560 \uacbd\uc6b0\uc5d0\ub294 \uc5ec\ub7ec \uac1c\uc758 \uceec\ub809\uc158\uc744 \uc0dd\uc131\ud558\ub294 \uac83\uc774 \uc801\ud569\ud558\ub2e4. \ub2e8, \uc774 \ubc29\uc2dd\uc740 \uc790\uc6d0 \uc0ac\uc6a9\ub7c9\uc774 \uc99d\uac00\ud560 \uc218 \uc788\uace0, \uac01 \uceec\ub809\uc158 \uac04 \uc131\ub2a5 \uac04\uc12d\uc744 \ubc29\uc9c0\ud574\uc57c \ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Collection/#_7","title":"\uae30\uc874 \uceec\ub809\uc158\uc73c\ub85c\ubd80\ud130 \uc0c8 \uceec\ub809\uc158 \uc0dd\uc131","text":"<pre><code>PUT /collections/new_collection\n{\n  \"vectors\": {\n    \"size\": 300,\n    \"distance\": \"Cosine\"\n  },\n  \"init_from\": {\n    \"collection\": \"existing_collection\"\n  }\n}\n</code></pre> <p><code>init_from</code> \uae30\ub2a5\uc740 \uc2e4\ud5d8 \ub610\ub294 \ud14c\uc2a4\ud2b8 \ubaa9\uc801\uc5d0\ub294 \uc720\uc6a9\ud558\ub098, \uc131\ub2a5 \ubbfc\uac10 \ud658\uacbd\uc5d0\uc11c\ub294 \uc608\uae30\uce58 \uc54a\uc740 \ubd80\ud558\ub97c \uc720\ubc1c\ud560 \uc218 \uc788\uc73c\ubbc0\ub85c \uc8fc\uc758\uac00 \ud544\uc694\ud558\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Collection/#named-vector","title":"Named Vector\ub97c \uc0ac\uc6a9\ud55c \ub2e4\uc911 \ubca1\ud130 \uad6c\uc131","text":"<p>\ud558\ub098\uc758 \ud3ec\uc778\ud2b8\uc5d0 \uc11c\ub85c \ub2e4\ub978 \uc885\ub958\uc758 \ubca1\ud130\ub97c \uc800\uc7a5\ud558\uace0, \uac01\uac01\uc758 \uc774\ub984\uacfc \uc124\uc815\uc744 \ubcc4\ub3c4\ub85c \uc9c0\uc815\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>PUT /collections/multivector_collection\n{\n  \"vectors\": {\n    \"image\": { \"size\": 4, \"distance\": \"Dot\" },\n    \"text\": { \"size\": 8, \"distance\": \"Cosine\" }\n  }\n}\n</code></pre> <p>\uac01 \ubca1\ud130\ub294 \uace0\uc720 \uc774\ub984\uc744 \uac00\uc838\uc57c \ud558\uba70, \ub3c5\ub9bd\uc801\uc73c\ub85c \uc778\ub371\uc2f1 \ubc0f \ucd5c\uc801\ud654 \uc124\uc815\uc774 \uac00\ub2a5\ud558\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Collection/#ram","title":"RAM \ub610\ub294 \ub514\uc2a4\ud06c \uae30\ubc18 \ubca1\ud130 \uc800\uc7a5","text":"<p>\uae30\ubcf8\uc801\uc73c\ub85c \ubca1\ud130\ub294 RAM\uc5d0 \uc800\uc7a5\ub418\uc5b4 \ube60\ub978 \uac80\uc0c9\uc774 \uac00\ub2a5\ud558\ub2e4. \uadf8\ub7ec\ub098 <code>on_disk</code> \uc635\uc158\uc744 \ud65c\uc131\ud654\ud558\uba74 \uba54\ubaa8\ub9ac\ub9f5 \uae30\ubc18\uc73c\ub85c \ub514\uc2a4\ud06c\uc5d0 \uc800\uc7a5\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>PATCH /collections/my_collection\n{\n  \"vectors\": {\n    \"\": { \"on_disk\": true }\n  }\n}\n</code></pre> <p>Named Vector\ub97c \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0\uc5d0\ub294 \ubca1\ud130 \uc774\ub984\uc744 \uba85\uc2dc\ud574\uc57c \ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Collection/#uint8","title":"\uc815\uc218\ud615 \ubca1\ud130 \uc800\uc7a5 (uint8)","text":"<pre><code>PUT /collections/compact_collection\n{\n  \"vectors\": {\n    \"size\": 1024,\n    \"distance\": \"Cosine\",\n    \"datatype\": \"uint8\"\n  }\n}\n</code></pre> <p>uint8 \ud615\uc2dd\uc740 \uba54\ubaa8\ub9ac\ub97c \uc808\uc57d\ud558\uace0 \uac80\uc0c9 \uc18d\ub3c4\ub97c \ud5a5\uc0c1\uc2dc\ud0ac \uc218 \uc788\ub2e4. \ub2e4\ub9cc, \uc77c\ubd80 \uc815\ubc00\ub3c4 \uc190\uc2e4\uc774 \uc788\uc744 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Collection/#sparse-vector","title":"Sparse Vector \uc800\uc7a5","text":"<p>\ud76c\uc18c \ubca1\ud130\ub294 \uac01 \ucc28\uc6d0\uc5d0 \ud574\ub2f9\ud558\ub294 \uac12\ub9cc \uc800\uc7a5\ub418\ub294 \uad6c\uc870\uc774\uba70, \uc8fc\ub85c \ud14d\uc2a4\ud2b8 \uae30\ubc18 \uac80\uc0c9\uc5d0 \uc0ac\uc6a9\ub41c\ub2e4. \uc774\ub984\uc774 \ubc18\ub4dc\uc2dc \ud544\uc694\ud558\uba70, \uac70\ub9ac \uce21\uc815 \ubc29\uc2dd\uc740 Dot\uc73c\ub85c \uace0\uc815\ub41c\ub2e4.</p> <pre><code>PUT /collections/sparse_collection\n{\n  \"sparse_vectors\": {\n    \"text\": {}\n  }\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Collection/#_8","title":"\uceec\ub809\uc158 \uc0c1\ud0dc \ud655\uc778 \ubc0f \uc0ad\uc81c","text":"<ul> <li> <p>\uceec\ub809\uc158 \uc874\uc7ac \uc5ec\ubd80 \ud655\uc778: <code>GET /collections/{collection_name}/exists</code></p> </li> <li> <p>\uceec\ub809\uc158 \uc815\ubcf4 \uc870\ud68c: <code>GET /collections/{collection_name}</code></p> </li> <li> <p>\uceec\ub809\uc158 \uc0ad\uc81c: <code>DELETE /collections/{collection_name}</code></p> </li> </ul> <p>\uceec\ub809\uc158\uc758 \uc0c1\ud0dc\ub294 \ub2e4\uc74c\uacfc \uac19\uc774 \ub098\ud0c0\ub09c\ub2e4.</p> \uc0c1\ud0dc \uc124\uba85 green \ucd5c\uc801\ud654 \uc644\ub8cc yellow \ucd5c\uc801\ud654 \uc911 grey \ucd5c\uc801\ud654 \ub300\uae30 \uc911 (\uc5c5\ub370\uc774\ud2b8 \ud544\uc694) red \uc624\ub958 \ubc1c\uc0dd"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Collection/#alias","title":"\uceec\ub809\uc158 Alias \uc0ac\uc6a9","text":"<p>Alias\ub294 \uceec\ub809\uc158\uc5d0 \ub300\ud55c \ubcc4\uce6d\uc744 \uc758\ubbf8\ud55c\ub2e4. \uc6b4\uc601 \ud658\uacbd\uc5d0\uc11c\ub294 \ubc84\uc804 \uc804\ud658 \uc2dc \uc720\uc6a9\ud558\uac8c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>POST /collections/aliases\n{\n  \"actions\": [\n    {\n      \"create_alias\": {\n        \"collection_name\": \"v1_collection\",\n        \"alias_name\": \"prod_collection\"\n      }\n    }\n  ]\n}\n</code></pre> <p>\uae30\uc874 alias\ub97c \ub2e4\ub978 \uceec\ub809\uc158\uc73c\ub85c \uad50\uccb4\ud560 \uacbd\uc6b0\uc5d0\ub294 \uc6d0\uc790\uc801 \ucc98\ub9ac\ub85c <code>delete_alias</code> \u2192 <code>create_alias</code>\ub97c \ud568\uaed8 \uc218\ud589\ud574\uc57c \ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Collection/#_9","title":"\ubca1\ud130/\ud3ec\uc778\ud2b8 \uc218 \ud655\uc778","text":"<ul> <li> <p><code>points_count</code>: \uc804\uccb4 \ud3ec\uc778\ud2b8 \uc218</p> </li> <li> <p><code>vectors_count</code>: \uc804\uccb4 \ubca1\ud130 \uc218</p> </li> <li> <p><code>indexed_vectors_count</code>: \uc778\ub371\uc2f1\ub41c \ubca1\ud130 \uc218 (HNSW \ub4f1)</p> </li> </ul> <p>\uc774 \uac12\ub4e4\uc740 \ub0b4\ubd80 \ucd5c\uc801\ud654 \uc0c1\ud0dc\uc5d0 \ub530\ub77c \ubcc0\ub3d9\ub418\uba70, \uc815\ud655\ud55c \uc218\uce58\ub97c \uc704\ud574\uc11c\ub294 count API\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\uc774 \ubc14\ub78c\uc9c1\ud558\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Collection/#_10","title":"\uacb0\ub860","text":"<p>Qdrant\uc758 \uceec\ub809\uc158\uc740 \ub2e8\uc21c\ud55c \ubca1\ud130 \uc800\uc7a5\uc18c\ub97c \ub118\uc5b4\uc11c, \ub2e4\uc591\ud55c \uad6c\uc131 \uc635\uc158\uacfc \uc6b4\uc601 \uae30\ub2a5\uc744 \uc81c\uacf5\ud55c\ub2e4. \ub2e4\uc911 \ubca1\ud130 \uad6c\uc131, \uba40\ud2f0\ud14c\ub10c\uc2dc, \ub514\uc2a4\ud06c \uc800\uc7a5, \uc591\uc790\ud654 \ubc0f alias \uae30\ub2a5\uc740 \uc2e4\ubb34 \ud658\uacbd\uc5d0\uc11c \uc720\uc6a9\ud558\uac8c \ud65c\uc6a9\ub420 \uc218 \uc788\ub2e4. \uceec\ub809\uc158\uc758 \uad6c\uc870\uc640 \uc124\uc815\uc744 \uc798 \uc774\ud574\ud558\uace0 \ud65c\uc6a9\ud55c\ub2e4\uba74, Qdrant\ub97c \ud1b5\ud574 \uace0\uc131\ub2a5 \ubca1\ud130 \uac80\uc0c9 \uc2dc\uc2a4\ud15c\uc744 \uc548\uc815\uc801\uc73c\ub85c \uc6b4\uc601\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Distributed%20deployment/","title":"Distributed deployment","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Distributed%20deployment/#1","title":"1. \ub178\ub4dc \uc218 \uacb0\uc815","text":"<p>Qdrant \ud074\ub7ec\uc2a4\ud130\uc758 \ub178\ub4dc \uc218\ub294 \ube44\uc6a9\u00b7\uc7a5\uc560 \ud5c8\uc6a9\uc131(\ub0b4\uad6c\uc131)\u00b7\uc131\ub2a5 \uac04\uc758 \uc6b0\uc120\uc21c\uc704\uc5d0 \ub530\ub77c \ub2ec\ub77c\uc9c4\ub2e4.</p> \uc6b0\uc120\uc21c\uc704 \uad8c\uc7a5 \uad6c\uc131 \uc7a5\uc810 \ub2e8\uc810 \ube44\uc6a9 \uc808\uac10 \ub2e8\uc77c \ub178\ub4dc \uc778\ud504\ub77c \ube44\uc6a9 \ucd5c\uc18c \uc7a5\uc560 \uc2dc \uc989\uc2dc \ub2e4\uc6b4\ud0c0\uc784 \ubc1c\uc0dd, \uc601\uad6c \uc190\uc2e4 \ubcf5\uad6c \ubd88\uac00 \ub0b4\uad6c\uc131 \ucd5c\uc6b0\uc120 3\uac1c \uc774\uc0c1 \ub178\ub4dc + 2-\ubc30\uc218 \ubcf5\uc81c \ub178\ub4dc 1\uac1c \uc7a5\uc560 \uc2dc\uc5d0\ub3c4 \uc77d\uae30\u00b7\uc4f0\uae30\u00b7\uceec\ub809\uc158 \uc791\uc5c5 \uc9c0\uc18d, \uc601\uad6c \uc190\uc2e4 \ubcf5\uad6c \uac00\ub2a5, \ub85c\ub4dc\ubc38\ub7f0\uc2a4\ub85c \uc131\ub2a5 \ud5a5\uc0c1 \ube44\uc6a9 \uc99d\uac00 \uade0\ud615\ud615 2\uac1c \ub178\ub4dc + \ubcf5\uc81c \ub178\ub4dc 1\uac1c \uc7a5\uc560 \uc2dc \ub300\ubd80\ubd84\uc758 \uc77d\uae30\u00b7\uc4f0\uae30 \uac00\ub2a5, \ube44\uc6a9\uc740 3\ub178\ub4dc\ubcf4\ub2e4 \uc800\ub834 \uceec\ub809\uc158 \uc791\uc5c5(\uc0dd\uc131\u00b7\uc218\uc815\u00b7\uc0ad\uc81c)\uc740 \uc911\ub2e8, \uc601\uad6c \uc190\uc2e4 \ubcf5\uad6c \ubd88\uac00 <p>\uc694\uc57d\ud558\uba74 \ub2e8\uc77c \ub178\ub4dc\ub294 \ube44\ud504\ub85c\ub355\uc158, 3+ \ub178\ub4dc \ubcf5\uc81c \ud074\ub7ec\uc2a4\ud130\uac00 \uad8c\uc7a5, 2\ub178\ub4dc \ubcf5\uc81c\ub294 \ube44\uc6a9\u00b7\uc131\ub2a5 \uc808\ucda9\uc548\uc774\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Distributed%20deployment/#2","title":"2. \uc790\uccb4 \ud638\uc2a4\ud305\uc5d0\uc11c \ubd84\uc0b0 \ubaa8\ub4dc \ud65c\uc131\ud654","text":"<ol> <li> <p>\ud658\uacbd \ubcc0\uc218 \ub610\ub294 \uc124\uc815</p> <pre><code>cluster:\n  enabled: true\n  p2p:\n    port: 6335      # \ub0b4\ubd80 \ud1b5\uc2e0 \ud3ec\ud2b8\n  consensus:\n    tick_period_ms: 100\n</code></pre> <p>\ud639\uc740 <code>QDRANT__CLUSTER__ENABLED=true</code> \uc9c0\uc815.</p> </li> <li> <p>\uccab \ubc88\uc9f8 \ub178\ub4dc \uae30\ub3d9</p> <pre><code>./qdrant --uri 'http://node1:6335'\n</code></pre> </li> <li> <p>\ucd94\uac00 \ub178\ub4dc \ud569\ub958</p> <pre><code>./qdrant --bootstrap 'http://node1:6335'\n# \ud544\uc694 \uc2dc --uri \ub85c \uc790\uc2e0 \uc8fc\uc18c \uba85\uc2dc\n</code></pre> </li> <li> <p>\uc0c1\ud0dc \ud655\uc778</p> <pre><code>GET /cluster\n</code></pre> </li> </ol> <p>\ubd84\uc0b0 \ubaa8\ub4dc \ud65c\uc131\ud654\ub9cc\uc73c\ub85c \ub370\uc774\ud130\uac00 \uc790\ub3d9 \ubcf5\uc81c\ub418\uc9c0 \uc54a\ub294\ub2e4. Replication \uc124\uc815 \ub610\ub294 Shard \uc774\ub3d9 \ub2e8\uacc4\uac00 \ud544\uc694\ud558\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Distributed%20deployment/#3-qdrant-cloud","title":"3. Qdrant Cloud\uc5d0\uc11c \ubd84\uc0b0 \ubaa8\ub4dc","text":"<ul> <li> <p>\ud074\ub7ec\uc2a4\ud130 \ubc84\uc804\uc744 v1.7.4 \uc774\uc0c1\uc73c\ub85c \uc720\uc9c0\ud558\uba74 \uc548\uc815\uc131\uc774 \ub192\ub2e4.</p> </li> <li> <p>Cloud \ucf58\uc194\uc758 Scale Up\uc73c\ub85c \ub178\ub4dc \uc218\ub97c 2 \uc774\uc0c1\uc73c\ub85c \ub298\ub9ac\uba74 \ubd84\uc0b0 \ubaa8\ub4dc\uac00 \uc790\ub3d9 \uc124\uc815\ub41c\ub2e4.</p> </li> <li> <p>\uc0c8 \ub178\ub4dc\ub294 \ube44\uc5b4 \uc788\uc73c\ubbc0\ub85c \uc0c8 \uceec\ub809\uc158 \uc0dd\uc131 \ub610\ub294 \uc0e4\ub4dc \ubcf5\uc81c/\uc774\ub3d9\uc73c\ub85c \ub370\uc774\ud130\ub97c \ubd84\uc0b0\ud574\uc57c \ud55c\ub2e4.</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Distributed%20deployment/#4","title":"4. \uc0e4\ub529 \uac1c\uc694","text":"<ul> <li> <p>Shard: \ud3ec\uc778\ud2b8\ub97c \uc800\uc7a5\u00b7\uac80\uc0c9\ud558\ub294 \ub3c5\ub9bd \ub2e8\uc704</p> </li> <li> <p>\uc790\ub3d9 \uc0e4\ub529(\uae30\ubcf8): \uc77c\uad00 \ud574\uc2dc\ub85c \ubd84\ubc30</p> </li> <li> <p>\uc0ac\uc6a9\uc790 \uc815\uc758 \uc0e4\ub529: <code>sharding_method: custom</code> \ub85c \uc9c0\uc815, <code>shard_key</code> \ubcc4\ub85c \ud3ec\uc778\ud2b8 \uc5c5\ub85c\ub4dc</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Distributed%20deployment/#_1","title":"\uc0e4\ub4dc \uc218 \uc120\ud0dd","text":"<ul> <li> <p><code>shard_number</code>\ub294 \ub178\ub4dc \uc218\uc758 \ubc30\uc218\ub85c \uc124\uc815\ud55c\ub2e4.</p> </li> <li> <p>\ub178\ub4dc\ub2f9 \ucd5c\uc18c 2\uc0e4\ub4dc\ub97c \uad8c\uc7a5\ud558\uba70, \ubbf8\ub798 \ud655\uc7a5\uc744 \uace0\ub824\ud574 12\uc0e4\ub4dc \uad6c\uc131\uc774 \ubb34\ub09c\ud558\ub2e4.</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Distributed%20deployment/#5","title":"5. \ub178\ub4dc \uc7a5\uc560 \ubcf5\uad6c \uc2dc\ub098\ub9ac\uc624","text":"\uc0c1\ud669 \ub2e8\uc77c \ub178\ub4dc 2\ub178\ub4dc(\ubbf8\ubcf5\uc81c) 2\ub178\ub4dc(\ubcf5\uc81c) 3+\ub178\ub4dc(\ubcf5\uc81c) \uc77c\uc2dc\uc801 \ub2e4\uc6b4 \uc804\uccb4 \uc911\ub2e8 \uc804\uccb4 \uc911\ub2e8 \uceec\ub809\uc158 \uc791\uc5c5 \uc81c\uc678 \uc815\uc0c1 \uc644\uc804 \uc815\uc0c1 \uc601\uad6c \uc190\uc2e4 \ubc31\uc5c5 \ud544\uc694 \ubc31\uc5c5 \ud544\uc694 \ubc31\uc5c5 \ud544\uc694 \ubcf5\uad6c \uac00\ub2a5 <ul> <li> <p>dead \ub178\ub4dc \uc81c\uac70: <code>DELETE /cluster/peer/{peer_id}</code></p> </li> <li> <p>\uc0c8 \ub178\ub4dc \ud569\ub958 \ud6c4 \uc0e4\ub4dc \ubcf5\uc81c \ub610\ub294 \uc2a4\ub0c5\uc0f7 \ubcf5\uc6d0\uc73c\ub85c \ub370\uc774\ud130 \ubcf5\uad6c</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Distributed%20deployment/#6","title":"6. \uc77c\uad00\uc131 \uc635\uc158","text":"\uc635\uc158 \uc758\ubbf8 \uae30\ubcf8\uac12 <code>write_consistency_factor</code> \uc4f0\uae30 \uc131\uacf5 \ud310\ub2e8\uc5d0 \ud544\uc694\ud55c \ubcf5\uc81c\ubcf8 \uc218 1 <code>consistency</code> (\uc77d\uae30) all\u00b7majority\u00b7quorum\u00b7\uc22b\uc790 1 <code>ordering</code> (\uc4f0\uae30) weak\u00b7medium\u00b7strong weak <ul> <li> <p><code>write_consistency_factor = replication_factor</code> \ub85c \uc124\uc815\ud558\uba74 \ub178\ub4dc \uc77c\ubd80 \ub2e4\uc6b4 \uc2dc \uc4f0\uae30 \ucc28\ub2e8 \ud6c4 \ub370\uc774\ud130 \uc7ac\ub3d9\uae30\ud654 \ube44\uc6a9 \uac10\uc18c.</p> </li> <li> <p>\uac15\ud55c \uc77c\uad00\uc131\uc774 \ud544\uc694\ud55c \uacbd\uc6b0 <code>ordering=strong</code> \uc0ac\uc6a9.</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Distributed%20deployment/#7","title":"7. \ucd94\uac00 \uae30\ub2a5","text":"<ul> <li> <p>Listener \ubaa8\ub4dc: <code>node_type: \"Listener\"</code> \ub85c \uc124\uc815 \uc2dc \uac80\uc0c9 \ud2b8\ub798\ud53d\uc5d0\uc11c \uc81c\uc678\ud558\uace0 \uc218\uc9d1 \uc804\uc6a9 \ub178\ub4dc\ub85c \uc0ac\uc6a9.</p> </li> <li> <p>Consensus Checkpointing: <code>POST /cluster/recover</code> \ud638\ucd9c\ub85c Raft \ub85c\uadf8 \uc2a4\ub0c5\uc0f7 \uc0dd\uc131\u00b7\ub85c\uadf8 \uc808\ub2e8\uc744 \ud1b5\ud574 \uc2e0\uaddc \ub178\ub4dc \ub3d9\uae30\ud654 \uc18d\ub3c4 \uac1c\uc120.</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Distributed%20deployment/#8","title":"8. \uad8c\uc7a5 \uc6b4\uc601 \uc804\ub7b5","text":"<ol> <li> <p>\ud504\ub85c\ub355\uc158: \ucd5c\uc18c 3\ub178\ub4dc, <code>replication_factor \u22652</code>, <code>write_consistency_factor = replication_factor</code></p> </li> <li> <p>\ube44\uc6a9 \uc808\uac10\ud615: 2\ub178\ub4dc + \ubcf5\uc81c, \uc911\uc694 \uceec\ub809\uc158\ub9cc \ubcf5\uc81c \ud65c\uc131\ud654</p> </li> <li> <p>\uac1c\ubc1c\u00b7\ud14c\uc2a4\ud2b8: \ub2e8\uc77c \ub178\ub4dc, \uc8fc\uae30\uc801 \uc2a4\ub0c5\uc0f7 \ubc31\uc5c5 \ud544\uc218</p> </li> </ol>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Explore%20the%20Data/","title":"Explore the Data","text":"<p>Qdrant\ub294 \ubca1\ud130 \uac80\uc0c9 \uc678\uc5d0\ub3c4 \ub2e4\uc591\ud55c \ubc29\uc2dd\uc73c\ub85c \ub370\uc774\ud130\ub97c \ud0d0\uc0c9\ud560 \uc218 \uc788\ub294 API\ub97c \uc81c\uacf5\ud55c\ub2e4. </p> <p>\uc720\uc0ac\ud55c \ubca1\ud130\ub97c \ucc3e\ub294 \uac83\uc740 \ubb3c\ub860, \uc11c\ub85c \uac00\uc7a5 \ub2e4\ub978 \ubca1\ud130\ub97c \ud0d0\uc0c9\ud558\uac70\ub098 \uadf8\ub8f9\ud654\ub41c \uacb0\uacfc\ub97c \ubd84\uc11d\ud558\ub294 \ub4f1 \ucd94\ucc9c \uc2dc\uc2a4\ud15c\uacfc \ub370\uc774\ud130 \ud074\ub80c\uc9d5, \ud1b5\uacc4 \uae30\ubc18 \ubd84\uc11d \ub4f1\uc5d0 \uc720\uc6a9\ud558\uac8c \ud65c\uc6a9\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Explore%20the%20Data/#1-api-recommendation-api","title":"1. \ucd94\ucc9c API (Recommendation API)","text":"<p>Qdrant\ub294 \uc5ec\ub7ec \uac1c\uc758 \uae0d\uc815(positive) \ubc0f \ubd80\uc815(negative) \uc608\uc2dc\ub97c \ubc14\ud0d5\uc73c\ub85c \uc720\uc0ac\ud55c \uacb0\uacfc\ub97c \ucc3e\ub294 recommend \ucffc\ub9ac\ub97c \uc81c\uacf5\ud55c\ub2e4. </p> <p>\uc774 \ubc29\uc2dd\uc740 \uae30\uc874 \ud3ec\uc778\ud2b8 ID\ub97c \uc774\uc6a9\ud558\uac70\ub098, \uc6d0\uc2dc \ubca1\ud130(raw vector)\ub97c \uc9c1\uc811 \uc785\ub825\ud558\uc5ec \uc720\uc0ac\ub3c4\ub97c \uacc4\uc0b0\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>POST /collections/{collection_name}/points/query\n{\n  \"query\": {\n    \"recommend\": {\n      \"positive\": [100, 231],\n      \"negative\": [718, [0.2, 0.3, 0.4, 0.5]],\n      \"strategy\": \"average_vector\"\n    }\n  },\n  \"filter\": {\n    \"must\": [\n      {\n        \"key\": \"city\",\n        \"match\": { \"value\": \"London\" }\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Explore%20the%20Data/#_1","title":"\ucd94\ucc9c \uc804\ub7b5 \uc885\ub958","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Explore%20the%20Data/#1-average_vector","title":"(1) average_vector (\uae30\ubcf8\uac12)","text":"<ul> <li> <p>\uae0d\uc815 \ubca1\ud130 \ud3c9\uade0\uc5d0\uc11c \ubd80\uc815 \ubca1\ud130 \ud3c9\uade0\uc744 \ube80 \ud6c4 \ub2e4\uc2dc \ub354\ud55c \ubca1\ud130\ub97c \uc0dd\uc131</p> </li> <li> <p>\uc131\ub2a5\uc740 \uc77c\ubc18 \uac80\uc0c9\uacfc \uc720\uc0ac\ud558\uba70 \ube60\ub974\ub2e4</p> </li> <li> <p>\uc804\ub7b5 \uc218\uc2dd</p> <p><code>query = avg_positive + avg_positive - avg_negative</code></p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Explore%20the%20Data/#2-best_score","title":"(2) best_score","text":"<ul> <li> <p>\uac01 \ud6c4\ubcf4 \ubca1\ud130\uc5d0 \ub300\ud574 \uac01\uac01\uc758 \uae0d\uc815/\ubd80\uc815 \uc608\uc2dc\uc640 \uc810\uc218\ub97c \uacc4\uc0b0\ud55c \ub4a4, \ucd5c\uc0c1\uc758 \uc810\uc218\ub97c \uae30\ubc18\uc73c\ub85c \ud310\ub2e8</p> </li> <li> <p>\ubd80\uc815 \uc608\uc2dc\ub9cc \uc0ac\uc6a9\ud558\uc5ec \uac00\uc7a5 \uc0c1\uc774\ud55c(outlier) \ubca1\ud130\ub97c \ud0d0\uc0c9\ud560 \uc218 \uc788\uc74c</p> </li> <li> <p>\ub9ce\uc740 \uc608\uc2dc\ub97c \uc81c\uacf5\ud560 \uacbd\uc6b0 \uc815\ud655\ub3c4\ub294 \ub192\uc9c0\ub9cc \uc131\ub2a5\uc774 \uc120\ud615\uc801\uc73c\ub85c \uac10\uc18c\ud568</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Explore%20the%20Data/#3-sum_scores","title":"(3) sum_scores","text":"<ul> <li> <p>\ubaa8\ub4e0 \uc608\uc2dc \ubca1\ud130\uc5d0 \ub300\ud574 \uc810\uc218\ub97c \uacc4\uc0b0\ud558\uace0 \uc774\ub97c \ud569\uc0b0\ud558\uc5ec \ucd5c\uc885 \uc810\uc218\ub85c \uc0ac\uc6a9</p> </li> <li> <p>\ub2e4\uc591\ud55c \ud53c\ub4dc\ubc31 \uae30\ubc18 \ucd94\ucc9c \uc2dc\uc2a4\ud15c\uc5d0 \uc801\ud569</p> </li> <li> <p>\uae0d\uc815 \ubc0f \ubd80\uc815 \uc608\uc2dc\ub9cc\uc73c\ub85c\ub3c4 \uc791\ub3d9 \uac00\ub2a5</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Explore%20the%20Data/#named-vector","title":"Named Vector \uc0ac\uc6a9","text":"<p>\ub2e4\uc911 \ubca1\ud130\ub97c \uc0ac\uc6a9\ud558\ub294 \uceec\ub809\uc158\uc5d0\uc11c\ub294 <code>using</code> \ud30c\ub77c\ubbf8\ud130\ub97c \ud1b5\ud574 \ubca1\ud130 \uc774\ub984\uc744 \uc9c0\uc815\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>\"using\": \"image\"\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Explore%20the%20Data/#_2","title":"\uc678\ubd80 \uceec\ub809\uc158 \ubca1\ud130 \ucc38\uc870","text":"<p><code>lookup_from</code> \ud30c\ub77c\ubbf8\ud130\ub97c \uc0ac\uc6a9\ud558\uc5ec \ub2e4\ub978 \uceec\ub809\uc158\uc758 \ubca1\ud130\ub97c \ucc38\uc870\ud574 \ucd94\ucc9c\uc744 \uc218\ud589\ud560 \uc218 \uc788\ub2e4. \ub3d9\uc77c\ud55c \ucc28\uc6d0\uacfc \uac70\ub9ac \uce21\uc815 \ubc29\uc2dd\uc744 \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0\uc5d0\ub9cc \uac00\ub2a5\ud558\ub2e4.</p> <pre><code>\"lookup_from\": {\n  \"collection\": \"users\",\n  \"vector\": \"profile_embedding\"\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Explore%20the%20Data/#_3","title":"\ubc30\uce58 \ucd94\ucc9c","text":"<p>\uc5ec\ub7ec \uac1c\uc758 \ucd94\ucc9c \uc694\uccad\uc744 \ud55c \ubc88\uc5d0 \ucc98\ub9ac\ud560 \uc218 \uc788\ub2e4. \uac01 \uc694\uccad\uc740 \ud544\ud130, \ubca1\ud130, \uc804\ub7b5\uc744 \ub3c5\ub9bd\uc801\uc73c\ub85c \uc124\uc815\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>POST /collections/{collection_name}/query/batch\n{\n  \"searches\": [\n    {\n      \"query\": { \"recommend\": { \"positive\": [100, 231], \"negative\": [718] } },\n      \"filter\": { \"must\": [{ \"key\": \"city\", \"match\": { \"value\": \"London\" } }] },\n      \"limit\": 10\n    },\n    ...\n  ]\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Explore%20the%20Data/#2-api-discovery-api","title":"2. \ub514\uc2a4\ucee4\ubc84\ub9ac API (Discovery API)","text":"<p>v1.7\ubd80\ud130 \uc9c0\uc6d0\ub418\ub294 Discovery API\ub294 \uac80\uc0c9 \uacf5\uac04\uc744 positive/negative \uc30d(context)\uc73c\ub85c \ub098\ub204\uace0, \ud574\ub2f9 context\uc5d0 \uc801\ud569\ud55c \ud3ec\uc778\ud2b8\ub97c \ud0d0\uc0c9\ud558\ub294 \uae30\ub2a5\uc774\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Explore%20the%20Data/#_4","title":"\ub514\uc2a4\ucee4\ubc84\ub9ac \uac80\uc0c9","text":"<p><code>target</code> \ubca1\ud130\ub97c \uae30\uc900\uc73c\ub85c, \uc5bc\ub9c8\ub098 \ub9ce\uc740 \uae0d\uc815 \uc601\uc5ed\uc5d0 \uc18d\ud558\uace0 \ubd80\uc815 \uc601\uc5ed\uc744 \ud53c\ud558\ub294\uc9c0\ub97c \uae30\ubc18\uc73c\ub85c \ud3ec\uc778\ud2b8\ub97c \uc120\ud0dd\ud55c\ub2e4.</p> <pre><code>\"discover\": {\n  \"target\": [0.2, 0.1, 0.9, 0.7],\n  \"context\": [\n    { \"positive\": 100, \"negative\": 718 },\n    { \"positive\": 200, \"negative\": 300 }\n  ]\n}\n</code></pre> <ul> <li> <p>\uc815\ud655\ub3c4 \ud5a5\uc0c1\uc744 \uc704\ud574 <code>params.ef</code> \uac12\uc744 64 \uc774\uc0c1\uc73c\ub85c \ub192\uc774\ub294 \uac83\uc774 \uad8c\uc7a5\ub41c\ub2e4</p> </li> <li> <p>ID\ub85c \uc9c0\uc815\ud55c \ud3ec\uc778\ud2b8\ub294 \uac80\uc0c9 \uacb0\uacfc\uc5d0\uc11c \uc81c\uc678\ub41c\ub2e4</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Explore%20the%20Data/#context-search","title":"\ucee8\ud14d\uc2a4\ud2b8 \uac80\uc0c9 (Context search)","text":"<p>target \uc5c6\uc774 context\ub9cc \uc81c\uacf5\ud558\uc5ec \ubd80\uc815 \uc608\uc2dc\ub97c \ud53c\ud558\uace0 \uae0d\uc815 \uc608\uc2dc\uc5d0 \uac00\uae4c\uc6b4 \ud3ec\uc778\ud2b8\ub97c \ud0d0\uc0c9\ud558\ub294 \ubc29\uc2dd\uc774\ub2e4. triplet loss \uae30\ubc18 \uc810\uc218 \uacc4\uc0b0\uc744 \uc0ac\uc6a9\ud55c\ub2e4.</p> <pre><code>\"query\": {\n  \"context\": [\n    { \"positive\": 100, \"negative\": 718 },\n    { \"positive\": 200, \"negative\": 300 }\n  ]\n}\n</code></pre> <ul> <li> <p>score\uac00 0.0\uc5d0 \uac00\uae4c\uc6b8\uc218\ub85d \ub354 \uc801\ud569\ud55c \uacb0\uacfc\ub85c \uac04\uc8fc\ub41c\ub2e4</p> </li> <li> <p>\ub2e4\uc591\ud55c \uc704\uce58\uc758 \uacb0\uacfc\ub97c \uc5bb\uc744 \uc218 \uc788\uc5b4 \ud0d0\uc0c9\uc5d0 \uc801\ud569\ud558\ub2e4</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Explore%20the%20Data/#3-distance-matrix-api","title":"3. Distance Matrix API","text":"<p>v1.12.0\ubd80\ud130 Qdrant\ub294 \ubca1\ud130 \uac04 \uac70\ub9ac\ub97c \uc0d8\ud50c\ub9c1 \uae30\ubc18\uc73c\ub85c \uacc4\uc0b0\ud560 \uc218 \uc788\ub294 distance matrix API\ub97c \uc9c0\uc6d0\ud55c\ub2e4. \uc774\ub97c \ud1b5\ud574 \uad70\uc9d1\ud654, \uc2dc\uac01\ud654, \ucc28\uc6d0 \ucd95\uc18c \ub4f1 \ub2e4\uc591\ud55c \ubd84\uc11d\uc744 \uc218\ud589\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Explore%20the%20Data/#1-pairwise","title":"(1) Pairwise \ud615\uc2dd","text":"<p>\ub450 \ud3ec\uc778\ud2b8 \uac04 \uac70\ub9ac \uac12\uc744 \uc30d\uc73c\ub85c \ubc18\ud658\ud55c\ub2e4.</p> <pre><code>POST /collections/{collection_name}/points/search/matrix/pairs\n{\n  \"sample\": 10,\n  \"limit\": 2,\n  \"filter\": {\n    \"must\": [\n      { \"key\": \"color\", \"match\": { \"value\": \"red\" } }\n    ]\n  }\n}\n</code></pre> <pre><code>\"pairs\": [\n  { \"a\": 1, \"b\": 3, \"score\": 1.40 },\n  { \"a\": 1, \"b\": 4, \"score\": 1.25 },\n  ...\n]\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Explore%20the%20Data/#2-offset","title":"(2) Offset \ud615\uc2dd","text":"<p>\ud76c\uc18c \ud589\ub82c \ud615\ud0dc\ub85c \uac70\ub9ac\ub97c \ubc18\ud658\ud55c\ub2e4. \ub2e4\ub978 \ubd84\uc11d \ub3c4\uad6c\uc640\uc758 \uc5f0\ub3d9\uc5d0 \uc801\ud569\ud558\ub2e4.</p> <pre><code>\"offsets_row\": [0, 0, 1, 1],\n\"offsets_col\": [2, 3, 0, 7],\n\"scores\": [...],\n\"ids\": [1, 2, 3, 4, ...]\n</code></pre> <ul> <li> <p><code>offsets_row</code>, <code>offsets_col</code>: \uac70\ub9ac \uac12 \uc704\uce58 \uc815\ubcf4</p> </li> <li> <p><code>scores</code>: \uac70\ub9ac \uc810\uc218</p> </li> <li> <p><code>ids</code>: \uac01 \ud3ec\uc778\ud2b8\uc758 ID \ubaa9\ub85d</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Explore%20the%20Data/#_5","title":"\uacb0\ub860","text":"<p>Qdrant\ub294 \ub2e8\uc21c\ud55c \ubca1\ud130 \uc720\uc0ac\ub3c4 \uac80\uc0c9\uc744 \ub118\uc5b4\uc11c \ub2e4\uc591\ud55c \ub370\uc774\ud130 \ud0d0\uc0c9 \ub3c4\uad6c\ub97c \uc81c\uacf5\ud55c\ub2e4. \ucd94\ucc9c \uc2dc\uc2a4\ud15c\uc744 \uc704\ud55c positive/negative \uae30\ubc18 \uac80\uc0c9, \ucee8\ud14d\uc2a4\ud2b8 \uae30\ubc18\uc758 \uc720\uc5f0\ud55c \uac80\uc0c9, \ub300\uaddc\ubaa8 \ubca1\ud130 \uac04 \uac70\ub9ac \ubd84\uc11d \ub4f1\uc740 \ub370\uc774\ud130 \ud488\uc9c8 \uac1c\uc120\uacfc \uc758\ubbf8 \uae30\ubc18 \ucd94\ucc9c\uc744 \uc704\ud55c \uac15\ub825\ud55c \uc218\ub2e8\uc774 \ub41c\ub2e4.</p> <p>\uc774\ub7ec\ud55c \uace0\uae09 \uac80\uc0c9 \uae30\ub2a5\ub4e4\uc740 \uc815\ubc00\ud55c \ubca1\ud130 \uae30\ubc18 \uac80\uc0c9 \uc2dc\uc2a4\ud15c\uc744 \uad6c\ucd95\ud558\uac70\ub098 \ubcf5\uc7a1\ud55c \ud0d0\uc0c9 \ubb38\uc81c\ub97c \ud574\uacb0\ud574\uc57c \ud558\ub294 \uacbd\uc6b0\uc5d0 \ud2b9\ud788 \uc720\uc6a9\ud558\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/FastEmbed/","title":"FastEmbed","text":"<p>FastEmbed\ub294 \uacbd\ub7c9\ud654\u00b7\uace0\uc131\ub2a5 \uc784\ubca0\ub529 \uc0dd\uc131\uc744 \ubaa9\ud45c\ub85c \uac1c\ubc1c\ub41c Python \ub77c\uc774\ube0c\ub7ec\ub9ac\uc774\ub2e4. </p> <p>ONNX Runtime \uae30\ubc18\uc73c\ub85c \ub3d9\uc791\ud558\uc5ec \uc758\uc874\uc131\uc774 \uc801\uace0, \uc11c\ubc84\ub9ac\uc2a4 \ud658\uacbd(\uc608: AWS Lambda)\uc5d0\uc11c\ub3c4 \uac00\ubccd\uac8c \uc2e4\ud589\ud560 \uc218 \uc788\ub2e4.</p> \ud2b9\uc9d5 \uc124\uba85 Light PyTorch\ub098 Transformers \ub300\ube44 \uc678\ubd80 \uc758\uc874\uc131\uc774 \uac70\uc758 \uc5c6\ub2e4. Fast ONNX Runtime\uc744 \ud1b5\ud574 \ud558\ub4dc\uc6e8\uc5b4\ubcc4 \ucd5c\uc801\ud654\ub41c \ucd94\ub860 \uc18d\ub3c4\ub97c \uc81c\uacf5\ud55c\ub2e4. Accurate MTEB \ubca4\uce58\ub9c8\ud06c\uc5d0\uc11c \uc6b0\uc218\ud55c \uc131\ub2a5\uc744 \ub0b4\ub294 \ubaa8\ub378\uc744 \uae30\ubcf8 \uc0ac\uc6a9\ud55c\ub2e4. Multilingual \ub2e4\uad6d\uc5b4 \ubaa8\ub378\uc744 \ud3ec\ud568\ud574 \ud3ed\ub113\uc740 \ubaa8\ub378\uc744 \uc9c0\uc6d0\ud55c\ub2e4. <p>FastEmbed\ub294 Qdrant\uc640 \uc27d\uac8c \uc5f0\ub3d9\ub418\uc5b4 \uba40\ud2f0\ubaa8\ub2ec \uac80\uc0c9, \ubc00\uc9d1(dense)\u00b7\ud76c\uc18c(sparse) \uc784\ubca0\ub529, \uba40\ud2f0\ubca1\ud130(multivector), \uc7ac\ub7ad\ud0b9 \ub4f1 \ub2e4\uc591\ud55c \uc2dc\ub098\ub9ac\uc624\uc5d0 \ud65c\uc6a9\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/FastEmbed/#1-fastembed","title":"1. FastEmbed \uae30\ubcf8 \uc0ac\uc6a9: \ud14d\uc2a4\ud2b8 \uc784\ubca0\ub529 \uc0dd\uc131","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/FastEmbed/#11","title":"1.1 \uc124\uce58","text":"<pre><code>pip install fastembed\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/FastEmbed/#12","title":"1.2 \ubaa8\ub378 \ub85c\ub4dc \ubc0f \ub370\uc774\ud130 \uc900\ube44","text":"<pre><code>from fastembed import TextEmbedding\nfrom typing import List\n\ndocuments: List[str] = [\n    \"FastEmbed is lighter than Transformers &amp; Sentence-Transformers.\",\n    \"FastEmbed is supported by and maintained by Qdrant.\",\n]\n\nembedding_model = TextEmbedding()  # \uae30\ubcf8 \ubaa8\ub378: BAAI/bge-small-en-v1.5\nprint(\"The model BAAI/bge-small-en-v1.5 is ready to use.\")\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/FastEmbed/#13","title":"1.3 \uc784\ubca0\ub529 \uc0dd\uc131","text":"<pre><code>embeddings = list(embedding_model.embed(documents))\nprint(len(embeddings[0]))  # 384 \ucc28\uc6d0\n</code></pre> <ul> <li> <p>\uae30\ubcf8 \ubaa8\ub378\uc740 384\ucc28\uc6d0 \ubca1\ud130\ub97c \ucd9c\ub825\ud55c\ub2e4.</p> </li> <li> <p>\ubc18\ud658 \ud0c0\uc785\uc740 <code>numpy.ndarray</code>\uc774\ub2e4.</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/FastEmbed/#2-fastembed-qdrant","title":"2. FastEmbed \u00d7 Qdrant: \ubca1\ud130 \uac80\uc0c9 \ud30c\uc774\ud504\ub77c\uc778","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/FastEmbed/#21","title":"2.1 \uc758\uc874\uc131 \uc124\uce58","text":"<pre><code>pip install \"qdrant-client[fastembed]&gt;=1.14.2\"\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/FastEmbed/#22-qdrant","title":"2.2 Qdrant \ud074\ub77c\uc774\uc5b8\ud2b8 \ucd08\uae30\ud654","text":"<pre><code>from qdrant_client import QdrantClient, models\n\nclient = QdrantClient(\":memory:\")  # \uc778\uba54\ubaa8\ub9ac \ubaa8\ub4dc\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/FastEmbed/#23","title":"2.3 \uceec\ub809\uc158 \uc0dd\uc131","text":"<pre><code>model_name = \"BAAI/bge-small-en\"\nclient.create_collection(\n    collection_name=\"test_collection\",\n    vectors_config=models.VectorParams(\n        size=client.get_embedding_size(model_name),\n        distance=models.Distance.COSINE,\n    ),\n)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/FastEmbed/#24","title":"2.4 \ub370\uc774\ud130 \uc5c5\ub85c\ub4dc(\uc784\ubca0\ub529 \uc790\ub3d9 \uc0dd\uc131)","text":"<pre><code>docs = [\n    \"Qdrant has a LangChain integration for chatbots.\",\n    \"Qdrant has a LlamaIndex integration for agents.\",\n]\npayloads = [{\"source\": \"langchain-docs\"}, {\"source\": \"llamaindex-docs\"}]\nids = [42, 2]\n\nclient.upload_collection(\n    collection_name=\"test_collection\",\n    vectors=[models.Document(text=d, model=model_name) for d in docs],\n    payload=[\n        {\"document\": d, \"source\": p[\"source\"]} for d, p in zip(docs, payloads)\n    ],\n    ids=ids,\n)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/FastEmbed/#25","title":"2.5 \ucffc\ub9ac \uc218\ud589","text":"<pre><code>search_result = client.query_points(\n    collection_name=\"test_collection\",\n    query=models.Document(\n        text=\"Which integration is best for agents?\",\n        model=model_name,\n    ),\n).points\nfor point in search_result:\n    print(point.payload[\"document\"], point.score)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/FastEmbed/#3","title":"3. \uace0\uae09 \uc0ac\uc6a9 \uc0ac\ub840","text":"<p>FastEmbed\ub294 \ub2e4\uc591\ud55c \uc784\ubca0\ub529 \uc720\ud615\uacfc \uac80\uc0c9 \ubc29\uc2dd\uc744 \uc9c0\uc6d0\ud55c\ub2e4.</p> \uc720\ud615 \ubaa9\uc801 \ud575\uc2ec \ud3ec\uc778\ud2b8 Dense Embeddings \uc758\ubbf8\uc801 \uc720\uc0ac\ub3c4 \uac80\uc0c9 \uae30\ubcf8 TextEmbedding + Qdrant \ubca1\ud130 \uc0c9\uc778 Sparse Embeddings (miniCOIL) \uc815\ud655\ud55c \ud0a4\uc6cc\ub4dc \ub9e4\uce6d Qdrant\uc758 \ud76c\uc18c \ubca1\ud130 \uc0c9\uc778 \ud65c\uc6a9 Sparse Embeddings (SPLADE) \ubb38\uc11c \uac80\uc0c9 \ucd5c\uc801\ud654 sparse retriever + Qdrant Multivector (ColBERT) \ud1a0\ud070\ubcc4 \uc138\ubc00\ud55c \ub9e4\uce6d\u00b7\uc7ac\uc810\uc218\ud654 <code>max_sim</code> \ube44\uad50\uae30 \uc0ac\uc6a9 Reranking 1\ucc28 \uac80\uc0c9 \uacb0\uacfc \uc815\ubc00 \uc7ac\uc815\ub82c Cross-Encoder \uae30\ubc18 \uc7ac\ub7ad\ucee4"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/FastEmbed/#4-cross-encoder","title":"4. Cross-Encoder \uc7ac\ub7ad\ud0b9 \uc608\uc2dc","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/FastEmbed/#41","title":"4.1 \ud658\uacbd \uc900\ube44","text":"<pre><code>pip install \"qdrant-client[fastembed]&gt;=1.14.1\"\n</code></pre> <pre><code>from fastembed import TextEmbedding\nfrom fastembed.rerank.cross_encoder import TextCrossEncoder\n\ndense_model = TextEmbedding(model_name=\"sentence-transformers/all-MiniLM-L6-v2\")\nreranker = TextCrossEncoder(model_name=\"jinaai/jina-reranker-v2-base-multilingual\")\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/FastEmbed/#42","title":"4.2 \ub370\uc774\ud130 \uc5c5\ub85c\ub4dc","text":"<pre><code>descriptions = [\n    \"In 1431, Jeanne d'Arc is placed on trial on charges of heresy.\",\n    \"A sci-fi adventure through space and time.\",\n    \"A world-weary political journalist picks up the story of a woman's search.\",\n]\ndesc_emb = list(dense_model.embed(descriptions))\n\nclient = QdrantClient(\":memory:\")\nclient.create_collection(\n    collection_name=\"movies\",\n    vectors_config={\"embedding\": models.VectorParams(\n        size=dense_model.embedding_size, distance=models.Distance.COSINE)}\n)\n\nclient.upload_points(\n    collection_name=\"movies\",\n    points=[\n        models.PointStruct(\n            id=i,\n            payload={\"description\": d},\n            vector={\"embedding\": v},\n        )\n        for i, (d, v) in enumerate(zip(descriptions, desc_emb))\n    ],\n)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/FastEmbed/#43-1","title":"4.3 1\ucc28 \uac80\uc0c9","text":"<pre><code>query = \"A story about a strong historically significant female figure.\"\nquery_vec = list(dense_model.query_embed(query))[0]\n\ninitial_hits = client.query_points(\n    collection_name=\"movies\",\n    using=\"embedding\",\n    query=query_vec,\n    with_payload=True,\n    limit=10,\n).points\n\ncandidates = [hit.payload[\"description\"] for hit in initial_hits]\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/FastEmbed/#44","title":"4.4 \uc7ac\ub7ad\ud0b9","text":"<pre><code>scores = list(reranker.rerank(query, candidates))\nranked = sorted(zip(candidates, scores), key=lambda x: x[1], reverse=True)\n\nfor rank, (doc, score) in enumerate(ranked, 1):\n    print(f\"{rank}. {doc} (score={score:.4f})\")\n</code></pre> <ul> <li> <p>\uc7ac\ub7ad\ucee4\ub294 \ud1a0\ud070 \uc218\uc900 \uc0c1\ud638\uc791\uc6a9\uc744 \uace0\ub824\ud574 \ub354 \uc815\ubc00\ud55c \uc21c\uc11c\ub97c \uc81c\uacf5\ud55c\ub2e4.</p> </li> <li> <p>\uc77c\ubc18\uc801\uc73c\ub85c \uc0c1\uc704 K\uac1c(\uc608: 50~200\uac1c) \uacb0\uacfc\uc5d0\ub9cc \uc7ac\ub7ad\ucee4\ub97c \uc801\uc6a9\ud574 \uc18d\ub3c4\uc640 \uc815\ud655\ub3c4\ub97c \uade0\ud615 \uc788\uac8c \uc720\uc9c0\ud55c\ub2e4.</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/FastEmbed/#5-sparsemultivector","title":"5. Sparse\u00b7Multivector \ud65c\uc6a9","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/FastEmbed/#51-minicoil-splade","title":"5.1 miniCOIL / SPLADE \ud76c\uc18c \ubca1\ud130","text":"<pre><code>from fastembed import SparseEmbedding\n\nsparse_model = SparseEmbedding(model_name=\"naver/miniCOIL\")\nsparse_vecs = list(sparse_model.embed(documents))\n\nclient.create_collection(\n    collection_name=\"sparse_collection\",\n    sparse_vectors_config={\"text\": {}}\n)\nclient.upload_points(\n    collection_name=\"sparse_collection\",\n    points=[\n        models.PointStruct(id=i, vector={\"text\": v}) for i, v in enumerate(sparse_vecs)\n    ]\n)\n</code></pre> <ul> <li> <p>Qdrant\uc5d0\uc11c <code>sparse_vectors</code> \uc124\uc815\uc744 \ud1b5\ud574 \ud76c\uc18c \ubca1\ud130 \uc804\uc6a9 \uc778\ub371\uc2a4\ub97c \uc0ac\uc6a9\ud55c\ub2e4.</p> </li> <li> <p>\uac80\uc0c9 \uc2dc <code>using=\"text\"</code> \ud30c\ub77c\ubbf8\ud130 \uc9c0\uc815\uc73c\ub85c dot-product \uae30\ubc18 \uc815\ud655 \uac80\uc0c9\uc774 \uac00\ub2a5\ud558\ub2e4.</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/FastEmbed/#52-colbert-multivector","title":"5.2 ColBERT Multivector","text":"<pre><code>from fastembed import MultiVectorEmbedding\n\nmv_model = MultiVectorEmbedding(model_name=\"colbert-ir/colbertv2\")\nmv_vectors = list(mv_model.embed(documents))  # \uac01 \ubb38\uc11c\ub2f9 \ub2e4\uc911 \ubca1\ud130 \ub9ac\uc2a4\ud2b8\n\nclient.create_collection(\n    collection_name=\"colbert_collection\",\n    vectors_config=models.VectorParams(\n        size=mv_model.vector_size,\n        distance=models.Distance.COSINE,\n        multivector_config=models.MultiVectorConfig(comparator=\"max_sim\"),\n    ),\n)\n\nclient.upload_points(\n    collection_name=\"colbert_collection\",\n    points=[\n        models.PointStruct(id=i, vector=vecs) for i, vecs in enumerate(mv_vectors)\n    ],\n)\n</code></pre> <ul> <li> <p><code>max_sim</code> \ube44\uad50\uae30\ub85c \ub2e4\uc911 \ubca1\ud130 \uac04 \ucd5c\ub300 \uc720\uc0ac\ub3c4\ub97c \uc0ac\uc6a9\ud55c\ub2e4.</p> </li> <li> <p>ColBERT\ub294 1\ucc28 \uac80\uc0c9 \ud6c4\ubcf4 \uc7ac\uc810\uc218\ud654(rescoring)\ub098 \uc18c\uaddc\ubaa8 \ub370\uc774\ud130\uc5d0\uc11c \uc9c1\uc811 \uac80\uc0c9\uc6a9\uc73c\ub85c \uc801\ud569\ud558\ub2e4.</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/FastEmbed/#6","title":"6. \uc815\ub9ac","text":"<ol> <li> <p>FastEmbed\ub294 ONNX Runtime \uae30\ubc18\uc73c\ub85c \uac00\ubccd\uace0 \ube60\ub974\uba70 \uc815\ud655\ud55c \uc784\ubca0\ub529 \uc0dd\uc131\uc744 \uc9c0\uc6d0\ud55c\ub2e4.</p> </li> <li> <p>Qdrant\uc640\uc758 \ud1b5\ud569\uc744 \ud1b5\ud574 Dense, Sparse, Multivector \uc784\ubca0\ub529\uc744 \ubaa8\ub450 \uc800\uc7a5\u00b7\uac80\uc0c9\ud560 \uc218 \uc788\ub2e4.</p> </li> <li> <p>Cross-Encoder \uc7ac\ub7ad\ucee4\ub97c \ud65c\uc6a9\ud558\uc5ec 1\ucc28 \uac80\uc0c9 \uacb0\uacfc\ub97c \uc815\ubc00\ud558\uac8c \uc7ac\ubc30\uc5f4\ud560 \uc218 \uc788\ub2e4.</p> </li> <li> <p>Sparse\u00b7Multivector\u00b7\uc7ac\ub7ad\ud0b9 \uc870\ud569\uc73c\ub85c \uc18d\ub3c4\uc640 \uc815\ud655\ub3c4\ub97c \uc0c1\ud669\uc5d0 \ub9de\ucdb0 \ucd5c\uc801\ud654\ud560 \uc218 \uc788\ub2e4.</p> </li> </ol> <p>FastEmbed\uc640 Qdrant\ub97c \ud568\uaed8 \uc0ac\uc6a9\ud558\uba74 \uacbd\ub7c9\ud654\ub41c \uc784\ubca0\ub529 \ud30c\uc774\ud504\ub77c\uc778\uacfc \uace0\uc131\ub2a5 \ubca1\ud130 \uac80\uc0c9 \uc5d4\uc9c4\uc744 \ub2e8\uc77c \uc2a4\ud0dd\uc73c\ub85c \uad6c\ucd95\ud560 \uc218 \uc788\ub2e4. \uc774\ub97c \ud1b5\ud574 \uba40\ud2f0\ubaa8\ub2ec \uac80\uc0c9, \ubb38\uc11c \uac80\uc0c9, \ucc57\ubd07, \uc5d0\uc774\uc804\ud2b8 \ub4f1 \ub2e4\uc591\ud55c \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0\uc11c \ube60\ub974\uace0 \uc815\ud655\ud55c \uacb0\uacfc\ub97c \uc5bb\uc744 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/","title":"Filtering","text":"<p>Qdrant\ub294 \ubca1\ud130 \uae30\ubc18 \uc720\uc0ac\ub3c4 \uac80\uc0c9 \uc678\uc5d0\ub3c4, \ud3ec\uc778\ud2b8(point)\uc758 payload\ub098 ID\uc5d0 \uae30\ubc18\ud55c \ub2e4\uc591\ud55c \ud544\ud130\ub9c1 \uc870\uac74\uc744 \uc9c0\uc6d0\ud55c\ub2e4. </p> <p>\uc774\ub294 \ub2e8\uc21c\ud55c \uc784\ubca0\ub529 \ud45c\ud604\ub9cc\uc73c\ub85c\ub294 \uc124\uba85\ud560 \uc218 \uc5c6\ub294 \uc2e4\ubb34\uc0c1\uc758 \uc81c\uc57d \uc870\uac74\ub4e4(\uc608: \uc7ac\uace0 \uc5ec\ubd80, \uc9c0\uc5ed \uc81c\ud55c, \uac00\uaca9 \ubc94\uc704 \ub4f1)\uc744 \uac80\uc0c9 \uacb0\uacfc\uc5d0 \ubc18\uc601\ud558\ub294 \ub370 \ub9e4\uc6b0 \uc720\uc6a9\ud558\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#1-clauses","title":"1. \ud544\ud130\ub9c1 \uad6c\ubb38 \uad6c\uc870 (Clauses)","text":"<p>Qdrant\ub294 \ub17c\ub9ac\uc801 \uc870\uac74\ub4e4\uc744 \uc870\ud569\ud558\uc5ec \uac80\uc0c9 \uc870\uac74\uc744 \uad6c\uc131\ud560 \uc218 \uc788\ub2e4. \uae30\ubcf8\uc801\uc73c\ub85c \ub2e4\uc74c\uacfc \uac19\uc740 \uc5f0\uc0b0\uc790\ub97c \uc9c0\uc6d0\ud55c\ub2e4.</p> \uad6c\ubb38 \uc124\uba85 <code>must</code> \ubaa8\ub4e0 \uc870\uac74\uc744 \ub9cc\uc871\ud574\uc57c \ud568 (AND) <code>should</code> \ud558\ub098 \uc774\uc0c1\uc758 \uc870\uac74\uc744 \ub9cc\uc871\ud558\uba74 \ub428 (OR) <code>must_not</code> \ubaa8\ub4e0 \uc870\uac74\uc774 \ub9cc\uc871\ub418\uc9c0 \uc54a\uc544\uc57c \ud568 (NOT)"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#_1","title":"\uc608\uc2dc \ub370\uc774\ud130","text":"<pre><code>[\n  { \"id\": 1, \"city\": \"London\", \"color\": \"green\" },\n  { \"id\": 2, \"city\": \"London\", \"color\": \"red\" },\n  { \"id\": 3, \"city\": \"London\", \"color\": \"blue\" },\n  { \"id\": 4, \"city\": \"Berlin\", \"color\": \"red\" },\n  { \"id\": 5, \"city\": \"Moscow\", \"color\": \"green\" },\n  { \"id\": 6, \"city\": \"Moscow\", \"color\": \"blue\" }\n]\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#must","title":"must","text":"<pre><code>\"must\": [\n  { \"key\": \"city\", \"match\": { \"value\": \"London\" } },\n  { \"key\": \"color\", \"match\": { \"value\": \"red\" } }\n]\n</code></pre> <p>\uacb0\uacfc: ID 2</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#should","title":"should","text":"<pre><code>\"should\": [\n  { \"key\": \"city\", \"match\": { \"value\": \"London\" } },\n  { \"key\": \"color\", \"match\": { \"value\": \"red\" } }\n]\n</code></pre> <p>\uacb0\uacfc: ID 1, 2, 3, 4</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#must_not","title":"must_not","text":"<pre><code>\"must_not\": [\n  { \"key\": \"city\", \"match\": { \"value\": \"London\" } },\n  { \"key\": \"color\", \"match\": { \"value\": \"red\" } }\n]\n</code></pre> <p>\uacb0\uacfc: ID 5, 6</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#_2","title":"\ud63c\ud569 \uc0ac\uc6a9","text":"<pre><code>{\n  \"must\": [{ \"key\": \"city\", \"match\": { \"value\": \"London\" } }],\n  \"must_not\": [{ \"key\": \"color\", \"match\": { \"value\": \"red\" } }]\n}\n</code></pre> <p>\uacb0\uacfc: ID 1, 3</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#2","title":"2. \ud544\ud130 \uc870\uac74 \uc720\ud615","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#match","title":"Match","text":"<p>\ub2e8\uc77c \uac12\uacfc\uc758 \uc77c\uce58 \uc5ec\ubd80\ub97c \uac80\uc0ac\ud55c\ub2e4.</p> <pre><code>{ \"key\": \"color\", \"match\": { \"value\": \"red\" } }\n</code></pre> <p>\uc9c0\uc6d0: \ubb38\uc790\uc5f4, \uc815\uc218, \ubd88\ub9ac\uc5b8</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#match-any-or","title":"Match Any (OR \uc870\uac74)","text":"<pre><code>{ \"key\": \"color\", \"match\": { \"any\": [\"red\", \"green\"] } }\n</code></pre> <p>\uac12\uc774 \uc5ec\ub7ec \uac1c\uc77c \uacbd\uc6b0, \uadf8 \uc911 \ud558\ub098\ub77c\ub3c4 \ud3ec\ud568\ub418\uba74 true\uac00 \ub41c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#match-except-not-in","title":"Match Except (NOT IN \uc870\uac74)","text":"<pre><code>{ \"key\": \"color\", \"match\": { \"except\": [\"red\", \"green\"] } }\n</code></pre> <p>\ubaa8\ub4e0 \uac12\uc774 \uc81c\uc678 \ub300\uc0c1\uc5d0 \ud3ec\ud568\ub418\uc9c0 \uc54a\uc544\uc57c \ub9cc\uc871\ub41c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#3-nested-key","title":"3. \uc911\ucca9 \ud544\ub4dc(Nested Key)","text":"<p>Qdrant\ub294 JSON \ud615\ud0dc\uc758 payload\ub97c \uc9c0\uc6d0\ud558\ubbc0\ub85c, \uc911\ucca9 \ud544\ub4dc\uc5d0 \ub300\ud55c \uac80\uc0c9\ub3c4 \uac00\ub2a5\ud558\ub2e4.</p> <pre><code>{ \"key\": \"country.name\", \"match\": { \"value\": \"Germany\" } }\n</code></pre> <p>\ubc30\uc5f4 \ub0b4\ubd80\uc5d0 \uc788\ub294 \uac12\ub3c4 \ub2e4\uc74c\uacfc \uac19\uc774 \uc9c0\uc815\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>{ \"key\": \"country.cities[].population\", \"range\": { \"gte\": 9.0 } }\n</code></pre> <p>\ubc30\uc5f4 \uc694\uc18c\uc758 \uc18d\uc131\uac12 \uc911 \ud558\ub098\ub77c\ub3c4 \uc870\uac74\uc744 \ub9cc\uc871\ud558\uba74 \ud574\ub2f9 \ud3ec\uc778\ud2b8\ub294 \uacb0\uacfc\uc5d0 \ud3ec\ud568\ub41c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#4-nested-object-filter","title":"4. \uc911\ucca9 \uc624\ube0c\uc81d\ud2b8 \ud544\ud130 (Nested Object Filter)","text":"<p>\ubc30\uc5f4\uc758 \uac01 \uac1d\uccb4\ub97c \ub3c5\ub9bd\uc801\uc73c\ub85c \ud3c9\uac00\ud558\ub824\uba74 <code>nested</code> \uc870\uac74\uc744 \uc0ac\uc6a9\ud55c\ub2e4.</p> <pre><code>{\n  \"nested\": {\n    \"key\": \"diet\",\n    \"filter\": {\n      \"must\": [\n        { \"key\": \"food\", \"match\": { \"value\": \"meat\" } },\n        { \"key\": \"likes\", \"match\": { \"value\": true } }\n      ]\n    }\n  }\n}\n</code></pre> <p>\uc774 \ubc29\uc2dd\uc740 \ud55c \uac1d\uccb4 \uc548\uc5d0\uc11c \ubaa8\ub4e0 \uc870\uac74\uc774 \ucda9\uc871\ub418\ub294\uc9c0 \ud3c9\uac00\ud558\ubbc0\ub85c, \uc815\ud655\ud55c \uc870\ud569 \uac80\uc0c9\uc774 \uac00\ub2a5\ud558\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#5","title":"5. \uace0\uae09 \ud544\ud130\ub9c1 \uc870\uac74","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#full-text-match","title":"Full Text Match","text":"<p>\ubb38\uc790\uc5f4 \ud544\ub4dc \ub0b4 \ud14d\uc2a4\ud2b8 \uac80\uc0c9</p> <pre><code>{ \"key\": \"description\", \"match\": { \"text\": \"good cheap\" } }\n</code></pre> <p>\ub2e8\uc5b4\uac00 \ubaa8\ub450 \ud3ec\ud568\ub418\uc5b4\uc57c \uc77c\uce58\ub85c \uac04\uc8fc\ub41c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#range","title":"Range","text":"<pre><code>{\n  \"key\": \"price\",\n  \"range\": {\n    \"gte\": 100.0,\n    \"lte\": 450.0\n  }\n}\n</code></pre> <p>\uc9c0\uc6d0: \uc815\uc218, \uc2e4\uc218</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#datetime-range","title":"Datetime Range","text":"<p>RFC 3339 \ud3ec\ub9f7\uc744 \uadf8\ub300\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>{\n  \"key\": \"date\",\n  \"range\": {\n    \"gt\": \"2023-02-08T10:49:00Z\",\n    \"lte\": \"2024-01-31T10:14:31Z\"\n  }\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#uuid-match","title":"UUID Match","text":"<pre><code>{ \"key\": \"uuid\", \"match\": { \"value\": \"550e8400-e29b-41d4-a716-446655440000\" } }\n</code></pre> <p>\ubb38\uc790\uc5f4\uacfc \uc720\uc0ac\ud558\uac8c \uc791\ub3d9\ud558\uba70, uuid \uc778\ub371\uc2a4\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\uc774 \uba54\ubaa8\ub9ac \uce21\uba74\uc5d0\uc11c \ud6a8\uc728\uc801\uc774\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#6-geo","title":"6. Geo \ud544\ud130","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#geo_bounding_box","title":"geo_bounding_box","text":"<pre><code>{\n  \"key\": \"location\",\n  \"geo_bounding_box\": {\n    \"top_left\": { \"lat\": 52.5207, \"lon\": 13.4036 },\n    \"bottom_right\": { \"lat\": 52.4958, \"lon\": 13.4558 }\n  }\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#geo_radius","title":"geo_radius","text":"<pre><code>{\n  \"key\": \"location\",\n  \"geo_radius\": {\n    \"center\": { \"lat\": 52.5207, \"lon\": 13.4036 },\n    \"radius\": 1000.0\n  }\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#geo_polygon","title":"geo_polygon","text":"<pre><code>{\n  \"key\": \"location\",\n  \"geo_polygon\": {\n    \"exterior\": {\n      \"points\": [ ... ]\n    },\n    \"interiors\": [ ... ]\n  }\n}\n</code></pre> <p>\ubcf5\uc7a1\ud55c \uc9c0\uc5ed \ubc94\uc704 \uc124\uc815\uc5d0 \uc720\uc6a9\ud558\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#7","title":"7. \uae30\ud0c0 \uc870\uac74","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#values_count","title":"values_count","text":"<pre><code>{\n  \"key\": \"comments\",\n  \"values_count\": {\n    \"gt\": 2\n  }\n}\n</code></pre> <p>\ubc30\uc5f4 \uac12 \uac1c\uc218\uac00 \ud2b9\uc815 \uc870\uac74\uc744 \ub9cc\uc871\ud558\ub294 \uacbd\uc6b0\uc5d0 \ud544\ud130\ub9c1\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#is_empty","title":"is_empty","text":"<pre><code>{\n  \"is_empty\": { \"key\": \"reports\" }\n}\n</code></pre> <p>\ud574\ub2f9 \ud544\ub4dc\uac00 \uc5c6\uac70\ub098 \ube48 \ubc30\uc5f4 \ub610\ub294 null\uc77c \uacbd\uc6b0 \uc77c\uce58\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#is_null","title":"is_null","text":"<pre><code>{\n  \"is_null\": { \"key\": \"reports\" }\n}\n</code></pre> <p>\ud574\ub2f9 \ud544\ub4dc\uac00 null \uac12\uc77c \uacbd\uc6b0 \uc77c\uce58\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#8-id","title":"8. ID/\ubca1\ud130 \uc874\uc7ac \uc870\uac74","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#has_id","title":"has_id","text":"<pre><code>{ \"has_id\": [1, 3, 5] }\n</code></pre> <p>\ud2b9\uc815 ID\uc5d0 \ud574\ub2f9\ud558\ub294 \ud3ec\uc778\ud2b8\ub9cc \ud544\ud130\ub9c1\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#has_vector","title":"has_vector","text":"<pre><code>{ \"has_vector\": \"image\" }\n</code></pre> <p>\ud2b9\uc815 Named Vector\uac00 \uc874\uc7ac\ud558\ub294 \ud3ec\uc778\ud2b8\ub9cc \ud544\ud130\ub9c1\ud55c\ub2e4. Named Vector\uac00 \uc5c6\ub294 \uacbd\uc6b0 \ube48 \ubb38\uc790\uc5f4 <code>\"\"</code>\ub85c \uc9c0\uc815\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/#_3","title":"\uacb0\ub860","text":"<p>Qdrant\ub294 \ub2e8\uc21c\ud55c \uc720\uc0ac\ub3c4 \uae30\ubc18 \uac80\uc0c9\ubfd0\ub9cc \uc544\ub2c8\ub77c \ub2e4\uc591\ud55c \uc2e4\ubb34 \uc81c\uc57d\uc744 \ud45c\ud604\ud560 \uc218 \uc788\ub3c4\ub85d \ud48d\ubd80\ud55c \ud544\ud130\ub9c1 \uae30\ub2a5\uc744 \uc81c\uacf5\ud55c\ub2e4. Boolean \uc870\ud569, \ubc94\uc704 \uc870\uac74, \ubc30\uc5f4 \ud544\ub4dc, \uc911\ucca9 \uad6c\uc870, \uc704\uce58 \uae30\ubc18 \ud544\ud130, \ud14d\uc2a4\ud2b8 \ub9e4\uce6d \ub4f1 \uac70\uc758 \ubaa8\ub4e0 \uad6c\uc870\uc758 \uc870\uac74\uc744 \ud45c\ud604\ud560 \uc218 \uc788\ub2e4.</p> <p>\uc774\ub7ec\ud55c \ud544\ud130 \uae30\ub2a5\uc744 \uc801\uc808\ud788 \ud65c\uc6a9\ud558\uba74 Qdrant\ub97c \ub9e4\uc6b0 \uc815\ubc00\ud558\uace0 \uac15\ub825\ud55c \uac80\uc0c9 \uc5d4\uc9c4\uc73c\ub85c \uad6c\uc131\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Hybrid%20Queries/","title":"Hybrid Queries","text":"<p>Qdrant\ub294 \ubcf5\uc218\uc758 \ubca1\ud130 \ud45c\ud604(named vectors)\uc744 \uac00\uc9c4 \ud3ec\uc778\ud2b8\ub97c \ud6a8\uc728\uc801\uc73c\ub85c \uac80\uc0c9\ud558\uace0 \uacb0\ud569\ud560 \uc218 \uc788\ub3c4\ub85d \ub2e4\uc591\ud55c \uac80\uc0c9 \uc804\ub7b5\uc744 \uc9c0\uc6d0\ud55c\ub2e4. </p> <p>\ub2e8\uc77c \ucffc\ub9ac\ub97c \ub118\uc5b4\uc11c \ub2e4\ub2e8\uacc4 \uac80\uc0c9, \uc720\uc0ac\ub3c4 \uae30\ubc18 \uc21c\uc704 \uc870\uc815, \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\uc744 \ubc18\uc601\ud55c \uc810\uc218 \ubcf4\uc815\uae4c\uc9c0 \uac00\ub2a5\ud55c Query API\ub294 \uac15\ub825\ud558\uace0 \uc720\uc5f0\ud55c \ubca1\ud130 \uac80\uc0c9 \uc778\ud130\ud398\uc774\uc2a4\ub97c \uc81c\uacf5\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Hybrid%20Queries/#1-hybrid-search","title":"1. Hybrid Search (\ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9)","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Hybrid%20Queries/#_1","title":"\uac1c\uc694","text":"<p>\ub2e4\uc591\ud55c \uc784\ubca0\ub529 \ud45c\ud604\uc744 \ub3d9\uc2dc\uc5d0 \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0, \uac01 \ud45c\ud604\uc73c\ub85c \uc218\ud589\ud55c \uac80\uc0c9 \uacb0\uacfc\ub97c \ud558\ub098\ub85c \uc735\ud569\ud558\ub294 \uac83\uc774 \ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9\uc758 \ud575\uc2ec\uc774\ub2e4. \uc608\ub97c \ub4e4\uc5b4, dense vector\uc640 sparse vector\ub97c \uac01\uac01 \uac80\uc0c9\ud55c \ub4a4 \uc774\ub97c \uacb0\ud569\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Hybrid%20Queries/#_2","title":"\uc735\ud569 \ubc29\uc2dd","text":"<ul> <li> <p>rrf (Reciprocal Rank Fusion)     \uacb0\uacfc \uc21c\uc704 \uae30\ubc18\uc73c\ub85c \uc810\uc218\ub97c \uc735\ud569\ud558\uba70, \uc5ec\ub7ec \ucffc\ub9ac\uc5d0\uc11c \ub192\uc740 \uc21c\uc704\ub97c \ucc28\uc9c0\ud55c \ud3ec\uc778\ud2b8\uc5d0 \uac00\uc911\uce58\ub97c \ubd80\uc5ec\ud55c\ub2e4.</p> </li> <li> <p>dbsf (Distribution-Based Score Fusion)     \uac01 \ucffc\ub9ac \uacb0\uacfc\uc758 \uc810\uc218\ub97c \uc815\uaddc\ud654\ud55c \ub4a4 \uac19\uc740 \ud3ec\uc778\ud2b8\uc5d0 \ub300\ud574 \uc810\uc218\ub97c \ud569\uc0b0\ud55c\ub2e4. v1.11.0\ubd80\ud130 \uc9c0\uc6d0\ub41c\ub2e4.</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Hybrid%20Queries/#dense-sparse","title":"\uc608\uc2dc: dense + sparse \ubca1\ud130 \uc735\ud569","text":"<pre><code>POST /collections/{collection_name}/points/query\n{\n  \"prefetch\": [\n    {\n      \"query\": {\n        \"indices\": [1, 42],\n        \"values\": [0.22, 0.8]\n      },\n      \"using\": \"sparse\",\n      \"limit\": 20\n    },\n    {\n      \"query\": [0.01, 0.45, 0.67, ...],\n      \"using\": \"dense\",\n      \"limit\": 20\n    }\n  ],\n  \"query\": { \"fusion\": \"rrf\" },\n  \"limit\": 10\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Hybrid%20Queries/#2-multi-stage-query","title":"2. Multi-Stage Query (\ub2e4\ub2e8\uacc4 \uac80\uc0c9)","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Hybrid%20Queries/#_3","title":"\uac1c\uc694","text":"<p>\uc815\ud655\ub3c4\uac00 \ub192\uc740 \uace0\ucc28\uc6d0 \ubca1\ud130\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\uc740 \ube44\uc6a9\uc774 \ud06c\uae30 \ub54c\ubb38\uc5d0, \ube60\ub978 \uac80\uc0c9\uc6a9 \ubca1\ud130\ub85c \ud6c4\ubcf4\uad70\uc744 \ucd94\ucd9c\ud55c \ub4a4, \uace0\uc815\ubc00 \ubca1\ud130\ub85c \uc7ac\uc815\ub82c\ud558\ub294 \ubc29\uc2dd\uc774 \uc720\ud6a8\ud558\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Hybrid%20Queries/#_4","title":"\uad6c\uc131 \uc608\uc2dc","text":"<ul> <li> <p>1\ub2e8\uacc4: \ube60\ub978 \ubca1\ud130\ub85c \ud6c4\ubcf4 \ucd94\ucd9c</p> </li> <li> <p>2\ub2e8\uacc4: \uc815\ud655\ud55c \ubca1\ud130\ub85c \uc7ac\uc815\ub82c</p> </li> </ul> <pre><code>POST /collections/{collection_name}/points/query\n{\n  \"prefetch\": {\n    \"query\": [1, 23, 45, 67],\n    \"using\": \"mrl_byte\",\n    \"limit\": 1000\n  },\n  \"query\": [0.01, 0.299, 0.45, 0.67, ...],\n  \"using\": \"full\",\n  \"limit\": 10\n}\n</code></pre> <p>\ub610\ub294 \ub2e4\ub2e8\uacc4\ub85c \uc911\ucca9\ub41c prefetch\ub3c4 \uac00\ub2a5\ud558\ub2e4.</p> <pre><code>\"prefetch\": {\n  \"prefetch\": {\n    \"query\": [1, 23, 45, 67],\n    \"using\": \"mrl_byte\",\n    \"limit\": 1000\n  },\n  \"query\": [0.01, 0.45, 0.67, ...],\n  \"using\": \"full\",\n  \"limit\": 100\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Hybrid%20Queries/#3-score-boosting","title":"3. Score Boosting (\uc810\uc218 \ubcf4\uc815)","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Hybrid%20Queries/#_5","title":"\uac1c\uc694","text":"<p>\uae30\uacc4 \ud559\uc2b5 \uae30\ubc18\uc758 \ubca1\ud130 \uc720\uc0ac\ub3c4\ub9cc\uc73c\ub85c\ub294 \ub3c4\uba54\uc778 \ud2b9\uc131\uc774\ub098 \ube44\uc988\ub2c8\uc2a4 \uc6b0\uc120\uc21c\uc704\ub97c \ubc18\uc601\ud558\uae30 \uc5b4\ub824\uc6b4 \uacbd\uc6b0\uac00 \ub9ce\ub2e4. Qdrant\ub294 \ubca1\ud130 \uae30\ubc18 \uc810\uc218\uc5d0 \uc870\uac74 \uae30\ubc18 \uc810\uc218\ub97c \ud569\uc0b0\ud558\uac70\ub098 \uac00\uc911\uce58\ub97c \ubd80\uc5ec\ud560 \uc218 \uc788\ub294 formula \uae30\ubc18 score boosting\uc744 \uc81c\uacf5\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Hybrid%20Queries/#_6","title":"\uc608\uc2dc: \ucf58\ud150\uce20 \uc720\ud615\uc5d0 \ub530\ub77c \uc810\uc218 \uac00\uc911\uce58 \uc870\uc815","text":"<pre><code>\"query\": {\n  \"formula\": {\n    \"sum\": [\n      \"$score\",\n      {\n        \"mult\": [0.5, { \"key\": \"tag\", \"match\": { \"any\": [\"h1\", \"h2\", \"h3\"] } }]\n      },\n      {\n        \"mult\": [0.25, { \"key\": \"tag\", \"match\": { \"any\": [\"p\", \"li\"] } }]\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Hybrid%20Queries/#_7","title":"\uc608\uc2dc: \uc0ac\uc6a9\uc790 \uc704\uce58 \uae30\ubc18 \uc810\uc218 \ubcf4\uc815","text":"<pre><code>\"query\": {\n  \"formula\": {\n    \"sum\": [\n      \"$score\",\n      {\n        \"gauss_decay\": {\n          \"x\": {\n            \"geo_distance\": {\n              \"origin\": { \"lat\": 52.504043, \"lon\": 13.393236 },\n              \"to\": \"geo.location\"\n            }\n          },\n          \"scale\": 5000\n        }\n      }\n    ]\n  },\n  \"defaults\": {\n    \"geo.location\": { \"lat\": 48.137154, \"lon\": 11.576124 }\n  }\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Hybrid%20Queries/#_8","title":"\uc9c0\uc6d0 \uc5f0\uc0b0\uc790 \uc694\uc57d","text":"\uc5f0\uc0b0\uc790 \uc124\uba85 <code>$score</code> prefetch\uc5d0\uc11c \uacc4\uc0b0\ub41c \uc720\uc0ac\ub3c4 \uc810\uc218 <code>key</code> payload \ud0a4 \ucc38\uc870 <code>sum</code>, <code>mult</code>, <code>div</code>, <code>pow</code> \ub4f1 \uc218\uce58 \uc5f0\uc0b0 <code>geo_distance</code> \ub450 \uc9c0\ub9ac \uc88c\ud45c \uac04 \uac70\ub9ac \uacc4\uc0b0 <code>gauss_decay</code>, <code>lin_decay</code>, <code>exp_decay</code> \uac70\ub9ac \uae30\ubc18 \uc810\uc218 \uac10\uc18c \ud568\uc218 <code>datetime</code>, <code>datetime key</code> \ub0a0\uc9dc \uae30\ubc18 \uc815\ub82c \ub610\ub294 \uc810\uc218\ud654"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Hybrid%20Queries/#4-grouping","title":"4. Grouping (\uacb0\uacfc \uadf8\ub8f9\ud654)","text":"<p>\uac19\uc740 \ud56d\ubaa9\uc5d0 \ub300\ud574 \ub2e4\uc218\uc758 \ud3ec\uc778\ud2b8\uac00 \uc874\uc7ac\ud560 \uacbd\uc6b0, \uc774\ub97c \uadf8\ub8f9\ud654\ud558\uc5ec \uc911\ubcf5\uc744 \uc904\uc774\uace0 \ub300\ud45c \uacb0\uacfc\ub9cc \ubcf4\uc5ec\uc904 \uc218 \uc788\ub2e4.</p> <pre><code>POST /collections/{collection_name}/points/query/groups\n{\n  \"query\": [1.1],\n  \"group_by\": \"document_id\",\n  \"limit\": 4,\n  \"group_size\": 2\n}\n</code></pre> <ul> <li> <p><code>group_by</code>: \uadf8\ub8f9\uc758 \uae30\uc900 \ud544\ub4dc</p> </li> <li> <p><code>limit</code>: \uadf8\ub8f9 \uc218 \uc81c\ud55c</p> </li> <li> <p><code>group_size</code>: \uac01 \uadf8\ub8f9\uc5d0\uc11c \ubc18\ud658\ud560 \ucd5c\ub300 \ud3ec\uc778\ud2b8 \uc218</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Hybrid%20Queries/#_9","title":"\uacb0\ub860","text":"<p>Qdrant\ub294 \ubcf5\uc218 \ubca1\ud130 \uae30\ubc18 \uac80\uc0c9 \ud658\uacbd\uc5d0\uc11c \ub2e8\uc21c\ud55c \uc720\uc0ac\ub3c4 \ube44\uad50\ub97c \ub118\uc5b4\uc11c \uac80\uc0c9 \uc735\ud569, \ub2e4\ub2e8\uacc4 \ucd5c\uc801\ud654, \uc870\uac74 \uae30\ubc18 \uc810\uc218 \uc870\uc815, \uadf8\ub8f9\ud654 \ub4f1 \uace0\ub3c4\ud654\ub41c \uac80\uc0c9 \ub85c\uc9c1\uc744 \uad6c\ucd95\ud560 \uc218 \uc788\ub3c4\ub85d \ud48d\ubd80\ud55c \uae30\ub2a5\uc744 \uc81c\uacf5\ud55c\ub2e4. \uc774\ub97c \ud1b5\ud574 \uac80\uc0c9 \ud488\uc9c8 \ud5a5\uc0c1, \uc131\ub2a5 \ucd5c\uc801\ud654, \ube44\uc988\ub2c8\uc2a4 \ubaa9\uc801\uc5d0 \ubd80\ud569\ud558\ub294 \uc815\ub82c \ubc0f \ucd94\ucc9c\uc774 \uac00\ub2a5\ud574\uc9c4\ub2e4.</p> <p>\uc774\ub7ec\ud55c \uace0\uae09 \uae30\ub2a5\uc740 \ud2b9\ud788 \ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9 \uc2dc\uc2a4\ud15c, MRL \uae30\ubc18 \uac80\uc0c9, \uc0ac\uc6a9\uc790 \ub9de\ucda4\ud615 \ucd94\ucc9c \uc2dc\uc2a4\ud15c, \ubcf5\ud569 \uc870\uac74 \uac80\uc0c9\uc5d0\uc11c \ud070 \ud6a8\uacfc\ub97c \ubc1c\ud718\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Indexing/","title":"Indexing","text":"<p>Qdrant\ub294 \ubca1\ud130 \uc778\ub371\uc2a4\uc640 \uc804\ud1b5\uc801\uc778 \ud398\uc774\ub85c\ub4dc \uc778\ub371\uc2a4\ub97c \ud568\uaed8 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \ubca1\ud130 \uac80\uc0c9 \uc5d4\uc9c4\uc774\ub2e4. </p> <p>\ud544\ud130\ub9c1 \uc870\uac74\uc774 \ud3ec\ud568\ub41c \uace0\uc18d \uc720\uc0ac\ub3c4 \uac80\uc0c9\uc744 \uac00\ub2a5\ud558\uac8c \ud558\uae30 \uc704\ud574\uc11c\ub294 \ubca1\ud130 \uc778\ub371\uc2a4\ubfd0 \uc544\ub2c8\ub77c \ud398\uc774\ub85c\ub4dc \uc778\ub371\uc2a4\ub3c4 \ud568\uaed8 \uad6c\ucd95\ub418\uc5b4\uc57c \ud55c\ub2e4. </p> <p>Qdrant\ub294 \ub2e4\uc591\ud55c \uc778\ub371\uc2a4 \ud0c0\uc785\uacfc \uc124\uc815\uc744 \ud1b5\ud574 \uc774\ub7ec\ud55c \uae30\ub2a5\uc744 \uc720\uc5f0\ud558\uac8c \uc81c\uacf5\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Indexing/#1","title":"1. \uc778\ub371\uc2a4 \uad6c\uc131 \uc6d0\uce59","text":"<ul> <li> <p>\ubca1\ud130 \uc778\ub371\uc2a4\ub294 \uc720\uc0ac\ub3c4 \uac80\uc0c9 \uc18d\ub3c4\ub97c \ud5a5\uc0c1\uc2dc\ud0a8\ub2e4.</p> </li> <li> <p>\ud398\uc774\ub85c\ub4dc \uc778\ub371\uc2a4\ub294 \ud544\ud130\ub9c1 \uc18d\ub3c4\ub97c \ud5a5\uc0c1\uc2dc\ud0a8\ub2e4.</p> </li> <li> <p>\ubaa8\ub4e0 \uc138\uadf8\uba3c\ud2b8\uac00 \uc778\ub371\uc2a4\ub97c \uac16\ub294 \uac83\uc740 \uc544\ub2c8\uba70, \ud544\uc694 \uc5ec\ubd80\ub294 Optimizer \uc124\uc815\uacfc \ub370\uc774\ud130 \uaddc\ubaa8\uc5d0 \ub530\ub77c \uc790\ub3d9 \uacb0\uc815\ub41c\ub2e4.</p> </li> <li> <p>\uc778\ub371\uc2a4 \uc124\uc815\uc740 \uceec\ub809\uc158 \uc218\uc900\uc5d0\uc11c \uc124\uc815\ub41c\ub2e4.</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Indexing/#2-payload-index","title":"2. \ud398\uc774\ub85c\ub4dc \uc778\ub371\uc2a4 (Payload Index)","text":"<p>\ubb38\uc11c\ud615 \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc758 \ud544\ub4dc \uc778\ub371\uc2a4\uc640 \uc720\uc0ac\ud558\uac8c \uc791\ub3d9\ud55c\ub2e4. \ud2b9\uc815 \ud544\ub4dc\uc5d0 \ub300\ud574 \ube60\ub978 \uc870\uac74 \uac80\uc0c9\uc774 \uac00\ub2a5\ud574\uc9c4\ub2e4.</p> <pre><code>PUT /collections/{collection_name}/index\n{\n  \"field_name\": \"city\",\n  \"field_schema\": \"keyword\"\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Indexing/#_1","title":"\uc9c0\uc6d0 \ud0c0\uc785","text":"\ud0c0\uc785 \uc124\uba85 keyword \ubb38\uc790\uc5f4 \ud544\ub4dc\uc6a9 (Match) integer \uc815\uc218\uac12 \ud544\ub4dc\uc6a9 (Match, Range) float \uc2e4\uc218\uac12 \ud544\ub4dc\uc6a9 (Range) bool \ubd88\ub9ac\uc5b8 \ud544\ub4dc\uc6a9 (Match, v1.4.0 \uc774\uc0c1) geo \uc704\uce58 \uc815\ubcf4 (Bounding Box, Radius \ub4f1) datetime \ub0a0\uc9dc \ud544\ub4dc\uc6a9 (Range, v1.8.0 \uc774\uc0c1) text \uc804\ubb38 \uac80\uc0c9\uc6a9 \uc778\ub371\uc2a4 (Full Text) uuid UUID \ubb38\uc790\uc5f4 \ud544\ub4dc \ucd5c\uc801\ud654 (v1.11.0 \uc774\uc0c1) <p>\ud544\ud130\ub9c1 \uc870\uac74\uc73c\ub85c \uc790\uc8fc \uc0ac\uc6a9\ub418\ub294 \ud544\ub4dc\ub9cc \uc778\ub371\uc2f1\ud558\ub294 \uac83\uc774 \uba54\ubaa8\ub9ac \ud6a8\uc728\uc801\uc774\ub2e4. \uac12\uc758 \uc885\ub958\uac00 \ub9ce\uc740 \ud544\ub4dc\uc77c\uc218\ub85d \uc778\ub371\uc2f1 \ud6a8\uacfc\uac00 \ud06c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Indexing/#3-full-text","title":"3. Full Text \uc778\ub371\uc2a4","text":"<p>\ud14d\uc2a4\ud2b8 \uac80\uc0c9\uc744 \uc704\ud55c \ud2b9\uc218\ud55c \uc778\ub371\uc2a4 \ud0c0\uc785\uc774\ub2e4. \ud14d\uc2a4\ud2b8\ub97c \ud1a0\ud070 \ub2e8\uc704\ub85c \ubd84\ub9ac\ud558\uc5ec \uc5ed\uc0c9\uc778 \uad6c\uc870\ub85c \uc800\uc7a5\ud55c\ub2e4.</p> <pre><code>PUT /collections/{collection_name}/index\n{\n  \"field_name\": \"description\",\n  \"field_schema\": {\n    \"type\": \"text\",\n    \"tokenizer\": \"word\",\n    \"min_token_len\": 2,\n    \"max_token_len\": 20,\n    \"lowercase\": true\n  }\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Indexing/#_2","title":"\uc9c0\uc6d0 \ud1a0\ud06c\ub098\uc774\uc800","text":"<ul> <li> <p><code>word</code>: \uc77c\ubc18\uc801\uc778 \ub2e8\uc5b4 \uae30\uc900 \ubd84\ud560</p> </li> <li> <p><code>whitespace</code>: \uacf5\ubc31 \uae30\uc900 \ubd84\ud560</p> </li> <li> <p><code>prefix</code>: \uc811\ub450\uc0ac \uae30\ubc18 \uac80\uc0c9</p> </li> <li> <p><code>multilingual</code>: \ub2e4\uc591\ud55c \uc5b8\uc5b4 \uc9c0\uc6d0 (\ube4c\ub4dc\uc2dc \uc635\uc158 \ud544\uc694)</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Indexing/#4-parameterized-index","title":"4. \ud30c\ub77c\ubbf8\ud130 \uc778\ub371\uc2a4 (Parameterized Index)","text":"<p>\uc815\uc218 \ud544\ub4dc(integer)\uc5d0 \ub300\ud574 <code>lookup</code>, <code>range</code>\ub97c \ub3c5\ub9bd\uc801\uc73c\ub85c \uc9c0\uc815\ud558\uc5ec \uc778\ub371\uc2a4 \uc131\ub2a5\uc744 \uc870\uc808\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>PUT /collections/{collection_name}/index\n{\n  \"field_name\": \"score\",\n  \"field_schema\": {\n    \"type\": \"integer\",\n    \"lookup\": false,\n    \"range\": true\n  }\n}\n</code></pre> <ul> <li> <p><code>lookup: true</code> \u2192 Match \ud544\ud130 \uc9c0\uc6d0</p> </li> <li> <p><code>range: true</code> \u2192 Range \ud544\ud130 \uc9c0\uc6d0</p> </li> <li> <p>\ub458 \uc911 \ud558\ub098\ub9cc \ud65c\uc131\ud654\ud558\uba74 \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9\uacfc \uc131\ub2a5\uc744 \ucd5c\uc801\ud654\ud560 \uc218 \uc788\ub2e4.</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Indexing/#5-on-disk-payload-index","title":"5. \ub514\uc2a4\ud06c \uae30\ubc18 \uc778\ub371\uc2a4 (On-Disk Payload Index)","text":"<p>\uae30\ubcf8\uc801\uc73c\ub85c \ubaa8\ub4e0 \ud398\uc774\ub85c\ub4dc \uc778\ub371\uc2a4\ub294 \uba54\ubaa8\ub9ac\uc5d0 \uc720\uc9c0\ub41c\ub2e4. \ud558\uc9c0\ub9cc \uc778\ub371\uc2a4 \ud06c\uae30\uac00 \ud06c\uac70\ub098 \uc790\uc8fc \uc0ac\uc6a9\ub418\uc9c0 \uc54a\ub294 \uacbd\uc6b0 \ub514\uc2a4\ud06c \uae30\ubc18 \uc778\ub371\uc2a4\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>PUT /collections/{collection_name}/index\n{\n  \"field_name\": \"uuid\",\n  \"field_schema\": {\n    \"type\": \"uuid\",\n    \"on_disk\": true\n  }\n}\n</code></pre> <p>\uc9c0\uc6d0 \ud0c0\uc785: keyword, integer, float, datetime, uuid, text, geo</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Indexing/#6-tenant-index","title":"6. \uba40\ud2f0\ud14c\ub10c\uc2dc \uc778\ub371\uc2a4 (Tenant Index)","text":"<p>\uc5ec\ub7ec \ud14c\ub10c\ud2b8\ub97c \ud3ec\ud568\ud55c \uceec\ub809\uc158\uc5d0\uc11c \ud2b9\uc815 \ud544\ub4dc \uae30\uc900\uc73c\ub85c \uc11c\ube0c \uc778\ub371\uc2a4\ub97c \ubd84\ub9ac \uad6c\uc131\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>PUT /collections/{collection_name}/index\n{\n  \"field_name\": \"tenant_id\",\n  \"field_schema\": {\n    \"type\": \"keyword\",\n    \"is_tenant\": true\n  }\n}\n</code></pre> <ul> <li> <p><code>is_tenant: true</code>\ub85c \uc124\uc815\ub41c \ud544\ub4dc\ub294 \ub514\uc2a4\ud06c\uc0c1\uc5d0\uc11c \ud14c\ub10c\ud2b8 \ub2e8\uc704\ub85c \ud074\ub7ec\uc2a4\ud130\ub9c1\ub418\uc5b4 \uac80\uc0c9 \ud6a8\uc728\uc744 \ud5a5\uc0c1\uc2dc\ud0a8\ub2e4.</p> </li> <li> <p>\uc9c0\uc6d0 \ud0c0\uc785: keyword, uuid</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Indexing/#7-principal-index","title":"7. \uc8fc \ud544\ub4dc \uc778\ub371\uc2a4 (Principal Index)","text":"<p>\uc2dc\uac04\uc774\ub098 \uc21c\uc11c \uae30\ubc18 \uac80\uc0c9\uc774 \ub9ce\uc740 \uacbd\uc6b0, \ud2b9\uc815 \ud544\ub4dc\ub97c \uae30\uc900\uc73c\ub85c \uac80\uc0c9 \ucd5c\uc801\ud654\ub97c \uc218\ud589\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>PUT /collections/{collection_name}/index\n{\n  \"field_name\": \"timestamp\",\n  \"field_schema\": {\n    \"type\": \"datetime\",\n    \"is_principal\": true\n  }\n}\n</code></pre> <ul> <li> <p>\uc2dc\uac04 \ud544\ud130 \uae30\ubc18 \ucffc\ub9ac\ub97c \ube60\ub974\uac8c \ucc98\ub9ac\ud560 \uc218 \uc788\ub2e4.</p> </li> <li> <p>\uc9c0\uc6d0 \ud0c0\uc785: integer, float, datetime</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Indexing/#8-vector-index","title":"8. \ubca1\ud130 \uc778\ub371\uc2a4 (Vector Index)","text":"<p>Qdrant\ub294 \ud604\uc7ac HNSW(Hierarchical Navigable Small World) \uc778\ub371\uc2a4\ub97c \ubca1\ud130 \uc778\ub371\uc2a4\ub85c \uc0ac\uc6a9\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Indexing/#hnsw","title":"HNSW \uac1c\uc694","text":"<ul> <li> <p>\ub2e4\uce35 \uadf8\ub798\ud504 \uad6c\uc870</p> </li> <li> <p>\uc0c1\uc704 \ub808\ubca8: \uac04\uc120 \uc801\uc74c, \uac70\ub9ac \uba40\ub2e4</p> </li> <li> <p>\ud558\uc704 \ub808\ubca8: \uac04\uc120 \ub9ce\uc74c, \uac70\ub9ac \uac00\uae5d\ub2e4</p> </li> <li> <p>\uac80\uc0c9\uc740 \uc0c1\uc704\uc5d0\uc11c \uc2dc\uc791\ud558\uc5ec \uc810\uc810 \uc815\ud655\ud558\uac8c \uc774\ub3d9</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Indexing/#_3","title":"\uc124\uc815 \uc608\uc2dc","text":"<pre><code>storage:\n  hnsw_index:\n    m: 16  # \ub178\ub4dc\ub2f9 \ucd5c\ub300 \uc5f0\uacb0 \uc218\n    ef_construct: 100  # \uc778\ub371\uc2a4 \uc0dd\uc131 \uc2dc \ud0d0\uc0c9 \ud3ed\n    full_scan_threshold: 10000  # \ud544\ud130\uac00 \uac15\ud558\uba74 \uc804\uccb4 \uc2a4\uce94 \uc6b0\uc120\n</code></pre> <ul> <li> <p><code>m</code>: \uc815\ud655\ub3c4 \ubc0f \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9\uc5d0 \uc601\ud5a5</p> </li> <li> <p><code>ef_construct</code>: \uc778\ub371\uc2a4 \uad6c\ucd95 \uc18d\ub3c4 \u2194 \uc815\ud655\ub3c4</p> </li> </ul> <p>\uceec\ub809\uc158 \uc0dd\uc131 \uc2dc \ub610\ub294 vector\ubcc4\ub85c <code>hnsw_config</code>\ub97c \uc124\uc815\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Indexing/#9-sparse-vector-index","title":"9. \uc2a4\ud30c\uc2a4 \ubca1\ud130 \uc778\ub371\uc2a4 (Sparse Vector Index)","text":"<p>\uc2a4\ud30c\uc2a4 \ubca1\ud130\ub294 \ub300\ubd80\ubd84\uc758 \uac12\uc774 0\uc778 \ubca1\ud130\ub85c, \ud6a8\uc728\uc801\uc778 \uc778\ub371\uc2a4\uac00 \ud544\uc694\ud558\ub2e4. Qdrant\ub294 \uc5ed\uc0c9\uc778 \uae30\ubc18 \uad6c\uc870\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc815\ud655\ud55c \uac80\uc0c9\uc744 \uc218\ud589\ud55c\ub2e4.</p> <pre><code>PUT /collections/{collection_name}\n{\n  \"sparse_vectors\": {\n    \"text\": {\n      \"index\": {\n        \"on_disk\": false\n      }\n    }\n  }\n}\n</code></pre> <ul> <li> <p>on_disk: true \u2192 \ub514\uc2a4\ud06c \uc800\uc7a5 (\uba54\ubaa8\ub9ac \uc808\uc57d, \uc18d\ub3c4 \uc800\ud558 \uac00\ub2a5)</p> </li> <li> <p>on_disk: false \u2192 \uba54\ubaa8\ub9ac\uc5d0 \uc720\uc9c0 (\ube60\ub978 \uac80\uc0c9)</p> </li> </ul> <p>\uc2a4\ud30c\uc2a4 \ubca1\ud130 \uc778\ub371\uc2a4\ub294 Dot Product\ub9cc \uc9c0\uc6d0\ud558\uba70, \uace0\uc815\ub41c \ucc28\uc6d0 \uc124\uc815\uc774 \ud544\uc694 \uc5c6\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Indexing/#10-idf-modifier","title":"10. IDF Modifier","text":"<p>\uc2a4\ud30c\uc2a4 \ubca1\ud130\uc5d0\uc11c \ud76c\uc18c\ud55c \ub2e8\uc5b4\uc5d0 \uac00\uc911\uce58\ub97c \ub450\ub294 Inverse Document Frequency(IDF) \uae30\ubc95\uc744 \uc790\ub3d9\uc73c\ub85c \uc801\uc6a9\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>PUT /collections/{collection_name}\n{\n  \"sparse_vectors\": {\n    \"text\": {\n      \"modifier\": \"idf\"\n    }\n  }\n}\n</code></pre> <ul> <li> <p>\uc790\uc8fc \ub4f1\uc7a5\ud558\uc9c0 \uc54a\ub294 \ud1a0\ud070\uc77c\uc218\ub85d \uac00\uc911\uce58\ub97c \ub192\uc5ec \uac80\uc0c9 \ud488\uc9c8\uc744 \ud5a5\uc0c1\uc2dc\ud0a8\ub2e4.</p> </li> <li> <p>\uc2a4\ud2b8\ub9ac\ubc0d \uc778\ud37c\ub7f0\uc2a4 \ud658\uacbd\uc5d0\uc11c \uc720\uc6a9\ud558\uac8c \ud65c\uc6a9\ub41c\ub2e4.</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Indexing/#11-filtrable-index","title":"11. Filtrable Index (\uacb0\ud569\ud615 \uc778\ub371\uc2a4 \ucd5c\uc801\ud654)","text":"<p>Qdrant\ub294 \ud544\ud130 \uc870\uac74\uc774 \ub108\ubb34 \uc57d\ud558\uac70\ub098 \ub108\ubb34 \uac15\ud560 \uacbd\uc6b0, HNSW \ub2e8\ub3c5 \uc0ac\uc6a9 \ub610\ub294 Full Scan \ubc29\uc2dd\uc774 \uac01\uac01 \uc801\ud569\ud558\ub2e4. \ud558\uc9c0\ub9cc \uc911\uac04 \ub09c\uc774\ub3c4\uc758 \uc870\uac74\uc5d0 \ub300\ud574\uc11c\ub294 \uc801\uc808\ud55c \ucd5c\uc801\ud654\uac00 \ud544\uc694\ud558\ub2e4.</p> <p>\uc774\ub97c \uc704\ud574 Qdrant\ub294 \ud544\ud130 \uc870\uac74 \uae30\ubc18\uc73c\ub85c \ucd94\uac00 \uac04\uc120\uc744 \uac16\ub294 HNSW \uad6c\uc870\ub97c \uc0ac\uc6a9\ud55c\ub2e4. \uac80\uc0c9 \uc911 \uc870\uac74\uc744 \ub9cc\uc871\ud558\ub294 \ubca1\ud130\ub9cc \ud0d0\uc0c9\ud558\uc5ec \ubd88\ud544\uc694\ud55c \uc810\uc218 \uacc4\uc0b0\uc744 \uc904\uc774\uace0 \uac80\uc0c9 \uc18d\ub3c4\ub97c \uc720\uc9c0\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Indexing/#_4","title":"\uacb0\ub860","text":"<p>Qdrant\uc758 \uc778\ub371\uc2f1 \uad6c\uc870\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 \ud2b9\uc9d5\uc744 \uac00\uc9c4\ub2e4.</p> <ul> <li> <p>\ubca1\ud130 \uac80\uc0c9 + \ud544\ud130\ub9c1\uc744 \ubcd1\ud589\ud558\uae30 \uc704\ud55c \uad6c\uc870</p> </li> <li> <p>HNSW \uae30\ubc18 \uace0\uc18d \ubca1\ud130 \uc778\ub371\uc2f1\uacfc \ub2e4\uc591\ud55c \ud398\uc774\ub85c\ub4dc \uc778\ub371\uc2a4\ub97c \uc9c0\uc6d0</p> </li> <li> <p>\ud14d\uc2a4\ud2b8, \uc704\uce58 \uc815\ubcf4, \ub0a0\uc9dc/\uc2dc\uac04, UUID \ub4f1 \ub2e4\uc591\ud55c \ud544\ub4dc\uc5d0 \ub300\ud574 \ucd5c\uc801\ud654 \uac00\ub2a5</p> </li> <li> <p>\ud14c\ub10c\uc2dc \ubc0f \uc2dc\uac04 \uae30\ubc18 \uac80\uc0c9 \ucd5c\uc801\ud654 \uae30\ub2a5 \ub0b4\uc7a5</p> </li> </ul> <p>\ubcf5\ud569\uc801\uc778 \uac80\uc0c9 \uc870\uac74, \ub300\uaddc\ubaa8 \ub370\uc774\ud130\uc14b, \ub2e4\uc591\ud55c \ud544\ud130 \uc870\uac74\uc744 \uace0\ub824\ud55c \uac80\uc0c9 \uc131\ub2a5\uc744 \ud655\ubcf4\ud558\uace0\uc790 \ud560 \ub54c, Qdrant\uc758 \uc778\ub371\uc2a4 \uc124\uc815\uc740 \ub9e4\uc6b0 \uc911\uc694\ud55c \uad6c\uc131 \uc694\uc18c\uac00 \ub41c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Load%20and%20Search%20Hugging%20Face%20Datasets/","title":"Load and Search Hugging Face Datasets","text":"<p>Hugging Face\ub294 \ubaa8\ub378\ubfd0 \uc544\ub2c8\ub77c \ub2e4\uc591\ud55c \uacf5\uac1c \ub370\uc774\ud130\uc14b\uc744 \uc81c\uacf5\ud55c\ub2e4. Qdrant \ud300 \uc5ed\uc2dc \uc784\ubca0\ub529\uc774 \ubbf8\ub9ac \uacc4\uc0b0\ub41c \ub370\uc774\ud130\uc14b\uc744 \uc5c5\ub85c\ub4dc\ud574 \ub450\uc5c8\ub2e4. \uc774\ub97c \ud65c\uc6a9\ud558\uba74 \uc784\ubca0\ub529 \uc0dd\uc131 \uacfc\uc815\uc744 \uc0dd\ub7b5\ud558\uace0 \uc989\uc2dc \ubca1\ud130 \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc2e4\uc2b5\uc744 \uc2dc\uc791\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Load%20and%20Search%20Hugging%20Face%20Datasets/#arxiv-titles-instructorxl-embeddings","title":"\uc608\uc2dc \ub370\uc774\ud130\uc14b \u2015 <code>arxiv-titles-instructorxl-embeddings</code>","text":"<ul> <li> <p>\ub0b4\uc6a9: ArXiv \ub17c\ubb38 _\uc81c\ubaa9_\ub9cc\uc744 INSTRUCTOR-XL(768\ucc28\uc6d0)\ub85c \uc784\ubca0\ub529</p> </li> <li> <p>\ud06c\uae30: \uc57d 225\ub9cc \uac1c \ubca1\ud130, 16 GB \uc774\uc0c1</p> </li> <li> <p>\ud398\uc774\ub85c\ub4dc:</p> <pre><code>{\n  \"title\": \"Nash Social Welfare for Indivisible Items under ...\",\n  \"DOI\": \"1612.05191\"\n}\n</code></pre> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Load%20and%20Search%20Hugging%20Face%20Datasets/#1-hugging-face","title":"1. Hugging Face\uc5d0\uc11c \ub370\uc774\ud130 \ubd88\ub7ec\uc624\uae30","text":"<pre><code>from datasets import load_dataset\n\ndataset = load_dataset(\"Qdrant/arxiv-titles-instructorxl-embeddings\")\n# \u2192 \ub514\uc2a4\ud06c \uc804\uccb4 \ub2e4\uc6b4\ub85c\ub4dc (\uc2dc\uac04 \uc18c\uc694)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Load%20and%20Search%20Hugging%20Face%20Datasets/#_1","title":"\uc2a4\ud2b8\ub9ac\ubc0d\uc73c\ub85c \uba54\ubaa8\ub9ac \uc808\uc57d","text":"<pre><code>dataset = load_dataset(\n    \"Qdrant/arxiv-titles-instructorxl-embeddings\",\n    split=\"train\",\n    streaming=True,      # \ub2e4\uc6b4\ub85c\ub4dc \uc5c6\uc774 \uc2a4\ud2b8\ub9bc\n)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Load%20and%20Search%20Hugging%20Face%20Datasets/#2-qdrant","title":"2. Qdrant \uceec\ub809\uc158 \uc0dd\uc131","text":"<pre><code>from qdrant_client import QdrantClient, models\n\nclient = QdrantClient(\"http://localhost:6333\")   # \ud544\uc694 \uc2dc URL \ubcc0\uacbd\n\nclient.create_collection(\n    collection_name=\"arxiv-titles-instructorxl-embeddings\",\n    vectors_config=models.VectorParams(\n        size=768,\n        distance=models.Distance.COSINE\n    ),\n)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Load%20and%20Search%20Hugging%20Face%20Datasets/#3","title":"3. \ub300\uc6a9\ub7c9 \ubc30\uce58 \uc5c5\ub85c\ub4dc","text":"<p>\ub300\uaddc\ubaa8 \ub370\uc774\ud130\ub294 \ubc30\uce58\ub85c \ub098\ub204\uc5b4 <code>upsert</code> \ud574\uc57c \ud6a8\uc728\uc801\uc774\ub2e4.</p> <pre><code>from itertools import islice\n\ndef batched(iterable, n: int):\n    iterator = iter(iterable)\n    while (batch := list(islice(iterator, n))):\n        yield batch\n\nbatch_size = 100\n\nfor batch in batched(dataset, batch_size):\n    ids     = [row.pop(\"id\")     for row in batch]   # id \ubd84\ub9ac\n    vectors = [row.pop(\"vector\") for row in batch]   # \ubca1\ud130 \ubd84\ub9ac\n\n    client.upsert(\n        collection_name=\"arxiv-titles-instructorxl-embeddings\",\n        points=models.Batch(\n            ids=ids,\n            vectors=vectors,\n            payloads=batch,     # title\u00b7DOI \ub4f1 \uba54\ud0c0\ub370\uc774\ud130\n        ),\n    )\n</code></pre> <ul> <li>Python 3.12 \uc774\uc0c1\uc774\uba74 <code>itertools.batched</code> \ub97c \ubc14\ub85c \uc0ac\uc6a9\ud574\ub3c4 \ub41c\ub2e4.</li> </ul> <p>\uc5c5\ub85c\ub4dc\uac00 \ub05d\ub098\uba74 \ubca1\ud130 \uac80\uc0c9 \uc989\uc2dc \uac00\ub2a5\ud558\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Load%20and%20Search%20Hugging%20Face%20Datasets/#4","title":"4. \uac04\ub2e8\ud55c \uac80\uc0c9 \uc608\uc2dc","text":"<pre><code>result = client.query_points(\n    collection_name=\"arxiv-titles-instructorxl-embeddings\",\n    query=[\u2026768\ucc28\uc6d0 \ucffc\ub9ac \ubca1\ud130\u2026],\n    limit=5,\n).points\n\nfor p in result:\n    print(p.payload[\"title\"], p.score)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Load%20and%20Search%20Hugging%20Face%20Datasets/#_2","title":"\ub354 \ub9ce\uc740 \uc2e4\uc2b5\uc6a9 \ub370\uc774\ud130","text":"<p>Qdrant Hub\u00b7Hugging Face\uc5d0 \uacc4\uc18d \ucd94\uac00 \uc911\uc774\ub2e4. \ud544\uc694\ud55c \ub370\uc774\ud130\uc14b\uc774 \uc788\ub2e4\uba74 Discord \ucc44\ub110\ub85c \uc694\uccad\ud558\uba74 \ub41c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Multivector%20Reranking/","title":"Multivector Reranking","text":"<p>\uba40\ud2f0\ubca1\ud130(multivector) \uae30\ub2a5\uc740 Qdrant\uac00 \uc81c\uacf5\ud558\ub294 \ud575\uc2ec \ud2b9\uc9d5 \uac00\uc6b4\ub370 \ud558\ub098\uc774\ub2e4. </p> <p>\uadf8\ub7ec\ub098 \ubb38\uc11c-\uc218\uc900\uc774 \uc544\ub2cc \ud1a0\ud070-\uc218\uc900 \ubca1\ud130\ub97c \ub2e4\ub8e8\ub294 \ud2b9\uc131\uc0c1, \ubb34\uc791\uc815 \ud65c\uc6a9\ud558\uba74 RAM \uae09\uc99d\u00b7\uc0bd\uc785 \uc9c0\uc5f0\u00b7\uacc4\uc0b0 \ub0ad\ube44\ub85c \uc774\uc5b4\uc9c0\uae30 \uc27d\ub2e4. </p> <p>\ubcf8 \uae00\uc5d0\uc11c\ub294 ColBERT \uac19\uc740 Late-Interaction \ubaa8\ub378\uc744 \uc608\ub85c \ub4e4\uc5b4, Qdrant\uc5d0\uc11c \uba40\ud2f0\ubca1\ud130\ub97c \uc800\ube44\uc6a9\u00b7\uace0\uc815\ubc00\ub85c \uc6b4\uc6a9\ud558\ub294 \uc2e4\uc804 \uc694\ub839\uc744 \uc815\ub9ac\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Multivector%20Reranking/#1","title":"1. \uba40\ud2f0\ubca1\ud130\ub780 \ubb34\uc5c7\uc778\uac00","text":"<p>\uc77c\ubc18\uc801\uc778 \ubca1\ud130 \uac80\uc0c9 \uc5d4\uc9c4\uc740 \ud558\ub098\uc758 \ubb38\uc11c\ub97c \ub2e8\uc77c \ubca1\ud130\ub85c \ud45c\ud604\ud55c\ub2e4. \uc9e7\uc740 \ud14d\uc2a4\ud2b8\uc5d0\ub294 \ucda9\ubd84\ud558\uc9c0\ub9cc, \uae34 \ubb38\uc11c\uc5d0\uc11c\ub294 \ud480\ub9c1 \uacfc\uc815\uc5d0\uc11c \uc815\ubcf4\uac00 \uc190\uc2e4\ub41c\ub2e4.  </p> <p>\uba40\ud2f0\ubca1\ud130 \ud45c\ud604\uc740 \ubb38\uc11c \u2192 \uc5ec\ub7ec \uac1c\uc758 \ud1a0\ud070/\uad6c\ubb38 \ubca1\ud130\ub85c \ubcc0\ud658\ud558\uc5ec \ucffc\ub9ac \ud1a0\ud070\uacfc \ubb38\uc11c \uc77c\ubd80\ub97c \uc815\ubc00 \ub9e4\uce6d\ud55c\ub2e4. ColBERT\ub294 \uc774\ub7ec\ud55c \ud1a0\ud070-\uc218\uc900 \ubca1\ud130\uc5d0 <code>MaxSim</code> \ud568\uc218\ub97c \uc801\uc6a9\ud574 Late-Interaction \ubc29\uc2dd\uc73c\ub85c \uc810\uc218\ub97c \uacc4\uc0b0\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Multivector%20Reranking/#2-rescoring","title":"2. \uc7ac\ub7ad\ud0b9(rescoring)\uc758 \uac1c\ub150","text":"<ol> <li> <p>1\ub2e8\uacc4: \ube60\ub978 Dense \ubaa8\ub378\ub85c \ud6c4\ubcf4 \ubb38\uc11c\ub97c \uac00\uc838\uc628\ub2e4.</p> </li> <li> <p>2\ub2e8\uacc4: ColBERT \ub4f1 \uc815\ubc00\ud558\uc9c0\ub9cc \ub290\ub9b0 \ubaa8\ub378\uc774 \ud6c4\ubcf4 \uc9d1\ud569\uc744 \ub2e4\uc2dc \uc810\uc218\ud654\ud55c\ub2e4.</p> </li> </ol> <p>\uc774 \uacfc\uc815\uc5d0\uc11c \uba40\ud2f0\ubca1\ud130\ub294 \uc7ac\ub7ad\ud0b9 \uc804\uc6a9\uc73c\ub85c \uc4f0\uc774\ub294 \uacbd\uc6b0\uac00 \ub9ce\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Multivector%20Reranking/#3-hnsw","title":"3. \u201c\ubca1\ud130 \uc804\ubd80 HNSW \uc778\ub371\uc2f1\u201d\uc774 \ubb38\uc81c\uc778 \uc774\uc720","text":"<p>Late-Interaction \ubaa8\ub378 \ud55c \ubb38\uc11c\ub294 \uc218\ubc31 \uac1c \ud1a0\ud070 \ubca1\ud130\ub97c \uc0dd\uc131\ud55c\ub2e4. \uc774\ub4e4\uc744 \ubaa8\ub450 HNSW\ub85c \uc778\ub371\uc2f1\ud558\uba74</p> <ul> <li> <p>RAM \uc0ac\uc6a9\ub7c9 \uae09\uc99d</p> </li> <li> <p>HNSW \uadf8\ub798\ud504 \uac31\uc2e0\uc73c\ub85c \uc0bd\uc785 \uc18d\ub3c4 \uc800\ud558</p> </li> </ul> <p>\uc7ac\ub7ad\ud0b9 \ub2e8\uacc4\uc5d0\uc11c\ub294 HNSW \ud0d0\uc0c9\uc774 \uad73\uc774 \ud544\uc694 \uc5c6\uc73c\ubbc0\ub85c, \uba40\ud2f0\ubca1\ud130 \ud544\ub4dc\uc758 \uc778\ub371\uc2f1\uc744 \ube44\ud65c\uc131\ud654\ud558\uc5ec \uc790\uc6d0\uc744 \uc808\uc57d\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>from qdrant_client import QdrantClient, models\n\nclient = QdrantClient(\"http://localhost:6333\")\nclient.create_collection(\n    collection_name=\"dense_multivector_demo\",\n    vectors_config={\n        \"dense\": models.VectorParams(\n            size=384,\n            distance=models.Distance.COSINE            # 1\ub2e8\uacc4 \uac80\uc0c9\uc6a9, \uc778\ub371\uc2f1 \uc720\uc9c0\n        ),\n        \"colbert\": models.VectorParams(\n            size=128,\n            distance=models.Distance.COSINE,\n            multivector_config=models.MultiVectorConfig(\n                comparator=models.MultiVectorComparator.MAX_SIM\n            ),\n            hnsw_config=models.HnswConfigDiff(m=0)      # HNSW \uc778\ub371\uc2f1 OFF\n        ),\n    },\n)\n</code></pre> <ul> <li> <p><code>m=0</code>\uc73c\ub85c \uc124\uc815\ud558\uba74 \ud574\ub2f9 \ubca1\ud130 \uc2a4\ud398\uc774\uc2a4\uc5d0 HNSW \uadf8\ub798\ud504\uac00 \uc0dd\uc131\ub418\uc9c0 \uc54a\ub294\ub2e4.</p> </li> <li> <p>\uacb0\uacfc: RAM \uc808\uac10\u00b7\uc5c5\ub85c\ub4dc \uac00\uc18d\u00b7CPU \ubd80\ud558 \uac10\uc18c \ud6a8\uacfc\uac00 \uc788\ub2e4.</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Multivector%20Reranking/#4-fastembed-colbert","title":"4. FastEmbed\ub85c ColBERT \uba40\ud2f0\ubca1\ud130 \uc0dd\uc131","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Multivector%20Reranking/#41","title":"4.1 \uc124\uce58 \ubc0f \ud074\ub77c\uc774\uc5b8\ud2b8 \ucd08\uae30\ud654","text":"<pre><code>pip install \"qdrant-client[fastembed]&gt;=1.14.2\"\n</code></pre> <pre><code>from qdrant_client import QdrantClient, models\nclient = QdrantClient(\"http://localhost:6333\")\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Multivector%20Reranking/#42","title":"4.2 \ubb38\uc11c\u00b7\ucffc\ub9ac \uc784\ubca0\ub529","text":"<pre><code>from fastembed import TextEmbedding, LateInteractionTextEmbedding\n\ndocs = [\n    \"Artificial intelligence is used in hospitals for cancer diagnosis and treatment.\",\n    \"Self-driving cars use AI to detect obstacles and make driving decisions.\",\n    \"AI is transforming customer service through chatbots and automation.\",\n]\nquery_text = \"How does AI help in medicine?\"\n\ndense_docs   = [models.Document(text=d, model=\"BAAI/bge-small-en\")   for d in docs]\ncolbert_docs = [models.Document(text=d, model=\"colbert-ir/colbertv2.0\") for d in docs]\n\ndense_query   = models.Document(text=query_text, model=\"BAAI/bge-small-en\")\ncolbert_query = models.Document(text=query_text, model=\"colbert-ir/colbertv2.0\")\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Multivector%20Reranking/#43","title":"4.3 \uceec\ub809\uc158 \uc0dd\uc131","text":"<p>\uc55e\uc11c \ubcf8 \uc608\uc2dc\uc640 \ub3d9\uc77c\ud558\uac8c <code>dense</code>\ub294 \uc778\ub371\uc2f1 \uc720\uc9c0, <code>colbert</code>\ub294 \uc778\ub371\uc2f1 \ud574\uc81c\ud558\uc5ec \ub9cc\ub4e0\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Multivector%20Reranking/#44","title":"4.4 \ubca1\ud130 \uc5c5\ub85c\ub4dc","text":"<pre><code>points = [\n    models.PointStruct(\n        id=i,\n        vector={\n            \"dense\":   dense_docs[i],\n            \"colbert\": colbert_docs[i],\n        },\n        payload={\"text\": docs[i]},\n    )\n    for i in range(len(docs))\n]\n\nclient.upload_points(\n    collection_name=\"dense_multivector_demo\",\n    points=points,\n    batch_size=8,\n)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Multivector%20Reranking/#45","title":"4.5 \uac80\uc0c9 + \uc7ac\ub7ad\ud0b9 \ud55c \ubc88\uc5d0 \uc2e4\ud589","text":"<pre><code>results = client.query_points(\n    collection_name=\"dense_multivector_demo\",\n    prefetch=models.Prefetch(                    # 1\ub2e8\uacc4: dense \uac80\uc0c9\n        query=dense_query,\n        using=\"dense\",\n    ),\n    query=colbert_query,                         # 2\ub2e8\uacc4: ColBERT \uc7ac\ub7ad\ud0b9\n    using=\"colbert\",\n    limit=3,\n    with_payload=True,\n)\n</code></pre> <ul> <li> <p><code>prefetch</code> \uacb0\uacfc\uac00 \ud6c4\ubcf4 \uc9d1\ud569\uc744 \uad6c\uc131\ud55c\ub2e4.</p> </li> <li> <p><code>query/using=\"colbert\"</code>\uac00 <code>MaxSim</code> \uae30\ubc18 \ud1a0\ud070-\ub9e4\uce6d\uc73c\ub85c \uc7ac\ub7ad\ud0b9\ud55c\ub2e4.</p> </li> <li> <p>\ucd5c\uc885 \uc0c1\uc704 3\uac1c \ubb38\uc11c\ub97c \ubc18\ud658\ud55c\ub2e4.</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Multivector%20Reranking/#5","title":"5. \uc694\uc57d","text":"<ul> <li> <p>\uba40\ud2f0\ubca1\ud130\ub294 \ud1a0\ud070-\uc218\uc900 \uc815\ubc00 \ub9e4\uce6d\uc73c\ub85c Late-Interaction \uc7ac\ub7ad\ud0b9\uc5d0 \ud0c1\uc6d4\ud558\ub2e4.</p> </li> <li> <p>Qdrant\uc5d0\uc11c\ub294 \ubca1\ud130\ubcc4 \uc778\ub371\uc2f1 \uc5ec\ubd80\ub97c \uc790\uc720\ub86d\uac8c \uc124\uc815\ud560 \uc218 \uc788\ub2e4.</p> <ul> <li> <p>Dense \ubca1\ud130: HNSW \uc778\ub371\uc2f1 \uc720\uc9c0 \u2192 \ube60\ub978 1\ucc28 \uac80\uc0c9</p> </li> <li> <p>ColBERT \ubca1\ud130: <code>m=0</code> \u2192 \uc778\ub371\uc2f1 \ud574\uc81c \u2192 \uc790\uc6d0 \uc808\uc57d</p> </li> </ul> </li> <li> <p>FastEmbed + Qdrant \uc870\ud569\uc73c\ub85c ColBERT \ud30c\uc774\ud504\ub77c\uc778\uc744 \uc190\uc27d\uac8c \uad6c\ucd95\ud560 \uc218 \uc788\ub2e4.</p> </li> <li> <p>\ud55c \ubc88\uc758 API \ud638\ucd9c\ub85c \ud6c4\ubcf4 \uac80\uc0c9 + \ud1a0\ud070-\uc815\ubc00 \uc7ac\ub7ad\ud0b9\uc744 \uc218\ud589\ud558\uc5ec \ud6a8\uc728\uacfc \uc815\ud655\ub3c4\ub97c \ub3d9\uc2dc\uc5d0 \ud655\ubcf4\ud560 \uc218 \uc788\ub2e4.</p> </li> </ul> <p>\uc774 \uac00\uc774\ub4dc\ub97c \uc801\uc6a9\ud558\uba74 \uba40\ud2f0\ubca1\ud130 \uae30\ubc18 \uc7ac\ub7ad\ud0b9\uc744 RAM\u00b7\uc5f0\uc0b0 \ube44\uc6a9 \uac71\uc815 \uc5c6\uc774 \uc2e4\uc11c\ube44\uc2a4\uc5d0 \ub3c4\uc785\ud560 \uc218 \uc788\ub2e4.  Qdrant Cloud\ub97c \uc774\uc6a9\ud558\uba74 \uad00\ub9ac\ud615 \ud658\uacbd\uc5d0\uc11c\ub3c4 \ub3d9\uc77c\ud55c \uad6c\uc131\uc744 \uc989\uc2dc \ud65c\uc6a9\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Payload/","title":"Payload","text":"<p>Qdrant\ub294 \ubca1\ud130 \uae30\ubc18 \uac80\uc0c9 \uc2dc\uc2a4\ud15c\uc774\uc9c0\ub9cc, \ub2e8\uc21c\ud55c \ubca1\ud130 \uc720\uc0ac\ub3c4 \ube44\uad50\ub97c \ub118\uc5b4 \ucd94\uac00\uc801\uc778 \uc18d\uc131 \uc815\ubcf4(Payload)\ub97c \ud568\uaed8 \uc800\uc7a5\ud558\uace0 \uac80\uc0c9\ud560 \uc218 \uc788\ub2e4\ub294 \uc810\uc5d0\uc11c \ub9e4\uc6b0 \uac15\ub825\ud558\ub2e4. </p> <p>\uc774 \uae30\ub2a5\uc744 \ud1b5\ud574 \uc0ac\uc6a9\uc790 \uc815\uc758 \ud544\ud130\ub9c1, \uba54\ud0c0\ub370\uc774\ud130 \uae30\ubc18 \uc870\uac74 \uac80\uc0c9, \ud398\uc774\uc2f1 \ubc0f \ud328\uc2ef \uae30\ubc18 \ud0d0\uc0c9\uc774 \uac00\ub2a5\ud558\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Payload/#payload","title":"Payload\ub780 \ubb34\uc5c7\uc778\uac00","text":"<p>Payload\ub294 \ubca1\ud130\uc5d0 \uc5f0\uacb0\ub41c \ubd80\uac00 \uc815\ubcf4\ub85c, JSON \ud615\uc2dd\uc73c\ub85c \uc800\uc7a5\ub41c\ub2e4. \ud14d\uc2a4\ud2b8, \uc22b\uc790, \ub0a0\uc9dc, \uc704\uce58 \uc815\ubcf4 \ub4f1 \ub2e4\uc591\ud55c \ud615\ud0dc\uc758 \ub370\uc774\ud130\ub97c \ub2f4\uc744 \uc218 \uc788\uc73c\uba70, \uac01 \ud3ec\uc778\ud2b8\uc5d0 \uc720\uc758\ubbf8\ud55c \uc18d\uc131\uc744 \ubd80\uc5ec\ud568\uc73c\ub85c\uc368 \uac80\uc0c9 \uacb0\uacfc\uc758 \uc720\uc6a9\uc131\uacfc \uc815\ubc00\ub3c4\ub97c \ub192\uc77c \uc218 \uc788\ub2e4.</p> <p>\ub2e4\uc74c\uc740 \uc608\uc2dc\uc774\ub2e4.</p> <pre><code>{\n  \"name\": \"jacket\",\n  \"colors\": [\"red\", \"blue\"],\n  \"count\": 10,\n  \"price\": 11.99,\n  \"locations\": [{ \"lon\": 52.5200, \"lat\": 13.4050 }],\n  \"reviews\": [\n    { \"user\": \"alice\", \"score\": 4 },\n    { \"user\": \"bob\", \"score\": 5 }\n  ]\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Payload/#payload_1","title":"\uc9c0\uc6d0\ud558\ub294 Payload \ud0c0\uc785","text":"<p>Qdrant\ub294 \ub2e4\uc591\ud55c \ub370\uc774\ud130 \ud0c0\uc785\uc744 \uc9c0\uc6d0\ud558\uba70, \uac80\uc0c9 \uc2dc \ud544\ud130\ub9c1 \uc870\uac74\uc73c\ub85c\ub3c4 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4. \ub370\uc774\ud130 \ud0c0\uc785\uc5d0 \ub530\ub77c \uac80\uc0c9 \uac00\ub2a5\ud55c \uc870\uac74\uc774 \ub2e4\ub974\ubbc0\ub85c \uc801\uc808\ud55c \ud0c0\uc785 \uc0ac\uc6a9\uc774 \uc911\uc694\ud558\ub2e4.</p> \ud0c0\uc785 \uc124\uba85 Integer 64\ube44\ud2b8 \uc815\uc218, \ub2e8\uc77c \ud639\uc740 \ubc30\uc5f4 \ud615\ud0dc\ub85c \uc800\uc7a5 \uac00\ub2a5 Float 64\ube44\ud2b8 \uc2e4\uc218, \uac00\uaca9, \uc810\uc218 \ub4f1\uc758 \uc815\ubc00\ud55c \uc218\uce58 \ud45c\ud604 Bool true \ub610\ub294 false Keyword \ubb38\uc790\uc5f4 \ub370\uc774\ud130, \uc815\ub82c \ubc0f \ub9e4\uce6d \uc870\uac74\uc5d0 \uc801\ud569 Geo \uc704\ub3c4(lat), \uacbd\ub3c4(lon)\ub85c \uad6c\uc131\ub41c \uc88c\ud45c\uac12 Datetime RFC 3339 \ud3ec\ub9f7\uc758 \ub0a0\uc9dc/\uc2dc\uac04 UUID \uace0\uc720 \uc2dd\ubcc4\uc790 \ud615\ud0dc\uc758 \ubb38\uc790\uc5f4. 1.11.0 \uc774\uc0c1\uc5d0\uc11c \ubcc4\ub3c4 \ud0c0\uc785 \uc9c0\uc6d0"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Payload/#_1","title":"\ubc30\uc5f4 \ucc98\ub9ac \ubc29\uc2dd","text":"<p>\ubc30\uc5f4\uc740 \ub0b4\ubd80 \uac12 \uc911 \ud558\ub098\ub77c\ub3c4 \uc870\uac74\uc5d0 \ubd80\ud569\ud558\uba74 \ud544\ud130 \uc870\uac74\uc744 \ucda9\uc871\ud55c \uac83\uc73c\ub85c \uac04\uc8fc\ub41c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Payload/#payload_2","title":"Payload \uc0bd\uc785 \uc608\uc2dc","text":"<pre><code>PUT /collections/my_collection/points\n{\n  \"points\": [\n    {\n      \"id\": 1,\n      \"vector\": [0.05, 0.61, 0.76, 0.74],\n      \"payload\": { \"city\": \"Berlin\", \"price\": 1.99 }\n    },\n    {\n      \"id\": 2,\n      \"vector\": [0.19, 0.81, 0.75, 0.11],\n      \"payload\": { \"city\": [\"Berlin\", \"London\"], \"price\": 1.99 }\n    }\n  ]\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Payload/#payload_3","title":"Payload \uc5c5\ub370\uc774\ud2b8 \ubc29\uc2dd","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Payload/#1-set-payload","title":"1. Set Payload","text":"<p>\uae30\uc874 \ud398\uc774\ub85c\ub4dc\ub294 \uc720\uc9c0\ud55c \ucc44 \ud2b9\uc815 \ud544\ub4dc\ub9cc \uc124\uc815\ud558\uac70\ub098 \ub36e\uc5b4\uc4f4\ub2e4.</p> <pre><code>POST /collections/my_collection/points/payload\n{\n  \"payload\": {\n    \"brand\": \"Nike\",\n    \"stock\": 100\n  },\n  \"points\": [1, 2]\n}\n</code></pre> <p>\ub610\ub294 \ud544\ud130\ub97c \uc0ac\uc6a9\ud574 \ud2b9\uc815 \uc870\uac74\uc744 \ub9cc\uc871\ud558\ub294 \ud3ec\uc778\ud2b8\uc5d0 \uc801\uc6a9\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>{\n  \"payload\": { \"brand\": \"Nike\" },\n  \"filter\": {\n    \"must\": [{ \"key\": \"color\", \"match\": { \"value\": \"red\" } }]\n  }\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Payload/#2-nested","title":"2. \ud0a4 \uc9c0\uc815 \uc5c5\ub370\uc774\ud2b8 (Nested \uad6c\uc870 \uc9c0\uc6d0)","text":"<pre><code>POST /collections/my_collection/points/payload\n{\n  \"payload\": { \"nested_property\": \"qux\" },\n  \"key\": \"property1\",\n  \"points\": [1]\n}\n</code></pre> <p>\uc774 \ubc29\uc2dd\uc740 <code>property1</code> \ub0b4\ubd80\uc758 <code>nested_property</code> \uac12\ub9cc \ubcc0\uacbd\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Payload/#3-overwrite-payload","title":"3. Overwrite Payload","text":"<p>\uae30\uc874 payload \uc804\uccb4\ub97c \uc644\uc804\ud788 \ub300\uccb4\ud55c\ub2e4.</p> <pre><code>PUT /collections/my_collection/points/payload\n{\n  \"payload\": {\n    \"name\": \"jacket\",\n    \"price\": 19.99\n  },\n  \"points\": [1, 2]\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Payload/#4-clear-payload","title":"4. Clear Payload","text":"<p>\ud3ec\uc778\ud2b8\uc5d0\uc11c \ubaa8\ub4e0 payload \ud544\ub4dc\ub97c \uc81c\uac70\ud55c\ub2e4.</p> <pre><code>POST /collections/my_collection/points/payload/clear\n{\n  \"points\": [1, 2]\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Payload/#5-delete-payload-keys","title":"5. Delete Payload Keys","text":"<p>\ud2b9\uc815 \ud0a4\ub9cc \uc81c\uac70\ud558\uace0 \ub098\uba38\uc9c0 \ud544\ub4dc\ub294 \uc720\uc9c0\ud55c\ub2e4.</p> <pre><code>POST /collections/my_collection/points/payload/delete\n{\n  \"keys\": [\"price\", \"color\"],\n  \"points\": [1, 2]\n}\n</code></pre> <p>\ud544\ud130\ub97c \ud65c\uc6a9\ud55c \uc81c\uac70\ub3c4 \uac00\ub2a5\ud558\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Payload/#payload_4","title":"Payload \uc778\ub371\uc2f1","text":"<p>\ud6a8\uc728\uc801\uc778 \uac80\uc0c9\uc744 \uc704\ud574 payload \ud544\ub4dc\uc5d0 \uc778\ub371\uc2a4\ub97c \uc0dd\uc131\ud560 \uc218 \uc788\ub2e4. \uc778\ub371\uc2a4\ub294 \uac80\uc0c9 \uc18d\ub3c4\ub97c \ud06c\uac8c \ud5a5\uc0c1\uc2dc\ud0a4\uba70, \ud2b9\ud788 \uacb0\uacfc \ubc94\uc704\ub97c \ube60\ub974\uac8c \uc904\uc77c \uc218 \uc788\ub294 \ud544\ub4dc\uc5d0 \ud6a8\uacfc\uc801\uc774\ub2e4.</p> <p>\uc608\uc2dc</p> <pre><code>PUT /collections/my_collection/index\n{\n  \"field_name\": \"brand\",\n  \"field_schema\": \"keyword\"\n}\n</code></pre> <p>\ud398\uc774\ub85c\ub4dc \uc778\ub371\uc2a4\ub294 \uceec\ub809\uc158 \uba54\ud0c0 \uc815\ubcf4 \uc870\ud68c \uc2dc \ud655\uc778\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>\"payload_schema\": {\n  \"brand\": {\n    \"data_type\": \"keyword\"\n  },\n  \"price\": {\n    \"data_type\": \"float\"\n  }\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Payload/#facet-count","title":"Facet Count (\ud328\uc2ef \uce74\uc6b4\ud2b8)","text":"<p>1.12.0\ubd80\ud130 Qdrant\ub294 \ud2b9\uc815 \ud544\ub4dc\uc5d0 \ub300\ud574 \uac12\ubcc4 \uac1c\uc218 \ud1b5\uacc4(facet)\ub97c \uc81c\uacf5\ud55c\ub2e4. \uc774\ub294 SQL\uc758 <code>GROUP BY</code>\uc640 \uc720\uc0ac\ud558\uba70, \ud544\ud130\ub9c1 \ub610\ub294 \ubd84\ud3ec \uc2dc\uac01\ud654\uc5d0 \ud65c\uc6a9\ub41c\ub2e4.</p> <pre><code>POST /collections/my_collection/facet\n{\n  \"key\": \"size\",\n  \"filter\": {\n    \"must\": [{ \"key\": \"color\", \"match\": { \"value\": \"red\" } }]\n  }\n}\n</code></pre> <p>\uacb0\uacfc \uc608\uc2dc</p> <pre><code>\"hits\": [\n  { \"value\": \"L\", \"count\": 19 },\n  { \"value\": \"M\", \"count\": 10 },\n  { \"value\": \"S\", \"count\": 5 }\n]\n</code></pre> <p>\uae30\ubcf8\uc801\uc73c\ub85c <code>limit</code>\uc740 10\uc774\uba70, <code>exact: true</code>\ub85c \uc124\uc815\ud558\uba74 \uc815\ud655\ud55c \uc218\uce58\ub97c \ubc18\ud658\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Payload/#_2","title":"\ub9c8\ubb34\ub9ac","text":"<p>Qdrant\uc758 Payload \uae30\ub2a5\uc740 \ubca1\ud130 \uae30\ubc18 \uac80\uc0c9\uc5d0 \uad6c\uc870\ud654\ub41c \uc870\uac74\uc744 \ub354\ud560 \uc218 \uc788\uac8c \ud574\uc8fc\uba70, \uc774\ub97c \ud1b5\ud574 \ub2e8\uc21c \uc720\uc0ac\ub3c4 \uae30\ubc18 \uac80\uc0c9\uc744 \ub118\uc5b4\uc120 \uace0\ucc28\uc6d0\uc801 \ud544\ud130\ub9c1\uacfc \ubd84\uc11d\uc774 \uac00\ub2a5\ud558\ub2e4. \uc815\ud615 \ub370\uc774\ud130\uc640 \ube44\uc815\ud615 \ub370\uc774\ud130\uac00 \ud568\uaed8 \uc874\uc7ac\ud558\ub294 \uc0c1\ud669\uc5d0\uc11c\ub3c4 Qdrant\ub294 \uc720\uc5f0\ud558\uace0 \uac15\ub825\ud55c \ub370\uc774\ud130 \ud45c\ud604 \ubc0f \ud544\ud130\ub9c1 \ub2a5\ub825\uc744 \uc81c\uacf5\ud55c\ub2e4.</p> <p>Payload\ub97c \uc798 \uc124\uacc4\ud558\uace0 \uc778\ub371\uc2f1\uc744 \uc801\uc808\ud788 \uc124\uc815\ud558\uba74 \uac80\uc0c9 \ud488\uc9c8\uacfc \uc751\ub2f5 \uc18d\ub3c4\ub97c \ubaa8\ub450 \ud5a5\uc0c1\uc2dc\ud0ac \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Points/","title":"Points","text":"<p>Qdrant\uc5d0\uc11c \uac00\uc7a5 \ud575\uc2ec\uc801\uc778 \ub370\uc774\ud130 \ub2e8\uc704\ub294 \ud3ec\uc778\ud2b8(Point)\uc774\ub2e4. \ud3ec\uc778\ud2b8\ub294 \ubca1\ud130\uc640 \ud398\uc774\ub85c\ub4dc(payload)\ub97c \ud568\uaed8 \ud3ec\ud568\ud558\ub294 \ud558\ub098\uc758 \ub808\ucf54\ub4dc\uc774\uba70, Qdrant\uc5d0\uc11c\uc758 \uc720\uc0ac\ub3c4 \uac80\uc0c9, \ud544\ud130\ub9c1 \uae30\ubc18 \uac80\uc0c9, \ub370\uc774\ud130 \uc5c5\ub370\uc774\ud2b8, \uc0ad\uc81c \ubc0f \uc870\ud68c \ub4f1\uc758 \ubaa8\ub4e0 \uc5f0\uc0b0\uc740 \uc774 \ud3ec\uc778\ud2b8\ub97c \uc911\uc2ec\uc73c\ub85c \uc774\ub8e8\uc5b4\uc9c4\ub2e4.  </p> <p>\ud558\ub098\uc758 \ud3ec\uc778\ud2b8\ub294 \ubc18\ub4dc\uc2dc \ud558\ub098 \uc774\uc0c1\uc758 \ubca1\ud130\ub97c \ud3ec\ud568\ud574\uc57c \ud558\uba70, \uc774 \ubca1\ud130\ub294 \uba38\uc2e0\ub7ec\ub2dd \ubaa8\ub378\uc774\ub098 \uc784\ubca0\ub529 \uc54c\uace0\ub9ac\uc998\uc5d0 \uc758\ud574 \uc0dd\uc131\ub41c \uace0\ucc28\uc6d0 \uc218\uce58 \ubc30\uc5f4\uc774\ub2e4. \ubca1\ud130\ub294 \uc8fc\ub85c \uc758\ubbf8\uc801 \uc720\uc0ac\uc131\uc744 \ube44\uad50\ud558\ub294 \ub370 \uc0ac\uc6a9\ub418\uba70, \uc0ac\uc6a9\uc790\ub294 \uc720\uc0ac\ud55c \ubca1\ud130\ub97c \uac00\uc9c4 \ud3ec\uc778\ud2b8\ub97c \ube60\ub974\uac8c \ucc3e\uc544\ub0bc \uc218 \uc788\ub2e4.</p> <p>\ud398\uc774\ub85c\ub4dc\ub294 \uc120\ud0dd\uc801\uc73c\ub85c \uc81c\uacf5\ub418\ub294 \ucd94\uac00 \uc815\ubcf4\ub85c, \uc77c\ubc18\uc801\uc778 JSON \ud615\ud0dc\uc758 \ud0a4-\uac12 \uc30d\uc73c\ub85c \uad6c\uc131\ub41c\ub2e4.  \uc608\ub97c \ub4e4\uc5b4 <code>\"color\": \"red\"</code> \ub610\ub294 <code>\"category\": \"electronics\"</code>\uc640 \uac19\uc740 \ud615\ud0dc\uc774\uba70,  \uac80\uc0c9 \uc2dc \ud544\ud130 \uc870\uac74\uc73c\ub85c \ud65c\uc6a9\ud558\uac70\ub098, \uc870\ud68c \uc2dc \uba54\ud0c0\ub370\uc774\ud130\ub85c \ud568\uaed8 \uc751\ub2f5\ubc1b\uc744 \uc218 \uc788\ub2e4.</p> <p>Qdrant\uc758 \ud3ec\uc778\ud2b8\ub294 \ub2e8\uc21c\ud55c \ub370\uc774\ud130 \uad6c\uc870\ub97c \ub118\uc5b4\uc11c, \ubca1\ud130 \uae30\ubc18 \uac80\uc0c9 \uc2dc\uc2a4\ud15c\uc5d0\uc11c\uc758 \uc720\uc5f0\uc131\uacfc \ud655\uc7a5\uc131\uc744 \ub3d9\uc2dc\uc5d0 \uc81c\uacf5\ud558\ub294 \uc911\uc2ec \ub2e8\uc704\ub77c \ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Points/#_1","title":"\ud3ec\uc778\ud2b8\uc758 \uad6c\uc870","text":"<p>\ud3ec\uc778\ud2b8\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 JSON \ud615\ud0dc\ub85c \ud45c\ud604\ub41c\ub2e4.</p> <pre><code>{\n    \"id\": 129,\n    \"vector\": [0.1, 0.2, 0.3, 0.4],\n    \"payload\": {\"color\": \"red\"}\n}\n</code></pre> <p>\uac01 \ud3ec\uc778\ud2b8\ub294 \ubca1\ud130\ub97c \ud3ec\ud568\ud558\uace0 \uc788\uc73c\uba70, \uc120\ud0dd\uc801\uc73c\ub85c key-value \ud615\ud0dc\uc758 payload\ub97c \ucd94\uac00\ud560 \uc218 \uc788\ub2e4. \ubca1\ud130\ub294 \uceec\ub809\uc158 \ub0b4\uc5d0\uc11c\uc758 \uc720\uc0ac\ub3c4 \uae30\ubc18 \uac80\uc0c9\uc5d0 \uc0ac\uc6a9\ub41c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Points/#id","title":"\ud3ec\uc778\ud2b8 \uc2dd\ubcc4\uc790(ID)","text":"<p>Qdrant\ub294 \ud3ec\uc778\ud2b8 \uc2dd\ubcc4\uc790\ub85c \uc815\uc218\ud615 ID (64\ube44\ud2b8 unsigned integer) \ub610\ub294 UUID\ub97c \uc9c0\uc6d0\ud55c\ub2e4. UUID\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 \ud615\uc2dd\uc774 \ud5c8\uc6a9\ub41c\ub2e4.</p> <ul> <li> <p>\uac04\ub2e8\ud55c UUID: <code>936DA01F9ABD4d9d80C702AF85C822A8</code></p> </li> <li> <p>\ud558\uc774\ud508 \ud3ec\ud568: <code>550e8400-e29b-41d4-a716-446655440000</code></p> </li> <li> <p>URN \ud615\uc2dd: <code>urn:uuid:F9168C5E-CEB2-4faa-B6BF-329BF39FA1E4</code></p> </li> </ul> <p>UUID\uc640 \uc815\uc218\ub294 \uc790\uc720\ub86d\uac8c \uc120\ud0dd\ud560 \uc218 \uc788\uc73c\uba70, \uc544\ub798\uc640 \uac19\uc774 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>{\n  \"points\": [\n    {\n      \"id\": \"5c56c793-69f3-4fbf-87e6-c4bf54c28c26\",\n      \"vector\": [0.9, 0.1, 0.1],\n      \"payload\": {\"color\": \"red\"}\n    }\n  ]\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Points/#_2","title":"\uc9c0\uc6d0 \ubca1\ud130 \uc720\ud615","text":"<p>Qdrant\ub294 \ub2e4\uc591\ud55c \uc720\ud615\uc758 \ubca1\ud130\ub97c \ud3ec\uc778\ud2b8\uc5d0 \uc5f0\uacb0\ud560 \uc218 \uc788\ub2e4.</p> \ubca1\ud130 \uc720\ud615 \uc124\uba85 Dense Vector \ub300\ubd80\ubd84\uc758 \uc784\ubca0\ub529 \ubaa8\ub378\uc774 \uc0dd\uc131\ud558\ub294 \uc77c\ubc18\uc801\uc778 \ubca1\ud130 Sparse Vector \ub300\ubd80\ubd84\uc758 \uac12\uc774 0\uc778 \ud76c\uc18c \ubca1\ud130. \ud14d\uc2a4\ud2b8 \ucc98\ub9ac\ub098 \ud611\uc5c5 \ud544\ud130\ub9c1\uc5d0 \uc720\uc6a9 MultiVector ColBERT \uac19\uc740 \ubaa8\ub378\uc5d0\uc11c \uc0dd\uc131\ub41c \uace0\uc815 \ub108\ube44, \uac00\ubcc0 \ub192\uc774 \ud589\ub82c <p>Qdrant\ub294 \uc5ec\ub7ec \ubca1\ud130\ub97c \ud558\ub098\uc758 \ud3ec\uc778\ud2b8\uc5d0 \ubd99\uc77c \uc218 \uc788\uc73c\uba70, \uc774\ub97c Named Vector\ub77c \ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Points/#_3","title":"\ud3ec\uc778\ud2b8 \uc5c5\ub85c\ub4dc \ubc29\uc2dd","text":"<p>Qdrant\ub294 \uc131\ub2a5\uc744 \uc704\ud574 \ubc30\uce58 \uc5c5\ub85c\ub4dc(Batch Insert)\ub97c \uc9c0\uc6d0\ud55c\ub2e4. \ud55c \ubc88\uc758 \uc694\uccad\uc73c\ub85c \uc5ec\ub7ec \ud3ec\uc778\ud2b8\ub97c \ub4f1\ub85d\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Points/#1-column-oriented","title":"1. Column-Oriented \ubc29\uc2dd","text":"<pre><code>{\n  \"batch\": {\n    \"ids\": [1, 2, 3],\n    \"payloads\": [\n      {\"color\": \"red\"},\n      {\"color\": \"green\"},\n      {\"color\": \"blue\"}\n    ],\n    \"vectors\": [\n      [0.9, 0.1, 0.1],\n      [0.1, 0.9, 0.1],\n      [0.1, 0.1, 0.9]\n    ]\n  }\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Points/#2-record-oriented","title":"2. Record-Oriented \ubc29\uc2dd","text":"<pre><code>{\n  \"points\": [\n    {\n      \"id\": 1,\n      \"vector\": [0.9, 0.1, 0.1],\n      \"payload\": {\"color\": \"red\"}\n    },\n    {\n      \"id\": 2,\n      \"vector\": [0.1, 0.9, 0.1],\n      \"payload\": {\"color\": \"green\"}\n    }\n  ]\n}\n</code></pre> <p>\ubaa8\ub4e0 \uc5c5\ub85c\ub4dc \uc791\uc5c5\uc740 idempotent\ud558\ub2e4. \uc989, \uac19\uc740 \ud3ec\uc778\ud2b8 ID\ub97c \uac00\uc9c4 \ub370\uc774\ud130\ub97c \uc5ec\ub7ec \ubc88 \uc5c5\ub85c\ub4dc\ud574\ub3c4 \uacb0\uacfc\ub294 \ub3d9\uc77c\ud558\uba70, \uc774\uc804 \uac12\uc774 \ub36e\uc5b4\uc4f0\uc5ec\uc9c4\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Points/#named-vector","title":"Named Vector \uc608\uc2dc","text":"<pre><code>{\n  \"points\": [\n    {\n      \"id\": 1,\n      \"vector\": {\n        \"image\": [0.9, 0.1, 0.1, 0.2],\n        \"text\": [0.4, 0.7, 0.1, 0.8, 0.1, 0.1, 0.9, 0.2]\n      }\n    }\n  ]\n}\n</code></pre> <p>\ud3ec\uc778\ud2b8 \uc5c5\ub85c\ub4dc \uc2dc \ud2b9\uc815 vector\ub9cc \uc9c0\uc815\ud558\uba74, \uc9c0\uc815\ud558\uc9c0 \uc54a\uc740 \ubca1\ud130\ub294 \uc0ad\uc81c\ub41c\ub2e4. \uae30\uc874 \ubca1\ud130\ub97c \uc720\uc9c0\ud55c \ucc44 \ud2b9\uc815 \ubca1\ud130\ub9cc \ubcc0\uacbd\ud558\ub824\uba74 update vectors API\ub97c \uc0ac\uc6a9\ud574\uc57c \ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Points/#sparse-vector","title":"Sparse Vector \ud45c\ud604 \ubc29\uc2dd","text":"<p>\ud76c\uc18c \ubca1\ud130\ub294 \ub300\ubd80\ubd84\uc758 \uac12\uc774 0\uc774\ubbc0\ub85c, (index, value) \uc30d\uc758 \ubc30\uc5f4\ub85c \ud45c\ud604\ub41c\ub2e4.</p> <pre><code>{\n  \"indices\": [6, 7],\n  \"values\": [1.0, 2.0]\n}\n</code></pre> <p>\ubca1\ud130\ub294 \ubc18\ub4dc\uc2dc Named Vector \ud615\uc2dd\uc73c\ub85c \uc5c5\ub85c\ub4dc\ud574\uc57c \ud558\uba70, index\ub294 \uc815\ub82c\ub418\uc9c0 \uc54a\uc544\ub3c4 \ub418\uc9c0\ub9cc \ub0b4\ubd80\uc801\uc73c\ub85c \uc790\ub3d9 \uc815\ub82c\ub41c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Points/#api","title":"\ubca1\ud130 \uc218\uc815 API","text":"<p>\ud2b9\uc815 \ubca1\ud130\ub9cc \uc5c5\ub370\uc774\ud2b8\ud558\uace0 \ub098\uba38\uc9c0\ub294 \uc720\uc9c0\ud558\ub824\uba74 \ub2e4\uc74c\uacfc \uac19\uc774 \ud55c\ub2e4.</p> <pre><code>PUT /collections/{collection_name}/points/vectors\n{\n  \"points\": [\n    {\n      \"id\": 1,\n      \"vector\": {\n        \"image\": [0.1, 0.2, 0.3, 0.4]\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Points/#api_1","title":"\ubca1\ud130 \uc0ad\uc81c API","text":"<p>\ud2b9\uc815 \ubca1\ud130\ub9cc \uc81c\uac70\ud558\uace0 \ub098\uba38\uc9c0\ub294 \uadf8\ub300\ub85c \uc720\uc9c0\ud558\ub824\uba74 \ub2e4\uc74c\uacfc \uac19\uc774 \ud55c\ub2e4.</p> <pre><code>POST /collections/{collection_name}/points/vectors/delete\n{\n  \"points\": [1],\n  \"vectors\": [\"text\"]\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Points/#_4","title":"\ud3ec\uc778\ud2b8 \uc0ad\uc81c","text":"<pre><code>POST /collections/{collection_name}/points/delete\n{\n  \"points\": [1, 2, 3]\n}\n</code></pre> <p>\ud544\ud130\ub97c \ud1b5\ud574 \uc870\uac74\uc5d0 \ub9de\ub294 \ud3ec\uc778\ud2b8\ub9cc \uc0ad\uc81c\ud560 \uc218\ub3c4 \uc788\ub2e4.</p> <pre><code>{\n  \"filter\": {\n    \"must\": [\n      {\n        \"key\": \"color\",\n        \"match\": { \"value\": \"red\" }\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Points/#_5","title":"\ud3ec\uc778\ud2b8 \uc870\ud68c","text":"<p>ID \ubaa9\ub85d\uc73c\ub85c \uc870\ud68c:</p> <pre><code>POST /collections/{collection_name}/points\n{\n  \"ids\": [1, 2]\n}\n</code></pre> <p>\ub2e8\uc77c \ud3ec\uc778\ud2b8 \uc870\ud68c:</p> <pre><code>GET /collections/{collection_name}/points/1\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Points/#scroll","title":"\ud3ec\uc778\ud2b8 Scroll (\ud398\uc774\uc9d5)","text":"<pre><code>POST /collections/{collection_name}/points/scroll\n{\n  \"filter\": {\n    \"must\": [\n      {\n        \"key\": \"color\",\n        \"match\": { \"value\": \"red\" }\n      }\n    ]\n  },\n  \"limit\": 1,\n  \"with_payload\": true,\n  \"with_vector\": false\n}\n</code></pre> <p><code>next_page_offset</code> \ud544\ub4dc\ub97c \ud1b5\ud574 \ub2e4\uc74c \ud398\uc774\uc9c0\ub97c \ud0d0\uc0c9\ud560 \uc218 \uc788\ub2e4. \ub9cc\uc57d null\uc774\ub77c\uba74 \ub9c8\uc9c0\ub9c9 \ud398\uc774\uc9c0\uc784\uc744 \uc758\ubbf8\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Points/#_6","title":"\ud398\uc774\ub85c\ub4dc \uc815\ub82c \uae30\ubc18 \uc870\ud68c","text":"<p>payload \uc548\uc758 \ud544\ub4dc\ub97c \uae30\uc900\uc73c\ub85c \uc815\ub82c\ud558\ub824\uba74 <code>order_by</code>\ub97c \uc0ac\uc6a9\ud55c\ub2e4. \uc608\ub97c \ub4e4\uc5b4, timestamp \ud544\ub4dc\ub97c \uae30\uc900\uc73c\ub85c \uc815\ub82c\ud558\ub824\uba74 \ub2e4\uc74c\uacfc \uac19\uc774 \ud55c\ub2e4.</p> <pre><code>{\n  \"limit\": 15,\n  \"order_by\": {\n    \"key\": \"timestamp\",\n    \"direction\": \"desc\",\n    \"start_from\": 123\n  }\n}\n</code></pre> <p>\uc815\ub82c\uc744 \uc0ac\uc6a9\ud558\uba74 <code>next_page_offset</code>\uc740 \uc81c\uacf5\ub418\uc9c0 \uc54a\uc73c\uba70, pagination\uc740 \uc218\ub3d9\uc73c\ub85c \ucc98\ub9ac\ud574\uc57c \ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Points/#_7","title":"\ud3ec\uc778\ud2b8 \uc218 \uce74\uc6b4\ud2b8","text":"<p>\uc870\uac74\uc5d0 \ub9de\ub294 \ud3ec\uc778\ud2b8 \uc218\ub97c \uc870\ud68c\ud558\ub824\uba74 \ub2e4\uc74c\uacfc \uac19\uc774 \ud55c\ub2e4.</p> <pre><code>POST /collections/{collection_name}/points/count\n{\n  \"filter\": {\n    \"must\": [\n      {\n        \"key\": \"color\",\n        \"match\": { \"value\": \"red\" }\n      }\n    ]\n  },\n  \"exact\": true\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Points/#_8","title":"\ubc30\uce58 \uc5c5\ub370\uc774\ud2b8","text":"<p>\uc5ec\ub7ec \uc885\ub958\uc758 \uc791\uc5c5\uc744 \ud55c \ubc88\uc5d0 \ucc98\ub9ac\ud558\ub824\uba74 <code>batch</code> API\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>POST /collections/{collection_name}/points/batch\n{\n  \"operations\": [\n    {\n      \"upsert\": {\n        \"points\": [\n          {\n            \"id\": 1,\n            \"vector\": [1.0, 2.0, 3.0, 4.0],\n            \"payload\": {}\n          }\n        ]\n      }\n    },\n    {\n      \"delete_vectors\": {\n        \"points\": [1],\n        \"vector\": [\"\"]\n      }\n    },\n    {\n      \"overwrite_payload\": {\n        \"payload\": {\n          \"test_payload\": \"1\"\n        },\n        \"points\": [1]\n      }\n    },\n    {\n      \"delete\": {\n        \"points\": [1]\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Points/#_9","title":"\ube44\ub3d9\uae30 \ucc98\ub9ac","text":"<p>\uc694\uccad \uc2dc <code>?wait=false</code>\ub97c \ubd99\uc774\uba74 \uc751\ub2f5\uc774 \ube60\ub974\uc9c0\ub9cc, \ub370\uc774\ud130 \ubc18\uc601\uae4c\uc9c0 \uc2dc\uac04\uc774 \uac78\ub9b4 \uc218 \uc788\ub2e4. \ubc18\uba74, <code>?wait=true</code>\ub97c \uc0ac\uc6a9\ud558\uba74 \uc5c5\ub370\uc774\ud2b8\uac00 \uc644\ub8cc\ub41c \ud6c4 \uc751\ub2f5\uc744 \ubc1b\ub294\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Points/#_10","title":"\ub9c8\ubb34\ub9ac","text":"<p>Qdrant\uc758 \ud3ec\uc778\ud2b8(Point)\ub294 \ubca1\ud130 \uac80\uc0c9\uacfc \ub370\uc774\ud130 \uc870\uc791\uc758 \uae30\ubcf8 \ub2e8\uc704\ub85c\uc11c \uc911\uc694\ud55c \uc5ed\ud560\uc744 \ud55c\ub2e4. </p> <p>UUID \ub610\ub294 \uc815\uc218 ID\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc720\uc5f0\ud558\uac8c \uc811\uadfc\ud560 \uc218 \uc788\uc73c\uba70, Dense/Sparse/MultiVector \ub4f1 \ub2e4\uc591\ud55c \ubca1\ud130 \uc720\ud615\uc744 \uc9c0\uc6d0\ud55c\ub2e4. \ub610\ud55c \ud398\uc774\ub85c\ub4dc \uae30\ubc18 \ud544\ud130\ub9c1, \uc815\ub82c, \ub300\uc6a9\ub7c9 \ubc30\uce58 \uc5c5\ub85c\ub4dc \ubc0f \uc218\uc815\uae4c\uc9c0 \uad11\ubc94\uc704\ud55c \uae30\ub2a5\uc744 \uc81c\uacf5\ud558\ubbc0\ub85c, \uac80\uc0c9 \uae30\ubc18 \uc2dc\uc2a4\ud15c\uc744 \uad6c\ucd95\ud560 \ub54c \uac15\ub825\ud55c \ub3c4\uad6c\ub85c \ud65c\uc6a9\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qdrant%20Async%20API/","title":"Qdrant Async API","text":"<p>Python \uc0dd\ud0dc\uacc4\ub294 \ube44\ub3d9\uae30 \ud504\ub85c\uadf8\ub798\ubc0d(async/await) \uc744 \ud45c\uc900\uc73c\ub85c \ube60\ub974\uac8c \ubc1b\uc544\ub4e4\uc774\uace0 \uc788\ub2e4. </p> <p>FastAPI\u00b7Quart \uac19\uc740 \ud604\ub300\uc801 \uc6f9 \ud504\ub808\uc784\uc6cc\ud06c\ub098 Cohere SDK \ub4f1 SaaS ML \ubaa8\ub378 \ud074\ub77c\uc774\uc5b8\ud2b8\ub3c4 \ubaa8\ub450 \ube44\ub3d9\uae30 API\ub97c \uc81c\uacf5\ud55c\ub2e4. </p> <p>\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5ed\uc2dc \ub124\ud2b8\uc6cc\ud06c\ub97c \ud1b5\ud55c IO-bound \uc791\uc5c5\uc774\ubbc0\ub85c, \ube44\ub3d9\uae30\ub85c \ucc98\ub9ac\ud558\uba74 \ub300\uae30 \uc2dc\uac04 \ub3d9\uc548 \uc2a4\ub808\ub4dc\ub97c \uc810\uc720\ud558\uc9c0 \uc54a\uc544 \ub3d9\uc2dc\uc131\uc744 \ud06c\uac8c \ub192\uc77c \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qdrant%20Async%20API/#async-api","title":"\uc5b8\uc81c Async API\ub97c \uc368\uc57c \ud558\ub294\uac00","text":"\uc0c1\ud669 \uc120\ud0dd \ub2e8\ubc1c\uc131 \uc2a4\ud06c\ub9bd\ud2b8\u00b7\ubc30\uce58\ucc98\ub7fc \ub3d9\uc2dc \uc0ac\uc6a9\uc790\uac00 \uc5c6\ub294 \uacbd\uc6b0 \ub3d9\uae30 API\ub3c4 \ubb34\ubc29 FastAPI \ub4f1 ASGI \uc6f9 \uc11c\ube44\uc2a4\u00b7\ucc57\ubd07\ucc98\ub7fc \uc694\uccad\uc774 \ub3d9\uc2dc\uc5d0 \ub4e4\uc5b4\uc624\ub294 \uacbd\uc6b0 AsyncQdrantClient \uc0ac\uc6a9 \uad8c\uc7a5 <p>\ub3d9\uae30 \ucf54\ub4dc \ub0b4\uc5d0\uc11c\ub294 <code>await</code>\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uace0, \ube44\ub3d9\uae30 \ucee8\ud14d\uc2a4\ud2b8\uc5d0\uc11c \ub3d9\uae30 IO\ub97c \ud638\ucd9c\ud558\uba74 \uc774\ubca4\ud2b8 \ub8e8\ud504\uac00 \ube14\ub85c\ud0b9\ub418\ubbc0\ub85c \ud63c\uc6a9\uc740 \uc9c0\uc591\ud574\uc57c \ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qdrant%20Async%20API/#_1","title":"\uae30\ubcf8 \uc0ac\uc6a9 \ud328\ud134","text":"<ol> <li> <p><code>AsyncQdrantClient</code> \uc778\uc2a4\ud134\uc2a4\ub97c \uc0dd\uc131\ud55c\ub2e4.</p> </li> <li> <p>\ubaa8\ub4e0 Qdrant \ud638\ucd9c \uc55e\uc5d0 <code>await</code> \ub97c \ubd99\uc778\ub2e4.</p> </li> <li> <p>\uc9c4\uc785\uc810\uc740 async \ud568\uc218\ub85c \uc791\uc131\ud558\uace0, \ubaa8\ub4c8 \ucd5c\uc0c1\uc704\uc5d0\uc11c <code>asyncio.run()</code> \uc73c\ub85c \uc2e4\ud589\ud55c\ub2e4.</p> </li> </ol> <pre><code>import asyncio\nfrom qdrant_client import AsyncQdrantClient, models\n\nasync def main():\n    # 1) \ube44\ub3d9\uae30 \ud074\ub77c\uc774\uc5b8\ud2b8 \uc0dd\uc131\n    client = AsyncQdrantClient(\"http://localhost:6333\")\n\n    # 2) \uceec\ub809\uc158 \uc0dd\uc131\n    await client.create_collection(\n        collection_name=\"my_collection\",\n        vectors_config=models.VectorParams(size=4, distance=models.Distance.COSINE),\n    )\n\n    # 3) \ub370\uc774\ud130 \uc0bd\uc785\n    await client.upsert(\n        collection_name=\"my_collection\",\n        points=[\n            models.PointStruct(\n                id=\"5c56c793-69f3-4fbf-87e6-c4bf54c28c26\",\n                payload={\"color\": \"red\"},\n                vector=[0.9, 0.1, 0.1, 0.5],\n            )\n        ],\n    )\n\n    # 4) \uc9c8\uc758\n    result = await client.query_points(\n        collection_name=\"my_collection\",\n        query=[0.9, 0.1, 0.1, 0.5],\n        limit=2,\n    )\n    print(result.points)\n\n# 5) \uc774\ubca4\ud2b8 \ub8e8\ud504 \uc2e4\ud589\nasyncio.run(main())\n</code></pre> <p><code>AsyncQdrantClient</code> \ub294 \ub3d9\uae30 \ubc84\uc804(<code>QdrantClient</code>)\uacfc \uba54\uc11c\ub4dc \uc2dc\uadf8\ub2c8\ucc98\uac00 \ub3d9\uc77c\ud558\ubbc0\ub85c, \uae30\uc874 \ub3d9\uae30 \ucf54\ub4dc\ubca0\uc774\uc2a4\ub97c \ub9c8\uc774\uadf8\ub808\uc774\uc158\ud560 \ub54c</p> <ul> <li> <p><code>QdrantClient</code> \u2192 <code>AsyncQdrantClient</code> \ub85c \uad50\uccb4</p> </li> <li> <p>\uac01 \ud638\ucd9c \uc55e\uc5d0 <code>await</code> \ucd94\uac00</p> </li> <li> <p>\ud638\ucd9c \uccb4\uc778\uc774 async \ud568\uc218\uac00 \ub418\ub3c4\ub85d \uc870\uc815</p> </li> </ul> <p>\uc815\ub3c4\ub9cc \ud574\uc8fc\uba74 \ub41c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qdrant%20Async%20API/#_2","title":"\uc720\uc758 \uc0ac\ud56d","text":"<ul> <li> <p>\ube44\ub3d9\uae30 \ucee8\ud14d\uc2a4\ud2b8 \ud544\uc218: <code>await</code> \ub294 \uc774\ubca4\ud2b8 \ub8e8\ud504 \uc548\uc5d0\uc11c\ub9cc \ub3d9\uc791\ud55c\ub2e4. Jupyter Notebook\uc5d0\uc11c\ub294 <code>nest_asyncio</code> \ub4f1\uc73c\ub85c \ub8e8\ud504 \uc911\ucca9\uc744 \ud5c8\uc6a9\ud558\uac70\ub098, IPython\uc758 <code>await</code> \uc9c0\uc6d0\uc744 \ud65c\uc6a9\ud55c\ub2e4.</p> </li> <li> <p>IO-bound \uc804\uc6a9: CPU-bound \uc791\uc5c5\uc740 <code>async</code> \uc640 \ubb34\uad00\ud558\ub2e4. CPU \uc791\uc5c5\uc740 \ubcc4\ub3c4\uc758 \uc2a4\ub808\ub4dc/\ud504\ub85c\uc138\uc2a4 \ud480 \ub610\ub294 \ube44\ub3d9\uae30 \uc791\uc5c5 \ud050\ub85c \ubd84\ub9ac\ud558\ub294 \ud3b8\uc774 \ub0ab\ub2e4.</p> </li> <li> <p>\ud0c0 SDK\ub3c4 async \uc0ac\uc6a9: Cohere\u00b7OpenAI Python \ub4f1 \ub2e4\ub978 \ube44\ub3d9\uae30 \ud074\ub77c\uc774\uc5b8\ud2b8\uc640 \uacb0\ud569\ud560 \ub54c \uc5ed\uc2dc \ub3d9\uc77c\ud558\uac8c <code>await</code> \ub97c \ubd99\uc5ec\uc57c \ud55c\ub2e4.</p> </li> </ul> <p>\ube44\ub3d9\uae30 API\ub97c \uc0ac\uc6a9\ud558\uba74 \uc2a4\ub808\ub4dc \ube14\ub85c\ud0b9 \uc5c6\uc774 \ub370\uc774\ud130\ubca0\uc774\uc2a4\u00b7\uc678\ubd80 API \ud638\ucd9c\uc744 \ubcd1\ub82c\ub85c \ucc98\ub9ac\ud560 \uc218 \uc788\uc73c\ubbc0\ub85c, Python \uc6f9 \uc11c\ube44\uc2a4\uc758 \ucc98\ub9ac\ub7c9\uacfc \uc751\ub2f5\uc131\uc744 \ud06c\uac8c \uac1c\uc120\ud560 \uc218 \uc788\ub2e4. Qdrant\uc758 <code>AsyncQdrantClient</code> \ub97c \uc801\uadf9 \ud65c\uc6a9\ud558\uc5ec \uace0\uc131\ub2a5 \ube44\ub3d9\uae30 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uad6c\ucd95\ud558\uae30 \ubc14\ub780\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qdrant%20LangChain/","title":"Qdrant LangChain","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qdrant%20LangChain/#1","title":"1. \uac1c\uc694","text":"<p>Qdrant\ub294 \ubca1\ud130 \uc720\uc0ac\ub3c4 \uac80\uc0c9\uc744 \uc704\ud55c \uc5d4\uc9c4\uc73c\ub85c, \uace0\uc131\ub2a5\uc758 \uac80\uc0c9 \uae30\ub2a5\uacfc \ud3b8\ub9ac\ud55c API\ub97c \uc81c\uacf5\ud55c\ub2e4. \ubca1\ud130 \ub370\uc774\ud130 \uc678\uc5d0\ub3c4 JSON \uae30\ubc18\uc758 payload\uc640 \ud655\uc7a5\ub41c \ud544\ud130\ub9c1 \uae30\ub2a5\uc744 \uc81c\uacf5\ud558\ubbc0\ub85c, \uc758\ubbf8 \uae30\ubc18 \uac80\uc0c9(semantic search)\uc774\ub098 facet \uac80\uc0c9, \ucd94\ucc9c \uc2dc\uc2a4\ud15c \ub4f1 \ub2e4\uc591\ud55c \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0 \ud65c\uc6a9\ud560 \uc218 \uc788\ub2e4.</p> <p>LangChain\uc740 Qdrant\ub97c \uc704\ud55c \ud1b5\ud569 \ubaa8\ub4c8\uc778 <code>langchain-qdrant</code>\ub97c \ud1b5\ud574 \ubc00\uc811\ud558\uac8c \uc5f0\ub3d9\ud560 \uc218 \uc788\uc73c\uba70, \uc784\ubca0\ub529 \uae30\ubc18 \uac80\uc0c9(dense), \ud76c\uc18c \ubca1\ud130 \uac80\uc0c9(sparse), \ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9(hybrid retrieval)\uc744 \ubaa8\ub450 \uc9c0\uc6d0\ud55c\ub2e4. \uc774 \ubb38\uc11c\ub294 Qdrant\ub97c LangChain\uc5d0\uc11c \ud6a8\uacfc\uc801\uc73c\ub85c \ud65c\uc6a9\ud558\ub294 \ubc29\ubc95\uc744 \uc815\ub9ac\ud55c \uac83\uc774\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qdrant%20LangChain/#2","title":"2. \uc124\uce58","text":"<p>\ub2e4\uc74c \uba85\ub839\uc5b4\ub85c \ud544\uc694\ud55c \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \uc124\uce58\ud55c\ub2e4.</p> <pre><code>pip install -qU langchain-qdrant\npip install -qU langchain-openai\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qdrant%20LangChain/#3","title":"3. \uc784\ubca0\ub529 \uc124\uc815","text":"<p>OpenAI \uae30\ubc18 \uc784\ubca0\ub529 \ubaa8\ub378\uc744 \uc124\uc815\ud55c\ub2e4. \uc608\uc2dc\ub294 <code>text-embedding-3-large</code> \ubaa8\ub378\uc744 \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0\uc774\ub2e4.</p> <pre><code>from langchain_openai import OpenAIEmbeddings\n\nembeddings = OpenAIEmbeddings(model=\"text-embedding-3-large\")\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qdrant%20LangChain/#4-qdrant","title":"4. Qdrant \ucd08\uae30\ud654","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qdrant%20LangChain/#1_1","title":"(1) \uc778\uba54\ubaa8\ub9ac \ubaa8\ub4dc","text":"<p>\ud14c\uc2a4\ud2b8 \ubc0f \uc2e4\ud5d8 \uc6a9\ub3c4\ub85c\ub294 Qdrant \uc11c\ubc84 \uc5c6\uc774 \uc778\uba54\ubaa8\ub9ac \ubaa8\ub4dc\ub85c \uc2e4\ud589\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>from qdrant_client import QdrantClient\nfrom qdrant_client.http.models import Distance, VectorParams\n\nclient = QdrantClient(\":memory:\")\nclient.create_collection(\n    collection_name=\"demo_collection\",\n    vectors_config=VectorParams(size=3072, distance=Distance.COSINE),\n)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qdrant%20LangChain/#2_1","title":"(2) \uc628\ub514\uc2a4\ud06c \ubaa8\ub4dc","text":"<p>\ub85c\uceec \ub514\uc2a4\ud06c\uc5d0 \ub370\uc774\ud130\ub97c \uc800\uc7a5\ud558\ub3c4\ub85d \uc124\uc815\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>client = QdrantClient(path=\"/tmp/langchain_qdrant\")\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qdrant%20LangChain/#5-langchain-vector-store","title":"5. LangChain Vector Store \uad6c\uc131","text":"<p>Qdrant \uc778\uc2a4\ud134\uc2a4\ub97c LangChain\uc758 <code>QdrantVectorStore</code>\uc5d0 \uc5f0\uacb0\ud55c\ub2e4.</p> <pre><code>from langchain_qdrant import QdrantVectorStore\n\nvector_store = QdrantVectorStore(\n    client=client,\n    collection_name=\"demo_collection\",\n    embedding=embeddings,\n)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qdrant%20LangChain/#6","title":"6. \ubb38\uc11c \uc0bd\uc785 \ubc0f \uc0ad\uc81c","text":"<p>LangChain\uc758 <code>Document</code> \ud074\ub798\uc2a4\ub97c \uc0ac\uc6a9\ud558\uc5ec \ub370\uc774\ud130\ub97c \uc0bd\uc785\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>from langchain_core.documents import Document\nfrom uuid import uuid4\n\ndocuments = [\n    Document(page_content=\"\ubb38\uc7a5 A\", metadata={\"source\": \"test\"}),\n    Document(page_content=\"\ubb38\uc7a5 B\", metadata={\"source\": \"test\"})\n]\n\nuuids = [str(uuid4()) for _ in range(len(documents))]\n\nvector_store.add_documents(documents=documents, ids=uuids)\n</code></pre> <p>\uc0ad\uc81c\ub294 \ub2e4\uc74c\uacfc \uac19\uc774 \uc218\ud589\ud55c\ub2e4.</p> <pre><code>vector_store.delete(ids=[uuids[0]])\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qdrant%20LangChain/#7","title":"7. \ubca1\ud130 \uac80\uc0c9","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qdrant%20LangChain/#1_2","title":"(1) \uae30\ubcf8 \uc720\uc0ac\ub3c4 \uac80\uc0c9","text":"<pre><code>results = vector_store.similarity_search(\"LangChain \uad00\ub828 \ud504\ub85c\uc81d\ud2b8\", k=2)\nfor doc in results:\n    print(doc.page_content, doc.metadata)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qdrant%20LangChain/#2_2","title":"(2) \uc720\uc0ac\ub3c4 \uc810\uc218 \ud3ec\ud568 \uac80\uc0c9","text":"<pre><code>results = vector_store.similarity_search_with_score(\"\ub0b4\uc77c \ub0a0\uc528\", k=1)\nfor doc, score in results:\n    print(f\"SIM={score:.3f} | {doc.page_content}\")\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qdrant%20LangChain/#8","title":"8. \uac80\uc0c9 \ubaa8\ub4dc \uad6c\uc131","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qdrant%20LangChain/#1-dense-vector","title":"(1) Dense Vector \uac80\uc0c9","text":"<pre><code>from langchain_qdrant import RetrievalMode\n\nqdrant = QdrantVectorStore(\n    client=client,\n    collection_name=\"my_documents\",\n    embedding=embeddings,\n    retrieval_mode=RetrievalMode.DENSE,\n)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qdrant%20LangChain/#2-sparse-vector","title":"(2) Sparse Vector \uac80\uc0c9","text":"<pre><code>from langchain_qdrant import FastEmbedSparse\nfrom qdrant_client.http.models import SparseVectorParams\n\nsparse_embeddings = FastEmbedSparse(model_name=\"Qdrant/bm25\")\n\nclient.create_collection(\n    collection_name=\"my_documents\",\n    vectors_config={\"dense\": VectorParams(size=3072, distance=Distance.COSINE)},\n    sparse_vectors_config={\n        \"sparse\": SparseVectorParams(index={\"on_disk\": False})\n    }\n)\n\nqdrant = QdrantVectorStore(\n    client=client,\n    collection_name=\"my_documents\",\n    sparse_embedding=sparse_embeddings,\n    retrieval_mode=RetrievalMode.SPARSE,\n    sparse_vector_name=\"sparse\",\n)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qdrant%20LangChain/#3-hybrid","title":"(3) Hybrid \uac80\uc0c9","text":"<pre><code>qdrant = QdrantVectorStore(\n    client=client,\n    collection_name=\"my_documents\",\n    embedding=embeddings,\n    sparse_embedding=sparse_embeddings,\n    retrieval_mode=RetrievalMode.HYBRID,\n    vector_name=\"dense\",\n    sparse_vector_name=\"sparse\",\n)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qdrant%20LangChain/#9","title":"9. \uba54\ud0c0\ub370\uc774\ud130 \ud544\ud130\ub9c1","text":"<p>Qdrant\ub294 JSON \uae30\ubc18\uc758 payload\uc5d0 \ub300\ud55c \uc870\uac74 \uac80\uc0c9\uc744 \uc9c0\uc6d0\ud55c\ub2e4. LangChain\uc5d0\uc11c\ub3c4 \uc774\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>from qdrant_client import models\n\nresults = vector_store.similarity_search(\n    query=\"\ucd95\uad6c \uc120\uc218\",\n    k=1,\n    filter=models.Filter(\n        should=[\n            models.FieldCondition(\n                key=\"metadata.source\",\n                match=models.MatchValue(value=\"website\")\n            )\n        ]\n    ),\n)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qdrant%20LangChain/#10-retriever","title":"10. Retriever\ub85c \ubcc0\ud658","text":"<p>QdrantVectorStore\ub97c LangChain Retriever\ub85c \ubcc0\ud658\ud558\uc5ec chain\uc774\ub098 agent\uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>retriever = vector_store.as_retriever(search_type=\"mmr\", search_kwargs={\"k\": 1})\nresults = retriever.invoke(\"\ub3c4\ub451\uc774 \ud6d4\uce5c \ub3c8\uc740 \uc5bc\ub9c8\uc778\uac00?\")\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qdrant%20LangChain/#11-collection","title":"11. \uae30\uc874 Collection \uc0ac\uc6a9","text":"<p>\uc774\ubbf8 \uc0dd\uc131\ub41c Collection\uc744 \uc0ac\uc6a9\ud560 \uacbd\uc6b0 \ub2e4\uc74c\ucc98\ub7fc \ubd88\ub7ec\uc62c \uc218 \uc788\ub2e4.</p> <pre><code>qdrant = QdrantVectorStore.from_existing_collection(\n    embedding=embeddings,\n    collection_name=\"my_documents\",\n    url=\"http://localhost:6333\"\n)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qdrant%20LangChain/#12-named-vector-custom-payload","title":"12. Named Vector, Custom Payload \ud0a4 \uc0ac\uc6a9","text":"<p>Qdrant\ub294 \ud558\ub098\uc758 point\uc5d0 \uc5ec\ub7ec \uac1c\uc758 named vector\ub97c \uc800\uc7a5\ud560 \uc218 \uc788\ub2e4. \ub610\ud55c, <code>page_content</code>\uc640 <code>metadata</code> \ud0a4 \ub300\uc2e0 \ucee4\uc2a4\ud140 \ud544\ub4dc\ub97c \uc0ac\uc6a9\ud560 \uc218\ub3c4 \uc788\ub2e4.</p> <pre><code>QdrantVectorStore.from_documents(\n    docs,\n    embeddings,\n    location=\":memory:\",\n    collection_name=\"my_documents\",\n    content_payload_key=\"custom_content\",\n    metadata_payload_key=\"custom_meta\",\n    vector_name=\"my_vector\",\n    sparse_vector_name=\"my_sparse\"\n)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qdrant%20LangChain/#13","title":"13. \uc815\ub9ac","text":"<p>Qdrant\ub294 LangChain\uacfc \uc644\ubcbd\ud558\uac8c \ud1b5\ud569\ub418\uba70, \ub2e4\uc591\ud55c \uac80\uc0c9 \ubaa8\ub4dc\uc640 \uba54\ud0c0\ub370\uc774\ud130 \ud544\ud130\ub9c1, \uc810\uc218 \uae30\ubc18 \uac80\uc0c9 \ub4f1\uc744 \uc720\uc5f0\ud558\uac8c \uc9c0\uc6d0\ud55c\ub2e4. \uc11c\ubc84 \uae30\ubc18 \ub610\ub294 \ub85c\uceec \uae30\ubc18\uc73c\ub85c \uc2e4\ud589\ud560 \uc218 \uc788\uace0, \uae30\uc874 Collection\uc758 \uc7ac\uc0ac\uc6a9 \ub610\ud55c \uac00\ub2a5\ud558\ub2e4. Retrieval-Augmented Generation (RAG)\uc744 \uad6c\ucd95\ud558\ub294 \ub370 \ub9e4\uc6b0 \uc801\ud569\ud55c \ubca1\ud130 \uac80\uc0c9 \uc2a4\ud1a0\uc5b4\uc774\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qptimizer/","title":"Qptimizer","text":"<p>Qdrant\ub294 \ubca1\ud130 \ub370\uc774\ud130\uc758 \uc800\uc7a5 \ubc0f \uac80\uc0c9 \uc131\ub2a5\uc744 \uc720\uc9c0\ud558\uae30 \uc704\ud574 \ub2e4\uc591\ud55c \uc790\ub3d9 \ucd5c\uc801\ud654(optimizer) \uae30\ub2a5\uc744 \uc81c\uacf5\ud55c\ub2e4. </p> <p>\uc774 \ucd5c\uc801\ud654\ub294 \uc8fc\ub85c \uc138\uadf8\uba3c\ud2b8(segment) \ub2e8\uc704\ub85c \uc791\ub3d9\ud558\uba70, \ub514\uc2a4\ud06c \uacf5\uac04 \ud68c\uc218, \uc138\uadf8\uba3c\ud2b8 \ubcd1\ud569, \uc778\ub371\uc2a4 \uc0dd\uc131 \ub4f1 \ub2e4\uc591\ud55c \uae30\ub2a5\uc744 \uc218\ud589\ud55c\ub2e4.</p> <p>\ubaa8\ub4e0 Optimizer\ub294 \uc124\uc815 \ud30c\uc77c \ub610\ub294 \uceec\ub809\uc158 \ub2e8\uc704\uc758 \ud30c\ub77c\ubbf8\ud130\ub85c \uad6c\uc131\ud560 \uc218 \uc788\uc73c\uba70, \uc2dc\uc2a4\ud15c\uc758 \uc131\ub2a5 \uc694\uad6c\uc0ac\ud56d\uc5d0 \ub530\ub77c \uc870\uc815\uc774 \uac00\ub2a5\ud558\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qptimizer/#1-segment","title":"1. Segment \ucd5c\uc801\ud654 \uad6c\uc870","text":"<p>Qdrant\ub294 \ub370\uc774\ud130 \uc800\uc7a5 \uad6c\uc870\uac00 \ubd88\ubcc0(immutable)\uc5d0 \uac00\uae4c\uc6b0\ubbc0\ub85c, \ubcc0\uacbd \uc0ac\ud56d\uc740 \uae30\uc874 \uad6c\uc870\ub97c \ubd80\ubd84\uc801\uc73c\ub85c \uc7ac\uad6c\uc131\ud558\uac70\ub098 \uc804\uccb4\ub97c \ubcf5\uc81c\ud55c \ub4a4 \uc0c8\ub85c \uad6c\uc131\ud574\uc57c \ud55c\ub2e4. \uc774\ub54c Proxy Segment\uc640 Copy-On-Write \uc804\ub7b5\uc744 \uc774\uc6a9\ud558\uc5ec, \ucd5c\uc801\ud654 \ub3c4\uc911\uc5d0\ub3c4 \uc138\uadf8\uba3c\ud2b8\ub294 \uc77d\uae30 \uac00\ub2a5\ud55c \uc0c1\ud0dc\ub85c \uc720\uc9c0\ub41c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qptimizer/#2-vacuum-optimizer","title":"2. Vacuum Optimizer","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qptimizer/#_1","title":"\ubaa9\uc801","text":"<p>\uc0ad\uc81c\ub41c \ud3ec\uc778\ud2b8\ub4e4\uc774 \ub514\uc2a4\ud06c\uc5d0 \uacc4\uc18d \ub0a8\uc544 \uc2dc\uc2a4\ud15c \ub9ac\uc18c\uc2a4\ub97c \uc18c\ubaa8\ud558\ub294 \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud55c \ucd5c\uc801\ud654\uc774\ub2e4. Qdrant\ub294 \uc0ad\uc81c \uc694\uccad \uc2dc \ub370\uc774\ud130\ub97c \uc989\uc2dc \uc81c\uac70\ud558\uc9c0 \uc54a\uace0 \"\uc0ad\uc81c \ud45c\uc2dc\"\ub9cc \ud558\uba70, \ucd94\ud6c4 Vacuum Optimizer\uc5d0 \uc758\ud574 \ubb3c\ub9ac\uc801\uc73c\ub85c \uc81c\uac70\ub41c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qptimizer/#_2","title":"\uc791\ub3d9 \uc870\uac74","text":"<pre><code>storage:\n  optimizers:\n    deleted_threshold: 0.2  # \uc138\uadf8\uba3c\ud2b8 \ub0b4 \uc0ad\uc81c \ubca1\ud130 \ube44\uc728 \uc784\uacc4\uce58 (20%)\n    vacuum_min_vector_number: 1000  # \ucd5c\uc18c \ubca1\ud130 \uc218\n</code></pre> <p>\ud574\ub2f9 \uc870\uac74\uc744 \ub9cc\uc871\ud558\ub294 \uc138\uadf8\uba3c\ud2b8\ub294 \ucd5c\uc801\ud654 \ub300\uc0c1\uc774 \ub418\uc5b4 \uc0ad\uc81c\ub41c \ub370\uc774\ud130\ub97c \uc2e4\uc81c\ub85c \uc81c\uac70\ud558\uace0 \ub514\uc2a4\ud06c \uacf5\uac04\uc744 \ud68c\uc218\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qptimizer/#3-merge-optimizer","title":"3. Merge Optimizer","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qptimizer/#_3","title":"\ubaa9\uc801","text":"<p>\uc791\uc740 \uc138\uadf8\uba3c\ud2b8\uac00 \uc9c0\ub098\uce58\uac8c \ub9ce\uc544\uc9c0\ub294 \uacbd\uc6b0 \uac80\uc0c9 \uc131\ub2a5\uc774 \uc800\ud558\ub418\ubbc0\ub85c, \uc774\ub97c \ubcd1\ud569\ud558\uc5ec \uc77c\uc815 \uc218 \uc774\ud558\ub85c \uc720\uc9c0\ud558\ub294 \uae30\ub2a5\uc774\ub2e4. \ubcd1\ud569\uc740 \ubcf4\ud1b5 \uac00\uc7a5 \uc791\uc740 \uc138\uadf8\uba3c\ud2b8 3\uac1c\ub97c \ud558\ub098\ub85c \ud569\uce58\ub294 \ubc29\uc2dd\uc73c\ub85c \uc9c4\ud589\ub41c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qptimizer/#_4","title":"\uc8fc\uc694 \uc124\uc815","text":"<pre><code>storage:\n  optimizers:\n    default_segment_number: 0  # \uc720\uc9c0\ud558\ub824\ub294 \uc138\uadf8\uba3c\ud2b8 \uc218 (0 = CPU \uc218 \uae30\uc900 \uc790\ub3d9 \uc124\uc815)\n    max_segment_size_kb: null # \ubcd1\ud569 \ud6c4 \uc138\uadf8\uba3c\ud2b8 \ucd5c\ub300 \ud06c\uae30 \uc81c\ud55c (\uc124\uc815\ud558\uc9c0 \uc54a\uc73c\uba74 \uc790\ub3d9)\n</code></pre> <ul> <li> <p>default_segment_number\ub294 \uac80\uc0c9 \uc2a4\ub808\ub4dc \uc218\uc5d0 \ub530\ub77c \uc870\uc815\ub418\ub294 \uac83\uc774 \uad8c\uc7a5\ub41c\ub2e4.</p> </li> <li> <p>max_segment_size_kb\ub97c \uc124\uc815\ud558\uba74 \uc778\ub371\uc2f1 \uc131\ub2a5\uacfc \uac80\uc0c9 \uc131\ub2a5 \uac04\uc758 \uade0\ud615\uc744 \uc870\uc808\ud560 \uc218 \uc788\ub2e4.</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qptimizer/#4-indexing-optimizer","title":"4. Indexing Optimizer","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qptimizer/#_5","title":"\ubaa9\uc801","text":"<p>\ub370\uc774\ud130 \uc591\uc774 \ub9ce\uc544\uc9c8 \uacbd\uc6b0 \uc218\ub3d9 \uc778\ub371\uc2a4 \uc124\uc815 \uc5c6\uc774 \uc790\ub3d9\uc73c\ub85c \uc778\ub371\uc2a4\ub97c \uc0dd\uc131\ud558\uac70\ub098, \uba54\ubaa8\ub9ac\uc5d0\uc11c \ub514\uc2a4\ud06c\ub85c \uc62e\uae30\ub294 \ubc29\uc2dd\uc73c\ub85c \uc2a4\ud1a0\ub9ac\uc9c0 \ucd5c\uc801\ud654\ub97c \uc218\ud589\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qptimizer/#_6","title":"\uc8fc\uc694 \uc124\uc815","text":"<pre><code>storage:\n  optimizers:\n    memmap_threshold: 200000  # \uba54\ubaa8\ub9ac\uc5d0 \uc720\uc9c0\ud560 \ucd5c\ub300 \uc138\uadf8\uba3c\ud2b8 \ud06c\uae30(KB), \ucd08\uacfc \uc2dc \ub514\uc2a4\ud06c(mmap) \uc800\uc7a5\n    indexing_threshold_kb: 20000  # \ubca1\ud130 \uc778\ub371\uc2a4 \uc0dd\uc131 \uae30\uc900 \uc6a9\ub7c9(KB)\n</code></pre> <ul> <li> <p>memmap_threshold\ub294 \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9\uc744 \uc904\uc774\uae30 \uc704\ud55c \uc124\uc815\uc774\ub2e4.</p> </li> <li> <p>indexing_threshold_kb\ub97c \ucd08\uacfc\ud558\uba74 \ube0c\ub8e8\ud2b8\ud3ec\uc2a4 \uac80\uc0c9 \ub300\uc2e0 \uc778\ub371\uc2a4\ub97c \uc0dd\uc131\ud558\uc5ec \uac80\uc0c9 \uc18d\ub3c4\ub97c \ud5a5\uc0c1\uc2dc\ud0a8\ub2e4.</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qptimizer/#5","title":"5. \uceec\ub809\uc158 \ub2e8\uc704 \uc124\uc815 \ubcc0\uacbd","text":"<p>Optimizer \uc124\uc815\uc740 \uae00\ub85c\ubc8c \uc124\uc815 \uc678\uc5d0\ub3c4 \uceec\ub809\uc158 \ub2e8\uc704\ub85c \uac1c\ubcc4 \uc9c0\uc815\uc774 \uac00\ub2a5\ud558\ub2e4. </p> <p>\uc608\ub97c \ub4e4\uc5b4, \ub300\uc6a9\ub7c9 \ub370\uc774\ud130\ub97c \ucc98\uc74c \uc5c5\ub85c\ub4dc\ud560 \ub54c\ub294 \uc778\ub371\uc2f1\uc744 \ube44\ud65c\uc131\ud654\ud55c \ub4a4 \uc5c5\ub85c\ub4dc\uac00 \uc644\ub8cc\ub41c \ud6c4\uc5d0 \uc778\ub371\uc2f1\uc744 \ud65c\uc131\ud654\ud560 \uc218 \uc788\ub2e4. \uc774\ub85c\uc368 \ubd88\ud544\uc694\ud55c \uc778\ub371\uc2a4 \uc7ac\uc0dd\uc131\uc744 \ud53c\ud558\uace0 \uc131\ub2a5\uc744 \ucd5c\uc801\ud654\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>PATCH /collections/{collection_name}\n{\n  \"optimizers_config\": {\n    \"indexing_threshold\": 0\n  }\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qptimizer/#6","title":"6. \uc815\ub9ac \ubc0f \ud65c\uc6a9 \uc804\ub7b5","text":"<p>Qdrant\uc758 Optimizer\ub4e4\uc740 \ubca1\ud130 \uac80\uc0c9 \uc2dc\uc2a4\ud15c\uc5d0\uc11c \uc790\uc8fc \ubc1c\uc0dd\ud558\ub294 \uc131\ub2a5 \uc800\ud558 \ubb38\uc81c\ub97c \uc790\ub3d9\uc73c\ub85c \ud574\uacb0\ud574\uc900\ub2e4. \ub2e4\uc74c\uacfc \uac19\uc740 \uc0c1\ud669\uc5d0\uc11c \ud6a8\uacfc\uc801\uc73c\ub85c \ud65c\uc6a9\ud560 \uc218 \uc788\ub2e4.</p> \uc0ac\uc6a9 \uc0ac\ub840 \ud65c\uc6a9 Optimizer \uc0ad\uc81c\ub41c \ud3ec\uc778\ud2b8 \uc815\ub9ac Vacuum Optimizer \uc791\uc740 \uc138\uadf8\uba3c\ud2b8 \ubcd1\ud569 Merge Optimizer \ub300\ub7c9 \uc5c5\ub85c\ub4dc \uc774\ud6c4 \uc778\ub371\uc2f1 \uc804\ud658 Indexing Optimizer \ub514\uc2a4\ud06c \uba54\ubaa8\ub9ac \uc808\uac10 memmap + indexing threshold \uc870\ud569"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Qptimizer/#_7","title":"\uacb0\ub860","text":"<p>Qdrant\uc758 Optimizer\ub294 \ub300\uaddc\ubaa8 \ubca1\ud130 \ub370\uc774\ud130\uc758 \uc131\ub2a5 \uc800\ud558\ub97c \uc608\ubc29\ud558\uace0, \uac80\uc0c9 \ud488\uc9c8\uc744 \uc720\uc9c0\ud558\uae30 \uc704\ud55c \ud575\uc2ec \uad6c\uc131 \uc694\uc18c\uc774\ub2e4. \ud2b9\ud788 \ub370\uc774\ud130\uac00 \uc9c0\uc18d\uc801\uc73c\ub85c \uc0bd\uc785, \uc0ad\uc81c, \uc5c5\ub370\uc774\ud2b8\ub418\ub294 \uc2e4\uc2dc\uac04 \uc2dc\uc2a4\ud15c \ud658\uacbd\uc5d0\uc11c\ub294 \uc790\ub3d9 \ucd5c\uc801\ud654 \uc124\uc815\uc774 \uc2dc\uc2a4\ud15c \uc548\uc815\uc131\uacfc \uc131\ub2a5\uc744 \uacb0\uc815\uc9d3\ub294 \uc911\uc694\ud55c \uc694\uc18c\uac00 \ub41c\ub2e4.</p> <p>\uac01 Optimizer\uc758 \uc870\uac74\uc744 \uc0c1\ud669\uc5d0 \ub9de\uac8c \uc870\uc815\ud558\uace0, \ud544\uc694 \uc2dc \uceec\ub809\uc158\ubcc4\ub85c \uc138\ubd84\ud654\ub41c \uc124\uc815\uc744 \uc801\uc6a9\ud558\uba74 Qdrant\uc758 \uc131\ub2a5\uc744 \ucd5c\ub300\ud55c \ud65c\uc6a9\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Reranking%20Hybrid%20Search/","title":"Reranking Hybrid Search","text":"<p>\ubcf8 \ubb38\uc11c\ub294 Dense + Sparse + Late-Interaction \uc784\ubca0\ub529\uc744 \ud55c \uceec\ub809\uc158\uc5d0 \uc800\uc7a5\ud558\uace0, \ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9 \ud6c4 ColBERT\ub85c \uc7ac\ub7ad\ud0b9\ud558\ub294 \uc804 \uacfc\uc815\uc744 \uc608\uc2dc \ucf54\ub4dc\uc640 \ud568\uaed8 \uc124\uba85\ud55c\ub2e4.  </p> <p>\ubaa8\ub4e0 \uc608\uc2dc\ub294 Python\u20063.9 \uc774\uc0c1, Qdrant \uc11c\ubc84\uac00 <code>http://localhost:6333</code> \uc5d0 \uad6c\ub3d9\ub418\uc5b4 \uc788\ub2e4\ub294 \uc804\uc81c\ud558\uc5d0 \uc791\uc131\ub418\uc5c8\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Reranking%20Hybrid%20Search/#1","title":"1. \uc544\ud0a4\ud14d\ucc98 \uac1c\uc694","text":"\ub2e8\uacc4 \ub0b4\uc6a9 \ubb38\uc11c \uc778\uc81c\uc2a4\ud2b8 \ubb38\uc11c \u2192 \u2460 Dense (BGE) \u2461 Sparse (BM25) \u2462 ColBERT \ud1a0\ud070 \ubca1\ud130 \uc0dd\uc131 \u2192 Qdrant \uc800\uc7a5 \uac80\uc0c9 \ucffc\ub9ac \ucffc\ub9ac \u2192 \ub3d9\uc77c \uc138 \uac00\uc9c0 \uc784\ubca0\ub529 \uc0dd\uc131 \ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9 Dense + Sparse \ub450 \uc11c\ube0c\ucffc\ub9ac\ub97c <code>prefetch</code> \ub85c \ubcd1\ub82c \uc218\ud589 \uc7ac\ub7ad\ud0b9 ColBERT \uba40\ud2f0\ubca1\ud130\ub85c \ud6c4\ubcf4\ub97c <code>MaxSim</code> \uae30\ubc18 \uc7ac\uc815\ub82c \uacb0\uacfc \ucd5c\uc885 \uc0c1\uc704 N\uac1c \ubb38\uc11c \ubc18\ud658 <p>\uba40\ud2f0\ubca1\ud130(ColBERT) \uc2a4\ud398\uc774\uc2a4\ub294 HNSW \uc778\ub371\uc2a4\ub97c \ub048(m = 0) \uc0c1\ud0dc\ub85c \uc800\uc7a5\ud574 RAM\u00b7\uc0bd\uc785 \uc2dc\uac04\uc744 \ucd5c\uc18c\ud654\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Reranking%20Hybrid%20Search/#2","title":"2. \uc900\ube44 \uc0ac\ud56d","text":"<pre><code>pip install qdrant-client[fastembed]&gt;=1.14.2\npip install fastembed\n</code></pre> <p>\ubaa8\ub378 \uc774\ub984</p> <ul> <li> <p>Dense\u2003: <code>sentence-transformers/all-MiniLM-L6-v2</code></p> </li> <li> <p>Sparse : <code>Qdrant/bm25</code></p> </li> <li> <p>Late-Interaction : <code>colbert-ir/colbertv2.0</code></p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Reranking%20Hybrid%20Search/#3","title":"3. \uc778\uc81c\uc2a4\ud2b8 \ub2e8\uacc4","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Reranking%20Hybrid%20Search/#31","title":"3.1 \uc784\ubca0\ub529 \uc0dd\uc131","text":"<pre><code>from fastembed import (\n    TextEmbedding,\n    SparseTextEmbedding,\n    LateInteractionTextEmbedding,\n)\n\ndocs = [\n    \"Artificial intelligence is used in hospitals for cancer diagnosis and treatment.\",\n    \"Self-driving cars use AI to detect obstacles and make driving decisions.\",\n    \"AI is transforming customer service through chatbots and automation.\",\n]\n\ndense_model   = TextEmbedding(\"sentence-transformers/all-MiniLM-L6-v2\")\nsparse_model  = SparseTextEmbedding(\"Qdrant/bm25\")\ncolbert_model = LateInteractionTextEmbedding(\"colbert-ir/colbertv2.0\")\n\ndense_vecs   = list(dense_model.embed(docs))\nsparse_vecs  = list(sparse_model.embed(docs))\ncolbert_vecs = list(colbert_model.embed(docs))      # \ub9ac\uc2a4\ud2b8(\ud1a0\ud070\uc218)\u2192128\ucc28\uc6d0 \ubca1\ud130 \ubc30\uc5f4\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Reranking%20Hybrid%20Search/#32","title":"3.2 \uceec\ub809\uc158 \uc0dd\uc131","text":"<pre><code>from qdrant_client import QdrantClient, models\n\nclient = QdrantClient(\"http://localhost:6333\")\n\nclient.create_collection(\n    collection_name=\"hybrid-search\",\n    vectors_config={\n        \"all-MiniLM-L6-v2\": models.VectorParams(\n            size=len(dense_vecs[0]),\n            distance=models.Distance.COSINE,\n        ),\n        \"colbertv2.0\": models.VectorParams(\n            size=len(colbert_vecs[0][0]),\n            distance=models.Distance.COSINE,\n            multivector_config=models.MultiVectorConfig(\n                comparator=models.MultiVectorComparator.MAX_SIM,\n            ),\n            hnsw_config=models.HnswConfigDiff(m=0),  # \uc778\ub371\uc2f1 OFF\n        ),\n    },\n    sparse_vectors_config={\n        \"bm25\": models.SparseVectorParams(\n            modifier=models.Modifier.IDF   # IDF \uc790\ub3d9 \uc801\uc6a9\n        )\n    },\n)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Reranking%20Hybrid%20Search/#33","title":"3.3 \ub370\uc774\ud130 \uc5c5\uc11c\ud2b8","text":"<pre><code>from qdrant_client.models import PointStruct\n\npoints = [\n    PointStruct(\n        id=i,\n        vector={\n            \"all-MiniLM-L6-v2\": dense_vecs[i],\n            \"bm25\": sparse_vecs[i].as_object(),\n            \"colbertv2.0\": colbert_vecs[i],\n        },\n        payload={\"document\": docs[i]},\n    )\n    for i in range(len(docs))\n]\n\nclient.upsert(\n    collection_name=\"hybrid-search\",\n    points=points,\n    batch_size=8,\n)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Reranking%20Hybrid%20Search/#4","title":"4. \uac80\uc0c9\u00b7\uc7ac\ub7ad\ud0b9 \ub2e8\uacc4","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Reranking%20Hybrid%20Search/#41","title":"4.1 \ucffc\ub9ac \uc784\ubca0\ub529","text":"<pre><code>query = \"How does AI help in medicine?\"\n\ndense_q   = next(dense_model.query_embed(query))\nsparse_q  = next(sparse_model.query_embed(query))\ncolbert_q = next(colbert_model.query_embed(query))\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Reranking%20Hybrid%20Search/#42-dense-sparse","title":"4.2 \ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9 (Dense + Sparse)","text":"<pre><code>prefetch = [\n    models.Prefetch(\n        query=dense_q,\n        using=\"all-MiniLM-L6-v2\",\n        limit=20,\n    ),\n    models.Prefetch(\n        query=models.SparseVector(**sparse_q.as_object()),\n        using=\"bm25\",\n        limit=20,\n    ),\n]\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Reranking%20Hybrid%20Search/#43-colbert","title":"4.3 ColBERT \uc7ac\ub7ad\ud0b9","text":"<pre><code>results = client.query_points(\n    collection_name=\"hybrid-search\",\n    prefetch=prefetch,           # \ud6c4\ubcf4 20+20\n    query=colbert_q,             # \ud1a0\ud070-\ub808\ubca8 MaxSim\n    using=\"colbertv2.0\",\n    limit=10,                    # \ucd5c\uc885 \uc0c1\uc704 10\n    with_payload=True,\n)\nfor r in results.points:\n    print(r.payload[\"document\"], \"| score:\", r.score)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Reranking%20Hybrid%20Search/#5","title":"5. \ubca0\uc2a4\ud2b8 \ud504\ub799\ud2f0\uc2a4","text":"<ol> <li> <p>\uba40\ud2f0\ubca1\ud130 \uc778\ub371\uc2f1 OFF</p> <ul> <li> <p><code>hnsw_config.m = 0</code> \ub85c RAM\u00b7\uc0bd\uc785 \uc18d\ub3c4 \ucd5c\uc801\ud654</p> </li> <li> <p>\uc7ac\ub7ad\ud0b9 \uc804\uc6a9 \ud544\ub4dc\uc5d0\ub294 \uc778\ub371\uc2f1\uc774 \ubd88\ud544\uc694\ud558\ub2e4.</p> </li> </ul> </li> <li> <p>Dense + Sparse \ud6c4\ubcf4 \uc9d1\ud569 \ucd95\uc18c</p> <ul> <li>1\ucc28 \uac80\uc0c9 <code>limit</code> \uac12\uc744 \uc791\uac8c \uc7a1\uc544 ColBERT \uacc4\uc0b0\ub7c9\uc744 \uc81c\uc5b4\ud55c\ub2e4.</li> </ul> </li> <li> <p>\uc9c0\uc18d\uc801 \ud488\uc9c8 \ubaa8\ub2c8\ud130\ub9c1</p> <ul> <li>\uc815\uae30\uc801\uc73c\ub85c Precision@k, MRR \ub4f1\uc744 \ud3c9\uac00\ud558\uc5ec \ubaa8\ub378\u00b7\ud30c\ub77c\ubbf8\ud130\ub97c \uc870\uc815\ud55c\ub2e4.</li> </ul> </li> <li> <p>\uc9c0\uc5f0 \uc2dc\uac04 vs \uc815\ud655\ub3c4 \uade0\ud615</p> <ul> <li>\uc7ac\ub7ad\ud0b9\uc740 \ube44\uc6a9\uc774 \ud06c\ubbc0\ub85c \ubc18\ub4dc\uc2dc \ucd95\uc18c\ub41c \ud6c4\ubcf4 \uc9d1\ud569\uc5d0\ub9cc \uc801\uc6a9\ud55c\ub2e4.</li> </ul> </li> </ol>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Reranking%20Hybrid%20Search/#6","title":"6. \uacb0\ub860","text":"<p>Qdrant\ub294 \ud55c \uceec\ub809\uc158 \uc548\uc5d0\uc11c Dense + Sparse + \uba40\ud2f0\ubca1\ud130\ub97c \ub3d9\uc2dc\uc5d0 \uc800\uc7a5\ud558\uace0, <code>prefetch</code> / <code>multivector</code> \uae30\ub2a5\uc73c\ub85c \ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9\u2192ColBERT \uc7ac\ub7ad\ud0b9\uc744 \ud55c \ubc88\uc758 \ud638\ucd9c\ub85c \uc218\ud589\ud560 \uc218 \uc788\ub2e4. \uc778\ub371\uc2a4 \uc0ac\uc6a9 \uc5ec\ubd80\ub97c \ud544\ub4dc \ub2e8\uc704\ub85c \uc81c\uc5b4\ud560 \uc218 \uc788\uc73c\ubbc0\ub85c \uc131\ub2a5\u00b7\uc790\uc6d0 \uc0ac\uc6a9\uc744 \uc138\ubc00\ud558\uac8c \ucd5c\uc801\ud654\ud560 \uc218 \uc788\ub2e4.</p> <p>Qdrant Cloud\ub97c \uc774\uc6a9\ud558\uba74 \ub3d9\uc77c \uad6c\uc131\uc744 \uad00\ub9ac\ud615 \ud658\uacbd\uc5d0\uc11c \uc989\uc2dc \ud65c\uc6a9\ud560 \uc218 \uc788\ub2e4. \uc9c0\uae08 \ubc14\ub85c \ubb34\ub8cc\ub85c \uac00\uc785\ud558\uc5ec \uace0\uc815\ubc00 \uac80\uc0c9 \ud30c\uc774\ud504\ub77c\uc778\uc744 \uad6c\ucd95\ud574 \ubcf4\uc790.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Running%20with%20GPU/","title":"Running with GPU","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Running%20with%20GPU/#1","title":"1. \uac1c\uc694","text":"<p>Qdrant v1.13.0\ubd80\ud130 GPU \uc778\ub371\uc2f1 \uac00\uc18d\uc744 \uacf5\uc2dd \uc9c0\uc6d0\ud55c\ub2e4. </p> <p>\uae30\ubcf8 \ubc14\uc774\ub108\ub9ac\uc5d0\ub294 \ud3ec\ud568\ub418\uc9c0 \uc54a\uc73c\ubbc0\ub85c, \uc804\uc6a9 Docker \uc774\ubbf8\uc9c0\ub97c \uc0ac\uc6a9\ud558\uac70\ub098 \uc9c1\uc811 GPU \uae30\ub2a5\uc744 \ucf1c\uc11c \ube4c\ub4dc\ud574\uc57c \ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Running%20with%20GPU/#2","title":"2. \uc124\uc815 \uc635\uc158 \uc694\uc57d","text":"<p><code>production.yaml</code> \uc5d0 \ub2e4\uc74c\uacfc \uac19\uc740 <code>gpu</code> \ube14\ub85d\uc774 \uc874\uc7ac\ud55c\ub2e4.</p> <pre><code>gpu:\n  indexing: false          # GPU \uc778\ub371\uc2f1 \uc0ac\uc6a9 \uc5ec\ubd80\n  force_half_precision: false\n  groups_count: 512        # GPU \uc6cc\ud06c \uadf8\ub8f9 \uc218\n  device_filter: \"\"        # \"nvidia\" \ub4f1 \ud544\ud130 \ubb38\uc790\uc5f4\n  devices: null            # \uc778\ub371\uc2a4(0,1\u2026)\ub85c \ud2b9\uc815 GPU \uc120\ud0dd\n  parallel_indexes: 1      # \ubcd1\ub82c \uc778\ub371\uc2f1 \uc791\uc5c5 \uc218\n  allow_integrated: false  # \ub0b4\uc7a5 GPU \ud5c8\uc6a9\n  allow_emulated: false    # \uc18c\ud504\ud2b8\uc6e8\uc5b4 GPU(LLVMpipe) \ud5c8\uc6a9\n</code></pre> <p>\ub300\ubd80\ubd84 \uae30\ubcf8\uac12\uc744 \uc720\uc9c0\ud558\uace0 <code>indexing: true</code>\ub9cc \ud658\uacbd \ubcc0\uc218\ub85c \ucf1c\uba74 \ub41c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Running%20with%20GPU/#3","title":"3. \ub3c5\ub9bd \uc2e4\ud589\ud615 \ubc14\uc774\ub108\ub9ac \ube4c\ub4dc","text":"<p>\ub85c\uceec \ube4c\ub4dc\ub97c \uc6d0\ud55c\ub2e4\uba74 GPU \uae30\ub2a5\uc744 \ud3ec\ud568\ud558\uc5ec \ucef4\ud30c\uc77c\ud55c\ub2e4.</p> <pre><code>cargo build --release --features gpu\n</code></pre> <ul> <li> <p>GPU \uc0ac\uc6a9 \uc2dc Vulkan 1.3 \uc9c0\uc6d0\uc774 \ud544\uc218\uc774\ub2e4.</p> </li> <li> <p>\uc2e4\ud589 \uc2dc <code>gpu.indexing: true</code>\uac00 \uc124\uc815\ub3fc \uc788\uc5b4\uc57c \uc2e4\uc81c\ub85c GPU\ub97c \uc4f4\ub2e4.</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Running%20with%20GPU/#4-nvidia-gpu-docker","title":"4. NVIDIA GPU\uc6a9 Docker","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Running%20with%20GPU/#4-1","title":"4-1. \uc0ac\uc804 \uc900\ube44","text":"<ul> <li> <p>\ucd5c\uc2e0 NVIDIA \ub4dc\ub77c\uc774\ubc84</p> </li> <li> <p><code>nvidia-container-toolkit</code> \uc124\uce58</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Running%20with%20GPU/#4-2","title":"4-2. \uc2e4\ud589 \uc608\uc2dc","text":"<pre><code>docker run --rm \\\n  --gpus=all \\\n  -p 6333:6333 -p 6334:6334 \\\n  -e QDRANT__GPU__INDEXING=1 \\\n  qdrant/qdrant:gpu-nvidia-latest\n</code></pre> <ul> <li> <p><code>--gpus=all</code> \u2192 \ucee8\ud14c\uc774\ub108\uc5d0 \ubb3c\ub9ac GPU \ub178\ucd9c</p> </li> <li> <p><code>QDRANT__GPU__INDEXING=1</code> \u2192 Qdrant\uac00 GPU \uc778\ub371\uc2f1 \ud65c\uc131\ud654</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Running%20with%20GPU/#4-3","title":"4-3. \uc815\uc0c1 \ub3d9\uc791 \ud655\uc778","text":"<p>\ucee8\ud14c\uc774\ub108 \ub85c\uadf8\uc5d0 \ub2e4\uc74c\uacfc \uac19\uc774 \uc2e4\uc81c GPU\uac00 \uc7a1\ud614\ub294\uc9c0 \ud655\uc778\ud55c\ub2e4.</p> <pre><code>INFO gpu::instance: Found GPU device: NVIDIA GeForce RTX 3090\nINFO gpu::device:   Create GPU device NVIDIA GeForce RTX 3090\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Running%20with%20GPU/#4-4","title":"4-4. \ubb38\uc81c \ud574\uacb0","text":"<p>GPU\uac00 \ubcf4\uc774\uc9c0 \uc54a\uc73c\uba74 \ub2e4\uc74c\uc744 \uc810\uac80\ud55c\ub2e4.</p> <ol> <li> <p>\ub4dc\ub77c\uc774\ubc84 \ubc0f <code>nvidia-container-toolkit</code> \ucd5c\uc2e0\ud654</p> </li> <li> <p><code>vulkaninfo --summary</code>\ub85c Vulkan \ub178\ucd9c \ud655\uc778</p> </li> <li> <p><code>/etc/nvidia-container-runtime/config.toml</code>\uc5d0\uc11c <code>no-cgroups=false</code> \uc124\uc815 \ud6c4 Docker \uc7ac\uc2dc\uc791</p> </li> </ol>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Running%20with%20GPU/#5-amd-gpu-docker","title":"5. AMD GPU\uc6a9 Docker","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Running%20with%20GPU/#5-1","title":"5-1. \uc0ac\uc804 \uc900\ube44","text":"<ul> <li>\ud638\uc2a4\ud2b8\uc5d0 ROCm \uc124\uce58</li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Running%20with%20GPU/#5-2","title":"5-2. \uc2e4\ud589 \uc608\uc2dc","text":"<pre><code>docker run --rm \\\n  --device /dev/kfd --device /dev/dri \\\n  -p 6333:6333 -p 6334:6334 \\\n  -e QDRANT__GPU__INDEXING=1 \\\n  qdrant/qdrant:gpu-amd-latest\n</code></pre> <ul> <li><code>/dev/kfd</code>, <code>/dev/dri</code> \uc7a5\uce58\ub97c \ub178\ucd9c\ud574\uc57c ROCm\uc774 \uc778\uc2dd\ub41c\ub2e4.</li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Running%20with%20GPU/#5-3","title":"5-3. \ub85c\uadf8 \uc608\uc2dc","text":"<pre><code>INFO gpu::instance: Found GPU device: AMD Radeon Graphics (RADV GFX1103_R1)\nINFO gpu::device:   Create GPU device AMD Radeon Graphics (RADV GFX1103_R1)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Running%20with%20GPU/#6","title":"6. \uba54\ubaa8\ub9ac\u00b7\uc138\uadf8\uba3c\ud2b8 \ud06c\uae30 \uc81c\ud55c","text":"<p>GPU \ud55c \ubc88\uc758 \uc778\ub371\uc2f1 \uc791\uc5c5\uc774 \ucc98\ub9ac\ud560 \uc218 \uc788\ub294 \ub370\uc774\ud130\ub294 16 GB\uae4c\uc9c0\uc774\ub2e4. \uc138\uadf8\uba3c\ud2b8 \ud06c\uae30\uac00 \uc774\ub97c \ucd08\uacfc\ud558\uc9c0 \uc54a\ub3c4\ub85d <code>max_segment_size</code>(KB \ub2e8\uc704) \uac12\uc744 \uc870\uc815\ud55c\ub2e4.</p> <pre><code>PATCH /collections/{collection_name}\n{\n  \"optimizers_config\": {\n    \"max_segment_size\": 1000000   # \uc608: 1,000,000 KB \u2252 1 GB\n  }\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Running%20with%20GPU/#7","title":"7. \uc54c\ub824\uc9c4 \uc81c\uc57d","text":"\ud56d\ubaa9 \ub0b4\uc6a9 \uc9c0\uc6d0 \ud50c\ub7ab\ud3fc Linux x86_64 \uc804\uc6a9 Docker \uc774\ubbf8\uc9c0 \uc81c\uacf5. Windows, macOS, ARM \ubbf8\uc9c0\uc6d0 \uba54\ubaa8\ub9ac \ud55c\uacc4 GPU\ub2f9 16 GB \ubca1\ud130 \ub370\uc774\ud130/\ubc18\ubcf5 \uc778\ub371\uc2f1"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Running%20with%20GPU/#8","title":"8. \ud55c\ub208\uc5d0 \ubcf4\ub294 \uc2e4\ud589 \uc808\ucc28","text":"<ol> <li> <p>GPU \ub4dc\ub77c\uc774\ubc84 &amp; \ub7f0\ud0c0\uc784 \uc124\uce58</p> </li> <li> <p>GPU \uc9c0\uc6d0 Docker \uc774\ubbf8\uc9c0(<code>gpu-nvidia</code>, <code>gpu-amd</code>) \uc120\ud0dd</p> </li> <li> <p>\ucee8\ud14c\uc774\ub108 \uc2e4\ud589 \uc2dc</p> <ul> <li> <p>GPU \uc7a5\uce58 \ub178\ucd9c(<code>--gpus=all</code> \ub610\ub294 <code>--device \u2026</code>)</p> </li> <li> <p><code>QDRANT__GPU__INDEXING=1</code> \ud658\uacbd \ubcc0\uc218 \uc9c0\uc815</p> </li> </ul> </li> <li> <p>\ub85c\uadf8\ub85c \ucd08\uae30\ud654 \uc131\uacf5 \ud655\uc778</p> </li> <li> <p>\ud544\uc694\ud558\ub2e4\uba74 <code>max_segment_size</code>\ub85c \uc138\uadf8\uba3c\ud2b8 \uc870\uc815</p> </li> </ol> <p>\uc774\ub807\uac8c \uc124\uc815\ud558\uba74 Qdrant\uac00 HNSW \uadf8\ub798\ud504 \uad6c\ucd95\uc744 GPU\uc5d0\uc11c \uc218\ud589\ud558\uc5ec \uc778\ub371\uc2f1 \uc18d\ub3c4\uc640 \ubc30\uce58 \ucc98\ub9ac\ub7c9\uc774 \ud06c\uac8c \ud5a5\uc0c1\ub41c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Scaling%20PDF%20Retrieval/","title":"Scaling PDF Retrieval","text":"<p>\ub300\uaddc\ubaa8 PDF \uac80\uc0c9\uc740 RAG\u00b7\uc5d0\uc774\uc804\ud2b8\ud615 \uc6cc\ud06c\ud50c\ub85c\uc6b0\uc5d0\uc11c \ud575\uc2ec \uc694\uc18c\uc774\ub2e4. </p> <p>ColPali\u00b7ColQwen2\uc640 \uac19\uc740 \ube44\uc804 LLM(VLLM)\uc740 OCR\u00b7\ub8f0 \uae30\ubc18 \ud30c\uc2f1 \uc5c6\uc774 PDF \ud398\uc774\uc9c0 \uc774\ubbf8\uc9c0\ub97c \uc9c1\uc811 \uc784\ubca0\ub529\ud558\uc5ec \ucd5c\uc2e0 \ubca4\uce58\ub9c8\ud06c(\uc608: ViDoRe)\uc5d0\uc11c \ub6f0\uc5b4\ub09c \uc131\ub2a5\uc744 \ubcf4\uc778\ub2e4. </p> <p>\uadf8\ub7ec\ub098 VLLM\uc740 \ud55c \ud398\uc774\uc9c0\ub2f9 \uc218\ubc31 ~ \ucc9c\uc5ec \uac1c\uc758 \uba40\ud2f0\ubca1\ud130\ub97c \uc0dd\uc131\ud558\ubbc0\ub85c, \uadf8\ub300\ub85c HNSW \uc778\ub371\uc2f1\uc744 \uc218\ud589\ud558\uba74 RAM \uc0ac\uc6a9\ub7c9 \ud3ed\uc99d\u00b7\uc778\ub371\uc2a4 \uad6c\ucd95 \uc9c0\uc5f0\u00b7\uac80\uc0c9 \uc9c0\uc5f0 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud55c\ub2e4.</p> <p>\ubcf8 \ud29c\ud1a0\ub9ac\uc5bc\uc740 \ub2e4\uc74c \uc804\ub7b5\uc73c\ub85c \uc774\ub7ec\ud55c \ubcd1\ubaa9\uc744 \ud574\uc18c\ud558\ub294 \ubc29\ubc95\uc744 \uc124\uba85\ud55c\ub2e4.</p> <ol> <li> <p>1\ub2e8\uacc4 \uac80\uc0c9 \u2015 \ud589\u00b7\uc5f4 \uae30\uc900 Mean Pooling \uc73c\ub85c \ubca1\ud130 \uc218\ub97c \uc218\uc2ed \uac1c\ub85c \ucd95\uc18c\ud558\uc5ec HNSW \uc778\ub371\uc2a4 \uad6c\ucd95</p> </li> <li> <p>2\ub2e8\uacc4 \uc7ac\ub7ad\ud0b9 \u2015 \uc6d0\ubcf8 \uba40\ud2f0\ubca1\ud130\ub97c \uc0ac\uc6a9\ud574 \uc0c1\uc704 \ud6c4\ubcf4(\uc608: 100\uac1c)\ub97c ColPali\u00b7ColQwen2\uc758 Late Interaction(MAX SIM)\uc73c\ub85c \uc815\ubc00 \uc7ac\uc815\ub82c</p> </li> </ol>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Scaling%20PDF%20Retrieval/#1","title":"1. \uc0ac\uc804 \uc900\ube44","text":"<pre><code>pip install colpali_engine&gt;=0.3.1         # ColPali / ColQwen2\npip install qdrant-client[fastembed]&gt;=1.12 # Qdrant + \uc784\ubca0\ub529\n</code></pre> <pre><code>from colpali_engine.models import ColPali, ColPaliProcessor\nfrom qdrant_client import QdrantClient, models\n\nclient = QdrantClient(url=\"&lt;Qdrant_Cluster_URL&gt;\", api_key=\"&lt;API_KEY&gt;\")\nmodel      = ColPali.from_pretrained(\"vidore/colpali-v1.3\",\n                                     torch_dtype=\"bfloat16\",\n                                     device_map=\"cuda:0\").eval()\nprocessor  = ColPaliProcessor.from_pretrained(\"vidore/colpali-v1.3\")\n</code></pre> <p>_ColQwen2_\ub3c4 \ub3d9\uc77c\ud55c \ubc29\ubc95\uc73c\ub85c \ub85c\ub4dc\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Scaling%20PDF%20Retrieval/#2","title":"2. \uceec\ub809\uc158 \uc124\uacc4","text":"\ubca1\ud130 \uc774\ub984 \uc6a9\ub3c4 \ud06c\uae30 HNSW multivector <code>original</code> \uc6d0\ubcf8 \uba40\ud2f0\ubca1\ud130 \u2192 \uc7ac\ub7ad\ud0b9 128 \ube44\ud65c\uc131(m=0) MAX_SIM <code>mean_pooling_rows</code> \ud589\ubcc4 \ud3c9\uade0 128 \ud65c\uc131 MAX_SIM <code>mean_pooling_columns</code> \uc5f4\ubcc4 \ud3c9\uade0 128 \ud65c\uc131 MAX_SIM <pre><code>client.create_collection(\n    \"pdf-pages\",\n    vectors_config = {\n        \"original\": models.VectorParams(\n            size=128, distance=models.Distance.COSINE,\n            multivector_config=models.MultiVectorConfig(\n                comparator=models.MultiVectorComparator.MAX_SIM),\n            hnsw_config=models.HnswConfigDiff(m=0)            # \uc778\ub371\uc2f1 OFF\n        ),\n        \"mean_pooling_rows\": models.VectorParams(\n            size=128, distance=models.Distance.COSINE,\n            multivector_config=models.MultiVectorConfig(\n                comparator=models.MultiVectorComparator.MAX_SIM)\n        ),\n        \"mean_pooling_columns\": models.VectorParams(\n            size=128, distance=models.Distance.COSINE,\n            multivector_config=models.MultiVectorConfig(\n                comparator=models.MultiVectorComparator.MAX_SIM)\n        )\n    }\n)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Scaling%20PDF%20Retrieval/#3","title":"3. \ub370\uc774\ud130\uc14b \uc900\ube44","text":"<pre><code>from datasets import load_dataset\ndataset = load_dataset(\"davanstrien/ufo-ColPali\", split=\"train\")\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Scaling%20PDF%20Retrieval/#4-mean-pooling","title":"4. \uc784\ubca0\ub529 \ubc0f Mean Pooling","text":"<pre><code>import torch, uuid, tqdm\n\ndef embed_page(image):\n    proc = processor.process_images([image])\n    vecs = model(**proc)[0]               # (1030, 128) ColPali \uc608\uc2dc\n    mask = proc.input_ids[0] == processor.image_token_id\n    img_tokens = vecs[mask]\n    x, y = processor.get_n_patches(image.size, model.patch_size)  # (32, 32)\n    img_tokens = img_tokens.view(x, y, -1)\n\n    # \ud589\u00b7\uc5f4 \ud3c9\uade0\n    rows    = img_tokens.mean(dim=1)                # (x, 128)\n    columns = img_tokens.mean(dim=0)                # (y, 128)\n\n    # \ud2b9\uc218 \ud1a0\ud070 6\uac1c \uc720\uc9c0\n    specials = vecs[~mask]\n    rows    = torch.cat([rows, specials])           # (x+6, 128)\n    columns = torch.cat([columns, specials])        # (y+6, 128)\n\n    return vecs, rows, columns\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Scaling%20PDF%20Retrieval/#5","title":"5. \uc5c5\ub85c\ub4dc","text":"<pre><code>points=[]\nfor i, row in enumerate(tqdm.tqdm(dataset[:1000])):  # \uc608\uc2dc: 1,000\ud398\uc774\uc9c0\n    original, rows, cols = embed_page(row[\"image\"])\n\n    points.append(\n        models.PointStruct(\n            id=uuid.uuid4().hex,\n            vector={\n                \"original\": original.cpu().numpy(),\n                \"mean_pooling_rows\": rows.cpu().numpy(),\n                \"mean_pooling_columns\": cols.cpu().numpy()\n            },\n            payload={\"index\": i}\n        )\n    )\n\nclient.upload_points(\"pdf-pages\", points=points, batch_size=8)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Scaling%20PDF%20Retrieval/#6","title":"6. \uac80\uc0c9 \ud30c\uc774\ud504\ub77c\uc778","text":"<pre><code>query = \"Lee Harvey Oswald's involvement in the JFK assassination\"\nq_vec  = model(**processor.process_queries([query]).to(model.device))[0]\n\nprefetched = client.query_points(\n    \"pdf-pages\",\n    query=q_vec,\n    prefetch=[\n        models.Prefetch(query=q_vec, using=\"mean_pooling_rows\",    limit=100),\n        models.Prefetch(query=q_vec, using=\"mean_pooling_columns\", limit=100)\n    ],\n    using=\"original\",            # \uc7ac\ub7ad\ud0b9 \ub2e8\uacc4\n    limit=10,\n    with_payload=True\n)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Scaling%20PDF%20Retrieval/#7","title":"7. \uc131\ub2a5 \ud6a8\uacfc","text":"<ul> <li> <p>ColPali \uc6d0\ubcf8: \ud398\uc774\uc9c0\ub2f9 1,030 \ubca1\ud130 \u00d7 <code>ef_construct=100</code> \u2192 \uc0bd\uc785\ub2f9 \ucd5c\uc18c 103,000 \ube44\uad50</p> </li> <li> <p>Mean Pooling 32\u00d732: \ud398\uc774\uc9c0\ub2f9 \u224832 \ubca1\ud130 \u2192 \ube44\uad50\ub7c9\uc744 30\ubc30 \uc774\uc0c1 \uac10\uc18c</p> </li> <li> <p>\uc2e4\ud5d8 \uacb0\uacfc</p> <ul> <li> <p>\uc778\ub371\uc2f1 \uc2dc\uac04: 10\ubc30 \uc774\uc0c1 \ub2e8\ucd95</p> </li> <li> <p>1\ub2e8\uacc4 Recall: \uc6d0\ubcf8 \ub300\ube44 \uc190\uc2e4 \ubbf8\ubbf8</p> </li> <li> <p>\uc7ac\ub7ad\ud0b9: \ucd5c\uc885 \uc815\ubc00\ub3c4 \uc720\uc9c0</p> </li> </ul> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Scaling%20PDF%20Retrieval/#8","title":"8. \uacb0\ub860 \ubc0f \uad8c\uc7a5 \uc0ac\ud56d","text":"<ul> <li> <p>\uba40\ud2f0\ubca1\ud130 \uc555\ucd95 \u2192 1\ub2e8\uacc4 \uac80\uc0c9, \uc6d0\ubcf8 \uba40\ud2f0\ubca1\ud130 \u2192 \uc7ac\ub7ad\ud0b9 \uc804\ub7b5\uc774 \ud544\uc218\uc801\uc774\ub2e4.</p> </li> <li> <p>\ub2e8\uc21c \uc591\uc790\ud654\ub294 \ube44\uad50 \ud69f\uc218\ub97c \uc904\uc774\uc9c0 \ubabb\ud558\ubbc0\ub85c \ucc98\ub9ac \uc18d\ub3c4 \ubcd1\ubaa9\uc744 \ud574\uacb0\ud558\uc9c0 \ubabb\ud55c\ub2e4.</p> </li> <li> <p>Qdrant\uc758 <code>multivector_config</code>, <code>hnsw_config(m=0)</code> \uc635\uc158\uc744 \uc801\uadf9 \ud65c\uc6a9\ud558\uc5ec RAM\u00b7CPU \uc790\uc6d0\uc744 \uc808\uc57d\ud558\ub77c.</p> </li> <li> <p>ColPali\u00b7ColQwen2\uc640 \uac19\uc740 VLLM \uae30\ubc18 PDF RAG \ud30c\uc774\ud504\ub77c\uc778\uc744 \uad6c\ucd95\ud560 \ub54c, \ubcf8 \ud29c\ud1a0\ub9ac\uc5bc\uc758 \uc124\uacc4\ub97c \uc801\uc6a9\ud558\uba74 \ub300\ub7c9 \ubb38\uc11c\ub3c4 \uc2e4\uc6a9\uc801\uc778 \uc2dc\uac04 \uc548\uc5d0 \uc778\ub371\uc2f1\u00b7\uac80\uc0c9\ud560 \uc218 \uc788\ub2e4.</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Semantic%20Search%20Tutorials/","title":"Semantic Search Tutorials","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Semantic%20Search%20Tutorials/#1-5","title":"1. 5 \ubd84 \ub9cc\uc5d0 \ub9cc\ub4dc\ub294 \uac04\ub2e8\ud55c \uc2dc\ub9e8\ud2f1 \uac80\uc0c9 \uc5d4\uc9c4","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Semantic%20Search%20Tutorials/#11","title":"1.1 \uc900\ube44 \uc0ac\ud56d","text":"<ul> <li> <p>Python \ucd5c\uc2e0 \ubc84\uc804</p> </li> <li> <p>\uac00\uc0c1 \ud658\uacbd(\uc608: <code>python -m venv tutorial-env &amp;&amp; source tutorial-env/bin/activate</code>)</p> </li> <li> <p>\ud544\uc218 \ub77c\uc774\ube0c\ub7ec\ub9ac</p> </li> </ul> <pre><code>pip install -U sentence-transformers qdrant-client&gt;=1.7.1\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Semantic%20Search%20Tutorials/#12","title":"1.2 \ucf54\ub4dc \uac1c\uc694","text":"<pre><code>from qdrant_client import QdrantClient, models\nfrom sentence_transformers import SentenceTransformer\n\nencoder = SentenceTransformer(\"all-MiniLM-L6-v2\")\nclient = QdrantClient(\":memory:\")           # \uc778\uba54\ubaa8\ub9ac \ubaa8\ub4dc\ndocs = [...]                                # \ucc45 \uba54\ud0c0\ub370\uc774\ud130\nclient.create_collection(\n    \"my_books\",\n    vectors_config=models.VectorParams(\n        size=encoder.get_sentence_embedding_dimension(),\n        distance=models.Distance.COSINE,\n    ),\n)\nclient.upload_points(\n    \"my_books\",\n    [\n        models.PointStruct(\n            id=i,\n            vector=encoder.encode(d[\"description\"]).tolist(),\n            payload=d,\n        )\n        for i, d in enumerate(docs)\n    ],\n)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Semantic%20Search%20Tutorials/#13","title":"1.3 \uc9c8\uc758 \uc608\uc2dc","text":"<pre><code>hits = client.query_points(\n    collection_name=\"my_books\",\n    query=encoder.encode(\"alien invasion\").tolist(),\n    limit=3,\n).points\n</code></pre> <p>\ud544\ud130\ub9c1 \uc608\uc2dc</p> <pre><code>hits = client.query_points(\n    \"my_books\",\n    query=encoder.encode(\"alien invasion\").tolist(),\n    query_filter=models.Filter(\n        must=[models.FieldCondition(key=\"year\",\n               range=models.Range(gte=2000))]\n    ),\n    limit=1,\n).points\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Semantic%20Search%20Tutorials/#2-sentence-transformers-qdrant","title":"2. Sentence Transformers + Qdrant\ub85c \ub274\ub7f4 \uac80\uc0c9 \uc11c\ube44\uc2a4 \uad6c\ucd95","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Semantic%20Search%20Tutorials/#21","title":"2.1 \ub370\uc774\ud130 \uc900\ube44","text":"<pre><code>wget https://storage.googleapis.com/generall-shared-data/startups_demo.json\npip install sentence-transformers numpy pandas tqdm\n</code></pre> <pre><code>from sentence_transformers import SentenceTransformer\nimport pandas as pd, numpy as np, json, tqdm\n\nmodel = SentenceTransformer(\"all-MiniLM-L6-v2\", device=\"cuda\")   # GPU \uc5c6\uc73c\uba74 cpu\ndf = pd.read_json(\"startups_demo.json\", lines=True)\nvectors = model.encode(\n    [f\"{r.alt}. {r.description}\" for r in df.itertuples()],\n    show_progress_bar=True,\n)\nnp.save(\"startup_vectors.npy\", vectors, allow_pickle=False)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Semantic%20Search%20Tutorials/#22-qdrant","title":"2.2 Qdrant \uc2e4\ud589","text":"<pre><code>docker pull qdrant/qdrant\ndocker run -p 6333:6333 -v $(pwd)/qdrant_storage:/qdrant/storage qdrant/qdrant\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Semantic%20Search%20Tutorials/#23","title":"2.3 \ubca1\ud130 \uc5c5\ub85c\ub4dc","text":"<pre><code>from qdrant_client import QdrantClient, models\n\nclient = QdrantClient(\"http://localhost:6333\")\nclient.create_collection(\n    \"startups\",\n    vectors_config=models.VectorParams(size=384, distance=models.Distance.COSINE),\n)\npayload_iter = map(json.loads, open(\"startups_demo.json\"))\nvectors = np.load(\"startup_vectors.npy\")\n\nclient.upload_collection(\n    \"startups\",\n    vectors=vectors,\n    payload=payload_iter,\n    batch_size=256,\n)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Semantic%20Search%20Tutorials/#24-fastapi","title":"2.4 FastAPI \uc11c\ube44\uc2a4","text":"<pre><code>from fastapi import FastAPI\nfrom neural_searcher import NeuralSearcher    # \uc790\uccb4 \ud074\ub798\uc2a4\n\napp = FastAPI()\nsearcher = NeuralSearcher(\"startups\")\n\n@app.get(\"/api/search\")\ndef search(q: str):\n    return {\"result\": searcher.search(q)}\n\n# \uc2e4\ud589: uvicorn service:app --reload\n</code></pre> <p><code>NeuralSearcher</code> \ud074\ub798\uc2a4\ub294 Sentence Transformer\ub85c \ucffc\ub9ac\ub97c \uc784\ubca0\ub529\ud558\uace0 <code>client.query_points</code>\ub85c \uac80\uc0c9\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Semantic%20Search%20Tutorials/#3-fastembed-qdrant","title":"3. FastEmbed + Qdrant\ub85c \ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9 \uc11c\ube44\uc2a4 \uad6c\ucd95","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Semantic%20Search%20Tutorials/#31","title":"3.1 \ud658\uacbd \uc124\uc815","text":"<pre><code>pip install \"qdrant-client[fastembed]&gt;=1.14.2\"  # fastembed&gt;=0.6.1 \ud3ec\ud568\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Semantic%20Search%20Tutorials/#32","title":"3.2 \uceec\ub809\uc158 \uad6c\uc131","text":"<pre><code>dense_vec_name  = \"dense\"\nsparse_vec_name = \"sparse\"\ndense_model     = \"sentence-transformers/all-MiniLM-L6-v2\"\nsparse_model    = \"prithivida/Splade_PP_en_v1\"\n\nclient.create_collection(\n    \"startups\",\n    vectors_config={\n        dense_vec_name: models.VectorParams(\n            size=client.get_embedding_size(dense_model),\n            distance=models.Distance.COSINE)\n    },\n    sparse_vectors_config={sparse_vec_name: models.SparseVectorParams()},\n)\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Semantic%20Search%20Tutorials/#33","title":"3.3 \uc5c5\ub85c\ub4dc \ubc0f \uc778\ud37c\ub7f0\uc2a4","text":"<p><code>client.upload_collection</code>\uc5d0 <code>models.Document(text, model=...)</code>\uc744 \uc0ac\uc6a9\ud558\uba74 FastEmbed\uac00 \uc790\ub3d9\uc73c\ub85c \ubc30\uce58\u00b7\ubcd1\ub82c \uc778\ucf54\ub529 \ud6c4 \uc5c5\ub85c\ub4dc\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Semantic%20Search%20Tutorials/#34","title":"3.4 \ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9 \uad6c\ud604","text":"<pre><code>search_result = client.query_points(\n    collection_name=\"startups\",\n    query=models.FusionQuery(fusion=models.Fusion.RRF),\n    prefetch=[\n        models.Prefetch(\n            query=models.Document(text=q, model=dense_model),\n            using=dense_vec_name,\n        ),\n        models.Prefetch(\n            query=models.Document(text=q, model=sparse_model),\n            using=sparse_vec_name,\n        ),\n    ],\n    limit=5,\n).points\n</code></pre> <p>RRF(Reciprocal Rank Fusion) \ub610\ub294 DBSF(Distribution-Based Score Fusion)\ub85c \ub450 \uacb0\uacfc\ub97c \ud569\uce5c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Semantic%20Search%20Tutorials/#4-hnsw","title":"4. \uac80\uc0c9 \ud488\uc9c8 \uce21\uc815 \ubc0f HNSW \ud29c\ub2dd","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Semantic%20Search%20Tutorials/#41","title":"4.1 \ud3c9\uac00 \uc9c0\ud45c","text":"<ul> <li> <p>precision@k: \uc0c1\uc704 k\uac1c \uacb0\uacfc \uc911 \uc815\ub2f5 \ube44\uc728</p> </li> <li> <p>\uc804\uccb4 \ud30c\uc774\ud504\ub77c\uc778 \ud3c9\uac00\ub294 MRR, nDCG \ub4f1\uc744 \uc0ac\uc6a9 \uac00\ub2a5</p> </li> <li> <p>ANN \uc54c\uace0\ub9ac\uc998 \uc790\uccb4 \ud3c9\uac00\ub294 precision@k\uac00 \uc801\ud569\ud558\ub2e4.</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Semantic%20Search%20Tutorials/#42-exact","title":"4.2 Exact \ubaa8\ub4dc\ub85c \uae30\uc900\uac12 \ud655\ubcf4","text":"<pre><code>ann_hits = client.query_points(..., limit=k).points\nknn_hits = client.query_points(\n    ..., limit=k,\n    search_params=models.SearchParams(exact=True)\n).points\nprecision = len({h.id for h in ann_hits} &amp; {h.id for h in knn_hits}) / k\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Semantic%20Search%20Tutorials/#43-hnsw","title":"4.3 HNSW \ud30c\ub77c\ubbf8\ud130 \uc870\uc815","text":"<p>\uae30\ubcf8\uac12 <code>m=16</code>, <code>ef_construct=100</code>\uc774\ub2e4. \ud488\uc9c8\uc744 \ub192\uc774\uace0\uc790 \ud55c\ub2e4\uba74:</p> <pre><code>client.update_collection(\n    \"arxiv-titles\",\n    hnsw_config=models.HnswConfigDiff(m=32, ef_construct=200),\n)\n</code></pre> <p>\uc778\ub371\uc2f1 \uc644\ub8cc \ud6c4 precision@k\ub97c \ub2e4\uc2dc \uacc4\uc0b0\ud558\uc5ec \ud5a5\uc0c1 \uc5ec\ubd80\ub97c \ud655\uc778\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Semantic%20Search%20Tutorials/#5","title":"5. \uc885\ud569 \ub124\ud2b8\uc6cc\ud0b9\u00b7\uc6b4\uc601 \ud301","text":"<ul> <li> <p>\ucee8\ud14c\uc774\ub108\u00b7\ud074\ub7ec\uc2a4\ud130 \ud658\uacbd\uc5d0\uc11c\ub294 \ud3ec\ud2b8 6333(HTTP), 6334(gRPC), 6335(\ud074\ub7ec\uc2a4\ud130 \ud1b5\uc2e0)\uc744 \ubaa8\ub450 \uc5f4\uc5b4\uc57c \ud55c\ub2e4.</p> </li> <li> <p>\ub2e4\uc911 \ub178\ub4dc\uc77c \uacbd\uc6b0 \uac01 \uc778\uc2a4\ud134\uc2a4\uac00 \ub3d9\uc77c \ud3ec\ud2b8\ub85c \uc0c1\ud638 \ud1b5\uc2e0 \uac00\ub2a5\ud574\uc57c \ud558\uba70, \ud074\ub77c\uc774\uc5b8\ud2b8\ub294 6333 \ub610\ub294 6334\uc5d0 \uc811\uadfc\ud558\uba74 \ub41c\ub2e4.</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Semantic%20Search%20Tutorials/#6","title":"6. \uacb0\ub860 \ubc0f \ub2e4\uc74c \ub2e8\uacc4","text":"<ul> <li> <p>Sentence Transformers \ub610\ub294 FastEmbed\ub97c \ud1b5\ud574 Dense\u00b7Sparse\u2027Multivector \uc784\ubca0\ub529\uc744 \uc0dd\uc131\ud560 \uc218 \uc788\ub2e4.</p> </li> <li> <p>Qdrant\ub294 \uba54\ubaa8\ub9ac\u00b7\uc628\ub514\uc2a4\ud06c \uc800\uc7a5\uc18c, HNSW\u00b7Sparse \uc778\ub371\uc2a4\ub97c \uc870\ud569\ud558\uc5ec \uace0\uc131\ub2a5 \ubca1\ud130 \uac80\uc0c9\uc744 \uc81c\uacf5\ud55c\ub2e4.</p> </li> <li> <p>\ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9\uc740 RRF\u00b7DBSF \ub4f1 \uc735\ud569 \uae30\ubc95\uc73c\ub85c \uc758\ubbf8\u00b7\ud0a4\uc6cc\ub4dc \uc591\ucabd\uc744 \ubaa8\ub450 \uc7a1\ub294\ub2e4.</p> </li> <li> <p>Exact \ubaa8\ub4dc\uc640 precision@k \uce21\uc815\uc744 \ud1b5\ud574 ANN \uac80\uc0c9 \ud488\uc9c8\uc744 \uc218\uce58\ud654\ud558\uace0, <code>m</code>\u00b7<code>ef_construct</code> \ud30c\ub77c\ubbf8\ud130\ub85c \uc815\ubc00\ud558\uac8c \uc870\uc815\ud560 \uc218 \uc788\ub2e4.</p> </li> </ul> <p>\uc774\uc81c \uac04\ub2e8\ud55c \ub370\ubaa8\ubd80\ud130 \uc2e4\uc11c\ube44\uc2a4\uc6a9 \ub274\ub7f4\u00b7\ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9 API, \uadf8\ub9ac\uace0 \uc131\ub2a5 \ud3c9\uac00\u00b7\ud29c\ub2dd\uae4c\uc9c0 \uc77c\ub828\uc758 \ud750\ub984\uc744 \ubaa8\ub450 \uc775\ud614\ub2e4. \uc2e4\uc81c \ud504\ub85c\uc81d\ud2b8\uc5d0 \ub9de\ucd94\uc5b4 \ub370\uc774\ud130 \uc804\ucc98\ub9ac, \ud544\ud130 \uc778\ub371\uc2a4, \uba40\ud2f0\ud14c\ub10c\uc2dc, \ubc30\uce58 \uc5c5\ub85c\ub4dc, \uc7ac\ub7ad\ud0b9 \ub4f1\uc744 \uc870\ud569\ud558\uba74 \ubcf4\ub2e4 \uacac\uace0\ud55c \ubca1\ud130 \uae30\ubc18 \uac80\uc0c9 \uc2dc\uc2a4\ud15c\uc744 \uad6c\ucd95\ud560 \uc218 \uc788\uc744 \uac83\uc774\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Similarity%20Search/","title":"Similarity Search","text":"<p>Qdrant\uc5d0\uc11c\uc758 \uc720\uc0ac\ub3c4 \uac80\uc0c9(Similarity Search)\uc740 \ubca1\ud130 \uc720\uc0ac\ub3c4 \uae30\ubc18 \uac80\uc0c9\uc758 \ud575\uc2ec \uae30\ub2a5\uc774\ub2e4. </p> <p>\uc2e0\uacbd\ub9dd \uae30\ubc18 \uc784\ubca0\ub529 \ubaa8\ub378\uc774 \uc785\ub825 \ub370\uc774\ud130\ub97c \ubca1\ud130\ub85c \ubcc0\ud658\ud55c \ub4a4, \ud574\ub2f9 \ubca1\ud130 \uac04\uc758 \uc720\uc0ac\ub3c4\ub97c \ube44\uad50\ud558\uc5ec \uac00\uc7a5 \uac00\uae4c\uc6b4 \uac1d\uccb4\ub97c \ucc3e\uc544\ub0b8\ub2e4. </p> <p>Qdrant\ub294 \uc774 \uacfc\uc815\uc744 \uace0\uc18d\uc73c\ub85c \ucc98\ub9ac\ud558\uae30 \uc704\ud55c \ub2e4\uc591\ud55c API\uc640 \ucd5c\uc801\ud654 \uae30\ubc95\uc744 \uc81c\uacf5\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Similarity%20Search/#_1","title":"\uc720\uc0ac\ub3c4 \uac80\uc0c9\uc758 \uac1c\uc694","text":"<p>\ubca1\ud130 \uae30\ubc18 \uc720\uc0ac\ub3c4 \uac80\uc0c9\uc740 k-\ucd5c\uadfc\uc811 \uc774\uc6c3(k-NN) \ubc29\uc2dd\uc5d0 \uae30\ubc18\ud558\uba70, \uc2e4\uc81c \uc720\uc0ac\ud55c \uac1d\uccb4(\ud14d\uc2a4\ud2b8, \uc774\ubbf8\uc9c0, \uc624\ub514\uc624 \ub4f1)\ub294 \ubca1\ud130 \uacf5\uac04\uc0c1\uc5d0\uc11c\ub3c4 \uc11c\ub85c \uac00\uae4c\uc6b4 \uc704\uce58\uc5d0 \uc788\uac8c \ub41c\ub2e4. Qdrant\ub294 \uc774\ub7ec\ud55c \uc720\uc0ac\ub3c4 \uae30\ubc18 \uac80\uc0c9\uc744 \ub2e8\uc77c API(Query API)\ub85c \ud1b5\ud569\ud558\uc5ec \uc81c\uacf5\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Similarity%20Search/#query-api","title":"Query API","text":"<p><code>/points/query</code> \uc5d4\ub4dc\ud3ec\uc778\ud2b8\ub294 Qdrant\uc5d0\uc11c \ub2e4\uc591\ud55c \uac80\uc0c9 \uae30\ub2a5\uc744 \uc218\ud589\ud558\ub294 \ud575\uc2ec \uc778\ud130\ud398\uc774\uc2a4\uc774\ub2e4. \uc8fc\uc694 \uc9c0\uc6d0 \uae30\ub2a5\uc740 \ub2e4\uc74c\uacfc \uac19\ub2e4.</p> <ul> <li> <p>Nearest Neighbors Search: \uc77c\ubc18\uc801\uc778 \ubca1\ud130 \uc720\uc0ac\ub3c4 \uac80\uc0c9 (k-NN)</p> </li> <li> <p>Search by ID: \uae30\uc874\uc5d0 \uc800\uc7a5\ub41c \ud3ec\uc778\ud2b8\uc758 \ubca1\ud130\ub97c \uae30\uc900\uc73c\ub85c \uac80\uc0c9</p> </li> <li> <p>Recommendations: \uae0d\uc815/\ubd80\uc815 \uc608\uc2dc\ub97c \ud65c\uc6a9\ud55c \ucd94\ucc9c</p> </li> <li> <p>Discovery Search: \ucee8\ud14d\uc2a4\ud2b8 \uae30\ubc18 1\ud68c\uc131 \ud559\uc2b5 \uac80\uc0c9</p> </li> <li> <p>Scroll: \ubaa8\ub4e0 \ud3ec\uc778\ud2b8\ub97c \uc870\uac74 \uae30\ubc18\uc73c\ub85c \ud398\uc774\uc9d5 \uc870\ud68c</p> </li> <li> <p>Grouping: \ud2b9\uc815 \ud544\ub4dc\ub97c \uae30\uc900\uc73c\ub85c \uacb0\uacfc\ub97c \uadf8\ub8f9\ud654</p> </li> <li> <p>Hybrid Search: \ub2e4\uc591\ud55c \uac80\uc0c9 \uc870\uac74\uc744 \uacb0\ud569\ud55c \ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9</p> </li> <li> <p>Random Sampling: \uc784\uc758 \uc0d8\ud50c\ub9c1</p> </li> <li> <p>Multi-Stage Search: \ub300\uaddc\ubaa8 \uc784\ubca0\ub529\uc744 \uc704\ud55c \uac80\uc0c9 \ucd5c\uc801\ud654</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Similarity%20Search/#_2","title":"\uae30\ubcf8 \uc720\uc0ac\ub3c4 \uac80\uc0c9","text":"<pre><code>POST /collections/{collection_name}/points/query\n{\n  \"query\": [0.2, 0.1, 0.9, 0.7]\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Similarity%20Search/#id","title":"ID \uae30\ubc18 \uac80\uc0c9","text":"<pre><code>POST /collections/{collection_name}/points/query\n{\n  \"query\": \"43cf51e2-8777-4f52-bc74-c2cbde0c8b04\"\n}\n</code></pre> <p>\ud574\ub2f9 ID\uc5d0 \uc800\uc7a5\ub41c \ubca1\ud130\ub97c \uae30\uc900\uc73c\ub85c \uc720\uc0ac\ub3c4 \uac80\uc0c9\uc744 \uc218\ud589\ud55c\ub2e4. <code>using</code> \ud30c\ub77c\ubbf8\ud130\ub97c \uc9c0\uc815\ud558\uba74 Named Vector \uc0ac\uc6a9\uc774 \uac00\ub2a5\ud558\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Similarity%20Search/#metric","title":"\uac80\uc0c9 \uba54\ud2b8\ub9ad(Metric)","text":"<p>Qdrant\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 \uc720\uc0ac\ub3c4 \uba54\ud2b8\ub9ad\uc744 \uc9c0\uc6d0\ud55c\ub2e4.</p> <ul> <li> <p>Dot Product</p> </li> <li> <p>Cosine Similarity (\uae30\ubcf8\uac12)</p> </li> <li> <p>Euclidean Distance</p> </li> <li> <p>Manhattan Distance (v1.7\ubd80\ud130 \uc9c0\uc6d0)</p> </li> </ul> <p>Cosine \uba54\ud2b8\ub9ad\uc740 \ubca1\ud130\ub97c \uc815\uaddc\ud654\ud55c \ud6c4 Dot Product \ubc29\uc2dd\uc73c\ub85c \uacc4\uc0b0\ub418\uba70, \uc774\ub294 SIMD \ucd5c\uc801\ud654\ub97c \ud1b5\ud574 \ube60\ub974\uac8c \uc218\ud589\ub41c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Similarity%20Search/#_3","title":"\ud544\ud130\ub9c1\uc744 \ud3ec\ud568\ud55c \uac80\uc0c9 \uc608\uc2dc","text":"<pre><code>POST /collections/{collection_name}/points/query\n{\n  \"query\": [0.2, 0.1, 0.9, 0.79],\n  \"filter\": {\n    \"must\": [\n      { \"key\": \"city\", \"match\": { \"value\": \"London\" } }\n    ]\n  },\n  \"params\": {\n    \"hnsw_ef\": 128,\n    \"exact\": false\n  },\n  \"limit\": 3\n}\n</code></pre> <ul> <li> <p><code>limit</code>: \uacb0\uacfc \uc218 \uc81c\ud55c</p> </li> <li> <p><code>hnsw_ef</code>: HNSW \ud0d0\uc0c9 \uae4a\uc774</p> </li> <li> <p><code>exact</code>: true\ub85c \uc124\uc815 \uc2dc \uc804\uccb4 \uc2a4\uce94\uc744 \uc218\ud589\ud558\uc5ec \uc815\ud655\ud55c \uacb0\uacfc\ub97c \ubc18\ud658</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Similarity%20Search/#named-vector","title":"Named Vector \uac80\uc0c9","text":"<pre><code>POST /collections/{collection_name}/points/query\n{\n  \"query\": [0.2, 0.1, 0.9, 0.7],\n  \"using\": \"image\",\n  \"limit\": 3\n}\n</code></pre> <p>\uc5ec\ub7ec \uac1c\uc758 Named Vector\uac00 \uc874\uc7ac\ud560 \uacbd\uc6b0 <code>using</code>\uc73c\ub85c \uba85\uc2dc\uc801\uc73c\ub85c \uc9c0\uc815\ud574\uc57c \ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Similarity%20Search/#sparse-vector","title":"Sparse Vector \uac80\uc0c9","text":"<pre><code>POST /collections/{collection_name}/points/query\n{\n  \"query\": {\n    \"indices\": [1, 3, 5, 7],\n    \"values\": [0.1, 0.2, 0.3, 0.4]\n  },\n  \"using\": \"text\"\n}\n</code></pre> <p>\ud76c\uc18c \ubca1\ud130 \uac80\uc0c9\uc740 \ud56d\uc0c1 \uc815\ud655\ud55c \ub9e4\uce6d\uc744 \uc218\ud589\ud558\uba70, Dot Product\ub9cc\uc744 \uc0ac\uc6a9\ud55c\ub2e4. \uc720\uc0ac\ub3c4 \uacc4\uc0b0 \uc18d\ub3c4\ub294 \ucffc\ub9ac \ubca1\ud130\uc758 \ube44\uc81c\ub85c \uac12 \uac1c\uc218\uc5d0 \ube44\ub840\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Similarity%20Search/#_4","title":"\uc720\uc0ac\ub3c4 \uc810\uc218 \ud544\ud130\ub9c1","text":"<pre><code>{\n  \"score_threshold\": 0.75\n}\n</code></pre> <p>\uac80\uc0c9 \uacb0\uacfc\uc5d0\uc11c \uc720\uc0ac\ub3c4 \uc810\uc218\uac00 \uae30\uc900 \uc774\ud558\uc778 \uacb0\uacfc\ub294 \uc81c\uc678\ub41c\ub2e4. \uba54\ud2b8\ub9ad\uc5d0 \ub530\ub77c \uc758\ubbf8\ub294 \ub2ec\ub77c\uc9c0\uba70, \uc608\ub97c \ub4e4\uc5b4 \uc720\ud074\ub9ac\ub4dc \uac70\ub9ac\uc758 \uacbd\uc6b0 \uac12\uc774 \ud074\uc218\ub85d \uba40\ub2e4\uace0 \ud310\ub2e8\ud558\uc5ec \uc81c\uac70\ub41c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Similarity%20Search/#_5","title":"\ubca1\ud130 \ubc0f \ud398\uc774\ub85c\ub4dc \ubc18\ud658","text":"<p>\uae30\ubcf8\uc801\uc73c\ub85c \uac80\uc0c9 \uacb0\uacfc\ub294 ID\uc640 \uc810\uc218\ub9cc\uc744 \ubc18\ud658\ud55c\ub2e4. \ubca1\ud130 \ubc0f \ud398\uc774\ub85c\ub4dc\ub3c4 \ud568\uaed8 \uac00\uc838\uc624\ub824\uba74 \ub2e4\uc74c\uacfc \uac19\uc774 \uc124\uc815\ud55c\ub2e4.</p> <pre><code>{\n  \"with_vectors\": true,\n  \"with_payload\": true\n}\n</code></pre> <p>\ud2b9\uc815 \ud398\uc774\ub85c\ub4dc\ub9cc \ud3ec\ud568\ud558\uac70\ub098 \uc81c\uc678\ud560 \uc218\ub3c4 \uc788\ub2e4.</p> <pre><code>\"with_payload\": [\"city\", \"town\"]\n</code></pre> <p>\ub610\ub294</p> <pre><code>\"with_payload\": {\n  \"exclude\": [\"city\"]\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Similarity%20Search/#_6","title":"\ubc30\uce58 \uac80\uc0c9","text":"<p>\ub2e4\uc218\uc758 \uac80\uc0c9 \ucffc\ub9ac\ub97c \ud55c \ubc88\uc5d0 \uc218\ud589\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>POST /collections/{collection_name}/points/query/batch\n{\n  \"searches\": [\n    { \"query\": [...], \"filter\": {...}, \"limit\": 3 },\n    { \"query\": [...], \"filter\": {...}, \"limit\": 3 }\n  ]\n}\n</code></pre> <p>\ud544\ud130\uac00 \ub3d9\uc77c\ud55c \uacbd\uc6b0 \ub0b4\ubd80\uc801\uc73c\ub85c \uacf5\uc720 \ucd5c\uc801\ud654\ub97c \ud1b5\ud574 \ucc98\ub9ac \uc18d\ub3c4\ub97c \ud5a5\uc0c1\uc2dc\ud0ac \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Similarity%20Search/#_7","title":"\uac80\uc0c9 \uacb0\uacfc \ud398\uc774\uc9c0\ub124\uc774\uc158","text":"<pre><code>{\n  \"limit\": 10,\n  \"offset\": 100\n}\n</code></pre> <p>\ud574\ub2f9 \uc124\uc815\uc740 11\ud398\uc774\uc9c0(101\ubc88\uc9f8)\ubd80\ud130 10\uac1c \uacb0\uacfc\ub97c \ubc18\ud658\ud55c\ub2e4. \ub2e4\ub9cc HNSW \uae30\ubc18 \uac80\uc0c9\uc758 \ud2b9\uc131\uc0c1 \ud070 offset\uc740 \uc131\ub2a5 \uc800\ud558\ub97c \ucd08\ub798\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Similarity%20Search/#_8","title":"\uadf8\ub8f9 \uae30\ubc18 \uac80\uc0c9","text":"<p><code>document_id</code> \ub4f1 \ud2b9\uc815 \ud544\ub4dc\ub97c \uae30\uc900\uc73c\ub85c \uacb0\uacfc\ub97c \uadf8\ub8f9\ud654\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>POST /collections/{collection_name}/points/query/groups\n{\n  \"query\": [1.1],\n  \"group_by\": \"document_id\",\n  \"limit\": 4,\n  \"group_size\": 2\n}\n</code></pre> <ul> <li> <p><code>limit</code>: \ucd5c\ub300 \uadf8\ub8f9 \uc218</p> </li> <li> <p><code>group_size</code>: \uac01 \uadf8\ub8f9 \ub0b4 \ud3ec\uc778\ud2b8 \uc218</p> </li> </ul> <p>\ubc30\uc5f4 \ud544\ub4dc\ub97c \uae30\uc900\uc73c\ub85c \uadf8\ub8f9\ud654\ud560 \uacbd\uc6b0, \ud574\ub2f9 \ud3ec\uc778\ud2b8\ub294 \uc5ec\ub7ec \uadf8\ub8f9\uc5d0 \uc911\ubcf5 \ud3ec\ud568\ub420 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Similarity%20Search/#_9","title":"\uadf8\ub8f9\ud654 + \ub8e9\uc5c5","text":"<p>\uc911\ubcf5 \ud398\uc774\ub85c\ub4dc\ub97c \uc904\uc774\uae30 \uc704\ud574, \ubb38\uc11c \uc218\uc900 \uba54\ud0c0\ub370\uc774\ud130\ub97c \ubcc4\ub3c4 \uceec\ub809\uc158\uc5d0 \uc800\uc7a5\ud558\uace0 \uadf8\ub8f9\ubcc4\ub85c <code>lookup</code>\uc744 \ud1b5\ud574 \ucc38\uc870\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>\"with_lookup\": {\n  \"collection\": \"documents\",\n  \"with_payload\": [\"title\", \"text\"],\n  \"with_vectors\": false\n}\n</code></pre> <p>\uacb0\uacfc\ub294 \uadf8\ub8f9 \ub0b4\ubd80\uc5d0 <code>lookup</code> \ud544\ub4dc\ub85c \ud3ec\ud568\ub41c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Similarity%20Search/#_10","title":"\ub79c\ub364 \uc0d8\ud50c\ub9c1","text":"<p>v1.11.0\ubd80\ud130\ub294 \ubb34\uc791\uc704 \ud3ec\uc778\ud2b8 \uc0d8\ud50c\ub9c1\uc774 \uac00\ub2a5\ud558\ub2e4.</p> <pre><code>POST /collections/{collection_name}/points/query\n{\n  \"query\": { \"sample\": \"random\" }\n}\n</code></pre> <p>\ub514\ubc84\uae45, \ud14c\uc2a4\ud2b8, \ud0d0\uc0c9 \ucd08\uae30\ud654 \ub4f1\uc5d0 \uc720\uc6a9\ud558\uac8c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Similarity%20Search/#query-planning","title":"\ucffc\ub9ac \uacc4\ud68d(Query Planning)","text":"<p>Qdrant\ub294 \uac80\uc0c9 \uc2dc \ucffc\ub9ac \uc870\uac74\uacfc \uc778\ub371\uc2a4 \uc0c1\ud0dc\uc5d0 \ub530\ub77c \uc790\ub3d9\uc73c\ub85c \uc2e4\ud589 \uc804\ub7b5\uc744 \uacb0\uc815\ud55c\ub2e4. \uc774 \uacfc\uc815\uc740 Query Planner\uc5d0 \uc758\ud574 \uc218\ud589\ub41c\ub2e4. \uc8fc\uc694 \uc6d0\uce59\uc740 \ub2e4\uc74c\uacfc \uac19\ub2e4.</p> <ul> <li> <p>\uc138\uadf8\uba3c\ud2b8(segment) \ub2e8\uc704\ub85c \ub3c5\ub9bd\uc801\uc73c\ub85c \uacc4\ud68d \uc218\ub9bd</p> </li> <li> <p>\ud3ec\uc778\ud2b8 \uc218\uac00 \uc801\uc73c\uba74 \uc804\uccb4 \uc2a4\uce94 \uc0ac\uc6a9</p> </li> <li> <p>\ud544\ud130 \uc870\uac74\uc758 cardinality(\uacb0\uacfc \uc218 \uc608\uce21\uac12)\uc5d0 \ub530\ub77c \uc801\uc808\ud55c \uc778\ub371\uc2a4 \uc120\ud0dd</p> </li> <li> <p>\uac00\ub2a5\ud55c \uacbd\uc6b0 Payload Index \uc6b0\uc120 \uc0ac\uc6a9</p> </li> </ul> <p>\uc774 \uc804\ub7b5\uc740 \uc124\uc815 \ud30c\uc77c\uc744 \ud1b5\ud574 \uc870\uc815 \uac00\ub2a5\ud558\uba70, \uceec\ub809\uc158\ubcc4\ub85c \uac1c\ubcc4 \uc124\uc815\ub3c4 \uac00\ub2a5\ud558\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Similarity%20Search/#_11","title":"\uacb0\ub860","text":"<p>Qdrant\uc758 Similarity Search\ub294 \ub2e8\uc21c\ud55c k-NN \uac80\uc0c9\uc744 \ub118\uc5b4\uc11c, \ud544\ud130\ub9c1, \uc815\ub82c, \uadf8\ub8f9\ud654, \ubc30\uce58 \ucc98\ub9ac \ub4f1 \ub2e4\uc591\ud55c \uae30\ub2a5\uc744 \ud3ec\ud568\ud558\uace0 \uc788\ub2e4. </p> <p>\uc815\ud655\uc131\uacfc \uc18d\ub3c4 \uac04\uc758 \uade0\ud615\uc744 \uace0\ub824\ud558\uc5ec \ud544\uc694\ud55c \uac80\uc0c9 \uae30\ub2a5\uc744 \uc870\ud569\ud560 \uc218 \uc788\uc73c\uba70, \ubca1\ud130 \uae30\ubc18 \uac80\uc0c9 \uc2dc\uc2a4\ud15c\uc744 \uc124\uacc4\ud560 \ub54c Qdrant\uc758 Query API\ub294 \ub9e4\uc6b0 \uac15\ub825\ud55c \ub3c4\uad6c\uac00 \ub420 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Static%20Embedding%20%EB%8B%A4%EC%8B%9C%20%EC%A3%BC%EB%AA%A9%ED%95%B4%EC%95%BC%20%ED%95%A0%EA%B9%8C/","title":"Static Embedding \ub2e4\uc2dc \uc8fc\ubaa9\ud574\uc57c \ud560\uae4c","text":"<p>\ucd5c\uadfc \uc790\uc6d0-\uc81c\uc57d \ud658\uacbd\uc5d0\uc11c \uc815\uc801 \uc784\ubca0\ub529(static embedding)\uc774 \uc7ac\uc870\uba85\ub418\uace0 \uc788\ub2e4. \ud2b8\ub79c\uc2a4\ud3ec\uba38 \uacc4\uc5f4 \ubaa8\ub378\uc774 \uc131\ub2a5 \uba74\uc5d0\uc11c \uc6b0\uc704\ub97c \uc810\ud558\uace0 \uc788\uc74c\uc5d0\ub3c4, \uc815\uc801 \uc784\ubca0\ub529\uc740 \uc18d\ub3c4\u00b7\uba54\ubaa8\ub9ac \uc774\uc810\uc744 \uc55e\uc138\uc6cc \uc801\uc9c0 \uc54a\uc740 \ud488\uc9c8 \uc190\uc2e4\ub9cc\uc73c\ub85c\ub3c4 \ucda9\ubd84\ud788 \uc2e4\uc6a9\uc801\uc784\uc744 \ubcf4\uc5ec \uc8fc\uace0 \uc788\ub2e4. Qdrant \uad00\uc810\uc5d0\uc11c \uadf8 \ud65c\uc6a9 \uac00\ub2a5\uc131\uacfc \uc2e4\ud5d8 \uacb0\uacfc\ub97c \uc815\ub9ac\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Static%20Embedding%20%EB%8B%A4%EC%8B%9C%20%EC%A3%BC%EB%AA%A9%ED%95%B4%EC%95%BC%20%ED%95%A0%EA%B9%8C/#1","title":"1. \uc815\uc801 \uc784\ubca0\ub529\uacfc \ud2b8\ub79c\uc2a4\ud3ec\uba38 \uc784\ubca0\ub529\uc758 \ucc28\uc774","text":"\uad6c\ubd84 \ud2b8\ub79c\uc2a4\ud3ec\uba38 \uae30\ubc18 \uc784\ubca0\ub529 \uc815\uc801 \uc784\ubca0\ub529 \ubca1\ud130 \uc0dd\uc131 \ubc29\uc2dd \uc785\ub825 \ubb38\uc7a5 \uc804\uccb4\ub97c \uc778\ucf54\ub529\ud574 \ubb38\ub9e5 \uae30\ubc18 \ubca1\ud130 \uc0b0\ucd9c \uac01 \ud1a0\ud070(\ub610\ub294 \ub2e8\uc5b4)\uc744 \uace0\uc815 \ubca1\ud130\ub85c \ub9e4\ud551, \ubb38\uc7a5 \ubca1\ud130\ub294 \uac04\ub2e8\ud55c \uacb0\ud569(\ud3c9\uade0 \ub4f1) \uc7a5\uc810 \ub3d9\uc74c\uc774\uc758\uc5b4\ub97c \ub9e5\ub77d\uc5d0 \ub530\ub77c \uad6c\ubd84\ucd5c\uace0 \uc218\uc900 \uac80\uc0c9 \uc131\ub2a5 \ubaa8\ub378 \ud30c\ub77c\ubbf8\ud130 \uc218\u00b7\uba54\ubaa8\ub9ac\u00b7\uc5f0\uc0b0\ub7c9\uc774 \uc791\uc74cCPU \ud658\uacbd\uc5d0\uc11c\ub3c4 \uace0\uc18d \ub2e8\uc810 \ucd94\ub860 \uc2dc\uc5d0\ub3c4 GPU \uc758\uc874\uc774 \ub192\uace0 \ube44\uc6a9 \ubd80\ub2f4 \ubb38\ub9e5 \uc815\ubcf4\uac00 \uc81c\ud55c\uc801 \u2192 \ud488\uc9c8 \uc5f4\uc138"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Static%20Embedding%20%EB%8B%A4%EC%8B%9C%20%EC%A3%BC%EB%AA%A9%ED%95%B4%EC%95%BC%20%ED%95%A0%EA%B9%8C/#2","title":"2. \uc815\uc801 \uc784\ubca0\ub529\uc758 \ubd80\ud65c \ubc30\uacbd","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Static%20Embedding%20%EB%8B%A4%EC%8B%9C%20%EC%A3%BC%EB%AA%A9%ED%95%B4%EC%95%BC%20%ED%95%A0%EA%B9%8C/#21-model2vec-2024-10","title":"2.1 model2vec: 2024\ub144 10\uc6d4 \ubc1c\ud45c","text":"<ul> <li> <p>MinishLab\uc758 model2vec \uae30\ubc95</p> <ul> <li> <p>\ud2b8\ub79c\uc2a4\ud3ec\uba38 Sentence-T5\ub97c distillation\ud558\uc5ec \ubaa8\ub378 \ud06c\uae30 1/15, \ucd94\ub860 \uc18d\ub3c4 \ucd5c\ub300 500\ubc30 \ub2ec\uc131</p> </li> <li> <p>MTEB \ubca4\uce58\ub9c8\ud06c\uc5d0\uc11c \uc0c1\uc704 80% \uc774\uc0c1\uc758 \uc131\ub2a5 \uc720\uc9c0</p> </li> </ul> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Static%20Embedding%20%EB%8B%A4%EC%8B%9C%20%EC%A3%BC%EB%AA%A9%ED%95%B4%EC%95%BC%20%ED%95%A0%EA%B9%8C/#22-hugging-face","title":"2.2 Hugging Face\uc758 \uacf5\uac1c \ud30c\uc774\ud504\ub77c\uc778","text":"<ul> <li> <p>Tom Aarsen (HF \ube14\ub85c\uadf8, 2024-12)</p> <ul> <li> <p>Sentence Transformers\ub85c \uc0ac\uc6a9\uc790 \ub9de\ucda4\ud615 \uc815\uc801 \ubaa8\ub378\uc744 \uc190\uc27d\uac8c \ud559\uc2b5</p> </li> <li> <p>\uc608\uc2dc \ubaa8\ub378 <code>static-retrieval-mrl-en-v1</code>:</p> <ul> <li> <p>1,024\ucc28\uc6d0, Matryoshka Representation Learning(MRL) \uc801\uc6a9</p> </li> <li> <p>SOTA \ub300\ube44 \uc57d 85% \uc131\ub2a5\uc5d0 \uc218\ubc31 \ubc30 \ube60\ub978 \uc778\ucf54\ub529</p> </li> </ul> </li> </ul> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Static%20Embedding%20%EB%8B%A4%EC%8B%9C%20%EC%A3%BC%EB%AA%A9%ED%95%B4%EC%95%BC%20%ED%95%A0%EA%B9%8C/#3-qdrant","title":"3. Qdrant\uc5d0\uc11c\uc758 \ud65c\uc6a9","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Static%20Embedding%20%EB%8B%A4%EC%8B%9C%20%EC%A3%BC%EB%AA%A9%ED%95%B4%EC%95%BC%20%ED%95%A0%EA%B9%8C/#31","title":"3.1 \ubca1\ud130 \uc800\uc7a5\u00b7\uac80\uc0c9","text":"<pre><code>from sentence_transformers import SentenceTransformer\nfrom qdrant_client import QdrantClient, models\nimport uuid\n\nmodel  = SentenceTransformer(\"sentence-transformers/static-retrieval-mrl-en-v1\")\nclient = QdrantClient(\"http://localhost:6333\")\n\nclient.create_collection(\n    \"my_collection\",\n    vectors_config=models.VectorParams(size=1024, distance=models.Distance.COSINE),\n)\n\nclient.upsert(\n    \"my_collection\",\n    points=[\n        models.PointStruct(\n            id=uuid.uuid4().hex,\n            vector=model.encode(\"Hello, world!\"),\n            payload={\"text\": \"Hello, world!\"}\n        )\n    ],\n)\n</code></pre> <ul> <li> <p>\uac80\uc0c9 \uc18d\ub3c4 \uc790\uccb4\ub294 \ubca1\ud130 \ucc28\uc6d0 \uc218\u00b7\uc778\ub371\uc2a4 \uad6c\uc870\uc5d0 \uc88c\uc6b0\ub418\uba70 \ud2b8\ub79c\uc2a4\ud3ec\uba38\uc640 \ub3d9\uc77c</p> </li> <li> <p>\uc778\ucf54\ub529 \uc18d\ub3c4\ub294 CPU \ud658\uacbd \uae30\uc900 \ucd5c\ub300 \uc218\ubc31 \ubc30 \ud5a5\uc0c1 \u2192 \ub300\uaddc\ubaa8 \ub370\uc774\ud130\uc14b \uc804\ucc98\ub9ac \uc2dc\uac04\u00b7\ube44\uc6a9 \uc808\uac10</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Static%20Embedding%20%EB%8B%A4%EC%8B%9C%20%EC%A3%BC%EB%AA%A9%ED%95%B4%EC%95%BC%20%ED%95%A0%EA%B9%8C/#32-quantization","title":"3.2 \uc591\uc790\ud654(Quantization) \uc2e4\ud5d8","text":"BeIR \uc11c\ube0c\uc14b \uc6d0\ubcf8 \ubca1\ud130 \ubc14\uc774\ub108\ub9ac \uc591\uc790\ud654 \ud6c4 SciFact 0.5935 0.5420 TREC-COVID 0.4428 0.4419 ArguAna 0.4439 0.4216 NFCorpus 0.3004 0.2803 <ul> <li> <p>Binary Quantization \uc801\uc6a9 \uc2dc \uba54\ubaa8\ub9ac\u00b7\uc18d\ub3c4 \uc774\uc810 \ud655\ubcf4</p> </li> <li> <p>\uc77c\ubd80 \ub370\uc774\ud130\uc14b\uc740 \ud488\uc9c8 \uac10\uc18c\uac00 \ubbf8\ubbf8\ud568 \u2192 \uc0ac\uc6a9 \ud658\uacbd\uc5d0 \ub530\ub77c \ucda9\ubd84\ud788 \uc2e4\uc6a9\uc801</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Static%20Embedding%20%EB%8B%A4%EC%8B%9C%20%EC%A3%BC%EB%AA%A9%ED%95%B4%EC%95%BC%20%ED%95%A0%EA%B9%8C/#4","title":"4. \ub3c4\uc785\uc744 \uace0\ub824\ud560 \ub9cc\ud55c \uc0ac\ub840","text":"\uc2dc\ub098\ub9ac\uc624 \uae30\ub300 \ud6a8\uacfc \ubaa8\ubc14\uc77c\u00b7\uc624\ud504\ub77c\uc778 \uc571 \uc791\uc740 \ubaa8\ub378\u00b7\ub0ae\uc740 \uc804\ub825 \uc18c\ubaa8\ub85c \uc628-\ub514\ubc14\uc774\uc2a4 \uc784\ubca0\ub529 \uac00\ub2a5 \ube0c\ub77c\uc6b0\uc800 \ud655\uc7a5(\uc6f9-GPU \ubd88\uac00 \ud658\uacbd) JS/\uc6f9\uc5b4\uc148\ube14\ub9ac\ub85c\ub3c4 \uc2e4\uc2dc\uac04 \uc784\ubca0\ub529 \uc218\ud589 \uc784\ubca0\ub514\ub4dc\u00b7IoT \ud55c\uc815\ub41c CPU\u00b7RAM\uc5d0\uc11c \uc720\uc0ac \ubb38\uc11c \uac80\uc0c9 \uc81c\uacf5 \ub300\uaddc\ubaa8 \ubc30\uce58 \uc804\ucc98\ub9ac \ubca1\ud130 \uc0dd\uc131 \ubcd1\ubaa9 \uc644\ud654, \uc778\ucf54\ub529 \ube44\uc6a9 \ub300\ud3ed \uc808\uac10"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Static%20Embedding%20%EB%8B%A4%EC%8B%9C%20%EC%A3%BC%EB%AA%A9%ED%95%B4%EC%95%BC%20%ED%95%A0%EA%B9%8C/#5","title":"5. \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5\uacfc \ud559\uc2b5","text":"<ul> <li> <p>Sentence Transformers \uc815\uc801 \ud559\uc2b5 \ud30c\uc774\ud504\ub77c\uc778</p> <ul> <li> <p>\ub300\ub7c9\uc758 \ub3c4\uba54\uc778 \ucf54\ud37c\uc2a4\uc640 \uad50\ucc28 \uc5d4\ucf54\ub354 \uc0dd\uc131 \ub77c\ubca8\ub85c \ud540\ud29c\ub2dd \uac00\ub2a5</p> </li> <li> <p>\ud559\uc2b5 \uc2dc\uac04\u00b7\uc790\uc6d0 \uc694\uad6c\uac00 \uc18c\ud615 \ud2b8\ub79c\uc2a4\ud3ec\uba38\ubcf4\ub2e4 \uc791\uc74c \u2192 \uc8fc\uae30\uc801 \uc7ac\ud559\uc2b5 \uc6a9\uc774</p> </li> </ul> </li> <li> <p>Matryoshka Embedding \uc801\uc6a9 \uc2dc, \ubca1\ud130 \ucc28\uc6d0 \ucd95\uc18c(1024 \u2192 256 \ub4f1) \ud6c4\uc5d0\ub3c4 \ud488\uc9c8 \uc720\uc9c0</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Static%20Embedding%20%EB%8B%A4%EC%8B%9C%20%EC%A3%BC%EB%AA%A9%ED%95%B4%EC%95%BC%20%ED%95%A0%EA%B9%8C/#6","title":"6. \uacb0\ub860","text":"<p>\uc815\uc801 \uc784\ubca0\ub529\uc740</p> <ul> <li> <p>\ud658\uacbd \uc81c\uc57d\uc774 \ud06c\uac70\ub098 GPU \ube44\uc6a9\uc744 \ucd5c\uc18c\ud654\ud574\uc57c \ud558\ub294 \uc0c1\ud669\uc5d0\uc11c \ud2b9\ud788 \uc720\uc6a9\ud558\ub2e4.</p> </li> <li> <p>\ucd5c\uc2e0 \uae30\ubc95(model2vec, MRL \ub4f1)\uc774 \uc801\uc6a9\ub418\uba74 \ud488\uc9c8 \uc190\uc2e4 \u2264 15% \uc218\uc900\uc73c\ub85c \uc218-\ubc31 \ubc30 \ube60\ub978 \uc778\ucf54\ub529\uc744 \uc2e4\ud604\ud55c\ub2e4.</p> </li> <li> <p>Qdrant\ub294 \ubcc4\ub3c4 \uc124\uc815 \uc5c6\uc774 \uc815\uc801 \ubca1\ud130\ub97c \uc800\uc7a5\u00b7\uac80\uc0c9\ud560 \uc218 \uc788\uc73c\uba70, \uc591\uc790\ud654\u00b7MRL\uc744 \ud1b5\ud574 \ucd94\uac00 \ucd5c\uc801\ud654\uac00 \uac00\ub2a5\ud558\ub2e4.</p> </li> </ul> <p>\ub530\ub77c\uc11c \u201c\uc18d\ub3c4\u00b7\uacbd\ub7c9\ud654 &gt; \ucd5c\uace0 \uc131\ub2a5\u201d \uc778 \ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c\ub294 \uc815\uc801 \uc784\ubca0\ub529\uc744 \uc801\uadf9 \uac80\ud1a0\ud560 \uac00\uce58\uac00 \ucda9\ubd84\ud558\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Storage/","title":"Storage","text":"<p>Qdrant\ub294 \uace0\uc131\ub2a5 \ubca1\ud130 \uac80\uc0c9\uc744 \uc9c0\uc6d0\ud558\uae30 \uc704\ud574 \uc138\uadf8\uba3c\ud2b8(segment) \uae30\ubc18\uc758 \uc800\uc7a5 \uad6c\uc870\ub97c \ucc44\ud0dd\ud558\uace0 \uc788\ub2e4. </p> <p>\uac01 \uc138\uadf8\uba3c\ud2b8\ub294 \ub3c5\ub9bd\uc801\uc778 \ubca1\ud130\uc640 \ud398\uc774\ub85c\ub4dc \uc800\uc7a5\uc18c, \uc778\ub371\uc2a4\ub97c \ubcf4\uc720\ud558\uba70, \uc774\ub97c \ud1b5\ud574 \uc77d\uae30/\uc4f0\uae30 \uc131\ub2a5\uacfc \ud655\uc7a5\uc131\uc744 \ub3d9\uc2dc\uc5d0 \ud655\ubcf4\ud55c\ub2e4. </p> <p>\uc774 \uae00\uc5d0\uc11c\ub294 Qdrant\uc758 \ubca1\ud130 \ubc0f \ud398\uc774\ub85c\ub4dc \uc800\uc7a5 \ubc29\uc2dd, \uba54\ubaa8\ub9ac/\ub514\uc2a4\ud06c \uc124\uc815, \uadf8\ub9ac\uace0 \ubc84\uc804 \uad00\ub9ac \ubc29\uc2dd\uc5d0 \ub300\ud574 \uc815\ub9ac\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Storage/#1-segment","title":"1. \uc138\uadf8\uba3c\ud2b8(Segment) \uad6c\uc870","text":"<p>Qdrant\uc5d0\uc11c \ud558\ub098\uc758 \uceec\ub809\uc158\uc740 \uc5ec\ub7ec \uac1c\uc758 \uc138\uadf8\uba3c\ud2b8\ub85c \uad6c\uc131\ub41c\ub2e4. \uac01 \uc138\uadf8\uba3c\ud2b8\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 \uad6c\uc131 \uc694\uc18c\ub97c \ud3ec\ud568\ud55c\ub2e4.</p> <ul> <li> <p>\ubca1\ud130 \uc800\uc7a5\uc18c</p> </li> <li> <p>\ud398\uc774\ub85c\ub4dc \uc800\uc7a5\uc18c</p> </li> <li> <p>\ubca1\ud130 \ubc0f \ud398\uc774\ub85c\ub4dc \uc778\ub371\uc2a4</p> </li> <li> <p>ID \ub9e4\ud37c (\ub0b4\ubd80 ID\uc640 \uc678\ubd80 ID \uac04\uc758 \ub9e4\ud551)</p> </li> </ul> <p>\uc138\uadf8\uba3c\ud2b8\ub294 appendable \ub610\ub294 non-appendable\ub85c \ub098\ub25c\ub2e4.</p> \uc138\uadf8\uba3c\ud2b8 \uc720\ud615 \uc124\uba85 appendable \ub370\uc774\ud130 \ucd94\uac00, \uc218\uc815, \uc0ad\uc81c \uac00\ub2a5 non-appendable \uc77d\uae30\uc640 \uc0ad\uc81c\ub9cc \uac00\ub2a5 (\ubcf4\ud1b5 \uc555\ucd95/\ucd5c\uc801\ud654\ub41c \uc0c1\ud0dc) <p>\ud558\ub098\uc758 \uceec\ub809\uc158\uc5d0\ub294 \ubc18\ub4dc\uc2dc \ucd5c\uc18c \ud558\ub098 \uc774\uc0c1\uc758 <code>appendable</code> \uc138\uadf8\uba3c\ud2b8\uac00 \uc874\uc7ac\ud574\uc57c \ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Storage/#2-vector-storage","title":"2. \ubca1\ud130 \uc800\uc7a5 \ubc29\uc2dd (Vector Storage)","text":"<p>Qdrant\ub294 \ubca1\ud130\ub97c \uc800\uc7a5\ud560 \ub54c \ub2e4\uc74c \ub450 \uac00\uc9c0 \ubc29\uc2dd \uc911 \uc120\ud0dd\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Storage/#21-in-memory","title":"2.1 In-Memory \uc800\uc7a5\uc18c","text":"<ul> <li> <p>\ubaa8\ub4e0 \ubca1\ud130\ub97c RAM\uc5d0 \uc0c1\uc8fc\uc2dc\ucf1c \uac00\uc7a5 \ube60\ub978 \uac80\uc0c9 \uc18d\ub3c4\ub97c \uc81c\uacf5\ud55c\ub2e4.</p> </li> <li> <p>\ub514\uc2a4\ud06c\ub294 persistence \uc6a9\ub3c4\ub85c\ub9cc \uc0ac\uc6a9\ub41c\ub2e4.</p> </li> <li> <p>\uba54\ubaa8\ub9ac\uac00 \ucda9\ubd84\ud55c \ud658\uacbd\uc5d0\uc11c \uad8c\uc7a5\ub41c\ub2e4.</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Storage/#22-memmap","title":"2.2 Memmap \uc800\uc7a5\uc18c","text":"<ul> <li> <p>\ub514\uc2a4\ud06c\uc5d0 \uc800\uc7a5\ub41c \ud30c\uc77c\uc744 \uac00\uc0c1 \uba54\ubaa8\ub9ac\ucc98\ub7fc \uc811\uadfc\ud558\ub294 \ubc29\uc2dd\uc774\ub2e4.</p> </li> <li> <p>OS\uc758 \ud398\uc774\uc9c0 \uce90\uc2dc\ub97c \ud65c\uc6a9\ud558\uc5ec \uc131\ub2a5 \uc800\ud558 \uc5c6\uc774 \ub300\uc6a9\ub7c9 \ub370\uc774\ud130 \ucc98\ub9ac\uac00 \uac00\ub2a5\ud558\ub2e4.</p> </li> <li> <p>RAM\uc774 \uc81c\ud55c\uc801\uc778 \ud658\uacbd\uc5d0\uc11c\ub3c4 \ub300\uaddc\ubaa8 \ub370\uc774\ud130\ub97c \ud6a8\uc728\uc801\uc73c\ub85c \uac80\uc0c9\ud560 \uc218 \uc788\ub2e4.</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Storage/#3-memmap","title":"3. Memmap \uc124\uc815 \ubc29\ubc95","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Storage/#31","title":"3.1 \uceec\ub809\uc158 \uc0dd\uc131 \uc2dc \uc9c1\uc811 \uc124\uc815","text":"<pre><code>PUT /collections/{collection_name}\n{\n  \"vectors\": {\n    \"size\": 768,\n    \"distance\": \"Cosine\",\n    \"on_disk\": true\n  }\n}\n</code></pre> <p>\uc704 \uc124\uc815\uc740 \ubca1\ud130 \ub370\uc774\ud130\ub97c \uace7\ubc14\ub85c \ub514\uc2a4\ud06c \uae30\ubc18(memmap)\uc73c\ub85c \uc800\uc7a5\ud558\ub3c4\ub85d \ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Storage/#32-optimizer","title":"3.2 Optimizer \uae30\ubc18 \ub3d9\uc801 \uc804\ud658","text":"<p>memmap_threshold \uac12\uc744 \uc124\uc815\ud558\uba74 \uc77c\uc815 \ud06c\uae30 \uc774\uc0c1 \uc138\uadf8\uba3c\ud2b8\uac00 \uc790\ub3d9\uc73c\ub85c memmap\uc73c\ub85c \uc804\ud658\ub41c\ub2e4.</p> <pre><code>PUT /collections/{collection_name}\n{\n  \"vectors\": {\n    \"size\": 768,\n    \"distance\": \"Cosine\"\n  },\n  \"optimizers_config\": {\n    \"memmap_threshold\": 20000\n  }\n}\n</code></pre> <ul> <li> <p>RAM\uc774 \uc801\uac70\ub098 \uc4f0\uae30 \ube48\ub3c4\uac00 \ub192\uc740 \ud658\uacbd: <code>memmap_threshold</code> &lt; <code>indexing_threshold</code></p> </li> <li> <p>\uc77c\ubc18\uc801\uc778 \ud658\uacbd: <code>memmap_threshold</code> = <code>indexing_threshold</code></p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Storage/#33-hnsw-on-disk","title":"3.3 HNSW \uc778\ub371\uc2a4 on-disk \uc124\uc815","text":"<p>HNSW \uc778\ub371\uc2a4\ub3c4 memmap\uc73c\ub85c \uc800\uc7a5\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>PUT /collections/{collection_name}\n{\n  \"vectors\": {\n    \"size\": 768,\n    \"distance\": \"Cosine\",\n    \"on_disk\": true\n  },\n  \"hnsw_config\": {\n    \"on_disk\": true\n  }\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Storage/#4-payload-storage","title":"4. \ud398\uc774\ub85c\ub4dc \uc800\uc7a5 \ubc29\uc2dd (Payload Storage)","text":"<p>Qdrant\ub294 \ud398\uc774\ub85c\ub4dc \ub370\uc774\ud130\uc758 \uc800\uc7a5\uc18c\ub3c4 \uc120\ud0dd\ud560 \uc218 \uc788\ub2e4.</p> \uc800\uc7a5 \ubc29\uc2dd \uc124\uba85 InMemory \uc11c\ube44\uc2a4 \uc2dc\uc791 \uc2dc \ubaa8\ub4e0 \ud398\uc774\ub85c\ub4dc\ub97c RAM\uc5d0 \uc801\uc7ac OnDisk RocksDB\uc5d0 \uc9c1\uc811 \uc800\uc7a5, RAM \uc0ac\uc6a9\ub7c9 \ucd5c\uc18c\ud654 <ul> <li> <p>InMemory\ub294 \ube60\ub978 \uac80\uc0c9\uc774 \uac00\ub2a5\ud558\uc9c0\ub9cc, \ub300\uc6a9\ub7c9 \ud14d\uc2a4\ud2b8\ub098 \uc774\ubbf8\uc9c0 \ub4f1 \uba54\ubaa8\ub9ac \uc18c\ubaa8\uac00 \ud06c\ub2e4.</p> </li> <li> <p>OnDisk\ub294 RAM\uc744 \uc808\uc57d\ud560 \uc218 \uc788\uc9c0\ub9cc, \ud544\ud130 \uc870\uac74\uc5d0 \ub530\ub77c \uac80\uc0c9 \uc18d\ub3c4\uac00 \ub290\ub824\uc9c8 \uc218 \uc788\ub2e4.</p> </li> </ul> <p>\ud544\ud130\ub9c1 \uc131\ub2a5\uc744 \uc720\uc9c0\ud558\ub824\uba74, \uc790\uc8fc \uc0ac\uc6a9\ud558\ub294 \ud544\ub4dc\uc5d0 \ub300\ud574 payload index\ub97c \uc124\uc815\ud558\ub294 \uac83\uc774 \uad8c\uc7a5\ub41c\ub2e4. \uc778\ub371\uc2a4\ub97c \uc124\uc815\ud558\uba74 \ud574\ub2f9 \ud544\ub4dc\ub294 RAM\uc5d0 \uc720\uc9c0\ub418\ubbc0\ub85c OnDisk\uc758 \ub2e8\uc810\uc774 \uc644\ud654\ub41c\ub2e4.</p> <p>\uceec\ub809\uc158 \uc0dd\uc131 \uc2dc OnDisk payload \uc124\uc815 \uc608\uc2dc</p> <pre><code>PUT /collections/{collection_name}\n{\n  \"on_disk_payload\": true\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Storage/#5-versioning","title":"5. \ubc84\uc804 \uad00\ub9ac (Versioning)","text":"<p>Qdrant\ub294 \ubaa8\ub4e0 \ub370\uc774\ud130 \ubcc0\uacbd\uc744 \uc548\uc804\ud558\uac8c \uad00\ub9ac\ud558\uae30 \uc704\ud574 2\ub2e8\uacc4 \uc800\uc7a5 \uc804\ub7b5\uc744 \uc0ac\uc6a9\ud55c\ub2e4.</p> <ol> <li> <p>Write-Ahead Log (WAL)\uc5d0 \uba3c\uc800 \uae30\ub85d\ud558\uace0, \uc21c\ucc28 \ubc88\ud638(version)\ub97c \ubd80\uc5ec\ud55c\ub2e4.</p> </li> <li> <p>\uc774\ud6c4 \ubcc0\uacbd \uc0ac\ud56d\uc740 \uc138\uadf8\uba3c\ud2b8\uc5d0 \ubc18\uc601\ub41c\ub2e4.</p> </li> <li> <p>WAL\uc5d0 \uae30\ub85d\ub41c \uc2dc\uc810 \uc774\ud6c4\uc758 \ub370\uc774\ud130\ub294 \uc2dc\uc2a4\ud15c \uc7a5\uc560 \ubc1c\uc0dd \uc2dc\uc5d0\ub3c4 \ubcf5\uad6c\uac00 \uac00\ub2a5\ud558\ub2e4.</p> </li> <li> <p>\uac01 \uc138\uadf8\uba3c\ud2b8\ub294 \ucd5c\uc885 \ubcc0\uacbd\ub41c \ubc84\uc804 \uc815\ubcf4\ub97c \uc800\uc7a5\ud558\uba70, \uacfc\uac70 \uc21c\uc11c\uc758 \ubcc0\uacbd \uc694\uccad\uc740 \ubb34\uc2dc\ub41c\ub2e4.</p> </li> </ol> <p>\uc774\ub7ec\ud55c \uad6c\uc870\ub294 \uc2dc\uc2a4\ud15c \uc7ac\uc2dc\uc791 \ud6c4\uc5d0\ub3c4 \ub370\uc774\ud130\ub97c \uc77c\uad00\ub418\uac8c \ubcf5\uad6c\ud560 \uc218 \uc788\ub3c4\ub85d \ubcf4\uc7a5\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Storage/#_1","title":"\uacb0\ub860","text":"<p>Qdrant\ub294 \uc138\uadf8\uba3c\ud2b8 \uae30\ubc18 \uc800\uc7a5 \uad6c\uc870\ub97c \uc911\uc2ec\uc73c\ub85c \ud558\uc5ec, RAM \uc6b0\uc120\uacfc \ub514\uc2a4\ud06c \uae30\ubc18 \uc800\uc7a5\uc18c, \uadf8\ub9ac\uace0 \ub2e4\uc591\ud55c \ucd5c\uc801\ud654 \uc804\ub7b5\uc744 \uc720\uc5f0\ud558\uac8c \uacb0\ud569\ud560 \uc218 \uc788\ub294 \uc800\uc7a5\uc18c \uc124\uacc4\ub97c \uc81c\uacf5\ud55c\ub2e4. \ub300\uaddc\ubaa8 \ub370\uc774\ud130\uc14b\uc5d0\uc11c \uac80\uc0c9 \uc131\ub2a5\uc744 \uc720\uc9c0\ud558\uba74\uc11c\ub3c4 \uc2dc\uc2a4\ud15c \uc790\uc6d0 \uc0ac\uc6a9\uc744 \ucd5c\uc801\ud654\ud558\ub824\uba74 \ub2e4\uc74c \uc694\uc18c\ub97c \uace0\ub824\ud55c \uc124\uacc4\uac00 \uc911\uc694\ud558\ub2e4:</p> <ul> <li> <p>\ubca1\ud130 \uc800\uc7a5\uc18c \uc120\ud0dd: RAM vs. Memmap</p> </li> <li> <p>\ud398\uc774\ub85c\ub4dc \uc800\uc7a5\uc18c \uc120\ud0dd: InMemory vs. OnDisk</p> </li> <li> <p>\ud544\ud130 \uc870\uac74\uc774 \uc790\uc8fc \uc0ac\uc6a9\ub418\ub294 \ud544\ub4dc\uc5d0 \ub300\ud55c payload index \uad6c\uc131</p> </li> <li> <p>\ucd08\uae30 \ub370\uc774\ud130 \uc801\uc7ac \ud6c4 indexing \ubc0f memmap \ucd5c\uc801\ud654 \uc2dc\uc810 \uc870\uc815</p> </li> <li> <p>\uc7a5\uc560 \ubcf5\uad6c \ubc0f \ub370\uc774\ud130 \uc77c\uad00\uc131\uc744 \uc704\ud55c WAL \uae30\ubc18 \ubc84\uc804 \uad00\ub9ac</p> </li> </ul> <p>Qdrant\uc758 \uc800\uc7a5 \uad6c\uc870\ub294 \ub2e8\uc21c\ud55c \uac80\uc0c9 \uc5d4\uc9c4\uc744 \ub118\uc5b4\uc11c, \uc2e4\uc2dc\uac04 \ubca1\ud130 \uae30\ubc18 \uc2dc\uc2a4\ud15c\uc758 \uace0\uac00\uc6a9\uc131\uacfc \uc720\uc5f0\ud55c \ub9ac\uc18c\uc2a4 \uc6b4\uc6a9\uc744 \uac00\ub2a5\ud558\uac8c \ud55c\ub2e4. \ud544\uc694\uc5d0 \ub530\ub77c \ucd5c\uc801\ud654 \uc804\ub7b5\uacfc \uc5f0\uacb0\ud558\uc5ec \uc2dc\uc2a4\ud15c \uc804\uccb4\uc758 \uc131\ub2a5\uc744 \uadf9\ub300\ud654\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Vectors/","title":"Vectors","text":"<p>Qdrant\ub294 \ubca1\ud130 \uae30\ubc18 \uac80\uc0c9 \uc5d4\uc9c4\uc73c\ub85c, \ubaa8\ub4e0 \uac80\uc0c9 \uc5f0\uc0b0\uc758 \ud575\uc2ec\uc740 \ubca1\ud130(\ub610\ub294 \uc784\ubca0\ub529)\uc774\ub2e4. \ubca1\ud130\ub294 \uac1d\uccb4 \uac04\uc758 \uc720\uc0ac\ub3c4\ub97c \uc218\uce58\ud654\ud558\uc5ec \ubca1\ud130 \uacf5\uac04 \uc0c1\uc758 \uac70\ub9ac\ub85c \ube44\uad50\ud560 \uc218 \uc788\ub3c4\ub85d \ud55c\ub2e4. </p> <p>\uc774 \uae00\uc5d0\uc11c\ub294 Qdrant\uc5d0\uc11c \uc0ac\uc6a9\ub418\ub294 \ubca1\ud130\uc758 \uac1c\ub150\uacfc \uad6c\uc870, \uadf8\ub9ac\uace0 \ub2e4\uc591\ud55c \ubca1\ud130 \uc720\ud615\uc5d0 \ub300\ud574 \uc124\uba85\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Vectors/#_1","title":"\ubca1\ud130\ub780 \ubb34\uc5c7\uc778\uac00","text":"<p>\ubca1\ud130\ub294 \uac1d\uccb4\ub97c \uace0\uc815\ub41c \ucc28\uc6d0\uc758 \uc218\uce58 \ubc30\uc5f4\ub85c \ubcc0\ud658\ud55c \ud45c\ud604\uc774\ub2e4. \uc77c\ubc18\uc801\uc73c\ub85c \uc2e0\uacbd\ub9dd(Neural Network)\uc744 \ud1b5\ud574 \uac1d\uccb4(\ud14d\uc2a4\ud2b8, \uc774\ubbf8\uc9c0 \ub4f1)\ub97c \ubca1\ud130\ud654\ud558\uac8c \ub418\uba70, \uc774 \ubca1\ud130\ub294 \uac1d\uccb4\uc758 \uc758\ubbf8\ub098 \ud2b9\uc131\uc744 \uc555\ucd95\uc801\uc73c\ub85c \ub2f4\uace0 \uc788\ub2e4.</p> <p>\uc608\ub97c \ub4e4\uc5b4, \uc774\ubbf8\uc9c0 \uceec\ub809\uc158\uc774 \uc788\ub2e4\uace0 \uac00\uc815\ud560 \ub54c \uac01 \uc774\ubbf8\uc9c0\ub97c \ubca1\ud130\ub85c \ubcc0\ud658\ud558\uba74, \uc2dc\uac01\uc801\uc73c\ub85c \uc720\uc0ac\ud55c \uc774\ubbf8\uc9c0\ub294 \ubca1\ud130 \uacf5\uac04 \uc0c1\uc5d0\uc11c\ub3c4 \uc11c\ub85c \uac00\uae4c\uc6b4 \uc704\uce58\uc5d0 \ub193\uc774\uac8c \ub41c\ub2e4.</p> <p>\uc2e0\uacbd\ub9dd\uc740 \ubcf4\ud1b5 \uc720\uc0ac\ud55c \uac1d\uccb4 \uc30d(\ub610\ub294 \uc0bc\uc911\uc30d)\uc744 \ud559\uc2b5 \ub370\uc774\ud130\ub85c \ud558\uc5ec, \uc758\ubbf8\uc0c1 \uc720\uc0ac\ud55c \uc785\ub825\uc740 \uac00\uae4c\uc6b4 \ubca1\ud130\ub85c, \ub2e4\ub978 \uc785\ub825\uc740 \uba40\uc5b4\uc9c4 \ubca1\ud130\ub85c \ub9f5\ud551\ub418\ub3c4\ub85d \ud6c8\ub828\ub41c\ub2e4.</p> <p>\uc774\ub7ec\ud55c \uc131\uc9c8\uc744 \ud65c\uc6a9\ud558\uc5ec \uc720\uc0ac \uac80\uc0c9, \uad70\uc9d1\ud654, \uc774\uc0c1 \ud0d0\uc9c0 \ub4f1\uc758 \ub2e4\uc591\ud55c \ub370\uc774\ud130 \ud0d0\uc0c9\uc774 \uac00\ub2a5\ud574\uc9c4\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Vectors/#_2","title":"\ubca1\ud130\uc758 \uc885\ub958","text":"<p>Qdrant\ub294 \ud604\ub300\uc758 \uc784\ubca0\ub529 \ubaa8\ub378\ub4e4\uc774 \uc0dd\uc131\ud558\ub294 \ub2e4\uc591\ud55c \ud615\ud0dc\uc758 \ubca1\ud130\ub97c \uc9c0\uc6d0\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Vectors/#1-dense-vector","title":"1. Dense Vector","text":"<p>Dense Vector\ub294 \uac00\uc7a5 \uc77c\ubc18\uc801\uc778 \ud615\ud0dc\uc758 \ubca1\ud130\ub85c, \uace0\uc815\ub41c \uae38\uc774\uc758 \ubd80\ub3d9\uc18c\uc218\uc810(float) \uc22b\uc790 \ubc30\uc5f4\uc774\ub2e4.</p> <pre><code>[\n  -0.013, 0.020, -0.007, -0.111, ...\n]\n</code></pre> <p>\ub300\ubd80\ubd84\uc758 \uc784\ubca0\ub529 \ubaa8\ub378\uc740 Dense Vector\ub97c \ucd9c\ub825\ud558\ubbc0\ub85c \ubcc4\ub3c4\uc758 \uc804\ucc98\ub9ac \uc5c6\uc774 Qdrant\uc5d0 \uc9c1\uc811 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Vectors/#2-sparse-vector","title":"2. Sparse Vector","text":"<p>Sparse Vector\ub294 \ub300\ubd80\ubd84\uc758 \uac12\uc774 0\uc778 \ud76c\uc18c \ubca1\ud130\uc774\ub2e4. \uc218\ud559\uc801\uc73c\ub85c\ub294 Dense Vector\uc640 \ub3d9\uc77c\ud558\ub098 \uc800\uc7a5\uacfc \uc778\ub371\uc2f1 \ubc29\uc2dd\uc774 \ub2e4\ub974\ub2e4.</p> <p>Qdrant\uc5d0\uc11c Sparse Vector\ub294 \ub2e4\uc74c\uacfc \uac19\uc774 (index, value) \uc30d\uc758 \ubc30\uc5f4\ub85c \ud45c\ud604\ub41c\ub2e4.</p> <pre><code>{\n  \"indices\": [1, 3, 5, 7],\n  \"values\": [0.1, 0.2, 0.3, 0.4]\n}\n</code></pre> <p>Sparse Vector\ub294 \ubcc4\ub3c4\uc758 \uc800\uc7a5\uc18c\uc640 \uc778\ub371\uc2a4\ub85c \uad00\ub9ac\ub418\ubbc0\ub85c Dense Vector\uc640\ub294 \ubcc4\ub3c4\ub85c \uc124\uc815\ud574\uc57c \ud55c\ub2e4.</p> <p>\uceec\ub809\uc158 \uc0dd\uc131 \uc2dc \ub2e4\uc74c\uacfc \uac19\uc774 \uc815\uc758\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>{\n  \"sparse_vectors\": {\n    \"text\": {}\n  }\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Vectors/#3-multivector","title":"3. MultiVector","text":"<p>Qdrant\ub294 \ud558\ub098\uc758 \ud3ec\uc778\ud2b8\uc5d0 \ub2e4\uc218\uc758 Dense Vector\ub97c \ubc30\uc5f4 \ud615\ud0dc\ub85c \uc800\uc7a5\ud560 \uc218 \uc788\ub294 MultiVector\ub97c \uc9c0\uc6d0\ud55c\ub2e4. \uc774\ub294 \uace0\uc815\ub41c \ubca1\ud130 \ud06c\uae30\ub97c \uac00\uc9c0\uba70, \ud3ec\uc778\ud2b8\ub9c8\ub2e4 \uc11c\ub85c \ub2e4\ub978 \uac1c\uc218\uc758 \ubca1\ud130\ub97c \uc800\uc7a5\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>\"vector\": [\n  [-0.013, 0.020, -0.007, -0.111],\n  [-0.030, -0.055, 0.001, 0.072],\n  [-0.041, 0.014, -0.032, -0.062]\n]\n</code></pre> <p>\uc8fc\ub85c \ub2e4\uc74c\uacfc \uac19\uc740 \uc2dc\ub098\ub9ac\uc624\uc5d0\uc11c \uc0ac\uc6a9\ub41c\ub2e4.</p> <ul> <li> <p>\ud558\ub098\uc758 \uac1d\uccb4\uc5d0 \ub300\ud574 \ub2e4\uc591\ud55c \uc2dc\uc810/\uac01\ub3c4\uc758 \ud45c\ud604\uc774 \ud544\uc694\ud55c \uacbd\uc6b0</p> </li> <li> <p>ColBERT \ub4f1 Late Interaction \ubc29\uc2dd\uc758 \ud14d\uc2a4\ud2b8 \uc784\ubca0\ub529 \ubaa8\ub378 \uc0ac\uc6a9 \uc2dc</p> </li> </ul> <p>MultiVector\ub97c \uc0ac\uc6a9\ud558\ub824\uba74 \uceec\ub809\uc158 \uc0dd\uc131 \uc2dc <code>multivector_config</code>\ub97c \uc815\uc758\ud574\uc57c \ud558\uba70, \ud604\uc7ac\ub294 <code>max_sim</code> \ube44\uad50 \ud568\uc218\ub97c \uc9c0\uc6d0\ud55c\ub2e4.</p> <pre><code>{\n  \"vectors\": {\n    \"size\": 128,\n    \"distance\": \"Cosine\",\n    \"multivector_config\": {\n      \"comparator\": \"max_sim\"\n    }\n  }\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Vectors/#4-named-vectors","title":"4. Named Vectors","text":"<p>Qdrant\uc5d0\uc11c\ub294 \ud3ec\uc778\ud2b8\ub2f9 \uc5ec\ub7ec \uac1c\uc758 \ubca1\ud130\ub97c \uc774\ub984(Named)\uc744 \ubd99\uc5ec \uad6c\ubd84\ud560 \uc218 \uc788\ub2e4. \uc608\ub97c \ub4e4\uc5b4 \uc774\ubbf8\uc9c0 \ubca1\ud130\uc640 \ud14d\uc2a4\ud2b8 \ubca1\ud130\ub97c \ub3d9\uc2dc\uc5d0 \uc800\uc7a5\ud558\uace0 \uac80\uc0c9\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>{\n  \"vectors\": {\n    \"image\": {\n      \"size\": 4,\n      \"distance\": \"Dot\"\n    },\n    \"text\": {\n      \"size\": 5,\n      \"distance\": \"Cosine\"\n    }\n  },\n  \"sparse_vectors\": {\n    \"text-sparse\": {}\n  }\n}\n</code></pre> <p>\ud3ec\uc778\ud2b8 \uc0bd\uc785 \uc2dc\uc5d0\ub3c4 \uac01\uac01\uc758 \uc774\ub984\uc73c\ub85c \uad6c\ubd84\ud558\uc5ec \ubca1\ud130\ub97c \uc800\uc7a5\ud55c\ub2e4.</p> <pre><code>{\n  \"id\": 1,\n  \"vector\": {\n    \"image\": [0.9, 0.1, 0.1, 0.2],\n    \"text\": [0.4, 0.7, 0.1, 0.8, 0.1],\n    \"text-sparse\": {\n      \"indices\": [1, 3, 5, 7],\n      \"values\": [0.1, 0.2, 0.3, 0.4]\n    }\n  }\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Vectors/#_3","title":"\ubca1\ud130 \ub370\uc774\ud130 \ud0c0\uc785","text":"<p>Qdrant\ub294 \ubca1\ud130\uc758 \uc815\ubc00\ub3c4\uc640 \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9\uc744 \uace0\ub824\ud558\uc5ec \ub2e4\uc591\ud55c \ub370\uc774\ud130 \ud0c0\uc785\uc744 \uc9c0\uc6d0\ud55c\ub2e4.</p> \ub370\uc774\ud130 \ud0c0\uc785 \uc124\uba85 float32 (\uae30\ubcf8\uac12) 32\ube44\ud2b8 \ubd80\ub3d9\uc18c\uc218\uc810, \ub300\ubd80\ubd84\uc758 \uc784\ubca0\ub529\uc5d0 \uc801\ud569 float16 \uc808\ubc18 \ud06c\uae30\uc758 \uba54\ubaa8\ub9ac \uc0ac\uc6a9, \uc815\ubc00\ub3c4 \uc190\uc2e4\uc740 \ubbf8\ubbf8 uint8 0~255 \ubc94\uc704\uc758 \uc815\uc218\ud615, \uc591\uc790\ud654(Quantization)\ub41c \ubca1\ud130 \uc800\uc7a5 \uc2dc \uc0ac\uc6a9"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Vectors/#float16","title":"\uc608: float16 \uc0ac\uc6a9 \uc124\uc815","text":"<pre><code>{\n  \"vectors\": {\n    \"size\": 128,\n    \"distance\": \"Cosine\",\n    \"datatype\": \"float16\"\n  },\n  \"sparse_vectors\": {\n    \"text\": {\n      \"index\": {\n        \"datatype\": \"float16\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Vectors/#uint8","title":"\uc608: uint8 \uc0ac\uc6a9 \uc124\uc815","text":"<pre><code>{\n  \"vectors\": {\n    \"size\": 128,\n    \"distance\": \"Cosine\",\n    \"datatype\": \"uint8\"\n  },\n  \"sparse_vectors\": {\n    \"text\": {\n      \"index\": {\n        \"datatype\": \"uint8\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Vectors/#quantization","title":"\ubca1\ud130 \uc591\uc790\ud654 (Quantization)","text":"<p>\ubca1\ud130\uc758 \ub370\uc774\ud130 \ud0c0\uc785 \ubcc0\uacbd \uc678\uc5d0\ub3c4, Qdrant\ub294 \uc591\uc790\ud654\ub41c(Quantized) \ubca1\ud130\ub97c \uc6d0\ubcf8 \ubca1\ud130\uc640 \ud568\uaed8 \uc0dd\uc131\ud560 \uc218 \uc788\ub2e4. \uc774 \uc591\uc790\ud654 \ubca1\ud130\ub294 \ud6c4\ubcf4\ub97c \ube60\ub974\uac8c \ucd94\ub824\ub0b4\ub294 \ub370 \uc0ac\uc6a9\ub418\uac70\ub098, \uacbd\uc6b0\uc5d0 \ub530\ub77c \uc9c1\uc811 \uac80\uc0c9\uc5d0\ub3c4 \uc0ac\uc6a9\ub420 \uc218 \uc788\ub2e4.</p> <p>\uc591\uc790\ud654\ub294 \uc790\ub3d9 \ucd5c\uc801\ud654(optimization) \ub2e8\uacc4\uc5d0\uc11c \ubc31\uadf8\ub77c\uc6b4\ub4dc\ub85c \uc218\ud589\ub41c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Vectors/#_4","title":"\ubca1\ud130 \uc800\uc7a5 \ubc29\uc2dd","text":"<p>Qdrant\ub294 \ubca1\ud130 \uc800\uc7a5 \uc704\uce58\ub97c \uba54\ubaa8\ub9ac \ub610\ub294 \ub514\uc2a4\ud06c \uc911 \uc120\ud0dd\ud560 \uc218 \uc788\ub2e4. RAM \uae30\ubc18 \uc800\uc7a5\uc740 \ube60\ub978 \uac80\uc0c9 \uc18d\ub3c4\ub97c \ubcf4\uc7a5\ud558\uc9c0\ub9cc, \ub514\uc2a4\ud06c \uc800\uc7a5\uc740 \uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9\uc744 \uc904\uc77c \uc218 \uc788\ub2e4.</p> <p>\uad6c\uccb4\uc801\uc778 \ubca1\ud130 \uc800\uc7a5 \uc804\ub7b5\uc740 \uc800\uc7a5 \uc124\uc815(Storage section)\uc5d0\uc11c \ucd94\uac00\ub85c \uc124\uc815\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/Vectors/#_5","title":"\ub9c8\ubb34\ub9ac","text":"<p>Qdrant\ub294 \ub2e4\uc591\ud55c \uc720\ud615\uc758 \ubca1\ud130\uc640 \ub370\uc774\ud130 \ud0c0\uc785\uc744 \uc9c0\uc6d0\ud558\uc5ec \ud14d\uc2a4\ud2b8, \uc774\ubbf8\uc9c0, \uba40\ud2f0\ubaa8\ub2ec \ub370\uc774\ud130 \ub4f1 \ubcf5\ud569\uc801\uc778 \ubca1\ud130 \ud45c\ud604\uc744 \uc720\uc5f0\ud558\uac8c \ub2e4\ub8f0 \uc218 \uc788\ub3c4\ub85d \uc124\uacc4\ub418\uc5b4 \uc788\ub2e4. </p> <p>Dense, Sparse, MultiVector \ub4f1 \ubaa9\uc801\uc5d0 \ub9de\ub294 \ubca1\ud130 \uad6c\uc870\ub97c \uc120\ud0dd\ud558\uace0, float16, uint8 \ub4f1\uc758 \ub370\uc774\ud130 \ud0c0\uc785\uacfc \uc870\ud569\ud558\uba74 \uc131\ub2a5\uacfc \ub9ac\uc18c\uc2a4 \ud6a8\uc728\uc131\uc744 \uadf9\ub300\ud654\ud560 \uc218 \uc788\ub2e4.</p> <p>Qdrant\ub97c \ub3c4\uc785\ud55c \ubca1\ud130 \uac80\uc0c9 \uc2dc\uc2a4\ud15c\uc744 \uad6c\ucd95\ud560 \ub54c, \ubca1\ud130 \uad6c\uc131\uacfc \uc800\uc7a5 \uc804\ub7b5\uc744 \uc801\uc808\ud788 \uc120\ud0dd\ud558\ub294 \uac83\uc774 \ub9e4\uc6b0 \uc911\uc694\ud55c \uc124\uacc4 \ud3ec\uc778\ud2b8\uac00 \ub420 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/%EA%B0%9C%EB%B0%9C%20%EB%B0%8F%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%ED%99%98%EA%B2%BD%20%EC%84%A4%EC%A0%95/","title":"\uac1c\ubc1c \ubc0f \ud14c\uc2a4\ud2b8 \ud658\uacbd \uc124\uc815","text":"<p>Qdrant\ub294 \uace0\uc131\ub2a5 \ubca1\ud130 \uac80\uc0c9\uc744 \uc704\ud55c \uc624\ud508\uc18c\uc2a4 \uac80\uc0c9 \uc5d4\uc9c4\uc73c\ub85c, Docker \uae30\ubc18\uc758 \uac04\ud3b8\ud55c \uc2e4\ud589\ubd80\ud130 \uc9c1\uc811 \ube4c\ub4dc\uae4c\uc9c0 \ub2e4\uc591\ud55c \uac1c\ubc1c \ud658\uacbd\uc5d0\uc11c \ud14c\uc2a4\ud2b8 \ubc0f \uc6b4\uc6a9\uc774 \uac00\ub2a5\ud558\ub2e4. </p> <p>\ub610\ud55c \ub2e8\uc77c \uc778\uc2a4\ud134\uc2a4\ub294 \ubb3c\ub860, \ubd84\uc0b0 \ud074\ub7ec\uc2a4\ud130\ub85c \ud655\uc7a5\ud558\uae30 \uc704\ud55c \ub124\ud2b8\uc6cc\ud06c \uad6c\uc131\ub3c4 \uba85\ud655\ud788 \uc815\uc758\ub418\uc5b4 \uc788\ub2e4.</p> <p>\uc774 \uae00\uc5d0\uc11c\ub294 Qdrant\ub97c \uac1c\ubc1c\u00b7\ud14c\uc2a4\ud2b8 \uc6a9\ub3c4\ub85c \uc2e4\ud589\ud558\uace0 \uad00\ub9ac\ud558\ub294 \ubc29\ubc95\uacfc, \ud544\uc218 \ud3ec\ud2b8\ub97c \ud3ec\ud568\ud55c \ub124\ud2b8\uc6cc\ud06c \uc124\uc815\uc5d0 \ub300\ud574 \uc815\ub9ac\ud55c\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/%EA%B0%9C%EB%B0%9C%20%EB%B0%8F%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%ED%99%98%EA%B2%BD%20%EC%84%A4%EC%A0%95/#1-docker","title":"1. Docker\ub85c \uc2e4\ud589\ud558\uae30","text":""},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/%EA%B0%9C%EB%B0%9C%20%EB%B0%8F%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%ED%99%98%EA%B2%BD%20%EC%84%A4%EC%A0%95/#11","title":"1.1 \uae30\ubcf8 \uc2e4\ud589","text":"<p>\uac00\uc7a5 \uac04\ub2e8\ud55c \uc2e4\ud589 \ubc29\uc2dd\uc740 Docker\ub97c \uc774\uc6a9\ud55c \ucee8\ud14c\uc774\ub108 \uc2e4\ud589\uc774\ub2e4.</p> <pre><code>docker pull qdrant/qdrant\ndocker run -p 6333:6333 \\\n           -v $(pwd)/qdrant_data:/qdrant/storage \\\n           qdrant/qdrant\n</code></pre> <ul> <li> <p>Qdrant \ub370\uc774\ud130\ub294 <code>./qdrant_data</code> \ub514\ub809\ud1a0\ub9ac\uc5d0 \uc800\uc7a5\ub41c\ub2e4.</p> </li> <li> <p>\ud3ec\ud2b8 <code>6333</code>\uc740 REST API, \uc0c1\ud0dc \ud655\uc778, \uba54\ud2b8\ub9ad \uc218\uc9d1\uc5d0 \uc0ac\uc6a9\ub41c\ub2e4.</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/%EA%B0%9C%EB%B0%9C%20%EB%B0%8F%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%ED%99%98%EA%B2%BD%20%EC%84%A4%EC%A0%95/#12","title":"1.2 \uc0ac\uc6a9\uc790 \uc124\uc815 \ud30c\uc77c \uc801\uc6a9","text":"<pre><code>docker run -p 6333:6333 \\\n           -v $(pwd)/qdrant_data:/qdrant/storage \\\n           -v $(pwd)/custom_config.yaml:/qdrant/config/production.yaml \\\n           qdrant/qdrant\n</code></pre> <p>\ub610\ub294 \uba85\uc2dc\uc801\uc73c\ub85c \uc124\uc815 \uacbd\ub85c\ub97c \uc9c0\uc815\ud558\uc5ec \uc2e4\ud589\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>docker run -p 6333:6333 \\\n           -v $(pwd)/qdrant_data:/qdrant/storage \\\n           -v $(pwd)/custom_config.yaml:/qdrant/config/custom_config.yaml \\\n           qdrant/qdrant \\\n           ./qdrant --config-path config/custom_config.yaml\n</code></pre>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/%EA%B0%9C%EB%B0%9C%20%EB%B0%8F%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%ED%99%98%EA%B2%BD%20%EC%84%A4%EC%A0%95/#2-docker-compose","title":"2. Docker Compose\ub85c \uc2e4\ud589\ud558\uae30","text":"<p>Docker Compose\ub97c \ud1b5\ud574 \uc880 \ub354 \uad6c\uc870\ud654\ub41c \ubc29\uc2dd\uc73c\ub85c Qdrant\ub97c \uc2e4\ud589\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/%EA%B0%9C%EB%B0%9C%20%EB%B0%8F%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%ED%99%98%EA%B2%BD%20%EC%84%A4%EC%A0%95/#21-compose","title":"2.1 Compose \uc608\uc2dc (\ub2e8\uc77c \ub178\ub4dc)","text":"<pre><code>services:\n  qdrant:\n    image: qdrant/qdrant:latest\n    container_name: qdrant\n    restart: always\n    ports:\n      - 6333:6333  # HTTP API\n      - 6334:6334  # gRPC API\n      - 6335:6335  # \ud074\ub7ec\uc2a4\ud130 \ud1b5\uc2e0\uc6a9\n    expose:\n      - 6333\n      - 6334\n      - 6335\n    configs:\n      - source: qdrant_config\n        target: /qdrant/config/production.yaml\n    volumes:\n      - ./qdrant_data:/qdrant/storage\n\nconfigs:\n  qdrant_config:\n    content: |\n      log_level: INFO\n</code></pre> <p><code>configs</code> \uae30\ub2a5\uc740 Docker Compose v2.23.1 \uc774\uc0c1, Docker Engine v25.0.0 \uc774\uc0c1\uc5d0\uc11c \uc0ac\uc6a9 \uac00\ub2a5\ud558\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/%EA%B0%9C%EB%B0%9C%20%EB%B0%8F%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%ED%99%98%EA%B2%BD%20%EC%84%A4%EC%A0%95/#3-networking","title":"3. \ub124\ud2b8\uc6cc\ud06c \uad6c\uc131 (Networking)","text":"<p>Qdrant\ub294 \ud074\ub77c\uc774\uc5b8\ud2b8 \ubc0f \ubd84\uc0b0 \ud658\uacbd\uc5d0\uc11c\uc758 \uc5f0\uacb0\uc744 \uc704\ud574 \ucd1d 3\uac1c\uc758 \ud3ec\ud2b8\uac00 \ud544\uc694\ud558\ub2e4.</p> \ud3ec\ud2b8 \ubc88\ud638 \uc6a9\ub3c4 6333 RESTful HTTP API, \uc0c1\ud0dc \ud655\uc778, Prometheus \uba54\ud2b8\ub9ad \uc218\uc9d1 6334 gRPC API 6335 \ud074\ub7ec\uc2a4\ud130 \ub178\ub4dc \uac04 \ud1b5\uc2e0 (\ubd84\uc0b0 \ud658\uacbd)"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/%EA%B0%9C%EB%B0%9C%20%EB%B0%8F%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%ED%99%98%EA%B2%BD%20%EC%84%A4%EC%A0%95/#_1","title":"\ubd84\uc0b0 \ud074\ub7ec\uc2a4\ud130 \ud658\uacbd\uc5d0\uc11c\ub294 \ub2e4\uc74c\uc744 \ub9cc\uc871\ud574\uc57c \ud55c\ub2e4.","text":"<ul> <li> <p>\ubaa8\ub4e0 Qdrant \ub178\ub4dc\ub294 \ud3ec\ud2b8 6333, 6334, 6335\ub97c \ud1b5\ud574 \uc11c\ub85c \ud1b5\uc2e0\ud560 \uc218 \uc788\uc5b4\uc57c \ud55c\ub2e4.</p> </li> <li> <p>\uc678\ubd80 \ud074\ub77c\uc774\uc5b8\ud2b8\ub294 \ud3ec\ud2b8 6333 (HTTP) \ub610\ub294 6334 (gRPC)\ub97c \ud1b5\ud574 \uc811\uadfc\ud560 \uc218 \uc788\uc5b4\uc57c \ud55c\ub2e4.</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/%EA%B0%9C%EB%B0%9C%20%EB%B0%8F%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%ED%99%98%EA%B2%BD%20%EC%84%A4%EC%A0%95/#4-rust","title":"4. \uc18c\uc2a4 \ube4c\ub4dc (Rust \uae30\ubc18)","text":"<p>Qdrant\ub294 Rust\ub85c \uc791\uc131\ub418\uc5b4 \uc788\uc73c\uba70, \uc9c1\uc811 \ubc14\uc774\ub108\ub9ac\ub85c \ube4c\ub4dc\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/%EA%B0%9C%EB%B0%9C%20%EB%B0%8F%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%ED%99%98%EA%B2%BD%20%EC%84%A4%EC%A0%95/#41","title":"4.1 \uc0ac\uc804 \uc900\ube44","text":"<ul> <li> <p>Rust toolchain \uc124\uce58 (<code>rustup</code>)</p> </li> <li> <p>OS\ubcc4 \ud544\uc218 \ub77c\uc774\ube0c\ub7ec\ub9ac \uc124\uce58 (Dockerfile \ucc38\uace0)</p> </li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/%EA%B0%9C%EB%B0%9C%20%EB%B0%8F%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%ED%99%98%EA%B2%BD%20%EC%84%A4%EC%A0%95/#42","title":"4.2 \ube4c\ub4dc \uba85\ub839","text":"<pre><code>cargo build --release --bin qdrant\n</code></pre> <ul> <li>\ube4c\ub4dc \uacb0\uacfc \ubc14\uc774\ub108\ub9ac\ub294 <code>./target/release/qdrant</code>\uc5d0 \uc704\uce58\ud55c\ub2e4.</li> </ul>"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/%EA%B0%9C%EB%B0%9C%20%EB%B0%8F%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%ED%99%98%EA%B2%BD%20%EC%84%A4%EC%A0%95/#5","title":"5. \ud074\ub77c\uc774\uc5b8\ud2b8 \ub77c\uc774\ube0c\ub7ec\ub9ac","text":"<p>Qdrant\ub294 \ub2e4\uc591\ud55c \uc5b8\uc5b4\uc5d0 \ub300\ud55c \uacf5\uc2dd \ud074\ub77c\uc774\uc5b8\ud2b8 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \uc81c\uacf5\ud55c\ub2e4.</p> \uc5b8\uc5b4 \ud328\ud0a4\uc9c0 / \ub9c1\ud06c Python <code>qdrant-client</code> (PyPI) TypeScript <code>@qdrant/js-client-rest</code> Go <code>github.com/qdrant/go-client</code> Java Gradle/Maven\uc6a9 Qdrant \ud074\ub77c\uc774\uc5b8\ud2b8 Rust <code>qdrant-client</code> crate C# (.NET) <code>Qdrant.Client</code> (NuGet)"},{"location":"search-engine/Qdrant/%EC%9D%B4%EB%A1%A0/%EA%B0%9C%EB%B0%9C%20%EB%B0%8F%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%ED%99%98%EA%B2%BD%20%EC%84%A4%EC%A0%95/#_2","title":"\uacb0\ub860","text":"<p>Qdrant\ub294 Docker, Docker Compose, Rust \ube4c\ub4dc \ub4f1 \ub2e4\uc591\ud55c \ubc29\uc2dd\uc73c\ub85c \uac1c\ubc1c \ud658\uacbd\uc744 \uc27d\uac8c \uad6c\uc131\ud560 \uc218 \uc788\uc73c\uba70, \uba40\ud2f0 \ud3ec\ud2b8 \uad6c\uc131\uacfc \ud074\ub7ec\uc2a4\ud130 \ud1b5\uc2e0\uc744 \uace0\ub824\ud55c \ub124\ud2b8\uc6cc\ud06c \uc124\uc815\uc744 \ud1b5\ud574 \ud504\ub85c\ub355\uc158 \ud655\uc7a5\uc5d0\ub3c4 \uc720\uc5f0\ud558\uac8c \ub300\uc751\ud560 \uc218 \uc788\ub2e4.</p> <ul> <li> <p>\ub2e8\uc77c \uac1c\ubc1c \ud658\uacbd: Docker \ub2e8\uc77c \uc2e4\ud589 \ub610\ub294 Compose</p> </li> <li> <p>\ud074\ub7ec\uc2a4\ud130 \ud658\uacbd: \ud3ec\ud2b8 6333/6334/6335 \uc624\ud508 \ubc0f \ub178\ub4dc \uac04 \uc5f0\uacb0 \ud544\uc694</p> </li> <li> <p>\uace0\uc131\ub2a5 \uac80\uc0c9: gRPC \ud3ec\ud2b8\ub97c \ud1b5\ud55c \ube60\ub978 \ud074\ub77c\uc774\uc5b8\ud2b8 \ud1b5\uc2e0 \uac00\ub2a5</p> </li> <li> <p>\uc720\uc5f0\ud55c \uc124\uc815: \ucee4\uc2a4\ud140 \uad6c\uc131 \ud30c\uc77c \ubc0f \ub2e4\uc911 \uc5b8\uc5b4 \ud074\ub77c\uc774\uc5b8\ud2b8 \uc5f0\ub3d9</p> </li> </ul>"},{"location":"search-engine/RAG/LangChain/Chunker/","title":"Chunker","text":""},{"location":"search-engine/RAG/LangChain/Chunker/#_1","title":"\uc758\ubbf8 \uae30\ubc18\uc73c\ub85c \ubd84\ud560\ud558\ub294 \uc2dc\ub9e8\ud2f1 \uccad\ud0b9","text":"<p><code>SemanticChunker</code> \ub294 \ud14d\uc2a4\ud2b8\ub97c \ub2e8\uc21c\ud788 \uae38\uc774\uc5d0 \ub530\ub77c \ub098\ub204\ub294 \uac83\uc774 \uc544\ub2cc, \uc758\ubbf8\uc801\uc73c\ub85c \uc720\uc0ac\ud55c \ub0b4\uc6a9\uc744 \uac00\uc9c4 \uccad\ud06c\ub85c \ubd84\ud560\ud558\ub294 \ub3c4\uad6c\uc774\ub2e4. \ud14d\uc2a4\ud2b8\ub97c \ubb38\uc7a5 \ub2e8\uc704\ub85c \ubd84\ud560\ud55c \ud6c4, \uc11c\ub85c \uc720\uc0ac\ud55c \uc758\ubbf8\ub97c \uac00\uc9c4 \ubb38\uc7a5\ub4e4\uc744 \uadf8\ub8f9\ud654\ud558\uc5ec \ud558\ub098\uc758 \uccad\ud06c\ub85c \uad6c\uc131\ud55c\ub2e4. \uc774\ub97c \ud1b5\ud574 \ubb38\ub9e5\uc774 \uc798 \uc5f0\uacb0\ub41c \uc0c1\ud0dc\ub85c \ubd84\ud560\ub418\uc5b4, \ud14d\uc2a4\ud2b8\uc758 \uc758\ubbf8\ub97c \ubcf4\uc874\ud558\uba74\uc11c\ub3c4 \uc801\uc808\ud55c \ud06c\uae30\uc758 \uccad\ud06c\ub97c \uc0dd\uc131\ud560 \uc218 \uc788\ub2e4.</p> <p>\uc758\ubbf8 \ubd84\ud560 \ubc29\uc2dd\uc740 \uccad\ud06c\uac00 \ubb38\ub9e5\uc801\uc73c\ub85c \uc77c\uad00\uc131\uc744 \uac16\ub3c4\ub85d \ud558\uc5ec \uc774\ud6c4\uc758 \uc790\uc5f0\uc5b4 \ucc98\ub9ac\ub098 \uc815\ubcf4 \uac80\uc0c9\uc5d0\uc11c \ub354\uc6b1 \uc815\ud655\ud55c \uacb0\uacfc\ub97c \uc5bb\uc744 \uc218 \uc788\ub2e4. \ud2b9\ud788, RAG\uc640 \uac19\uc740 \uc791\uc5c5\uc5d0\uc11c \ubb38\ub9e5\uc774 \uc798 \uc5f0\uacb0\ub41c \uccad\ud06c\ub4e4\uc774 \uc785\ub825\ub418\uba74, \ubaa8\ub378\uc758 \uc751\ub2f5 \uc815\ud654\ub3c4\uac00 \ud06c\uac8c \ud5a5\uc0c1\ub420 \uc218 \uc788\ub2e4.</p> <pre><code>from langChain_experimental.text_splitter import SemanticChunker\n</code></pre> <p>SemanticChunker \uc758 \uae30\ubcf8 \ud30c\ub77c\ubbf8\ud130\ub294 <code>breakpoint_threshold_type='percentile'</code> \uacfc <code>breakpoint_threshold_amount=95</code> \ub85c \uc124\uc815\ub418\uc5b4 \uc788\ub2e4. \uc774\ub294 \uc758\ubbf8\uc801 \ucc28\uc774\uc758 \ubd84\ud3ec\uc5d0\uc11c 95\ubc88\uc9f8 \ubc31\ubd84\uc704\uc218\ub97c \ucd08\uacfc\ud558\ub294 \uc9c0\uc810, \uc989 \uc0c1\uc704 5%\uc5d0 \ud574\ub2f9\ud558\ub294 \ud070 \ucc28\uc774\uac00 \ubc1c\uc0dd\ud558\ub294 \uc9c0\uc810\uc744 \ubd84\ud560 \uae30\uc900\uc73c\ub85c \uc120\ud0dd\ud55c\ub2e4. \uc774\ub97c \ud1b5\ud574 \uc758\ubbf8\uc801\uc73c\ub85c \ud070 \uc804\ud658\uc774 \uc77c\uc5b4\ub098\ub294 \uacf3\uc5d0\uc11c \uc790\uc5f0\uc2a4\ub7fd\uac8c \ud14d\uc2a4\ud2b8\ub97c \ub098\ub20c \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/RAG/LangChain/%EB%8C%80%ED%99%94%20%EA%B8%B0%EB%A1%9D%20%EC%9C%A0%EC%A7%80/","title":"\ub300\ud654 \uae30\ub85d \uc720\uc9c0","text":""},{"location":"search-engine/RAG/LangChain/%EB%8C%80%ED%99%94%20%EA%B8%B0%EB%A1%9D%20%EC%9C%A0%EC%A7%80/#1","title":"1. \ub300\ud654 \uc774\ub825\uc774 \uc911\uc694\ud55c \uc774\uc720","text":"<p>\ucc57\ubd07\uc774 \uc0ac\uc6a9\uc790\uc758 \uc9c8\ubb38\uc744 \uae30\uc5b5\ud558\uace0 \ub9e5\ub77d\uc5d0 \ub9de\uac8c \ub2f5\ubcc0\ud558\uba74 \ub300\ud654 \uacbd\ud5d8\uc774 \uc790\uc5f0\uc2a4\ub7ec\uc6cc\uc9c4\ub2e4. \ubc18\ub300\ub85c \uc774\uc804 \uba54\uc2dc\uc9c0\ub97c \uace0\ub824\ud558\uc9c0 \ubabb\ud558\uba74 \uc9c8\ubb38-\ub2f5\ubcc0\uc774 \ub2e8\uc808\ub418\uc5b4 \uc0ac\uc6a9\uc790\ub294 \ubd88\ud3b8\ud568\uc744 \ub290\ub080\ub2e4. \ub530\ub77c\uc11c \ub300\ud654 \uc774\ub825\uc744 \ud6a8\uacfc\uc801\uc73c\ub85c \uad00\ub9ac\ud558\ub294 \uba54\ubaa8\ub9ac \uacc4\uce35\uc740 \uc2e4\uc6a9\uc801\uc778 \ucc57\ubd07 \uac1c\ubc1c\uc5d0\uc11c \ud544\uc218 \uc694\uc18c\uc774\ub2e4.</p>"},{"location":"search-engine/RAG/LangChain/%EB%8C%80%ED%99%94%20%EA%B8%B0%EB%A1%9D%20%EC%9C%A0%EC%A7%80/#2","title":"2. \uac00\uc7a5 \ub2e8\uc21c\ud55c \ubc29\ubc95: \ud504\ub86c\ud504\ud2b8\uc5d0 \uc774\ub825 \uadf8\ub300\ub85c \ub123\uae30","text":"<p>\uac00\uc7a5 \uc26c\uc6b4 \uc811\uadfc\uc740 \uc774\uc804 \uba54\uc2dc\uc9c0\ub4e4\uc744 \uadf8\ub300\ub85c \ubaa8\ub378\uc5d0 \uc804\ub2ec\ud558\ub294 \ubc29\uc2dd\uc774\ub2e4.</p> <pre><code>from langchain_openai import ChatOpenAI\nfrom langchain_core.prompts import ChatPromptTemplate\n\n# 1) \ud504\ub86c\ud504\ud2b8\uc640 \uccb4\uc778 \uad6c\uc131\nprompt = ChatPromptTemplate.from_messages(\n    [\n        (\"system\", \"\ub2f9\uc2e0\uc740 \uce5c\uc808\ud55c \uc7ac\ubb34 \uc0c1\ub2f4\uac00\uc774\ub2e4.\"),\n        (\"human\", \"{user_input}\")\n    ]\n)\nllm = ChatOpenAI(model_name=\"gpt-4o-mini\", temperature=0.0)\nchain = prompt | llm\n\n# 2) \uc774\uc804 \ub300\ud654 \uc774\ub825\uc744 \uadf8\ub300\ub85c \ub123\uc5b4 \ud638\ucd9c\nai_msg = chain.invoke(\n    {\n        \"user_input\": \"\uc800\ucd95\uc744 \ub298\ub9ac\uae30 \uc704\ud574 \ubb34\uc5c7\uc744 \ud560 \uc218 \uc788\ub098\uc694?\"\n    }\n)\nprint(ai_msg)\n</code></pre> <ul> <li> <p>\uc7a5\uc810: \uad6c\ud604\uc774 \uc27d\ub2e4.</p> </li> <li> <p>\ub2e8\uc810: \ub300\ud654\uac00 \uae38\uc5b4\uc9c8\uc218\ub85d \ud504\ub86c\ud504\ud2b8 \ud06c\uae30\uac00 \ucee4\uc838 \ud1a0\ud070 \ube44\uc6a9\uc774 \uc99d\uac00\ud558\uace0 \uc751\ub2f5 \uc18d\ub3c4\uac00 \ub290\ub824\uc9c4\ub2e4.</p> </li> </ul>"},{"location":"search-engine/RAG/LangChain/%EB%8C%80%ED%99%94%20%EA%B8%B0%EB%A1%9D%20%EC%9C%A0%EC%A7%80/#3-chatmessagehistory","title":"3. \uccb4\uacc4\uc801\uc778 \uc774\ub825 \uad00\ub9ac: <code>ChatMessageHistory</code> \ud65c\uc6a9","text":"<p>LangChain \ub4f1 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc5d0\uc11c\ub294 <code>ChatMessageHistory</code> \ud074\ub798\uc2a4\ub97c \uc81c\uacf5\ud55c\ub2e4. \uc774 \uac1d\uccb4\ub294 \ub300\ud654 \uba54\uc2dc\uc9c0\ub97c \ub9ac\uc2a4\ud2b8 \ud615\ud0dc\ub85c \uc800\uc7a5\ud558\uba70, \uc0c8 \uc9c8\ubb38\uc774 \uc62c \ub54c\ub9c8\ub2e4 <code>add_user_message</code>, <code>add_ai_message</code> \uba54\uc11c\ub4dc\ub85c \uc774\ub825\uc744 \uac31\uc2e0\ud55c\ub2e4. \uc774\ub807\uac8c \ud558\uba74 \uc800\uc7a5, \uc870\ud68c, \uc0ad\uc81c\uac00 \uba85\ud655\ud574\uc838 \ucf54\ub4dc \uc720\uc9c0\ubcf4\uc218\uac00 \uc218\uc6d4\ud558\ub2e4.</p> <pre><code>from langchain.memory import ChatMessageHistory\nfrom langchain_openai import ChatOpenAI\nfrom langchain_core.prompts import ChatPromptTemplate\n\n# 1) \ub300\ud654 \uc774\ub825 \uac1d\uccb4 \uc0dd\uc131\nhistory = ChatMessageHistory()\nhistory.add_user_message(\"\uc800\ucd95\uc744 \ub298\ub9ac\ub824\uba74?\")\nhistory.add_ai_message(\"\uc9c0\ucd9c \ubd84\uc11d\ubd80\ud130 \uc2dc\uc791\ud558\ub77c.\")\n\n# 2) \uccb4\uc778 \uc815\uc758\nprompt = ChatPromptTemplate.from_messages(history.messages + [(\"human\", \"{question}\")])\nllm = ChatOpenAI(model_name=\"gpt-4o-mini\", temperature=0.0)\nchain = prompt | llm\n\n# 3) \uc0c8 \uc9c8\ubb38 \ucc98\ub9ac\nresponse = chain.invoke({\"question\": \"\uc2e0\uc6a9\uce74\ub4dc \uc0ac\uc6a9\uc744 \uc904\uc774\ub294 \ubc29\ubc95\uc740?\"})\nprint(response)\n</code></pre>"},{"location":"search-engine/RAG/LangChain/%EB%8C%80%ED%99%94%20%EA%B8%B0%EB%A1%9D%20%EC%9C%A0%EC%A7%80/#4","title":"4. \ub300\ud654 \uc774\ub825 \ucd5c\uc801\ud654 \uc804\ub7b5","text":""},{"location":"search-engine/RAG/LangChain/%EB%8C%80%ED%99%94%20%EA%B8%B0%EB%A1%9D%20%EC%9C%A0%EC%A7%80/#4-1","title":"4-1. \uba54\uc2dc\uc9c0 \ud2b8\ub9ac\ubc0d","text":"<p>\uac00\uc7a5 \ucd5c\uadfc N\uac1c \uba54\uc2dc\uc9c0\ub9cc \ub0a8\uae30\uace0 \uc624\ub798\ub41c \uae30\ub85d\uc744 \uc0ad\uc81c\ud558\ub294 \ubc29\uc2dd\uc774\ub2e4.</p> <pre><code>MAX_TURNS = 3          # \ucd5c\uadfc 3\ud134\ub9cc \uc720\uc9c0\nPAIR = 2               # user+ai \ud55c \uc30d\n\nif len(history.messages) &gt; MAX_TURNS * PAIR:\n    history.messages = history.messages[-MAX_TURNS * PAIR :]\n</code></pre> <ul> <li> <p>\uc7a5\uc810: \uad6c\ud604\uc774 \uac04\ub2e8\ud558\uba70 \ucd5c\uc2e0 \ub9e5\ub77d\uc740 \uc720\uc9c0\ub41c\ub2e4.</p> </li> <li> <p>\ub2e8\uc810: \uc624\ub798\ub41c \uc815\ubcf4\uac00 \uc644\uc804\ud788 \uc0ac\ub77c\uc9c0\ubbc0\ub85c \uc7a5\uae30 \uc758\uc874\uc131\uc774 \uc788\ub294 \ub300\ud654\uc5d0\uc11c\ub294 \ub9e5\ub77d \uc190\uc2e4\uc774 \ubc1c\uc0dd\ud560 \uc218 \uc788\ub2e4.</p> </li> </ul>"},{"location":"search-engine/RAG/LangChain/%EB%8C%80%ED%99%94%20%EA%B8%B0%EB%A1%9D%20%EC%9C%A0%EC%A7%80/#4-2","title":"4-2. \ub300\ud654 \uc694\uc57d","text":"<p>\uc0ad\uc81c \ub300\uc2e0 \uc694\uc57d \uba54\uc2dc\uc9c0\ub85c \uc555\ucd95\ud574 \ubcf4\uc874\ud558\ub294 \uae30\ubc95\uc774\ub2e4. \uc624\ub798\ub41c \uba54\uc2dc\uc9c0\ub4e4\uc744 \uc694\uc57d\ud558\uace0, \uc6d0\ubb38\uc744 \uc81c\uac70\ud55c \ud6c4 \uc694\uc57d \uacb0\uacfc\ub9cc \ub0a8\uaca8 \ub450\ub294 \ud328\ud134\uc774\ub2e4.</p> <pre><code>from langchain_openai import ChatOpenAI\nfrom langchain_core.prompts import PromptTemplate\nfrom langchain.output_parsers import StrOutputParser\n\n# 1) \uc694\uc57d \uccb4\uc778 \uc815\uc758\nsummary_prompt = PromptTemplate(\n    template=(\n        \"\ub2e4\uc74c \ub300\ud654\ub97c \ub450\uc138 \ubb38\uc7a5\uc73c\ub85c \uc694\uc57d\ud558\ub77c. \"\n        \"\ud575\uc2ec \uc22b\uc790\uc640 \uace0\uc720\uba85\uc0ac\ub294 \uadf8\ub300\ub85c \uc720\uc9c0\ud558\ub77c.\\n\\n{dialogue}\"\n    ),\n    input_variables=[\"dialogue\"],\n)\nsummarizer = summary_prompt | ChatOpenAI(model_name=\"gpt-4o-mini\", temperature=0.0) | StrOutputParser()\n\n# 2) \uc694\uc57d \ub300\uc0c1 \uc120\uc815: \ucd5c\uadfc 3\ud134(6\uba54\uc2dc\uc9c0)\uc744 \uc81c\uc678\nold_msgs = history.messages[:-6]\ndialogue_text = \"\\n\".join([msg.content for msg in old_msgs])\n\n# 3) \uc694\uc57d \uc2e4\ud589\nsummary = summarizer.invoke({\"dialogue\": dialogue_text})\n\n# 4) \uc6d0\ubb38 \uc0ad\uc81c \ud6c4 \uc694\uc57d \uba54\uc2dc\uc9c0\ub85c \ub300\uccb4\nhistory.messages = history.messages[-6:]       # \ucd5c\uadfc 3\ud134\ub9cc \ub0a8\uae40\nhistory.add_system_message(f\"\uc694\uc57d: {summary}\")\n</code></pre> <ul> <li> <p>\uc7a5\uc810: \ub9e5\ub77d\uc744 \ubcf4\uc874\ud558\uba74\uc11c \ud1a0\ud070 \uc218\ub97c \ud06c\uac8c \uc904\uc77c \uc218 \uc788\ub2e4.</p> </li> <li> <p>\ub2e8\uc810: \uc694\uc57d \uc624\ub958\uac00 \ubc1c\uc0dd\ud558\uba74 \ud575\uc2ec \uc815\ubcf4\uac00 \uc65c\uace1\ub420 \uc218 \uc788\ub2e4. \ub530\ub77c\uc11c \ubaa8\ub378 \uc9c0\uc2dc\uc5d0 \u201c\ud575\uc2ec \uc0ac\uc2e4\uc740 \uad6c\uccb4\uc801\uc778 \uc22b\uc790\u00b7\uace0\uc720\uba85\uc0ac\ub85c \ub0a8\uaca8\ub77c\u201d \uac19\uc740 \uc81c\uc57d\uc744 \uba85\ud655\ud788 \uc8fc\uc5b4\uc57c \ud55c\ub2e4.</p> </li> </ul>"},{"location":"search-engine/RAG/LangChain/%EB%8C%80%ED%99%94%20%EA%B8%B0%EB%A1%9D%20%EC%9C%A0%EC%A7%80/#5","title":"5. \ud2b8\ub9ac\ubc0d\uacfc \uc694\uc57d\uc744 \uacb0\ud569\ud55c \ud558\uc774\ube0c\ub9ac\ub4dc \ud328\ud134","text":"<p>\ud604\uc2e4 \uc11c\ube44\uc2a4\uc5d0\uc11c\ub294 \u201c\ucd5c\uadfc \ub300\ud654\ub294 \uc6d0\ubb38 \uc720\uc9c0, \ub354 \uc774\uc804\uc740 \uc694\uc57d \ubcf4\uad00, \uadf8\ubcf4\ub2e4 \uc624\ub798\ub41c \uac83\uc740 \uc0ad\uc81c\u201d\uc640 \uac19\uc740 \ub2e4\ub2e8\uacc4 \uc804\ub7b5\uc774 \ud6a8\uacfc\uc801\uc774\ub2e4.</p> \uad6c\uac04 \ucc98\ub9ac \ubc29\uc548 \ucd5c\uadfc 1 ~ 3\ud134 \uc6d0\ubb38 \uc720\uc9c0 4 ~ 10\ud134 \uc0ac\uc774 \uc694\uc57d \uc800\uc7a5 10\ud134 \uc774\ud6c4 \uc644\uc804 \uc0ad\uc81c <p>\uc774\ub807\uac8c \ud558\uba74 \uc989\uc2dc \ud544\uc694\ud55c \ub9e5\ub77d\uc740 \uc815\ud655\ud788, \uc7a5\uae30\uc801\uc778 \uc774\uc57c\uae30 \ud750\ub984\uc740 \uc694\uc57d\uc73c\ub85c, \ubd88\ud544\uc694\ud558\uac8c \uae34 \uacfc\uac70 \ub370\uc774\ud130\ub294 \uc81c\uac70\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/RAG/LangChain/%EB%8C%80%ED%99%94%20%EA%B8%B0%EB%A1%9D%20%EC%9C%A0%EC%A7%80/#6","title":"6. \uc704\ud5d8 \uc694\uc18c\uc640 \ubaa8\ubc94 \uc0ac\ub840","text":"\uc704\ud5d8 \uc694\uc18c \ubc29\uc9c0 \ubc29\ubc95 \uc694\uc57d \uacfc\uc815\uc758 \uc815\ubcf4 \uc190\uc2e4 \uc911\uc694 \ud0a4\uc6cc\ub4dc\u00b7\uc22b\uc790\ub97c \uadf8\ub300\ub85c \ub0a8\uae30\ub3c4\ub85d \uc2dc\uc2a4\ud15c \uc9c0\uc2dc \ucd94\uac00 \uc0ac\uc6a9\uc790 \uac1c\uc778\uc815\ubcf4 \ub178\ucd9c \uc694\uc57d \uc804\uc5d0 PII \ub9c8\uc2a4\ud0b9 \ub85c\uc9c1 \uc0bd\uc785 \ud1a0\ud070 \ud55c\ub3c4 \ucd08\uacfc\ub85c \uc778\ud55c \uc624\ub958 \ud2b8\ub9ac\ubc0d \ub610\ub294 \uc694\uc57d \ud6c4 \ud1a0\ud070 \uae38\uc774 \uac80\uc99d \ud568\uc218\ub85c \ucd5c\uc885 \ud655\uc778 \uba40\ud2f0 \uc138\uc158 \uac04 \uc774\ub825 \ucda9\ub3cc \uc0ac\uc6a9\uc790 ID\ubcc4 \ubd84\ub9ac\ub41c \uba54\ubaa8\ub9ac \uc800\uc7a5\uc18c \uc0ac\uc6a9"},{"location":"search-engine/RAG/LangChain/%EB%8C%80%ED%99%94%20%EA%B8%B0%EB%A1%9D%20%EC%9C%A0%EC%A7%80/#7","title":"7. \uacb0\ub860","text":"<p>\ub300\ud654\ud615 AI\uc758 \ud488\uc9c8\uc740 \ub9e5\ub77d \uc720\uc9c0 \ub2a5\ub825\uc5d0\uc11c \uacb0\uc815\ub41c\ub2e4.</p> <ul> <li> <p>\ud504\ub86c\ud504\ud2b8 \uc9c1\uc0bd \ubc29\uc2dd\uc740 \ube60\ub974\uc9c0\ub9cc \uc2a4\ucf00\uc77c\uc5d0 \ud55c\uacc4\uac00 \uc788\ub2e4.</p> </li> <li> <p><code>ChatMessageHistory</code> \uae30\ubc18 \uad6c\uc870\ud654 \uc800\uc7a5\uc740 \uc720\uc9c0\ubcf4\uc218\ub97c \ub3d5\ub294\ub2e4.</p> </li> <li> <p>\ud2b8\ub9ac\ubc0d\uc740 \uc18d\ub3c4\ub97c, \uc694\uc57d\uc740 \uc7a5\uae30 \ub9e5\ub77d\uc744 \ubcf4\uc874\ud55c\ub2e4.</p> </li> <li> <p>\ub450 \uae30\ubc95\uc744 \uc0c1\ud669\uc5d0 \ub9de\uac8c \uc870\ud569\ud558\uba74 \uc751\ub2f5 \uc9c0\uc5f0\u00b7\ube44\uc6a9\u00b7\ub9e5\ub77d \uc190\uc2e4\uc744 \uade0\ud615 \uc788\uac8c \uad00\ub9ac\ud560 \uc218 \uc788\ub2e4.</p> </li> </ul> <p>\ucc57\ubd07 \uac1c\ubc1c\uc790\ub294 \uc11c\ube44\uc2a4 \ud2b9\uc131\uc5d0 \ub530\ub77c \uba54\uc2dc\uc9c0 \ubcf4\uc874 \uc8fc\uae30, \uc694\uc57d \uc8fc\uccb4(\ubaa8\ub378\u00b7\uaddc\uce59 \uae30\ubc18), \uac1c\uc778\uc815\ubcf4 \ucc98\ub9ac \uc815\ucc45\uc744 \uba85\ud655\ud788 \uc815\uc758\ud574\uc57c \ud55c\ub2e4. \uc774\ub97c \ud1b5\ud574 \uc0ac\uc6a9\uc790\ub294 \ub04a\uae40 \uc5c6\ub294 \ub300\ud654\ub97c \uacbd\ud5d8\ud558\uace0, \uc6b4\uc601\uc790\ub294 \ub9ac\uc18c\uc2a4\ub97c \ud6a8\uc728\uc801\uc73c\ub85c \ud65c\uc6a9\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/RAG/LangChain/%EB%8C%80%ED%99%94%20%EA%B8%B0%EB%A1%9D%20%EC%9C%A0%EC%A7%80/#chatmessagehistory","title":"\ucd94\uac00) chatMessageHistory \uc774\ub780?","text":""},{"location":"search-engine/RAG/LangChain/%EB%8C%80%ED%99%94%20%EA%B8%B0%EB%A1%9D%20%EC%9C%A0%EC%A7%80/#1-chatmessagehistory","title":"1. <code>ChatMessageHistory</code>\uac00 \ub370\uc774\ud130\ub97c \ubcf4\uad00\ud558\ub294 \uc704\uce58","text":"<p><code>ChatMessageHistory</code> \ud074\ub798\uc2a4 \uc790\uccb4\ub294 \ub2e8\uc21c\ud55c \ud30c\uc774\uc36c \ub9ac\uc2a4\ud2b8 \ub798\ud37c\uc774\ub2e4. \uc989, \uac1d\uccb4\uac00 \uc0dd\uc131\ub41c \ud504\ub85c\uc138\uc2a4\uc758 \uba54\ubaa8\ub9ac(RAM) \uc5d0\ub9cc \ub370\uc774\ud130\ub97c \uc800\uc7a5\ud55c\ub2e4. \ud30c\uc77c, \ub370\uc774\ud130\ubca0\uc774\uc2a4, \uce90\uc2dc \uc11c\ubc84 \ub4f1\uc5d0 \uc790\ub3d9\uc73c\ub85c \uc4f0\uc9c0 \uc54a\uc73c\uba70, \ubcc4\ub3c4\uc758 \uc9c1\ub82c\ud654 \ub85c\uc9c1\ub3c4 \ub0b4\uc7a5\ub3fc \uc788\uc9c0 \uc54a\ub2e4.</p> <pre><code>from langchain.memory import ChatMessageHistory\n\nhistory = ChatMessageHistory()     # \ub0b4\ubd80\uc801\uc73c\ub85c self.messages = [] \ud615\ud0dc\nhistory.add_user_message(\"\uc548\ub155?\")\nhistory.add_ai_message(\"\uc548\ub155\ud558\uc138\uc694.\")\n</code></pre> <p>\uc704 \ucf54\ub4dc\uc5d0\uc11c \ub300\ud654 \ub0b4\uc6a9\uc740 <code>history.messages</code> \ub9ac\uc2a4\ud2b8\uc5d0\ub9cc \uc800\uc7a5\ub418\uc5b4 \uc788\uae30 \ub54c\ubb38\uc5d0, \uac19\uc740 \ud30c\uc774\uc36c \ud504\ub85c\uc138\uc2a4 \uc548\uc5d0\uc11c\ub9cc \uc720\ud6a8\ud558\ub2e4.</p>"},{"location":"search-engine/RAG/LangChain/%EB%8C%80%ED%99%94%20%EA%B8%B0%EB%A1%9D%20%EC%9C%A0%EC%A7%80/#2_1","title":"2. \ub370\uc774\ud130 \ubcf4\uc874 \uae30\uac04","text":"<p><code>ChatMessageHistory</code>\ub294 \uba85\uc2dc\uc801\uc73c\ub85c \uc0ad\uc81c\ud558\uac70\ub098 \ud504\ub85c\uc138\uc2a4\uac00 \uc885\ub8cc\ub420 \ub54c\uae4c\uc9c0 \uba54\uc2dc\uc9c0\ub97c \ubcf4\uad00\ud55c\ub2e4. \ubcc4\ub3c4\uc758 TTL(Time-to-Live)\uc774\ub098 \ub9cc\ub8cc \uc815\ucc45\uc740 \uc5c6\uc73c\ubbc0\ub85c, \ub2e4\uc74c \uc911 \ud558\ub098\uac00 \uc77c\uc5b4\ub098\uae30 \uc804\uae4c\uc9c0 \uae30\ub85d\uc740 \uacc4\uc18d \ub0a8\uc544 \uc788\ub2e4.</p> <ol> <li> <p>\uc0ac\uc6a9\uc790\uac00 \uc9c1\uc811 <code>history.messages = [...]</code> \ud639\uc740 <code>history.clear()</code> \ub4f1\uc73c\ub85c \uc0ad\uc81c</p> </li> <li> <p>\uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ub85c\uc9c1\uc5d0\uc11c \ud2b8\ub9ac\ubc0d, \uc694\uc57d \ub4f1\uc73c\ub85c \uae30\ub85d\uc744 \ub36e\uc5b4\uc4f0\uae30</p> </li> <li> <p>\ud30c\uc774\uc36c \ud504\ub85c\uc138\uc2a4\uac00 \uc885\ub8cc</p> </li> </ol>"},{"location":"search-engine/RAG/LangChain/%EB%8C%80%ED%99%94%20%EA%B8%B0%EB%A1%9D%20%EC%9C%A0%EC%A7%80/#3","title":"3. \uc11c\ubc84\ub97c \uc7ac\uc2dc\uc791\ud558\uba74 \uae30\ub85d\uc774 \ub0a8\ub294\uac00","text":"<p>\uae30\ubcf8 \uad6c\ud604\ub9cc \uc0ac\uc6a9\ud560 \uacbd\uc6b0 \ub0a8\uc9c0 \uc54a\ub294\ub2e4. \uc11c\ubc84(=\ud30c\uc774\uc36c \ud504\ub85c\uc138\uc2a4)\ub97c \uc7ac\uc2dc\uc791\ud558\uba74 \uba54\ubaa8\ub9ac \ub0b4\uc6a9\uc774 \ubaa8\ub450 \ucd08\uae30\ud654\ub418\uae30 \ub54c\ubb38\uc5d0 <code>ChatMessageHistory</code> \uc5ed\uc2dc \uc0ac\ub77c\uc9c4\ub2e4.</p>"},{"location":"search-engine/RAG/LangChain/%EB%8C%80%ED%99%94%20%EA%B8%B0%EB%A1%9D%20%EC%9C%A0%EC%A7%80/#4_1","title":"4. \uc601\uc18d \uc800\uc7a5\uc774 \ud544\uc694\ud55c \uacbd\uc6b0","text":"<p>LangChain\uc740 \ub2e4\uc591\ud55c \u201cPersistent Memory\u201d \uad6c\ud604\uccb4\ub97c \ud568\uaed8 \uc81c\uacf5\ud55c\ub2e4. \uc6d0\ub9ac\ub294 \ub3d9\uc77c\ud558\uc9c0\ub9cc, \ub0b4\ubd80 \uc800\uc7a5\uc18c\uac00 Redis\u00b7SQL\u00b7\ud30c\uc77c \uc2dc\uc2a4\ud15c \ub4f1\uc73c\ub85c \ubc14\ub010\ub2e4. \ub300\ud45c \uc608\uc2dc\ub294 \ub2e4\uc74c\uacfc \uac19\ub2e4.</p> \uba54\ubaa8\ub9ac \ud074\ub798\uc2a4 \uc800\uc7a5 \ub9e4\uccb4 \ud2b9\uc9d5 <code>RedisChatMessageHistory</code> Redis \ube60\ub978 \uc811\uadfc \uc18d\ub3c4, TTL \uc124\uc815 \uac00\ub2a5 <code>PostgresChatMessageHistory</code> PostgreSQL \uad00\uacc4\ud615 \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc0ac\uc6a9, \ucffc\ub9ac\u00b7\ubc31\uc5c5 \uc6a9\uc774 <code>ChatMessageHistory</code> + Pickle \ub85c\uceec \ud30c\uc77c \ucee4\uc2a4\ud140 \uc9c1\ub82c\ud654 \ucf54\ub4dc \ud544\uc694 <code>SimpleDirectoryChatMessageHistory</code> \ub514\ub809\ud130\ub9ac(\ud14d\uc2a4\ud2b8) \ub300\ud654\ubcc4 \ud30c\uc77c\ub85c \uc800\uc7a5, Git \uad00\ub9ac \uac00\ub2a5"},{"location":"search-engine/RAG/LangChain/%EB%8C%80%ED%99%94%20%EA%B8%B0%EB%A1%9D%20%EC%9C%A0%EC%A7%80/#redis","title":"\uc608\uc2dc: Redis\uc5d0 \uc800\uc7a5","text":"<pre><code>from langchain.memory import RedisChatMessageHistory\n\nhistory = RedisChatMessageHistory(\n    session_id=\"user123\",      # \uc0ac\uc6a9\uc790\u00b7\uc138\uc158 \uc2dd\ubcc4\uc790\n    url=\"redis://localhost:6379/0\", \n    ttl=60 * 60 * 24           # \uc120\ud0dd: 24\uc2dc\uac04 \ud6c4 \ub9cc\ub8cc\n)\nhistory.add_user_message(\"\uc548\ub155?\")\n</code></pre> <p>\uc774\ub807\uac8c \ud558\uba74 \uc11c\ubc84\ub97c \uc7ac\uc2dc\uc791\ud574\ub3c4 Redis\uc5d0 \ub0a8\uc544 \uc788\uae30 \ub54c\ubb38\uc5d0 \uae30\ub85d\uc774 \uc720\uc9c0\ub41c\ub2e4.</p>"},{"location":"search-engine/RAG/LangChain/%EB%8C%80%ED%99%94%20%EA%B8%B0%EB%A1%9D%20%EC%9C%A0%EC%A7%80/#5_1","title":"5. \uc2e4\ubb34 \uc124\uacc4 \uad8c\uc7a5 \uc0ac\ud56d","text":"<ol> <li> <p>\uc138\uc158 \uc2dd\ubcc4\uc790 \ubd84\ub9ac     \uba40\ud2f0 \uc0ac\uc6a9\uc790 \uc11c\ube44\uc2a4\ub77c\uba74 <code>session_id</code> \ub610\ub294 <code>user_id</code> \ub2e8\uc704\ub85c \ud788\uc2a4\ud1a0\ub9ac\ub97c \uad6c\ubd84\ud574\uc57c \ucda9\ub3cc\uc744 \ub9c9\uc744 \uc218 \uc788\ub2e4.</p> </li> <li> <p>TTL \ub610\ub294 \ud2b8\ub9ac\ubc0d \uc815\ucc45     \ub300\ud654\uac00 \uae38\uc5b4\uc9c0\uba74 \uc800\uc7a5 \uacf5\uac04\uacfc \ud1a0\ud070 \ube44\uc6a9\uc774 \uc99d\uac00\ud558\ubbc0\ub85c, \ub9cc\ub8cc\uc2dc\uac04(TTL)\uc774\ub098 \ud2b8\ub9ac\ubc0d \ub85c\uc9c1\uc744 \uc124\uc815\ud558\ub294 \ud3b8\uc774 \uc88b\ub2e4.</p> </li> <li> <p>\ubcf4\uc548\u00b7\uac1c\uc778\uc815\ubcf4 \uad00\ub9ac     \uc678\ubd80 \uc800\uc7a5\uc18c(Redis, RDBMS)\uc5d0 \uae30\ub85d\uc744 \ub0a8\uae38 \ub54c\ub294 \uc554\ud638\ud654, \uc811\uadfc \uc81c\uc5b4, PII \ub9c8\uc2a4\ud0b9 \uc815\ucc45\uc744 \ud568\uaed8 \uc124\uacc4\ud574\uc57c \ud55c\ub2e4.</p> </li> <li> <p>\ubc31\uc5c5\u00b7\ubaa8\ub2c8\ud130\ub9c1     \uc7a5\uae30 \ubcf4\uc874\uc774 \ud544\uc694\ud558\ub2e4\uba74 \uc815\uae30 \ubc31\uc5c5\uacfc \ubaa8\ub2c8\ud130\ub9c1\uc744 \ud1b5\ud574 \ub370\uc774\ud130 \uc190\uc2e4\uc744 \ubc29\uc9c0\ud55c\ub2e4.</p> </li> </ol>"},{"location":"search-engine/RAG/LangChain/%EB%8C%80%ED%99%94%20%EA%B8%B0%EB%A1%9D%20%EC%9C%A0%EC%A7%80/#6_1","title":"6. \uc694\uc57d","text":"<ul> <li> <p><code>ChatMessageHistory</code> \uae30\ubcf8\ud615\uc740 \ud504\ub85c\uc138\uc2a4 \uba54\ubaa8\ub9ac\uc5d0\ub9cc \uc800\uc7a5\ub418\uba70, \uc11c\ubc84 \uc7ac\uc2dc\uc791 \uc2dc \uae30\ub85d\uc774 \uc0ac\ub77c\uc9c4\ub2e4.</p> </li> <li> <p>\uc601\uc18d\uc131\uc774 \ud544\uc694\ud558\uba74 Redis, Postgres \ub4f1\uacfc \uc5f0\ub3d9\ud558\ub294 Persistent Memory \uad6c\ud604\uc744 \uc0ac\uc6a9\ud574\uc57c \ud55c\ub2e4.</p> </li> <li> <p>\uc800\uc7a5 \uae30\uac04\uc740 \uae30\ubcf8\uc801\uc73c\ub85c \ubb34\ud55c\uc774\uba70, \ub9cc\ub8cc \uc815\ucc45\uc740 \uac1c\ubc1c\uc790\uac00 \uc9c1\uc811 \uc124\uc815\ud574\uc57c \ud55c\ub2e4.</p> </li> </ul>"},{"location":"search-engine/RAG/LangChain/%EC%9D%BC%EA%B4%80%EB%90%9C%20output%20%28PydanticOutputParser%29/","title":"\uc77c\uad00\ub41c output (PydanticOutputParser)","text":"<p><code>PydanticOutputParser</code>\ub294 LangChain\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 \ub3c4\uad6c\ub85c, \ub300\ud615 \uc5b8\uc5b4 \ubaa8\ub378(LLM)\uc758 \ucd9c\ub825 \uacb0\uacfc\ub97c Pydantic \ubaa8\ub378 \uae30\ubc18\uc758 \uad6c\uc870\ud654\ub41c \ub370\uc774\ud130\ub85c \ud30c\uc2f1\ud558\uae30 \uc704\ud574 \uc0ac\uc6a9\ub41c\ub2e4. \uc774\ub97c \ud1b5\ud574 \uc790\uc5f0\uc5b4 \ud639\uc740 JSON \ud615\ud0dc\ub85c \uc0dd\uc131\ub41c LLM\uc758 \uc751\ub2f5\uc744 \ud0c0\uc785\uc774 \uba85\ud655\ud55c \ub370\uc774\ud130\ub85c \ubcc0\ud658\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/RAG/LangChain/%EC%9D%BC%EA%B4%80%EB%90%9C%20output%20%28PydanticOutputParser%29/#_1","title":"\ubaa9\uc801","text":"<p><code>PydanticOutputParser</code>\uc758 \uc8fc\uc694 \ubaa9\uc801\uc740 \ub2e4\uc74c\uacfc \uac19\ub2e4:</p> <ul> <li> <p>LLM \ucd9c\ub825 \uacb0\uacfc\ub97c Pydantic \ubaa8\ub378\uc5d0 \ub9de\uac8c \ud30c\uc2f1\ud558\uc5ec \uad6c\uc870\ud654\ub41c \ud615\ud0dc\ub85c \uc81c\uacf5\ud55c\ub2e4.</p> </li> <li> <p>\ucd9c\ub825\uac12\uc5d0 \ub300\ud574 \ud0c0\uc785 \uc720\ud6a8\uc131 \uac80\uc0ac\ub97c \uc218\ud589\ud568\uc73c\ub85c\uc368 \uc2e0\ub8b0\ub3c4\ub97c \ub192\uc778\ub2e4.</p> </li> <li> <p>\ud6c4\uc18d \ucc98\ub9ac\uc5d0 \uc801\ud569\ud55c \ub370\uc774\ud130 \ud615\ud0dc\ub85c \uc815\uc81c\ud568\uc73c\ub85c\uc368 \ub2e4\ub978 \uc2dc\uc2a4\ud15c\uacfc\uc758 \uc5f0\ub3d9\uc774\ub098 \ubd84\uc11d\uc744 \uac00\ub2a5\ud558\uac8c \ud55c\ub2e4. </p> </li> </ul>"},{"location":"search-engine/RAG/LangChain/%EC%9D%BC%EA%B4%80%EB%90%9C%20output%20%28PydanticOutputParser%29/#_2","title":"\uae30\ubcf8 \uc0ac\uc6a9 \uc608\uc2dc","text":"<pre><code>from langchain.output_parsers import PydanticOutputParser\nfrom pydantic import BaseModel\n\nclass Answer(BaseModel):\n    question: str\n    answer: str\n\nparser = PydanticOutputParser(pydantic_object=Answer)\n\n# \ud504\ub86c\ud504\ud2b8 \uc608\uc2dc\nprompt = f\"\"\"\n\ub2e4\uc74c \ud615\uc2dd\uc5d0 \ub530\ub77c \ub2f5\ubcc0\ud558\uc2ed\uc2dc\uc624:\n{parser.get_format_instructions()}\n\n\uc9c8\ubb38: '\ud55c\uad6d\uc758 \uc218\ub3c4\ub294 \uc5b4\ub514\uc778\uac00?'\n\"\"\"\n\n# LLM\uc758 \uc751\ub2f5 \uc608\uc2dc\nllm_output = \"\"\"\n{\n  \"question\": \"\ud55c\uad6d\uc758 \uc218\ub3c4\ub294 \uc5b4\ub514\uc778\uac00?\",\n  \"answer\": \"\uc11c\uc6b8\"\n}\n\"\"\"\n\n# \ud30c\uc2f1 \uc2e4\ud589\nparsed = parser.parse(llm_output)\nprint(parsed.question)  # \u2192 \"\ud55c\uad6d\uc758 \uc218\ub3c4\ub294 \uc5b4\ub514\uc778\uac00?\"\nprint(parsed.answer)    # \u2192 \"\uc11c\uc6b8\"\n</code></pre>"},{"location":"search-engine/RAG/LangChain/%EC%9D%BC%EA%B4%80%EB%90%9C%20output%20%28PydanticOutputParser%29/#_3","title":"\uc8fc\uc694 \uba54\uc11c\ub4dc","text":"\uba54\uc11c\ub4dc\uba85 \uc124\uba85 <code>parse(text: str)</code> LLM\uc758 \ucd9c\ub825 \ud14d\uc2a4\ud2b8\ub97c \uc9c0\uc815\ub41c Pydantic \ubaa8\ub378\ub85c \ud30c\uc2f1\ud55c\ub2e4. <code>get_format_instructions()</code> LLM\uc774 \uc5b4\ub5a4 \ud615\uc2dd\uc73c\ub85c \uc751\ub2f5\uc744 \ucd9c\ub825\ud574\uc57c \ud558\ub294\uc9c0\uc5d0 \ub300\ud55c \ud3ec\ub9f7 \uac00\uc774\ub4dc\ub97c \ubb38\uc790\uc5f4\ub85c \ubc18\ud658\ud55c\ub2e4."},{"location":"search-engine/RAG/LangChain/%EC%9D%BC%EA%B4%80%EB%90%9C%20output%20%28PydanticOutputParser%29/#_4","title":"\ud65c\uc6a9 \uc804\ub7b5","text":"<ul> <li> <p>\ud504\ub86c\ud504\ud2b8 \ud15c\ud50c\ub9bf\uacfc \ud568\uaed8 \uc0ac\uc6a9\ud558\uc5ec LLM\uc774 JSON \ud615\uc2dd\uc758 \uad6c\uc870\ud654\ub41c \ucd9c\ub825\uc744 \uc0dd\uc131\ud558\ub3c4\ub85d \uc720\ub3c4\ud560 \uc218 \uc788\ub2e4.</p> </li> <li> <p>\ud30c\uc2f1\ub41c \uacb0\uacfc\ub294 \ub2e4\ub978 API, \ub370\uc774\ud130\ubca0\uc774\uc2a4, \ub610\ub294 UI\uc5d0 \uadf8\ub300\ub85c \uc5f0\uacb0 \uac00\ub2a5\ud55c \uc0c1\ud0dc\ub85c \uc81c\uacf5\ub418\ubbc0\ub85c \ud6c4\ucc98\ub9ac\uac00 \uac04\ub2e8\ud558\ub2e4.</p> </li> <li> <p>Pydantic\uc758 validation \uae30\ub2a5\uc744 \ud1b5\ud574 \uc751\ub2f5 \uad6c\uc870\ub97c \uac80\uc99d \ubc0f \uc608\uc678 \ucc98\ub9ac\ud558\ub294 \ub370 \ud65c\uc6a9\ud560 \uc218 \uc788\ub2e4.</p> </li> </ul>"},{"location":"search-engine/RAG/LangChain/%EC%9D%BC%EA%B4%80%EB%90%9C%20output%20%28PydanticOutputParser%29/#_5","title":"\uc720\uc758\uc0ac\ud56d","text":"<ul> <li> <p><code>PydanticOutputParser</code>\ub294 LLM\uc774 JSON \ud615\uc2dd\uc744 \uc815\ud655\ud788 \ub530\ub974\ub3c4\ub85d \ud504\ub86c\ud504\ud2b8\ub97c \uc815\uad50\ud558\uac8c \uc124\uacc4\ud574\uc57c \uc81c\ub300\ub85c \uc791\ub3d9\ud55c\ub2e4.</p> </li> <li> <p>\ubaa8\ub378 \ucd9c\ub825\uc774 JSON \ud615\uc2dd\uc744 \ubc97\uc5b4\ub098\uac70\ub098 \ub204\ub77d\ub41c \ud544\ub4dc\ub97c \ud3ec\ud568\ud560 \uacbd\uc6b0 <code>ValidationError</code>\uac00 \ubc1c\uc0dd\ud560 \uc218 \uc788\ub2e4. \uc774 \uacbd\uc6b0 \uc608\uc678 \ucc98\ub9ac\ub97c \ud1b5\ud574 \ubcf4\uc644\ud558\uac70\ub098 <code>OutputFixingParser</code>\uc640 \uac19\uc774 \uc0ac\uc6a9\ud558\ub294 \uac83\uc774 \uc77c\ubc18\uc801\uc774\ub2e4.</p> </li> </ul> <p>LangChain\uc5d0\uc11c \ubcf5\uc7a1\ud55c \uc5b8\uc5b4 \ubaa8\ub378 \uc751\ub2f5\uc744 \ub2e4\ub8f0 \ub54c, <code>PydanticOutputParser</code>\ub294 \uad6c\uc870\ud654\ub41c \ub370\uc774\ud130 \uae30\ubc18 \ud30c\uc774\ud504\ub77c\uc778\uc744 \uad6c\ucd95\ud558\ub294 \ub370 \ub9e4\uc6b0 \uc720\uc6a9\ud55c \ub3c4\uad6c\uc774\ub2e4.</p> <p>\ucd94\uac00\ub85c,</p> <pre><code>model = ChatOpenAI(model_name=\"gpt-4o\", temperature=0.0)\n</code></pre> <p><code>temperature</code> \ub97c 0.0 \uc73c\ub85c \uc124\uc815\ud558\uc5ec AI\uac00 \ub354\uc6b1 \uc77c\uad00\ub41c \ub2f5\ubcc0\uc744 \ud560 \uc218 \uc788\ub3c4\ub85d \ud569\ub2c8\ub2e4.</p> <pre><code>class FinancialAdvice(BaseModel):\n    setup: str = Feild(description=\"\uae08\uc735 \uc870\uc5b8 \uc0c1\ud669\uc744 \uc124\uc815\ud558\uae30 \uc704\ud55c \uc9c8\ubb38\")\n    advice: str = Field(description=\"\uc9c8\ubb38\uc744 \ud574\uacb0\ud558\uae30 \uc704\ud55c \uae08\uc735 \ub2f5\ubcc0\")\n\n    @model_validator(mode=\"before\")\n    @classmethod\n    def question_ends_with_question_mark(cls, values: dict) -&gt; dict:\n        setup = values.get(\"setup\", \"\")\n        if not setup.endswith(\"?\"):\n            raise ValueError(\"\uc9c8\ubb38\ub41c \uc9c8\ubb38 \ud615\uc2dd\uc785\ub2c8\ub2e4! \uc9c8\ubb38\uc740 '?'\ub85c \ub05d\ub098\uc57c \ud569\ub2c8\ub2e4.\")\n        return values\n</code></pre> <p><code>Pydantic</code> \uc744 \uc0ac\uc6a9\ud558\uc5ec FinancialAdvice \ub77c\ub294 \ud074\ub798\uc2a4\ub97c \uc815\uc758\ud55c\ub2e4. \uc774 \ud074\ub798\uc2a4\ub294 AI \ubaa8\ub378\uc774 \uc81c\uacf5\ud558\ub294 \ub370\uc774\ud130\ub97c \uad6c\uc870\ud654\ub41c \ud615\ud0dc\ub85c \uc800\uc7a5\ud558\uae30 \uc704\ud55c \ub370\uc774\ud130 \ubaa8\ub378\uc744 \ub9cc\ub4e0\ub2e4.</p> <p><code>BaseModel</code> \uc740 <code>Pydantic</code> \uc758 \uae30\ubcf8 \ubaa8\ub378 \ud074\ub798\uc2a4\ub85c \ub370\uc774\ud130\ub97c \uad6c\uc870\ud654\ud558\uace0 \uac80\uc99d\ud558\ub294 \ub370 \uc0ac\uc6a9\ub418\uba70, <code>Field</code>\ub294 \uac01 \ud544\ub4dc\uc5d0 \ub300\ud55c \uc124\uba85\uacfc \uc720\ud6a8\uc131 \uac80\uc99d \uc815\ubcf4\ub97c \ucd94\uac00\ud558\ub294 \ub370 \uc0ac\uc6a9\ub41c\ub2e4.</p> <p><code>setup</code> \ud544\ub4dc\ub294 \uae08\uc735 \uc870\uc5b8 \uc0c1\ud669\uc744 \ub098\ud0c0\ub0b4\ub294 \uc9c8\ubb38\uc744, <code>advice</code> \ud544\ub4dc\ub294 \ud574\ub2f9 \uc9c8\ubb38\uc5d0 \ub300\ud55c \uad6c\uccb4\uc801\uc778 \uae08\uc735 \uc870\uc5b8 \ub2f5\ubcc0\uc744 \uc800\uc7a5\ud558\ub294 \uc5ed\ud560\uc744 \ud55c\ub2e4.</p> <p>\ub610\ud55c <code>model_validator</code> \ub370\ucf54\ub808\uc774\ud130\ub97c \uc0ac\uc6a9\ud574 \uc0ac\uc6a9\ud574 \uc9c8\ubb38 \ud615\uc2dd\uc774 \uc62c\ubc14\ub978\uc9c0 \uac80\uc99d\ud558\ub294 \ub85c\uc9c1\uc744 \ucd94\uac00\ud588\ub2e4.  \uc774 \ub85c\uc9c1\uc740 <code>question_ends_with_question_mark()</code> \ub77c\ub294 \ud074\ub798\uc2a4 \uba54\uc11c\ub4dc\uc5d0\uc11c \ucc98\ub9ac\ub41c\ub2e4. </p> <p>AI\uac00 \uc0dd\uc131\ud55c \uc9c8\ubb38\uc774 \ubb3c\uc74c\ud45c(?) \ub85c \ub05d\ub098\ub294\uc9c0 \ud655\uc778\ud558\uba70, \uadf8\ub807\uc9c0 \uc54a\uc744 \uacbd\uc6b0 ValueError\ub97c \ubc1c\uc0dd\uc2dc\ucf1c \"\uc798\ubabb\ub41c \uc9c8\ubb38 \ud615\uc2dd\uc785\ub2c8\ub2e4! \uc9c8\ubb38\uc740 '?'\ub85c \ub05d\ub098\uc57c \ud569\ub2c8\ub2e4.\" \ub77c\ub294 \uc624\ub958 \uba54\uc2dc\uc9c0\ub97c \ubc18\ud658\ud55c\ub2e4.</p> <p>\uacb0\uacfc\uc801\uc73c\ub85c FinancialAdvice \ubaa8\ub378\uc744 \uc0ac\uc6a9\ud558\uba74 \uc9c8\ubb38\uacfc \ub2f5\ubcc0\uc744 \uba85\ud655\ud558\uac8c \uad6c\ubd84\ud560 \uc218 \uc788\uc73c\uba70, AI \uc751\ub2f5\uc758 \ud615\uc2dd\uc801 \uc624\ub958\ub97c \ubc29\uc9c0\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>parser = PydanticOutPutParser(pydantic_object=FiancialAdvice)\nprompt = PromptTemplate(\n    template=\"\ub2e4\uc74c \uae08\uc735 \uad00\ub828 \uc9c8\ubb38\uc5d0 \ub2f5\ubcc0\ud574 \uc8fc\uc138\uc694. \\n{format_instructions}\\n\uc9c8\ubb38: {query}\\n\",\n    input_vriables=[\"query\"]\n    partial_variables={\"format_instructions\": parser.get_format_instructions()},\n)\n\n# \uc5b8\uc5b4 \ubaa8\ub378\uc744 \uc0ac\uc6a9\ud574 \ub370\uc774\ud130 \uad6c\uc870\ub97c \ucc44\uc6b0\ub3c4\ub85d \ud504\ub86c\ud504\ud2b8\uc640 \ubaa8\ub378 \uc124\uc815\nchain = prompt | model | parser\n</code></pre> <pre><code>try: \n    result = chain.invoke({\"query\": \"\ubd80\ub3d9\uc0b0\uc5d0 \uad00\ub828\ud558\uc5ec \uae08\uc735 \uc870\uc5b8\uc744 \ubc1b\uc744 \uc218 \uc788\uac8c \uc9c8\ubb38\ud558\ub77c.\"})\n    print(result)\nexcept: Exception as e:\n    print(f\"\uc624\ub958 \ubc1c\uc0dd: {e}\")\n</code></pre>"},{"location":"search-engine/RAG/LangChain/%EC%9D%BC%EA%B4%80%EB%90%9C%20output%20%28PydanticOutputParser%29/#_6","title":"\uc804\uccb4 \ucf54\ub4dc","text":"<pre><code>from pydantic import BaseModel, Field, field_validator\nfrom langchain_openai import ChatOpenAI\nfrom langchain.output_parsers import PydanticOutputParser\nfrom langchain_core.prompts import PromptTemplate\nfrom dotenv import load_dotenv\nimport os\n\n# .env \ud30c\uc77c\uc5d0\uc11c \ud658\uacbd\ubcc0\uc218 \ub85c\ub4dc\nload_dotenv()\napi_key = os.getenv(\"OPENAI_API_KEY\")\n\nif not api_key:\n    raise EnvironmentError(\"OPENAI_API_KEY\uac00 .env\uc5d0 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.\")\n\n# \uc5b8\uc5b4 \ubaa8\ub378 \uc124\uc815\nmodel = ChatOpenAI(\n    model_name=\"gpt-4o-mini\",\n    temperature=0.0,\n    api_key=api_key,\n)\n\n# \uae08\uc735 \uc870\uc5b8 \ubaa8\ub378 \uc815\uc758\nclass FinancialAdvice(BaseModel):\n    setup: str = Field(description=\"\uae08\uc735 \uc870\uc5b8 \uc0c1\ud669\uc744 \uc124\uc815\ud558\uae30 \uc704\ud55c \uc9c8\ubb38\")\n    advice: str = Field(description=\"\uc9c8\ubb38\uc744 \ud574\uacb0\ud558\uae30 \uc704\ud55c \uae08\uc735 \ub2f5\ubcc0\")\n\n    @field_validator(\"setup\")\n    @classmethod\n    def question_must_end_with_question_mark(cls, v):\n        if not v.strip().endswith(\"?\"):\n            raise ValueError(\"\uc798\ubabb\ub41c \uc9c8\ubb38 \ud615\uc2dd\uc785\ub2c8\ub2e4! \uc9c8\ubb38\uc740 '?'\ub85c \ub05d\ub098\uc57c \ud569\ub2c8\ub2e4.\")\n        return v\n\n# \ucd9c\ub825 \ud30c\uc11c \uc124\uc815\nparser = PydanticOutputParser(pydantic_object=FinancialAdvice)\n\n# \ud504\ub86c\ud504\ud2b8 \ud15c\ud50c\ub9bf \uc815\uc758\nprompt = PromptTemplate(\n    template=(\n        \"\ub2e4\uc74c \uae08\uc735 \uad00\ub828 \uc9c8\ubb38\uc5d0 \ub300\ud574 \uc870\uc5b8\uc744 \uc791\uc131\ud574 \uc8fc\uc138\uc694.\\n\"\n        \"{format_instructions}\\n\"\n        \"\uc8fc\uc758: 'setup'\uc740 \ubc18\ub4dc\uc2dc \uc9c8\ubb38 \ud615\uc2dd\uc774\uba70, '?'\ub85c \ub05d\ub098\uc57c \ud569\ub2c8\ub2e4.\\n\"\n        \"\uc9c8\ubb38: {query}\"\n    ),\n    input_variables=[\"query\"],\n    partial_variables={\"format_instructions\": parser.get_format_instructions()},\n)\n\n# \uccb4\uc778 \uad6c\uc131\nchain = prompt | model | parser\n\n# \ud14c\uc2a4\ud2b8 \uc2e4\ud589\nif __name__ == \"__main__\":\n    try:\n        result = chain.invoke({\"query\": \"\uc8fc\uc2dd \ud22c\uc790 \uc2dc \uace0\ub824\ud574\uc57c \ud560 \uc810\uc740 \ubb34\uc5c7\uc778\uac00\uc694\"})\n        print(\"\uc9c8\ubb38:\", result.setup)\n        print(\"\ub2f5\ubcc0:\", result.advice)\n    except Exception as e:\n        print(f\"\uc624\ub958 \ubc1c\uc0dd: {e}\")\n</code></pre>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/Docx/","title":"Docx","text":"<p>\ub9ce\uc740 \uae30\uc5c5\uc5d0\uc11c\ub294 \uc5ec\uc804\ud788 <code>.doc</code> \ud615\uc2dd\uc758 \ubb38\uc11c\ub97c \uc0ac\uc6a9\ud558\uac70\ub098 \ubcf4\uad00\ud558\uace0 \uc788\ub2e4. </p> <p>\ud558\uc9c0\ub9cc \ud604\ub300\uc801\uc778 \ud14d\uc2a4\ud2b8 \ucc98\ub9ac\ub098 \uc778\uacf5\uc9c0\ub2a5 \uae30\ubc18 \ubb38\uc11c \ubd84\uc11d \uc2dc\uc2a4\ud15c\uc5d0\uc11c\ub294 <code>.docx</code> \ud3ec\ub9f7 \ub610\ub294 <code>.pdf</code>, <code>.txt</code> \ud615\uc2dd\uc774 \uc120\ud638\ub41c\ub2e4. \ub530\ub77c\uc11c <code>.doc</code> \ubb38\uc11c\ub97c \uc790\ub3d9\uc73c\ub85c <code>.docx</code>\ub85c \ubcc0\ud658\ud55c \ub4a4, \uadf8 \ub0b4\uc6a9\uc744 \ud30c\uc2f1 \uac00\ub2a5\ud55c \uad6c\uc870\ub85c \ubd88\ub7ec\uc624\ub294 \uc791\uc5c5\uc774 \ud544\uc694\ud558\ub2e4.</p> <p>\ubcf8 \uae00\uc5d0\uc11c\ub294 LibreOffice CLI\ub97c \uc0ac\uc6a9\ud574 <code>.doc</code> \u2192 <code>.docx</code> \ubcc0\ud658\uc744 \uc218\ud589\ud558\uace0, LangChain\uc758 <code>Docx2txtLoader</code>\ub97c \uc774\uc6a9\ud574 \ubb38\uc11c \ub0b4\uc6a9\uc744 \ud30c\uc2f1\ud558\ub294 \uc804 \uacfc\uc815\uc744 \uc18c\uac1c\ud55c\ub2e4.</p>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/Docx/#_1","title":"\uc804\uccb4 \ucc98\ub9ac \ud750\ub984","text":"<ol> <li> <p>\ub300\uc0c1 <code>.doc</code> \ud30c\uc77c \uacbd\ub85c \uc9c0\uc815</p> </li> <li> <p><code>.docx</code> \ud30c\uc77c\uc774 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc73c\uba74 LibreOffice\ub85c \ubcc0\ud658 \uc218\ud589</p> </li> <li> <p>LangChain \ub85c\ub354\ub85c <code>.docx</code> \ubb38\uc11c\ub97c \ubd88\ub7ec\uc640 \ub0b4\uc6a9 \ucd94\ucd9c</p> </li> <li> <p>\uccab \ubc88\uc9f8 \ubb38\uc11c \ub0b4\uc6a9\uc744 \ucd9c\ub825</p> </li> </ol>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/Docx/#_2","title":"\uc804\uc81c \uc870\uac74","text":"<ul> <li> <p>\uc2dc\uc2a4\ud15c\uc5d0 <code>libreoffice</code> CLI \uc124\uce58\ub418\uc5b4 \uc788\uc5b4\uc57c \ud55c\ub2e4 </p><pre><code>sudo apt install libreoffice -y\n</code></pre><p></p> </li> <li> <p>Python \ud658\uacbd\uc5d0\uc11c LangChain Community \ud328\ud0a4\uc9c0\uac00 \uc124\uce58\ub418\uc5b4 \uc788\uc5b4\uc57c \ud55c\ub2e4     (\uc608: <code>pip install langchain-community</code>)</p> </li> </ul>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/Docx/#_3","title":"\ucf54\ub4dc \uc124\uba85","text":""},{"location":"search-engine/RAG/LangChain/Document%20Loader/Docx/#1","title":"1. \ubcc0\ud658 \ub300\uc0c1 \uacbd\ub85c \uc124\uc815","text":"<p><code>pathlib.Path</code>\ub97c \uc0ac\uc6a9\ud574 <code>.doc</code> \uacbd\ub85c\uc640 \uadf8\uc5d0 \ub300\uc751\ud558\ub294 <code>.docx</code> \uacbd\ub85c\ub97c \ub9cc\ub4e0\ub2e4.</p> <pre><code>from pathlib import Path\n\ndoc_path = Path(\"data/3. \ud734\uac00\uaddc\uc815_(\uc8fc)\ud50c\ub798\ud2f0\uc5b4_250312.doc\")\ndocx_path = doc_path.with_suffix(\".docx\")\n</code></pre>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/Docx/#2-doc-docx-libreoffice","title":"2. <code>.doc</code> \u2192 <code>.docx</code> \ubcc0\ud658 (LibreOffice \uc0ac\uc6a9)","text":"<p>LibreOffice\ub97c \ubc31\uadf8\ub77c\uc6b4\ub4dc \ubaa8\ub4dc(<code>--headless</code>)\ub85c \uc2e4\ud589\ud574 <code>.docx</code>\ub85c \ubcc0\ud658\ud55c\ub2e4. \uc774\ubbf8 <code>.docx</code>\uac00 \uc874\uc7ac\ud558\uba74 \uc774 \uacfc\uc815\uc744 \uc0dd\ub7b5\ud55c\ub2e4.</p> <pre><code>import subprocess\n\nif not docx_path.exists():\n    print(f\"[INFO] .docx \ud30c\uc77c\uc774 \uc5c6\uc73c\ubbc0\ub85c \ubcc0\ud658 \uc911: {doc_path.name}\")\n    result = subprocess.run([\n        \"libreoffice\", \"--headless\", \"--convert-to\", \"docx\", str(doc_path),\n        \"--outdir\", str(doc_path.parent)\n    ], capture_output=True)\n\n    if result.returncode != 0:\n        print(\"[ERROR] \ubcc0\ud658 \uc2e4\ud328:\\n\", result.stderr.decode())\n        exit(1)\n    else:\n        print(f\"[SUCCESS] \ubcc0\ud658 \uc644\ub8cc: {docx_path.name}\")\n</code></pre>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/Docx/#3-langchain","title":"3. LangChain\uc744 \ud1b5\ud55c \ubb38\uc11c \ud30c\uc2f1","text":"<p>\ubcc0\ud658\ub41c <code>.docx</code> \ud30c\uc77c\uc744 <code>Docx2txtLoader</code>\ub85c \ub85c\ub529\ud55c\ub2e4. \ubb38\uc11c\ub294 \ud558\ub098 \uc774\uc0c1\uc758 <code>Document</code> \uac1d\uccb4\ub85c \ubc18\ud658\ub41c\ub2e4.</p> <pre><code>from langchain_community.document_loaders import Docx2txtLoader\n\nloader = Docx2txtLoader(str(docx_path))\ndocs = loader.load()\n</code></pre>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/Docx/#4","title":"4. \ubb38\uc11c \ub0b4\uc6a9 \ucd9c\ub825","text":"<p>\ud30c\uc2f1\ub41c \ubb38\uc11c \uc911 \uccab \ubc88\uc9f8 \ubb38\uc11c \ub0b4\uc6a9\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.</p> <pre><code>print(\"\\n\ubb38\uc11c \ubbf8\ub9ac\ubcf4\uae30:\\n\")\nprint(docs[0].page_content)\n</code></pre>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/Docx/#_4","title":"\uc804\uccb4 \ucf54\ub4dc","text":"<pre><code>from pathlib import Path\nimport subprocess\nfrom langchain_community.document_loaders import Docx2txtLoader\n\n# 1. .doc \uacbd\ub85c \uc9c0\uc815\ndoc_path = Path(\"data/3. \ud734\uac00\uaddc\uc815_(\uc8fc)\ud50c\ub798\ud2f0\uc5b4_250312.doc\")\ndocx_path = doc_path.with_suffix(\".docx\")\n\n# 2. .doc \u2192 .docx \ubcc0\ud658\nif not docx_path.exists():\n    print(f\"[INFO] .docx \ud30c\uc77c\uc774 \uc5c6\uc73c\ubbc0\ub85c \ubcc0\ud658 \uc911: {doc_path.name}\")\n    result = subprocess.run([\n        \"libreoffice\", \"--headless\", \"--convert-to\", \"docx\", str(doc_path),\n        \"--outdir\", str(doc_path.parent)\n    ], capture_output=True)\n\n    if result.returncode != 0:\n        print(\"[ERROR] \ubcc0\ud658 \uc2e4\ud328:\\n\", result.stderr.decode())\n        exit(1)\n    else:\n        print(f\"[SUCCESS] \ubcc0\ud658 \uc644\ub8cc: {docx_path.name}\")\n\n# 3. LangChain \ub85c\ub354\ub85c \ubb38\uc11c \ubd88\ub7ec\uc624\uae30\nloader = Docx2txtLoader(str(docx_path))\ndocs = loader.load()\n\n# 4. \uacb0\uacfc \ucd9c\ub825\nprint(\"\\n\ubb38\uc11c \ubbf8\ub9ac\ubcf4\uae30:\\n\")\nprint(docs[0].page_content)\n</code></pre>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/Docx/#_5","title":"\uacb0\ub860","text":"<p>\uc774\uc640 \uac19\uc740 \ud30c\uc774\ud504\ub77c\uc778\uc744 \ud65c\uc6a9\ud558\uba74 <code>.doc</code> \ud615\uc2dd\uc73c\ub85c \ub41c \uc0ac\ub0b4 \ubb38\uc11c\ub97c \uc790\ub3d9\uc73c\ub85c \ubcc0\ud658\ud558\uace0, \uadf8 \ub0b4\uc6a9\uc744 RAG \uae30\ubc18 \uac80\uc0c9 \uc2dc\uc2a4\ud15c, \ud14d\uc2a4\ud2b8 \ubd84\uc11d \ud30c\uc774\ud504\ub77c\uc778 \ub4f1\uc5d0\uc11c \ud65c\uc6a9\ud560 \uc218 \uc788\ub2e4. \ud2b9\ud788 \ubb38\uc11c\uac00 \uc218\uc2ed~\uc218\ubc31 \uac1c \uc874\uc7ac\ud560 \uacbd\uc6b0\uc5d0\ub3c4 \ubc18\ubcf5\uc801\uc73c\ub85c \ucc98\ub9ac\ud560 \uc218 \uc788\uc5b4 \ubb38\uc11c \uc790\ub3d9\ud654\uc758 \uae30\ucd08\ub85c \uc720\uc6a9\ud558\ub2e4.</p>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/Morphik%20-%20%ED%8C%8C%EC%8B%B1%20%EC%97%86%EC%9D%B4%20%EC%9D%B4%EB%AF%B8%EC%A7%80%EB%A7%8C%EC%9C%BC%EB%A1%9C%20RAG%EB%A5%BC%20%EC%8B%A4%ED%98%84/","title":"Morphik   \ud30c\uc2f1 \uc5c6\uc774 \uc774\ubbf8\uc9c0\ub9cc\uc73c\ub85c RAG\ub97c \uc2e4\ud604","text":"<p>Morphik\uc740 \ubcf5\uc7a1\ud55c \ubb38\uc11c\ub97c \uc815\ud655\ud788 \uac80\uc0c9\ud560 \uc218 \uc788\ub3c4\ub85d \uc124\uacc4\ub41c RAG(Retrieval-Augmented Generation) \ub3c4\uad6c\ub97c \uac1c\ubc1c\ud558\uace0 \uc788\ub2e4. \ub9ce\uc740 \uc2dc\uc2a4\ud15c\uc774 OCR \ubc0f \ud30c\uc2f1\uc5d0 \uc758\uc874\ud558\ub294 \ubc18\uba74, Morphik\uc740 '\ud398\uc774\uc9c0 \uc774\ubbf8\uc9c0' \uc790\uccb4\ub97c \uc815\ubcf4\uc758 \uc6d0\ucc9c\uc73c\ub85c \ud65c\uc6a9\ud558\ub294 \ubc29\uc2dd\uc744 \uc120\ud0dd\ud558\uc600\ub2e4. \uc774 \uae00\uc5d0\uc11c\ub294 \uc65c \uc2dc\uac01\uc801 \uc811\uadfc\uc774 \uae30\uc874 \ubc29\uc2dd\ubcf4\ub2e4 \uc6b0\uc218\ud55c\uc9c0, \uadf8\ub9ac\uace0 \uc774\ub97c \ud1b5\ud574 \uc5b4\ub5bb\uac8c \uc815\ud655\ub3c4\uc640 \uc18d\ub3c4\ub97c \ubaa8\ub450 \ud655\ubcf4\ud560 \uc218 \uc788\uc5c8\ub294\uc9c0\ub97c \uc124\uba85\ud55c\ub2e4.</p>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/Morphik%20-%20%ED%8C%8C%EC%8B%B1%20%EC%97%86%EC%9D%B4%20%EC%9D%B4%EB%AF%B8%EC%A7%80%EB%A7%8C%EC%9C%BC%EB%A1%9C%20RAG%EB%A5%BC%20%EC%8B%A4%ED%98%84/#_1","title":"\ud30c\uc2f1\uc758 \ud55c\uacc4: \uc65c \ud14d\uc2a4\ud2b8\ub9cc\uc73c\ub85c\ub294 \ubd80\uc871\ud55c\uac00","text":"<p>\ubcf5\uc7a1\ud55c PDF \ubb38\uc11c\ub97c \ub2e4\ub904\ubcf8 \uc0ac\ub78c\uc774\ub77c\uba74 \ub204\uad6c\ub098 \uacaa\ub294 \ubb38\uc81c\ub2e4. \ud45c\uc640 \ucc28\ud2b8, \ub3c4\ud45c, \uc124\uba85 \ud14d\uc2a4\ud2b8\uac00 \ud63c\uc7ac\ub41c \ubb38\uc11c\ub294 \uc77c\ubc18\uc801\uc778 OCR \uae30\ubc18 \ud30c\uc774\ud504\ub77c\uc778\uc73c\ub85c \ucc98\ub9ac\ud558\uae30 \uc5b4\ub835\ub2e4. \uc608\ub97c \ub4e4\uc5b4 \ud68c\uacc4 \ubcf4\uace0\uc11c\uc758 \ub3c4\ub11b \ucc28\ud2b8\ub098 \uae30\uc220 \ub9e4\ub274\uc5bc\uc758 \uc8fc\uc11d \ub2ec\ub9b0 \ub2e4\uc774\uc5b4\uadf8\ub7a8\uc740 \ud14d\uc2a4\ud2b8\ubcf4\ub2e4 \ub354 \uc911\uc694\ud55c \uc815\ubcf4\ub97c \ub2f4\uace0 \uc788\uc9c0\ub9cc, \ud30c\uc774\ud504\ub77c\uc778\uc740 \uc774\ub97c \ub193\uce58\uae30 \uc27d\ub2e4.</p> <p>\uae30\uc874\uc758 \ubb38\uc11c \ucc98\ub9ac \ud30c\uc774\ud504\ub77c\uc778\uc740 \ub2e4\uc74c\uacfc \uac19\uc740 \ub2e8\uacc4\ub97c \uac70\uce5c\ub2e4.</p> <ol> <li> <p>OCR\uc744 \ud1b5\ud574 \ubb38\uc790 \uc778\uc2dd</p> </li> <li> <p>\ub808\uc774\uc544\uc6c3 \ubd84\uc11d\uc744 \ud1b5\ud55c \ud14c\uc774\ube14 \ubc0f \uad6c\uc131\uc694\uc18c \ubd84\ub9ac</p> </li> <li> <p>\ud14d\uc2a4\ud2b8\uc758 \uc2dc\uac01\uc801 \uc21c\uc11c\ub97c \ubcf5\uc6d0</p> </li> <li> <p>\uadf8\ub9bc \ubc0f \ucc28\ud2b8\uc5d0 \ucea1\uc158 \uc0dd\uc131</p> </li> <li> <p>\ud14d\uc2a4\ud2b8 \uccad\ud0b9</p> </li> <li> <p>\uc784\ubca0\ub529 \ubaa8\ub378\ub85c \uc758\ubbf8 \ubca1\ud130 \uc0dd\uc131</p> </li> <li> <p>\ubca1\ud130 DB\uc5d0 \uc800\uc7a5 \ud6c4 \uac80\uc0c9</p> </li> </ol> <p>\uc774 \uc911 \ud558\ub098\ub77c\ub3c4 \uc2e4\ud328\ud558\uba74 \uc804\uccb4 \uac80\uc0c9 \uc815\ud655\ub3c4\uac00 \ub5a8\uc5b4\uc9c4\ub2e4. \ud2b9\ud788 \uc704\uce58 \uc815\ubcf4 \uc190\uc2e4, \ud14d\uc2a4\ud2b8-\uc774\ubbf8\uc9c0 \uc784\ubca0\ub529 \uac04\uc758 \uc758\ubbf8 \ub2e8\uc808, \ubcf5\uc7a1\ud55c \ud14c\uc774\ube14 \uad6c\uc870\uc758 \ud574\uc11d \uc624\ub958 \ub4f1\uc740 \uce58\uba85\uc801\uc778 \uc601\ud5a5\uc744 \uc900\ub2e4.</p>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/Morphik%20-%20%ED%8C%8C%EC%8B%B1%20%EC%97%86%EC%9D%B4%20%EC%9D%B4%EB%AF%B8%EC%A7%80%EB%A7%8C%EC%9C%BC%EB%A1%9C%20RAG%EB%A5%BC%20%EC%8B%A4%ED%98%84/#_2","title":"\uc804\ud658\uc810: \u201c\uadf8\ub0e5 \ud398\uc774\uc9c0\ub97c \ubcf4\uba74 \uc548 \ub420\uae4c?\u201d","text":"<p>Morphik\uc758 \uacf5\ub3d9 \ucc3d\uc5c5\uc790\ub294 \ub2e4\uc74c\uacfc \uac19\uc740 \uc9c8\ubb38\uc744 \ub358\uc84c\ub2e4. \u201c\uc65c \ubb38\uc11c\ub97c \ubd84\ud574\ud558\uace0 \ub2e4\uc2dc \uc758\ubbf8\ub97c \uc870\ud569\ud558\ub824 \ub4dc\ub294\uac00? \uc0ac\ub78c\ucc98\ub7fc \uadf8\ub0e5 \u2018\ubb38\uc11c \uc804\uccb4\ub97c \uc2dc\uac01\uc801\uc73c\ub85c\u2019 \ubcf4\uba74 \ub418\uc9c0 \uc54a\uc744\uae4c?\u201d</p> <p>\uc774 \uc9c8\ubb38\uc740 Morphik\uc758 \ubc29\ud5a5\uc744 \ubc14\uafb8\ub294 \uacb0\uc815\uc801 \uacc4\uae30\uac00 \ub418\uc5c8\ub2e4. \ucd5c\uc2e0 Vision-Language Model\uc740 \ub354 \uc774\uc0c1 OCR\uc774\ub098 \ud30c\uc2f1 \uc5c6\uc774\ub3c4 \ubb38\uc11c \uc774\ubbf8\uc9c0\ub97c \uc9c1\uc811 \uc774\ud574\ud560 \uc218 \uc788\uc744 \ub9cc\ud07c \ubc1c\uc804\ud558\uc600\ub2e4.</p>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/Morphik%20-%20%ED%8C%8C%EC%8B%B1%20%EC%97%86%EC%9D%B4%20%EC%9D%B4%EB%AF%B8%EC%A7%80%EB%A7%8C%EC%9C%BC%EB%A1%9C%20RAG%EB%A5%BC%20%EC%8B%A4%ED%98%84/#colpali","title":"ColPali: \ubb38\uc11c\ub97c \uc2dc\uac01\uc801\uc73c\ub85c \uc774\ud574\ud558\ub294 \ubc29\uc2dd","text":"<p>Morphik\uc774 \uad6c\ud604\ud55c \ud575\uc2ec \ubaa8\ub378\uc740 ColPali \uae30\ubc18\uc774\ub2e4. \uc774 \uc811\uadfc\ubc95\uc740 \ub2e4\uc74c\uacfc \uac19\uc774 \ub3d9\uc791\ud55c\ub2e4.</p> <ol> <li> <p>\uac01 \ud398\uc774\uc9c0\ub97c \uace0\ud574\uc0c1\ub3c4 \uc774\ubbf8\uc9c0\ub85c \ucc98\ub9ac</p> </li> <li> <p>\uc774\ubbf8\uc9c0\ub97c \ud328\uce58 \ub2e8\uc704\ub85c \ubd84\ud560</p> </li> <li> <p>\uac01 \ud328\uce58\ub97c Vision Transformer(SigLIP-So400m)\ub85c \uc778\ucf54\ub529</p> </li> <li> <p>\ubb38\uc11c \uad6c\uc870\ub97c \uc774\ud574\ud558\ub3c4\ub85d \ud6c8\ub828\ub41c PaliGemma-3B\ub85c \uc784\ubca0\ub529\uc744 \uc815\uc81c</p> </li> <li> <p>\uc9c8\uc758\uc5d0 \ub300\ud574 \u2018\uc9c0\uc5f0 \uc0c1\ud638\uc791\uc6a9(late interaction)\u2019 \ubc29\uc2dd\uc73c\ub85c \uc5f0\uad00 \ud328\uce58 \uac80\uc0c9</p> </li> </ol> <p>\uc774 \ubaa8\ub378\uc740 \ub2e8\uc21c\ud788 \u201cQ3 revenue\u201d\ub77c\ub294 \ud0a4\uc6cc\ub4dc\ub97c \ucc3e\ub294 \uac83\uc774 \uc544\ub2c8\ub77c, \uad00\ub828\ub41c \ud45c, \ucc28\ud2b8, \uc0c9\uc0c1 \uc815\ubcf4\uae4c\uc9c0 \uc885\ud569\uc801\uc73c\ub85c \ubd84\uc11d\ud558\uc5ec \uc751\ub2f5\ud55c\ub2e4.</p>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/Morphik%20-%20%ED%8C%8C%EC%8B%B1%20%EC%97%86%EC%9D%B4%20%EC%9D%B4%EB%AF%B8%EC%A7%80%EB%A7%8C%EC%9C%BC%EB%A1%9C%20RAG%EB%A5%BC%20%EC%8B%A4%ED%98%84/#_3","title":"\uae30\uc874 \ubc29\uc2dd\uacfc\uc758 \ube44\uad50: \uc218\uce58\ub85c \uc785\uc99d\ub41c \ucc28\uc774","text":"<p>Morphik\uc740 TLDC(The LLM Data Company)\uc640 \ud611\uc5c5\ud558\uc5ec NVIDIA 10-Q, Palantir \ubc1c\ud45c\uc790\ub8cc, JPMorgan \ubcf4\uace0\uc11c \ub4f1 \ubcf5\uc7a1\ud55c \uc7ac\ubb34 \ubb38\uc11c\ub97c \ud3ec\ud568\ud55c \ubca4\uce58\ub9c8\ud06c\ub97c \ub9cc\ub4e4\uc5c8\ub2e4. \ucd1d 45\uac1c\uc758 \uace0\ub09c\ub3c4 \uc9c8\ubb38\uc73c\ub85c \uad6c\uc131\ub41c \uc774 \ubca4\uce58\ub9c8\ud06c\uc5d0\uc11c Morphik\uc740 95.56%\uc758 \uc815\ud655\ub3c4\ub97c \uae30\ub85d\ud558\uc600\ub2e4. \ubc18\uba74, LangChain \uae30\ubc18 RAG \uc2dc\uc2a4\ud15c\uc740 72%, OpenAI File Search\ub294 13.33%\uc5d0 \uadf8\ucce4\ub2e4.</p> <p>ViDoRe \ubca4\uce58\ub9c8\ud06c\uc5d0\uc11c\ub294 nDCG@5 \uae30\uc900 Morphik\uc774 81.3%\ub97c \uae30\ub85d\ud558\uc5ec \uc804\ud1b5\uc801 \ubc29\uc2dd(67.0%)\uc744 \ud06c\uac8c \uc0c1\ud68c\ud558\uc600\ub2e4.</p>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/Morphik%20-%20%ED%8C%8C%EC%8B%B1%20%EC%97%86%EC%9D%B4%20%EC%9D%B4%EB%AF%B8%EC%A7%80%EB%A7%8C%EC%9C%BC%EB%A1%9C%20RAG%EB%A5%BC%20%EC%8B%A4%ED%98%84/#muvera","title":"\uc18d\ub3c4 \ubb38\uc81c\uc640 MUVERA\ub97c \ud1b5\ud55c \ud574\uacb0","text":"<p>\uc2dc\uac01\uc801 RAG \uc2dc\uc2a4\ud15c\uc740 \uc815\ud655\ud558\ub098 \ucc98\uc74c\uc5d4 \ub290\ub838\ub2e4. \uc218\ubc31\ub9cc \uac1c\uc758 \uc774\ubbf8\uc9c0 \ud328\uce58\ub97c \uc2e4\uc2dc\uac04 \uac80\uc0c9\ud558\ub294 \uac83\uc740 \ud604\uc2e4\uc801\uc73c\ub85c 3~4\ucd08\uc758 \uc9c0\uc5f0\uc744 \uc57c\uae30\ud558\uc600\ub2e4. \uc774 \ubb38\uc81c\ub97c \ud574\uacb0\ud55c \uac83\uc774 MUVERA \uc54c\uace0\ub9ac\uc998\uc774\ub2e4. MUVERA\ub294 \uba40\ud2f0 \ubca1\ud130\ub97c \ub2e8\uc77c \ubca1\ud130\ub85c \uc555\ucd95\ud558\uc5ec \ube60\ub978 \uac80\uc0c9\uc744 \uac00\ub2a5\ud558\uac8c \ud558\uc600\ub2e4. Morphik\uc740 \uc774\ub97c \uc801\uc6a9\ud55c \uc790\uccb4 \ubca1\ud130 DB\uc778 Turbopuffer\uc640 \uacb0\ud569\ud558\uc5ec \uac80\uc0c9 \uc18d\ub3c4\ub97c 30ms\ub85c \uc904\uc600\ub2e4.</p>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/Morphik%20-%20%ED%8C%8C%EC%8B%B1%20%EC%97%86%EC%9D%B4%20%EC%9D%B4%EB%AF%B8%EC%A7%80%EB%A7%8C%EC%9C%BC%EB%A1%9C%20RAG%EB%A5%BC%20%EC%8B%A4%ED%98%84/#api","title":"\ud65c\uc6a9 \uc0ac\ub840\uc640 API","text":"<p>Morphik\uc758 \uc2dc\uac01 \uae30\ubc18 \ubb38\uc11c \uac80\uc0c9\uc740 \ub2e4\uc74c\uacfc \uac19\uc740 \ubb38\uc11c\uc5d0 \ud2b9\ud788 \uac15\ub825\ud558\ub2e4.</p> <ul> <li> <p>\uc7ac\ubb34 \ubb38\uc11c: \ud45c\uc640 \ucc28\ud2b8\uac00 \ud575\uc2ec \uc815\ubcf4\ub97c \ub2f4\uace0 \uc788\ub294 \uacbd\uc6b0</p> </li> <li> <p>\uae30\uc220 \ub9e4\ub274\uc5bc: \ub3c4\ud45c\uac00 \uc8fc\uc694 \uc124\uba85 \uc218\ub2e8\uc778 \uacbd\uc6b0</p> </li> <li> <p>\uc601\uc218\uc99d/\uc778\ubcf4\uc774\uc2a4: \ub808\uc774\uc544\uc6c3\uc774 \uc758\ubbf8\ub97c \uac16\ub294 \uacbd\uc6b0</p> </li> <li> <p>\uc5f0\uad6c \ub17c\ubb38: \ud575\uc2ec \uacb0\uacfc\uac00 \uadf8\ub9bc\uc5d0 \ub2f4\uae34 \uacbd\uc6b0</p> </li> <li> <p>\uc758\ub8cc \uae30\ub85d: \uc2dc\uac01\uc801 \uad6c\uc131\uc774 \uc9c4\ub2e8 \uc815\ubcf4\ub97c \ub0b4\ud3ec\ud558\ub294 \uacbd\uc6b0</p> </li> </ul> <p>API \uc0ac\uc6a9 \ubc29\uc2dd\uc740 \ub2e8\uc21c\ud558\ub2e4. \ubb38\uc11c\ub97c \uc5c5\ub85c\ub4dc\ud558\uace0 \uc790\uc5f0\uc5b4\ub85c \uc9c8\uc758\ud558\uba74 \ub41c\ub2e4. \uc608: \u201c\ucd1d\uc561\uc774 $10K\ub97c \ucd08\uacfc\ud558\ub294 \ubc8c\uce59 \uc870\ud56d\uc774 \ud3ec\ud568\ub41c \uacc4\uc57d\uc11c \ucc3e\uc544\uc918\u201d \ub610\ub294 \u201c\uc791\ub144 \uc81c\uc548\uc11c\uc5d0 \ud3ec\ud568\ub41c \uc2dc\uc2a4\ud15c \uc544\ud0a4\ud14d\ucc98 \ub2e4\uc774\uc5b4\uadf8\ub7a8 \ubcf4\uc5ec\uc918\u201d.</p>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/Morphik%20-%20%ED%8C%8C%EC%8B%B1%20%EC%97%86%EC%9D%B4%20%EC%9D%B4%EB%AF%B8%EC%A7%80%EB%A7%8C%EC%9C%BC%EB%A1%9C%20RAG%EB%A5%BC%20%EC%8B%A4%ED%98%84/#_4","title":"\ubbf8\ub798: \ubb38\uc11c\uc758 \ub9e5\ub77d\uacfc \ub17c\ub9ac\ub97c \uc774\ud574\ud558\ub294 \uc2dc\uc2a4\ud15c\uc73c\ub85c","text":"<p>Morphik\uc740 \ub2e8\uc21c \uac80\uc0c9\uc744 \ub118\uc5b4, \ub2e4\uc74c\uacfc \uac19\uc740 \uace0\ucc28\uc6d0\uc801 \ubb38\uc11c \uc774\ud574\ub97c \uc9c0\ud5a5\ud55c\ub2e4.</p> <ul> <li> <p>\ub2e4\ubb38\uc11c \ucd94\ub860: \ubb38\uc11c \uac04\uc758 \ub17c\ub9ac\uc801 \uc5f0\uacb0 \ud30c\uc545</p> </li> <li> <p>\uc5d0\uc774\uc804\ud2b8 \uae30\ubc18 \ucd94\ub860: \ubb38\uc11c \uac04 \uc870\uac74 \ube44\uad50, \uaddc\uc815 \uc77c\uce58 \ud655\uc778, \uc2e4\ud589 \uacc4\ud68d \uc5f0\uacb0 \ub4f1</p> </li> <li> <p>\uc6cc\ud06c\ud50c\ub85c\uc6b0 \ud1b5\ud569: \uacc4\uc57d\uc11c \ubd88\uc77c\uce58 \uc790\ub3d9 \ud0d0\uc9c0, \uc124\uacc4-\uad6c\ud604 \uac04 \uc774\ub825 \ucd94\uc801 \ub4f1</p> </li> </ul>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/Morphik%20-%20%ED%8C%8C%EC%8B%B1%20%EC%97%86%EC%9D%B4%20%EC%9D%B4%EB%AF%B8%EC%A7%80%EB%A7%8C%EC%9C%BC%EB%A1%9C%20RAG%EB%A5%BC%20%EC%8B%A4%ED%98%84/#_5","title":"\ud55c\uacc4\uc640 \uacfc\uc81c","text":"<p>Morphik\uc740 \uc2dc\uac01 \uae30\ubc18 \uac80\uc0c9\uc73c\ub85c \uae30\uc874 \ud30c\uc2f1 \ubc29\uc2dd\uc774 \ub193\uce58\ub358 \uc815\ubcf4\ub97c \ud6a8\uacfc\uc801\uc73c\ub85c \ucc3e\uc744 \uc218 \uc788\uac8c \ud558\uc600\uc73c\ub098, \uc778\uac04 \uc804\ubb38\uac00 \uc218\uc900\uc758 \ud574\uc11d \ub2a5\ub825\uae4c\uc9c0\ub294 \uc544\uc9c1 \ub3c4\ub2ec\ud558\uc9c0 \ubabb\ud558\uc600\ub2e4. \uae08\uc735 \ubd84\uc11d\uac00\uac00 \uc218\uce58 \uc774\uba74\uc758 \ub9e5\ub77d\uc744 \uc774\ud574\ud558\ub4ef\uc774, \ud5a5\ud6c4 \uacfc\uc81c\ub294 \ub3c4\uba54\uc778 \uc9c0\uc2dd\uacfc\uc758 \ud1b5\ud569, \uc778\uacfc \ucd94\ub860, \uc2e0\ub8b0\ub3c4 \uacc4\uc0b0 \ub4f1\uc73c\ub85c \ud655\uc7a5\ub418\ub294 \uac83\uc774\ub2e4.</p>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/PDF/","title":"PDF","text":""},{"location":"search-engine/RAG/LangChain/Document%20Loader/PDF/#pdf-ocr","title":"\ud55c\uae00 PDF \uc815\ud655 \ucd94\ucd9c\uc744 \uc704\ud55c \ud14d\uc2a4\ud2b8 + OCR \ud558\uc774\ube0c\ub9ac\ub4dc \ud30c\uc11c \uad6c\ucd95\uae30","text":"<p>\ud55c\uae00\ub85c \uc791\uc131\ub41c PDF \ubb38\uc11c\ub97c \uc815\ud655\ud558\uac8c \ud30c\uc2f1\ud558\ub294 \uc77c\uc740 \uc0dd\uac01\ubcf4\ub2e4 \uae4c\ub2e4\ub86d\ub2e4. \ud2b9\ud788 \ud55c\uad6d\uc5b4 PDF\ub294 \uc77c\ubc18\uc801\uc73c\ub85c \ud14d\uc2a4\ud2b8 \ub808\uc774\uc5b4\uac00 \uc874\uc7ac\ud558\uc9c0 \uc54a\uac70\ub098, CID \uc778\ucf54\ub529\uc73c\ub85c \uc778\ud574 \ud14d\uc2a4\ud2b8\uac00 \ud30c\uad34\ub418\uc5b4 \uc788\ub294 \uacbd\uc6b0\uac00 \ub9ce\ub2e4. \ubcf8 \uae00\uc5d0\uc11c\ub294 \ud14d\uc2a4\ud2b8 \uae30\ubc18 PDF\ub294 \ubb3c\ub860, \uc774\ubbf8\uc9c0 \uae30\ubc18 PDF\uae4c\uc9c0 \ubaa8\ub450 \ub300\uc751\ud560 \uc218 \uc788\ub294 \ud30c\uc2f1 \ud30c\uc774\ud504\ub77c\uc778\uc744 \uad6c\ucd95\ud55c \uacfc\uc815\uc744 \uc815\ub9ac\ud55c\ub2e4.</p>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/PDF/#1","title":"1. \ubb38\uc81c \uc815\uc758","text":"<p>PDF\uc5d0\uc11c \ud14d\uc2a4\ud2b8\ub97c \ucd94\ucd9c\ud558\ub294 \uac00\uc7a5 \uc77c\ubc18\uc801\uc778 \ubc29\ubc95\uc740 <code>pdfplumber</code>, <code>pdfminer.six</code> \ub4f1\uacfc \uac19\uc740 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\uc774\ub2e4. \uadf8\ub7ec\ub098 \uc774 \ubc29\uc2dd\uc740 \ub2e4\uc74c\uc758 \ubb38\uc81c\uc810\uc744 \uac00\uc9c4\ub2e4.</p> <ul> <li> <p>\ud55c\uae00 \ud14d\uc2a4\ud2b8\uac00 (cid:XX) \ud615\ud0dc\ub85c \uae68\uc9c0\ub294 \uacbd\uc6b0\uac00 \ub9ce\ub2e4.</p> </li> <li> <p>\uc2a4\uce94 PDF\ucc98\ub7fc \uc774\ubbf8\uc9c0 \uae30\ubc18\uc73c\ub85c \uc0dd\uc131\ub41c \ubb38\uc11c\ub294 \ud14d\uc2a4\ud2b8 \ucd94\ucd9c\uc774 \ubd88\uac00\ub2a5\ud558\ub2e4.</p> </li> <li> <p>\ud14c\uc774\ube14 \uad6c\uc870\uac00 \ud3ec\ud568\ub41c \uacbd\uc6b0 \uc140 \ub2e8\uc704\uc758 \uc815\uc81c\ub41c \ucd94\ucd9c\uc774 \uc5b4\ub835\ub2e4.</p> </li> </ul> <p>\uc774\ub7ec\ud55c \ubb38\uc81c\ub97c \ud574\uacb0\ud558\uae30 \uc704\ud574 OCR \uae30\ubc18 \uc811\uadfc\ubc95\uacfc PDF \uad6c\uc870 \uc778\uc2dd \uae30\ubc95\uc744 \ud568\uaed8 \uc801\uc6a9\ud55c \ubcf5\ud569 \ud30c\uc11c\uac00 \ud544\uc694\ud558\ub2e4.</p>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/PDF/#2","title":"2. \uc811\uadfc \ubc29\uc2dd","text":"<p>\ud30c\uc11c\uc758 \uae30\ubcf8 \uc804\ub7b5\uc740 \ub2e4\uc74c\uacfc \uac19\ub2e4.</p> <ol> <li> <p>PDF\uac00 \ud14d\uc2a4\ud2b8 \uae30\ubc18\uc778\uc9c0 \uc774\ubbf8\uc9c0 \uae30\ubc18\uc778\uc9c0 \uc790\ub3d9 \ud310\ubcc4\ud55c\ub2e4.</p> </li> <li> <p>\ud14d\uc2a4\ud2b8 PDF\uc778 \uacbd\uc6b0\uc5d0\ub294 <code>pdfplumber</code>\ub97c \uc0ac\uc6a9\ud558\uc5ec \ube60\ub974\uace0 \uc815\ubc00\ud558\uac8c \ud14d\uc2a4\ud2b8\ub97c \ucd94\ucd9c\ud55c\ub2e4.</p> </li> <li> <p>\uc774\ubbf8\uc9c0 \uae30\ubc18\uc774\uac70\ub098 CID \ud328\ud134\uc73c\ub85c \uc190\uc0c1\ub41c \ud14d\uc2a4\ud2b8\ub9cc \ud3ec\ud568\ub41c \uacbd\uc6b0\uc5d0\ub294 OCR \uae30\ubc18\uc73c\ub85c \ucc98\ub9ac\ud55c\ub2e4.</p> </li> <li> <p>OCR \ucc98\ub9ac \uc2dc\uc5d0\ub294 \ub2e4\uc591\ud55c <code>--psm</code> \ud30c\ub77c\ubbf8\ud130\ub97c \ud14c\uc2a4\ud2b8\ud558\uc5ec \uac00\uc7a5 \uc815\ud655\ud55c \uacb0\uacfc\ub97c \uc120\ud0dd\ud55c\ub2e4.</p> </li> <li> <p>\ubb38\uc11c\uc5d0 \ud14c\uc774\ube14\uc774 \ud3ec\ud568\ub418\uc5b4 \uc788\ub2e4\uba74 <code>layoutparser</code>\ub97c \uc774\uc6a9\ud574 \ud14c\uc774\ube14 \ubc15\uc2a4\ub97c \ud0d0\uc9c0\ud558\uace0, \ud574\ub2f9 \uc601\uc5ed\ub9cc \ubcc4\ub3c4\ub85c OCR \ucc98\ub9ac\ud55c\ub2e4.</p> </li> </ol>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/PDF/#3","title":"3. \uc8fc\uc694 \ub77c\uc774\ube0c\ub7ec\ub9ac \ubc0f \ud658\uacbd \uc124\uc815","text":"<pre><code>pip install pdfplumber pytesseract pdf2image pillow\npip install layoutparser[ocr]  # \ud14c\uc774\ube14 \ud0d0\uc9c0\ub97c \ud3ec\ud568\ud558\ub294 \uacbd\uc6b0\n\nbrew install tesseract tesseract-lang poppler\n</code></pre> <p>Tesseract\ub294 \ubc18\ub4dc\uc2dc <code>kor.traineddata</code> \uc5b8\uc5b4\ud329\uc774 \uc124\uce58\ub418\uc5b4 \uc788\uc5b4\uc57c \ud558\uba70, macOS\uc5d0\uc11c\ub294 \uc544\ub798\uc640 \uac19\uc774 \ud658\uacbd \ubcc0\uc218\ub97c \uc124\uc815\ud574\uc57c \ud55c\ub2e4.</p> <pre><code>export TESSDATA_PREFIX=/opt/homebrew/share/\n</code></pre>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/PDF/#dockerfile","title":"Dockerfile \uc608\uc2dc","text":"<pre><code>FROM python:3.10-slim\n\n# \uc2dc\uc2a4\ud15c \ud328\ud0a4\uc9c0 \uc5c5\ub370\uc774\ud2b8 \ubc0f \ud544\uc218 \ub3c4\uad6c \uc124\uce58\nRUN apt-get update &amp;&amp; \\\n    apt-get install -y --no-install-recommends \\\n    poppler-utils \\\n    tesseract-ocr \\\n    tesseract-ocr-kor \\\n    libgl1 \\\n    build-essential \\\n    cmake \\\n    git \\\n    curl \\\n    &amp;&amp; apt-get clean &amp;&amp; rm -rf /var/lib/apt/lists/*\n\n# Python \ud328\ud0a4\uc9c0 \uc124\uce58\nCOPY requirements.txt .\nRUN pip install --upgrade pip &amp;&amp; pip install --no-cache-dir -r requirements.txt\n\n# Tesseract \ud55c\uae00 \ub370\uc774\ud130 \uacbd\ub85c \uc124\uc815 (\uc2ac\ub9bc \uc774\ubbf8\uc9c0\ub294 \ud658\uacbd\ubcc0\uc218\uac00 \ud544\uc694 \uc5c6\uc74c)\nENV TESSDATA_PREFIX=/usr/share/tesseract-ocr/4.00/tessdata\n\n# \uc791\uc5c5 \ub514\ub809\ud1a0\ub9ac \uc124\uc815\nWORKDIR /app\nCOPY . /app\n\nCMD [\"python\", \"main.py\"]\n</code></pre>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/PDF/#4","title":"4. \ud575\uc2ec \ucf54\ub4dc \uad6c\uc870","text":""},{"location":"search-engine/RAG/LangChain/Document%20Loader/PDF/#41-pdf","title":"4.1 \ud14d\uc2a4\ud2b8 PDF \ud310\ubcc4 \ud568\uc218","text":"<p>\ud14d\uc2a4\ud2b8\uac00 \uc2e4\uc9c8\uc801\uc73c\ub85c \uc758\ubbf8\uac00 \uc788\ub294\uc9c0 \ud310\ubcc4\ud558\ub294 \ub85c\uc9c1\uc744 \ud3ec\ud568\ud55c\ub2e4.</p> <pre><code>def is_valid_text(text: str) -&gt; bool:\n    has_real_text = re.search(r'[\uac00-\ud7a3a-zA-Z0-9]', text)\n    has_cid_only = all(\"(cid:\" in token for token in text.split())\n    return bool(has_real_text) and not has_cid_only\n\ndef is_text_pdf(pdf_path):\n    with pdfplumber.open(pdf_path) as pdf:\n        for page in pdf.pages:\n            page_text = page.extract_text()\n            if page_text and is_valid_text(page_text):\n                return True\n    return False\n</code></pre>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/PDF/#42","title":"4.2 \ud14d\uc2a4\ud2b8 \ucd94\ucd9c \ud568\uc218","text":"<p>\ud14d\uc2a4\ud2b8 PDF\uc778 \uacbd\uc6b0\uc5d0\ub294 \ube60\ub974\uac8c <code>pdfplumber</code>\ub97c \uc0ac\uc6a9\ud558\uc5ec \ud14d\uc2a4\ud2b8\ub97c \ucd94\ucd9c\ud55c\ub2e4.</p> <pre><code>def extract_from_text_pdf(pdf_path):\n    text = \"\"\n    with pdfplumber.open(pdf_path) as pdf:\n        for i, page in enumerate(pdf.pages):\n            page_text = page.extract_text()\n            if page_text:\n                text += f\"\\n--- [Page {i+1}] ---\\n{page_text}\"\n    return text.strip()\n</code></pre>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/PDF/#43-pdf-ocr","title":"4.3 \uc774\ubbf8\uc9c0 \uae30\ubc18 PDF OCR \ucc98\ub9ac","text":"<p>OCR \ucc98\ub9ac \uc2dc\uc5d0\ub294 <code>pdf2image</code>\ub97c \uc774\uc6a9\ud574 \ud398\uc774\uc9c0\ub97c \uace0\ud574\uc0c1\ub3c4 \uc774\ubbf8\uc9c0\ub85c \ub80c\ub354\ub9c1\ud558\uace0, <code>pytesseract</code>\ub97c \uc774\uc6a9\ud574 \ud55c\uae00 \uc778\uc2dd\uc744 \uc218\ud589\ud55c\ub2e4.</p> <pre><code>def extract_from_image_pdf(pdf_path):\n    text = \"\"\n    with TemporaryDirectory() as tempdir:\n        images = convert_from_path(pdf_path, dpi=300, output_folder=tempdir, fmt=\"png\")\n        for i, image in enumerate(images):\n            ocr_result = pytesseract.image_to_string(image, lang=\"kor\", config=\"--psm 6\")\n            text += f\"\\n--- [Page {i+1}] ---\\n{ocr_result.strip()}\"\n    return text.strip()\n</code></pre>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/PDF/#44","title":"4.4 \ud30c\uc11c\uc758 \uc804\uccb4 \ud750\ub984 \uc81c\uc5b4","text":"<p>\ud14d\uc2a4\ud2b8 \ud310\ubcc4\uacfc OCR \ucc98\ub9ac\ub97c \uc790\ub3d9\uc73c\ub85c \uc804\ud658\ud558\ub294 \ud30c\uc774\ud504\ub77c\uc778\uc774\ub2e4.</p> <pre><code>def extract_korean_pdf(pdf_path):\n    if not os.path.exists(pdf_path):\n        raise FileNotFoundError(f\"\ud30c\uc77c\uc774 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4: {pdf_path}\")\n\n    print(f\"[INFO] \ucd94\ucd9c \uc2dc\uc791: {pdf_path}\")\n\n    if is_text_pdf(pdf_path):\n        print(\"[INFO] \ud14d\uc2a4\ud2b8 \uae30\ubc18 PDF\ub85c \ud310\ubcc4\ub428. pdfplumber \uc0ac\uc6a9.\")\n        return extract_from_text_pdf(pdf_path)\n    else:\n        print(\"[INFO] \uc774\ubbf8\uc9c0 \uae30\ubc18 PDF \ub610\ub294 CID \uae68\uc9d0 PDF. OCR(tesseract) \uc0ac\uc6a9.\")\n        return extract_from_image_pdf(pdf_path)\n</code></pre>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/PDF/#5-psm-ocr","title":"5. \ucd94\uac00 \uace0\ub3c4\ud654: PSM \uc790\ub3d9 \ud29c\ub2dd \ubc0f \ud14c\uc774\ube14 OCR","text":"<p>OCR\uc758 \uc815\ud655\ub3c4\ub97c \ub192\uc774\uae30 \uc704\ud574 <code>--psm</code> \ud30c\ub77c\ubbf8\ud130\ub97c \uc790\ub3d9\uc73c\ub85c \ud29c\ub2dd\ud560 \uc218 \uc788\uc73c\uba70, \ub2e4\uc74c\uacfc \uac19\uc740 \uc804\ub7b5\uc744 \uc4f8 \uc218 \uc788\ub2e4.</p> <pre><code>def ocr_with_best_psm(image):\n    candidates = []\n    for psm in [\"6\", \"3\", \"11\", \"12\"]:\n        config = f\"--psm {psm}\"\n        text = pytesseract.image_to_string(image, lang=\"kor\", config=config)\n        candidates.append((psm, text.strip()))\n\n    def korean_ratio(s): return sum('\uac00' &lt;= c &lt;= '\ud7a3' for c in s) / (len(s) + 1e-6)\n    best = max(candidates, key=lambda x: korean_ratio(x[1]) * len(x[1]))\n    return best[1]\n</code></pre> <p>\ub610\ud55c <code>layoutparser</code>\ub97c \uc0ac\uc6a9\ud558\uba74 \ud14c\uc774\ube14 \uc704\uce58\ub9cc \uc798\ub77c\uc11c OCR\uc744 \uc801\uc6a9\ud558\ub294 \ubc29\uc2dd\ub3c4 \uac00\ub2a5\ud558\ub2e4.</p> <pre><code>import layoutparser as lp\n\ndef detect_table_ocr(image):\n    model = lp.Detectron2LayoutModel('lp://PubLayNet/faster_rcnn_R_50_FPN_3x/config')\n    layout = model.detect(image)\n    tables = [b for b in layout if b.type == 'Table']\n    result = \"\"\n    for i, table in enumerate(tables):\n        segment = table.pad(5).crop_image(image)\n        ocr_text = pytesseract.image_to_string(segment, lang=\"kor\", config=\"--psm 6\")\n        result += f\"\\n[Table {i+1}]\\n{ocr_text.strip()}\"\n    return result\n</code></pre>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/PDF/#_1","title":"\uc804\uccb4 \ucf54\ub4dc","text":"<pre><code>import os\nimport re\nimport pdfplumber\nimport pytesseract\nfrom pdf2image import convert_from_path\nfrom tempfile import TemporaryDirectory\n\n# \uc124\uc815\nTESSERACT_LANG = \"kor\"\nTESSERACT_PSM = \"6\"\n\ndef is_valid_text(text: str) -&gt; bool:\n    return bool(re.search(r'[\uac00-\ud7a3a-zA-Z0-9]', text)) and \"(cid:\" not in text\n\ndef is_text_pdf(pdf_path: str) -&gt; bool:\n    \"\"\"\uc2e4\uc9c8 \ud14d\uc2a4\ud2b8\uac00 \ud3ec\ud568\ub41c PDF\uc778\uc9c0 \ud310\ub2e8\"\"\"\n    with pdfplumber.open(pdf_path) as pdf:\n        return any(is_valid_text(page.extract_text() or \"\") for page in pdf.pages)\n\ndef extract_text_pdf(pdf_path: str) -&gt; str:\n    \"\"\"\ud14d\uc2a4\ud2b8 \uae30\ubc18 PDF\uc5d0\uc11c \ud14d\uc2a4\ud2b8 \ucd94\ucd9c\"\"\"\n    with pdfplumber.open(pdf_path) as pdf:\n        return \"\\n\".join(\n            f\"\\n--- [Page {i+1}] ---\\n{page.extract_text().strip()}\"\n            for i, page in enumerate(pdf.pages)\n            if page.extract_text()\n        )\n\ndef extract_image_pdf(pdf_path: str) -&gt; str:\n    \"\"\"\uc774\ubbf8\uc9c0 \uae30\ubc18 PDF\uc5d0\uc11c OCR\ub85c \ud14d\uc2a4\ud2b8 \ucd94\ucd9c\"\"\"\n    with TemporaryDirectory() as tmpdir:\n        images = convert_from_path(pdf_path, dpi=300, output_folder=tmpdir, fmt=\"png\")\n        return \"\\n\".join(\n            f\"\\n--- [Page {i+1}] ---\\n{pytesseract.image_to_string(img, lang=TESSERACT_LANG, config=f'--psm {TESSERACT_PSM}').strip()}\"\n            for i, img in enumerate(images)\n        )\n\ndef extract_korean_pdf(pdf_path: str) -&gt; str:\n    if not os.path.isfile(pdf_path):\n        raise FileNotFoundError(f\"\ud30c\uc77c\uc774 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4: {pdf_path}\")\n\n    print(f\"[INFO] \ucd94\ucd9c \uc2dc\uc791: {pdf_path}\")\n\n    if is_text_pdf(pdf_path):\n        print(\"[INFO] \ud14d\uc2a4\ud2b8 \uae30\ubc18 PDF\ub85c \ud310\ubcc4\ub428. pdfplumber \uc0ac\uc6a9.\")\n        return extract_text_pdf(pdf_path)\n    else:\n        print(\"[INFO] \uc774\ubbf8\uc9c0 \uae30\ubc18 PDF \ub610\ub294 (cid:) \uae68\uc9d0 \ud14d\uc2a4\ud2b8. OCR \uc0ac\uc6a9.\")\n        return extract_image_pdf(pdf_path)\n\nif __name__ == \"__main__\":\n    pdf_path = \"rag/data/14. \ucde8\uc5c5\uaddc\uce59_(\uc8fc)\ud50c\ub798\ud2f0\uc5b4_2022.05.pdf\"\n    try:\n        text = extract_korean_pdf(pdf_path)\n        print(text)\n    except Exception as e:\n        print(f\"[ERROR] {e}\")\n</code></pre>"},{"location":"search-engine/RAG/LangChain/Document%20Loader/PDF/#6","title":"6. \uacb0\ub860","text":"<p>\uc774 \uae00\uc5d0\uc11c \uad6c\ud604\ud55c \ud30c\uc11c \uad6c\uc870\ub294 \ub2e4\uc74c\uc758 \uc7a5\uc810\uc744 \uac00\uc9c4\ub2e4.</p> <ul> <li> <p>PDF\uac00 \ud14d\uc2a4\ud2b8 \uae30\ubc18\uc774\ub4e0 \uc774\ubbf8\uc9c0 \uae30\ubc18\uc774\ub4e0 \uc790\ub3d9\uc73c\ub85c \ud310\ub2e8\ud558\uc5ec \ucd5c\uc801\uc758 \ucd94\ucd9c \ubc29\uc2dd \uc801\uc6a9</p> </li> <li> <p><code>pdfplumber</code>\ub97c \uc774\uc6a9\ud55c \ube60\ub978 \ud14d\uc2a4\ud2b8 \ucd94\ucd9c\uacfc, <code>tesseract</code> OCR\uc758 \ubcf4\uc644\uc801 \uc0ac\uc6a9</p> </li> <li> <p>CID \uc778\ucf54\ub529\uc73c\ub85c \uc778\ud55c \ud55c\uae00 \uae68\uc9d0 \ubb38\uc81c \uc790\ub3d9 \ud68c\ud53c</p> </li> <li> <p>\ub2e4\uc591\ud55c <code>--psm</code> \uc124\uc815\uc744 \ud1b5\ud55c \uc815\ud655\ub3c4 \ud5a5\uc0c1</p> </li> <li> <p>\ud14c\uc774\ube14\uc774 \ud3ec\ud568\ub41c \ubb38\uc11c\uc758 \uacbd\uc6b0 \ud14c\uc774\ube14 \uad6c\uc870 \uc778\uc2dd\uc744 \ud1b5\ud574 OCR \ubc94\uc704 \uc815\ubc00\ud654</p> </li> </ul> <p>\ub2e8\uc21c\ud788 <code>pdfplumber.extract_text()</code>\ub9cc \uc0ac\uc6a9\ud558\ub294 \ubc29\uc2dd\ubcf4\ub2e4 \ud6e8\uc52c \uc815\uad50\ud558\uace0 \ub2e4\uc591\ud55c \ud55c\uae00 PDF \ubb38\uc11c\uc5d0 \uc801\uc6a9\ud560 \uc218 \uc788\ub294 \ubc94\uc6a9 \ud30c\uc11c\ub85c \ubc1c\uc804\uc2dc\ud0ac \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/","title":"LangGraph \ud65c\uc6a9\ucc98","text":"<ul> <li>\uc6f9 \uac80\uc0c9 \uacb0\uacfc\ub97c \ud65c\uc6a9\ud558\uc5ec \uc77c\ubc18\uc801\uc778 \uc9c8\ubb38\uc774\ub098 \ucd5c\uc2e0 \uc815\ubcf4\uac00 \ud544\uc694\ud55c \uc9c8\ubb38\uc5d0 \ub2f5\ubcc0</li> <li>\uc774\uc804 \ub300\ud654\uc640 \uc0ac\uc6a9\uc790 \uc124\uc815\uc744 \uc800\uc7a5\ud558\uc5ec \ub300\ud654\uc758 \ub9e5\ub77d \uc720\uc9c0\ud558\uae30</li> <li>\uc778\uac04\uc758 \uac1c\uc785\uc774 \ud544\uc694\ud55c \ubcf5\uc7a1\ud55c \uc9c8\ubb38\uc758 \uacbd\uc6b0, \uc778\uac04\uc5d0\uac8c \ub77c\uc6b0\ud305</li> <li>\ud544\uc694\uc5d0 \ub530\ub77c \ucee4\uc2a4\ud140 \uc0c1\ud0dc\uac12\uc744 \uc0ac\uc6a9\ud558\uc5ec \ucc57\ubd07\uc758 \ub3d9\uc791\uc744 \uc720\uc5f0\ud558\uac8c \uc81c\uc5b4</li> <li>\uc774\uc804 \ub300\ud654\ub85c \ub418\ub3cc\uc544\uac00 \uc218\uc815\ud558\ub294 \uae30\ub2a5 \uc9c0\uc6d0</li> </ul>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#1-rag","title":"1. \ubb38\uc11c \uae30\ubc18 \uace0\ub3c4\ud654 RAG \ud30c\uc774\ud504\ub77c\uc778","text":""},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#_1","title":"\uc0c1\ud669","text":"<ul> <li> <p>\uc0ac\uc6a9\uc790\uac00 \"LangGraph\uac00 \ubb34\uc5c7\uc778\uac00\uc694?\"\ub77c\uace0 \uc9c8\ubb38</p> </li> <li> <p>\uc5ec\ub7ec chunk\ub85c \ub098\ub25c \uae30\uc220\ubb38\uc11c\uc5d0\uc11c \ub2f5\ubcc0\uc744 \uc0dd\uc131\ud574\uc57c \ud560 \ub54c</p> </li> </ul>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#langgraph","title":"LangGraph \ud65c\uc6a9 \uad6c\uc870","text":"<pre><code>\uc9c8\ubb38\n \u2193\n[Retrieve node] \u2192 \uad00\ub828 chunk 3\uac1c \uac80\uc0c9\n \u2193\n[Filter node] \u2192 \uc911\uc694\ub3c4 \ub0ae\uc740 chunk \uc81c\uac70\n \u2193\n[Summary node] \u2192 \uac01 chunk \uc694\uc57d\n \u2193\n[Answer node] \u2192 \uc694\uc57d\ub41c \uc815\ubcf4 \uae30\ubc18 \ub2f5\ubcc0 \uc0dd\uc131\n</code></pre>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#_2","title":"\uc774\uc810","text":"<ul> <li> <p>\ubb34\uc758\ubbf8\ud55c chunk\ub97c \uc81c\uac70\ud560 \uc218 \uc788\ub2e4.</p> </li> <li> <p>\ube44\uc6a9 \uc808\uac10\uacfc \uc815\ud655\ub3c4 \ud5a5\uc0c1\uc774 \uac00\ub2a5\ud558\ub2e4.</p> </li> <li> <p>\uac01 \ub178\ub4dc\uc5d0\uc11c \uac1c\ubcc4 \ub85c\uc9c1\uc744 \uc801\uc6a9\ud560 \uc218 \uc788\ub2e4. (\uc608: chunk\ubcc4 \uc694\uc57d \uc2a4\ud0c0\uc77c\uc744 \ub2e4\ub974\uac8c \ud560 \uc218 \uc788\ub2e4.)</p> </li> </ul> <p>\ubb38\uc11c \uae30\ubc18 \uace0\ub3c4\ud654 RAG \ud30c\uc774\ud504\ub77c\uc778\uc740 \ubb38\uc11c \uac80\uc0c9\uacfc \uc815\ubcf4 \uc694\uc57d\uc744 \uacb0\ud569\ud558\uc5ec, \uc0ac\uc6a9\uc790\uc758 \uc9c8\ubb38\uc5d0 \ub300\ud574 \ubcf4\ub2e4 \uc815\ud655\ud558\uace0 \uad00\ub828\uc131 \ub192\uc740 \ub2f5\ubcc0\uc744 \uc0dd\uc131\ud558\ub294 \uace0\uae09 \ud30c\uc774\ud504\ub77c\uc778\uc744 \uad6c\uc131\ud558\ub294 \ubc29\uc2dd\uc774\ub2e4. </p> <p>\uc774 \uc2dc\uc2a4\ud15c\uc740 \uc5ec\ub7ec \ubb38\uc11c chunk\ub85c \ub098\ub204\uc5b4\uc9c4 \ucf58\ud150\uce20\ub97c \ucc98\ub9ac\ud558\uc5ec, \uc9c8\ubb38\uc5d0 \ub9de\ub294 chunk\ub9cc \uc120\ud0dd\uc801\uc73c\ub85c \ud65c\uc6a9\ud558\uace0, \ud544\uc694\ud55c \ubd80\ubd84\uc744 \uc694\uc57d\ud55c \ud6c4 \ucd5c\uc885\uc801\uc73c\ub85c \ub2f5\ubcc0\uc744 \uc0dd\uc131\ud55c\ub2e4.</p>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#_3","title":"\uad6c\uccb4\uc801\uc778 \uc0c1\ud669 \uc124\uba85","text":""},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#_4","title":"\uc0c1\ud669","text":"<ul> <li> <p>\uc0ac\uc6a9\uc790\uac00 \"LangGraph\uac00 \ubb34\uc5c7\uc778\uac00\uc694?\"\ub77c\uace0 \uc9c8\ubb38\ud558\ub294 \uacbd\uc6b0</p> </li> <li> <p>\uc774 \uc9c8\ubb38\uc5d0 \ub300\ud574 \uc5ec\ub7ec \uac1c\uc758 \uae30\uc220 \ubb38\uc11c\uc5d0\uc11c \uc815\ubcf4\ub97c \uac80\uc0c9\ud574\uc57c \ud558\uba70, \uac01 \ubb38\uc11c\ub294 chunk\ub85c \ub098\ub258\uc5b4\uc838 \uc788\ub2e4.</p> </li> <li> <p>\uac01 chunk\ub294 \ubb38\uc11c \ub0b4\uc5d0\uc11c \ub3c5\ub9bd\uc801\uc73c\ub85c \uc720\uc758\ubbf8\ud55c \uc815\ubcf4\ub97c \ud3ec\ud568\ud558\uace0 \uc788\uae30 \ub54c\ubb38\uc5d0, \uc774\ub97c \ud6a8\uc728\uc801\uc73c\ub85c \uac80\uc0c9\ud558\uace0 \uc694\uc57d\ud558\uc5ec \ucd5c\uc801\uc758 \ub2f5\ubcc0\uc744 \ub3c4\ucd9c\ud574\uc57c \ud55c\ub2e4.</p> </li> </ul>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#langgraph_1","title":"LangGraph \ud65c\uc6a9 \uad6c\uc870","text":"<ol> <li> <p>[Retrieve node] - \uad00\ub828 chunk \uac80\uc0c9</p> <ul> <li> <p>\uae30\uc220 \ubb38\uc11c\uc5d0\uc11c \uc0ac\uc6a9\uc790\uc758 \uc9c8\ubb38\uacfc \uad00\ub828\ub41c \uc815\ubcf4\ub97c \ub2f4\uace0 \uc788\uc744 \uac00\ub2a5\uc131\uc774 \ub192\uc740 chunk\ub4e4\uc744 \ubca1\ud130 \uac80\uc0c9\uc744 \ud1b5\ud574 \ucd94\ucd9c\ud55c\ub2e4.</p> </li> <li> <p>\uc774 \ub2e8\uacc4\uc5d0\uc11c \uc0ac\uc6a9\uc790\ub294 <code>top-k</code> \ubc29\uc2dd \ub610\ub294 \uc720\uc0ac\ub3c4 \uae30\ubc18 \uac80\uc0c9\uc744 \ud1b5\ud574 \uad00\ub828\ub41c \ubb38\uc11c\ub4e4\uc744 \ucc3e\ub294\ub2e4.</p> </li> </ul> </li> <li> <p>[Filter node] - \uc911\uc694\ub3c4 \ub0ae\uc740 chunk \uc81c\uac70</p> <ul> <li> <p>\uac80\uc0c9\ub41c chunk\ub4e4 \uc911\uc5d0\uc11c, \uc9c8\ubb38\uacfc \uad00\ub828\uc774 \uc801\uc740 \ubd80\ubd84\uc744 \ud544\ud130\ub9c1\ud55c\ub2e4.</p> </li> <li> <p>\ubb38\uc11c \uae38\uc774\uac00 \uae38\uac70\ub098, \ub0b4\uc6a9\uc774 \ub108\ubb34 \uc77c\ubc18\uc801\uc778 \ubd80\ubd84\uc740 \uc81c\uc678\ud558\uace0, \uc2e4\uc81c \uc9c8\ubb38\uc5d0 \uad00\ub828\ub41c \ud575\uc2ec \uc815\ubcf4\ub97c \ub2f4\uace0 \uc788\ub294 \ubd80\ubd84\ub9cc \ub0a8\uae34\ub2e4.</p> </li> </ul> </li> <li> <p>[Summary node] - \uac01 chunk \uc694\uc57d</p> <ul> <li> <p>\uc120\ud0dd\ub41c chunk\ub4e4\uc744 \uc694\uc57d\ud558\uc5ec \ubd88\ud544\uc694\ud55c \uc138\ubd80 \uc815\ubcf4\ub97c \uc81c\uac70\ud558\uace0 \ud575\uc2ec\ub9cc \ub0a8\uae34\ub2e4.</p> </li> <li> <p>\uc608\ub97c \ub4e4\uc5b4, \uae30\uc220\uc801\uc778 \uc6a9\uc5b4\ub098 \ubcf5\uc7a1\ud55c \ubb38\uc7a5\uc740 \uac04\uacb0\ud558\uac8c \uc7ac\uad6c\uc131\ud558\uc5ec \uc9c8\ubb38\uc5d0 \ub300\ud55c \ub2f5\ubcc0\uc744 \ubcf4\ub2e4 \uba85\ud655\ud558\uac8c \ub3c4\ucd9c\ud560 \uc218 \uc788\ub3c4\ub85d \ud55c\ub2e4.</p> </li> </ul> </li> <li> <p>[Answer node] - \ucd5c\uc885 \ub2f5\ubcc0 \uc0dd\uc131</p> <ul> <li> <p>\uc694\uc57d\ub41c \uc815\ubcf4\ub97c \uae30\ubc18\uc73c\ub85c \ucd5c\uc885\uc801\uc778 \ub2f5\ubcc0\uc744 \uc0dd\uc131\ud55c\ub2e4.</p> </li> <li> <p>\uc815\ud655\ud55c \ub2f5\ubcc0\uc744 \uc81c\uacf5\ud558\uae30 \uc704\ud574, \uc694\uc57d\ub41c \ub0b4\uc6a9\uc744 \uc870\ud569\ud558\uac70\ub098 \ub2e4\uc591\ud55c \uad00\uc810\uc744 \uc81c\uc2dc\ud560 \uc218 \uc788\ub2e4.</p> </li> </ul> </li> </ol>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#_5","title":"\uac01 \ub178\ub4dc\uc758 \uad6c\uccb4\uc801 \uc5ed\ud560\uacfc \uc774\uc810","text":""},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#1-retrieve-node-chunk","title":"1. [Retrieve node] - \uad00\ub828 chunk \uac80\uc0c9","text":"<ul> <li> <p>\uc5ed\ud560: \uc0ac\uc6a9\uc790\uc758 \uc9c8\ubb38\uc5d0 \uad00\ub828\ub41c \ubb38\uc11c\uc758 chunk\ub4e4\uc744 \uac80\uc0c9\ud558\ub294 \ub2e8\uacc4.</p> <ul> <li> <p>\uc608\ub97c \ub4e4\uc5b4, \uc0ac\uc6a9\uc790\uac00 \"LangGraph\uac00 \ubb34\uc5c7\uc778\uac00\uc694?\"\ub77c\uace0 \uc9c8\ubb38\ud558\uba74, <code>LangGraph</code>\uc5d0 \ub300\ud55c \uc815\uc758, \ud2b9\uc9d5, \ud65c\uc6a9 \uc0ac\ub840 \ub4f1\uc774 \ud3ec\ud568\ub41c chunk\ub97c \uac80\uc0c9\ud558\uc5ec \uc120\ud0dd\ud55c\ub2e4.</p> </li> <li> <p>\uc774\ub54c \ubca1\ud130 \uac80\uc0c9, \ubb38\uc11c \uc784\ubca0\ub529 \ub4f1\uc744 \uc0ac\uc6a9\ud558\uc5ec \uc758\ubbf8\uc801\uc73c\ub85c \uac00\uae4c\uc6b4 chunk\ub97c \ucc3e\ub294\ub2e4.</p> </li> </ul> </li> <li> <p>\uc774\uc810</p> <ul> <li> <p>\uc815\ud655\ub3c4: \uc815\ud655\ud55c chunk\ub97c \uc120\ud0dd\ud558\uc5ec \ubd88\ud544\uc694\ud55c \ub370\uc774\ud130 \ucc98\ub9ac \ube44\uc6a9\uc744 \uc808\uac10\ud560 \uc218 \uc788\ub2e4.</p> </li> <li> <p>\uc720\uc5f0\uc131: \uc0ac\uc6a9\uc790\uc758 \uc9c8\ubb38\uc5d0 \ub9de\ub294 \ubb38\uc11c\ub9cc \uc120\ud0dd\uc801\uc73c\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc5b4, \uc751\ub2f5\uc758 \uad00\ub828\uc131\uc744 \ub192\uc77c \uc218 \uc788\ub2e4.</p> </li> </ul> </li> </ul>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#2-filter-node-chunk","title":"2. [Filter node] - \uc911\uc694\ub3c4 \ub0ae\uc740 chunk \uc81c\uac70","text":"<ul> <li> <p>\uc5ed\ud560: \uac80\uc0c9\ub41c chunk \uc911\uc5d0\uc11c \uc9c8\ubb38\uacfc \uad00\ub828\uc131\uc774 \ub0ae\uc740 \ubd80\ubd84\uc744 \uc81c\uac70\ud558\ub294 \ub2e8\uacc4.</p> <ul> <li>\uc608\ub97c \ub4e4\uc5b4, \uae30\uc220 \ubb38\uc11c \ub0b4\uc5d0\uc11c \uc138\ubd80\uc801\uc778 \ucf54\ub4dc \uc608\uc2dc\ub098 \ubd88\ud544\uc694\ud55c \ubc30\uacbd \uc124\uba85 \ub4f1\uc774 \ud3ec\ud568\ub418\uc5b4 \uc788\ub2e4\uba74 \uc774\ub97c \uc81c\uac70\ud55c\ub2e4.</li> </ul> </li> <li> <p>\uc774\uc810</p> <ul> <li> <p>\ud6a8\uc728\uc131: \ud575\uc2ec\uc801\uc778 \uc815\ubcf4\ub9cc \ucd94\ucd9c\ud558\uc5ec \ubd88\ud544\uc694\ud55c chunk\ub97c \uac78\ub7ec\ub0b4\uace0 \uc131\ub2a5\uc744 \ucd5c\uc801\ud654\ud560 \uc218 \uc788\ub2e4.</p> </li> <li> <p>\uc815\ud655\ub3c4: \uc911\uc694\ud55c \uc815\ubcf4\ub9cc \ub0a8\uae30\uace0, \uc911\ubcf5\ub41c \ub0b4\uc6a9\uc774\ub098 \uc798\ubabb\ub41c \uc815\ubcf4\ub97c \uc81c\uc678\ud558\uc5ec \uc815\ud655\ub3c4\ub97c \ub192\uc77c \uc218 \uc788\ub2e4.</p> </li> </ul> </li> </ul>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#3-summary-node-chunk","title":"3. [Summary node] - \uac01 chunk \uc694\uc57d","text":"<ul> <li> <p>\uc5ed\ud560: \uac80\uc0c9\ub41c chunk\ub4e4\uc744 \ud575\uc2ec\uc801\uc778 \ub0b4\uc6a9\uc73c\ub85c \uc694\uc57d\ud558\uc5ec, \ub2f5\ubcc0\uc744 \uc0dd\uc131\ud558\uae30 \uc27d\uac8c \ub9cc\ub4e0\ub2e4.</p> <ul> <li>\uc608\ub97c \ub4e4\uc5b4, \uae38\uace0 \ubcf5\uc7a1\ud55c \uae30\uc220\uc801\uc778 \uc124\uba85\uc744 \uac04\ub7b5\ud558\uac8c \uc7ac\uad6c\uc131\ud558\uc5ec \uc0ac\uc6a9\uc790\uac00 \uc27d\uac8c \uc774\ud574\ud560 \uc218 \uc788\ub294 \ud615\ud0dc\ub85c \ub9cc\ub4e0\ub2e4.</li> </ul> </li> <li> <p>\uc774\uc810</p> <ul> <li> <p>\uc2dc\uac04 \uc808\uc57d: \uae34 \ubb38\uc11c\ub098 chunk\ub97c \uc694\uc57d\ud558\uc5ec \uc0ac\uc6a9\uc790\uac00 \uc6d0\ud558\ub294 \ub2f5\ubcc0\uc744 \ube60\ub974\uac8c \uc81c\uacf5\ud560 \uc218 \uc788\ub2e4.</p> </li> <li> <p>\uac04\uacb0\uc131: \ud575\uc2ec \ub0b4\uc6a9\ub9cc \ud3ec\ud568\ub418\uc5b4 \ubd88\ud544\uc694\ud55c \uc124\uba85\uc774 \uc81c\uac70\ub418\ubbc0\ub85c, \uc815\ud655\ud558\uace0 \uac04\uacb0\ud55c \ub2f5\ubcc0\uc744 \uc81c\uacf5\ud560 \uc218 \uc788\ub2e4.</p> </li> </ul> </li> </ul>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#4-answer-node-","title":"4. [Answer node] - \ucd5c\uc885 \ub2f5\ubcc0 \uc0dd\uc131","text":"<ul> <li> <p>\uc5ed\ud560: \uc694\uc57d\ub41c \uc815\ubcf4\ub4e4\uc744 \uc870\ud569\ud558\uc5ec \uc0ac\uc6a9\uc790\uc758 \uc9c8\ubb38\uc5d0 \ub300\ud55c \ucd5c\uc885 \ub2f5\ubcc0\uc744 \uc0dd\uc131\ud55c\ub2e4.</p> <ul> <li>\uc608\ub97c \ub4e4\uc5b4, \uc5ec\ub7ec \ubb38\uc11c\uc5d0\uc11c \ucd94\ucd9c\ud55c chunk\ub4e4\uc758 \uc694\uc57d\uc744 \ubc14\ud0d5\uc73c\ub85c \uc0ac\uc6a9\uc790\uc5d0\uac8c \uc9c1\uc811\uc801\uc778 \ub2f5\ubcc0\uc744 \uc81c\uacf5\ud55c\ub2e4.</li> </ul> </li> <li> <p>\uc774\uc810</p> <ul> <li> <p>\uc720\uc5f0\uc131: \uc5ec\ub7ec \ub2e4\ub978 \uad00\uc810\uc5d0\uc11c \uc694\uc57d\ub41c \uc815\ubcf4\ub97c \uacb0\ud569\ud558\uc5ec \ucd5c\uc801\uc758 \ub2f5\ubcc0\uc744 \ub3c4\ucd9c\ud560 \uc218 \uc788\ub2e4.</p> </li> <li> <p>\uc815\ud655\ub3c4: \ucd5c\uc885 \ub2f5\ubcc0\uc774 \ub354 \uc815\ud655\ud558\uace0 \uc720\uc758\ubbf8\ud55c \uc815\ubcf4\ub97c \ud3ec\ud568\ud560 \uc218 \uc788\uac8c \ub41c\ub2e4.</p> </li> </ul> </li> </ul>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#_6","title":"\uc2e4\uc81c \uc0ac\uc6a9 \uc608\uc2dc","text":""},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#langgraph_2","title":"\uc608\uc2dc: \"LangGraph\uac00 \ubb34\uc5c7\uc778\uac00\uc694?\" \uc9c8\ubb38\uc5d0 \ub300\ud55c \ub2f5\ubcc0 \uc0dd\uc131","text":"<ol> <li> <p>Retrieve node:     \uc0ac\uc6a9\uc790 \uc9c8\ubb38\uc5d0 \ub9de\ub294 LangGraph \uad00\ub828 \ubb38\uc11c\ub97c \ubca1\ud130 \uac80\uc0c9\uc744 \ud1b5\ud574 \uac80\uc0c9\ud558\uc5ec 3\uac1c\uc758 \uad00\ub828 chunk\ub97c \ucc3e\ub294\ub2e4.</p> </li> <li> <p>Filter node:     \uac80\uc0c9\ub41c chunk \uc911\uc5d0\uc11c \ubd88\ud544\uc694\ud55c \ub0b4\uc6a9\uc774\ub098 \uc911\ubcf5\ub41c \uc124\uba85\uc744 \uc81c\uac70\ud558\uace0, \ud575\uc2ec\uc801\uc778 LangGraph\uc758 \ud2b9\uc9d5\uc5d0 \ud574\ub2f9\ud558\ub294 chunk\ub4e4\ub9cc \ub0a8\uae34\ub2e4.</p> </li> <li> <p>Summary node:     \uac01 chunk\ub97c \uac04\uacb0\ud558\uac8c \uc694\uc57d\ud558\uc5ec LangGraph\uc758 \uc8fc\uc694 \uac1c\ub150, \ud65c\uc6a9 \ubc29\uc2dd, \uc7a5\uc810 \ub4f1\uc744 \uac04\ub2e8\ud788 \uc815\ub9ac\ud55c\ub2e4.</p> </li> <li> <p>Answer node:     \uc694\uc57d\ub41c \ub0b4\uc6a9\uc744 \ubc14\ud0d5\uc73c\ub85c \"LangGraph\ub294 LLM \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \uc0c1\ud0dc \uae30\ubc18\uc73c\ub85c \uc124\uacc4\ud560 \uc218 \uc788\uac8c \ud574\uc8fc\ub294 \ud504\ub808\uc784\uc6cc\ud06c\uc785\ub2c8\ub2e4. \uc5ec\ub7ec \ub178\ub4dc\ub97c \ud1b5\ud574 \ubcf5\uc7a1\ud55c \uc6cc\ud06c\ud50c\ub85c\uc6b0\ub97c \uc124\uacc4\ud560 \uc218 \uc788\uc73c\uba70, \ubd84\uae30\uc640 \ubc18\ubcf5, \ubcd1\ub82c \ucc98\ub9ac \ub4f1\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\"\uc640 \uac19\uc740 \ucd5c\uc885 \ub2f5\ubcc0\uc744 \uc0dd\uc131\ud55c\ub2e4.</p> </li> </ol>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#_7","title":"\uc774\uc810 \ubc0f \ucd5c\uc801\ud654","text":"<ul> <li> <p>\uc815\ud655\ub3c4 \ud5a5\uc0c1: \ubb34\uc758\ubbf8\ud55c chunk\ub098 \uc815\ubcf4\ub97c \uac78\ub7ec\ub0b4\uace0, \uc911\uc694\ud55c \uc815\ubcf4\ub9cc\uc744 \uc0ac\uc6a9\ud558\ubbc0\ub85c \uc815\ud655\ud55c \ub2f5\ubcc0\uc744 \ub3c4\ucd9c\ud560 \uc218 \uc788\ub2e4.</p> </li> <li> <p>\ube44\uc6a9 \uc808\uac10: \ubd88\ud544\uc694\ud55c chunk\ub97c \ucc98\ub9ac\ud558\uc9c0 \uc54a\uc73c\ubbc0\ub85c \uc2dc\uc2a4\ud15c \uc790\uc6d0 \uc0ac\uc6a9\uc744 \ucd5c\uc18c\ud654\ud560 \uc218 \uc788\ub2e4.</p> </li> <li> <p>\uc720\uc5f0\uc131: \uac01 \ub178\ub4dc\uc5d0\uc11c \ucc98\ub9ac\ud558\ub294 \ub85c\uc9c1\uc744 \uc0ac\uc6a9\uc790\uc758 \uc694\uad6c\uc0ac\ud56d\uc5d0 \ub9de\uac8c \ucd5c\uc801\ud654\ud560 \uc218 \uc788\ub2e4. \uc608\ub97c \ub4e4\uc5b4, \uc694\uc57d \ubc29\uc2dd\uc774\ub098 \ud544\ud130\ub9c1 \uae30\uc900\uc744 \uc27d\uac8c \ubcc0\uacbd\ud560 \uc218 \uc788\ub2e4.</p> </li> <li> <p>\ud6a8\uc728\uc131: \ud55c \ubc88\uc758 \uc9c8\uc758\uc5d0 \ub300\ud574 \ube60\ub974\uace0 \uac04\uacb0\ud55c \ub2f5\ubcc0\uc744 \uc81c\uacf5\ud560 \uc218 \uc788\ub2e4.</p> </li> </ul>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#2-stateful-chatbot","title":"2. \uc0c1\ud0dc \uae30\ubc18 \ub300\ud654 \ud750\ub984 \uad00\ub9ac (Stateful Chatbot)","text":""},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#_8","title":"\uc0c1\ud669","text":"<ul> <li>\uace0\uac1d\uc13c\ud130 \ucc57\ubd07\uc774 \u201c\ubc18\ud488\uc744 \ud558\uace0 \uc2f6\uc5b4\uc694\u201d \ub77c\uace0 \ub9d0\ud558\uba74,     \u2192 \uc0ac\uc6a9\uc790\uc758 \ucd5c\uadfc \uc8fc\ubb38 \uc0c1\ud0dc\uc640 \uacc4\uc815 \uc0c1\ud0dc\uc5d0 \ub530\ub77c \ubd84\uae30 \ucc98\ub9ac\ud574\uc57c \ud560 \ub54c</li> </ul>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#langgraph_3","title":"LangGraph \ud65c\uc6a9 \uad6c\uc870","text":"<pre><code>\uc9c8\ubb38\n \u2193\n[Intent \ud310\ub2e8 node]\n   \u251c\u2500\u2500 \"\ubc18\ud488\"\n   \u2502   \u251c\u2500\u2500 [\uc8fc\ubb38 \uc720\ubb34 node] \u2192 \ucd5c\uadfc \uc8fc\ubb38 \uc870\ud68c\n   \u2502   \u2502   \u251c\u2500\u2500 \uc788\uc74c \u2192 [\ubc18\ud488 \uc808\ucc28 \uc548\ub0b4]\n   \u2502   \u2502   \u2514\u2500\u2500 \uc5c6\uc74c \u2192 [\uc548\ub0b4 \ubd88\uac00 \uc751\ub2f5]\n   \u2514\u2500\u2500 \"\ubb38\uc758\" \u2192 \uace0\uac1d\uc13c\ud130 \uc5f0\uacb0\n</code></pre>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#_9","title":"\uc774\uc810","text":"<ul> <li> <p>\uc720\uc800 \uc0c1\ud0dc(\uc138\uc158, \uad6c\ub9e4 \uc774\ub825 \ub4f1)\ub97c \uadf8\ub798\ud504 \uc0c1\ud0dc\uc5d0 \ud3ec\ud568\ud560 \uc218 \uc788\ub2e4.</p> </li> <li> <p>\ub2e4\ub2e8\uacc4 \ud310\ub2e8 \ud750\ub984\uc744 \uad6c\uc131\ud560 \uc218 \uc788\ub2e4.</p> </li> </ul>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#3","title":"3. \uba40\ud2f0 \ubb38\uc11c \ube44\uad50 \ubd84\uc11d \uc2dc\uc2a4\ud15c","text":""},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#_10","title":"\uc0c1\ud669","text":"<ul> <li>\uc0ac\uc6a9\uc790\uac00 \"LangChain\uacfc LlamaIndex\uc758 \ucc28\uc774\uc810\uc740?\"\uc774\ub77c\uace0 \uc9c8\ubb38</li> </ul>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#langgraph_4","title":"LangGraph \ud65c\uc6a9 \uad6c\uc870","text":"<pre><code>\uc9c8\ubb38\n \u2193\n[\uac80\uc0c9 \ub178\ub4dc] \u2192 \uac01\uac01 LangChain \ubb38\uc11c, LlamaIndex \ubb38\uc11c \uac80\uc0c9\n \u2193\n[\uc694\uc57d \ub178\ub4dc] \u2192 \uac01\uac01 \uc694\uc57d\n \u2193\n[\ube44\uad50 \ub178\ub4dc] \u2192 \uc720\uc0ac\uc810/\ucc28\uc774\uc810 \ube44\uad50 \uc815\ub9ac\n \u2193\n[\uc751\ub2f5 \ub178\ub4dc] \u2192 \ub2f5\ubcc0 \uc0dd\uc131\n</code></pre>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#_11","title":"\uc774\uc810","text":"<ul> <li> <p>\ubb38\uc11c 2\uac1c \uc774\uc0c1\uc744 \ubcd1\ub82c \ucc98\ub9ac\ud558\uc5ec \uc131\ub2a5 \ud5a5\uc0c1\uc774 \uac00\ub2a5\ud558\ub2e4.</p> </li> <li> <p>\ube44\uad50\uc6a9 \ud504\ub86c\ud504\ud2b8\uc640 \uc694\uc57d \ub85c\uc9c1\uc744 \ubd84\ub9ac\ud560 \uc218 \uc788\ub2e4.</p> </li> </ul>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#4-multi-hop-qa-chain-of-thought","title":"4. Multi-hop QA (Chain-of-Thought)","text":""},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#_12","title":"\uc0c1\ud669","text":"<ul> <li> <p>\uc0ac\uc6a9\uc790\uac00 \u201cQdrant\uc5d0 \ub370\uc774\ud130\ub97c \ub123\uace0 \uac80\uc0c9\ud558\ub824\uba74 \uc5b4\ub5a4 \uc808\ucc28\uac00 \ud544\uc694\ud558\ub098\uc694?\u201d\ub77c\uace0 \uc9c8\ubb38</p> </li> <li> <p>\ub2e8\uacc4\ubcc4\ub85c reasoning\uc774 \ud544\uc694\ud55c \uc9c8\ubb38</p> </li> </ul>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#langgraph_5","title":"LangGraph \ud65c\uc6a9 \uad6c\uc870","text":"<pre><code>\uc9c8\ubb38\n \u2193\n[1\ub2e8\uacc4: \ub370\uc774\ud130 \uc0bd\uc785 \uc774\ud574 \ub178\ub4dc]\n \u2193\n[2\ub2e8\uacc4: \ubca1\ud130 \uac80\uc0c9 \uc774\ud574 \ub178\ub4dc]\n \u2193\n[3\ub2e8\uacc4: \uc804\uccb4 \uc808\ucc28 \uc0dd\uc131 \ub178\ub4dc]\n \u2193\n[\uc751\ub2f5 \uc0dd\uc131]\n</code></pre>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#_13","title":"\uc774\uc810","text":"<ul> <li> <p>\uc911\uac04 reasoning \uacb0\uacfc\ub4e4\uc744 \uc0c1\ud0dc\ub85c \uc720\uc9c0\ud558\uba74\uc11c \ub2f5\ubcc0\uc744 \uc0dd\uc131\ud560 \uc218 \uc788\ub2e4.</p> </li> <li> <p>\ub2e8\uacc4\ubcc4 \ucd94\ub860 \uc2e4\ud328\ub97c \ubc29\uc9c0\ud560 \uc218 \uc788\ub2e4.</p> </li> </ul>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#5","title":"5. \ucf54\ub4dc \ub9ac\ubdf0/\ud3b8\uc9d1 \ub3c4\uc6b0\ubbf8","text":""},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#_14","title":"\uc0c1\ud669","text":"<ul> <li> <p>\uc0ac\uc6a9\uc790\uac00 \"\uc774 \ucf54\ub4dc\uc5d0\uc11c \uc131\ub2a5 \ubcd1\ubaa9\uc744 \ucc3e\uc544\uc918\"\ub77c\uace0 \uc694\uccad</p> </li> <li> <p>\uae34 \ucf54\ub4dc chunk\ubcc4\ub85c \ub098\ub220\uc11c \ubd84\uc11d\ud558\uace0, \uc774\uc288\uac00 \uc788\ub294 \ubd80\ubd84\ub9cc \uc751\ub2f5\ud558\uace0 \uc2f6\uc744 \ub54c</p> </li> </ul>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#langgraph_6","title":"LangGraph \ud65c\uc6a9 \uad6c\uc870","text":"<pre><code>\uc9c8\ubb38 + \ucf54\ub4dc\n \u2193\n[\ucf54\ub4dc chunking]\n \u2193\n[chunk \ubd84\uc11d node] (\uc5ec\ub7ec \uac1c, \ubcd1\ub82c \ucc98\ub9ac \uac00\ub2a5)\n \u2193\n[\uc131\ub2a5 \uc774\uc288\uac00 \uc788\ub294 chunk\ub9cc \ucd94\ub9bc]\n \u2193\n[\uc751\ub2f5 \uc0dd\uc131]\n</code></pre>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#_15","title":"\uc774\uc810","text":"<ul> <li> <p>\uac01 chunk\ub97c \ub178\ub4dc\ub85c \ubd84\uc11d\ud560 \uc218 \uc788\uc5b4 \ubcd1\ubaa9 \uc9c0\uc810\ub9cc \uc120\ud0dd\ud560 \uc218 \uc788\ub2e4.</p> </li> <li> <p>\uc0c1\ud0dc\ub85c \uc774\uc288 chunk, \uc0ac\uc720, \uac1c\uc120 \uc81c\uc548\uae4c\uc9c0 \ud3ec\ud568\ud560 \uc218 \uc788\ub2e4.</p> </li> </ul>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#6","title":"6. \uc0ac\uc6a9\uc790 \ubaa9\ud45c \uae30\ubc18 \uc6cc\ud06c\ud50c\ub85c\uc6b0 \uc218\ud589","text":""},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#_16","title":"\uc0c1\ud669","text":"<ul> <li>\uc0ac\uc6a9\uc790\uac00 \u201cQdrant \uc124\uce58\ud574\uc11c \uc0d8\ud50c \ubb38\uc11c \uac80\uc0c9\uae4c\uc9c0 \ud574\ubcf4\uace0 \uc2f6\uc5b4\uc694\u201d\ub77c\uace0 \uc694\uccad</li> </ul>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#langgraph_7","title":"LangGraph \ud65c\uc6a9 \uad6c\uc870","text":"<pre><code>\uc9c8\ubb38\n \u2193\n[\ubaa9\ud45c \ucd94\ucd9c] \u2192 \"Qdrant \uc124\uce58 \ubc0f \ud14c\uc2a4\ud2b8\"\n \u2193\n[\uacc4\ud68d \uc218\ub9bd node] \u2192 Step 1~3 \uad6c\uc131\n \u2193\n[\uac01 \ub2e8\uacc4 \uc2e4\ud589 node]\n   \u251c\u2500 Step 1: \uc124\uce58 \uba85\ub839\uc5b4 \uc0dd\uc131\n   \u251c\u2500 Step 2: \ubb38\uc11c \uc5c5\ub85c\ub4dc \ucf54\ub4dc \uc791\uc131\n   \u2514\u2500 Step 3: \uac80\uc0c9 \ucf54\ub4dc \uc791\uc131\n \u2193\n[\ud1b5\ud569 \uc751\ub2f5]\n</code></pre>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#_17","title":"\uc774\uc810","text":"<ul> <li> <p>\ub2e8\uacc4\ubcc4 \ud504\ub86c\ud504\ud2b8, \uc870\uac74 \ubd84\uae30\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4.</p> </li> <li> <p>\uc0ac\uc6a9\uc790\uc758 \ud53c\ub4dc\ubc31\uc744 \ubc1b\uc544 \ud750\ub984\uc744 \uc218\uc815\ud560 \uc218 \uc788\ub2e4.</p> </li> </ul>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#7-llm-ab-testing","title":"7. \uc790\ub3d9\ud654\ub41c LLM \ud3c9\uac00 \ud50c\ub85c\uc6b0 (A/B Testing)","text":""},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#_18","title":"\uc0c1\ud669","text":"<ul> <li>\ub450 \uac1c\uc758 LLM (\uc608: GPT-4 vs Gemini)\uc744 \uac19\uc740 \uc9c8\ubb38\uc73c\ub85c \ud3c9\uac00\ud558\uace0 \ube44\uad50</li> </ul>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#langgraph_8","title":"LangGraph \ud65c\uc6a9 \uad6c\uc870","text":"<pre><code>\uc9c8\ubb38\n \u2193\n[LLM A \uc751\ub2f5 \uc0dd\uc131 \ub178\ub4dc]\n[LLM B \uc751\ub2f5 \uc0dd\uc131 \ub178\ub4dc]\n \u2193\n[\uc751\ub2f5 \ube44\uad50 \ud3c9\uac00 \ub178\ub4dc] (\uc608: Rouge, BLEU, \ub610\ub294 \uc0ac\uc6a9\uc790 \ud53c\ub4dc\ubc31)\n \u2193\n[\ucd5c\uc885 \uacb0\uacfc \ubc18\ud658]\n</code></pre>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#_19","title":"\uc774\uc810","text":"<ul> <li> <p>\ub3d9\uc77c \uc9c8\ubb38\uc73c\ub85c \uba40\ud2f0 LLM \ube44\uad50\uac00 \uac00\ub2a5\ud558\ub2e4.</p> </li> <li> <p>LangGraph \uc0c1\ud0dc\uc5d0 \uac01 \uacb0\uacfc\uc640 \uc810\uc218\ub97c \uc800\uc7a5\ud560 \uc218 \uc788\ub2e4.</p> </li> </ul>"},{"location":"search-engine/RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/#_20","title":"\uacb0\ub860","text":"<p>LangGraph\ub294 \ub2e8\uc21c\ud788 \uc5ec\ub7ec \ub178\ub4dc\ub97c \uc787\ub294 \uac83\uc774 \uc544\ub2c8\ub77c, \ub2e4\uc74c\uc774 \uac00\ub2a5\ud558\uac8c \ud574\uc900\ub2e4:</p> <ul> <li> <p>\uc0c1\ud0dc \uc720\uc9c0 \uae30\ubc18 \ud750\ub984 \uc81c\uc5b4</p> </li> <li> <p>\uc870\uac74 \ubd84\uae30, \ubc18\ubcf5, \ubcd1\ub82c \ud750\ub984 \uc124\uacc4</p> </li> <li> <p>\uc720\uc800 \uc785\ub825, \ud658\uacbd, \uc9c8\ubb38 \uc720\ud615\uc5d0 \ub530\ub77c \ub2e4\uc591\ud55c \ucc98\ub9ac \ud750\ub984 \uad6c\uc131</p> </li> </ul> <p>\u201c\uace0\uc815\ub41c \uc9c8\ubb38-\ub2f5 \uad6c\uc870\ub97c \ub118\uc5b4\uc11c\uace0 \uc2f6\ub2e4\u201d, \u201cchunk\ub9c8\ub2e4 \ub2e4\ub974\uac8c \ucc98\ub9ac\ud558\uac70\ub098 \uc0ac\uc6a9\uc790 \uc0c1\ud0dc\ub97c \ubc18\uc601\ud558\uace0 \uc2f6\ub2e4\u201d \u2192 \uc774\ub7f0 \uc0c1\ud669\uc774\uba74 LangGraph\ub294 \uc544\uc8fc \uac15\ub825\ud55c \uc120\ud0dd\uc774 \ub420 \uc218 \uc788\ub2e4.</p> <p>\uc5b4\ub5a4 \uc6cc\ud06c\ud50c\ub85c\uc6b0\uac00 \ud604\uc7ac \ud504\ub85c\uc81d\ud2b8\uc5d0 \uac00\uc7a5 \uc798 \ub9de\uc744\uc9c0 \uace0\ubbfc\ub41c\ub2e4\uba74, \ud544\uc694\ud55c \uc720\uc988\ucf00\uc774\uc2a4\uc5d0 \ub9de\ub294 LangGraph \uc608\uc81c\ub97c \ub9cc\ub4e4\uc5b4\uc904 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/RAG/RAG%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EA%B3%A0%EB%8F%84%ED%99%94/Intro/","title":"Intro","text":""},{"location":"search-engine/RAG/RAG%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EA%B3%A0%EB%8F%84%ED%99%94/Intro/#retrieval","title":"Retrieval (\ubb38\uc11c \uac80\uc0c9)","text":""},{"location":"search-engine/RAG/RAG%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EA%B3%A0%EB%8F%84%ED%99%94/Intro/#1","title":"1. \uccad\ud0b9 \uc804\ub7b5 (\uc804\ucc98\ub9ac)","text":"<p>\ubb38\uc11c\ub97c \ud6a8\uacfc\uc801\uc73c\ub85c \ubd84\ud560\ud558\ub294 \ub2e4\uc591\ud55c \uae30\ubc95\uc744 \ud65c\uc6a9\ud558\uc5ec \uac80\uc0c9\uc5d0 \ucd5c\uc801\ud654\ub41c \ud615\ud0dc\ub85c \ubcc0\ud658\ud568\uc73c\ub85c\uc368 \uac80\uc0c9 \ud488\uc9c8\uacfc \ucc98\ub9ac \uc18d\ub3c4 \ud5a5\uc0c1</p>"},{"location":"search-engine/RAG/RAG%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EA%B3%A0%EB%8F%84%ED%99%94/Intro/#2","title":"2. \uc9c8\uc758 \ubcc0\ud615 (\ucffc\ub9ac \uc7ac\uc791\uc131)","text":"<p>\uc9c8\ubb38\uc758 \uad6c\uccb4\ud654, \uac00\uc0c1\uc758 \ub2f5\ubcc0 \ud65c\uc6a9 \ub4f1\uc758 \uae30\ubc95\uc744 \ud1b5\ud574 \uc0ac\uc6a9\uc790\uc758 \uc6d0\ub798 \uc9c8\ubb38\uc744 \uac80\uc0c9\uc5d0 \ud6a8\uc728\uc801\uc778 \ud615\ud0dc\ub85c \uc7ac\uad6c\uc131</p>"},{"location":"search-engine/RAG/RAG%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EA%B3%A0%EB%8F%84%ED%99%94/Intro/#3","title":"3. \uac80\uc0c9 \uc54c\uace0\ub9ac\uc998 \ucd5c\uc801\ud654","text":"<p>\uc758\ubbf8 \uae30\ubc18\uc758 \ubca1\ud130 \uac80\uc0c9\uacfc \ud0a4\uc6cc\ub4dc \uae30\ubc18 \uac80\uc0c9, \ud558\uc774\ube0c\ub9ac\ub4dc \uac80\uc0c9 \ub4f1\uc758 \ubc29\uc2dd\uc744 \ud65c\uc6a9\ud558\uc5ec \uad00\ub828\uc131 \ub192\uc740 \ubb38\uc11c\ub97c \ub354 \ud6a8\uc728\uc801\uc73c\ub85c \uac80\uc0c9</p>"},{"location":"search-engine/RAG/RAG%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EA%B3%A0%EB%8F%84%ED%99%94/Intro/#4","title":"4. \ubb38\uc11c \ud6c4\ucc98\ub9ac (\ub9ac\ub7ad\ud0b9)","text":"<p>1\ucc28 \uac80\uc0c9 \uacb0\uacfc\uc640 \uc9c8\ubb38\uc758 \uc5f0\uad00\uc131\uc744 \uc7ac\ud3c9\uac00\ud558\uc5ec \uc9c8\ubb38\uacfc \uad00\ub828\uc5c6\ub294 \ubb38\uc11c \uc81c\uac70, \uc774\ub97c \ud1b5\ud574 \uac80\uc0c9\ub41c \uc815\ubcf4\uc758 \ud488\uc9c8\uc744 \ub192\uc774\uace0 \uad81\uadf9\uc801\uc73c\ub85c \ub354 \uc2e0\ub8b0\ud560 \uc218 \uc788\ub294 \ucd5c\uc885 \ud504\ub86c\ud504\ud2b8 \uc81c\uacf5</p>"},{"location":"search-engine/RAG/RAG%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EA%B3%A0%EB%8F%84%ED%99%94/Intro/#generation","title":"Generation (\ub2f5\ubcc0 \uc0dd\uc131)","text":""},{"location":"search-engine/RAG/RAG%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EA%B3%A0%EB%8F%84%ED%99%94/Intro/#1-self-rag","title":"1. Self-RAG","text":"<p>\ubaa8\ub378\uc774 \uc2a4\uc2a4\ub85c \ucd94\uac00 \uac80\uc0c9 \ud544\uc694\uc131\uc744 \ud310\ub2e8\ud558\uace0 \ubd80\uc871\ud55c \uc815\ubcf4\ub97c \ucc3e\uc544 \ubcf4\uc548, \uc774\ub97c \ubc14\ud0d5\uc73c\ub85c \ub354 \uae4a\uc774 \uc788\uace0 \uc815\ud655\ud55c \uc751\ub2f5\uc744 \uc81c\uacf5\ud558\uc5ec \uc0ac\uc6a9\uc790 \uacbd\ud5d8 \uac1c\uc120</p>"},{"location":"search-engine/RAG/RAG%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EA%B3%A0%EB%8F%84%ED%99%94/Intro/#2_1","title":"2. \ubaa8\ub378 \ud30c\uc778\ud29c\ub2dd","text":"<p>\ubaa8\ub378\uc744 \ud559\uc2b5\uc2dc\ucf1c \ub2e4\uc591\ud55c \uc0c1\ud669\uc5d0 \ub300\ud55c \ub300\uc751 \ub2a5\ub825 \uac15\ud654, \uc774\ub97c \ud1b5\ud574 \uac80\uc0c9\ub41c \uc815\ubcf4\ub97c \ub354\uc6b1 \ud6a8\uc728\uc801\uc73c\ub85c \ud65c\uc6a9\ud558\uc5ec \ub9e5\ub77d\uc5d0 \ub9de\ub294 \uc801\uc808\ud55c \uc751\ub2f5 \uc0dd\uc131 \uae30\ub2a5</p>"},{"location":"search-engine/RAG/RAG%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EA%B3%A0%EB%8F%84%ED%99%94/%EC%B2%AD%ED%82%B9%20%EC%A0%84%EB%9E%B5/","title":"\uccad\ud0b9 \uc804\ub7b5","text":"<p>\ubb38\uc11c \uc804\ucc98\ub9ac\ub294 RAG(Retrieval-Augmented Generation) \uc2dc\uc2a4\ud15c\uc5d0\uc11c \ud575\uc2ec\uc801\uc778 \uc804\ucc98\ub9ac \uacfc\uc815 \uc911 \ud558\ub098\uc774\ub2e4. \uc774 \ub2e8\uacc4\ub294 \uc6d0\ubcf8 \ubb38\uc11c\ub97c \uac80\uc0c9\uacfc \uc0dd\uc131\uc5d0 \uc801\ud569\ud55c \ud615\ud0dc\ub85c \uac00\uacf5\ud558\uc5ec, \uac80\uc0c9 \uc815\ud655\ub3c4\uc640 \uc0dd\uc131 \ud488\uc9c8\uc744 \ubaa8\ub450 \ud5a5\uc0c1\uc2dc\ud0a4\ub294 \ub370 \ubaa9\uc801\uc774 \uc788\ub2e4.</p>"},{"location":"search-engine/RAG/RAG%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EA%B3%A0%EB%8F%84%ED%99%94/%EC%B2%AD%ED%82%B9%20%EC%A0%84%EB%9E%B5/#chunking","title":"\ubb38\uc11c \ubd84\ud560(\uccad\ud0b9, Chunking)\uc758 \uc911\uc694\uc131","text":"<p>\ubb38\uc11c \ubd84\ud560\uc740 \uc804\ucc98\ub9ac\uc758 \ud575\uc2ec\uc73c\ub85c, \uae34 \ubb38\uc11c\ub97c \uc791\uace0 \uc720\uc758\ubbf8\ud55c \ub2e8\uc704\ub85c \ub098\ub204\ub294 \uc791\uc5c5\uc774\ub2e4. \uc774 \uacfc\uc815\uc740 \uc815\ubcf4 \uac80\uc0c9 \uc815\ud655\ub3c4, \ubb38\ub9e5 \ubcf4\uc874, \uc0dd\uc131 \ud6a8\uc728\uc131\uc5d0 \uc9c1\uacb0\ub41c\ub2e4. \uc801\uc808\ud558\uac8c \ub098\ub208 \uccad\ud06c\ub294 \uc720\uc0ac\ub3c4 \uac80\uc0c9\uc758 \uc815\ubc00\ub3c4\ub97c \ub192\uc774\uace0, LLM\uc774 \ubd80\ub2f4 \uc5c6\uc774 \ubb38\ub9e5\uc744 \uc774\ud574\ud558\uac8c \ud558\uc5ec \uc751\ub2f5 \ud488\uc9c8\uc744 \ub192\uc774\ub294 \ub370 \uae30\uc5ec\ud55c\ub2e4.</p>"},{"location":"search-engine/RAG/RAG%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EA%B3%A0%EB%8F%84%ED%99%94/%EC%B2%AD%ED%82%B9%20%EC%A0%84%EB%9E%B5/#_1","title":"\ubb38\uc790 \uc218 \uae30\ubc18 \ubd84\ud560\uc758 \ud55c\uacc4","text":"<p>\uac00\uc7a5 \ub2e8\uc21c\ud55c \ubc29\uc2dd\uc740 \ubb38\uc790 \uc218 \uae30\ubc18 \ubd84\ud560\uc774\ub2e4. \uc774\ub294 \uc77c\uc815\ud55c \uae38\uc774\ub9c8\ub2e4 \ud14d\uc2a4\ud2b8\ub97c \uc790\ub974\ub294 \ubc29\uc2dd\uc73c\ub85c \uad6c\ud604\uc774 \ub9e4\uc6b0 \uac04\ub2e8\ud558\uace0 \uc18d\ub3c4\uac00 \ube60\ub974\ub2e4. \uadf8\ub7ec\ub098 \ubb38\uc7a5 \uad6c\uc870\ub098 \uc758\ubbf8 \ud750\ub984\uc744 \uace0\ub824\ud558\uc9c0 \uc54a\uae30 \ub54c\ubb38\uc5d0 \ub2e4\uc74c\uacfc \uac19\uc740 \ubb38\uc81c\uac00 \uc788\ub2e4.</p> <ul> <li> <p>\ud575\uc2ec \uc815\ubcf4\uac00 \uc798\ub824\uc11c \uac80\uc0c9 \uc2dc \ub204\ub77d \uac00\ub2a5</p> </li> <li> <p>\ubb38\ub9e5\uc774 \ub04a\uaca8 \uc0dd\uc131 \uc751\ub2f5\uc774 \uc5b4\uc0c9\ud574\uc9c8 \uc218 \uc788\uc74c</p> </li> <li> <p>\ubb38\uc11c\uc5d0 \ub530\ub77c \ucd5c\uc801\uc758 \ubd84\ud560\uc774 \ub418\uc9c0 \uc54a\uc74c</p> </li> </ul>"},{"location":"search-engine/RAG/RAG%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EA%B3%A0%EB%8F%84%ED%99%94/%EC%B2%AD%ED%82%B9%20%EC%A0%84%EB%9E%B5/#-parent-child-chunking","title":"\ubd80\ubaa8-\uc790\uc2dd \ubd84\ud560(Parent-Child Chunking)\uc758 \uac1c\uc694","text":"<p>\ubcf4\ub2e4 \uad6c\uc870\ud654\ub41c \ubc29\uc2dd\uc73c\ub85c \ubb38\uc11c\ub97c \ubd84\ud560\ud558\uae30 \uc704\ud55c \uc804\ub7b5\uc774 \ubd80\ubaa8-\uc790\uc2dd \ubd84\ud560\uc774\ub2e4. \uc774 \ubc29\uc2dd\uc740 \ub2e8\uc21c\ud788 \ud14d\uc2a4\ud2b8 \uae38\uc774\ub9cc \uace0\ub824\ud558\uc9c0 \uc54a\uace0 \ubb38\uc11c\uc758 \uacc4\uce35 \uad6c\uc870\ub97c \ubcf4\uc874\ud558\uba74\uc11c\ub3c4, \uac80\uc0c9 \ud6a8\uc728\uc131\uacfc \ubb38\ub9e5 \uc774\ud574\ub3c4\ub97c \ub3d9\uc2dc\uc5d0 \ucd94\uad6c\ud558\ub294 \ubc29\uc2dd\uc774\ub2e4.</p>"},{"location":"search-engine/RAG/RAG%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EA%B3%A0%EB%8F%84%ED%99%94/%EC%B2%AD%ED%82%B9%20%EC%A0%84%EB%9E%B5/#_2","title":"\uae30\ubcf8 \uac1c\ub150","text":"<p>\ubd80\ubaa8-\uc790\uc2dd \ubd84\ud560\uc740 \ubb38\uc11c\ub97c \ub450 \ub2e8\uacc4\ub85c \ub098\ub208\ub2e4.</p> <ol> <li> <p>\ubd80\ubaa8 \ubb38\uc11c(Parent Chunk): \uc7a5, \uc808, \ud070 \ub2e8\ub77d \ub4f1 \ubb38\uc11c\uc758 \uc8fc\uc694 \uad6c\ud68d \uae30\uc900\uc73c\ub85c \ub098\ub208 \ud070 \ub2e8\uc704</p> </li> <li> <p>\uc790\uc2dd \ubb38\uc11c(Child Chunk): \uac01 \ubd80\ubaa8 \ubb38\uc11c\uc5d0\uc11c \ub2e4\uc2dc \uc758\ubbf8 \ub2e8\uc704\ub85c \uc138\ubd84\ud654\ub41c \uc791\uc740 \uccad\ud06c</p> </li> </ol> <p>\uc774\ub85c\uc368 \uc6d0\ubcf8 \u2192 \ubd80\ubaa8 \u2192 \uc790\uc2dd\uc758 3\ub2e8\uacc4 \uad6c\uc870\uac00 \ud615\uc131\ub418\uba70, \uc790\uc2dd\uc740 \ubd80\ubaa8\uc5d0 \uc18d\ud55c\ub2e4\ub294 \uad00\uacc4\ub97c \uba54\ud0c0\ub370\uc774\ud130\ub85c \uba85\uc2dc\ud55c\ub2e4.</p>"},{"location":"search-engine/RAG/RAG%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EA%B3%A0%EB%8F%84%ED%99%94/%EC%B2%AD%ED%82%B9%20%EC%A0%84%EB%9E%B5/#-","title":"\ubd80\ubaa8-\uc790\uc2dd \ubd84\ud560\uc758 \ud575\uc2ec \uc7a5\uc810","text":"<ol> <li> <p>\uc815\ud655\ud55c \uc815\ubcf4 \uac80\uc0c9     \uac80\uc0c9\uc740 \uc790\uc2dd \uccad\ud06c\ub97c \uae30\uc900\uc73c\ub85c \uc218\ud589\ub41c\ub2e4. \uc790\uc2dd\uc740 \uc138\ubd84\ud654\ub41c \uc815\ubcf4\ub97c \ud3ec\ud568\ud558\uace0 \uc788\uc5b4 \uc0ac\uc6a9\uc790 \ucffc\ub9ac\uc640 \ub192\uc740 \uad00\ub828\ub3c4\ub97c \uac00\uc9c8 \uac00\ub2a5\uc131\uc774 \ud06c\ub2e4. \ub530\ub77c\uc11c \ub300\uc6a9\ub7c9 \ubb38\uc11c\uc5d0\uc11c\ub3c4 \ubaa9\ud45c \uc815\ubcf4\ub97c \ube60\ub974\uac8c \ucc3e\uc744 \uc218 \uc788\ub2e4.</p> </li> <li> <p>\ub113\uc740 \ubb38\ub9e5 \uc81c\uacf5     \uac80\uc0c9\ub41c \uc790\uc2dd \uccad\ud06c\uc5d0 \uc5f0\uacb0\ub41c \ubd80\ubaa8 \ubb38\uc11c\ub97c \ud568\uaed8 \ubc18\ud658\ud568\uc73c\ub85c\uc368, \uc815\ubcf4\uc758 \u2018\ub9e5\ub77d\u2019\uc744 \uc783\uc9c0 \uc54a\uac8c \ud55c\ub2e4. \uc774\ub85c\uc368 LLM\uc774 \ub354 \ud48d\ubd80\ud558\uace0 \uc790\uc5f0\uc2a4\ub7ec\uc6b4 \uc751\ub2f5\uc744 \uc0dd\uc131\ud560 \uc218 \uc788\ub2e4.</p> </li> </ol>"},{"location":"search-engine/RAG/RAG%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EA%B3%A0%EB%8F%84%ED%99%94/%EC%B2%AD%ED%82%B9%20%EC%A0%84%EB%9E%B5/#_3","title":"\uc778\ub371\uc2f1 \uacfc\uc815","text":"<ol> <li> <p>\ubb38\uc11c \ubd84\ud560     \ubb38\uc11c\ub97c \ubd80\ubaa8 \ub2e8\uc704\ub85c \uba3c\uc800 \ub098\ub208 \ud6c4, \uac01 \ubd80\ubaa8 \ub2e8\uc704\ub97c \uc790\uc2dd \uccad\ud06c\ub85c \ubd84\ud560\ud55c\ub2e4. \uc774\ub54c \uc758\ubbf8 \uae30\ubc18 \ubd84\ud560 \uc54c\uace0\ub9ac\uc998\uc744 \ud65c\uc6a9\ud560 \uc218 \uc788\ub2e4.</p> </li> <li> <p>\uba54\ud0c0\ub370\uc774\ud130 \ud560\ub2f9     \uc790\uc2dd \uccad\ud06c\uc5d0\ub294 \uc5b4\ub5a4 \ubd80\ubaa8 \ubb38\uc11c\uc5d0 \uc18d\ud558\ub294\uc9c0 \uc2dd\ubcc4\ud560 \uc218 \uc788\ub294 ID\ub97c \uba54\ud0c0\ub370\uc774\ud130\ub85c \ud3ec\ud568\uc2dc\ud0a8\ub2e4.</p> </li> <li> <p>\ubca1\ud130 \uc800\uc7a5\uc18c\uc640 \ubb38\uc11c \uc800\uc7a5\uc18c \ubd84\ub9ac</p> <ul> <li> <p>\uc790\uc2dd \ubb38\uc11c\ub294 \uc784\ubca0\ub529\uc744 \ud1b5\ud574 \ubca1\ud130 \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0 \uc800\uc7a5\ub41c\ub2e4.</p> </li> <li> <p>\ubd80\ubaa8 \ubb38\uc11c\ub294 \ubcc4\ub3c4\uc758 \ubb38\uc11c \uc800\uc7a5\uc18c\uc5d0 \uc6d0\ud615 \uadf8\ub300\ub85c \ubcf4\uad00\ub41c\ub2e4.</p> </li> </ul> </li> </ol>"},{"location":"search-engine/RAG/RAG%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EA%B3%A0%EB%8F%84%ED%99%94/%EC%B2%AD%ED%82%B9%20%EC%A0%84%EB%9E%B5/#_4","title":"\uac80\uc0c9 \ud750\ub984","text":"<ol> <li> <p>\uc0ac\uc6a9\uc790\uac00 \ucffc\ub9ac\ub97c \uc785\ub825\ud558\uba74, \ucffc\ub9ac\uc5d0 \uac00\uc7a5 \uc720\uc0ac\ud55c \uc790\uc2dd \ubb38\uc11c\ub97c \ubca1\ud130 DB\uc5d0\uc11c \uac80\uc0c9\ud55c\ub2e4.</p> </li> <li> <p>\uac80\uc0c9\ub41c \uc790\uc2dd \ubb38\uc11c\uc758 \ubd80\ubaa8 ID\ub97c \ud1b5\ud574 \ud574\ub2f9 \ubd80\ubaa8 \ubb38\uc11c\ub97c \ucc3e\ub294\ub2e4.</p> </li> <li> <p>\uc0ac\uc6a9\uc790\uc5d0\uac8c \ubc18\ud658\ub418\ub294 \ubb38\uc11c\ub294 \uc790\uc2dd\uc774 \uc544\ub2cc \ubd80\ubaa8 \ubb38\uc11c\uc774\ub2e4.</p> </li> </ol> <p>\uc774 \uacfc\uc815\uc744 \ud1b5\ud574 \uc2dc\uc2a4\ud15c\uc740 \uc815\ubcf4\uc758 \uc815\ubc00\uc131\uacfc \ubb38\ub9e5\uc758 \ud48d\ubd80\ud568\uc744 \ub3d9\uc2dc\uc5d0 \ud655\ubcf4\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/RAG/RAG%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EA%B3%A0%EB%8F%84%ED%99%94/%EC%B2%AD%ED%82%B9%20%EC%A0%84%EB%9E%B5/#_5","title":"\uc758\ubbf8 \uae30\ubc18 \ubd84\ud560\uacfc\uc758 \uad00\uacc4","text":"<p>\ubd80\ubaa8-\uc790\uc2dd \ubd84\ud560\uc740 \uc758\ubbf8 \uae30\ubc18 \ubd84\ud560\uc744 \ub300\uccb4\ud558\ub294 \uac83\uc774 \uc544\ub2c8\ub2e4. \uc624\ud788\ub824 \uc0c1\ud638 \ubcf4\uc644\uc801\uc774\ub2e4. \uc608\ub97c \ub4e4\uc5b4 \uc790\uc2dd \uccad\ud06c\ub97c \ub098\ub20c \ub54c \uc758\ubbf8 \ub2e8\uc704 \ubd84\ud560\uc744 \uc801\uc6a9\ud558\uba74, \ub354 \uc790\uc5f0\uc2a4\ub7fd\uace0 \uc751\ub2f5 \ud488\uc9c8\uc774 \ub192\uc740 \uacb0\uacfc\ub97c \uc720\ub3c4\ud560 \uc218 \uc788\ub2e4.</p>"},{"location":"search-engine/RAG/RAG%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EA%B3%A0%EB%8F%84%ED%99%94/%EC%B2%AD%ED%82%B9%20%EC%A0%84%EB%9E%B5/#_6","title":"\uc608\uc2dc \ucf54\ub4dc","text":"<pre><code>import os\nfrom dotenv import load_dotenv\nfrom docx import Document as DocxDocument\nfrom langchain.schema import Document\nfrom langchain.text_splitter import RecursiveCharacterTextSplitter\nfrom langchain_openai import OpenAIEmbeddings\nfrom langchain_community.vectorstores import FAISS\nfrom langchain.retrievers import ParentDocumentRetriever\nfrom langchain.storage import InMemoryStore\n\n# 1. \ud658\uacbd \ubcc0\uc218 \ub85c\ub4dc\nload_dotenv()\napi_key = os.getenv(\"OPENAI_API_KEY\")\nif not api_key:\n    raise EnvironmentError(\"OPENAI_API_KEY\uac00 .env\uc5d0 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.\")\n\n# 2. \ubb38\uc11c \ub85c\ub529 \ud568\uc218\ndef load_docx_as_text(path: str) -&gt; str:\n    doc = DocxDocument(path)\n    return \"\\n\".join([para.text.strip() for para in doc.paragraphs if para.text.strip()])\n\n# 3. \uc6d0\ubcf8 \ubb38\uc11c \ub85c\ub4dc\ndocx_path = \"data/26. \ud50c\ub798\ud2f0\uc5b4 \uac00\uc774\ub4dc\ubd81_2025_\ucd5c\uc2e0_250610.docx\"\nraw_text = load_docx_as_text(docx_path)\nraw_documents = [Document(\n    page_content=raw_text,\n    metadata={\"source\": docx_path, \"title\": \"\ud50c\ub798\ud2f0\uc5b4 \uac00\uc774\ub4dc\ubd81\"}\n)]\n\n# 4. \ubd84\ud560\uae30 \uc815\uc758\nparent_splitter = RecursiveCharacterTextSplitter(\n    chunk_size=2000,\n    chunk_overlap=200,\n    separators=[\"\\n\\n\", \"\\n\", \"\u25b6\", \"01 \", \"02 \", \"03 \", \"04 \", \"05 \", \"06 \", \"07 \", \"08 \", \"09 \", \" \", \"\"]\n)\n\nchild_splitter = RecursiveCharacterTextSplitter(\n    chunk_size=400,\n    chunk_overlap=50,\n    separators=[\"\\n\\n\", \"\\n\", \"\u25b6\", \" \", \"\"]\n)\n\n# 5. \uc784\ubca0\ub529 \ubc0f \ubca1\ud130\uc2a4\ud1a0\uc5b4 \ucd08\uae30\ud654\nembedding = OpenAIEmbeddings(openai_api_key=api_key)\nvectorstore = FAISS.from_texts([\"dummy\"], embedding=embedding)\nvectorstore.delete([vectorstore.index_to_docstore_id[0]])\nstore = InMemoryStore()\n\n# 6. ParentDocumentRetriever \uc124\uc815\nretriever = ParentDocumentRetriever(\n    vectorstore=vectorstore,\n    docstore=store,\n    parent_splitter=parent_splitter,\n    child_splitter=child_splitter,\n    k=4\n)\n\n# 7. \uc0c9\uc778 \uc218\ud589\nretriever.add_documents(raw_documents)\n\n# 8. \uac04\ub2e8\ud55c \uac80\uc0c9 \ud14c\uc2a4\ud2b8\nquery = \"5\ub144\ub9c8\ub2e4 \uc8fc\ub294 \ud734\uac00\ub294 \ubb34\uc5c7\uc778\uac00\uc694?\"\nresults = retriever.invoke(query)\n\nprint(f\"\\n[\uac80\uc0c9 \uacb0\uacfc] \ucffc\ub9ac: '{query}'\")\nprint(f\"\ucd1d {len(results)}\uac1c\uc758 \uacb0\uacfc\uac00 \ubc18\ud658\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\\n\")\n\nfor i, doc in enumerate(results, 1):\n    print(f\"[\uacb0\uacfc {i}]\")\n    print(f\"\ub0b4\uc6a9 (\uc55e 200\uc790): {doc.page_content[:200].strip()}\")\n    print(f\"\uba54\ud0c0\ub370\uc774\ud130: {doc.metadata}\")\n    print(\"-\" * 50)\n</code></pre> <p>\uc5ec\uae30\uc11c <code>separators</code>\ub294 <code>RecursiveCharacterTextSplitter</code>\uac00 \ud14d\uc2a4\ud2b8\ub97c \uccad\ud06c(chunk) \ub85c \ub098\ub20c \ub54c \uc6b0\uc120\uc801\uc73c\ub85c \uc0ac\uc6a9\ud558\ub294 \uad6c\ubd84\uc790\ub4e4\uc744 \uc758\ubbf8\ud55c\ub2e4.</p>"},{"location":"search-engine/RAG/RAG%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EA%B3%A0%EB%8F%84%ED%99%94/%EC%B2%AD%ED%82%B9%20%EC%A0%84%EB%9E%B5/#_7","title":"\uc791\ub3d9 \ub2e8\uacc4","text":"<ol> <li> <p>\uac00\uc7a5 \uba3c\uc800 <code>\\n\\n</code> \uc73c\ub85c \ud14d\uc2a4\ud2b8\ub97c \ubd84\ud560\ud558\ub824 \uc2dc\ub3c4\ud55c\ub2e4.     \uc774 \uad6c\ubd84\uc790\ub85c \ub098\ub208 \uacb0\uacfc\uac00 \uac01 \uccad\ud06c\ub9c8\ub2e4 100\uc790 \uc774\ud558\ub77c\uba74 \uadf8\ub300\ub85c \uc0ac\uc6a9\ud55c\ub2e4.     \uc544\ub2c8\ub77c\uba74 \ub2e4\uc74c \ub2e8\uacc4\ub85c \ub118\uc5b4\uac04\ub2e4.</p> </li> <li> <p><code>\\n</code> \uc73c\ub85c \ubd84\ud560\ud558\ub824 \uc2dc\ub3c4\ud55c\ub2e4.     \uc774 \uacbd\uc6b0\ub3c4 \ub9c8\ucc2c\uac00\uc9c0\ub85c, \uac01 \uccad\ud06c\uac00 \uc801\uc808\ud55c \ud06c\uae30\uc774\uba74 \uc0ac\uc6a9\ud558\uace0, \uadf8\ub807\uc9c0 \uc54a\uc73c\uba74 \ub2e4\uc74c \ub2e8\uacc4\ub85c \uc9c4\ud589\ud55c\ub2e4.</p> </li> <li> <p><code>.</code> (\ub9c8\uce68\ud45c)\ub85c \ubd84\ud560\uc744 \uc2dc\ub3c4\ud55c\ub2e4. \uc774\ub294 \ubb38\uc7a5 \ub2e8\uc704 \ubd84\ud560\uc744 \uc758\ubbf8\ud55c\ub2e4.</p> </li> <li> <p>\uc5ec\uc804\ud788 \uc6d0\ud558\ub294 \ud06c\uae30\ub85c \ub098\ub20c \uc218 \uc5c6\ub2e4\uba74 <code>\" \"</code> (\uacf5\ubc31)\uc744 \uae30\uc900\uc73c\ub85c \ubd84\ud560\ud55c\ub2e4. \uc774\ub294 \ub2e8\uc5b4 \ub2e8\uc704 \ubd84\ud560\uc5d0 \ud574\ub2f9\ud55c\ub2e4.</p> </li> <li> <p>\ub9c8\uc9c0\ub9c9\uc73c\ub85c <code>\"\"</code> (\ube48 \ubb38\uc790\uc5f4)\uc744 \uc0ac\uc6a9\ud574 \ubb38\uc790 \ub2e8\uc704\ub85c \uac15\uc81c\ub85c \uc798\ub77c\ub0b8\ub2e4. \uc774 \uacbd\uc6b0\ub294 \uc758\ubbf8 \uc788\ub294 \uacbd\uacc4 \uc5c6\uc774 \ubb34\uc870\uac74 \uae38\uc774\uc5d0 \ub9de\ucdb0 \uc790\ub974\ub294 \ubc29\uc2dd\uc774\ub2e4.</p> </li> </ol>"},{"location":"search-engine/%EA%B2%80%EC%A6%9D/%EC%82%AC%EC%9A%A9%EC%9E%90%20%EC%82%AC%EC%A0%84%20%EB%93%B1%EB%A1%9D%20%EB%B0%A9%EC%8B%9D%EC%97%90%20%EB%94%B0%EB%A5%B8%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EB%B6%80%ED%95%98%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%EA%B2%B0%EA%B3%BC/","title":"\uc0ac\uc6a9\uc790 \uc0ac\uc804 \ub4f1\ub85d \ubc29\uc2dd\uc5d0 \ub530\ub978 \uc2dc\uc2a4\ud15c \ubd80\ud558 \ud14c\uc2a4\ud2b8 \uacb0\uacfc","text":"<p>\ub775\uc0f5 \uac80\uc0c9\uc5d4\uc9c4\uc5d0\uc11c \uc0ac\uc6a9\uc790 \uc815\uc758 \uc0ac\uc804(<code>user_dictionary</code>) \uc801\uc6a9 \ubc29\uc2dd\uc5d0 \ub530\ub77c \uac80\uc0c9 \uc131\ub2a5 \ubc0f \uc2dc\uc2a4\ud15c \ubd80\ud558\uc5d0 \uc720\uc758\ubbf8\ud55c \ucc28\uc774\uac00 \ubc1c\uc0dd\ud568\uc744 \ud655\uc778\ud558\uc600\uc2b5\ub2c8\ub2e4. \ud2b9\ud788 \uae30\uc874\uc5d0\ub294 OpenSearch \uc778\ub371\uc2a4 \uc124\uc815(<code>settings.user_dictionary_rules</code>)\uc5d0 \uc0ac\uc804 \ub370\uc774\ud130\ub97c \uc9c1\uc811 \uc785\ub825\ud558\uc600\uc73c\ub098, \ub300\uaddc\ubaa8 \uc0ac\uc804(\uc57d 60,000\uac74) \ubc18\uc601 \uc774\ud6c4 \uc131\ub2a5 \uc800\ud558 \ubc0f \uc2dc\uc2a4\ud15c \ubd88\uc548\uc815 \uc774\uc288\uac00 \ubc1c\uc0dd\ud558\uc600\uc2b5\ub2c8\ub2e4.</p> <p>\uc774\uc5d0 <code>.txt \uc678\ubd80 \ud30c\uc77c \ucc38\uc870 \ubc29\uc2dd</code>\uc73c\ub85c \ubcc0\uacbd \uc2dc \uc131\ub2a5 \uac1c\uc120 \uac00\ub2a5\uc131\uc744 \uac80\uc99d\ud558\uae30 \uc704\ud574, \ub3d9\uc77c \uc870\uac74\uc5d0\uc11c \ubca4\uce58\ub9c8\ud06c \ud14c\uc2a4\ud2b8\ub97c \uc9c4\ud589\ud558\uc600\uc2b5\ub2c8\ub2e4.</p>"},{"location":"search-engine/%EA%B2%80%EC%A6%9D/%EC%82%AC%EC%9A%A9%EC%9E%90%20%EC%82%AC%EC%A0%84%20%EB%93%B1%EB%A1%9D%20%EB%B0%A9%EC%8B%9D%EC%97%90%20%EB%94%B0%EB%A5%B8%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EB%B6%80%ED%95%98%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%EA%B2%B0%EA%B3%BC/#2","title":"2. \ud14c\uc2a4\ud2b8 \uc870\uac74","text":"\ud56d\ubaa9 \uac12 \uc694\uccad \uc218\ub7c9 10,000\uac74 \ub3d9\uc2dc \uc694\uccad \uc218 500 Thread \ube44\uad50 \ubc29\uc2dd settings \uc9c1\uc811 \uc785\ub825 \ubc29\uc2dd vs .txt \ud30c\uc77c \ucc38\uc870 \ubc29\uc2dd \ud14c\uc2a4\ud2b8 \ud658\uacbd \ub3d9\uc77c \ud074\ub7ec\uc2a4\ud130, \ub3d9\uc77c \uac80\uc0c9 API"},{"location":"search-engine/%EA%B2%80%EC%A6%9D/%EC%82%AC%EC%9A%A9%EC%9E%90%20%EC%82%AC%EC%A0%84%20%EB%93%B1%EB%A1%9D%20%EB%B0%A9%EC%8B%9D%EC%97%90%20%EB%94%B0%EB%A5%B8%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EB%B6%80%ED%95%98%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%EA%B2%B0%EA%B3%BC/#3","title":"3. \uc131\ub2a5 \ube44\uad50 \uacb0\uacfc","text":"\ud56d\ubaa9 settings \ubc29\uc2dd .txt \ubc29\uc2dd \ucc28\uc774 \ubd84\uc11d (.txt \uae30\uc900) \ucd1d \uc2e4\ud589 \uc2dc\uac04 (\ucd08) 20.64 11.68 \u25bc 8.96\ucd08 \uac10\uc18c (43.4%) TPS (\ucd08\ub2f9 \uc694\uccad \uc218) 484.44 856.08 \u25b2 +76.7% \ud5a5\uc0c1 OpenSearch Took \ud3c9\uade0 (ms) 754.76 288.85 \u25bc 61.7% \uac10\uc18c OpenSearch Took P99 (ms) 6873.0 1336.0 \u25bc \ub9e4\uc6b0 \ud070 \ucc28\uc774 \uc804\uccb4 \uc751\ub2f5 \uc2dc\uac04 \ud3c9\uade0 (ms) 1016.61 565.37 \u25bc 44.4% \uac10\uc18c Query Profile \ud3c9\uade0 (ms) 6.80 1.55 \u25bc 77.2% \uac10\uc18c"},{"location":"search-engine/%EA%B2%80%EC%A6%9D/%EC%82%AC%EC%9A%A9%EC%9E%90%20%EC%82%AC%EC%A0%84%20%EB%93%B1%EB%A1%9D%20%EB%B0%A9%EC%8B%9D%EC%97%90%20%EB%94%B0%EB%A5%B8%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EB%B6%80%ED%95%98%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%EA%B2%B0%EA%B3%BC/#4","title":"4. \uac1c\uc120 \ubc29\ud5a5 \ubc0f \uc81c\uc548","text":""},{"location":"search-engine/%EA%B2%80%EC%A6%9D/%EC%82%AC%EC%9A%A9%EC%9E%90%20%EC%82%AC%EC%A0%84%20%EB%93%B1%EB%A1%9D%20%EB%B0%A9%EC%8B%9D%EC%97%90%20%EB%94%B0%EB%A5%B8%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EB%B6%80%ED%95%98%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%EA%B2%B0%EA%B3%BC/#_1","title":"\uad8c\uace0 \uc0ac\ud56d","text":"<ul> <li> <p>\uc0ac\uc6a9\uc790 \uc815\uc758 \uc0ac\uc804\uc740 settings \uc9c1\uc811\uc785\ub825 \ub300\uc2e0 <code>.txt \ud30c\uc77c \ucc38\uc870 \ubc29\uc2dd</code>\uc73c\ub85c \uc6b4\uc601 \uc804\ud658 \ud544\uc694.</p> </li> <li> <p>OpenSearch \ucee8\ud14c\uc774\ub108 \ub0b4 <code>/usr/share/opensearch/config/userdict.txt</code> \uacbd\ub85c \ub4f1 \ud65c\uc6a9 \uad8c\uc7a5.</p> </li> </ul>"},{"location":"search-engine/%EA%B2%80%EC%A6%9D/%EC%82%AC%EC%9A%A9%EC%9E%90%20%EC%82%AC%EC%A0%84%20%EB%93%B1%EB%A1%9D%20%EB%B0%A9%EC%8B%9D%EC%97%90%20%EB%94%B0%EB%A5%B8%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EB%B6%80%ED%95%98%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%EA%B2%B0%EA%B3%BC/#_2","title":"\uc801\uc6a9 \uc791\uc5c5 \ub0b4\uc5ed","text":"\uad6c\ubd84 \uc791\uc5c5 \ub0b4\uc6a9 \ube44\uace0 1 \uac80\uc0c9 API(search-nest) \uc11c\ubc84\uc640 OpenSearch \uc11c\ubc84 \uac04 \ud1b5\uc2e0 \ud655\uc778 \ubc29\ud654\ubcbd \ubc0f \ubcf4\uc548 \uadf8\ub8f9 \uc810\uac80, \ud544\uc694\uc2dc \ub0b4\ubd80 \ud504\ub85d\uc2dc/VPN \uad6c\uc131 2 \uc0ac\uc6a9\uc790 \uc0ac\uc804 \uc801\uc6a9 \ubc29\uc2dd \ubcc0\uacbd \uae30\uc874 <code>settings.user_dictionary_rules</code> \uc81c\uac70 \u2192 <code>tokenizer</code> \ub0b4 <code>user_dictionary</code> \uacbd\ub85c \uc124\uc815\uc73c\ub85c \uad50\uccb4. \ubc30\ud3ec \ud544\uc694"},{"location":"search-engine/%EA%B2%80%EC%A6%9D/%EC%82%AC%EC%9A%A9%EC%9E%90%20%EC%82%AC%EC%A0%84%20%EB%93%B1%EB%A1%9D%20%EB%B0%A9%EC%8B%9D%EC%97%90%20%EB%94%B0%EB%A5%B8%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EB%B6%80%ED%95%98%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%EA%B2%B0%EA%B3%BC/#5","title":"5. \uacb0\ub860","text":"<p><code>.txt \ucc38\uc870 \ubc29\uc2dd</code>\uc740 \ub300\uaddc\ubaa8 \uc0ac\uc804 \ud658\uacbd\uc5d0\uc11c\ub3c4 \uc131\ub2a5 \uc800\ud558 \uc5c6\uc774 \uc548\uc815\uc801\uc778 \uc6b4\uc601\uc774 \uac00\ub2a5\ud558\uba70, \ud074\ub7ec\uc2a4\ud130 \ub9ac\ub85c\ub4dc\ub098 \ub178\ub4dc \uc7ac\ubc30\uce58 \ub4f1\uc5d0\ub3c4 \uc601\ud5a5\uc774 \uc801\uc2b5\ub2c8\ub2e4. \uc7a5\uae30\uc801\uc778 \uad00\uc810\uc5d0\uc11c \uac80\uc0c9 \ud488\uc9c8 \uc720\uc9c0\uc640 \uc6b4\uc601 \ud6a8\uc728\uc131\uc744 \ub3d9\uc2dc\uc5d0 \ud655\ubcf4\ud560 \uc218 \uc788\ub294 \ubc29\uc548\uc73c\ub85c \ud310\ub2e8\ub429\ub2c8\ub2e4.</p>"},{"location":"xgen/","title":"XGEN","text":""},{"location":"xgen/#xgen","title":"XGEN","text":"<p>XGEN \ud50c\ub7ab\ud3fc \uad00\ub828 \uae30\uc220 \ubb38\uc11c \ubc0f \uac1c\ubc1c \uae30\ub85d.</p>"},{"location":"xgen/#_1","title":"\uad6c\uc131","text":"<ul> <li>xgen-frontend \u2014 Next.js \ud504\ub860\ud2b8\uc5d4\ub4dc</li> <li>xgen-backend-gateway \u2014 Rust/Axum API \uac8c\uc774\ud2b8\uc6e8\uc774</li> <li>xgen-core \u2014 Python \ucf54\uc5b4 \uc11c\ube44\uc2a4</li> <li>xgen-workflow \u2014 \uc6cc\ud06c\ud50c\ub85c\uc6b0 \uc5d4\uc9c4</li> <li>xgen-documents \u2014 \ubb38\uc11c \ucc98\ub9ac (embedding, retrieval)</li> <li>xgen-mcp-station \u2014 MCP \uc11c\ubc84 \uc2a4\ud14c\uc774\uc158</li> </ul>"}]}