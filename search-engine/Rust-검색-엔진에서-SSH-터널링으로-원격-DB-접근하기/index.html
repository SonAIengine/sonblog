<!DOCTYPE html><html lang="en" class="no-js"><head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Rust 검색 엔진에서 ssh2 크레이트를 활용하여 OpenSearch 서버에 동의어 사전을 SSH/SFTP로 업로드하고, 분석기를 실시간 재로드하는 파이프라인을 구현한 과정을 다룬다.">
      
      
      
      
        <link rel="prev" href="../Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90-Redis-%EC%BA%90%EC%8B%B1-%EC%A0%81%EC%9A%A9%EA%B8%B0/">
      
      
        <link rel="next" href="../Rust%EB%A1%9C-%EC%BB%A4%EB%A8%B8%EC%8A%A4-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%9D%84-%EC%B2%98%EC%9D%8C%EB%B6%80%ED%84%B0-%EB%A7%8C%EB%93%A4%EA%B8%B0/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Rust 검색 엔진에서 SSH 터널링으로 원격 DB 접근하기 - SON BLOG</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#rust-ssh-db" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="SON BLOG" class="md-header__button md-logo" aria-label="SON BLOG" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SON BLOG
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Rust 검색 엔진에서 SSH 터널링으로 원격 DB 접근하기
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo" aria-label="Switch to dark mode" type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo" aria-label="Switch to light mode" type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../portfolio/XGEN-1.0-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EB%AA%A8%EB%8D%B8-%EA%B4%80%EB%A6%AC-UI-%EA%B5%AC%ED%98%84/" class="md-tabs__link">
          
  
  
    
  
  Portfolio

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../poc/Rxdb%20%28local%20db%29/" class="md-tabs__link">
          
  
  
    
  
  PoC

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../python/%EA%B8%B0%EC%B4%88/1.%20Class%EC%9D%98%20enter%EA%B3%BC%20exit/" class="md-tabs__link">
          
  
  
    
  
  Python

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../ai/Code-Assistant-%EA%B0%9C%EB%B0%9C%EA%B8%B0/" class="md-tabs__link">
          
  
  
    
  
  AI

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../Axum-OpenSearch-Rust-%EA%B2%80%EC%83%89-API-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%84%A4%EA%B3%84/" class="md-tabs__link">
          
  
  
    
  
  Search Engine

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../xgen/" class="md-tabs__link">
          
  
  
    
  
  XGEN

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../infra/" class="md-tabs__link">
          
  
  
    
  
  Infra

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../etc/macOS%EC%97%90%EC%84%9C%20USB%20%ED%8F%AC%EB%A7%B7%20%EC%8B%A4%ED%8C%A8%20%EC%8B%9C%20%ED%95%B4%EA%B2%B0%20%EB%B0%A9%EB%B2%95/" class="md-tabs__link">
          
  
  
    
  
  Etc

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="SON BLOG" class="md-nav__button md-logo" aria-label="SON BLOG" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>

    </a>
    SON BLOG
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2">
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Portfolio
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Portfolio
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../portfolio/XGEN-1.0-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C-%EB%AA%A8%EB%8D%B8-%EA%B4%80%EB%A6%AC-UI-%EA%B5%AC%ED%98%84/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    XGEN 1.0 프론트엔드 모델 관리 UI 구현
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../portfolio/%EC%83%81%ED%92%88-%EB%A6%AC%EB%B7%B0-%EB%B6%84%EC%84%9D-API-%EA%B0%9C%EB%B0%9C%EA%B8%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    상품 리뷰 분석 API 개발기 - 형태소 분석기 성능 최적화
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../portfolio/%EC%B1%97%EB%B4%87%20UI%20%EA%B0%9C%EB%B0%9C%EA%B8%B0%20-%20WebSocket%20%EA%B8%B0%EB%B0%98%20%EC%8B%A4%EC%8B%9C%EA%B0%84%20%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    챗봇 UI 개발기 - WebSocket 기반 실시간 스트리밍
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4">
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    가상 피팅 기능
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    가상 피팅 기능
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../portfolio/%EA%B0%80%EC%83%81%20%ED%94%BC%ED%8C%85%20%EA%B8%B0%EB%8A%A5/%EA%B0%80%EC%83%81%20%ED%94%BC%ED%8C%85%EC%9D%B4%EB%9E%80/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    가상 피팅이란
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5">
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    검색
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    검색
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../portfolio/%EA%B2%80%EC%83%89/%EA%B2%80%EC%83%89%20%EB%A1%9C%EC%A7%81%28opensearch%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    검색 로직(opensearch)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../portfolio/%EA%B2%80%EC%83%89/%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%EC%9D%B4%EB%9E%80/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    시맨틱 검색이란
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../portfolio/%EA%B2%80%EC%83%89/%EC%95%84%EC%9D%B4%EC%8A%A4%ED%81%AC%EB%A6%BC%EB%AA%B0%20AI%20Search%20%EA%B5%AC%EC%B6%95%20%EC%82%AC%EB%A1%80/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    아이스크림몰 AI Search 구축 사례
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6">
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    쇼핑몰 이미지 검색 기능
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    쇼핑몰 이미지 검색 기능
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../portfolio/%EC%87%BC%ED%95%91%EB%AA%B0%20%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%20%EA%B8%B0%EB%8A%A5/%EC%9D%B4%EB%AF%B8%EC%A7%80%20%EA%B2%80%EC%83%89%EC%9D%B4%EB%9E%80/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    이미지 검색이란?
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3">
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    PoC
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    PoC
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../poc/Rxdb%20%28local%20db%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RxDB 란 무엇인가? (opensearch 연동)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../poc/intel%20NPU%20model%20use/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Intel NPU 가속을 활용한 TinyLlama 챗봇 구현
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../poc/tauri/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tauri - 크로스 플랫폼 앱 개발 프레임워크
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4">
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Python
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Python
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1">
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    기초
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    기초
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/%EA%B8%B0%EC%B4%88/1.%20Class%EC%9D%98%20enter%EA%B3%BC%20exit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    파이썬 클래스의 __enter__와 __exit__ 메서드
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/%EA%B8%B0%EC%B4%88/2.%20multiprocessing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    파이썬 multiprocessing - 병렬 처리로 성능 향상하기
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/%EA%B8%B0%EC%B4%88/3.%20%ED%8C%8C%EC%9D%B4%EC%8D%AC%EC%9D%98%20MVC%20%ED%8C%A8%ED%84%B4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3. 파이썬의 MVC 패턴
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2">
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    비동기 프로그래밍
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    비동기 프로그래밍
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/%EB%B9%84%EB%8F%99%EA%B8%B0%20%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/1.%20%EB%B9%84%EB%8F%99%EA%B8%B0%20%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D%20%EC%86%8C%EA%B0%9C/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1. 비동기 프로그래밍 소개
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/%EB%B9%84%EB%8F%99%EA%B8%B0%20%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/2.%20%EC%BD%9C%EB%B0%B1%EA%B3%BC%20%ED%93%A8%EC%B2%98/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2. 콜백과 퓨처
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/%EB%B9%84%EB%8F%99%EA%B8%B0%20%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/3.%20%EB%B9%84%EB%8F%99%EA%B8%B0%20%EC%9E%91%EC%97%85%EC%9D%98%20%EA%B3%BC%EB%B6%80%ED%95%98/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3. 비동기 작업의 과부하
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../python/%EB%B9%84%EB%8F%99%EA%B8%B0%20%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/4.%20%EC%88%9C%EC%B0%A8%EC%B2%98%EB%A6%AC%20%26%20%EC%9D%BC%EA%B4%84%EC%B2%98%EB%A6%AC%20%26%20%EC%A7%84%EC%A0%95%ED%95%9C%20%EB%B9%84%EB%8F%99%EA%B8%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    4. 순차처리 &amp; 일괄처리 &amp; 진정한 비동기
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5">
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    AI
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    AI
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/Code-Assistant-%EA%B0%9C%EB%B0%9C%EA%B8%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Code Assistant 개발기 - AI 기반 개발 도우미 시스템 구축
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/Dropout/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dropout
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/GPT%20%EB%AA%A8%EB%8D%B8%20%EB%A7%8C%EB%93%A4%EA%B8%B0%281%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GPT 모델 만들기 (1) - 데이터 전처리와 기본 모델 구조
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/GPT%20%EB%AA%A8%EB%8D%B8%20%EB%A7%8C%EB%93%A4%EA%B8%B0%282%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GPT 모델 만들기 (2) - 셀프 어텐션 메커니즘
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/GliNER%EA%B3%BC%20DPO-LoRA%EB%A5%BC%20%ED%99%9C%EC%9A%A9%ED%95%9C%20%EB%AA%A8%EB%8D%B8%20%ED%8C%8C%EC%9D%B8%ED%8A%9C%EB%8B%9D/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GliNER과 DPO-LoRA를 활용한 모델 파인튜닝
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/KoBERT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    KoBERT
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/OJT-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81%EA%B3%BC-Kotaemon-RAG-%EA%B5%AC%ED%98%84%EA%B8%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OJT 리팩토링과 Kotaemon RAG 구현기
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/Thompson%20Sampling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Thompson Sampling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/Tokenization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tokenization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/VastAI%20%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%20%EA%B4%80%EB%A6%AC%20API%20%EA%B0%80%EC%9D%B4%EB%93%9C/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    VastAI 인스턴스 관리 API 가이드
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/XGEN-1.0-GPU-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%EA%B5%AC%ED%98%84%EA%B8%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    XGEN 1.0 GPU 모델 서빙 구현기 - vLLM과 llama.cpp 최적화
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/XGEN-1.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%97%94%EC%A7%84%EA%B3%BC-Qdrant-%ED%95%98%EC%9D%B4%EB%B8%8C%EB%A6%AC%EB%93%9C-%EA%B2%80%EC%83%89/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    XGEN 1.0 워크플로우 엔진과 Qdrant 하이브리드 검색
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/XGEN-2.0-%EB%AA%A8%EB%8D%B8-%EC%84%9C%EB%B9%99-%ED%86%B5%ED%95%A9-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    XGEN 2.0 모델 서빙 통합 아키텍처 리팩토링
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/XGEN-2.0-%EC%9B%8C%ED%81%AC%ED%94%8C%EB%A1%9C%EC%9A%B0-%EC%A0%91%EA%B7%BC-%EC%A0%9C%EC%96%B4%EC%99%80-IO-%EB%A1%9C%EA%B9%85-%EC%8B%9C%EC%8A%A4%ED%85%9C/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    XGEN 2.0 워크플로우 접근 제어와 IO 로깅 시스템
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/XGEN-2.0-%EC%9E%84%EB%B2%A0%EB%94%A9-%EC%A0%84%EC%9A%A9-%EC%84%9C%EB%B2%84%EC%99%80-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EC%B5%9C%EC%A0%81%ED%99%94/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    XGEN 2.0 임베딩 전용 서버와 배치 처리 최적화
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_16">
        
          
          <label class="md-nav__link" for="__nav_5_16" id="__nav_5_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    BERT
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_16">
            <span class="md-nav__icon md-icon"></span>
            
  
    BERT
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/BERT/Query%2C%20Key%2C%20Value%20%ED%96%89%EB%A0%AC%EC%9D%80%20%EC%96%B4%EB%96%BB%EA%B2%8C%20%EC%83%9D%EC%84%B1%ED%95%98%EB%8A%94%EA%B0%80%3F/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Query, Key, Value 행렬은 어떻게 생성하는가?
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/BERT/Scaled%20Dot-Product%20Attention%20%EB%A5%BC%20%EC%A0%95%EC%9D%98%ED%95%98%EC%8B%9C%EC%98%A4./" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Scaled Dot Product Attention 를 정의하시오.
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/BERT/%EC%85%80%ED%94%84%20%EC%96%B4%ED%85%90%EC%85%98%EC%9D%98%20%EC%A0%84%EC%B2%B4%20%EB%8B%A8%EA%B3%84%EB%A5%BC%20%EC%84%A4%EB%AA%85%ED%95%98%EB%9D%BC/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    셀프 어텐션의 전체 단계를 설명하라
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_17">
        
          
          <label class="md-nav__link" for="__nav_5_17" id="__nav_5_17_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Model Serve
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_17">
            <span class="md-nav__icon md-icon"></span>
            
  
    Model Serve
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/Model%20Serve/SGLang%20vs%20vLLM/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SGLang vs vLLM
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/Model%20Serve/vLLM%20vs%20LMDeploy%20vs%20SGLang/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    vLLM vs LMDeploy vs SGLang
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/Model%20Serve/%EB%A9%80%ED%8B%B0%ED%84%B4%20vs%20%EC%8B%B1%EA%B8%80%ED%84%B4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    멀티턴 vs 싱글턴
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Search Engine
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Search Engine
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Axum-OpenSearch-Rust-%EA%B2%80%EC%83%89-API-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%84%A4%EA%B3%84/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Axum + OpenSearch: Rust 검색 API 아키텍처 설계
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenSearch-%EC%9D%B8%EB%8D%B1%EC%8B%B1-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-vs-%EB%B0%B0%EC%B9%98-%EC%B2%98%EB%A6%AC-%EB%B9%84%EA%B5%90/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenSearch 인덱싱 서비스: 스트리밍 vs 배치 처리 비교
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PostgreSQL%EA%B3%BC-MySQL-%EB%8F%99%EC%8B%9C-%EC%A7%80%EC%9B%90%ED%95%98%EB%8A%94-Rust-DB-%EC%B6%94%EC%83%81%ED%99%94-%EB%A0%88%EC%9D%B4%EC%96%B4-%EA%B5%AC%ED%98%84/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PostgreSQL과 MySQL 동시 지원하는 Rust DB 추상화 레이어 구현
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Rust-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%97%90-Redis-%EC%BA%90%EC%8B%B1-%EC%A0%81%EC%9A%A9%EA%B8%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rust 검색 엔진에 Redis 캐싱 적용기
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Rust 검색 엔진에서 SSH 터널링으로 원격 DB 접근하기
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Rust 검색 엔진에서 SSH 터널링으로 원격 DB 접근하기
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        개요
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        동의어 사전 관리의 필요성
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="동의어 사전 관리의 필요성">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#opensearch" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenSearch의 동의어 처리 방식
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        전체 파이프라인
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        프로젝트 설정
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="프로젝트 설정">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        의존성 추가
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh" class="md-nav__link">
    <span class="md-ellipsis">
      
        SSH 설정
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        동의어 데이터 모델
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="동의어 데이터 모델">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#db" class="md-nav__link">
    <span class="md-ellipsis">
      
        DB 스키마
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#repository" class="md-nav__link">
    <span class="md-ellipsis">
      
        Repository 구현
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#synonymservice" class="md-nav__link">
    <span class="md-ellipsis">
      
        SynonymService 구현
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SynonymService 구현">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        서비스 구조
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        동의어 포맷 변환
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        로컬 파일 저장
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sshsftp" class="md-nav__link">
    <span class="md-ellipsis">
      
        SSH/SFTP 파일 업로드
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SSH/SFTP 파일 업로드">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ssh_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        SSH 연결 및 인증
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sftp" class="md-nav__link">
    <span class="md-ellipsis">
      
        SFTP 업로드
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        SSH 명령 실행
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opensearch_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenSearch 분석기 재로드
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        전체 파이프라인 조립
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        트러블슈팅
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="트러블슈팅">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#libssh2" class="md-nav__link">
    <span class="md-ellipsis">
      
        libssh2 빌드 의존성
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sftp_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        SFTP 권한 문제
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        디렉터리 부재
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        SSH 채널 출력 버퍼
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        한글 동의어 인코딩
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opensearch_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenSearch 인덱스 분석기 설정
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        다중 프로젝트 지원
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        결과 및 회고
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Rust%EB%A1%9C-%EC%BB%A4%EB%A8%B8%EC%8A%A4-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84%EC%9D%84-%EC%B2%98%EC%9D%8C%EB%B6%80%ED%84%B0-%EB%A7%8C%EB%93%A4%EA%B8%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rust로 커머스 검색 엔진을 처음부터 만들기
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%EB%B2%A1%ED%84%B0%20%EA%B8%B0%EB%B0%98%20%EC%8B%9C%EB%A7%A8%ED%8B%B1%20%EA%B2%80%EC%83%89%20%EA%B5%AC%ED%98%84%EA%B8%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    벡터 기반 시맨틱 검색 구현기
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%EC%9D%B4%EB%AF%B8%EC%A7%80-%EA%B2%80%EC%83%89-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84%EA%B8%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    이미지 검색 기능 구현기 - 시맨틱 검색과 AI 분류의 만남
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_9">
        
          
          <label class="md-nav__link" for="__nav_6_9" id="__nav_6_9_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    OpenSearch
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    OpenSearch
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_9_1">
        
          
          <label class="md-nav__link" for="__nav_6_9_1" id="__nav_6_9_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Hybrid Search
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_9_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_9_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Hybrid Search
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenSearch/Hybrid%20Search/Hybrid%20Search/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hybrid Search
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenSearch/Hybrid%20Search/OpenAI%20API%20%EC%9E%84%EB%B2%A0%EB%94%A9%20%EB%AA%A8%EB%8D%B8%20%EB%93%B1%EB%A1%9D%20%EB%B0%8F%20%EC%82%AC%EC%9A%A9%20%EA%B0%80%EC%9D%B4%EB%93%9C/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenAI API 임베딩 모델 등록 및 사용 가이드
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_9_2">
        
          
          <label class="md-nav__link" for="__nav_6_9_2" id="__nav_6_9_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Learning to Rank
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_9_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_9_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Learning to Rank
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenSearch/Learning%20to%20Rank/What%20is%20LTR/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    What is LTR
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_9_3">
        
          
          <label class="md-nav__link" for="__nav_6_9_3" id="__nav_6_9_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    ML
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_9_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_9_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    ML
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenSearch/ML/ml%20%EB%AA%A8%EB%8D%B8%20deploy%20%EC%8B%9C%20%EB%A9%94%EB%AA%A8%EB%A6%AC%2099%25%20%EC%B0%A8%EC%A7%80%20%EC%9B%90%EC%9D%B8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ml 모델 deploy 시 메모리 99% 차지 원인
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_9_4">
        
          
          <label class="md-nav__link" for="__nav_6_9_4" id="__nav_6_9_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Plugin
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_9_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_9_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Plugin
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenSearch/Plugin/UBI%20Schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenSearch UBI Schema 정리
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_9_5">
        
          
          <label class="md-nav__link" for="__nav_6_9_5" id="__nav_6_9_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Vector Search
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_9_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_9_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Vector Search
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenSearch/Vector%20Search/Approximate%20k-NN/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Approximate k NN
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenSearch/Vector%20Search/Embeddings%20model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Embeddings model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenSearch/Vector%20Search/Exact%20k-NN%20Seach/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Exact k NN Seach
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenSearch/Vector%20Search/GPU%20%EA%B8%B0%EB%B0%98%20%EC%9B%90%EA%B2%A9%20%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8A%A4%20%EA%B5%AC%EC%B6%95%20%EA%B0%80%EC%9D%B4%EB%93%9C/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GPU 기반 원격 벡터 인덱스 구축 가이드
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenSearch/Vector%20Search/Nested%20Field%EB%A1%9C%20%EB%8B%A4%EC%A4%91%20%EB%B2%A1%ED%84%B0%20%EB%8B%A4%EB%A3%A8%EA%B8%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nested Field로 다중 벡터 다루기
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenSearch/Vector%20Search/Radial%20Search/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Radial Search
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenSearch/Vector%20Search/Vector%20Sech%20%EA%B0%80%EC%9D%B4%EB%93%9C/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Vector Sech 가이드
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenSearch/Vector%20Search/%EA%B2%80%EC%83%89%20%EC%84%B1%EB%8A%A5%20%EC%B5%9C%EC%A0%81%ED%99%94%20%EA%B0%80%EC%9D%B4%EB%93%9C/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    검색 성능 최적화 가이드
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenSearch/Vector%20Search/%EB%B2%A1%ED%84%B0%20%EC%9C%A0%EC%82%AC%EB%8F%84%20%EA%B3%84%EC%82%B0%EC%9D%84%20%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A1%9C%28Painless%20Scripting%20Extension%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    벡터 유사도 계산을 스크립트로(Painless Scripting Extension)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenSearch/Vector%20Search/%EB%B2%A1%ED%84%B0%20%EC%9D%B8%EB%8D%B1%EC%8B%B1%20%EC%84%B1%EB%8A%A5%20%EC%B5%9C%EC%A0%81%ED%99%94%20%EA%B0%80%EC%9D%B4%EB%93%9C/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    벡터 인덱싱 성능 최적화 가이드
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_9_6">
        
          
          <label class="md-nav__link" for="__nav_6_9_6" id="__nav_6_9_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Version history
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_9_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_9_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Version history
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_9_6_1">
        
          
          <label class="md-nav__link" for="__nav_6_9_6_1" id="__nav_6_9_6_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3.0.0
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_9_6_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_9_6_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    3.0.0
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenSearch/Version%20history/3.0.0/%EC%9A%94%EC%95%BD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenSearch 3.0.0 릴리즈 하이라이트 – 성능, 벡터 검색, 보안, AI 기능 대폭 강화
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_9_6_2">
        
          
          <label class="md-nav__link" for="__nav_6_9_6_2" id="__nav_6_9_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    3.1.0
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_9_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_9_6_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    3.1.0
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenSearch/Version%20history/3.1.0/Star-tree%20Index/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Star tree Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenSearch/Version%20history/3.1.0/%EC%9A%94%EC%95%BD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenSearch &amp; Dashboards 3.1.0 릴리즈 노트
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_9_7">
        
          
          <label class="md-nav__link" for="__nav_6_9_7" id="__nav_6_9_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Docker
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_9_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_9_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Docker
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenSearch/docker/%EB%AA%A9%EC%A0%81%EC%97%90%20%EB%A7%9E%EB%8A%94%20%20docker-compose/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    목적에 맞는 OpenSearch Docker Compose 구성
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenSearch/docker/%EC%83%A4%EB%93%9C%20%EA%B5%AC%EC%84%B1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    샤드 구성
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenSearch/docker/%EC%84%B1%EB%8A%A5%20%EC%B2%B4%ED%81%AC/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    성능 체크
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenSearch/docker/%EC%98%A4%ED%94%88%EC%84%9C%EC%B9%98%20%EC%84%A4%EC%B9%98%20%EC%A0%84%20%EC%82%AC%EC%96%91%20%ED%99%95%EC%9D%B8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    오픈서치 설치 전 사양 확인
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenSearch/docker/%EC%B5%9C%EC%A0%81%EC%9D%98%20%EB%8B%A8%EC%9D%BC%20%EC%84%9C%EB%B2%84%20%EC%98%A4%ED%94%88%EC%84%9C%EC%B9%98%20%EB%B0%B0%ED%8F%AC/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    최적의 단일 서버 오픈서치 배포
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenSearch/docker/%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0%20%EA%B5%AC%EC%84%B1%20%EC%A0%84%EB%9E%B5%20-%20%EC%83%A4%EB%93%9C%20%EB%B6%84%EC%82%B0%20%EC%84%A4%EA%B3%84/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    클러스터 구성 전략   샤드 분산 설계
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_9_8">
        
          
          <label class="md-nav__link" for="__nav_6_9_8" id="__nav_6_9_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Indexing
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_9_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_9_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Indexing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenSearch/indexing/vector%20indexing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Vector indexing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_10">
        
          
          <label class="md-nav__link" for="__nav_6_10" id="__nav_6_10_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Qdrant
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Qdrant
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Qdrant/LangChain%EA%B3%BC%20Qdrant/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LangChain과 Qdrant
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Qdrant/Qdrant%EC%9D%98%20Semantic%20Chunk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Qdrant의 Semantic Chunk
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Qdrant/%EB%AC%B8%EC%84%9C%20%EA%B8%B0%EB%B0%98%20RAG%20%EA%B5%AC%EC%84%B1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    문서 기반 RAG 구성
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_10_4">
        
          
          <label class="md-nav__link" for="__nav_6_10_4" id="__nav_6_10_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    이론
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_10_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_10_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    이론
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Qdrant/%EC%9D%B4%EB%A1%A0/Capacity%20Planning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Capacity Planning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Qdrant/%EC%9D%B4%EB%A1%A0/Codebase%20with%20Semantic%20Search/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Codebase with Semantic Search
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Qdrant/%EC%9D%B4%EB%A1%A0/Collection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Collection
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Qdrant/%EC%9D%B4%EB%A1%A0/Distributed%20deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Distributed deployment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Qdrant/%EC%9D%B4%EB%A1%A0/Explore%20the%20Data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Explore the Data
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Qdrant/%EC%9D%B4%EB%A1%A0/FastEmbed/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FastEmbed
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Qdrant/%EC%9D%B4%EB%A1%A0/Filtering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Filtering
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Qdrant/%EC%9D%B4%EB%A1%A0/Hybrid%20Queries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hybrid Queries
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Qdrant/%EC%9D%B4%EB%A1%A0/Indexing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Indexing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Qdrant/%EC%9D%B4%EB%A1%A0/Load%20and%20Search%20Hugging%20Face%20Datasets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Load and Search Hugging Face Datasets
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Qdrant/%EC%9D%B4%EB%A1%A0/Multivector%20Reranking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Multivector Reranking
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Qdrant/%EC%9D%B4%EB%A1%A0/Payload/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Payload
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Qdrant/%EC%9D%B4%EB%A1%A0/Points/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Points
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Qdrant/%EC%9D%B4%EB%A1%A0/Qdrant%20Async%20API/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Qdrant Async API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Qdrant/%EC%9D%B4%EB%A1%A0/Qdrant%20LangChain/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Qdrant LangChain
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Qdrant/%EC%9D%B4%EB%A1%A0/Qptimizer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Qptimizer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Qdrant/%EC%9D%B4%EB%A1%A0/Reranking%20Hybrid%20Search/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Reranking Hybrid Search
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Qdrant/%EC%9D%B4%EB%A1%A0/Running%20with%20GPU/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Running with GPU
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Qdrant/%EC%9D%B4%EB%A1%A0/Scaling%20PDF%20Retrieval/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Scaling PDF Retrieval
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Qdrant/%EC%9D%B4%EB%A1%A0/Semantic%20Search%20Tutorials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Semantic Search Tutorials
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Qdrant/%EC%9D%B4%EB%A1%A0/Similarity%20Search/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Similarity Search
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Qdrant/%EC%9D%B4%EB%A1%A0/Static%20Embedding%20%EB%8B%A4%EC%8B%9C%20%EC%A3%BC%EB%AA%A9%ED%95%B4%EC%95%BC%20%ED%95%A0%EA%B9%8C/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Static Embedding 다시 주목해야 할까
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Qdrant/%EC%9D%B4%EB%A1%A0/Storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Storage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Qdrant/%EC%9D%B4%EB%A1%A0/Vectors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Vectors
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Qdrant/%EC%9D%B4%EB%A1%A0/%EA%B0%9C%EB%B0%9C%20%EB%B0%8F%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%ED%99%98%EA%B2%BD%20%EC%84%A4%EC%A0%95/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    개발 및 테스트 환경 설정
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_11">
        
          
          <label class="md-nav__link" for="__nav_6_11" id="__nav_6_11_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    RAG
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    RAG
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_11_1">
        
          
          <label class="md-nav__link" for="__nav_6_11_1" id="__nav_6_11_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    LangChain
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_11_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_11_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    LangChain
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../RAG/LangChain/Chunker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chunker
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../RAG/LangChain/%EB%8C%80%ED%99%94%20%EA%B8%B0%EB%A1%9D%20%EC%9C%A0%EC%A7%80/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    대화 기록 유지
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../RAG/LangChain/%EC%9D%BC%EA%B4%80%EB%90%9C%20output%20%28PydanticOutputParser%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    일관된 output (PydanticOutputParser)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_11_1_4">
        
          
          <label class="md-nav__link" for="__nav_6_11_1_4" id="__nav_6_11_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Document Loader
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_6_11_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_11_1_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Document Loader
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../RAG/LangChain/Document%20Loader/Docx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docx
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../RAG/LangChain/Document%20Loader/Morphik%20-%20%ED%8C%8C%EC%8B%B1%20%EC%97%86%EC%9D%B4%20%EC%9D%B4%EB%AF%B8%EC%A7%80%EB%A7%8C%EC%9C%BC%EB%A1%9C%20RAG%EB%A5%BC%20%EC%8B%A4%ED%98%84/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Morphik   파싱 없이 이미지만으로 RAG를 실현
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../RAG/LangChain/Document%20Loader/PDF/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PDF
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_11_2">
        
          
          <label class="md-nav__link" for="__nav_6_11_2" id="__nav_6_11_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    LangGraph
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_11_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_11_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    LangGraph
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../RAG/LangGraph/LangGraph%20%ED%99%9C%EC%9A%A9%EC%B2%98/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LangGraph 활용처
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_11_3">
        
          
          <label class="md-nav__link" for="__nav_6_11_3" id="__nav_6_11_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    RAG 시스템 고도화
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_11_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_11_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    RAG 시스템 고도화
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../RAG/RAG%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EA%B3%A0%EB%8F%84%ED%99%94/Intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Intro
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../RAG/RAG%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EA%B3%A0%EB%8F%84%ED%99%94/%EC%B2%AD%ED%82%B9%20%EC%A0%84%EB%9E%B5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    청킹 전략
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_12">
        
          
          <label class="md-nav__link" for="__nav_6_12" id="__nav_6_12_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    검증
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    검증
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%EA%B2%80%EC%A6%9D/%EC%82%AC%EC%9A%A9%EC%9E%90%20%EC%82%AC%EC%A0%84%20%EB%93%B1%EB%A1%9D%20%EB%B0%A9%EC%8B%9D%EC%97%90%20%EB%94%B0%EB%A5%B8%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EB%B6%80%ED%95%98%20%ED%85%8C%EC%8A%A4%ED%8A%B8%20%EA%B2%B0%EA%B3%BC/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    사용자 사전 등록 방식에 따른 시스템 부하 테스트 결과
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../xgen/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    XGEN
  

    
  </span>
  
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    XGEN
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../infra/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Infra
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8" id="__nav_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Infra
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infra/Search-API%EC%99%80-LLMOps-Docker-%EA%B5%AC%EC%84%B1%EA%B8%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Search API와 LLMOps Docker 구성기
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../infra/XGEN-2.0-%EC%9D%B8%ED%94%84%EB%9D%BC-K8s-ArgoCD-%EC%9A%B4%EC%98%81-%EB%B0%B0%ED%8F%AC/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    XGEN 2.0 인프라: K8s + ArgoCD 운영 배포
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9">
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Etc
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Etc
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../etc/macOS%EC%97%90%EC%84%9C%20USB%20%ED%8F%AC%EB%A7%B7%20%EC%8B%A4%ED%8C%A8%20%EC%8B%9C%20%ED%95%B4%EA%B2%B0%20%EB%B0%A9%EB%B2%95/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    macOS에서 USB 포맷 실패 시 해결 방법
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        개요
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        동의어 사전 관리의 필요성
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="동의어 사전 관리의 필요성">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#opensearch" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenSearch의 동의어 처리 방식
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        전체 파이프라인
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        프로젝트 설정
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="프로젝트 설정">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        의존성 추가
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh" class="md-nav__link">
    <span class="md-ellipsis">
      
        SSH 설정
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        동의어 데이터 모델
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="동의어 데이터 모델">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#db" class="md-nav__link">
    <span class="md-ellipsis">
      
        DB 스키마
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#repository" class="md-nav__link">
    <span class="md-ellipsis">
      
        Repository 구현
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#synonymservice" class="md-nav__link">
    <span class="md-ellipsis">
      
        SynonymService 구현
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SynonymService 구현">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        서비스 구조
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        동의어 포맷 변환
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        로컬 파일 저장
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sshsftp" class="md-nav__link">
    <span class="md-ellipsis">
      
        SSH/SFTP 파일 업로드
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SSH/SFTP 파일 업로드">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ssh_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        SSH 연결 및 인증
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sftp" class="md-nav__link">
    <span class="md-ellipsis">
      
        SFTP 업로드
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        SSH 명령 실행
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opensearch_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenSearch 분석기 재로드
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        전체 파이프라인 조립
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        트러블슈팅
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="트러블슈팅">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#libssh2" class="md-nav__link">
    <span class="md-ellipsis">
      
        libssh2 빌드 의존성
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sftp_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        SFTP 권한 문제
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        디렉터리 부재
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        SSH 채널 출력 버퍼
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        한글 동의어 인코딩
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opensearch_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        OpenSearch 인덱스 분석기 설정
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        다중 프로젝트 지원
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        결과 및 회고
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                



  


  <nav class="md-path" aria-label="Navigation">
    <ol class="md-path__list">
      
        
  
  
    <li class="md-path__item">
      <a href="../.." class="md-path__link">
        
  <span class="md-ellipsis">
    Home
  </span>

      </a>
    </li>
  

      
      
        
  
  
    
    
      <li class="md-path__item">
        <a href="../Axum-OpenSearch-Rust-%EA%B2%80%EC%83%89-API-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EC%84%A4%EA%B3%84/" class="md-path__link">
          
  <span class="md-ellipsis">
    Search Engine
  </span>

        </a>
      </li>
    
  

      
    </ol>
  </nav>

              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="rust-ssh-db">Rust 검색 엔진에서 SSH 터널링으로 원격 DB 접근하기</h1>
<h2 id="_1">개요</h2>
<p>커머스 검색 엔진에서 동의어 사전(Synonym Dictionary) 관리는 검색 품질에 직접적인 영향을 미치는 핵심 기능이다. "노트북"을 검색했을 때 "랩탑"도 함께 검색되어야 하고, "아이폰"을 검색했을 때 "iPhone"도 매칭되어야 한다. 이런 동의어 매핑은 DB에서 관리되지만, 실제로 검색에 반영되려면 OpenSearch 서버의 분석기(Analyzer) 설정에 동의어 파일이 배치되어야 한다.</p>
<p>문제는 OpenSearch 서버가 별도의 네트워크에 있어서, 검색 엔진 애플리케이션에서 직접 파일을 복사할 수 없다는 것이었다. SSH를 통한 접근만 가능한 환경이다. 수동으로 SSH 접속하여 파일을 복사하던 기존 방식을 자동화하기 위해, Rust에서 SSH/SFTP 클라이언트를 구현하여 동의어 사전 배포 파이프라인을 완전 자동화했다.</p>
<p>이 글에서는 Rust의 <code>ssh2</code> 크레이트를 활용한 SSH/SFTP 구현, 동의어 데이터 변환, OpenSearch 분석기 재로드까지의 전체 파이프라인을 다룬다.</p>
<hr>
<h2 id="_2">동의어 사전 관리의 필요성</h2>
<h3 id="opensearch">OpenSearch의 동의어 처리 방식</h3>
<p>OpenSearch에서 동의어를 적용하는 방법은 크게 두 가지다:</p>
<ol>
<li><strong>인라인 동의어</strong>: 인덱스 설정에 직접 동의어 목록을 포함</li>
<li><strong>파일 기반 동의어</strong>: 서버의 파일 시스템에 동의어 파일을 배치</li>
</ol>
<p>인라인 방식은 인덱스를 닫았다 열어야(close/open) 동의어가 반영되므로 서비스 중단이 발생한다. 파일 기반 방식은 <code>_plugins/_refresh_search_analyzers</code> API로 무중단 재로드가 가능하다. 당연히 파일 기반을 선택했다.</p>
<h3 id="_3">전체 파이프라인</h3>
<pre class="mermaid"><code>sequenceDiagram
    participant APP as Rust 검색 엔진
    participant DB as PostgreSQL
    participant LOCAL as 로컬 파일시스템
    participant SSH as SSH/SFTP
    participant OS as OpenSearch 서버

    APP-&gt;&gt;DB: 동의어 데이터 조회
    DB--&gt;&gt;APP: ST_SYN_INFO 테이블 데이터
    APP-&gt;&gt;APP: OpenSearch 형식으로 변환
    APP-&gt;&gt;LOCAL: synonym.txt 저장
    APP-&gt;&gt;SSH: SFTP로 /tmp/synonym.txt 업로드
    SSH-&gt;&gt;OS: sudo mv /tmp/synonym.txt → conf/analysis/
    SSH-&gt;&gt;OS: sudo chmod 644 synonym.txt
    APP-&gt;&gt;OS: POST /_plugins/_refresh_search_analyzers/{index}
    OS--&gt;&gt;APP: 분석기 재로드 완료</code></pre>
<p>하나의 API 호출로 DB 조회 → 파일 생성 → SSH 업로드 → 분석기 재로드까지 자동 실행된다.</p>
<hr>
<h2 id="_4">프로젝트 설정</h2>
<h3 id="_5">의존성 추가</h3>
<div class="highlight"><pre><span></span><code><span class="k">[dependencies]</span>
<span class="n">ssh2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"0.9.5"</span>
<span class="n">lazy_static</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"1.4.0"</span>
<span class="n">tempfile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"3.8.0"</span>
</code></pre></div>
<p><code>ssh2</code>는 libssh2의 Rust 바인딩이다. libssh2 자체가 C 라이브러리이므로 빌드 시 <code>libssh2-sys</code>, <code>libz-sys</code>, <code>openssl-sys</code> 등의 시스템 의존성이 필요하다. Linux 환경에서는 보통 <code>libssl-dev</code>, <code>pkg-config</code> 패키지가 설치되어 있으면 문제없다.</p>
<h3 id="ssh">SSH 설정</h3>
<div class="highlight"><pre><span></span><code><span class="k">[package.metadata.config.local]</span>
<span class="n">ssh_host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"192.168.2.171"</span>
<span class="n">ssh_port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">22</span>
<span class="n">ssh_user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"tech"</span>
<span class="n">ssh_password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"tech"</span>
<span class="n">synonym_output_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"./synonym.txt"</span>
</code></pre></div>
<p>SSH 접속 정보를 프로필별 설정에 포함시켰다. 로컬/스테이징/프로덕션 환경마다 다른 OpenSearch 서버를 사용하므로, 프로필 전환만으로 대상 서버를 변경할 수 있다.</p>
<p>AppConfig 구조체에도 SSH 관련 필드를 추가했다:</p>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">AppConfig</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ... 기존 필드</span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">ssh_host</span><span class="p">:</span><span class="w"> </span><span class="nb">Option</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">ssh_port</span><span class="p">:</span><span class="w"> </span><span class="nb">Option</span><span class="o">&lt;</span><span class="kt">u16</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">ssh_user</span><span class="p">:</span><span class="w"> </span><span class="nb">Option</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">ssh_password</span><span class="p">:</span><span class="w"> </span><span class="nb">Option</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">synonym_output_path</span><span class="p">:</span><span class="w"> </span><span class="nb">Option</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">opensearch_synonym_index</span><span class="p">:</span><span class="w"> </span><span class="nb">Option</span><span class="o">&lt;</span><span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;&gt;</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<p>모든 SSH 필드를 <code>Option</code>으로 선언하여, SSH를 사용하지 않는 환경에서는 설정을 생략할 수 있도록 했다.</p>
<hr>
<h2 id="_6">동의어 데이터 모델</h2>
<h3 id="db">DB 스키마</h3>
<p>동의어 데이터는 <code>ST_SYN_INFO</code> 테이블에 저장된다.</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span>
<span class="w">    </span><span class="n">SYN_SEQ</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id</span><span class="p">,</span>
<span class="w">    </span><span class="n">STD_WRD</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">std_wrd</span><span class="p">,</span><span class="w">      </span><span class="c1">-- 표준어</span>
<span class="w">    </span><span class="n">SYN_NM</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">syn_nm</span><span class="p">,</span><span class="w">        </span><span class="c1">-- 동의어</span>
<span class="w">    </span><span class="n">USE_YN</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">use_yn</span><span class="p">,</span><span class="w">        </span><span class="c1">-- 사용 여부</span>
<span class="w">    </span><span class="k">CASE</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="n">SSI</span><span class="p">.</span><span class="n">USE_YN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'N'</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="s1">'D'</span>
<span class="w">         </span><span class="k">ELSE</span><span class="w"> </span><span class="s1">'A'</span>
<span class="w">    </span><span class="k">END</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">send_gb</span><span class="w">           </span><span class="c1">-- 상태 (A: 활성, D: 삭제)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">ST_SYN_INFO</span><span class="w"> </span><span class="n">SSI</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">SYN_SEQ</span>
</code></pre></div>
<h3 id="repository">Repository 구현</h3>
<p>동의어 전용 Repository를 <code>BaseRepository</code>를 상속하여 구현했다.</p>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">SynonymRepository</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">base</span><span class="p">:</span><span class="w"> </span><span class="nc">BaseRepository</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span><span class="w"> </span><span class="n">SynonymRepository</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">new</span><span class="p">(</span><span class="n">pg_client</span><span class="p">:</span><span class="w"> </span><span class="nc">PostgresClient</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">Self</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="bp">Self</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">base</span><span class="p">:</span><span class="w"> </span><span class="nc">BaseRepository</span><span class="p">::</span><span class="n">new</span><span class="p">(</span>
<span class="w">                </span><span class="n">pg_client</span><span class="p">,</span>
<span class="w">                </span><span class="s">"synonym"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span>
<span class="w">                </span><span class="s">"./src/repositories/indexing/columns_map/synonym_map.json"</span><span class="p">.</span><span class="n">to_string</span><span class="p">(),</span>
<span class="w">            </span><span class="p">),</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="cp">#[async_trait]</span>
<span class="k">impl</span><span class="w"> </span><span class="n">IndexingRepository</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">SynonymRepository</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">async</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">fetch_data</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">interval</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="kt">str</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="nb">Vec</span><span class="o">&lt;</span><span class="n">IndexingData</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">AppError</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">r#"</span>
<span class="s">            SELECT</span>
<span class="s">                SYN_SEQ AS id,</span>
<span class="s">                STD_WRD AS std_wrd,</span>
<span class="s">                SYN_NM AS syn_nm,</span>
<span class="s">                USE_YN AS use_yn,</span>
<span class="s">                CASE WHEN SSI.USE_YN = 'N' THEN 'D'</span>
<span class="s">                     ELSE 'A'</span>
<span class="s">                END AS send_gb</span>
<span class="s">            FROM ST_SYN_INFO SSI</span>
<span class="s">            ORDER BY SYN_SEQ</span>
<span class="s">        "#</span><span class="p">;</span>
<span class="w">        </span><span class="bp">self</span><span class="p">.</span><span class="n">base</span><span class="p">.</span><span class="n">fetch_data_with_query</span><span class="p">(</span><span class="n">interval</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p">,</span><span class="w"> </span><span class="bp">self</span><span class="p">).</span><span class="k">await</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">transform_to_indexing_data</span><span class="p">(</span>
<span class="w">        </span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span>
<span class="w">        </span><span class="n">rows</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="p">[</span><span class="n">tokio_postgres</span><span class="p">::</span><span class="n">Row</span><span class="p">],</span>
<span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="nb">Vec</span><span class="o">&lt;</span><span class="n">IndexingData</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">AppError</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="bp">self</span><span class="p">.</span><span class="n">base</span><span class="p">.</span><span class="n">transform_to_indexing_data_impl</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>컬럼 매핑은 JSON 파일로 관리한다:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">"standardWord"</span><span class="p">:</span><span class="w"> </span><span class="s2">"std_wrd"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"synonym"</span><span class="p">:</span><span class="w"> </span><span class="s2">"syn_nm"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"useYn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"use_yn"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"sendGb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"send_gb"</span>
<span class="p">}</span>
</code></pre></div>
<p>이 매핑 파일을 통해 DB 컬럼명(<code>std_wrd</code>)과 애플리케이션 필드명(<code>standardWord</code>)을 분리한다. DB 스키마가 변경되어도 매핑 파일만 수정하면 된다.</p>
<hr>
<h2 id="synonymservice">SynonymService 구현</h2>
<h3 id="_7">서비스 구조</h3>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">SynonymService</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">client</span><span class="p">:</span><span class="w"> </span><span class="nc">Arc</span><span class="o">&lt;</span><span class="n">OpenSearch</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="n">db_fetch_service</span><span class="p">:</span><span class="w"> </span><span class="nc">Arc</span><span class="o">&lt;</span><span class="n">DbFetchService</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="n">config</span><span class="p">:</span><span class="w"> </span><span class="nc">Arc</span><span class="o">&lt;</span><span class="n">AppConfig</span><span class="o">&gt;</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<p>OpenSearch 클라이언트(분석기 재로드용), DB 페치 서비스(동의어 조회용), 설정(SSH 정보 등)을 주입받는다.</p>
<h3 id="_8">동의어 포맷 변환</h3>
<p>DB에서 가져온 동의어 데이터를 OpenSearch 동의어 파일 형식으로 변환한다.</p>
<div class="highlight"><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">convert_to_synonym_format</span><span class="p">(</span>
<span class="w">    </span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span>
<span class="w">    </span><span class="n">synonym_data</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="p">[</span><span class="n">IndexingData</span><span class="p">],</span>
<span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="nb">String</span><span class="p">,</span><span class="w"> </span><span class="n">AppError</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">synonym_lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span><span class="p">::</span><span class="n">new</span><span class="p">();</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">synonym_data</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// USE_YN이 'Y'인 것만 포함</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="n">use_yn</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">item</span><span class="p">.</span><span class="n">extra_fields</span>
<span class="w">            </span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"useYn"</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="n">or_else</span><span class="p">(</span><span class="o">||</span><span class="w"> </span><span class="n">item</span><span class="p">.</span><span class="n">extra_fields</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"useyn"</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="n">and_then</span><span class="p">(</span><span class="o">|</span><span class="n">v</span><span class="o">|</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">as_str</span><span class="p">())</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">use_yn</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s">"Y"</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="k">continue</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="p">(</span><span class="nb">Some</span><span class="p">(</span><span class="n">std_word</span><span class="p">),</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="n">synonym</span><span class="p">))</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span>
<span class="w">            </span><span class="n">item</span><span class="p">.</span><span class="n">extra_fields</span>
<span class="w">                </span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"standardWord"</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="n">or_else</span><span class="p">(</span><span class="o">||</span><span class="w"> </span><span class="n">item</span><span class="p">.</span><span class="n">extra_fields</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"standardword"</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="n">and_then</span><span class="p">(</span><span class="o">|</span><span class="n">v</span><span class="o">|</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">as_str</span><span class="p">()),</span>
<span class="w">            </span><span class="n">item</span><span class="p">.</span><span class="n">extra_fields</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"synonym"</span><span class="p">).</span><span class="n">and_then</span><span class="p">(</span><span class="o">|</span><span class="n">v</span><span class="o">|</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">as_str</span><span class="p">()),</span>
<span class="w">        </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="n">std_word_clean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std_word</span><span class="p">.</span><span class="n">trim</span><span class="p">();</span>
<span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="n">synonym_clean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">synonym</span><span class="p">.</span><span class="n">trim</span><span class="p">();</span>

<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="n">std_word_clean</span><span class="p">.</span><span class="n">is_empty</span><span class="p">()</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="n">synonym_clean</span><span class="p">.</span><span class="n">is_empty</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">synonym_lines</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="fm">format!</span><span class="p">(</span><span class="s">"{},{}"</span><span class="p">,</span><span class="w"> </span><span class="n">std_word_clean</span><span class="p">,</span><span class="w"> </span><span class="n">synonym_clean</span><span class="p">));</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nb">Ok</span><span class="p">(</span><span class="n">synonym_lines</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div>
<p>OpenSearch 동의어 파일 형식은 한 줄에 하나의 동의어 쌍을 쉼표로 구분하여 나열한다:</p>
<div class="highlight"><pre><span></span><code>노트북,랩탑
아이폰,iPhone
삼성,Samsung
</code></pre></div>
<p>필드명의 대소문자가 환경에 따라 다를 수 있어서, <code>get("useYn").or_else(|| get("useyn"))</code> 패턴으로 양쪽 모두 확인한다. PostgreSQL의 결과 컬럼명은 기본적으로 소문자로 변환되는데, 애플리케이션 레이어에서 camelCase로 변환하는 과정에서 불일치가 발생할 수 있다.</p>
<h3 id="_9">로컬 파일 저장</h3>
<div class="highlight"><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">write_to_file</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">synonym_content</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="kt">str</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="nb">String</span><span class="p">,</span><span class="w"> </span><span class="n">AppError</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">project_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="bp">self</span><span class="p">.</span><span class="n">config</span><span class="p">.</span><span class="n">project_name</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">default_filename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">format!</span><span class="p">(</span><span class="s">"{}_synonym.txt"</span><span class="p">,</span><span class="w"> </span><span class="n">project_name</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">default_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">format!</span><span class="p">(</span><span class="s">"./dictionary/{}"</span><span class="p">,</span><span class="w"> </span><span class="n">default_filename</span><span class="p">);</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">output_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">config</span>
<span class="w">        </span><span class="p">.</span><span class="n">synonym_output_path</span>
<span class="w">        </span><span class="p">.</span><span class="n">clone</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="n">unwrap_or</span><span class="p">(</span><span class="n">default_path</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// 디렉터리 자동 생성</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Path</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">output_path</span><span class="p">).</span><span class="n">parent</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="n">parent</span><span class="p">.</span><span class="n">exists</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">std</span><span class="p">::</span><span class="n">fs</span><span class="p">::</span><span class="n">create_dir_all</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">File</span><span class="p">::</span><span class="n">create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">output_path</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="n">file</span><span class="p">.</span><span class="n">write_all</span><span class="p">(</span><span class="n">synonym_content</span><span class="p">.</span><span class="n">as_bytes</span><span class="p">())</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="n">file</span><span class="p">.</span><span class="n">flush</span><span class="p">()</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="nb">Ok</span><span class="p">(</span><span class="n">output_path</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>프로젝트 이름을 포함한 파일명으로 저장하여, 여러 프로젝트의 동의어 사전이 충돌하지 않도록 한다. <code>dictionary/</code> 디렉터리에 백업용 사본도 함께 저장한다.</p>
<hr>
<h2 id="sshsftp">SSH/SFTP 파일 업로드</h2>
<p>이 글의 핵심 부분이다. <code>ssh2</code> 크레이트를 사용하여 로컬에서 생성한 동의어 파일을 원격 OpenSearch 서버에 업로드한다.</p>
<h3 id="ssh_1">SSH 연결 및 인증</h3>
<div class="highlight"><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">upload_via_ssh</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">local_path</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="kt">str</span><span class="p">,</span><span class="w"> </span><span class="n">remote_path</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="kt">str</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="n">AppError</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">ssh_host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">config</span><span class="p">.</span><span class="n">ssh_host</span><span class="p">.</span><span class="n">clone</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="n">unwrap_or_else</span><span class="p">(</span><span class="o">||</span><span class="w"> </span><span class="s">"192.168.2.171"</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">ssh_port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">config</span><span class="p">.</span><span class="n">ssh_port</span><span class="p">.</span><span class="n">unwrap_or</span><span class="p">(</span><span class="mi">22</span><span class="p">);</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">ssh_user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">config</span><span class="p">.</span><span class="n">ssh_user</span><span class="p">.</span><span class="n">clone</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="n">unwrap_or_else</span><span class="p">(</span><span class="o">||</span><span class="w"> </span><span class="s">"tech"</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">ssh_password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">config</span><span class="p">.</span><span class="n">ssh_password</span><span class="p">.</span><span class="n">clone</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="n">unwrap_or_else</span><span class="p">(</span><span class="o">||</span><span class="w"> </span><span class="s">"tech"</span><span class="p">.</span><span class="n">to_string</span><span class="p">());</span>

<span class="w">    </span><span class="c1">// TCP 연결</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">tcp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TcpStream</span><span class="p">::</span><span class="n">connect</span><span class="p">(</span><span class="fm">format!</span><span class="p">(</span><span class="s">"{}:{}"</span><span class="p">,</span><span class="w"> </span><span class="n">ssh_host</span><span class="p">,</span><span class="w"> </span><span class="n">ssh_port</span><span class="p">))</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// SSH 세션 생성</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">sess</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Session</span><span class="p">::</span><span class="n">new</span><span class="p">()</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="n">sess</span><span class="p">.</span><span class="n">set_tcp_stream</span><span class="p">(</span><span class="n">tcp</span><span class="p">);</span>
<span class="w">    </span><span class="n">sess</span><span class="p">.</span><span class="n">handshake</span><span class="p">()</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 패스워드 인증</span>
<span class="w">    </span><span class="n">sess</span><span class="p">.</span><span class="n">userauth_password</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ssh_user</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">ssh_password</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>
<p><code>ssh2::Session</code>은 <code>TcpStream</code> 위에 SSH 프로토콜을 구현한다. <code>set_tcp_stream</code> → <code>handshake</code> → <code>userauth_password</code> 순서로 연결을 설정한다. 키 기반 인증도 지원하지만, 현재 환경에서는 패스워드 인증을 사용했다.</p>
<h3 id="sftp">SFTP 업로드</h3>
<p>직접 대상 경로에 파일을 쓰면 권한 문제가 발생할 수 있다. OpenSearch의 설정 디렉터리는 보통 root 소유이므로, 일반 사용자로는 직접 쓸 수 없다. 따라서 <code>/tmp</code>에 먼저 업로드한 뒤, <code>sudo mv</code>로 이동하는 2단계 전략을 사용한다.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// 1단계: SFTP로 /tmp에 업로드</span>
<span class="kd">let</span><span class="w"> </span><span class="n">sftp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sess</span><span class="p">.</span><span class="n">sftp</span><span class="p">()</span><span class="o">?</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">remote_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sftp</span><span class="p">.</span><span class="n">create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Path</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">temp_remote_path</span><span class="p">))</span><span class="o">?</span><span class="p">;</span>
<span class="n">remote_file</span><span class="p">.</span><span class="n">write_all</span><span class="p">(</span><span class="o">&amp;</span><span class="n">file_contents</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>

<span class="c1">// 2단계: sudo mv로 최종 위치 이동</span>
<span class="kd">let</span><span class="w"> </span><span class="n">mv_command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">format!</span><span class="p">(</span>
<span class="w">    </span><span class="s">"echo '{}' | sudo -S mv {} {}"</span><span class="p">,</span>
<span class="w">    </span><span class="n">ssh_password</span><span class="p">,</span><span class="w"> </span><span class="n">temp_remote_path</span><span class="p">,</span><span class="w"> </span><span class="n">remote_path</span>
<span class="p">);</span>
<span class="bp">self</span><span class="p">.</span><span class="n">execute_ssh_command</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sess</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">mv_command</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>

<span class="c1">// 3단계: 파일 권한 설정</span>
<span class="kd">let</span><span class="w"> </span><span class="n">chmod_cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">format!</span><span class="p">(</span>
<span class="w">    </span><span class="s">"echo '{}' | sudo -S chmod 644 {}"</span><span class="p">,</span>
<span class="w">    </span><span class="n">ssh_password</span><span class="p">,</span><span class="w"> </span><span class="n">remote_path</span>
<span class="p">);</span>
<span class="bp">self</span><span class="p">.</span><span class="n">execute_ssh_command</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sess</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">chmod_cmd</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
</code></pre></div>
<pre class="mermaid"><code>graph TD
    A[로컬 파일 읽기] --&gt; B[SFTP: /tmp/synonym.txt 업로드]
    B --&gt; C[sudo mkdir -p 대상 디렉터리]
    C --&gt; D[sudo mv /tmp/synonym.txt → conf/analysis/]
    D --&gt; E[sudo chmod 644 synonym.txt]
    E --&gt; F[ls -la로 파일 존재 확인]</code></pre>
<p><code>echo 'password' | sudo -S</code> 패턴으로 stdin을 통해 sudo 패스워드를 전달한다. <code>sudo -S</code> 옵션은 stdin에서 패스워드를 읽도록 지정한다.</p>
<h3 id="ssh_2">SSH 명령 실행</h3>
<div class="highlight"><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">execute_ssh_command</span><span class="p">(</span>
<span class="w">    </span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span>
<span class="w">    </span><span class="n">session</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">Session</span><span class="p">,</span>
<span class="w">    </span><span class="n">command</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="kt">str</span><span class="p">,</span>
<span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="n">AppError</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">channel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">session</span><span class="p">.</span><span class="n">channel_session</span><span class="p">()</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 보안: 패스워드가 포함된 명령은 로그에서 마스킹</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">safe_command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">command</span><span class="p">.</span><span class="n">contains</span><span class="p">(</span><span class="s">"echo"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s">"echo '***' | sudo -S command"</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">command</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="n">log</span><span class="p">::</span><span class="n">debug</span><span class="o">!</span><span class="p">(</span><span class="s">"Executing SSH command: {}"</span><span class="p">,</span><span class="w"> </span><span class="n">safe_command</span><span class="p">);</span>

<span class="w">    </span><span class="n">channel</span><span class="p">.</span><span class="n">exec</span><span class="p">(</span><span class="n">command</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 출력 읽기 (EOF까지)</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span><span class="p">::</span><span class="n">new</span><span class="p">();</span>
<span class="w">    </span><span class="n">channel</span><span class="p">.</span><span class="n">read_to_end</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">output</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="n">channel</span><span class="p">.</span><span class="n">wait_close</span><span class="p">()</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">exit_status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">channel</span><span class="p">.</span><span class="n">exit_status</span><span class="p">()</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">exit_status</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">Err</span><span class="p">(</span><span class="n">AppError</span><span class="p">::</span><span class="n">new</span><span class="p">(</span>
<span class="w">            </span><span class="s">"500"</span><span class="p">,</span>
<span class="w">            </span><span class="o">&amp;</span><span class="fm">format!</span><span class="p">(</span><span class="s">"Command failed with exit code: {}"</span><span class="p">,</span><span class="w"> </span><span class="n">exit_status</span><span class="p">),</span>
<span class="w">        </span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nb">Ok</span><span class="p">(())</span>
<span class="p">}</span>
</code></pre></div>
<p>보안을 위해 <code>echo</code> 명령이 포함된 경우(패스워드가 들어있으므로) 로그에서 마스킹 처리한다. 실제 명령은 그대로 실행하되, 로그에는 <code>echo '***' | sudo -S command</code>로 출력한다.</p>
<p><code>channel.read_to_end</code>로 출력을 모두 읽어야 <code>wait_close</code>가 정상적으로 동작한다. SSH 채널에서 출력을 읽지 않으면 버퍼가 차서 채널이 블록될 수 있다.</p>
<hr>
<h2 id="opensearch_1">OpenSearch 분석기 재로드</h2>
<p>동의어 파일을 배치한 후, OpenSearch에 분석기를 재로드하도록 요청한다. 이 API는 인덱스를 닫지 않고도 동의어를 반영할 수 있게 해주는 핵심 기능이다.</p>
<div class="highlight"><pre><span></span><code><span class="k">async</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">reload_search_analyzers</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="n">AppError</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">index_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">config</span>
<span class="w">        </span><span class="p">.</span><span class="n">opensearch_synonym_index</span>
<span class="w">        </span><span class="p">.</span><span class="n">clone</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="n">unwrap_or_else</span><span class="p">(</span><span class="o">||</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="s">"test-ab"</span><span class="p">.</span><span class="n">to_string</span><span class="p">()]);</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">success_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">error_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">errors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span><span class="p">::</span><span class="n">new</span><span class="p">();</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">index_name</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">&amp;</span><span class="n">index_names</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">match</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">refresh_single_index</span><span class="p">(</span><span class="n">index_name</span><span class="p">).</span><span class="k">await</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nb">Ok</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">success_count</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="nb">Err</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">error_count</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">                </span><span class="n">errors</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="fm">format!</span><span class="p">(</span><span class="s">"Index {}: {}"</span><span class="p">,</span><span class="w"> </span><span class="n">index_name</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">));</span>
<span class="w">                </span><span class="c1">// 하나 실패해도 나머지 계속 처리</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 전부 실패한 경우에만 에러 반환</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">success_count</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">!</span><span class="n">index_names</span><span class="p">.</span><span class="n">is_empty</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">Err</span><span class="p">(</span><span class="n">AppError</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="s">"500"</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">errors</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="s">"; "</span><span class="p">)));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nb">Ok</span><span class="p">(())</span>
<span class="p">}</span>

<span class="k">async</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">refresh_single_index</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">index_name</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="kt">str</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="n">AppError</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">transport</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">transport</span><span class="p">();</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">refresh_url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">format!</span><span class="p">(</span>
<span class="w">        </span><span class="s">"/_plugins/_refresh_search_analyzers/{}"</span><span class="p">,</span>
<span class="w">        </span><span class="n">index_name</span>
<span class="w">    </span><span class="p">);</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">transport</span>
<span class="w">        </span><span class="p">.</span><span class="n">send</span><span class="p">(</span>
<span class="w">            </span><span class="n">Method</span><span class="p">::</span><span class="n">Post</span><span class="p">,</span>
<span class="w">            </span><span class="o">&amp;</span><span class="n">refresh_url</span><span class="p">,</span>
<span class="w">            </span><span class="n">HeaderMap</span><span class="p">::</span><span class="n">new</span><span class="p">(),</span>
<span class="w">            </span><span class="nb">None</span><span class="p">::</span><span class="o">&lt;&amp;</span><span class="p">()</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">            </span><span class="nb">None</span><span class="p">::</span><span class="o">&lt;&amp;</span><span class="p">[</span><span class="kt">u8</span><span class="p">]</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">            </span><span class="nb">None</span><span class="p">,</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">!</span><span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">().</span><span class="n">is_success</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">error_body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">().</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">Err</span><span class="p">(</span><span class="n">AppError</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="s">"500"</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">error_body</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nb">Ok</span><span class="p">(())</span>
<span class="p">}</span>
</code></pre></div>
<p>여러 인덱스에 동의어가 적용될 수 있으므로, 설정에서 인덱스 목록을 받아 순차적으로 재로드한다. 부분 실패 전략을 적용하여, 하나의 인덱스에서 실패해도 나머지는 계속 처리한다. 전부 실패한 경우에만 에러를 반환한다.</p>
<p><code>_plugins/_refresh_search_analyzers</code>는 OpenSearch의 플러그인 API다. Elasticsearch에서는 <code>_cache/clear</code> + close/open이 필요하지만, OpenSearch에서는 이 단일 API로 분석기 설정을 핫 리로드할 수 있다.</p>
<hr>
<h2 id="_10">전체 파이프라인 조립</h2>
<p>모든 단계를 조립한 <code>index_synonym_data</code> 메서드:</p>
<div class="highlight"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">index_synonym_data</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="n">AppError</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// 1. DB에서 동의어 데이터 조회</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">synonym_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">db_fetch_service</span>
<span class="w">        </span><span class="p">.</span><span class="n">fetch_data_for_indexing</span><span class="p">(</span><span class="s">"synonym"</span><span class="p">,</span><span class="w"> </span><span class="s">"1"</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="n">log</span><span class="p">::</span><span class="n">info</span><span class="o">!</span><span class="p">(</span><span class="s">"Fetched {} synonym entries"</span><span class="p">,</span><span class="w"> </span><span class="n">synonym_data</span><span class="p">.</span><span class="n">len</span><span class="p">());</span>

<span class="w">    </span><span class="c1">// 2. OpenSearch 형식으로 변환</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">synonym_txt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">convert_to_synonym_format</span><span class="p">(</span><span class="o">&amp;</span><span class="n">synonym_data</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 빈 사전이면 스킵</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">synonym_txt</span><span class="p">.</span><span class="n">trim</span><span class="p">().</span><span class="n">is_empty</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">log</span><span class="p">::</span><span class="n">info</span><span class="o">!</span><span class="p">(</span><span class="s">"Empty synonym dictionary, skipping"</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">Ok</span><span class="p">(());</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 3. 로컬 파일 저장</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">local_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">write_to_file</span><span class="p">(</span><span class="o">&amp;</span><span class="n">synonym_txt</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// 4. SSH/SFTP로 원격 서버에 업로드</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">remote_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"/data/opensearch-dir/docker-file/conf/analysis/synonym.txt"</span><span class="p">;</span>
<span class="w">    </span><span class="k">match</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">upload_via_ssh</span><span class="p">(</span><span class="o">&amp;</span><span class="n">local_path</span><span class="p">,</span><span class="w"> </span><span class="n">remote_path</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nb">Ok</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">log</span><span class="p">::</span><span class="n">info</span><span class="o">!</span><span class="p">(</span><span class="s">"Successfully uploaded synonym"</span><span class="p">),</span>
<span class="w">        </span><span class="nb">Err</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">log</span><span class="p">::</span><span class="n">error</span><span class="o">!</span><span class="p">(</span><span class="s">"Failed to upload synonym: {}"</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">),</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 5. dictionary 폴더에 백업 저장</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">dictionary_filename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">format!</span><span class="p">(</span>
<span class="w">        </span><span class="s">"{}_{}_synonym.txt"</span><span class="p">,</span>
<span class="w">        </span><span class="bp">self</span><span class="p">.</span><span class="n">config</span><span class="p">.</span><span class="n">project_name</span><span class="p">,</span>
<span class="w">        </span><span class="bp">self</span><span class="p">.</span><span class="n">config</span><span class="p">.</span><span class="n">env</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nb">Err</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">save_to_dictionary</span><span class="p">(</span><span class="o">&amp;</span><span class="n">synonym_txt</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">dictionary_filename</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">log</span><span class="p">::</span><span class="n">error</span><span class="o">!</span><span class="p">(</span><span class="s">"Failed to save to dictionary folder: {}"</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// 6. OpenSearch 분석기 재로드</span>
<span class="w">    </span><span class="bp">self</span><span class="p">.</span><span class="n">reload_search_analyzers</span><span class="p">().</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="n">log</span><span class="p">::</span><span class="n">info</span><span class="o">!</span><span class="p">(</span><span class="s">"Successfully synonym indexing"</span><span class="p">);</span>
<span class="w">    </span><span class="nb">Ok</span><span class="p">(())</span>
<span class="p">}</span>
</code></pre></div>
<pre class="mermaid"><code>graph TD
    A[index_synonym_data 호출] --&gt; B[DB에서 동의어 조회]
    B --&gt; C{데이터 있음?}
    C --&gt;|없음| D[스킵]
    C --&gt;|있음| E[OpenSearch 형식 변환]
    E --&gt; F[로컬 파일 저장]
    F --&gt; G[SSH/SFTP 업로드]
    G --&gt;|성공| H[dictionary 백업 저장]
    G --&gt;|실패| I[에러 로그]
    I --&gt; H
    H --&gt; J[분석기 재로드]
    J --&gt; K[완료]</code></pre>
<p>SSH 업로드가 실패해도 로그만 남기고 분석기 재로드는 시도한다. 이전에 업로드한 파일이 남아있을 수 있으므로, 재로드가 의미 있을 수 있다.</p>
<hr>
<h2 id="_11">트러블슈팅</h2>
<h3 id="libssh2">libssh2 빌드 의존성</h3>
<p><code>ssh2</code> 크레이트는 libssh2의 Rust 바인딩이므로, 빌드 시 시스템 라이브러리가 필요하다. CI/CD 환경에서 빌드가 실패하는 경우가 있었다.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Ubuntu/Debian</span>
sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>libssl-dev<span class="w"> </span>pkg-config

<span class="c1"># CentOS/RHEL</span>
sudo<span class="w"> </span>yum<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>openssl-devel<span class="w"> </span>pkgconfig
</code></pre></div>
<p>Docker 빌드 시에도 이 패키지들을 설치 단계에 포함시켜야 한다.</p>
<h3 id="sftp_1">SFTP 권한 문제</h3>
<p>OpenSearch Docker 컨테이너의 설정 디렉터리는 root 소유인 경우가 많다. 일반 사용자로 SFTP 접속하면 해당 디렉터리에 직접 파일을 생성할 수 없다.</p>
<p>처음에는 SFTP로 직접 대상 경로에 쓰려고 시도했지만 권한 에러가 발생했다. 해결책으로 <code>/tmp</code>에 먼저 업로드한 뒤 <code>sudo mv</code>로 이동하는 2단계 방식을 채택했다. <code>/tmp</code>는 모든 사용자가 쓸 수 있으므로 SFTP 업로드가 성공하고, <code>sudo mv</code>는 SSH 채널 명령으로 실행하여 root 권한으로 파일을 이동시킨다.</p>
<h3 id="_12">디렉터리 부재</h3>
<p>원격 서버에 대상 디렉터리(<code>conf/analysis/</code>)가 존재하지 않을 수 있다. 파일 이동 전에 <code>sudo mkdir -p</code>로 디렉터리를 먼저 생성한다.</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="n">mkdir_cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">format!</span><span class="p">(</span>
<span class="w">    </span><span class="s">"echo '{}' | sudo -S mkdir -p {}"</span><span class="p">,</span>
<span class="w">    </span><span class="n">ssh_password</span><span class="p">,</span><span class="w"> </span><span class="n">remote_dir</span>
<span class="p">);</span>
<span class="k">match</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">execute_ssh_command</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sess</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">mkdir_cmd</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">Ok</span><span class="p">(</span><span class="n">_</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">log</span><span class="p">::</span><span class="n">info</span><span class="o">!</span><span class="p">(</span><span class="s">"Directory created or already exists"</span><span class="p">),</span>
<span class="w">    </span><span class="nb">Err</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">log</span><span class="p">::</span><span class="n">warn</span><span class="o">!</span><span class="p">(</span><span class="s">"Failed to create directory, proceeding anyway: {}"</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">),</span>
<span class="p">}</span>
</code></pre></div>
<p><code>mkdir -p</code>는 이미 존재해도 에러를 발생시키지 않으므로 안전하다. 디렉터리 생성 실패 시에도 <code>warn</code>만 남기고 진행한다. 이미 존재하는 디렉터리일 확률이 높기 때문이다.</p>
<h3 id="ssh_3">SSH 채널 출력 버퍼</h3>
<p>SSH 채널에서 명령을 실행한 후 출력을 읽지 않으면, 출력 버퍼가 차서 채널이 블록되고 결국 타임아웃이 발생한다. 반드시 <code>read_to_end</code>로 출력을 모두 소비해야 한다.</p>
<div class="highlight"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Vec</span><span class="p">::</span><span class="n">new</span><span class="p">();</span>
<span class="n">channel</span><span class="p">.</span><span class="n">read_to_end</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">output</span><span class="p">)</span><span class="o">?</span><span class="p">;</span><span class="w">  </span><span class="c1">// 반드시 호출</span>

<span class="n">channel</span><span class="p">.</span><span class="n">wait_close</span><span class="p">()</span><span class="o">?</span><span class="p">;</span>
</code></pre></div>
<p>이 순서가 중요하다. <code>read_to_end</code> → <code>wait_close</code> → <code>exit_status</code>. <code>read_to_end</code>를 건너뛰면 <code>wait_close</code>에서 무한 대기할 수 있다.</p>
<h3 id="_13">한글 동의어 인코딩</h3>
<p>동의어 파일에 한글이 포함되므로 UTF-8 인코딩을 보장해야 한다. Rust의 <code>String</code>은 기본적으로 UTF-8이고, <code>write_all(content.as_bytes())</code>는 UTF-8 바이트 시퀀스를 그대로 쓰므로 별도 인코딩 처리가 필요 없다. 다만 OpenSearch 서버 측에서 파일을 읽을 때 UTF-8로 해석하는지 확인이 필요했다.</p>
<hr>
<h2 id="opensearch_2">OpenSearch 인덱스 분석기 설정</h2>
<p>동의어가 실제로 검색에 반영되려면, 인덱스의 분석기 설정에 동의어 필터가 포함되어야 한다. 인덱스 생성 시 설정하는 분석기 구성은 다음과 같다.</p>
<div class="highlight"><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">create_multi_analyzer_settings</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">Value</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">json</span><span class="o">!</span><span class="p">({</span>
<span class="w">        </span><span class="s">"analysis"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="s">"filter"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="s">"oneway_synonym_filter"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="s">"type"</span><span class="p">:</span><span class="w"> </span><span class="s">"synonym"</span><span class="p">,</span>
<span class="w">                    </span><span class="s">"synonyms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">"애플,apple"</span><span class="p">],</span>
<span class="w">                    </span><span class="s">"expand"</span><span class="p">:</span><span class="w"> </span><span class="nc">true</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="s">"tokenizer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="s">"nori_tokenizer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="s">"type"</span><span class="p">:</span><span class="w"> </span><span class="s">"nori_tokenizer"</span><span class="p">,</span>
<span class="w">                    </span><span class="s">"decompound_mode"</span><span class="p">:</span><span class="w"> </span><span class="s">"mixed"</span><span class="p">,</span>
<span class="w">                    </span><span class="s">"user_dictionary_rules"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s">"애플"</span><span class="p">,</span><span class="w"> </span><span class="s">"펜슬"</span><span class="p">]</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">            </span><span class="s">"analyzer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="s">"index_analyzer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="s">"tokenizer"</span><span class="p">:</span><span class="w"> </span><span class="s">"nori_tokenizer"</span><span class="p">,</span>
<span class="w">                    </span><span class="s">"filter"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="s">"lowercase"</span><span class="p">,</span>
<span class="w">                        </span><span class="s">"oneway_synonym_filter"</span><span class="p">,</span>
<span class="w">                        </span><span class="s">"custom_shingle"</span>
<span class="w">                    </span><span class="p">]</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">                </span><span class="s">"search_analyzer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="s">"tokenizer"</span><span class="p">:</span><span class="w"> </span><span class="s">"nori_tokenizer"</span><span class="p">,</span>
<span class="w">                    </span><span class="s">"filter"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="s">"lowercase"</span><span class="p">,</span>
<span class="w">                        </span><span class="s">"oneway_synonym_filter"</span>
<span class="w">                    </span><span class="p">]</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">})</span>
<span class="p">}</span>
</code></pre></div>
<p><code>oneway_synonym_filter</code>는 인라인으로 기본 동의어를 포함하고, 파일 기반 동의어는 <code>synonyms_path</code> 옵션으로 별도 지정한다. <code>_refresh_search_analyzers</code> API를 호출하면 파일에서 동의어를 다시 읽어 분석기를 갱신한다.</p>
<p><code>nori_tokenizer</code>는 한국어 형태소 분석기로, <code>decompound_mode: "mixed"</code>를 사용하면 복합어를 원형과 분해된 형태 모두로 인덱싱한다. <code>user_dictionary_rules</code>에는 기본 사전에 없는 단어(신조어, 브랜드명 등)를 등록한다.</p>
<pre class="mermaid"><code>graph LR
    subgraph "인덱싱 시점"
        A[원본 텍스트] --&gt; B[nori_tokenizer]
        B --&gt; C[lowercase]
        C --&gt; D[synonym_filter]
        D --&gt; E[shingle]
        E --&gt; F[인덱스 저장]
    end

    subgraph "검색 시점"
        G[검색 쿼리] --&gt; H[nori_tokenizer]
        H --&gt; I[lowercase]
        I --&gt; J[synonym_filter]
        J --&gt; K[검색 실행]
    end</code></pre>
<p>인덱싱 시점과 검색 시점 모두에서 동의어 필터를 적용한다. 인덱싱 시점에 적용하면 "노트북"으로 인덱싱된 문서에 "랩탑"으로도 검색할 수 있고, 검색 시점에 적용하면 "랩탑"을 검색했을 때 "노트북"도 함께 검색된다. 양쪽 모두 적용하면 최대한의 재현율(recall)을 확보할 수 있다.</p>
<hr>
<h2 id="_14">다중 프로젝트 지원</h2>
<p>하나의 OpenSearch 클러스터에서 여러 프로젝트의 동의어를 관리해야 하는 상황도 고려했다. 프로젝트명과 환경을 파일명에 포함시켜 충돌을 방지한다.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// dictionary 폴더에도 프로젝트별 백업</span>
<span class="kd">let</span><span class="w"> </span><span class="n">dictionary_filename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">format!</span><span class="p">(</span>
<span class="w">    </span><span class="s">"{}_{}_synonym.txt"</span><span class="p">,</span>
<span class="w">    </span><span class="bp">self</span><span class="p">.</span><span class="n">config</span><span class="p">.</span><span class="n">project_name</span><span class="p">,</span>
<span class="w">    </span><span class="bp">self</span><span class="p">.</span><span class="n">config</span><span class="p">.</span><span class="n">env</span>
<span class="p">);</span>
<span class="bp">self</span><span class="p">.</span><span class="n">save_to_dictionary</span><span class="p">(</span><span class="o">&amp;</span><span class="n">synonym_txt</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">dictionary_filename</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
</code></pre></div>
<p>실제 파일 구조:</p>
<div class="highlight"><pre><span></span><code>./dictionary/
  ├── osstem_local_synonym.txt
  ├── osstem_stg_synonym.txt
  └── osstem_prd_synonym.txt
</code></pre></div>
<p>이 백업 파일은 SSH 업로드가 실패했을 때 수동 복구에 활용할 수 있고, 동의어 변경 이력을 추적하는 데에도 유용하다.</p>
<hr>
<h2 id="_15">결과 및 회고</h2>
<p>SSH/SFTP를 활용한 동의어 사전 자동 배포 파이프라인을 구현함으로써, 기존에 수동으로 수행하던 작업을 API 호출 하나로 자동화했다.</p>
<p><strong>정량적 성과:</strong></p>
<ul>
<li>동의어 반영 시간: 30분+ (수동) → 30초 (자동)</li>
<li>운영자 개입: 필요 → 불필요</li>
<li>실수로 인한 장애: 간헐적 발생 → 0건</li>
</ul>
<p><strong>설계 원칙:</strong></p>
<ul>
<li>2단계 업로드 전략(/tmp → sudo mv)으로 권한 문제를 깔끔하게 해결했다.</li>
<li>부분 실패 허용: 여러 인덱스 중 일부 재로드가 실패해도 나머지는 정상 처리된다.</li>
<li>보안 고려: 로그에서 패스워드를 마스킹하여, 로그 유출 시에도 SSH 크레덴셜이 노출되지 않는다.</li>
<li>백업 전략: 로컬 dictionary 폴더에 프로젝트/환경별 백업을 유지한다.</li>
</ul>
<p><strong>개선 여지:</strong></p>
<ul>
<li>현재 패스워드 인증을 사용하고 있는데, SSH 키 기반 인증으로 전환하면 보안이 강화된다. <code>ssh2</code> 크레이트는 <code>userauth_pubkey_file</code> 메서드를 제공하므로 전환이 용이하다.</li>
<li>동의어 파일의 diff를 계산하여 변경이 없으면 업로드를 건너뛰는 최적화가 가능하다. 동의어가 수천 건이 넘어가면 매번 전체를 업로드하는 것보다 변경 감지가 효율적이다.</li>
<li><code>ssh2</code>는 동기 API 기반(내부적으로 블로킹 I/O)이므로, <code>tokio::task::spawn_blocking</code>으로 감싸서 비동기 컨텍스트에서 안전하게 사용하는 것이 바람직하다. 현재는 동의어 배포가 빈번하지 않아 실용적 문제는 없지만, 원칙적으로는 개선해야 할 부분이다.</li>
</ul>
<p>Rust에서 SSH를 다루는 것은 Python의 paramiko나 Node.js의 ssh2에 비해 초기 설정(빌드 의존성 등)이 다소 번거롭지만, 한번 셋업하면 타입 안전성과 에러 핸들링의 명시성 덕분에 안정적인 구현을 유지할 수 있다.</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.sections", "navigation.path", "navigation.indexes", "navigation.top", "toc.follow", "navigation.tabs"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../custom.js"></script>
      
    
  
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>